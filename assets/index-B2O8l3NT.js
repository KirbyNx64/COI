import{r as N2,a as I2,b as ue,L as Si,u as Tm,c as Sm,B as x2,R as D2,d as is,N as Ru}from"./vendor-BIRSGIdg.js";import{E as O2,_ as M2}from"./pdf-utils-C-nx5KvR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Od={exports:{}},pl={};var L_;function j2(){if(L_)return pl;L_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:a,key:f,ref:l!==void 0?l:null,props:c}}return pl.Fragment=e,pl.jsx=i,pl.jsxs=i,pl}var P_;function V2(){return P_||(P_=1,Od.exports=j2()),Od.exports}var m=V2(),Md={exports:{}},gl={},jd={exports:{}},Vd={};var U_;function k2(){return U_||(U_=1,(function(s){function e(K,ie){var me=K.length;K.push(ie);e:for(;0<me;){var Me=me-1>>>1,Be=K[Me];if(0<l(Be,ie))K[Me]=ie,K[me]=Be,me=Me;else break e}}function i(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var ie=K[0],me=K.pop();if(me!==ie){K[0]=me;e:for(var Me=0,Be=K.length,rt=Be>>>1;Me<rt;){var Ge=2*(Me+1)-1,be=K[Ge],Je=Ge+1,xt=K[Je];if(0>l(be,me))Je<Be&&0>l(xt,be)?(K[Me]=xt,K[Je]=me,Me=Je):(K[Me]=be,K[Ge]=me,Me=Ge);else if(Je<Be&&0>l(xt,me))K[Me]=xt,K[Je]=me,Me=Je;else break e}}return ie}function l(K,ie){var me=K.sortIndex-ie.sortIndex;return me!==0?me:K.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var _=[],E=[],S=1,b=null,R=3,L=!1,q=!1,J=!1,G=!1,H=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ee(K){for(var ie=i(E);ie!==null;){if(ie.callback===null)a(E);else if(ie.startTime<=K)a(E),ie.sortIndex=ie.expirationTime,e(_,ie);else break;ie=i(E)}}function fe(K){if(J=!1,ee(K),!q)if(i(_)!==null)q=!0,ce||(ce=!0,V());else{var ie=i(E);ie!==null&&ct(fe,ie.startTime-K)}}var ce=!1,x=-1,w=5,I=-1;function M(){return G?!0:!(s.unstable_now()-I<w)}function O(){if(G=!1,ce){var K=s.unstable_now();I=K;var ie=!0;try{e:{q=!1,J&&(J=!1,ne(x),x=-1),L=!0;var me=R;try{t:{for(ee(K),b=i(_);b!==null&&!(b.expirationTime>K&&M());){var Me=b.callback;if(typeof Me=="function"){b.callback=null,R=b.priorityLevel;var Be=Me(b.expirationTime<=K);if(K=s.unstable_now(),typeof Be=="function"){b.callback=Be,ee(K),ie=!0;break t}b===i(_)&&a(_),ee(K)}else a(_);b=i(_)}if(b!==null)ie=!0;else{var rt=i(E);rt!==null&&ct(fe,rt.startTime-K),ie=!1}}break e}finally{b=null,R=me,L=!1}ie=void 0}}finally{ie?V():ce=!1}}}var V;if(typeof W=="function")V=function(){W(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,at=C.port2;C.port1.onmessage=O,V=function(){at.postMessage(null)}}else V=function(){H(O,0)};function ct(K,ie){x=H(function(){K(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(K){switch(R){case 1:case 2:case 3:var ie=3;break;default:ie=R}var me=R;R=ie;try{return K()}finally{R=me}},s.unstable_requestPaint=function(){G=!0},s.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=R;R=K;try{return ie()}finally{R=me}},s.unstable_scheduleCallback=function(K,ie,me){var Me=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Me+me:Me):me=Me,K){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=me+Be,K={id:S++,callback:ie,priorityLevel:K,startTime:me,expirationTime:Be,sortIndex:-1},me>Me?(K.sortIndex=me,e(E,K),i(_)===null&&K===i(E)&&(J?(ne(x),x=-1):J=!0,ct(fe,me-Me))):(K.sortIndex=Be,e(_,K),q||L||(q=!0,ce||(ce=!0,V()))),K},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(K){var ie=R;return function(){var me=R;R=ie;try{return K.apply(this,arguments)}finally{R=me}}}})(Vd)),Vd}var z_;function L2(){return z_||(z_=1,jd.exports=k2()),jd.exports}var B_;function P2(){if(B_)return gl;B_=1;var s=L2(),e=N2(),i=I2();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function _(t){if(c(t)!==t)throw Error(a(188))}function E(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,o=n;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return _(h),t;if(d===o)return _(h),n;d=d.sibling}throw Error(a(188))}if(r.return!==o.return)r=h,o=d;else{for(var y=!1,T=h.child;T;){if(T===r){y=!0,r=h,o=d;break}if(T===o){y=!0,o=h,r=d;break}T=T.sibling}if(!y){for(T=d.child;T;){if(T===r){y=!0,r=d,o=h;break}if(T===o){y=!0,o=d,r=h;break}T=T.sibling}if(!y)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function S(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=S(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,R=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function at(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case H:return"Profiler";case G:return"StrictMode";case fe:return"Suspense";case ce:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case W:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case ee:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return n=t.displayName||null,n!==null?n:at(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return at(t(n))}catch{}}return null}var ct=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Me=[],Be=-1;function rt(t){return{current:t}}function Ge(t){0>Be||(t.current=Me[Be],Me[Be]=null,Be--)}function be(t,n){Be++,Me[Be]=t.current,t.current=n}var Je=rt(null),xt=rt(null),Zt=rt(null),cn=rt(null);function Wn(t,n){switch(be(Zt,n),be(xt,t),be(Je,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?r_(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=r_(n),t=o_(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ge(Je),be(Je,t)}function un(){Ge(Je),Ge(xt),Ge(Zt)}function ds(t){t.memoizedState!==null&&be(cn,t);var n=Je.current,r=o_(n,t.type);n!==r&&(be(xt,t),be(Je,r))}function wt(t){xt.current===t&&(Ge(Je),Ge(xt)),cn.current===t&&(Ge(cn),hl._currentValue=me)}var ms,ki;function hn(t){if(ms===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);ms=n&&n[1]||"",ki=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ms+t+ki}var ma=!1;function Li(t,n){if(!t||ma)return"";ma=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(F){var z=F}Reflect.construct(t,[],X)}else{try{X.call()}catch(F){z=F}t.call(X.prototype)}}else{try{throw Error()}catch(F){z=F}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(F){if(F&&z&&typeof F.stack=="string")return[F.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],T=d[1];if(y&&T){var N=y.split(`
`),U=T.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===U.length)for(o=N.length-1,h=U.length-1;1<=o&&0<=h&&N[o]!==U[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==U[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==U[h]){var Q=`
`+N[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ma=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?hn(r):""}function ps(t,n){switch(t.tag){case 26:case 27:case 5:return hn(t.type);case 16:return hn("Lazy");case 13:return t.child!==n&&n!==null?hn("Suspense Fallback"):hn("Suspense");case 19:return hn("SuspenseList");case 0:case 15:return Li(t.type,!1);case 11:return Li(t.type.render,!1);case 1:return Li(t.type,!0);case 31:return hn("Activity");default:return""}}function oe(t){try{var n="",r=null;do n+=ps(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var re=Object.prototype.hasOwnProperty,Ve=s.unstable_scheduleCallback,fn=s.unstable_cancelCallback,pa=s.unstable_shouldYield,Jl=s.unstable_requestPaint,Xt=s.unstable_now,ga=s.unstable_getCurrentPriorityLevel,mo=s.unstable_ImmediatePriority,po=s.unstable_UserBlockingPriority,gs=s.unstable_NormalPriority,jh=s.unstable_LowPriority,Zl=s.unstable_IdlePriority,Wl=s.log,ec=s.unstable_setDisableYieldValue,Pn=null,kt=null;function bn(t){if(typeof Wl=="function"&&ec(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Pn,t)}catch{}}var ut=Math.clz32?Math.clz32:nc,tc=Math.log,rr=Math.LN2;function nc(t){return t>>>=0,t===0?32:31-(tc(t)/rr|0)|0}var ei=256,ya=262144,pt=4194304;function ti(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ni(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=ti(o):(y&=T,y!==0?h=ti(y):r||(r=T&~t,r!==0&&(h=ti(r))))):(T=o&~d,T!==0?h=ti(T):y!==0?h=ti(y):r||(r=o&~t,r!==0&&(h=ti(r)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,r=n&-n,d>=r||d===32&&(r&4194048)!==0)?n:h}function Un(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Vh(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(){var t=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),t}function ii(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function _a(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function kh(t,n,r,o,h,d){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,U=t.hiddenUpdates;for(r=y&~r;0<r;){var Q=31-ut(r),X=1<<Q;T[Q]=0,N[Q]=-1;var z=U[Q];if(z!==null)for(U[Q]=null,Q=0;Q<z.length;Q++){var F=z[Q];F!==null&&(F.lane&=-536870913)}r&=~X}o!==0&&va(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~n))}function va(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-ut(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function go(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-ut(r),h=1<<o;h&n|t[o]&n&&(t[o]|=n),r&=~h}}function yo(t,n){var r=n&-n;return r=(r&42)!==0?1:Ea(r),(r&(t.suspendedLanes|n))!==0?0:r}function Ea(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sc(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:x_(t.type))}function zn(t,n){var r=ie.p;try{return ie.p=t,n()}finally{ie.p=r}}var Bn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Bn,Dt="__reactProps$"+Bn,si="__reactContainer$"+Bn,or="__reactEvents$"+Bn,Lh="__reactListeners$"+Bn,ac="__reactHandles$"+Bn,rc="__reactResources$"+Bn,ai="__reactMarker$"+Bn;function lr(t){delete t[gt],delete t[Dt],delete t[or],delete t[Lh],delete t[ac]}function ri(t){var n=t[gt];if(n)return n;for(var r=t.parentNode;r;){if(n=r[si]||r[gt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=m_(t);t!==null;){if(r=t[gt])return r;t=m_(t)}return n}t=r,r=t.parentNode}return null}function wn(t){if(t=t[gt]||t[si]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function dn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function oi(t){var n=t[rc];return n||(n=t[rc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function yt(t){t[ai]=!0}var _o=new Set,vo={};function li(t,n){ci(t,n),ci(t+"Capture",n)}function ci(t,n){for(vo[t]=n,t=0;t<n.length;t++)_o.add(n[t])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),To={},So={};function oc(t){return re.call(So,t)?!0:re.call(To,t)?!1:Eo.test(t)?So[t]=!0:(To[t]=!0,!1)}function cr(t,n,r){if(oc(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function mn(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function _t(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function Ot(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ys(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ao(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(y){r=""+y,d.call(this,y)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function qe(t){if(!t._valueTracker){var n=ys(t)?"checked":"value";t._valueTracker=Ao(t,n,""+t[n])}}function Ta(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=ys(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sa=/[\n"\\]/g;function Wt(t){return t.replace(Sa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ur(t,n,r,o,h,d,y,T){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),n!=null?y==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ot(n)):t.value!==""+Ot(n)&&(t.value=""+Ot(n)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),n!=null?bo(t,y,Ot(n)):r!=null?bo(t,y,Ot(r)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ot(T):t.removeAttribute("name")}function lc(t,n,r,o,h,d,y,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){qe(t);return}r=r!=null?""+Ot(r):"",n=n!=null?""+Ot(n):r,T||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),qe(t)}function bo(t,n,r){n==="number"&&ui(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function _s(t,n,r,o){if(t=t.options,n){n={};for(var h=0;h<r.length;h++)n["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=n.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Ot(r),n=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function cc(t,n,r){if(n!=null&&(n=""+Ot(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Ot(r):""}function vs(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(a(92));if(ct(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Ot(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),qe(t)}function en(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||uc.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function Ro(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&r[h]!==o&&wo(t,h,o)}else for(var d in n)n.hasOwnProperty(d)&&wo(t,d,n[d])}function hr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Es=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fr(t){return Es.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qn(){}var Co=null;function Rn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ts=null,hi=null;function Aa(t){var n=wn(t);if(n&&(t=n.stateNode)){var r=t[Dt]||null;e:switch(t=n.stateNode,n.type){case"input":if(ur(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Wt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var h=o[Dt]||null;if(!h)throw Error(a(90));ur(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&Ta(o)}break e;case"textarea":cc(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&_s(t,!!r.multiple,n,!1)}}}var dr=!1;function Ss(t,n,r){if(dr)return t(n,r);dr=!0;try{var o=t(n);return o}finally{if(dr=!1,(Ts!==null||hi!==null)&&(su(),Ts&&(n=Ts,t=hi,hi=Ts=null,Aa(n),t)))for(n=0;n<t.length;n++)Aa(t[n])}}function Hn(t,n){var r=t.stateNode;if(r===null)return null;var o=r[Dt]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=!1;if(Cn)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){ba=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{ba=!1}var fi=null,No=null,wa=null;function Io(){if(wa)return wa;var t,n=No,r=n.length,o,h="value"in fi?fi.value:fi.textContent,d=h.length;for(t=0;t<r&&n[t]===h[t];t++);var y=r-t;for(o=1;o<=y&&n[r-o]===h[d-o];o++);return wa=h.slice(t,1<o?1-o:void 0)}function Ra(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function Fn(){return!1}function Lt(t){function n(r,o,h,d,y){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(r=t[T],this[T]=r?r(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ui:Fn,this.isPropagationStopped=Fn,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),n}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=Lt(zi),As=b({},zi,{view:0,detail:0}),xo=Lt(As),bs,mr,mi,pr=b({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mi&&(mi&&t.type==="mousemove"?(bs=t.screenX-mi.screenX,mr=t.screenY-mi.screenY):mr=bs=0,mi=t),bs)},movementY:function(t){return"movementY"in t?t.movementY:mr}}),Do=Lt(pr),Ca=b({},pr,{dataTransfer:0}),fc=Lt(Ca),dc=b({},As,{relatedTarget:0}),Na=Lt(dc),Oo=b({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),mc=Lt(Oo),gr=b({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pc=Lt(gr),gc=b({},zi,{data:0}),pi=Lt(gc),yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=vc[t])?!!n[t]:!1}function ws(){return Ec}var $t=b({},As,{key:function(t){if(t.key){var n=yc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_c[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(t){return t.type==="keypress"?Ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tc=Lt($t),Sc=b({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=Lt(Sc),u=b({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),g=Lt(u),v=b({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Lt(v),k=b({},pr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B=Lt(k),te=b({},zi,{newState:0,oldState:0}),Te=Lt(te),ht=[9,13,27,32],Pe=Cn&&"CompositionEvent"in window,tt=null;Cn&&"documentMode"in document&&(tt=document.documentMode);var Nn=Cn&&"TextEvent"in window&&!tt,gi=Cn&&(!Pe||tt&&8<tt&&11>=tt),Gn=" ",Qn=!1;function Ia(t,n){switch(t){case"keyup":return ht.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _r=!1;function ZE(t,n){switch(t){case"compositionend":return yr(n);case"keypress":return n.which!==32?null:(Qn=!0,Gn);case"textInput":return t=n.data,t===Gn&&Qn?null:t;default:return null}}function WE(t,n){if(_r)return t==="compositionend"||!Pe&&Ia(t,n)?(t=Io(),wa=No=fi=null,_r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gi&&n.locale!=="ko"?null:n.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!eT[t.type]:n==="textarea"}function _p(t,n,r,o){Ts?hi?hi.push(o):hi=[o]:Ts=o,n=hu(n,"onChange"),0<n.length&&(r=new di("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var Mo=null,jo=null;function tT(t){e_(t,0)}function Ac(t){var n=dn(t);if(Ta(n))return t}function vp(t,n){if(t==="change")return n}var Ep=!1;if(Cn){var Ph;if(Cn){var Uh="oninput"in document;if(!Uh){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Uh=typeof Tp.oninput=="function"}Ph=Uh}else Ph=!1;Ep=Ph&&(!document.documentMode||9<document.documentMode)}function Sp(){Mo&&(Mo.detachEvent("onpropertychange",Ap),jo=Mo=null)}function Ap(t){if(t.propertyName==="value"&&Ac(jo)){var n=[];_p(n,jo,t,Rn(t)),Ss(tT,n)}}function nT(t,n,r){t==="focusin"?(Sp(),Mo=n,jo=r,Mo.attachEvent("onpropertychange",Ap)):t==="focusout"&&Sp()}function iT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ac(jo)}function sT(t,n){if(t==="click")return Ac(n)}function aT(t,n){if(t==="input"||t==="change")return Ac(n)}function rT(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var pn=typeof Object.is=="function"?Object.is:rT;function Vo(t,n){if(pn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!re.call(n,h)||!pn(t[h],n[h]))return!1}return!0}function bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wp(t,n){var r=bp(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bp(r)}}function Rp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Rp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Cp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=ui(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=ui(t.document)}return n}function zh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var oT=Cn&&"documentMode"in document&&11>=document.documentMode,vr=null,Bh=null,ko=null,qh=!1;function Np(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qh||vr==null||vr!==ui(o)||(o=vr,"selectionStart"in o&&zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ko&&Vo(ko,o)||(ko=o,o=hu(Bh,"onSelect"),0<o.length&&(n=new di("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=vr)))}function xa(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Er={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},Hh={},Ip={};Cn&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Da(t){if(Hh[t])return Hh[t];if(!Er[t])return t;var n=Er[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Ip)return Hh[t]=n[r];return t}var xp=Da("animationend"),Dp=Da("animationiteration"),Op=Da("animationstart"),lT=Da("transitionrun"),cT=Da("transitionstart"),uT=Da("transitioncancel"),Mp=Da("transitionend"),jp=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function Kn(t,n){jp.set(t,n),li(n,[t])}var bc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},In=[],Tr=0,Gh=0;function wc(){for(var t=Tr,n=Gh=Tr=0;n<t;){var r=In[n];In[n++]=null;var o=In[n];In[n++]=null;var h=In[n];In[n++]=null;var d=In[n];if(In[n++]=null,o!==null&&h!==null){var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}d!==0&&Vp(r,h,d)}}function Rc(t,n,r,o){In[Tr++]=t,In[Tr++]=n,In[Tr++]=r,In[Tr++]=o,Gh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Qh(t,n,r,o){return Rc(t,n,r,o),Cc(t)}function Oa(t,n){return Rc(t,null,null,n),Cc(t)}function Vp(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var h=!1,d=t.return;d!==null;)d.childLanes|=r,o=d.alternate,o!==null&&(o.childLanes|=r),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-ut(r),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=r|536870912),d):null}function Cc(t){if(50<sl)throw sl=0,nd=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Sr={};function hT(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,n,r,o){return new hT(t,n,r,o)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qi(t,n){var r=t.alternate;return r===null?(r=gn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function kp(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Nc(t,n,r,o,h,d){var y=0;if(o=t,typeof t=="function")Kh(t)&&(y=1);else if(typeof t=="string")y=g2(t,r,Je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=gn(31,r,n,h),t.elementType=I,t.lanes=d,t;case J:return Ma(r.children,h,d,n);case G:y=8,h|=24;break;case H:return t=gn(12,r,n,h|2),t.elementType=H,t.lanes=d,t;case fe:return t=gn(13,r,n,h),t.elementType=fe,t.lanes=d,t;case ce:return t=gn(19,r,n,h),t.elementType=ce,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:y=10;break e;case ne:y=9;break e;case ee:y=11;break e;case x:y=14;break e;case w:y=16,o=null;break e}y=29,r=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=gn(y,r,n,h),n.elementType=t,n.type=o,n.lanes=d,n}function Ma(t,n,r,o){return t=gn(7,t,o,n),t.lanes=r,t}function Yh(t,n,r){return t=gn(6,t,null,n),t.lanes=r,t}function Lp(t){var n=gn(18,null,null,0);return n.stateNode=t,n}function Xh(t,n,r){return n=gn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Pp=new WeakMap;function xn(t,n){if(typeof t=="object"&&t!==null){var r=Pp.get(t);return r!==void 0?r:(n={value:t,source:n,stack:oe(n)},Pp.set(t,n),n)}return{value:t,source:n,stack:oe(n)}}var Ar=[],br=0,Ic=null,Lo=0,Dn=[],On=0,Rs=null,yi=1,_i="";function Hi(t,n){Ar[br++]=Lo,Ar[br++]=Ic,Ic=t,Lo=n}function Up(t,n,r){Dn[On++]=yi,Dn[On++]=_i,Dn[On++]=Rs,Rs=t;var o=yi;t=_i;var h=32-ut(o)-1;o&=~(1<<h),r+=1;var d=32-ut(n)+h;if(30<d){var y=h-h%5;d=(o&(1<<y)-1).toString(32),o>>=y,h-=y,yi=1<<32-ut(n)+h|r<<h|o,_i=d+t}else yi=1<<d|r<<h|o,_i=t}function $h(t){t.return!==null&&(Hi(t,1),Up(t,1,0))}function Jh(t){for(;t===Ic;)Ic=Ar[--br],Ar[br]=null,Lo=Ar[--br],Ar[br]=null;for(;t===Rs;)Rs=Dn[--On],Dn[On]=null,_i=Dn[--On],Dn[On]=null,yi=Dn[--On],Dn[On]=null}function zp(t,n){Dn[On++]=yi,Dn[On++]=_i,Dn[On++]=Rs,yi=n.id,_i=n.overflow,Rs=t}var Pt=null,Ze=null,Oe=!1,Cs=null,Mn=!1,Zh=Error(a(519));function Ns(t){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Po(xn(n,t)),Zh}function Bp(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[gt]=t,n[Dt]=o,r){case"dialog":Re("cancel",n),Re("close",n);break;case"iframe":case"object":case"embed":Re("load",n);break;case"video":case"audio":for(r=0;r<rl.length;r++)Re(rl[r],n);break;case"source":Re("error",n);break;case"img":case"image":case"link":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"input":Re("invalid",n),lc(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Re("invalid",n);break;case"textarea":Re("invalid",n),vs(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||s_(n.textContent,r)?(o.popover!=null&&(Re("beforetoggle",n),Re("toggle",n)),o.onScroll!=null&&Re("scroll",n),o.onScrollEnd!=null&&Re("scrollend",n),o.onClick!=null&&(n.onclick=qn),n=!0):n=!1,n||Ns(t,!0)}function qp(t){for(Pt=t.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Pt=Pt.return}}function wr(t){if(t!==Pt)return!1;if(!Oe)return qp(t),Oe=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||yd(t.type,t.memoizedProps)),r=!r),r&&Ze&&Ns(t),qp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ze=d_(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ze=d_(t)}else n===27?(n=Ze,qs(t.type)?(t=Sd,Sd=null,Ze=t):Ze=n):Ze=Pt?Vn(t.stateNode.nextSibling):null;return!0}function ja(){Ze=Pt=null,Oe=!1}function Wh(){var t=Cs;return t!==null&&(an===null?an=t:an.push.apply(an,t),Cs=null),t}function Po(t){Cs===null?Cs=[t]:Cs.push(t)}var ef=rt(null),Va=null,Fi=null;function Is(t,n,r){be(ef,n._currentValue),n._currentValue=r}function Gi(t){t._currentValue=ef.current,Ge(ef)}function tf(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function nf(t,n,r,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var N=0;N<n.length;N++)if(T.context===n[N]){d.lanes|=r,T=d.alternate,T!==null&&(T.lanes|=r),tf(d.return,r,t),o||(y=null);break e}d=T.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(a(341));y.lanes|=r,d=y.alternate,d!==null&&(d.lanes|=r),tf(y,r,t),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===t){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function Rr(t,n,r,o){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(a(387));if(y=y.memoizedProps,y!==null){var T=h.type;pn(h.pendingProps.value,y.value)||(t!==null?t.push(T):t=[T])}}else if(h===cn.current){if(y=h.alternate,y===null)throw Error(a(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hl):t=[hl])}h=h.return}t!==null&&nf(n,t,r,o),n.flags|=262144}function xc(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ka(t){Va=t,Fi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ut(t){return Hp(Va,t)}function Dc(t,n){return Va===null&&ka(t),Hp(t,n)}function Hp(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Fi===null){if(t===null)throw Error(a(308));Fi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Fi=Fi.next=n;return r}var fT=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},dT=s.unstable_scheduleCallback,mT=s.unstable_NormalPriority,vt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new fT,data:new Map,refCount:0}}function Uo(t){t.refCount--,t.refCount===0&&dT(mT,function(){t.controller.abort()})}var zo=null,af=0,Cr=0,Nr=null;function pT(t,n){if(zo===null){var r=zo=[];af=0,Cr=ld(),Nr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return af++,n.then(Fp,Fp),n}function Fp(){if(--af===0&&zo!==null){Nr!==null&&(Nr.status="fulfilled");var t=zo;zo=null,Cr=0,Nr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function gT(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<r.length;h++)(0,r[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var Gp=K.S;K.S=function(t,n){Ny=Xt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&pT(t,n),Gp!==null&&Gp(t,n)};var La=rt(null);function rf(){var t=La.current;return t!==null?t:$e.pooledCache}function Oc(t,n){n===null?be(La,La.current):be(La,n.pool)}function Qp(){var t=rf();return t===null?null:{parent:vt._currentValue,pool:t}}var Ir=Error(a(460)),of=Error(a(474)),Mc=Error(a(542)),jc={then:function(){}};function Kp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yp(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(qn,qn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,$p(t),t;default:if(typeof n.status=="string")n.then(qn,qn);else{if(t=$e,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,$p(t),t}throw Ua=n,Ir}}function Pa(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ua=r,Ir):r}}var Ua=null;function Xp(){if(Ua===null)throw Error(a(459));var t=Ua;return Ua=null,t}function $p(t){if(t===Ir||t===Mc)throw Error(a(483))}var xr=null,Bo=0;function Vc(t){var n=Bo;return Bo+=1,xr===null&&(xr=[]),Yp(xr,t,n)}function qo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function kc(t,n){throw n.$$typeof===R?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Jp(t){function n(j,D){if(t){var P=j.deletions;P===null?(j.deletions=[D],j.flags|=16):P.push(D)}}function r(j,D){if(!t)return null;for(;D!==null;)n(j,D),D=D.sibling;return null}function o(j){for(var D=new Map;j!==null;)j.key!==null?D.set(j.key,j):D.set(j.index,j),j=j.sibling;return D}function h(j,D){return j=qi(j,D),j.index=0,j.sibling=null,j}function d(j,D,P){return j.index=P,t?(P=j.alternate,P!==null?(P=P.index,P<D?(j.flags|=67108866,D):P):(j.flags|=67108866,D)):(j.flags|=1048576,D)}function y(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,D,P,Y){return D===null||D.tag!==6?(D=Yh(P,j.mode,Y),D.return=j,D):(D=h(D,P),D.return=j,D)}function N(j,D,P,Y){var de=P.type;return de===J?Q(j,D,P.props.children,Y,P.key):D!==null&&(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Pa(de)===D.type)?(D=h(D,P.props),qo(D,P),D.return=j,D):(D=Nc(P.type,P.key,P.props,null,j.mode,Y),qo(D,P),D.return=j,D)}function U(j,D,P,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=Xh(P,j.mode,Y),D.return=j,D):(D=h(D,P.children||[]),D.return=j,D)}function Q(j,D,P,Y,de){return D===null||D.tag!==7?(D=Ma(P,j.mode,Y,de),D.return=j,D):(D=h(D,P),D.return=j,D)}function X(j,D,P){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Yh(""+D,j.mode,P),D.return=j,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case L:return P=Nc(D.type,D.key,D.props,null,j.mode,P),qo(P,D),P.return=j,P;case q:return D=Xh(D,j.mode,P),D.return=j,D;case w:return D=Pa(D),X(j,D,P)}if(ct(D)||V(D))return D=Ma(D,j.mode,P,null),D.return=j,D;if(typeof D.then=="function")return X(j,Vc(D),P);if(D.$$typeof===W)return X(j,Dc(j,D),P);kc(j,D)}return null}function z(j,D,P,Y){var de=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return de!==null?null:T(j,D,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case L:return P.key===de?N(j,D,P,Y):null;case q:return P.key===de?U(j,D,P,Y):null;case w:return P=Pa(P),z(j,D,P,Y)}if(ct(P)||V(P))return de!==null?null:Q(j,D,P,Y,null);if(typeof P.then=="function")return z(j,D,Vc(P),Y);if(P.$$typeof===W)return z(j,D,Dc(j,P),Y);kc(j,P)}return null}function F(j,D,P,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(P)||null,T(D,j,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:return j=j.get(Y.key===null?P:Y.key)||null,N(D,j,Y,de);case q:return j=j.get(Y.key===null?P:Y.key)||null,U(D,j,Y,de);case w:return Y=Pa(Y),F(j,D,P,Y,de)}if(ct(Y)||V(Y))return j=j.get(P)||null,Q(D,j,Y,de,null);if(typeof Y.then=="function")return F(j,D,P,Vc(Y),de);if(Y.$$typeof===W)return F(j,D,P,Dc(D,Y),de);kc(D,Y)}return null}function ae(j,D,P,Y){for(var de=null,ke=null,le=D,Ae=D=0,Ne=null;le!==null&&Ae<P.length;Ae++){le.index>Ae?(Ne=le,le=null):Ne=le.sibling;var Le=z(j,le,P[Ae],Y);if(Le===null){le===null&&(le=Ne);break}t&&le&&Le.alternate===null&&n(j,le),D=d(Le,D,Ae),ke===null?de=Le:ke.sibling=Le,ke=Le,le=Ne}if(Ae===P.length)return r(j,le),Oe&&Hi(j,Ae),de;if(le===null){for(;Ae<P.length;Ae++)le=X(j,P[Ae],Y),le!==null&&(D=d(le,D,Ae),ke===null?de=le:ke.sibling=le,ke=le);return Oe&&Hi(j,Ae),de}for(le=o(le);Ae<P.length;Ae++)Ne=F(le,j,Ae,P[Ae],Y),Ne!==null&&(t&&Ne.alternate!==null&&le.delete(Ne.key===null?Ae:Ne.key),D=d(Ne,D,Ae),ke===null?de=Ne:ke.sibling=Ne,ke=Ne);return t&&le.forEach(function(Ks){return n(j,Ks)}),Oe&&Hi(j,Ae),de}function ge(j,D,P,Y){if(P==null)throw Error(a(151));for(var de=null,ke=null,le=D,Ae=D=0,Ne=null,Le=P.next();le!==null&&!Le.done;Ae++,Le=P.next()){le.index>Ae?(Ne=le,le=null):Ne=le.sibling;var Ks=z(j,le,Le.value,Y);if(Ks===null){le===null&&(le=Ne);break}t&&le&&Ks.alternate===null&&n(j,le),D=d(Ks,D,Ae),ke===null?de=Ks:ke.sibling=Ks,ke=Ks,le=Ne}if(Le.done)return r(j,le),Oe&&Hi(j,Ae),de;if(le===null){for(;!Le.done;Ae++,Le=P.next())Le=X(j,Le.value,Y),Le!==null&&(D=d(Le,D,Ae),ke===null?de=Le:ke.sibling=Le,ke=Le);return Oe&&Hi(j,Ae),de}for(le=o(le);!Le.done;Ae++,Le=P.next())Le=F(le,j,Ae,Le.value,Y),Le!==null&&(t&&Le.alternate!==null&&le.delete(Le.key===null?Ae:Le.key),D=d(Le,D,Ae),ke===null?de=Le:ke.sibling=Le,ke=Le);return t&&le.forEach(function(C2){return n(j,C2)}),Oe&&Hi(j,Ae),de}function Xe(j,D,P,Y){if(typeof P=="object"&&P!==null&&P.type===J&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case L:e:{for(var de=P.key;D!==null;){if(D.key===de){if(de=P.type,de===J){if(D.tag===7){r(j,D.sibling),Y=h(D,P.props.children),Y.return=j,j=Y;break e}}else if(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Pa(de)===D.type){r(j,D.sibling),Y=h(D,P.props),qo(Y,P),Y.return=j,j=Y;break e}r(j,D);break}else n(j,D);D=D.sibling}P.type===J?(Y=Ma(P.props.children,j.mode,Y,P.key),Y.return=j,j=Y):(Y=Nc(P.type,P.key,P.props,null,j.mode,Y),qo(Y,P),Y.return=j,j=Y)}return y(j);case q:e:{for(de=P.key;D!==null;){if(D.key===de)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){r(j,D.sibling),Y=h(D,P.children||[]),Y.return=j,j=Y;break e}else{r(j,D);break}else n(j,D);D=D.sibling}Y=Xh(P,j.mode,Y),Y.return=j,j=Y}return y(j);case w:return P=Pa(P),Xe(j,D,P,Y)}if(ct(P))return ae(j,D,P,Y);if(V(P)){if(de=V(P),typeof de!="function")throw Error(a(150));return P=de.call(P),ge(j,D,P,Y)}if(typeof P.then=="function")return Xe(j,D,Vc(P),Y);if(P.$$typeof===W)return Xe(j,D,Dc(j,P),Y);kc(j,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,D!==null&&D.tag===6?(r(j,D.sibling),Y=h(D,P),Y.return=j,j=Y):(r(j,D),Y=Yh(P,j.mode,Y),Y.return=j,j=Y),y(j)):r(j,D)}return function(j,D,P,Y){try{Bo=0;var de=Xe(j,D,P,Y);return xr=null,de}catch(le){if(le===Ir||le===Mc)throw le;var ke=gn(29,le,null,j.mode);return ke.lanes=Y,ke.return=j,ke}finally{}}}var za=Jp(!0),Zp=Jp(!1),xs=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ds(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Os(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ue&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Cc(t),Vp(t,null,r),n}return Rc(t,o,n,r),Cc(t)}function Ho(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,go(t,r)}}function uf(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,r=r.next}while(r!==null);d===null?h=d=n:d=d.next=n}else h=d=n;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var hf=!1;function Fo(){if(hf){var t=Nr;if(t!==null)throw t}}function Go(t,n,r,o){hf=!1;var h=t.updateQueue;xs=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,U=N.next;N.next=null,y===null?d=U:y.next=U,y=N;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==y&&(T===null?Q.firstBaseUpdate=U:T.next=U,Q.lastBaseUpdate=N))}if(d!==null){var X=h.baseState;y=0,Q=U=N=null,T=d;do{var z=T.lane&-536870913,F=z!==T.lane;if(F?(Ce&z)===z:(o&z)===z){z!==0&&z===Cr&&(hf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ae=t,ge=T;z=n;var Xe=r;switch(ge.tag){case 1:if(ae=ge.payload,typeof ae=="function"){X=ae.call(Xe,X,z);break e}X=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ge.payload,z=typeof ae=="function"?ae.call(Xe,X,z):ae,z==null)break e;X=b({},X,z);break e;case 2:xs=!0}}z=T.callback,z!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[z]:F.push(z))}else F={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(U=Q=F,N=X):Q=Q.next=F,y|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;F=T,T=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);Q===null&&(N=X),h.baseState=N,h.firstBaseUpdate=U,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Ls|=y,t.lanes=y,t.memoizedState=X}}function Wp(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function eg(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Wp(r[t],n)}var Dr=rt(null),Lc=rt(0);function tg(t,n){t=es,be(Lc,t),be(Dr,n),es=t|n.baseLanes}function ff(){be(Lc,es),be(Dr,Dr.current)}function df(){es=Lc.current,Ge(Dr),Ge(Lc)}var yn=rt(null),jn=null;function Ms(t){var n=t.alternate;be(ft,ft.current&1),be(yn,t),jn===null&&(n===null||Dr.current!==null||n.memoizedState!==null)&&(jn=t)}function mf(t){be(ft,ft.current),be(yn,t),jn===null&&(jn=t)}function ng(t){t.tag===22?(be(ft,ft.current),be(yn,t),jn===null&&(jn=t)):js()}function js(){be(ft,ft.current),be(yn,yn.current)}function _n(t){Ge(yn),jn===t&&(jn=null),Ge(ft)}var ft=rt(0);function Pc(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ed(r)||Td(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Qi=0,Se=null,Ke=null,Et=null,Uc=!1,Or=!1,Ba=!1,zc=0,Qo=0,Mr=null,yT=0;function ot(){throw Error(a(321))}function pf(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!pn(t[r],n[r]))return!1;return!0}function gf(t,n,r,o,h,d){return Qi=d,Se=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,K.H=t===null||t.memoizedState===null?Ug:Df,Ba=!1,d=r(o,h),Ba=!1,Or&&(d=sg(n,r,o,h)),ig(t),d}function ig(t){K.H=Xo;var n=Ke!==null&&Ke.next!==null;if(Qi=0,Et=Ke=Se=null,Uc=!1,Qo=0,Mr=null,n)throw Error(a(300));t===null||Tt||(t=t.dependencies,t!==null&&xc(t)&&(Tt=!0))}function sg(t,n,r,o){Se=t;var h=0;do{if(Or&&(Mr=null),Qo=0,Or=!1,25<=h)throw Error(a(301));if(h+=1,Et=Ke=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=zg,d=n(r,o)}while(Or);return d}function _T(){var t=K.H,n=t.useState()[0];return n=typeof n.then=="function"?Ko(n):n,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Se.flags|=1024),n}function yf(){var t=zc!==0;return zc=0,t}function _f(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function vf(t){if(Uc){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Uc=!1}Qi=0,Et=Ke=Se=null,Or=!1,Qo=zc=0,Mr=null}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Se.memoizedState=Et=t:Et=Et.next=t,Et}function dt(){if(Ke===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var n=Et===null?Se.memoizedState:Et.next;if(n!==null)Et=n,Ke=t;else{if(t===null)throw Se.alternate===null?Error(a(467)):Error(a(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Et===null?Se.memoizedState=Et=t:Et=Et.next=t}return Et}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(t){var n=Qo;return Qo+=1,Mr===null&&(Mr=[]),t=Yp(Mr,t,n),n=Se,(Et===null?n.memoizedState:Et.next)===null&&(n=n.alternate,K.H=n===null||n.memoizedState===null?Ug:Df),t}function qc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ko(t);if(t.$$typeof===W)return Ut(t)}throw Error(a(438,String(t)))}function Ef(t){var n=null,r=Se.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=Se.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Bc(),Se.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=M;return n.index++,r}function Ki(t,n){return typeof n=="function"?n(t):n}function Hc(t){var n=dt();return Tf(n,Ke,t)}function Tf(t,n,r){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}n.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var T=y=null,N=null,U=n,Q=!1;do{var X=U.lane&-536870913;if(X!==U.lane?(Ce&X)===X:(Qi&X)===X){var z=U.revertLane;if(z===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),X===Cr&&(Q=!0);else if((Qi&z)===z){U=U.next,z===Cr&&(Q=!0);continue}else X={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(T=N=X,y=d):N=N.next=X,Se.lanes|=z,Ls|=z;X=U.action,Ba&&r(d,X),d=U.hasEagerState?U.eagerState:r(d,X)}else z={lane:X,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(T=N=z,y=d):N=N.next=z,Se.lanes|=X,Ls|=X;U=U.next}while(U!==null&&U!==n);if(N===null?y=d:N.next=T,!pn(d,t.memoizedState)&&(Tt=!0,Q&&(r=Nr,r!==null)))throw r;t.memoizedState=d,t.baseState=y,t.baseQueue=N,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Sf(t){var n=dt(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var o=r.dispatch,h=r.pending,d=n.memoizedState;if(h!==null){r.pending=null;var y=h=h.next;do d=t(d,y.action),y=y.next;while(y!==h);pn(d,n.memoizedState)||(Tt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),r.lastRenderedState=d}return[d,o]}function ag(t,n,r){var o=Se,h=dt(),d=Oe;if(d){if(r===void 0)throw Error(a(407));r=r()}else r=n();var y=!pn((Ke||h).memoizedState,r);if(y&&(h.memoizedState=r,Tt=!0),h=h.queue,wf(lg.bind(null,o,h,t),[t]),h.getSnapshot!==n||y||Et!==null&&Et.memoizedState.tag&1){if(o.flags|=2048,jr(9,{destroy:void 0},og.bind(null,o,h,r,n),null),$e===null)throw Error(a(349));d||(Qi&127)!==0||rg(o,n,r)}return r}function rg(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Se.updateQueue,n===null?(n=Bc(),Se.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function og(t,n,r,o){n.value=r,n.getSnapshot=o,cg(n)&&ug(t)}function lg(t,n,r){return r(function(){cg(n)&&ug(t)})}function cg(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!pn(t,r)}catch{return!0}}function ug(t){var n=Oa(t,2);n!==null&&rn(n,t,2)}function Af(t){var n=Jt();if(typeof t=="function"){var r=t;if(t=r(),Ba){bn(!0);try{r()}finally{bn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},n}function hg(t,n,r,o){return t.baseState=r,Tf(t,Ke,typeof o=="function"?o:Ki)}function vT(t,n,r,o,h){if(Qc(t))throw Error(a(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};K.T!==null?r(!0):d.isTransition=!1,o(d),r=n.pending,r===null?(d.next=n.pending=d,fg(n,d)):(d.next=r.next,n.pending=r.next=d)}}function fg(t,n){var r=n.action,o=n.payload,h=t.state;if(n.isTransition){var d=K.T,y={};K.T=y;try{var T=r(h,o),N=K.S;N!==null&&N(y,T),dg(t,n,T)}catch(U){bf(t,n,U)}finally{d!==null&&y.types!==null&&(d.types=y.types),K.T=d}}else try{d=r(h,o),dg(t,n,d)}catch(U){bf(t,n,U)}}function dg(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){mg(t,n,o)},function(o){return bf(t,n,o)}):mg(t,n,r)}function mg(t,n,r){n.status="fulfilled",n.value=r,pg(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,fg(t,r)))}function bf(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,pg(n),n=n.next;while(n!==o)}t.action=null}function pg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function gg(t,n){return n}function yg(t,n){if(Oe){var r=$e.formState;if(r!==null){e:{var o=Se;if(Oe){if(Ze){t:{for(var h=Ze,d=Mn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Vn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Ze=Vn(h.nextSibling),o=h.data==="F!";break e}}Ns(o)}o=!1}o&&(n=r[0])}}return r=Jt(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gg,lastRenderedState:n},r.queue=o,r=kg.bind(null,Se,o),o.dispatch=r,o=Af(!1),d=xf.bind(null,Se,!1,o.queue),o=Jt(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,r=vT.bind(null,Se,h,d,r),h.dispatch=r,o.memoizedState=t,[n,r,!1]}function _g(t){var n=dt();return vg(n,Ke,t)}function vg(t,n,r){if(n=Tf(t,n,gg)[0],t=Hc(Ki)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ko(n)}catch(y){throw y===Ir?Mc:y}else o=n;n=dt();var h=n.queue,d=h.dispatch;return r!==n.memoizedState&&(Se.flags|=2048,jr(9,{destroy:void 0},ET.bind(null,h,r),null)),[o,d,t]}function ET(t,n){t.action=n}function Eg(t){var n=dt(),r=Ke;if(r!==null)return vg(n,r,t);dt(),n=n.memoizedState,r=dt();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function jr(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=Se.updateQueue,n===null&&(n=Bc(),Se.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function Tg(){return dt().memoizedState}function Fc(t,n,r,o){var h=Jt();Se.flags|=t,h.memoizedState=jr(1|n,{destroy:void 0},r,o===void 0?null:o)}function Gc(t,n,r,o){var h=dt();o=o===void 0?null:o;var d=h.memoizedState.inst;Ke!==null&&o!==null&&pf(o,Ke.memoizedState.deps)?h.memoizedState=jr(n,d,r,o):(Se.flags|=t,h.memoizedState=jr(1|n,d,r,o))}function Sg(t,n){Fc(8390656,8,t,n)}function wf(t,n){Gc(2048,8,t,n)}function TT(t){Se.flags|=4;var n=Se.updateQueue;if(n===null)n=Bc(),Se.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Ag(t){var n=dt().memoizedState;return TT({ref:n,nextImpl:t}),function(){if((Ue&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function bg(t,n){return Gc(4,2,t,n)}function wg(t,n){return Gc(4,4,t,n)}function Rg(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Cg(t,n,r){r=r!=null?r.concat([t]):null,Gc(4,4,Rg.bind(null,n,t),r)}function Rf(){}function Ng(t,n){var r=dt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&pf(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Ig(t,n){var r=dt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&pf(n,o[1]))return o[0];if(o=t(),Ba){bn(!0);try{t()}finally{bn(!1)}}return r.memoizedState=[o,n],o}function Cf(t,n,r){return r===void 0||(Qi&1073741824)!==0&&(Ce&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=xy(),Se.lanes|=t,Ls|=t,r)}function xg(t,n,r,o){return pn(r,n)?r:Dr.current!==null?(t=Cf(t,r,o),pn(t,n)||(Tt=!0),t):(Qi&42)===0||(Qi&1073741824)!==0&&(Ce&261930)===0?(Tt=!0,t.memoizedState=r):(t=xy(),Se.lanes|=t,Ls|=t,n)}function Dg(t,n,r,o,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var y=K.T,T={};K.T=T,xf(t,!1,n,r);try{var N=h(),U=K.S;if(U!==null&&U(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=gT(N,o);Yo(t,n,Q,Tn(t))}else Yo(t,n,o,Tn(t))}catch(X){Yo(t,n,{then:function(){},status:"rejected",reason:X},Tn())}finally{ie.p=d,y!==null&&T.types!==null&&(y.types=T.types),K.T=y}}function ST(){}function Nf(t,n,r,o){if(t.tag!==5)throw Error(a(476));var h=Og(t).queue;Dg(t,h,n,me,r===null?ST:function(){return Mg(t),r(o)})}function Og(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:me},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Mg(t){var n=Og(t);n.next===null&&(n=t.alternate.memoizedState),Yo(t,n.next.queue,{},Tn())}function If(){return Ut(hl)}function jg(){return dt().memoizedState}function Vg(){return dt().memoizedState}function AT(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Tn();t=Ds(r);var o=Os(n,t,r);o!==null&&(rn(o,n,r),Ho(o,n,r)),n={cache:sf()},t.payload=n;return}n=n.return}}function bT(t,n,r){var o=Tn();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Qc(t)?Lg(n,r):(r=Qh(t,n,r,o),r!==null&&(rn(r,t,o),Pg(r,n,o)))}function kg(t,n,r){var o=Tn();Yo(t,n,r,o)}function Yo(t,n,r,o){var h={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qc(t))Lg(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,T=d(y,r);if(h.hasEagerState=!0,h.eagerState=T,pn(T,y))return Rc(t,n,h,0),$e===null&&wc(),!1}catch{}finally{}if(r=Qh(t,n,h,o),r!==null)return rn(r,t,o),Pg(r,n,o),!0}return!1}function xf(t,n,r,o){if(o={lane:2,revertLane:ld(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Qc(t)){if(n)throw Error(a(479))}else n=Qh(t,r,o,2),n!==null&&rn(n,t,2)}function Qc(t){var n=t.alternate;return t===Se||n!==null&&n===Se}function Lg(t,n){Or=Uc=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Pg(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,go(t,r)}}var Xo={readContext:Ut,use:qc,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};Xo.useEffectEvent=ot;var Ug={readContext:Ut,use:qc,useCallback:function(t,n){return Jt().memoizedState=[t,n===void 0?null:n],t},useContext:Ut,useEffect:Sg,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Fc(4194308,4,Rg.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Fc(4194308,4,t,n)},useInsertionEffect:function(t,n){Fc(4,2,t,n)},useMemo:function(t,n){var r=Jt();n=n===void 0?null:n;var o=t();if(Ba){bn(!0);try{t()}finally{bn(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=Jt();if(r!==void 0){var h=r(n);if(Ba){bn(!0);try{r(n)}finally{bn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=bT.bind(null,Se,t),[o.memoizedState,t]},useRef:function(t){var n=Jt();return t={current:t},n.memoizedState=t},useState:function(t){t=Af(t);var n=t.queue,r=kg.bind(null,Se,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Rf,useDeferredValue:function(t,n){var r=Jt();return Cf(r,t,n)},useTransition:function(){var t=Af(!1);return t=Dg.bind(null,Se,t.queue,!0,!1),Jt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=Se,h=Jt();if(Oe){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),$e===null)throw Error(a(349));(Ce&127)!==0||rg(o,n,r)}h.memoizedState=r;var d={value:r,getSnapshot:n};return h.queue=d,Sg(lg.bind(null,o,d,t),[t]),o.flags|=2048,jr(9,{destroy:void 0},og.bind(null,o,d,r,n),null),r},useId:function(){var t=Jt(),n=$e.identifierPrefix;if(Oe){var r=_i,o=yi;r=(o&~(1<<32-ut(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=zc++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=yT++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:If,useFormState:yg,useActionState:yg,useOptimistic:function(t){var n=Jt();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=xf.bind(null,Se,!0,r),r.dispatch=n,[t,n]},useMemoCache:Ef,useCacheRefresh:function(){return Jt().memoizedState=AT.bind(null,Se)},useEffectEvent:function(t){var n=Jt(),r={impl:t};return n.memoizedState=r,function(){if((Ue&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Df={readContext:Ut,use:qc,useCallback:Ng,useContext:Ut,useEffect:wf,useImperativeHandle:Cg,useInsertionEffect:bg,useLayoutEffect:wg,useMemo:Ig,useReducer:Hc,useRef:Tg,useState:function(){return Hc(Ki)},useDebugValue:Rf,useDeferredValue:function(t,n){var r=dt();return xg(r,Ke.memoizedState,t,n)},useTransition:function(){var t=Hc(Ki)[0],n=dt().memoizedState;return[typeof t=="boolean"?t:Ko(t),n]},useSyncExternalStore:ag,useId:jg,useHostTransitionStatus:If,useFormState:_g,useActionState:_g,useOptimistic:function(t,n){var r=dt();return hg(r,Ke,t,n)},useMemoCache:Ef,useCacheRefresh:Vg};Df.useEffectEvent=Ag;var zg={readContext:Ut,use:qc,useCallback:Ng,useContext:Ut,useEffect:wf,useImperativeHandle:Cg,useInsertionEffect:bg,useLayoutEffect:wg,useMemo:Ig,useReducer:Sf,useRef:Tg,useState:function(){return Sf(Ki)},useDebugValue:Rf,useDeferredValue:function(t,n){var r=dt();return Ke===null?Cf(r,t,n):xg(r,Ke.memoizedState,t,n)},useTransition:function(){var t=Sf(Ki)[0],n=dt().memoizedState;return[typeof t=="boolean"?t:Ko(t),n]},useSyncExternalStore:ag,useId:jg,useHostTransitionStatus:If,useFormState:Eg,useActionState:Eg,useOptimistic:function(t,n){var r=dt();return Ke!==null?hg(r,Ke,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:Vg};zg.useEffectEvent=Ag;function Of(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:b({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Mf={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Tn(),h=Ds(o);h.payload=n,r!=null&&(h.callback=r),n=Os(t,h,o),n!==null&&(rn(n,t,o),Ho(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Tn(),h=Ds(o);h.tag=1,h.payload=n,r!=null&&(h.callback=r),n=Os(t,h,o),n!==null&&(rn(n,t,o),Ho(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Tn(),o=Ds(r);o.tag=2,n!=null&&(o.callback=n),n=Os(t,o,r),n!==null&&(rn(n,t,r),Ho(n,t,r))}};function Bg(t,n,r,o,h,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,y):n.prototype&&n.prototype.isPureReactComponent?!Vo(r,o)||!Vo(h,d):!0}function qg(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&Mf.enqueueReplaceState(n,n.state,null)}function qa(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=b({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function Hg(t){bc(t)}function Fg(t){console.error(t)}function Gg(t){bc(t)}function Kc(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Qg(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jf(t,n,r){return r=Ds(r),r.tag=3,r.payload={element:null},r.callback=function(){Kc(t,n)},r}function Kg(t){return t=Ds(t),t.tag=3,t}function Yg(t,n,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Qg(n,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Qg(n,r,o),typeof h!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function wT(t,n,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&Rr(n,r,h,!0),r=yn.current,r!==null){switch(r.tag){case 31:case 13:return jn===null?au():r.alternate===null&&lt===0&&(lt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===jc?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),ad(t,o,h)),!1;case 22:return r.flags|=65536,o===jc?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),ad(t,o,h)),!1}throw Error(a(435,r.tag))}return ad(t,o,h),au(),!1}if(Oe)return n=yn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Zh&&(t=Error(a(422),{cause:o}),Po(xn(t,r)))):(o!==Zh&&(n=Error(a(423),{cause:o}),Po(xn(n,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=xn(o,r),h=jf(t.stateNode,o,h),uf(t,h),lt!==4&&(lt=2)),!1;var d=Error(a(520),{cause:o});if(d=xn(d,r),il===null?il=[d]:il.push(d),lt!==4&&(lt=2),n===null)return!0;o=xn(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=jf(r.stateNode,o,t),uf(r,t),!1;case 1:if(n=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ps===null||!Ps.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=Kg(h),Yg(h,t,r,o),uf(r,h),!1}r=r.return}while(r!==null);return!1}var Vf=Error(a(461)),Tt=!1;function zt(t,n,r,o){n.child=t===null?Zp(n,null,r,o):za(n,t.child,r,o)}function Xg(t,n,r,o,h){r=r.render;var d=n.ref;if("ref"in o){var y={};for(var T in o)T!=="ref"&&(y[T]=o[T])}else y=o;return ka(n),o=gf(t,n,r,y,d,h),T=yf(),t!==null&&!Tt?(_f(t,n,h),Yi(t,n,h)):(Oe&&T&&$h(n),n.flags|=1,zt(t,n,o,h),n.child)}function $g(t,n,r,o,h){if(t===null){var d=r.type;return typeof d=="function"&&!Kh(d)&&d.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=d,Jg(t,n,d,o,h)):(t=Nc(r.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!Hf(t,h)){var y=d.memoizedProps;if(r=r.compare,r=r!==null?r:Vo,r(y,o)&&t.ref===n.ref)return Yi(t,n,h)}return n.flags|=1,t=qi(d,o),t.ref=n.ref,t.return=n,n.child=t}function Jg(t,n,r,o,h){if(t!==null){var d=t.memoizedProps;if(Vo(d,o)&&t.ref===n.ref)if(Tt=!1,n.pendingProps=o=d,Hf(t,h))(t.flags&131072)!==0&&(Tt=!0);else return n.lanes=t.lanes,Yi(t,n,h)}return kf(t,n,r,o,h)}function Zg(t,n,r,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|r:r,t!==null){for(o=n.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,n.child=null;return Wg(t,n,d,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Oc(n,d!==null?d.cachePool:null),d!==null?tg(n,d):ff(),ng(n);else return o=n.lanes=536870912,Wg(t,n,d!==null?d.baseLanes|r:r,r,o)}else d!==null?(Oc(n,d.cachePool),tg(n,d),js(),n.memoizedState=null):(t!==null&&Oc(n,null),ff(),js());return zt(t,n,h,r),n.child}function $o(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Wg(t,n,r,o,h){var d=rf();return d=d===null?null:{parent:vt._currentValue,pool:d},n.memoizedState={baseLanes:r,cachePool:d},t!==null&&Oc(n,null),ff(),ng(n),t!==null&&Rr(t,n,o,!0),n.childLanes=h,null}function Yc(t,n){return n=$c({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function ey(t,n,r){return za(n,t.child,null,r),t=Yc(n,n.pendingProps),t.flags|=2,_n(n),n.memoizedState=null,t}function RT(t,n,r){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Oe){if(o.mode==="hidden")return t=Yc(n,o),n.lanes=536870912,$o(null,t);if(mf(n),(t=Ze)?(t=f_(t,Mn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:yi,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},r=Lp(t),r.return=n,n.child=r,Pt=n,Ze=null)):t=null,t===null)throw Ns(n);return n.lanes=536870912,null}return Yc(n,o)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(mf(n),h)if(n.flags&256)n.flags&=-257,n=ey(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(a(558));else if(Tt||Rr(t,n,r,!1),h=(r&t.childLanes)!==0,Tt||h){if(o=$e,o!==null&&(y=yo(o,r),y!==0&&y!==d.retryLane))throw d.retryLane=y,Oa(t,y),rn(o,t,y),Vf;au(),n=ey(t,n,r)}else t=d.treeContext,Ze=Vn(y.nextSibling),Pt=n,Oe=!0,Cs=null,Mn=!1,t!==null&&zp(n,t),n=Yc(n,o),n.flags|=4096;return n}return t=qi(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Xc(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function kf(t,n,r,o,h){return ka(n),r=gf(t,n,r,o,void 0,h),o=yf(),t!==null&&!Tt?(_f(t,n,h),Yi(t,n,h)):(Oe&&o&&$h(n),n.flags|=1,zt(t,n,r,h),n.child)}function ty(t,n,r,o,h,d){return ka(n),n.updateQueue=null,r=sg(n,o,r,h),ig(t),o=yf(),t!==null&&!Tt?(_f(t,n,d),Yi(t,n,d)):(Oe&&o&&$h(n),n.flags|=1,zt(t,n,r,d),n.child)}function ny(t,n,r,o,h){if(ka(n),n.stateNode===null){var d=Sr,y=r.contextType;typeof y=="object"&&y!==null&&(d=Ut(y)),d=new r(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Mf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},lf(n),y=r.contextType,d.context=typeof y=="object"&&y!==null?Ut(y):Sr,d.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Of(n,r,y,o),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Mf.enqueueReplaceState(d,d.state,null),Go(n,o,d,h),Fo(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){d=n.stateNode;var T=n.memoizedProps,N=qa(r,T);d.props=N;var U=d.context,Q=r.contextType;y=Sr,typeof Q=="object"&&Q!==null&&(y=Ut(Q));var X=r.getDerivedStateFromProps;Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||U!==y)&&qg(n,d,o,y),xs=!1;var z=n.memoizedState;d.state=z,Go(n,o,d,h),Fo(),U=n.memoizedState,T||z!==U||xs?(typeof X=="function"&&(Of(n,r,X,o),U=n.memoizedState),(N=xs||Bg(n,r,N,o,z,U,y))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=U),d.props=o,d.state=U,d.context=y,o=N):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,cf(t,n),y=n.memoizedProps,Q=qa(r,y),d.props=Q,X=n.pendingProps,z=d.context,U=r.contextType,N=Sr,typeof U=="object"&&U!==null&&(N=Ut(U)),T=r.getDerivedStateFromProps,(U=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==X||z!==N)&&qg(n,d,o,N),xs=!1,z=n.memoizedState,d.state=z,Go(n,o,d,h),Fo();var F=n.memoizedState;y!==X||z!==F||xs||t!==null&&t.dependencies!==null&&xc(t.dependencies)?(typeof T=="function"&&(Of(n,r,T,o),F=n.memoizedState),(Q=xs||Bg(n,r,Q,o,z,F,N)||t!==null&&t.dependencies!==null&&xc(t.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,N)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=F),d.props=o,d.state=F,d.context=N,o=Q):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),o=!1)}return d=o,Xc(t,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&o?(n.child=za(n,t.child,null,h),n.child=za(n,null,r,h)):zt(t,n,r,h),n.memoizedState=d.state,t=n.child):t=Yi(t,n,h),t}function iy(t,n,r,o){return ja(),n.flags|=256,zt(t,n,r,o),n.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(t){return{baseLanes:t,cachePool:Qp()}}function Uf(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=En),t}function sy(t,n,r){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(ft.current&2)!==0),y&&(h=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,t===null){if(Oe){if(h?Ms(n):js(),(t=Ze)?(t=f_(t,Mn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rs!==null?{id:yi,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},r=Lp(t),r.return=n,n.child=r,Pt=n,Ze=null)):t=null,t===null)throw Ns(n);return Td(t)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,h?(js(),h=n.mode,T=$c({mode:"hidden",children:T},h),o=Ma(o,h,r,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Pf(r),o.childLanes=Uf(t,y,r),n.memoizedState=Lf,$o(null,o)):(Ms(n),zf(n,T))}var N=t.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(d)n.flags&256?(Ms(n),n.flags&=-257,n=Bf(t,n,r)):n.memoizedState!==null?(js(),n.child=t.child,n.flags|=128,n=null):(js(),T=o.fallback,h=n.mode,o=$c({mode:"visible",children:o.children},h),T=Ma(T,h,r,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,za(n,t.child,null,r),o=n.child,o.memoizedState=Pf(r),o.childLanes=Uf(t,y,r),n.memoizedState=Lf,n=$o(null,o));else if(Ms(n),Td(T)){if(y=T.nextSibling&&T.nextSibling.dataset,y)var U=y.dgst;y=U,o=Error(a(419)),o.stack="",o.digest=y,Po({value:o,source:null,stack:null}),n=Bf(t,n,r)}else if(Tt||Rr(t,n,r,!1),y=(r&t.childLanes)!==0,Tt||y){if(y=$e,y!==null&&(o=yo(y,r),o!==0&&o!==N.retryLane))throw N.retryLane=o,Oa(t,o),rn(y,t,o),Vf;Ed(T)||au(),n=Bf(t,n,r)}else Ed(T)?(n.flags|=192,n.child=t.child,n=null):(t=N.treeContext,Ze=Vn(T.nextSibling),Pt=n,Oe=!0,Cs=null,Mn=!1,t!==null&&zp(n,t),n=zf(n,o.children),n.flags|=4096);return n}return h?(js(),T=o.fallback,h=n.mode,N=t.child,U=N.sibling,o=qi(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,U!==null?T=qi(U,T):(T=Ma(T,h,r,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,$o(null,o),o=n.child,T=t.child.memoizedState,T===null?T=Pf(r):(h=T.cachePool,h!==null?(N=vt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=Qp(),T={baseLanes:T.baseLanes|r,cachePool:h}),o.memoizedState=T,o.childLanes=Uf(t,y,r),n.memoizedState=Lf,$o(t.child,o)):(Ms(n),r=t.child,t=r.sibling,r=qi(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(y=n.deletions,y===null?(n.deletions=[t],n.flags|=16):y.push(t)),n.child=r,n.memoizedState=null,r)}function zf(t,n){return n=$c({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function $c(t,n){return t=gn(22,t,null,n),t.lanes=0,t}function Bf(t,n,r){return za(n,t.child,null,r),t=zf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function ay(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),tf(t.return,n,r)}function qf(t,n,r,o,h,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h,treeForkCount:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=h,y.treeForkCount=d)}function ry(t,n,r){var o=n.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var y=ft.current,T=(y&2)!==0;if(T?(y=y&1|2,n.flags|=128):y&=1,be(ft,y),zt(t,n,o,r),o=Oe?Lo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ay(t,r,n);else if(t.tag===19)ay(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=n.child,h=null;r!==null;)t=r.alternate,t!==null&&Pc(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=n.child,n.child=null):(h=r.sibling,r.sibling=null),qf(n,!1,h,r,d,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Pc(t)===null){n.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}qf(n,!0,r,null,d,o);break;case"together":qf(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Yi(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Ls|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(Rr(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=qi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=qi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Hf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&xc(t)))}function CT(t,n,r){switch(n.tag){case 3:Wn(n,n.stateNode.containerInfo),Is(n,vt,t.memoizedState.cache),ja();break;case 27:case 5:ds(n);break;case 4:Wn(n,n.stateNode.containerInfo);break;case 10:Is(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,mf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ms(n),n.flags|=128,null):(r&n.child.childLanes)!==0?sy(t,n,r):(Ms(n),t=Yi(t,n,r),t!==null?t.sibling:null);Ms(n);break;case 19:var h=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(Rr(t,n,r,!1),o=(r&n.childLanes)!==0),h){if(o)return ry(t,n,r);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(ft,ft.current),o)break;return null;case 22:return n.lanes=0,Zg(t,n,r,n.pendingProps);case 24:Is(n,vt,t.memoizedState.cache)}return Yi(t,n,r)}function oy(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Tt=!0;else{if(!Hf(t,r)&&(n.flags&128)===0)return Tt=!1,CT(t,n,r);Tt=(t.flags&131072)!==0}else Tt=!1,Oe&&(n.flags&1048576)!==0&&Up(n,Lo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=Pa(n.elementType),n.type=t,typeof t=="function")Kh(t)?(o=qa(t,o),n.tag=1,n=ny(null,n,t,o,r)):(n.tag=0,n=kf(null,n,t,o,r));else{if(t!=null){var h=t.$$typeof;if(h===ee){n.tag=11,n=Xg(null,n,t,o,r);break e}else if(h===x){n.tag=14,n=$g(null,n,t,o,r);break e}}throw n=at(t)||t,Error(a(306,n,""))}}return n;case 0:return kf(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,h=qa(o,n.pendingProps),ny(t,n,o,h,r);case 3:e:{if(Wn(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,cf(t,n),Go(n,o,null,r);var y=n.memoizedState;if(o=y.cache,Is(n,vt,o),o!==d.cache&&nf(n,[vt],r,!0),Fo(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=iy(t,n,o,r);break e}else if(o!==h){h=xn(Error(a(424)),n),Po(h),n=iy(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ze=Vn(t.firstChild),Pt=n,Oe=!0,Cs=null,Mn=!0,r=Zp(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ja(),o===h){n=Yi(t,n,r);break e}zt(t,n,o,r)}n=n.child}return n;case 26:return Xc(t,n),t===null?(r=__(n.type,null,n.pendingProps,null))?n.memoizedState=r:Oe||(r=n.type,t=n.pendingProps,o=fu(Zt.current).createElement(r),o[gt]=n,o[Dt]=t,Bt(o,r,t),yt(o),n.stateNode=o):n.memoizedState=__(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ds(n),t===null&&Oe&&(o=n.stateNode=p_(n.type,n.pendingProps,Zt.current),Pt=n,Mn=!0,h=Ze,qs(n.type)?(Sd=h,Ze=Vn(o.firstChild)):Ze=h),zt(t,n,n.pendingProps.children,r),Xc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Oe&&((h=o=Ze)&&(o=i2(o,n.type,n.pendingProps,Mn),o!==null?(n.stateNode=o,Pt=n,Ze=Vn(o.firstChild),Mn=!1,h=!0):h=!1),h||Ns(n)),ds(n),h=n.type,d=n.pendingProps,y=t!==null?t.memoizedProps:null,o=d.children,yd(h,d)?o=null:y!==null&&yd(h,y)&&(n.flags|=32),n.memoizedState!==null&&(h=gf(t,n,_T,null,null,r),hl._currentValue=h),Xc(t,n),zt(t,n,o,r),n.child;case 6:return t===null&&Oe&&((t=r=Ze)&&(r=s2(r,n.pendingProps,Mn),r!==null?(n.stateNode=r,Pt=n,Ze=null,t=!0):t=!1),t||Ns(n)),null;case 13:return sy(t,n,r);case 4:return Wn(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=za(n,null,o,r):zt(t,n,o,r),n.child;case 11:return Xg(t,n,n.type,n.pendingProps,r);case 7:return zt(t,n,n.pendingProps,r),n.child;case 8:return zt(t,n,n.pendingProps.children,r),n.child;case 12:return zt(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Is(n,n.type,o.value),zt(t,n,o.children,r),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ka(n),h=Ut(h),o=o(h),n.flags|=1,zt(t,n,o,r),n.child;case 14:return $g(t,n,n.type,n.pendingProps,r);case 15:return Jg(t,n,n.type,n.pendingProps,r);case 19:return ry(t,n,r);case 31:return RT(t,n,r);case 22:return Zg(t,n,r,n.pendingProps);case 24:return ka(n),o=Ut(vt),t===null?(h=rf(),h===null&&(h=$e,d=sf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),n.memoizedState={parent:o,cache:h},lf(n),Is(n,vt,h)):((t.lanes&r)!==0&&(cf(t,n),Go(n,null,null,r),Fo()),h=t.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Is(n,vt,o)):(o=d.cache,Is(n,vt,o),o!==h.cache&&nf(n,[vt],r,!0))),zt(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Xi(t){t.flags|=4}function Ff(t,n,r,o,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(jy())t.flags|=8192;else throw Ua=jc,of}else t.flags&=-16777217}function ly(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!A_(n))if(jy())t.flags|=8192;else throw Ua=jc,of}function Jc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?ic():536870912,t.lanes|=n,Pr|=n)}function Jo(t,n){if(!Oe)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function We(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function NT(t,n,r){var o=n.pendingProps;switch(Jh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(n),null;case 1:return We(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Gi(vt),un(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wr(n)?Xi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wh())),We(n),null;case 26:var h=n.type,d=n.memoizedState;return t===null?(Xi(n),d!==null?(We(n),ly(n,d)):(We(n),Ff(n,h,null,o,r))):d?d!==t.memoizedState?(Xi(n),We(n),ly(n,d)):(We(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&Xi(n),We(n),Ff(n,h,t,o,r)),null;case 27:if(wt(n),r=Zt.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return We(n),null}t=Je.current,wr(n)?Bp(n):(t=p_(h,o,r),n.stateNode=t,Xi(n))}return We(n),null;case 5:if(wt(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return We(n),null}if(d=Je.current,wr(n))Bp(n);else{var y=fu(Zt.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(h,{is:o.is}):y.createElement(h)}}d[gt]=n,d[Dt]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=d;e:switch(Bt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Xi(n)}}return We(n),Ff(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=Zt.current,wr(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,h=Pt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[gt]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||s_(t.nodeValue,r)),t||Ns(n,!0)}else t=fu(t).createTextNode(o),t[gt]=n,n.stateNode=t}return We(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=wr(n),r!==null){if(t===null){if(!o)throw Error(a(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[gt]=n}else ja(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),t=!1}else r=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(_n(n),n):(_n(n),null);if((n.flags&128)!==0)throw Error(a(558))}return We(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=wr(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[gt]=n}else ja(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;We(n),h=!1}else h=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(_n(n),n):(_n(n),null)}return _n(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),Jc(n,n.updateQueue),We(n),null);case 4:return un(),t===null&&fd(n.stateNode.containerInfo),We(n),null;case 10:return Gi(n.type),We(n),null;case 19:if(Ge(ft),o=n.memoizedState,o===null)return We(n),null;if(h=(n.flags&128)!==0,d=o.rendering,d===null)if(h)Jo(o,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Pc(t),d!==null){for(n.flags|=128,Jo(o,!1),t=d.updateQueue,n.updateQueue=t,Jc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)kp(r,t),r=r.sibling;return be(ft,ft.current&1|2),Oe&&Hi(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&Xt()>nu&&(n.flags|=128,h=!0,Jo(o,!1),n.lanes=4194304)}else{if(!h)if(t=Pc(d),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Jc(n,t),Jo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Oe)return We(n),null}else 2*Xt()-o.renderingStartTime>nu&&r!==536870912&&(n.flags|=128,h=!0,Jo(o,!1),n.lanes=4194304);o.isBackwards?(d.sibling=n.child,n.child=d):(t=o.last,t!==null?t.sibling=d:n.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xt(),t.sibling=null,r=ft.current,be(ft,h?r&1|2:r&1),Oe&&Hi(n,o.treeForkCount),t):(We(n),null);case 22:case 23:return _n(n),df(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(We(n),n.subtreeFlags&6&&(n.flags|=8192)):We(n),r=n.updateQueue,r!==null&&Jc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&Ge(La),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Gi(vt),We(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function IT(t,n){switch(Jh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Gi(vt),un(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return wt(n),null;case 31:if(n.memoizedState!==null){if(_n(n),n.alternate===null)throw Error(a(340));ja()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(_n(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));ja()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Ge(ft),null;case 4:return un(),null;case 10:return Gi(n.type),null;case 22:case 23:return _n(n),df(),t!==null&&Ge(La),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Gi(vt),null;case 25:return null;default:return null}}function cy(t,n){switch(Jh(n),n.tag){case 3:Gi(vt),un();break;case 26:case 27:case 5:wt(n);break;case 4:un();break;case 31:n.memoizedState!==null&&_n(n);break;case 13:_n(n);break;case 19:Ge(ft);break;case 10:Gi(n.type);break;case 22:case 23:_n(n),df(),t!==null&&Ge(La);break;case 24:Gi(vt)}}function Zo(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&t)===t){o=void 0;var d=r.create,y=r.inst;o=d(),y.destroy=o}r=r.next}while(r!==h)}}catch(T){Fe(n,n.return,T)}}function Vs(t,n,r){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var y=o.inst,T=y.destroy;if(T!==void 0){y.destroy=void 0,h=n;var N=r,U=T;try{U()}catch(Q){Fe(h,N,Q)}}}o=o.next}while(o!==d)}}catch(Q){Fe(n,n.return,Q)}}function uy(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{eg(n,r)}catch(o){Fe(t,t.return,o)}}}function hy(t,n,r){r.props=qa(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Fe(t,n,o)}}function Wo(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(h){Fe(t,n,h)}}function vi(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){Fe(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Fe(t,n,h)}else r.current=null}function fy(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){Fe(t,t.return,h)}}function Gf(t,n,r){try{var o=t.stateNode;JT(o,t.type,r,n),o[Dt]=n}catch(h){Fe(t,t.return,h)}}function dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qs(t.type)||t.tag===4}function Qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=qn));else if(o!==4&&(o===27&&qs(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Kf(t,n,r),t=t.sibling;t!==null;)Kf(t,n,r),t=t.sibling}function Zc(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&qs(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Zc(t,n,r),t=t.sibling;t!==null;)Zc(t,n,r),t=t.sibling}function my(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Bt(n,o,r),n[gt]=t,n[Dt]=r}catch(d){Fe(t,t.return,d)}}var $i=!1,St=!1,Yf=!1,py=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function xT(t,n){if(t=t.containerInfo,pd=vu,t=Cp(t),zh(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var y=0,T=-1,N=-1,U=0,Q=0,X=t,z=null;t:for(;;){for(var F;X!==r||h!==0&&X.nodeType!==3||(T=y+h),X!==d||o!==0&&X.nodeType!==3||(N=y+o),X.nodeType===3&&(y+=X.nodeValue.length),(F=X.firstChild)!==null;)z=X,X=F;for(;;){if(X===t)break t;if(z===r&&++U===h&&(T=y),z===d&&++Q===o&&(N=y),(F=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=F}r=T===-1||N===-1?null:{start:T,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(gd={focusedElem:t,selectionRange:r},vu=!1,Mt=n;Mt!==null;)if(n=Mt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Mt=t;else for(;Mt!==null;){switch(n=Mt,d=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,r=n,h=d.memoizedProps,d=d.memoizedState,o=r.stateNode;try{var ae=qa(r.type,h);t=o.getSnapshotBeforeUpdate(ae,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ge){Fe(r,r.return,ge)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)vd(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Mt=t;break}Mt=n.return}}function gy(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Zi(t,r),o&4&&Zo(5,r);break;case 1:if(Zi(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(y){Fe(r,r.return,y)}else{var h=qa(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Fe(r,r.return,y)}}o&64&&uy(r),o&512&&Wo(r,r.return);break;case 3:if(Zi(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{eg(t,n)}catch(y){Fe(r,r.return,y)}}break;case 27:n===null&&o&4&&my(r);case 26:case 5:Zi(t,r),n===null&&o&4&&fy(r),o&512&&Wo(r,r.return);break;case 12:Zi(t,r);break;case 31:Zi(t,r),o&4&&vy(t,r);break;case 13:Zi(t,r),o&4&&Ey(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=UT.bind(null,r),a2(t,r))));break;case 22:if(o=r.memoizedState!==null||$i,!o){n=n!==null&&n.memoizedState!==null||St,h=$i;var d=St;$i=o,(St=n)&&!d?Wi(t,r,(r.subtreeFlags&8772)!==0):Zi(t,r),$i=h,St=d}break;case 30:break;default:Zi(t,r)}}function yy(t){var n=t.alternate;n!==null&&(t.alternate=null,yy(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&lr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nt=null,tn=!1;function Ji(t,n,r){for(r=r.child;r!==null;)_y(t,n,r),r=r.sibling}function _y(t,n,r){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Pn,r)}catch{}switch(r.tag){case 26:St||vi(r,n),Ji(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:St||vi(r,n);var o=nt,h=tn;qs(r.type)&&(nt=r.stateNode,tn=!1),Ji(t,n,r),ll(r.stateNode),nt=o,tn=h;break;case 5:St||vi(r,n);case 6:if(o=nt,h=tn,nt=null,Ji(t,n,r),nt=o,tn=h,nt!==null)if(tn)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(r.stateNode)}catch(d){Fe(r,n,d)}else try{nt.removeChild(r.stateNode)}catch(d){Fe(r,n,d)}break;case 18:nt!==null&&(tn?(t=nt,u_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Qr(t)):u_(nt,r.stateNode));break;case 4:o=nt,h=tn,nt=r.stateNode.containerInfo,tn=!0,Ji(t,n,r),nt=o,tn=h;break;case 0:case 11:case 14:case 15:Vs(2,r,n),St||Vs(4,r,n),Ji(t,n,r);break;case 1:St||(vi(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&hy(r,n,o)),Ji(t,n,r);break;case 21:Ji(t,n,r);break;case 22:St=(o=St)||r.memoizedState!==null,Ji(t,n,r),St=o;break;default:Ji(t,n,r)}}function vy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Qr(t)}catch(r){Fe(n,n.return,r)}}}function Ey(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Qr(t)}catch(r){Fe(n,n.return,r)}}function DT(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new py),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new py),n;default:throw Error(a(435,t.tag))}}function Wc(t,n){var r=DT(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var h=zT.bind(null,t,o);o.then(h,h)}})}function nn(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],d=t,y=n,T=y;e:for(;T!==null;){switch(T.tag){case 27:if(qs(T.type)){nt=T.stateNode,tn=!1;break e}break;case 5:nt=T.stateNode,tn=!1;break e;case 3:case 4:nt=T.stateNode.containerInfo,tn=!0;break e}T=T.return}if(nt===null)throw Error(a(160));_y(d,y,h),nt=null,tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ty(n,t),n=n.sibling}var Yn=null;function Ty(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:nn(n,t),sn(t),o&4&&(Vs(3,t,t.return),Zo(3,t),Vs(5,t,t.return));break;case 1:nn(n,t),sn(t),o&512&&(St||r===null||vi(r,r.return)),o&64&&$i&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=Yn;if(nn(n,t),sn(t),o&512&&(St||r===null||vi(r,r.return)),o&4){var d=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ai]||d[gt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Bt(d,o,r),d[gt]=t,yt(d),o=d;break e;case"link":var y=T_("link","href",h).get(o+(r.href||""));if(y){for(var T=0;T<y.length;T++)if(d=y[T],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(T,1);break t}}d=h.createElement(o),Bt(d,o,r),h.head.appendChild(d);break;case"meta":if(y=T_("meta","content",h).get(o+(r.content||""))){for(T=0;T<y.length;T++)if(d=y[T],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(T,1);break t}}d=h.createElement(o),Bt(d,o,r),h.head.appendChild(d);break;default:throw Error(a(468,o))}d[gt]=t,yt(d),o=d}t.stateNode=o}else S_(h,t.type,t.stateNode);else t.stateNode=E_(h,o,t.memoizedProps);else d!==o?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,o===null?S_(h,t.type,t.stateNode):E_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Gf(t,t.memoizedProps,r.memoizedProps)}break;case 27:nn(n,t),sn(t),o&512&&(St||r===null||vi(r,r.return)),r!==null&&o&4&&Gf(t,t.memoizedProps,r.memoizedProps);break;case 5:if(nn(n,t),sn(t),o&512&&(St||r===null||vi(r,r.return)),t.flags&32){h=t.stateNode;try{en(h,"")}catch(ae){Fe(t,t.return,ae)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Gf(t,h,r!==null?r.memoizedProps:h)),o&1024&&(Yf=!0);break;case 6:if(nn(n,t),sn(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(ae){Fe(t,t.return,ae)}}break;case 3:if(pu=null,h=Yn,Yn=du(n.containerInfo),nn(n,t),Yn=h,sn(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Qr(n.containerInfo)}catch(ae){Fe(t,t.return,ae)}Yf&&(Yf=!1,Sy(t));break;case 4:o=Yn,Yn=du(t.stateNode.containerInfo),nn(n,t),sn(t),Yn=o;break;case 12:nn(n,t),sn(t);break;case 31:nn(n,t),sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wc(t,o)));break;case 13:nn(n,t),sn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(tu=Xt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wc(t,o)));break;case 22:h=t.memoizedState!==null;var N=r!==null&&r.memoizedState!==null,U=$i,Q=St;if($i=U||h,St=Q||N,nn(n,t),St=Q,$i=U,sn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(r===null||N||$i||St||Ha(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){N=r=n;try{if(d=N.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{T=N.stateNode;var X=N.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(ae){Fe(N,N.return,ae)}}}else if(n.tag===6){if(r===null){N=n;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ae){Fe(N,N.return,ae)}}}else if(n.tag===18){if(r===null){N=n;try{var F=N.stateNode;h?h_(F,!0):h_(N.stateNode,!1)}catch(ae){Fe(N,N.return,ae)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Wc(t,r))));break;case 19:nn(n,t),sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Wc(t,o)));break;case 30:break;case 21:break;default:nn(n,t),sn(t)}}function sn(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(dy(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var h=r.stateNode,d=Qf(t);Zc(t,d,h);break;case 5:var y=r.stateNode;r.flags&32&&(en(y,""),r.flags&=-33);var T=Qf(t);Zc(t,T,y);break;case 3:case 4:var N=r.stateNode.containerInfo,U=Qf(t);Kf(t,U,N);break;default:throw Error(a(161))}}catch(Q){Fe(t,t.return,Q)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Sy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Sy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Zi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)gy(t,n.alternate,n),n=n.sibling}function Ha(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Vs(4,n,n.return),Ha(n);break;case 1:vi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&hy(n,n.return,r),Ha(n);break;case 27:ll(n.stateNode);case 26:case 5:vi(n,n.return),Ha(n);break;case 22:n.memoizedState===null&&Ha(n);break;case 30:Ha(n);break;default:Ha(n)}t=t.sibling}}function Wi(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:Wi(h,d,r),Zo(4,d);break;case 1:if(Wi(h,d,r),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){Fe(o,o.return,U)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Wp(N[h],T)}catch(U){Fe(o,o.return,U)}}r&&y&64&&uy(d),Wo(d,d.return);break;case 27:my(d);case 26:case 5:Wi(h,d,r),r&&o===null&&y&4&&fy(d),Wo(d,d.return);break;case 12:Wi(h,d,r);break;case 31:Wi(h,d,r),r&&y&4&&vy(h,d);break;case 13:Wi(h,d,r),r&&y&4&&Ey(h,d);break;case 22:d.memoizedState===null&&Wi(h,d,r),Wo(d,d.return);break;case 30:break;default:Wi(h,d,r)}n=n.sibling}}function Xf(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Uo(r))}function $f(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Uo(t))}function Xn(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ay(t,n,r,o),n=n.sibling}function Ay(t,n,r,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Xn(t,n,r,o),h&2048&&Zo(9,n);break;case 1:Xn(t,n,r,o);break;case 3:Xn(t,n,r,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Uo(t)));break;case 12:if(h&2048){Xn(t,n,r,o),t=n.stateNode;try{var d=n.memoizedProps,y=d.id,T=d.onPostCommit;typeof T=="function"&&T(y,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Fe(n,n.return,N)}}else Xn(t,n,r,o);break;case 31:Xn(t,n,r,o);break;case 13:Xn(t,n,r,o);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?Xn(t,n,r,o):el(t,n):d._visibility&2?Xn(t,n,r,o):(d._visibility|=2,Vr(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Xf(y,n);break;case 24:Xn(t,n,r,o),h&2048&&$f(n.alternate,n);break;default:Xn(t,n,r,o)}}function Vr(t,n,r,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=t,y=n,T=r,N=o,U=y.flags;switch(y.tag){case 0:case 11:case 15:Vr(d,y,T,N,h),Zo(8,y);break;case 23:break;case 22:var Q=y.stateNode;y.memoizedState!==null?Q._visibility&2?Vr(d,y,T,N,h):el(d,y):(Q._visibility|=2,Vr(d,y,T,N,h)),h&&U&2048&&Xf(y.alternate,y);break;case 24:Vr(d,y,T,N,h),h&&U&2048&&$f(y.alternate,y);break;default:Vr(d,y,T,N,h)}n=n.sibling}}function el(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,h=o.flags;switch(o.tag){case 22:el(r,o),h&2048&&Xf(o.alternate,o);break;case 24:el(r,o),h&2048&&$f(o.alternate,o);break;default:el(r,o)}n=n.sibling}}var tl=8192;function kr(t,n,r){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)by(t,n,r),t=t.sibling}function by(t,n,r){switch(t.tag){case 26:kr(t,n,r),t.flags&tl&&t.memoizedState!==null&&y2(r,Yn,t.memoizedState,t.memoizedProps);break;case 5:kr(t,n,r);break;case 3:case 4:var o=Yn;Yn=du(t.stateNode.containerInfo),kr(t,n,r),Yn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=tl,tl=16777216,kr(t,n,r),tl=o):kr(t,n,r));break;default:kr(t,n,r)}}function wy(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function nl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Mt=o,Cy(o,t)}wy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ry(t),t=t.sibling}function Ry(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&Vs(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,eu(t)):nl(t);break;default:nl(t)}}function eu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Mt=o,Cy(o,t)}wy(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Vs(8,n,n.return),eu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,eu(n));break;default:eu(n)}t=t.sibling}}function Cy(t,n){for(;Mt!==null;){var r=Mt;switch(r.tag){case 0:case 11:case 15:Vs(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Uo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Mt=o;else e:for(r=t;Mt!==null;){o=Mt;var h=o.sibling,d=o.return;if(yy(o),o===r){Mt=null;break e}if(h!==null){h.return=d,Mt=h;break e}Mt=d}}}var OT={getCacheForType:function(t){var n=Ut(vt),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return Ut(vt).controller.signal}},MT=typeof WeakMap=="function"?WeakMap:Map,Ue=0,$e=null,we=null,Ce=0,He=0,vn=null,ks=!1,Lr=!1,Jf=!1,es=0,lt=0,Ls=0,Fa=0,Zf=0,En=0,Pr=0,il=null,an=null,Wf=!1,tu=0,Ny=0,nu=1/0,iu=null,Ps=null,Rt=0,Us=null,Ur=null,ts=0,ed=0,td=null,Iy=null,sl=0,nd=null;function Tn(){return(Ue&2)!==0&&Ce!==0?Ce&-Ce:K.T!==null?ld():sc()}function xy(){if(En===0)if((Ce&536870912)===0||Oe){var t=ya;ya<<=1,(ya&3932160)===0&&(ya=262144),En=t}else En=536870912;return t=yn.current,t!==null&&(t.flags|=32),En}function rn(t,n,r){(t===$e&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(zr(t,0),zs(t,Ce,En,!1)),_a(t,r),((Ue&2)===0||t!==$e)&&(t===$e&&((Ue&2)===0&&(Fa|=r),lt===4&&zs(t,Ce,En,!1)),Ei(t))}function Dy(t,n,r){if((Ue&6)!==0)throw Error(a(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Un(t,n),h=o?kT(t,n):sd(t,n,!0),d=o;do{if(h===0){Lr&&!o&&zs(t,n,0,!1);break}else{if(r=t.current.alternate,d&&!jT(r)){h=sd(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var T=t;h=il;var N=T.current.memoizedState.isDehydrated;if(N&&(zr(T,y).flags|=256),y=sd(T,y,!1),y!==2){if(Jf&&!N){T.errorRecoveryDisabledLanes|=d,Fa|=d,h=4;break e}d=an,an=h,d!==null&&(an===null?an=d:an.push.apply(an,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){zr(t,0),zs(t,n,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:zs(o,n,En,!ks);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(h=tu+300-Xt(),10<h)){if(zs(o,n,En,!ks),ni(o,0,!0)!==0)break e;ts=n,o.timeoutHandle=l_(Oy.bind(null,o,r,an,iu,Wf,n,En,Fa,Pr,ks,d,"Throttled",-0,0),h);break e}Oy(o,r,an,iu,Wf,n,En,Fa,Pr,ks,d,null,-0,0)}}break}while(!0);Ei(t)}function Oy(t,n,r,o,h,d,y,T,N,U,Q,X,z,F){if(t.timeoutHandle=-1,X=n.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},by(n,d,X);var ae=(d&62914560)===d?tu-Xt():(d&4194048)===d?Ny-Xt():0;if(ae=_2(X,ae),ae!==null){ts=d,t.cancelPendingCommit=ae(zy.bind(null,t,n,d,r,o,h,y,T,N,Q,X,null,z,F)),zs(t,d,y,!U);return}}zy(t,n,d,r,o,h,y,T,N)}function jT(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function zs(t,n,r,o){n&=~Zf,n&=~Fa,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var d=31-ut(h),y=1<<d;o[d]=-1,h&=~y}r!==0&&va(t,r,n)}function su(){return(Ue&6)===0?(al(0),!1):!0}function id(){if(we!==null){if(He===0)var t=we.return;else t=we,Fi=Va=null,vf(t),xr=null,Bo=0,t=we;for(;t!==null;)cy(t.alternate,t),t=t.return;we=null}}function zr(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,e2(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ts=0,id(),$e=t,we=r=qi(t.current,null),Ce=n,He=0,vn=null,ks=!1,Lr=Un(t,n),Jf=!1,Pr=En=Zf=Fa=Ls=lt=0,an=il=null,Wf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-ut(o),d=1<<h;n|=t[h],o&=~d}return es=n,wc(),r}function My(t,n){Se=null,K.H=Xo,n===Ir||n===Mc?(n=Xp(),He=3):n===of?(n=Xp(),He=4):He=n===Vf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,vn=n,we===null&&(lt=1,Kc(t,xn(n,t.current)))}function jy(){var t=yn.current;return t===null?!0:(Ce&4194048)===Ce?jn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?t===jn:!1}function Vy(){var t=K.H;return K.H=Xo,t===null?Xo:t}function ky(){var t=K.A;return K.A=OT,t}function au(){lt=4,ks||(Ce&4194048)!==Ce&&yn.current!==null||(Lr=!0),(Ls&134217727)===0&&(Fa&134217727)===0||$e===null||zs($e,Ce,En,!1)}function sd(t,n,r){var o=Ue;Ue|=2;var h=Vy(),d=ky();($e!==t||Ce!==n)&&(iu=null,zr(t,n)),n=!1;var y=lt;e:do try{if(He!==0&&we!==null){var T=we,N=vn;switch(He){case 8:id(),y=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(n=!0);var U=He;if(He=0,vn=null,Br(t,T,N,U),r&&Lr){y=0;break e}break;default:U=He,He=0,vn=null,Br(t,T,N,U)}}VT(),y=lt;break}catch(Q){My(t,Q)}while(!0);return n&&t.shellSuspendCounter++,Fi=Va=null,Ue=o,K.H=h,K.A=d,we===null&&($e=null,Ce=0,wc()),y}function VT(){for(;we!==null;)Ly(we)}function kT(t,n){var r=Ue;Ue|=2;var o=Vy(),h=ky();$e!==t||Ce!==n?(iu=null,nu=Xt()+500,zr(t,n)):Lr=Un(t,n);e:do try{if(He!==0&&we!==null){n=we;var d=vn;t:switch(He){case 1:He=0,vn=null,Br(t,n,d,1);break;case 2:case 9:if(Kp(d)){He=0,vn=null,Py(n);break}n=function(){He!==2&&He!==9||$e!==t||(He=7),Ei(t)},d.then(n,n);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Kp(d)?(He=0,vn=null,Py(n)):(He=0,vn=null,Br(t,n,d,7));break;case 5:var y=null;switch(we.tag){case 26:y=we.memoizedState;case 5:case 27:var T=we;if(y?A_(y):T.stateNode.complete){He=0,vn=null;var N=T.sibling;if(N!==null)we=N;else{var U=T.return;U!==null?(we=U,ru(U)):we=null}break t}}He=0,vn=null,Br(t,n,d,5);break;case 6:He=0,vn=null,Br(t,n,d,6);break;case 8:id(),lt=6;break e;default:throw Error(a(462))}}LT();break}catch(Q){My(t,Q)}while(!0);return Fi=Va=null,K.H=o,K.A=h,Ue=r,we!==null?0:($e=null,Ce=0,wc(),lt)}function LT(){for(;we!==null&&!pa();)Ly(we)}function Ly(t){var n=oy(t.alternate,t,es);t.memoizedProps=t.pendingProps,n===null?ru(t):we=n}function Py(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=ty(r,n,n.pendingProps,n.type,void 0,Ce);break;case 11:n=ty(r,n,n.pendingProps,n.type.render,n.ref,Ce);break;case 5:vf(n);default:cy(r,n),n=we=kp(n,es),n=oy(r,n,es)}t.memoizedProps=t.pendingProps,n===null?ru(t):we=n}function Br(t,n,r,o){Fi=Va=null,vf(n),xr=null,Bo=0;var h=n.return;try{if(wT(t,h,n,r,Ce)){lt=1,Kc(t,xn(r,t.current)),we=null;return}}catch(d){if(h!==null)throw we=h,d;lt=1,Kc(t,xn(r,t.current)),we=null;return}n.flags&32768?(Oe||o===1?t=!0:Lr||(Ce&536870912)!==0?t=!1:(ks=t=!0,(o===2||o===9||o===3||o===6)&&(o=yn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Uy(n,t)):ru(n)}function ru(t){var n=t;do{if((n.flags&32768)!==0){Uy(n,ks);return}t=n.return;var r=NT(n.alternate,n,es);if(r!==null){we=r;return}if(n=n.sibling,n!==null){we=n;return}we=n=t}while(n!==null);lt===0&&(lt=5)}function Uy(t,n){do{var r=IT(t.alternate,t);if(r!==null){r.flags&=32767,we=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){we=t;return}we=t=r}while(t!==null);lt=6,we=null}function zy(t,n,r,o,h,d,y,T,N){t.cancelPendingCommit=null;do ou();while(Rt!==0);if((Ue&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(d=n.lanes|n.childLanes,d|=Gh,kh(t,r,d,y,T,N),t===$e&&(we=$e=null,Ce=0),Ur=n,Us=t,ts=r,ed=d,td=h,Iy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,BT(gs,function(){return Gy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=ie.p,ie.p=2,y=Ue,Ue|=4;try{xT(t,n,r)}finally{Ue=y,ie.p=h,K.T=o}}Rt=1,By(),qy(),Hy()}}function By(){if(Rt===1){Rt=0;var t=Us,n=Ur,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=K.T,K.T=null;var o=ie.p;ie.p=2;var h=Ue;Ue|=4;try{Ty(n,t);var d=gd,y=Cp(t.containerInfo),T=d.focusedElem,N=d.selectionRange;if(y!==T&&T&&T.ownerDocument&&Rp(T.ownerDocument.documentElement,T)){if(N!==null&&zh(T)){var U=N.start,Q=N.end;if(Q===void 0&&(Q=U),"selectionStart"in T)T.selectionStart=U,T.selectionEnd=Math.min(Q,T.value.length);else{var X=T.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var F=z.getSelection(),ae=T.textContent.length,ge=Math.min(N.start,ae),Xe=N.end===void 0?ge:Math.min(N.end,ae);!F.extend&&ge>Xe&&(y=Xe,Xe=ge,ge=y);var j=wp(T,ge),D=wp(T,Xe);if(j&&D&&(F.rangeCount!==1||F.anchorNode!==j.node||F.anchorOffset!==j.offset||F.focusNode!==D.node||F.focusOffset!==D.offset)){var P=X.createRange();P.setStart(j.node,j.offset),F.removeAllRanges(),ge>Xe?(F.addRange(P),F.extend(D.node,D.offset)):(P.setEnd(D.node,D.offset),F.addRange(P))}}}}for(X=[],F=T;F=F.parentNode;)F.nodeType===1&&X.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<X.length;T++){var Y=X[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}vu=!!pd,gd=pd=null}finally{Ue=h,ie.p=o,K.T=r}}t.current=n,Rt=2}}function qy(){if(Rt===2){Rt=0;var t=Us,n=Ur,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=K.T,K.T=null;var o=ie.p;ie.p=2;var h=Ue;Ue|=4;try{gy(t,n.alternate,n)}finally{Ue=h,ie.p=o,K.T=r}}Rt=3}}function Hy(){if(Rt===4||Rt===3){Rt=0,Jl();var t=Us,n=Ur,r=ts,o=Iy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Rt=5:(Rt=0,Ur=Us=null,Fy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ps=null),Pi(r),n=n.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Pn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=K.T,h=ie.p,ie.p=2,K.T=null;try{for(var d=t.onRecoverableError,y=0;y<o.length;y++){var T=o[y];d(T.value,{componentStack:T.stack})}}finally{K.T=n,ie.p=h}}(ts&3)!==0&&ou(),Ei(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===nd?sl++:(sl=0,nd=t):sl=0,al(0)}}function Fy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Uo(n)))}function ou(){return By(),qy(),Hy(),Gy()}function Gy(){if(Rt!==5)return!1;var t=Us,n=ed;ed=0;var r=Pi(ts),o=K.T,h=ie.p;try{ie.p=32>r?32:r,K.T=null,r=td,td=null;var d=Us,y=ts;if(Rt=0,Ur=Us=null,ts=0,(Ue&6)!==0)throw Error(a(331));var T=Ue;if(Ue|=4,Ry(d.current),Ay(d,d.current,y,r),Ue=T,al(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Pn,d)}catch{}return!0}finally{ie.p=h,K.T=o,Fy(t,n)}}function Qy(t,n,r){n=xn(r,n),n=jf(t.stateNode,n,2),t=Os(t,n,2),t!==null&&(_a(t,2),Ei(t))}function Fe(t,n,r){if(t.tag===3)Qy(t,t,r);else for(;n!==null;){if(n.tag===3){Qy(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ps===null||!Ps.has(o))){t=xn(r,t),r=Kg(2),o=Os(n,r,2),o!==null&&(Yg(r,o,n,t),_a(o,2),Ei(o));break}}n=n.return}}function ad(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new MT;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(r)||(Jf=!0,h.add(r),t=PT.bind(null,t,n,r),n.then(t,t))}function PT(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,$e===t&&(Ce&r)===r&&(lt===4||lt===3&&(Ce&62914560)===Ce&&300>Xt()-tu?(Ue&2)===0&&zr(t,0):Zf|=r,Pr===Ce&&(Pr=0)),Ei(t)}function Ky(t,n){n===0&&(n=ic()),t=Oa(t,n),t!==null&&(_a(t,n),Ei(t))}function UT(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Ky(t,r)}function zT(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Ky(t,r)}function BT(t,n){return Ve(t,n)}var lu=null,qr=null,rd=!1,cu=!1,od=!1,Bs=0;function Ei(t){t!==qr&&t.next===null&&(qr===null?lu=qr=t:qr=qr.next=t),cu=!0,rd||(rd=!0,HT())}function al(t,n){if(!od&&cu){od=!0;do for(var r=!1,o=lu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var y=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-ut(42|t)+1)-1,d&=h&~(y&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,Jy(o,d))}else d=Ce,d=ni(o,o===$e?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Un(o,d)||(r=!0,Jy(o,d));o=o.next}while(r);od=!1}}function qT(){Yy()}function Yy(){cu=rd=!1;var t=0;Bs!==0&&WT()&&(t=Bs);for(var n=Xt(),r=null,o=lu;o!==null;){var h=o.next,d=Xy(o,n);d===0?(o.next=null,r===null?lu=h:r.next=h,h===null&&(qr=r)):(r=o,(t!==0||(d&3)!==0)&&(cu=!0)),o=h}Rt!==0&&Rt!==5||al(t),Bs!==0&&(Bs=0)}function Xy(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-ut(d),T=1<<y,N=h[y];N===-1?((T&r)===0||(T&o)!==0)&&(h[y]=Vh(T,n)):N<=n&&(t.expiredLanes|=T),d&=~T}if(n=$e,r=Ce,r=ni(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(He===2||He===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&fn(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Un(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&fn(o),Pi(r)){case 2:case 8:r=po;break;case 32:r=gs;break;case 268435456:r=Zl;break;default:r=gs}return o=$y.bind(null,t),r=Ve(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&fn(o),t.callbackPriority=2,t.callbackNode=null,2}function $y(t,n){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(ou()&&t.callbackNode!==r)return null;var o=Ce;return o=ni(t,t===$e?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Dy(t,o,n),Xy(t,Xt()),t.callbackNode!=null&&t.callbackNode===r?$y.bind(null,t):null)}function Jy(t,n){if(ou())return null;Dy(t,n,!0)}function HT(){t2(function(){(Ue&6)!==0?Ve(mo,qT):Yy()})}function ld(){if(Bs===0){var t=Cr;t===0&&(t=ei,ei<<=1,(ei&261888)===0&&(ei=256)),Bs=t}return Bs}function Zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fr(""+t)}function Wy(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function FT(t,n,r,o,h){if(n==="submit"&&r&&r.stateNode===h){var d=Zy((h[Dt]||null).action),y=o.submitter;y&&(n=(n=y[Dt]||null)?Zy(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var T=new di("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Bs!==0){var N=y?Wy(h,y):new FormData(h);Nf(r,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(T.preventDefault(),N=y?Wy(h,y):new FormData(h),Nf(r,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var cd=0;cd<Fh.length;cd++){var ud=Fh[cd],GT=ud.toLowerCase(),QT=ud[0].toUpperCase()+ud.slice(1);Kn(GT,"on"+QT)}Kn(xp,"onAnimationEnd"),Kn(Dp,"onAnimationIteration"),Kn(Op,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(lT,"onTransitionRun"),Kn(cT,"onTransitionStart"),Kn(uT,"onTransitionCancel"),Kn(Mp,"onTransitionEnd"),ci("onMouseEnter",["mouseout","mouseover"]),ci("onMouseLeave",["mouseout","mouseover"]),ci("onPointerEnter",["pointerout","pointerover"]),ci("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function e_(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],h=o.event;o=o.listeners;e:{var d=void 0;if(n)for(var y=o.length-1;0<=y;y--){var T=o[y],N=T.instance,U=T.currentTarget;if(T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=U;try{d(h)}catch(Q){bc(Q)}h.currentTarget=null,d=N}else for(y=0;y<o.length;y++){if(T=o[y],N=T.instance,U=T.currentTarget,T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=U;try{d(h)}catch(Q){bc(Q)}h.currentTarget=null,d=N}}}}function Re(t,n){var r=n[or];r===void 0&&(r=n[or]=new Set);var o=t+"__bubble";r.has(o)||(t_(n,t,2,!1),r.add(o))}function hd(t,n,r){var o=0;n&&(o|=4),t_(r,t,o,n)}var uu="_reactListening"+Math.random().toString(36).slice(2);function fd(t){if(!t[uu]){t[uu]=!0,_o.forEach(function(r){r!=="selectionchange"&&(KT.has(r)||hd(r,!1,t),hd(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[uu]||(n[uu]=!0,hd("selectionchange",!1,n))}}function t_(t,n,r,o){switch(x_(n)){case 2:var h=T2;break;case 8:h=S2;break;default:h=Cd}r=h.bind(null,n,r,t),h=void 0,!ba||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,r,{capture:!0,passive:h}):t.addEventListener(n,r,!0):h!==void 0?t.addEventListener(n,r,{passive:h}):t.addEventListener(n,r,!1)}function dd(t,n,r,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var T=o.stateNode.containerInfo;if(T===h)break;if(y===4)for(y=o.return;y!==null;){var N=y.tag;if((N===3||N===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;T!==null;){if(y=ri(T),y===null)return;if(N=y.tag,N===5||N===6||N===26||N===27){o=d=y;continue e}T=T.parentNode}}o=o.return}Ss(function(){var U=d,Q=Rn(r),X=[];e:{var z=jp.get(t);if(z!==void 0){var F=di,ae=t;switch(t){case"keypress":if(Ra(r)===0)break e;case"keydown":case"keyup":F=Tc;break;case"focusin":ae="focus",F=Na;break;case"focusout":ae="blur",F=Na;break;case"beforeblur":case"afterblur":F=Na;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Do;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=g;break;case xp:case Dp:case Op:F=mc;break;case Mp:F=A;break;case"scroll":case"scrollend":F=xo;break;case"wheel":F=B;break;case"copy":case"cut":case"paste":F=pc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Bi;break;case"toggle":case"beforetoggle":F=Te}var ge=(n&4)!==0,Xe=!ge&&(t==="scroll"||t==="scrollend"),j=ge?z!==null?z+"Capture":null:z;ge=[];for(var D=U,P;D!==null;){var Y=D;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||j===null||(Y=Hn(D,j),Y!=null&&ge.push(ol(D,Y,P))),Xe)break;D=D.return}0<ge.length&&(z=new F(z,ae,null,r,Q),X.push({event:z,listeners:ge}))}}if((n&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",z&&r!==Co&&(ae=r.relatedTarget||r.fromElement)&&(ri(ae)||ae[si]))break e;if((F||z)&&(z=Q.window===Q?Q:(z=Q.ownerDocument)?z.defaultView||z.parentWindow:window,F?(ae=r.relatedTarget||r.toElement,F=U,ae=ae?ri(ae):null,ae!==null&&(Xe=c(ae),ge=ae.tag,ae!==Xe||ge!==5&&ge!==27&&ge!==6)&&(ae=null)):(F=null,ae=U),F!==ae)){if(ge=Do,Y="onMouseLeave",j="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Bi,Y="onPointerLeave",j="onPointerEnter",D="pointer"),Xe=F==null?z:dn(F),P=ae==null?z:dn(ae),z=new ge(Y,D+"leave",F,r,Q),z.target=Xe,z.relatedTarget=P,Y=null,ri(Q)===U&&(ge=new ge(j,D+"enter",ae,r,Q),ge.target=P,ge.relatedTarget=Xe,Y=ge),Xe=Y,F&&ae)t:{for(ge=YT,j=F,D=ae,P=0,Y=j;Y;Y=ge(Y))P++;Y=0;for(var de=D;de;de=ge(de))Y++;for(;0<P-Y;)j=ge(j),P--;for(;0<Y-P;)D=ge(D),Y--;for(;P--;){if(j===D||D!==null&&j===D.alternate){ge=j;break t}j=ge(j),D=ge(D)}ge=null}else ge=null;F!==null&&n_(X,z,F,ge,!1),ae!==null&&Xe!==null&&n_(X,Xe,ae,ge,!0)}}e:{if(z=U?dn(U):window,F=z.nodeName&&z.nodeName.toLowerCase(),F==="select"||F==="input"&&z.type==="file")var ke=vp;else if(yp(z))if(Ep)ke=aT;else{ke=iT;var le=nT}else F=z.nodeName,!F||F.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?U&&hr(U.elementType)&&(ke=vp):ke=sT;if(ke&&(ke=ke(t,U))){_p(X,ke,r,Q);break e}le&&le(t,z,U),t==="focusout"&&U&&z.type==="number"&&U.memoizedProps.value!=null&&bo(z,"number",z.value)}switch(le=U?dn(U):window,t){case"focusin":(yp(le)||le.contentEditable==="true")&&(vr=le,Bh=U,ko=null);break;case"focusout":ko=Bh=vr=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,Np(X,r,Q);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":Np(X,r,Q)}var Ae;if(Pe)e:{switch(t){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else _r?Ia(t,r)&&(Ne="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Ne="onCompositionStart");Ne&&(gi&&r.locale!=="ko"&&(_r||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&_r&&(Ae=Io()):(fi=Q,No="value"in fi?fi.value:fi.textContent,_r=!0)),le=hu(U,Ne),0<le.length&&(Ne=new pi(Ne,t,null,r,Q),X.push({event:Ne,listeners:le}),Ae?Ne.data=Ae:(Ae=yr(r),Ae!==null&&(Ne.data=Ae)))),(Ae=Nn?ZE(t,r):WE(t,r))&&(Ne=hu(U,"onBeforeInput"),0<Ne.length&&(le=new pi("onBeforeInput","beforeinput",null,r,Q),X.push({event:le,listeners:Ne}),le.data=Ae)),FT(X,t,U,r,Q)}e_(X,n)})}function ol(t,n,r){return{instance:t,listener:n,currentTarget:r}}function hu(t,n){for(var r=n+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Hn(t,r),h!=null&&o.unshift(ol(t,h,d)),h=Hn(t,n),h!=null&&o.push(ol(t,h,d))),t.tag===3)return o;t=t.return}return[]}function YT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n_(t,n,r,o,h){for(var d=n._reactName,y=[];r!==null&&r!==o;){var T=r,N=T.alternate,U=T.stateNode;if(T=T.tag,N!==null&&N===o)break;T!==5&&T!==26&&T!==27||U===null||(N=U,h?(U=Hn(r,d),U!=null&&y.unshift(ol(r,U,N))):h||(U=Hn(r,d),U!=null&&y.push(ol(r,U,N)))),r=r.return}y.length!==0&&t.push({event:n,listeners:y})}var XT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(XT,`
`).replace($T,"")}function s_(t,n){return n=i_(n),i_(t)===n}function Ye(t,n,r,o,h,d){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||en(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&en(t,""+o);break;case"className":mn(t,"class",o);break;case"tabIndex":mn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(t,r,o);break;case"style":Ro(t,o,d);break;case"data":if(n!=="object"){mn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=fr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(n!=="input"&&Ye(t,n,"name",h.name,h,null),Ye(t,n,"formEncType",h.formEncType,h,null),Ye(t,n,"formMethod",h.formMethod,h,null),Ye(t,n,"formTarget",h.formTarget,h,null)):(Ye(t,n,"encType",h.encType,h,null),Ye(t,n,"method",h.method,h,null),Ye(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=fr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=qn);break;case"onScroll":o!=null&&Re("scroll",t);break;case"onScrollEnd":o!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=fr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Re("beforetoggle",t),Re("toggle",t),cr(t,"popover",o);break;case"xlinkActuate":_t(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":_t(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":_t(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":_t(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":_t(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":_t(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":_t(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":_t(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":_t(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":cr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=hc.get(r)||r,cr(t,r,o))}}function md(t,n,r,o,h,d){switch(r){case"style":Ro(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof o=="string"?en(t,o):(typeof o=="number"||typeof o=="bigint")&&en(t,""+o);break;case"onScroll":o!=null&&Re("scroll",t);break;case"onScrollEnd":o!=null&&Re("scrollend",t);break;case"onClick":o!=null&&(t.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),n=r.slice(2,h?r.length-7:void 0),d=t[Dt]||null,d=d!=null?d[r]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,h);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):cr(t,r,o)}}}function Bt(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var o=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var y=r[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ye(t,n,d,y,r,null)}}h&&Ye(t,n,"srcSet",r.srcSet,r,null),o&&Ye(t,n,"src",r.src,r,null);return;case"input":Re("invalid",t);var T=d=y=h=null,N=null,U=null;for(o in r)if(r.hasOwnProperty(o)){var Q=r[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":y=Q;break;case"checked":N=Q;break;case"defaultChecked":U=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,n));break;default:Ye(t,n,o,Q,r,null)}}lc(t,d,T,N,U,y,h,!1);return;case"select":Re("invalid",t),o=y=d=null;for(h in r)if(r.hasOwnProperty(h)&&(T=r[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":y=T;break;case"multiple":o=T;default:Ye(t,n,h,T,r,null)}n=d,r=y,t.multiple=!!o,n!=null?_s(t,!!o,n,!1):r!=null&&_s(t,!!o,r,!0);return;case"textarea":Re("invalid",t),d=h=o=null;for(y in r)if(r.hasOwnProperty(y)&&(T=r[y],T!=null))switch(y){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Ye(t,n,y,T,r,null)}vs(t,o,h,d);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(o=r[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ye(t,n,N,o,r,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(o=0;o<rl.length;o++)Re(rl[o],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(o=r[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Ye(t,n,U,o,r,null)}return;default:if(hr(n)){for(Q in r)r.hasOwnProperty(Q)&&(o=r[Q],o!==void 0&&md(t,n,Q,o,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(o=r[T],o!=null&&Ye(t,n,T,o,r,null))}function JT(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,T=null,N=null,U=null,Q=null;for(F in r){var X=r[F];if(r.hasOwnProperty(F)&&X!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=X;default:o.hasOwnProperty(F)||Ye(t,n,F,null,o,X)}}for(var z in o){var F=o[z];if(X=r[z],o.hasOwnProperty(z)&&(F!=null||X!=null))switch(z){case"type":d=F;break;case"name":h=F;break;case"checked":U=F;break;case"defaultChecked":Q=F;break;case"value":y=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,n));break;default:F!==X&&Ye(t,n,z,F,o,X)}}ur(t,y,T,N,U,Q,d,h);return;case"select":F=y=T=z=null;for(d in r)if(N=r[d],r.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":F=N;default:o.hasOwnProperty(d)||Ye(t,n,d,null,o,N)}for(h in o)if(d=o[h],N=r[h],o.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":z=d;break;case"defaultValue":T=d;break;case"multiple":y=d;default:d!==N&&Ye(t,n,h,d,o,N)}n=T,r=y,o=F,z!=null?_s(t,!!r,z,!1):!!o!=!!r&&(n!=null?_s(t,!!r,n,!0):_s(t,!!r,r?[]:"",!1));return;case"textarea":F=z=null;for(T in r)if(h=r[T],r.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ye(t,n,T,null,o,h)}for(y in o)if(h=o[y],d=r[y],o.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":z=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==d&&Ye(t,n,y,h,o,d)}cc(t,z,F);return;case"option":for(var ae in r)if(z=r[ae],r.hasOwnProperty(ae)&&z!=null&&!o.hasOwnProperty(ae))switch(ae){case"selected":t.selected=!1;break;default:Ye(t,n,ae,null,o,z)}for(N in o)if(z=o[N],F=r[N],o.hasOwnProperty(N)&&z!==F&&(z!=null||F!=null))switch(N){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ye(t,n,N,z,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in r)z=r[ge],r.hasOwnProperty(ge)&&z!=null&&!o.hasOwnProperty(ge)&&Ye(t,n,ge,null,o,z);for(U in o)if(z=o[U],F=r[U],o.hasOwnProperty(U)&&z!==F&&(z!=null||F!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,n));break;default:Ye(t,n,U,z,o,F)}return;default:if(hr(n)){for(var Xe in r)z=r[Xe],r.hasOwnProperty(Xe)&&z!==void 0&&!o.hasOwnProperty(Xe)&&md(t,n,Xe,void 0,o,z);for(Q in o)z=o[Q],F=r[Q],!o.hasOwnProperty(Q)||z===F||z===void 0&&F===void 0||md(t,n,Q,z,o,F);return}}for(var j in r)z=r[j],r.hasOwnProperty(j)&&z!=null&&!o.hasOwnProperty(j)&&Ye(t,n,j,null,o,z);for(X in o)z=o[X],F=r[X],!o.hasOwnProperty(X)||z===F||z==null&&F==null||Ye(t,n,X,z,o,F)}function a_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var h=r[o],d=h.transferSize,y=h.initiatorType,T=h.duration;if(d&&T&&a_(y)){for(y=0,T=h.responseEnd,o+=1;o<r.length;o++){var N=r[o],U=N.startTime;if(U>T)break;var Q=N.transferSize,X=N.initiatorType;Q&&a_(X)&&(N=N.responseEnd,y+=Q*(N<T?1:(T-U)/(N-U)))}if(--o,n+=8*(d+y)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pd=null,gd=null;function fu(t){return t.nodeType===9?t:t.ownerDocument}function r_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function yd(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _d=null;function WT(){var t=window.event;return t&&t.type==="popstate"?t===_d?!1:(_d=t,!0):(_d=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,e2=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,t2=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(t){return c_.resolve(null).then(t).catch(n2)}:l_;function n2(t){setTimeout(function(){throw t})}function qs(t){return t==="head"}function u_(t,n){var r=n,o=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(h),Qr(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")ll(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,ll(r);for(var d=r.firstChild;d;){var y=d.nextSibling,T=d.nodeName;d[ai]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||r.removeChild(d),d=y}}else r==="body"&&ll(t.ownerDocument.body);r=h}while(r);Qr(n)}function h_(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function vd(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":vd(r),lr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function i2(t,n,r,o){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ai])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Vn(t.nextSibling),t===null)break}return null}function s2(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Vn(t.nextSibling),t===null))return null;return t}function f_(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Vn(t.nextSibling),t===null))return null;return t}function Ed(t){return t.data==="$?"||t.data==="$~"}function Td(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function a2(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Vn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Sd=null;function d_(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Vn(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function m_(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function p_(t,n,r){switch(n=fu(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function ll(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);lr(t)}var kn=new Map,g_=new Set;function du(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ns=ie.d;ie.d={f:r2,r:o2,D:l2,C:c2,L:u2,m:h2,X:d2,S:f2,M:m2};function r2(){var t=ns.f(),n=su();return t||n}function o2(t){var n=wn(t);n!==null&&n.tag===5&&n.type==="form"?Mg(n):ns.r(t)}var Hr=typeof document>"u"?null:document;function y_(t,n,r){var o=Hr;if(o&&typeof n=="string"&&n){var h=Wt(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),g_.has(h)||(g_.add(h),t={rel:t,crossOrigin:r,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Bt(n,"link",t),yt(n),o.head.appendChild(n)))}}function l2(t){ns.D(t),y_("dns-prefetch",t,null)}function c2(t,n){ns.C(t,n),y_("preconnect",t,n)}function u2(t,n,r){ns.L(t,n,r);var o=Hr;if(o&&t&&n){var h='link[rel="preload"][as="'+Wt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Wt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Wt(r.imageSizes)+'"]')):h+='[href="'+Wt(t)+'"]';var d=h;switch(n){case"style":d=Fr(t);break;case"script":d=Gr(t)}kn.has(d)||(t=b({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),kn.set(d,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(cl(d))||n==="script"&&o.querySelector(ul(d))||(n=o.createElement("link"),Bt(n,"link",t),yt(n),o.head.appendChild(n)))}}function h2(t,n){ns.m(t,n);var r=Hr;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Wt(o)+'"][href="'+Wt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Gr(t)}if(!kn.has(d)&&(t=b({rel:"modulepreload",href:t},n),kn.set(d,t),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ul(d)))return}o=r.createElement("link"),Bt(o,"link",t),yt(o),r.head.appendChild(o)}}}function f2(t,n,r){ns.S(t,n,r);var o=Hr;if(o&&t){var h=oi(o).hoistableStyles,d=Fr(t);n=n||"default";var y=h.get(d);if(!y){var T={loading:0,preload:null};if(y=o.querySelector(cl(d)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},r),(r=kn.get(d))&&Ad(t,r);var N=y=o.createElement("link");yt(N),Bt(N,"link",t),N._p=new Promise(function(U,Q){N.onload=U,N.onerror=Q}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,mu(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:T},h.set(d,y)}}}function d2(t,n){ns.X(t,n);var r=Hr;if(r&&t){var o=oi(r).hoistableScripts,h=Gr(t),d=o.get(h);d||(d=r.querySelector(ul(h)),d||(t=b({src:t,async:!0},n),(n=kn.get(h))&&bd(t,n),d=r.createElement("script"),yt(d),Bt(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function m2(t,n){ns.M(t,n);var r=Hr;if(r&&t){var o=oi(r).hoistableScripts,h=Gr(t),d=o.get(h);d||(d=r.querySelector(ul(h)),d||(t=b({src:t,async:!0,type:"module"},n),(n=kn.get(h))&&bd(t,n),d=r.createElement("script"),yt(d),Bt(d,"link",t),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function __(t,n,r,o){var h=(h=Zt.current)?du(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Fr(r.href),r=oi(h).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Fr(r.href);var d=oi(h).hoistableStyles,y=d.get(t);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=h.querySelector(cl(t)))&&!d._p&&(y.instance=d,y.state.loading=5),kn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},kn.set(t,r),d||p2(h,t,r,y.state))),n&&o===null)throw Error(a(528,""));return y}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Gr(r),r=oi(h).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Fr(t){return'href="'+Wt(t)+'"'}function cl(t){return'link[rel="stylesheet"]['+t+"]"}function v_(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function p2(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Bt(n,"link",r),yt(n),t.head.appendChild(n))}function Gr(t){return'[src="'+Wt(t)+'"]'}function ul(t){return"script[async]"+t}function E_(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Wt(r.href)+'"]');if(o)return n.instance=o,yt(o),o;var h=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),yt(o),Bt(o,"style",h),mu(o,r.precedence,t),n.instance=o;case"stylesheet":h=Fr(r.href);var d=t.querySelector(cl(h));if(d)return n.state.loading|=4,n.instance=d,yt(d),d;o=v_(r),(h=kn.get(h))&&Ad(o,h),d=(t.ownerDocument||t).createElement("link"),yt(d);var y=d;return y._p=new Promise(function(T,N){y.onload=T,y.onerror=N}),Bt(d,"link",o),n.state.loading|=4,mu(d,r.precedence,t),n.instance=d;case"script":return d=Gr(r.src),(h=t.querySelector(ul(d)))?(n.instance=h,yt(h),h):(o=r,(h=kn.get(d))&&(o=b({},r),bd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),yt(h),Bt(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,mu(o,r.precedence,t));return n.instance}function mu(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,y=0;y<o.length;y++){var T=o[y];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Ad(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function bd(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var pu=null;function T_(t,n,r){if(pu===null){var o=new Map,h=pu=new Map;h.set(r,o)}else h=pu,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var d=r[h];if(!(d[ai]||d[gt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=t+y;var T=o.get(y);T?T.push(d):o.set(y,[d])}}return o}function S_(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function g2(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function A_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function y2(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Fr(o.href),d=n.querySelector(cl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=gu.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=d,yt(d);return}d=n.ownerDocument||n,o=v_(o),(h=kn.get(h))&&Ad(o,h),d=d.createElement("link"),yt(d);var y=d;y._p=new Promise(function(T,N){y.onload=T,y.onerror=N}),Bt(d,"link",o),r.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=gu.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var wd=0;function _2(t,n){return t.stylesheets&&t.count===0&&_u(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+n);0<t.imgBytes&&wd===0&&(wd=62500*ZT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>wd?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yu=null;function _u(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yu=new Map,n.forEach(v2,t),yu=null,gu.call(t))}function v2(t,n){if(!(n.state.loading&4)){var r=yu.get(t);if(r)var o=r.get(null);else{r=new Map,yu.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}h=n.instance,y=h.getAttribute("data-precedence"),d=r.get(y)||o,d===o&&r.set(null,h),r.set(y,h),this.count++,o=gu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var hl={$$typeof:W,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function E2(t,n,r,o,h,d,y,T,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.hiddenUpdates=ii(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function b_(t,n,r,o,h,d,y,T,N,U,Q,X){return t=new E2(t,n,r,y,N,U,Q,X,T),n=1,d===!0&&(n|=24),d=gn(3,null,null,n),t.current=d,d.stateNode=t,n=sf(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:r,cache:n},lf(d),t}function w_(t){return t?(t=Sr,t):Sr}function R_(t,n,r,o,h,d){h=w_(h),o.context===null?o.context=h:o.pendingContext=h,o=Ds(n),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=Os(t,o,n),r!==null&&(rn(r,t,n),Ho(r,t,n))}function C_(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Rd(t,n){C_(t,n),(t=t.alternate)&&C_(t,n)}function N_(t){if(t.tag===13||t.tag===31){var n=Oa(t,67108864);n!==null&&rn(n,t,67108864),Rd(t,67108864)}}function I_(t){if(t.tag===13||t.tag===31){var n=Tn();n=Ea(n);var r=Oa(t,n);r!==null&&rn(r,t,n),Rd(t,n)}}var vu=!0;function T2(t,n,r,o){var h=K.T;K.T=null;var d=ie.p;try{ie.p=2,Cd(t,n,r,o)}finally{ie.p=d,K.T=h}}function S2(t,n,r,o){var h=K.T;K.T=null;var d=ie.p;try{ie.p=8,Cd(t,n,r,o)}finally{ie.p=d,K.T=h}}function Cd(t,n,r,o){if(vu){var h=Nd(o);if(h===null)dd(t,n,o,Eu,r),D_(t,o);else if(b2(h,t,n,r,o))o.stopPropagation();else if(D_(t,o),n&4&&-1<A2.indexOf(t)){for(;h!==null;){var d=wn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=ti(d.pendingLanes);if(y!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;y;){var N=1<<31-ut(y);T.entanglements[1]|=N,y&=~N}Ei(d),(Ue&6)===0&&(nu=Xt()+500,al(0))}}break;case 31:case 13:T=Oa(d,2),T!==null&&rn(T,d,2),su(),Rd(d,2)}if(d=Nd(o),d===null&&dd(t,n,o,Eu,r),d===h)break;h=d}h!==null&&o.stopPropagation()}else dd(t,n,o,null,r)}}function Nd(t){return t=Rn(t),Id(t)}var Eu=null;function Id(t){if(Eu=null,t=ri(t),t!==null){var n=c(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=f(n),t!==null)return t;t=null}else if(r===31){if(t=p(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Eu=t,null}function x_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ga()){case mo:return 2;case po:return 8;case gs:case jh:return 32;case Zl:return 268435456;default:return 32}default:return 32}}var xd=!1,Hs=null,Fs=null,Gs=null,fl=new Map,dl=new Map,Qs=[],A2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(t,n){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":fl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(n.pointerId)}}function ml(t,n,r,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=wn(n),n!==null&&N_(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function b2(t,n,r,o,h){switch(n){case"focusin":return Hs=ml(Hs,t,n,r,o,h),!0;case"dragenter":return Fs=ml(Fs,t,n,r,o,h),!0;case"mouseover":return Gs=ml(Gs,t,n,r,o,h),!0;case"pointerover":var d=h.pointerId;return fl.set(d,ml(fl.get(d)||null,t,n,r,o,h)),!0;case"gotpointercapture":return d=h.pointerId,dl.set(d,ml(dl.get(d)||null,t,n,r,o,h)),!0}return!1}function O_(t){var n=ri(t.target);if(n!==null){var r=c(n);if(r!==null){if(n=r.tag,n===13){if(n=f(r),n!==null){t.blockedOn=n,zn(t.priority,function(){I_(r)});return}}else if(n===31){if(n=p(r),n!==null){t.blockedOn=n,zn(t.priority,function(){I_(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Nd(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Co=o,r.target.dispatchEvent(o),Co=null}else return n=wn(r),n!==null&&N_(n),t.blockedOn=r,!1;n.shift()}return!0}function M_(t,n,r){Tu(t)&&r.delete(n)}function w2(){xd=!1,Hs!==null&&Tu(Hs)&&(Hs=null),Fs!==null&&Tu(Fs)&&(Fs=null),Gs!==null&&Tu(Gs)&&(Gs=null),fl.forEach(M_),dl.forEach(M_)}function Su(t,n){t.blockedOn===n&&(t.blockedOn=null,xd||(xd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,w2)))}var Au=null;function j_(t){Au!==t&&(Au=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Au===t&&(Au=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(Id(o||r)===null)continue;break}var d=wn(r);d!==null&&(t.splice(n,3),n-=3,Nf(d,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function Qr(t){function n(N){return Su(N,t)}Hs!==null&&Su(Hs,t),Fs!==null&&Su(Fs,t),Gs!==null&&Su(Gs,t),fl.forEach(n),dl.forEach(n);for(var r=0;r<Qs.length;r++){var o=Qs[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Qs.length&&(r=Qs[0],r.blockedOn===null);)O_(r),r.blockedOn===null&&Qs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],d=r[o+1],y=h[Dt]||null;if(typeof d=="function")y||j_(r);else if(y){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[Dt]||null)T=y.formAction;else if(Id(h)!==null)continue}else T=y.action;typeof T=="function"?r[o+1]=T:(r.splice(o,3),o-=3),j_(r)}}}function V_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Dd(t){this._internalRoot=t}bu.prototype.render=Dd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,o=Tn();R_(r,o,t,n,null,null)},bu.prototype.unmount=Dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;R_(t.current,2,null,t,null,null),su(),n[si]=null}};function bu(t){this._internalRoot=t}bu.prototype.unstable_scheduleHydration=function(t){if(t){var n=sc();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Qs.length&&n!==0&&n<Qs[r].priority;r++);Qs.splice(r,0,t),r===0&&O_(t)}};var k_=e.version;if(k_!=="19.2.0")throw Error(a(527,k_,"19.2.0"));ie.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=E(n),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var R2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Pn=wu.inject(R2),kt=wu}catch{}}return gl.createRoot=function(t,n){if(!l(t))throw Error(a(299));var r=!1,o="",h=Hg,d=Fg,y=Gg;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=b_(t,1,!1,null,null,r,o,null,h,d,y,V_),t[si]=n.current,fd(t),new Dd(n)},gl.hydrateRoot=function(t,n,r){if(!l(t))throw Error(a(299));var o=!1,h="",d=Hg,y=Fg,T=Gg,N=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(N=r.formState)),n=b_(t,1,!0,n,r??null,o,h,N,d,y,T,V_),n.context=w_(null),r=n.current,o=Tn(),o=Ea(o),h=Ds(o),h.callback=null,Os(r,h,o),r=o,n.current.lanes=r,_a(n,r),Ei(n),t[si]=n.current,fd(t),new bu(n)},gl.version="19.2.0",gl}var q_;function U2(){if(q_)return Md.exports;q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Md.exports=P2(),Md.exports}var z2=U2();const B2=()=>{};var H_={};const v0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},q2=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const l=s[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];e[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],f=s[i++],p=s[i++],_=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const c=s[i++],f=s[i++];e[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},E0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,_=l+2<s.length,E=_?s[l+2]:0,S=c>>2,b=(c&3)<<4|p>>4;let R=(p&15)<<2|E>>6,L=E&63;_||(L=64,f||(R=64)),a.push(i[S],i[b],i[R],i[L])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(v0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):q2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const E=l<s.length?i[s.charAt(l)]:64;++l;const b=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||p==null||E==null||b==null)throw new H2;const R=c<<2|p>>4;if(a.push(R),E!==64){const L=p<<4&240|E>>2;if(a.push(L),b!==64){const q=E<<6&192|b;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class H2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F2=function(s){const e=v0(s);return E0.encodeByteArray(e,!0)},Fu=function(s){return F2(s).replace(/\./g,"")},T0=function(s){try{return E0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Q2=()=>G2().__FIREBASE_DEFAULTS__,K2=()=>{if(typeof process>"u"||typeof H_>"u")return;const s=H_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Y2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&T0(s[1]);return e&&JSON.parse(e)},dh=()=>{try{return B2()||Q2()||K2()||Y2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},S0=s=>dh()?.emulatorHosts?.[s],A0=s=>{const e=S0(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},b0=()=>dh()?.config,w0=s=>dh()?.[`_${s}`];class X2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}function nr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Am(s){return(await fetch(s,{credentials:"include"})).ok}function R0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Fu(JSON.stringify(i)),Fu(JSON.stringify(f)),""].join(".")}const Al={};function $2(){const s={prod:[],emulator:[]};for(const e of Object.keys(Al))Al[e]?s.emulator.push(e):s.prod.push(e);return s}function J2(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let F_=!1;function bm(s,e){if(typeof window>"u"||typeof document>"u"||!nr(window.location.host)||Al[s]===e||Al[s]||F_)return;Al[s]=e;function i(R){return`__firebase__banner__${R}`}const a="__firebase__banner",c=$2().prod.length>0;function f(){const R=document.getElementById(a);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function _(R,L){R.setAttribute("width","24"),R.setAttribute("id",L),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function E(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{F_=!0,f()},R}function S(R,L){R.setAttribute("id",L),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function b(){const R=J2(a),L=i("text"),q=document.getElementById(L)||document.createElement("span"),J=i("learnmore"),G=document.getElementById(J)||document.createElement("a"),H=i("preprendIcon"),ne=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const W=R.element;p(W),S(G,J);const ee=E();_(ne,H),W.append(ne,q,G,ee),document.body.appendChild(W)}c?(q.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function W2(){const s=dh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function nS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iS(){const s=Yt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function sS(){return!W2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aS(){try{return typeof indexedDB=="object"}catch{return!1}}function rS(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}const oS="FirebaseError";class ji extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=oS,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?lS(c,a):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new ji(l,p,a)}}function lS(s,e){return s.replace(cS,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const cS=/\{\$([^}]+)}/g;function uS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ya(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const c=s[l],f=e[l];if(G_(c)&&G_(f)){if(!Ya(c,f))return!1}else if(c!==f)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function G_(s){return s!==null&&typeof s=="object"}function Bl(s){const e=[];for(const[i,a]of Object.entries(s))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function yl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function _l(s){const e=s.indexOf("?");if(!e)return"";const i=s.indexOf("#",e);return s.substring(e,i>0?i:void 0)}function hS(s,e){const i=new fS(s,e);return i.subscribe.bind(i)}class fS{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,a){let l;if(e===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");dS(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:a},l.next===void 0&&(l.next=kd),l.error===void 0&&(l.error=kd),l.complete===void 0&&(l.complete=kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dS(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function kd(){}function Vt(s){return s&&s._delegate?s._delegate:s}class sa{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ga="[DEFAULT]";class mS{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new X2;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gS(e))try{this.getOrInitializeService({instanceIdentifier:Ga})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(e=Ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ga){return this.instances.has(e)}getOptions(e=Ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);a===p&&f.resolve(l)}return l}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:pS(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ga){return this.component?this.component.multipleInstances?e:Ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(s){return s===Ga?void 0:s}function gS(s){return s.instantiationMode==="EAGER"}class yS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new mS(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var Ie;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ie||(Ie={}));const _S={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},vS=Ie.INFO,ES={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},TS=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=ES[e];if(l)console[l](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=vS,this._logHandler=TS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_S[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const SS=(s,e)=>e.some(i=>s instanceof i);let Q_,K_;function AS(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bS(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Xd=new WeakMap,N0=new WeakMap,Ld=new WeakMap,Rm=new WeakMap;function wS(s){const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{i(ea(s.result)),l()},f=()=>{a(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&C0.set(i,s)}).catch(()=>{}),Rm.set(e,s),e}function RS(s){if(Xd.has(s))return;const e=new Promise((i,a)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{i(),l()},f=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Xd.set(s,e)}let $d={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return Xd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||N0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ea(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function CS(s){$d=s($d)}function NS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Pd(this),e,...i);return N0.set(a,e.sort?e.sort():[e]),ea(a)}:bS().includes(s)?function(...e){return s.apply(Pd(this),e),ea(C0.get(this))}:function(...e){return ea(s.apply(Pd(this),e))}}function IS(s){return typeof s=="function"?NS(s):(s instanceof IDBTransaction&&RS(s),SS(s,AS())?new Proxy(s,$d):s)}function ea(s){if(s instanceof IDBRequest)return wS(s);if(Ld.has(s))return Ld.get(s);const e=IS(s);return e!==s&&(Ld.set(s,e),Rm.set(e,s)),e}const Pd=s=>Rm.get(s);function xS(s,e,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=ea(f);return a&&f.addEventListener("upgradeneeded",_=>{a(ea(f.result),_.oldVersion,_.newVersion,ea(f.transaction),_)}),i&&f.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),p.then(_=>{c&&_.addEventListener("close",()=>c()),l&&_.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),p}const DS=["get","getKey","getAll","getAllKeys","count"],OS=["put","add","delete","clear"],Ud=new Map;function Y_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=OS.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||DS.includes(i)))return;const c=async function(f,...p){const _=this.transaction(f,l?"readwrite":"readonly");let E=_.store;return a&&(E=E.index(p.shift())),(await Promise.all([E[i](...p),l&&_.done]))[0]};return Ud.set(e,c),c}CS(s=>({...s,get:(e,i,a)=>Y_(e,i)||s.get(e,i,a),has:(e,i)=>!!Y_(e,i)||s.has(e,i)}));class MS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(jS(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function jS(s){return s.getComponent()?.type==="VERSION"}const Jd="@firebase/app",X_="0.14.6";const os=new wm("@firebase/app"),VS="@firebase/app-compat",kS="@firebase/analytics-compat",LS="@firebase/analytics",PS="@firebase/app-check-compat",US="@firebase/app-check",zS="@firebase/auth",BS="@firebase/auth-compat",qS="@firebase/database",HS="@firebase/data-connect",FS="@firebase/database-compat",GS="@firebase/functions",QS="@firebase/functions-compat",KS="@firebase/installations",YS="@firebase/installations-compat",XS="@firebase/messaging",$S="@firebase/messaging-compat",JS="@firebase/performance",ZS="@firebase/performance-compat",WS="@firebase/remote-config",eA="@firebase/remote-config-compat",tA="@firebase/storage",nA="@firebase/storage-compat",iA="@firebase/firestore",sA="@firebase/ai",aA="@firebase/firestore-compat",rA="firebase",oA="12.6.0";const Zd="[DEFAULT]",lA={[Jd]:"fire-core",[VS]:"fire-core-compat",[LS]:"fire-analytics",[kS]:"fire-analytics-compat",[US]:"fire-app-check",[PS]:"fire-app-check-compat",[zS]:"fire-auth",[BS]:"fire-auth-compat",[qS]:"fire-rtdb",[HS]:"fire-data-connect",[FS]:"fire-rtdb-compat",[GS]:"fire-fn",[QS]:"fire-fn-compat",[KS]:"fire-iid",[YS]:"fire-iid-compat",[XS]:"fire-fcm",[$S]:"fire-fcm-compat",[JS]:"fire-perf",[ZS]:"fire-perf-compat",[WS]:"fire-rc",[eA]:"fire-rc-compat",[tA]:"fire-gcs",[nA]:"fire-gcs-compat",[iA]:"fire-fst",[aA]:"fire-fst-compat",[sA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};const Gu=new Map,cA=new Map,Wd=new Map;function $_(s,e){try{s.container.addComponent(e)}catch(i){os.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Xa(s){const e=s.name;if(Wd.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Wd.set(e,s);for(const i of Gu.values())$_(i,s);for(const i of cA.values())$_(i,s);return!0}function mh(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function Sn(s){return s==null?!1:s.settings!==void 0}const uA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new zl("app","Firebase",uA);class hA{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}const ir=oA;function I0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a={name:Zd,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw ta.create("bad-app-name",{appName:String(l)});if(i||(i=b0()),!i)throw ta.create("no-options");const c=Gu.get(l);if(c){if(Ya(i,c.options)&&Ya(a,c.config))return c;throw ta.create("duplicate-app",{appName:l})}const f=new yS(l);for(const _ of Wd.values())f.addComponent(_);const p=new hA(i,a,f);return Gu.set(l,p),p}function Cm(s=Zd){const e=Gu.get(s);if(!e&&s===Zd&&b0())return I0();if(!e)throw ta.create("no-app",{appName:s});return e}function Ai(s,e,i){let a=lA[s]??s;i&&(a+=`-${i}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(f.join(" "));return}Xa(new sa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const fA="firebase-heartbeat-database",dA=1,xl="firebase-heartbeat-store";let zd=null;function x0(){return zd||(zd=xS(fA,dA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(xl)}catch(i){console.warn(i)}}}}).catch(s=>{throw ta.create("idb-open",{originalErrorMessage:s.message})})),zd}async function mA(s){try{const i=(await x0()).transaction(xl),a=await i.objectStore(xl).get(D0(s));return await i.done,a}catch(e){if(e instanceof ji)os.warn(e.message);else{const i=ta.create("idb-get",{originalErrorMessage:e?.message});os.warn(i.message)}}}async function J_(s,e){try{const a=(await x0()).transaction(xl,"readwrite");await a.objectStore(xl).put(e,D0(s)),await a.done}catch(i){if(i instanceof ji)os.warn(i.message);else{const a=ta.create("idb-set",{originalErrorMessage:i?.message});os.warn(a.message)}}}function D0(s){return`${s.name}!${s.options.appId}`}const pA=1024,gA=30;class yA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new vA(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Z_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>gA){const l=EA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){os.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Z_(),{heartbeatsToSend:i,unsentEntries:a}=_A(this._heartbeatsCache.heartbeats),l=Fu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return os.warn(e),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function _A(s,e=pA){const i=[];let a=s.slice();for(const l of s){const c=i.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),W_(i)>e){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),W_(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class vA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aS()?rS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await mA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return J_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function W_(s){return Fu(JSON.stringify({version:2,heartbeats:s})).length}function EA(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}function TA(s){Xa(new sa("platform-logger",e=>new MS(e),"PRIVATE")),Xa(new sa("heartbeat",e=>new yA(e),"PRIVATE")),Ai(Jd,X_,s),Ai(Jd,X_,"esm2020"),Ai("fire-js","")}TA("");function O0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SA=O0,M0=new zl("auth","Firebase",O0());const Qu=new wm("@firebase/auth");function AA(s,...e){Qu.logLevel<=Ie.WARN&&Qu.warn(`Auth (${ir}): ${s}`,...e)}function ju(s,...e){Qu.logLevel<=Ie.ERROR&&Qu.error(`Auth (${ir}): ${s}`,...e)}function Zn(s,...e){throw Nm(s,...e)}function bi(s,...e){return Nm(s,...e)}function j0(s,e,i){const a={...SA(),[e]:i};return new zl("auth","Firebase",a).create(e,{appName:s.name})}function rs(s){return j0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(s,...e){if(typeof s!="string"){const i=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(i,...a)}return M0.create(s,...e)}function ye(s,e,...i){if(!s)throw Nm(e,...i)}function ss(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ju(e),new Error(e)}function ls(s,e){s||ss(e)}function em(){return typeof self<"u"&&self.location?.href||""}function bA(){return ev()==="http:"||ev()==="https:"}function ev(){return typeof self<"u"&&self.location?.protocol||null}function wA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bA()||tS()||"connection"in navigator)?navigator.onLine:!0}function RA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ql{constructor(e,i){this.shortDelay=e,this.longDelay=i,ls(i>e,"Short delay should be less than long delay!"),this.isMobile=Z2()||nS()}get(){return wA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Im(s,e){ls(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class V0{static initialize(e,i,a){this.fetchImpl=e,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const CA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IA=new ql(3e4,6e4);function hs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function fs(s,e,i,a,l={}){return k0(s,l,async()=>{let c={},f={};a&&(e==="GET"?f=a:c={body:JSON.stringify(a)});const p=Bl({key:s.config.apiKey,...f}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const E={method:e,headers:_,...c};return eS()||(E.referrerPolicy="no-referrer"),s.emulatorConfig&&nr(s.emulatorConfig.host)&&(E.credentials="include"),V0.fetch()(await L0(s,s.config.apiHost,i,p),E)})}async function k0(s,e,i){s._canInitEmulator=!1;const a={...CA,...e};try{const l=new DA(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Cu(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[_,E]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(s,"credential-already-in-use",f);if(_==="EMAIL_EXISTS")throw Cu(s,"email-already-in-use",f);if(_==="USER_DISABLED")throw Cu(s,"user-disabled",f);const S=a[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw j0(s,S,E);Zn(s,S)}}catch(l){if(l instanceof ji)throw l;Zn(s,"network-request-failed",{message:String(l)})}}async function Hl(s,e,i,a,l={}){const c=await fs(s,e,i,a,l);return"mfaPendingCredential"in c&&Zn(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function L0(s,e,i,a){const l=`${e}${i}?${a}`,c=s,f=c.config.emulator?Im(s.config,l):`${s.config.apiScheme}://${l}`;return NA.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function xA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(bi(this.auth,"network-request-failed")),IA.get())})}}function Cu(s,e,i){const a={appName:s.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const l=bi(s,e,a);return l.customData._tokenResponse=i,l}function tv(s){return s!==void 0&&s.enterprise!==void 0}class OA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return xA(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MA(s,e){return fs(s,"GET","/v2/recaptchaConfig",hs(s,e))}async function jA(s,e){return fs(s,"POST","/v1/accounts:delete",e)}async function Ku(s,e){return fs(s,"POST","/v1/accounts:lookup",e)}function bl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VA(s,e=!1){const i=Vt(s),a=await i.getIdToken(e),l=xm(a);ye(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:a,authTime:bl(Bd(l.auth_time)),issuedAtTime:bl(Bd(l.iat)),expirationTime:bl(Bd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Bd(s){return Number(s)*1e3}function xm(s){const[e,i,a]=s.split(".");if(e===void 0||i===void 0||a===void 0)return ju("JWT malformed, contained fewer than 3 sections"),null;try{const l=T0(i);return l?JSON.parse(l):(ju("Failed to decode base64 JWT payload"),null)}catch(l){return ju("Caught error parsing JWT payload as JSON",l?.toString()),null}}function nv(s){const e=xm(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dl(s,e,i=!1){if(i)return e;try{return await e}catch(a){throw a instanceof ji&&kA(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function kA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class LA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tm{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=bl(this.lastLoginAt),this.creationTime=bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yu(s){const e=s.auth,i=await s.getIdToken(),a=await Dl(s,Ku(e,{idToken:i}));ye(a?.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?P0(l.providerUserInfo):[],f=UA(s.providerData,c),p=s.isAnonymous,_=!(s.email&&l.passwordHash)&&!f?.length,E=p?_:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new tm(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,S)}async function PA(s){const e=Vt(s);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UA(s,e){return[...s.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function P0(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function zA(s,e){const i=await k0(s,{},async()=>{const a=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await L0(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:a};return s.emulatorConfig&&nr(s.emulatorConfig.host)&&(_.credentials="include"),V0.fetch()(f,_)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function BA(s,e){return fs(s,"POST","/v2/accounts:revokeToken",hs(s,e))}class Zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const i=nv(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:a,refreshToken:l,expiresIn:c}=await zA(e,i);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(e,i,a){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,i){const{refreshToken:a,accessToken:l,expirationTime:c}=i,f=new Zr;return a&&(ye(typeof a=="string","internal-error",{appName:e}),f.refreshToken=a),l&&(ye(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zr,this.toJSON())}_performRefresh(){return ss("not implemented")}}function Ys(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:i,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new LA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await Dl(this,this.stsTokenManager.getToken(this.auth,e));return ye(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return VA(this,e)}reload(){return PA(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),i&&await Yu(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(rs(this.auth));const e=await this.getIdToken();return await Dl(this,jA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const a=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,f=i.photoURL??void 0,p=i.tenantId??void 0,_=i._redirectEventId??void 0,E=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:b,emailVerified:R,isAnonymous:L,providerData:q,stsTokenManager:J}=i;ye(b&&J,e,"internal-error");const G=Zr.fromJSON(this.name,J);ye(typeof b=="string",e,"internal-error"),Ys(a,e.name),Ys(l,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof L=="boolean",e,"internal-error"),Ys(c,e.name),Ys(f,e.name),Ys(p,e.name),Ys(_,e.name),Ys(E,e.name),Ys(S,e.name);const H=new $n({uid:b,auth:e,email:l,emailVerified:R,displayName:a,isAnonymous:L,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:G,createdAt:E,lastLoginAt:S});return q&&Array.isArray(q)&&(H.providerData=q.map(ne=>({...ne}))),_&&(H._redirectEventId=_),H}static async _fromIdTokenResponse(e,i,a=!1){const l=new Zr;l.updateFromServerResponse(i);const c=new $n({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await Yu(c),c}static async _fromGetAccountInfoResponse(e,i,a){const l=i.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?P0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Zr;p.updateFromIdToken(a);const _=new $n({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new tm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(_,E),_}}const iv=new Map;function as(s){ls(s instanceof Function,"Expected a class definition");let e=iv.get(s);return e?(ls(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,iv.set(s,e),e)}class U0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}U0.type="NONE";const sv=U0;function Vu(s,e,i){return`firebase:${s}:${e}:${i}`}class Wr{constructor(e,i,a){this.persistence=e,this.auth=i,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=Vu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vu("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await Ku(this.auth,{idToken:e}).catch(()=>{});return i?$n._fromGetAccountInfoResponse(this.auth,i,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,a="authUser"){if(!i.length)return new Wr(as(sv),e,a);const l=(await Promise.all(i.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=l[0]||as(sv);const f=Vu(a,e.config.apiKey,e.name);let p=null;for(const E of i)try{const S=await E._get(f);if(S){let b;if(typeof S=="string"){const R=await Ku(e,{idToken:S}).catch(()=>{});if(!R)break;b=await $n._fromGetAccountInfoResponse(e,R,S)}else b=$n._fromJSON(e,S);E!==c&&(p=b),c=E;break}}catch{}const _=l.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new Wr(c,e,a):(c=_[0],p&&await c._set(f,p.toJSON()),await Promise.all(i.map(async E=>{if(E!==c)try{await E._remove(f)}catch{}})),new Wr(c,e,a))}}function av(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G0(e))return"Blackberry";if(Q0(e))return"Webos";if(B0(e))return"Safari";if((e.includes("chrome/")||q0(e))&&!e.includes("edge/"))return"Chrome";if(F0(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(i);if(a?.length===2)return a[1]}return"Other"}function z0(s=Yt()){return/firefox\//i.test(s)}function B0(s=Yt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q0(s=Yt()){return/crios\//i.test(s)}function H0(s=Yt()){return/iemobile/i.test(s)}function F0(s=Yt()){return/android/i.test(s)}function G0(s=Yt()){return/blackberry/i.test(s)}function Q0(s=Yt()){return/webos/i.test(s)}function Dm(s=Yt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qA(s=Yt()){return Dm(s)&&!!window.navigator?.standalone}function HA(){return iS()&&document.documentMode===10}function K0(s=Yt()){return Dm(s)||F0(s)||Q0(s)||G0(s)||/windows phone/i.test(s)||H0(s)}function Y0(s,e=[]){let i;switch(s){case"Browser":i=av(Yt());break;case"Worker":i=`${av(Yt())}-${s}`;break;default:i=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${ir}/${a}`}class FA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const a=c=>new Promise((f,p)=>{try{const _=e(c);f(_)}catch(_){p(_)}});a.onAbort=i,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const a of this.queue)await a(e),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function GA(s,e={}){return fs(s,"GET","/v2/passwordPolicy",hs(s,e))}const QA=6;class KA{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??QA,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=e.length>=a),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,i,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class YA{constructor(e,i,a,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new FA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=M0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=as(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await Ku(this,{idToken:e}),a=await $n._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Sn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(rs(this));const i=e?Vt(e):null;return i&&ye(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GA(this),i=new KA(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,i,a){return this.registerStateListener(this.authStateSubscription,e,i,a)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,a){return this.registerStateListener(this.idTokenSubscription,e,i,a)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await BA(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const a=await this.getOrInitRedirectPersistenceManager(i);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&as(e)||this._popupRedirectResolver;ye(i,this,"argument-error"),this.redirectPersistenceManager=await Wr.create(this,[as(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,a,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof i=="function"){const _=e.addObserver(i,a,l);return()=>{f=!0,_()}}else{const _=e.addObserver(i);return()=>{f=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ha(s){return Vt(s)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=hS(i=>this.observer=i)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XA(s){ph=s}function X0(s){return ph.loadJS(s)}function $A(){return ph.recaptchaEnterpriseScript}function JA(){return ph.gapiScript}function ZA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class WA{constructor(){this.enterprise=new eb}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class eb{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const tb="recaptcha-enterprise",$0="NO_RECAPTCHA";class nb{constructor(e){this.type=tb,this.auth=ha(e)}async verify(e="verify",i=!1){async function a(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{MA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const E=new OA(_);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,f(E.siteKey)}}).catch(_=>{p(_)})})}function l(c,f,p){const _=window.grecaptcha;tv(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:e}).then(E=>{f(E)}).catch(()=>{f($0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WA().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{a(this.auth).then(p=>{if(!i&&tv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let _=$A();_.length!==0&&(_+=p),X0(_).then(()=>{l(p,c,f)}).catch(E=>{f(E)})}}).catch(p=>{f(p)})})}}async function ov(s,e,i,a=!1,l=!1){const c=new nb(s);let f;if(l)f=$0;else try{f=await c.verify(i)}catch{f=await c.verify(i,!0)}const p={...e};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const _=p.phoneEnrollmentInfo.phoneNumber,E=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:E,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const _=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Xu(s,e,i,a,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ov(s,e,i,i==="getOobCode");return a(s,c)}else return a(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ov(s,e,i,i==="getOobCode");return a(s,f)}else return Promise.reject(c)})}function ib(s,e){const i=mh(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ya(c,e??{}))return l;Zn(l,"already-initialized")}return i.initialize({options:e})}function sb(s,e){const i=e?.persistence||[],a=(Array.isArray(i)?i:[i]).map(as);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function ab(s,e,i){const a=ha(s);ye(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,c=J0(e),{host:f,port:p}=rb(e),_=p===null?"":`:${p}`,E={url:`${c}//${f}${_}/`},S=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){ye(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ye(Ya(E,a.config.emulator)&&Ya(S,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=E,a.emulatorConfig=S,a.settings.appVerificationDisabledForTesting=!0,nr(f)?(Am(`${c}//${f}${_}`),bm("Auth",!0)):ob()}function J0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function rb(s){const e=J0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:lv(a.substr(c.length+1))}}else{const[c,f]=a.split(":");return{host:c,port:lv(f)}}}function lv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function ob(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Om{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,i){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}async function lb(s,e){return fs(s,"POST","/v1/accounts:signUp",e)}async function cb(s,e){return Hl(s,"POST","/v1/accounts:signInWithPassword",hs(s,e))}async function Z0(s,e){return fs(s,"POST","/v1/accounts:sendOobCode",hs(s,e))}async function ub(s,e){return Z0(s,e)}async function hb(s,e){return Z0(s,e)}async function fb(s,e){return Hl(s,"POST","/v1/accounts:signInWithEmailLink",hs(s,e))}async function db(s,e){return Hl(s,"POST","/v1/accounts:signInWithEmailLink",hs(s,e))}class Ol extends Om{constructor(e,i,a,l=null){super("password",a),this._email=e,this._password=i,this._tenantId=l}static _fromEmailAndPassword(e,i){return new Ol(e,i,"password")}static _fromEmailAndCode(e,i,a=null){return new Ol(e,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xu(e,i,"signInWithPassword",cb);case"emailLink":return fb(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xu(e,a,"signUpPassword",lb);case"emailLink":return db(e,{idToken:i,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eo(s,e){return Hl(s,"POST","/v1/accounts:signInWithIdp",hs(s,e))}const mb="http://localhost";class $a extends Om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new $a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):Zn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l,...c}=i;if(!a||!l)return null;const f=new $a(a,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const i=this.buildRequest();return eo(e,i)}_linkToIdToken(e,i){const a=this.buildRequest();return a.idToken=i,eo(e,a)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,eo(e,i)}buildRequest(){const e={requestUri:mb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=Bl(i)}return e}}function pb(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gb(s){const e=yl(_l(s)).link,i=e?yl(_l(e)).deep_link_id:null,a=yl(_l(s)).deep_link_id;return(a?yl(_l(a)).link:null)||a||i||e||s}class Mm{constructor(e){const i=yl(_l(e)),a=i.apiKey??null,l=i.oobCode??null,c=pb(i.mode??null);ye(a&&l&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(e){const i=gb(e);try{return new Mm(i)}catch{return null}}}class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,i){return Ol._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const a=Mm.parseLink(i);return ye(a,"argument-error"),Ol._fromEmailAndCode(e,a.code,a.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class W0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fl extends W0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xs extends Fl{constructor(){super("facebook.com")}static credential(e){return $a._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";class $s extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return $a._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:a}=e;if(!i&&!a)return null;try{return $s.credential(i,a)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";class Js extends Fl{constructor(){super("github.com")}static credential(e){return $a._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.GITHUB_SIGN_IN_METHOD="github.com";Js.PROVIDER_ID="github.com";class Zs extends Fl{constructor(){super("twitter.com")}static credential(e,i){return $a._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=e;if(!i||!a)return null;try{return Zs.credential(i,a)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";async function yb(s,e){return Hl(s,"POST","/v1/accounts:signUp",hs(s,e))}class Ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,a,l=!1){const c=await $n._fromIdTokenResponse(e,a,l),f=cv(a);return new Ja({user:c,providerId:f,_tokenResponse:a,operationType:i})}static async _forOperation(e,i,a){await e._updateTokensIfNecessary(a,!0);const l=cv(a);return new Ja({user:e,providerId:l,_tokenResponse:a,operationType:i})}}function cv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class $u extends ji{constructor(e,i,a,l){super(i.code,i.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,$u.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,i,a,l){return new $u(e,i,a,l)}}function e1(s,e,i,a){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?$u._fromErrorAndOperation(s,c,e,a):c})}async function _b(s,e,i=!1){const a=await Dl(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return Ja._forOperation(s,"link",a)}async function vb(s,e,i=!1){const{auth:a}=s;if(Sn(a.app))return Promise.reject(rs(a));const l="reauthenticate";try{const c=await Dl(s,e1(a,l,e,s),i);ye(c.idToken,a,"internal-error");const f=xm(c.idToken);ye(f,a,"internal-error");const{sub:p}=f;return ye(s.uid===p,a,"user-mismatch"),Ja._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Zn(a,"user-mismatch"),c}}async function t1(s,e,i=!1){if(Sn(s.app))return Promise.reject(rs(s));const a="signIn",l=await e1(s,a,e),c=await Ja._fromIdTokenResponse(s,a,l);return i||await s._updateCurrentUser(c.user),c}async function Eb(s,e){return t1(ha(s),e)}async function n1(s){const e=ha(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tb(s,e,i){const a=ha(s);await Xu(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hb)}async function Sb(s,e,i){if(Sn(s.app))return Promise.reject(rs(s));const a=ha(s),f=await Xu(a,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yb).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&n1(s),_}),p=await Ja._fromIdTokenResponse(a,"signIn",f);return await a._updateCurrentUser(p.user),p}function Ab(s,e,i){return Sn(s.app)?Promise.reject(rs(s)):Eb(Vt(s),lo.credential(e,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&n1(s),a})}async function bb(s,e){const i=Vt(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await ub(i.auth,l);c!==s.email&&await s.reload()}function wb(s,e,i,a){return Vt(s).onIdTokenChanged(e,i,a)}function Rb(s,e,i){return Vt(s).beforeAuthStateChanged(e,i)}function Cb(s,e,i,a){return Vt(s).onAuthStateChanged(e,i,a)}function i1(s){return Vt(s).signOut()}const Ju="__sak";class s1{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Ju,"1"),this.storage.removeItem(Ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nb=1e3,Ib=10;class a1 extends s1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),l=this.localCache[i];a!==l&&e(i,l,a)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((f,p,_)=>{this.notifyListeners(f,_)});return}const a=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(a);!i&&this.localCache[a]===f||this.notifyListeners(a,f)},c=this.storage.getItem(a);HA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,Ib):l()}notifyListeners(e,i){this.localCache[e]=i;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:a}),!0)})},Nb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}a1.type="LOCAL";const xb=a1;class r1 extends s1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}r1.type="SESSION";const o1=r1;function Db(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}class gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const a=new gh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:a,eventType:l,data:c}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const p=Array.from(f).map(async E=>E(i.origin,c)),_=await Db(p);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:_})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gh.receivers=[];function jm(s="",e=10){let i="";for(let a=0;a<e;a++)i+=Math.floor(Math.random()*10);return s+i}class Ob{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,_)=>{const E=jm("",20);l.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},a);f={messageChannel:l,onMessage(b){const R=b;if(R.data.eventId===E)switch(R.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(S),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:E,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function wi(){return window}function Mb(s){wi().location.href=s}function l1(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function jb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vb(){return navigator?.serviceWorker?.controller||null}function kb(){return l1()?self:null}const c1="firebaseLocalStorageDb",Lb=1,Zu="firebaseLocalStorage",u1="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function yh(s,e){return s.transaction([Zu],e?"readwrite":"readonly").objectStore(Zu)}function Pb(){const s=indexedDB.deleteDatabase(c1);return new Gl(s).toPromise()}function nm(){const s=indexedDB.open(c1,Lb);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Zu,{keyPath:u1})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Zu)?e(a):(a.close(),await Pb(),e(await nm()))})})}async function uv(s,e,i){const a=yh(s,!0).put({[u1]:e,value:i});return new Gl(a).toPromise()}async function Ub(s,e){const i=yh(s,!1).get(e),a=await new Gl(i).toPromise();return a===void 0?null:a.value}function hv(s,e){const i=yh(s,!0).delete(e);return new Gl(i).toPromise()}const zb=800,Bb=3;class h1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let i=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(i++>Bb)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gh._getInstance(kb()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jb(),!this.activeServiceWorker)return;this.sender=new Ob(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await uv(e,Ju,"1"),await hv(e,Ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>uv(a,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(a=>Ub(a,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>hv(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=yh(l,!1).getAll();return new Gl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h1.type="LOCAL";const qb=h1;new ql(3e4,6e4);function Hb(s,e){return e?as(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Vm extends Om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,i){return eo(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function Fb(s){return t1(s.auth,new Vm(s),s.bypassAuthState)}function Gb(s){const{auth:e,user:i}=s;return ye(i,e,"internal-error"),vb(i,new Vm(s),s.bypassAuthState)}async function Qb(s){const{auth:e,user:i}=s;return ye(i,e,"internal-error"),_b(i,new Vm(s),s.bypassAuthState)}class f1{constructor(e,i,a,l,c=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:a,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const _={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fb;case"linkViaPopup":case"linkViaRedirect":return Qb;case"reauthViaPopup":case"reauthViaRedirect":return Gb;default:Zn(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kb=new ql(2e3,1e4);class Jr extends f1{constructor(e,i,a,l,c){super(e,i,l,c),this.provider=a,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kb.get())};e()}}Jr.currentPopupAction=null;const Yb="pendingRedirect",ku=new Map;class Xb extends f1{constructor(e,i,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let e=ku.get(this.auth._key());if(!e){try{const a=await $b(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(i){e=()=>Promise.reject(i)}ku.set(this.auth._key(),e)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $b(s,e){const i=Wb(e),a=Zb(s);if(!await a._isAvailable())return!1;const l=await a._get(i)==="true";return await a._remove(i),l}function Jb(s,e){ku.set(s._key(),e)}function Zb(s){return as(s._redirectPersistence)}function Wb(s){return Vu(Yb,s.config.apiKey,s.name)}async function ew(s,e,i=!1){if(Sn(s.app))return Promise.reject(rs(s));const a=ha(s),l=Hb(a,e),f=await new Xb(a,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,e)),f}const tw=600*1e3;class nw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(i=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iw(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!d1(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";i.onError(bi(this.auth,a))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const a=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tw&&this.cachedEventUids.clear(),this.cachedEventUids.has(fv(e))}saveEventToCache(e){this.cachedEventUids.add(fv(e)),this.lastProcessedEventTime=Date.now()}}function fv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function d1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function iw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d1(s);default:return!1}}async function sw(s,e={}){return fs(s,"GET","/v1/projects",e)}const aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rw=/^https?/;async function ow(s){if(s.config.emulator)return;const{authorizedDomains:e}=await sw(s);for(const i of e)try{if(lw(i))return}catch{}Zn(s,"unauthorized-domain")}function lw(s){const e=em(),{protocol:i,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&a===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===a}if(!rw.test(i))return!1;if(aw.test(s))return a===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}const cw=new ql(3e4,6e4);function dv(){const s=wi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function uw(s){return new Promise((e,i)=>{function a(){dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dv(),i(bi(s,"network-request-failed"))},timeout:cw.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)a();else{const l=ZA("iframefcb");return wi()[l]=()=>{gapi.load?a():i(bi(s,"network-request-failed"))},X0(`${JA()}?onload=${l}`).catch(c=>i(c))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function hw(s){return Lu=Lu||uw(s),Lu}const fw=new ql(5e3,15e3),dw="__/auth/iframe",mw="emulator/auth/iframe",pw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yw(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?Im(e,mw):`https://${s.config.authDomain}/${dw}`,a={apiKey:e.apiKey,appName:s.name,v:ir},l=gw.get(s.config.apiHost);l&&(a.eid=l);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Bl(a).slice(1)}`}async function _w(s){const e=await hw(s),i=wi().gapi;return ye(i,s,"internal-error"),e.open({where:document.body,url:yw(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pw,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const f=bi(s,"network-request-failed"),p=wi().setTimeout(()=>{c(f)},fw.get());function _(){wi().clearTimeout(p),l(a)}a.ping(_).then(_,()=>{c(f)})}))}const vw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ew=500,Tw=600,Sw="_blank",Aw="http://localhost";class mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bw(s,e,i,a=Ew,l=Tw){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const _={...vw,width:a.toString(),height:l.toString(),top:c,left:f},E=Yt().toLowerCase();i&&(p=q0(E)?Sw:i),z0(E)&&(e=e||Aw,_.scrollbars="yes");const S=Object.entries(_).reduce((R,[L,q])=>`${R}${L}=${q},`,"");if(qA(E)&&p!=="_self")return ww(e||"",p),new mv(null);const b=window.open(e||"",p,S);ye(b,s,"popup-blocked");try{b.focus()}catch{}return new mv(b)}function ww(s,e){const i=document.createElement("a");i.href=s,i.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}const Rw="__/auth/handler",Cw="emulator/auth/handler",Nw=encodeURIComponent("fac");async function pv(s,e,i,a,l,c){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:a,v:ir,eventId:l};if(e instanceof W0){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",uS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,b]of Object.entries({}))f[S]=b}if(e instanceof Fl){const S=e.getScopes().filter(b=>b!=="");S.length>0&&(f.scopes=S.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const S of Object.keys(p))p[S]===void 0&&delete p[S];const _=await s._getAppCheckToken(),E=_?`#${Nw}=${encodeURIComponent(_)}`:"";return`${Iw(s)}?${Bl(p).slice(1)}${E}`}function Iw({config:s}){return s.emulator?Im(s,Cw):`https://${s.authDomain}/${Rw}`}const qd="webStorageSupport";class xw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o1,this._completeRedirectFn=ew,this._overrideRedirectResult=Jb}async _openPopup(e,i,a,l){ls(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await pv(e,i,a,em(),l);return bw(e,c,jm())}async _openRedirect(e,i,a,l){await this._originValidation(e);const c=await pv(e,i,a,em(),l);return Mb(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(ls(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(e){const i=await _w(e),a=new nw(e);return i.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=i,a}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(qd,{type:qd},l=>{const c=l?.[0]?.[qd];c!==void 0&&i(!!c),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=ow(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return K0()||B0()||Dm()}}const Dw=xw;var gv="@firebase/auth",yv="1.11.1";class Ow{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Mw(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jw(s){Xa(new sa("auth",(e,{options:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=a.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const _={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y0(s)},E=new YA(a,l,c,_);return sb(E,i),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,a)=>{e.getProvider("auth-internal").initialize()})),Xa(new sa("auth-internal",e=>{const i=ha(e.getProvider("auth").getImmediate());return(a=>new Ow(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(gv,yv,Mw(s)),Ai(gv,yv,"esm2020")}const Vw=300,kw=w0("authIdTokenMaxAge")||Vw;let _v=null;const Lw=s=>async e=>{const i=e&&await e.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>kw)return;const l=i?.token;_v!==l&&(_v=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Pw(s=Cm()){const e=mh(s,"auth");if(e.isInitialized())return e.getImmediate();const i=ib(s,{popupRedirectResolver:Dw,persistence:[qb,xb,o1]}),a=w0("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const f=Lw(c.toString());Rb(i,f,()=>f(i.currentUser)),wb(i,p=>f(p))}}const l=S0("auth");return l&&ab(i,`http://${l}`),i}function Uw(){return document.getElementsByTagName("head")?.[0]??document}XA({loadJS(s){return new Promise((e,i)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=l=>{const c=bi("internal-error");c.customData=l,i(c)},a.type="text/javascript",a.charset="UTF-8",Uw().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jw("Browser");var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var na,m1;(function(){var s;function e(x,w){function I(){}I.prototype=w.prototype,x.F=w.prototype,x.prototype=new I,x.prototype.constructor=x,x.D=function(M,O,V){for(var C=Array(arguments.length-2),at=2;at<arguments.length;at++)C[at-2]=arguments[at];return w.prototype[O].apply(M,C)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(x,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)M[O]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(O=0;O<16;++O)M[O]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=x.g[0],I=x.g[1],O=x.g[2];let V=x.g[3],C;C=w+(V^I&(O^V))+M[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=V+(O^w&(I^O))+M[1]+3905402710&4294967295,V=w+(C<<12&4294967295|C>>>20),C=O+(I^V&(w^I))+M[2]+606105819&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(w^O&(V^w))+M[3]+3250441966&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(V^I&(O^V))+M[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=V+(O^w&(I^O))+M[5]+1200080426&4294967295,V=w+(C<<12&4294967295|C>>>20),C=O+(I^V&(w^I))+M[6]+2821735955&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(w^O&(V^w))+M[7]+4249261313&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(V^I&(O^V))+M[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=V+(O^w&(I^O))+M[9]+2336552879&4294967295,V=w+(C<<12&4294967295|C>>>20),C=O+(I^V&(w^I))+M[10]+4294925233&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(w^O&(V^w))+M[11]+2304563134&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(V^I&(O^V))+M[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=V+(O^w&(I^O))+M[13]+4254626195&4294967295,V=w+(C<<12&4294967295|C>>>20),C=O+(I^V&(w^I))+M[14]+2792965006&4294967295,O=V+(C<<17&4294967295|C>>>15),C=I+(w^O&(V^w))+M[15]+1236535329&4294967295,I=O+(C<<22&4294967295|C>>>10),C=w+(O^V&(I^O))+M[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(w^I))+M[6]+3225465664&4294967295,V=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(V^w))+M[11]+643717713&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^w&(O^V))+M[0]+3921069994&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^V&(I^O))+M[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(w^I))+M[10]+38016083&4294967295,V=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(V^w))+M[15]+3634488961&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^w&(O^V))+M[4]+3889429448&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^V&(I^O))+M[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(w^I))+M[14]+3275163606&4294967295,V=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(V^w))+M[3]+4107603335&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^w&(O^V))+M[8]+1163531501&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(O^V&(I^O))+M[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=V+(I^O&(w^I))+M[2]+4243563512&4294967295,V=w+(C<<9&4294967295|C>>>23),C=O+(w^I&(V^w))+M[7]+1735328473&4294967295,O=V+(C<<14&4294967295|C>>>18),C=I+(V^w&(O^V))+M[12]+2368359562&4294967295,I=O+(C<<20&4294967295|C>>>12),C=w+(I^O^V)+M[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=V+(w^I^O)+M[8]+2272392833&4294967295,V=w+(C<<11&4294967295|C>>>21),C=O+(V^w^I)+M[11]+1839030562&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^w)+M[14]+4259657740&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^V)+M[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=V+(w^I^O)+M[4]+1272893353&4294967295,V=w+(C<<11&4294967295|C>>>21),C=O+(V^w^I)+M[7]+4139469664&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^w)+M[10]+3200236656&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^V)+M[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=V+(w^I^O)+M[0]+3936430074&4294967295,V=w+(C<<11&4294967295|C>>>21),C=O+(V^w^I)+M[3]+3572445317&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^w)+M[6]+76029189&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(I^O^V)+M[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=V+(w^I^O)+M[12]+3873151461&4294967295,V=w+(C<<11&4294967295|C>>>21),C=O+(V^w^I)+M[15]+530742520&4294967295,O=V+(C<<16&4294967295|C>>>16),C=I+(O^V^w)+M[2]+3299628645&4294967295,I=O+(C<<23&4294967295|C>>>9),C=w+(O^(I|~V))+M[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=V+(I^(w|~O))+M[7]+1126891415&4294967295,V=w+(C<<10&4294967295|C>>>22),C=O+(w^(V|~I))+M[14]+2878612391&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~w))+M[5]+4237533241&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~V))+M[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=V+(I^(w|~O))+M[3]+2399980690&4294967295,V=w+(C<<10&4294967295|C>>>22),C=O+(w^(V|~I))+M[10]+4293915773&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~w))+M[1]+2240044497&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~V))+M[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=V+(I^(w|~O))+M[15]+4264355552&4294967295,V=w+(C<<10&4294967295|C>>>22),C=O+(w^(V|~I))+M[6]+2734768916&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~w))+M[13]+1309151649&4294967295,I=O+(C<<21&4294967295|C>>>11),C=w+(O^(I|~V))+M[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=V+(I^(w|~O))+M[11]+3174756917&4294967295,V=w+(C<<10&4294967295|C>>>22),C=O+(w^(V|~I))+M[2]+718787259&4294967295,O=V+(C<<15&4294967295|C>>>17),C=I+(V^(O|~w))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+V&4294967295}a.prototype.v=function(x,w){w===void 0&&(w=x.length);const I=w-this.blockSize,M=this.C;let O=this.h,V=0;for(;V<w;){if(O==0)for(;V<=I;)l(this,x,V),V+=this.blockSize;if(typeof x=="string"){for(;V<w;)if(M[O++]=x.charCodeAt(V++),O==this.blockSize){l(this,M),O=0;break}}else for(;V<w;)if(M[O++]=x[V++],O==this.blockSize){l(this,M),O=0;break}}this.h=O,this.o+=w},a.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;w=this.o*8;for(var I=x.length-8;I<x.length;++I)x[I]=w&255,w/=256;for(this.v(x),x=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)x[w++]=this.g[I]>>>M&255;return x};function c(x,w){var I=p;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=w(x)}function f(x,w){this.h=w;const I=[];let M=!0;for(let O=x.length-1;O>=0;O--){const V=x[O]|0;M&&V==w||(I[O]=V,M=!1)}this.g=I}var p={};function _(x){return-128<=x&&x<128?c(x,function(w){return new f([w|0],w<0?-1:0)}):new f([x|0],x<0?-1:0)}function E(x){if(isNaN(x)||!isFinite(x))return b;if(x<0)return G(E(-x));const w=[];let I=1;for(let M=0;x>=I;M++)w[M]=x/I|0,I*=4294967296;return new f(w,0)}function S(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return G(S(x.substring(1),w));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=E(Math.pow(w,8));let M=b;for(let V=0;V<x.length;V+=8){var O=Math.min(8,x.length-V);const C=parseInt(x.substring(V,V+O),w);O<8?(O=E(Math.pow(w,O)),M=M.j(O).add(E(C))):(M=M.j(I),M=M.add(E(C)))}return M}var b=_(0),R=_(1),L=_(16777216);s=f.prototype,s.m=function(){if(J(this))return-G(this).m();let x=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);x+=(M>=0?M:4294967296+M)*w,w*=4294967296}return x},s.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(q(this))return"0";if(J(this))return"-"+G(this).toString(x);const w=E(Math.pow(x,6));var I=this;let M="";for(;;){const O=ee(I,w).g;I=H(I,O.j(w));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(x);if(I=O,q(I))return V+M;for(;V.length<6;)V="0"+V;M=V+M}},s.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function q(x){if(x.h!=0)return!1;for(let w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function J(x){return x.h==-1}s.l=function(x){return x=H(this,x),J(x)?-1:q(x)?0:1};function G(x){const w=x.g.length,I=[];for(let M=0;M<w;M++)I[M]=~x.g[M];return new f(I,~x.h).add(R)}s.abs=function(){return J(this)?G(this):this},s.add=function(x){const w=Math.max(this.g.length,x.g.length),I=[];let M=0;for(let O=0;O<=w;O++){let V=M+(this.i(O)&65535)+(x.i(O)&65535),C=(V>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);M=C>>>16,V&=65535,C&=65535,I[O]=C<<16|V}return new f(I,I[I.length-1]&-2147483648?-1:0)};function H(x,w){return x.add(G(w))}s.j=function(x){if(q(this)||q(x))return b;if(J(this))return J(x)?G(this).j(G(x)):G(G(this).j(x));if(J(x))return G(this.j(G(x)));if(this.l(L)<0&&x.l(L)<0)return E(this.m()*x.m());const w=this.g.length+x.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<x.g.length;O++){const V=this.i(M)>>>16,C=this.i(M)&65535,at=x.i(O)>>>16,ct=x.i(O)&65535;I[2*M+2*O]+=C*ct,ne(I,2*M+2*O),I[2*M+2*O+1]+=V*ct,ne(I,2*M+2*O+1),I[2*M+2*O+1]+=C*at,ne(I,2*M+2*O+1),I[2*M+2*O+2]+=V*at,ne(I,2*M+2*O+2)}for(x=0;x<w;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=w;x<2*w;x++)I[x]=0;return new f(I,0)};function ne(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function W(x,w){this.g=x,this.h=w}function ee(x,w){if(q(w))throw Error("division by zero");if(q(x))return new W(b,b);if(J(x))return w=ee(G(x),w),new W(G(w.g),G(w.h));if(J(w))return w=ee(x,G(w)),new W(G(w.g),w.h);if(x.g.length>30){if(J(x)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var I=R,M=w;M.l(x)<=0;)I=fe(I),M=fe(M);var O=ce(I,1),V=ce(M,1);for(M=ce(M,2),I=ce(I,2);!q(M);){var C=V.add(M);C.l(x)<=0&&(O=O.add(I),V=C),M=ce(M,1),I=ce(I,1)}return w=H(x,O.j(w)),new W(O,w)}for(O=b;x.l(w)>=0;){for(I=Math.max(1,Math.floor(x.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),V=E(I),C=V.j(w);J(C)||C.l(x)>0;)I-=M,V=E(I),C=V.j(w);q(V)&&(V=R),O=O.add(V),x=H(x,C)}return new W(O,x)}s.B=function(x){return ee(this,x).h},s.and=function(x){const w=Math.max(this.g.length,x.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&x.i(M);return new f(I,this.h&x.h)},s.or=function(x){const w=Math.max(this.g.length,x.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|x.i(M);return new f(I,this.h|x.h)},s.xor=function(x){const w=Math.max(this.g.length,x.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^x.i(M);return new f(I,this.h^x.h)};function fe(x){const w=x.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=x.i(M)<<1|x.i(M-1)>>>31;return new f(I,x.h)}function ce(x,w){const I=w>>5;w%=32;const M=x.g.length-I,O=[];for(let V=0;V<M;V++)O[V]=w>0?x.i(V+I)>>>w|x.i(V+I+1)<<32-w:x.i(V+I);return new f(O,x.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,m1=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=S,na=f}).apply(typeof vv<"u"?vv:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var p1,vl,g1,Pu,im,y1,_1,v1;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function l(u,g){if(g)e:{var v=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var k=u[A];if(!(k in v))break e;v=v[k]}u=u[u.length-1],A=v[u],g=g(A),g!=A&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});var c=c||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function _(u,g,v){return u.call.apply(u.bind,arguments)}function E(u,g,v){return E=_,E.apply(null,arguments)}function S(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function b(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,k,B){for(var te=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)te[Te-2]=arguments[Te];return g.prototype[k].apply(A,te)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const g=u.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=u[A];return v}return[]}function q(u,g){for(let A=1;A<arguments.length;A++){const k=arguments[A];var v=typeof k;if(v=v!="object"?v:k?Array.isArray(k)?"array":v:"null",v=="array"||v=="object"&&typeof k.length=="number"){v=u.length||0;const B=k.length||0;u.length=v+B;for(let te=0;te<B;te++)u[v+te]=k[te]}else u.push(k)}}class J{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){f.setTimeout(()=>{throw u},0)}function H(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,v){const A=W.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var W=new J(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ce=!1,x=new ne,w=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(I)}};function I(){for(var u;u=H();){try{u.h.call(u.g)}catch(v){G(v)}var g=W;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ce=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function at(u,g){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}b(at,O),at.prototype.init=function(u,g){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&at.Z.h.call(this)},at.prototype.h=function(){at.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ct="closure_listenable_"+(Math.random()*1e6|0),K=0;function ie(u,g,v,A,k){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=k,this.key=++K,this.da=this.fa=!1}function me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,g,v){for(const A in u)g.call(v,u[A],A,u)}function Be(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function rt(u){const g={};for(const v in u)g[v]=u[v];return g}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(u,g){let v,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(v in A)u[v]=A[v];for(let B=0;B<Ge.length;B++)v=Ge[B],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function Je(u){this.src=u,this.g={},this.h=0}Je.prototype.add=function(u,g,v,A,k){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const te=Zt(u,g,A,k);return te>-1?(g=u[te],v||(g.fa=!1)):(g=new ie(g,this.src,B,!!A,k),g.fa=v,u.push(g)),g};function xt(u,g){const v=g.type;if(v in u.g){var A=u.g[v],k=Array.prototype.indexOf.call(A,g,void 0),B;(B=k>=0)&&Array.prototype.splice.call(A,k,1),B&&(me(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Zt(u,g,v,A){for(let k=0;k<u.length;++k){const B=u[k];if(!B.da&&B.listener==g&&B.capture==!!v&&B.ha==A)return k}return-1}var cn="closure_lm_"+(Math.random()*1e6|0),Wn={};function un(u,g,v,A,k){if(Array.isArray(g)){for(let B=0;B<g.length;B++)un(u,g[B],v,A,k);return null}return v=oe(v),u&&u[ct]?u.J(g,v,p(A)?!!A.capture:!1,k):ds(u,g,v,!1,A,k)}function ds(u,g,v,A,k,B){if(!g)throw Error("Invalid event type");const te=p(k)?!!k.capture:!!k;let Te=Li(u);if(Te||(u[cn]=Te=new Je(u)),v=Te.add(g,v,A,te,B),v.proxy)return v;if(A=wt(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)V||(k=te),k===void 0&&(k=!1),u.addEventListener(g.toString(),A,k);else if(u.attachEvent)u.attachEvent(hn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wt(){function u(v){return g.call(u.src,u.listener,v)}const g=ma;return u}function ms(u,g,v,A,k){if(Array.isArray(g))for(var B=0;B<g.length;B++)ms(u,g[B],v,A,k);else A=p(A)?!!A.capture:!!A,v=oe(v),u&&u[ct]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],v=Zt(g,v,A,k),v>-1&&(me(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=Li(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Zt(g,v,A,k)),(v=u>-1?g[u]:null)&&ki(v))}function ki(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ct])xt(g.i,u);else{var v=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(v,A,u.capture):g.detachEvent?g.detachEvent(hn(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=Li(g))?(xt(v,u),v.h==0&&(v.src=null,g[cn]=null)):me(u)}}}function hn(u){return u in Wn?Wn[u]:Wn[u]="on"+u}function ma(u,g){if(u.da)u=!0;else{g=new at(g,this);const v=u.listener,A=u.ha||u.src;u.fa&&ki(u),u=v.call(A,g)}return u}function Li(u){return u=u[cn],u instanceof Je?u:null}var ps="__closure_events_fn_"+(Math.random()*1e9>>>0);function oe(u){return typeof u=="function"?u:(u[ps]||(u[ps]=function(g){return u.handleEvent(g)}),u[ps])}function re(){M.call(this),this.i=new Je(this),this.M=this,this.G=null}b(re,M),re.prototype[ct]=!0,re.prototype.removeEventListener=function(u,g,v,A){ms(this,u,g,v,A)};function Ve(u,g){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new O(g,u);else if(g instanceof O)g.target=g.target||u;else{var k=g;g=new O(A,u),be(g,k)}k=!0;let B,te;if(v)for(te=v.length-1;te>=0;te--)B=g.g=v[te],k=fn(B,A,!0,g)&&k;if(B=g.g=u,k=fn(B,A,!0,g)&&k,k=fn(B,A,!1,g)&&k,v)for(te=0;te<v.length;te++)B=g.g=v[te],k=fn(B,A,!1,g)&&k}re.prototype.N=function(){if(re.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let A=0;A<v.length;A++)me(v[A]);delete u.g[g],u.h--}}this.G=null},re.prototype.J=function(u,g,v,A){return this.i.add(String(u),g,!1,v,A)},re.prototype.K=function(u,g,v,A){return this.i.add(String(u),g,!0,v,A)};function fn(u,g,v,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let k=!0;for(let B=0;B<g.length;++B){const te=g[B];if(te&&!te.da&&te.capture==v){const Te=te.listener,ht=te.ha||te.src;te.fa&&xt(u.i,te),k=Te.call(ht,A)!==!1&&k}}return k&&!A.defaultPrevented}function pa(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Jl(u){u.g=pa(()=>{u.g=null,u.i&&(u.i=!1,Jl(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Xt extends M{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ga(u){M.call(this),this.h=u,this.g={}}b(ga,M);var mo=[];function po(u){Me(u.g,function(g,v){this.g.hasOwnProperty(v)&&ki(g)},u),u.g={}}ga.prototype.N=function(){ga.Z.N.call(this),po(this)},ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=f.JSON.stringify,jh=f.JSON.parse,Zl=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Wl(){}function ec(){}var Pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){O.call(this,"d")}b(kt,O);function bn(){O.call(this,"c")}b(bn,O);var ut={},tc=null;function rr(){return tc=tc||new re}ut.Ia="serverreachability";function nc(u){O.call(this,ut.Ia,u)}b(nc,O);function ei(u){const g=rr();Ve(g,new nc(g))}ut.STAT_EVENT="statevent";function ya(u,g){O.call(this,ut.STAT_EVENT,u),this.stat=g}b(ya,O);function pt(u){const g=rr();Ve(g,new ya(g,u))}ut.Ja="timingevent";function ti(u,g){O.call(this,ut.Ja,u),this.size=g}b(ti,O);function ni(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function Un(){this.g=!0}Un.prototype.ua=function(){this.g=!1};function Vh(u,g,v,A,k,B){u.info(function(){if(u.g)if(B){var te="",Te=B.split("&");for(let Pe=0;Pe<Te.length;Pe++){var ht=Te[Pe].split("=");if(ht.length>1){const tt=ht[0];ht=ht[1];const Nn=tt.split("_");te=Nn.length>=2&&Nn[1]=="type"?te+(tt+"="+ht+"&"):te+(tt+"=redacted&")}}}else te=null;else te=B;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+g+`
`+v+`
`+te})}function ic(u,g,v,A,k,B,te){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+g+`
`+v+`
`+B+" "+te})}function ii(u,g,v,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+kh(u,v)+(A?" "+A:"")})}function _a(u,g){u.info(function(){return"TIMEOUT: "+g})}Un.prototype.info=function(){};function kh(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return gs(B)}catch{return g}}var va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yo;function Ea(){}b(Ea,Wl),Ea.prototype.g=function(){return new XMLHttpRequest},yo=new Ea;function Pi(u){return encodeURIComponent(String(u))}function sc(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function zn(u,g,v,A){this.j=u,this.i=g,this.l=v,this.S=A||1,this.V=new ga(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bn}function Bn(){this.i=null,this.g="",this.h=!1}var gt={},Dt={};function si(u,g,v){u.M=1,u.A=Ta(_t(g)),u.u=v,u.R=!0,or(u,null)}function or(u,g){u.F=Date.now(),ai(u),u.B=_t(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),hr(v.i,"t",A),u.C=0,v=u.j.L,u.h=new Bn,u.g=vc(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Xt(E(u.Y,u,u.g),u.P)),g=u.V,v=u.g,A=u.ba;var k="readystatechange";Array.isArray(k)||(k&&(mo[0]=k.toString()),k=mo);for(let B=0;B<k.length;B++){const te=un(v,k[B],A||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=u.J?rt(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ei(),Vh(u.i,u.v,u.B,u.l,u.S,u.u)}zn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Fn(u)==3?g.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)e:{const Te=Fn(this.g),ht=this.g.ya(),Pe=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||Lt(this.g)))){this.K||Te!=4||ht==7||(ht==8||Pe<=0?ei(3):ei(2)),ri(this);var g=this.g.ca();this.X=g;var v=Lh(this);if(this.o=g==200,ic(this.i,this.v,this.B,this.l,this.S,Te,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,k=this.g;if((A=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var B=A;break t}}B=null}if(u=B)ii(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oi(this,u);else{this.o=!1,this.m=3,pt(12),dn(this),wn(this);break e}}if(this.R){u=!0;let tt;for(;!this.K&&this.C<v.length;)if(tt=rc(this,v),tt==Dt){Te==4&&(this.m=4,pt(14),u=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==gt){this.m=4,pt(15),ii(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ii(this.i,this.l,tt,null),oi(this,tt);if(ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||v.length!=0||this.h.h||(this.m=1,pt(16),u=!1),this.o=this.o&&u,!u)ii(this.i,this.l,v,"[Invalid Chunked Response]"),dn(this),wn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Oo(te),te.P=!0,pt(11))}}else ii(this.i,this.l,v,null),oi(this,v);Te==4&&dn(this),this.o&&!this.K&&(Te==4?pc(this.j,this):(this.o=!1,ai(this)))}else zi(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),dn(this),wn(this)}}}catch{}finally{}};function Lh(u){if(!ac(u))return u.g.la();const g=Lt(u.g);if(g==="")return"";let v="";const A=g.length,k=Fn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return dn(u),wn(u),"";u.h.i=new f.TextDecoder}for(let B=0;B<A;B++)u.h.h=!0,v+=u.h.i.decode(g[B],{stream:!(k&&B==A-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function ac(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function rc(u,g){var v=u.C,A=g.indexOf(`
`,v);return A==-1?Dt:(v=Number(g.substring(v,A)),isNaN(v)?gt:(A+=1,A+v>g.length?Dt:(g=g.slice(A,A+v),u.C=A+v,g)))}zn.prototype.cancel=function(){this.K=!0,dn(this)};function ai(u){u.T=Date.now()+u.H,lr(u,u.H)}function lr(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ni(E(u.aa,u),g)}function ri(u){u.D&&(f.clearTimeout(u.D),u.D=null)}zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(_a(this.i,this.B),this.M!=2&&(ei(),pt(17)),dn(this),this.m=2,wn(this)):lr(this,this.T-u)};function wn(u){u.j.I==0||u.K||pc(u.j,u)}function dn(u){ri(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,po(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function oi(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||ci(v.h,u))){if(!u.L&&ci(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)gr(v),bs(v);else break e;Na(v),pt(18)}}else v.xa=k[1],0<v.xa-v.K&&k[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ni(E(v.Va,v),6e3));li(v.h)<=1&&v.ta&&(v.ta=void 0)}else pi(v,11)}else if((u.L||v.g==u)&&gr(v),!C(g))for(k=v.Ba.g.parse(g),g=0;g<k.length;g++){let Pe=k[g];const tt=Pe[0];if(!(tt<=v.K))if(v.K=tt,Pe=Pe[1],v.I==2)if(Pe[0]=="c"){v.M=Pe[1],v.ba=Pe[2];const Nn=Pe[3];Nn!=null&&(v.ka=Nn,v.j.info("VER="+v.ka));const gi=Pe[4];gi!=null&&(v.za=gi,v.j.info("SVER="+v.za));const Gn=Pe[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(A=1.5*Gn,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Qn=u.g;if(Qn){const Ia=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var B=A.h;B.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Eo(B,B.h),B.h=null))}if(A.G){const yr=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;yr&&(A.wa=yr,qe(A.J,A.G,yr))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var te=u;if(A.na=_c(A,A.L?A.ba:null,A.W),te.L){To(A.h,te);var Te=te,ht=A.O;ht&&(Te.H=ht),Te.D&&(ri(Te),ai(Te)),A.g=te}else dc(A);v.i.length>0&&mi(v)}else Pe[0]!="stop"&&Pe[0]!="close"||pi(v,7);else v.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?pi(v,7):xo(v):Pe[0]!="noop"&&v.l&&v.l.qa(Pe),v.A=0)}}ei(4)}catch{}}var yt=class{constructor(u,g){this.g=u,this.map=g}};function _o(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function li(u){return u.h?1:u.g?u.g.size:0}function ci(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Eo(u,g){u.g?u.g.add(g):u.h=g}function To(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}_o.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function So(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return L(u.i)}var oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cr(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let k,B=null;A>=0?(k=u[v].substring(0,A),B=u[v].substring(A+1)):k=u[v],g(k,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof mn?(this.l=u.l,Ot(this,u.j),this.o=u.o,this.g=u.g,ys(this,u.u),this.h=u.h,Ao(this,hc(u.i)),this.m=u.m):u&&(g=String(u).match(oc))?(this.l=!1,Ot(this,g[1]||"",!0),this.o=ui(g[2]||""),this.g=ui(g[3]||"",!0),ys(this,g[4]),this.h=ui(g[5]||"",!0),Ao(this,g[6]||"",!0),this.m=ui(g[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}mn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Sa(g,ur,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Sa(g,ur,!0),"@"),u.push(Pi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Sa(v,v.charAt(0)=="/"?bo:lc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Sa(v,cc)),u.join("")},mn.prototype.resolve=function(u){const g=_t(this);let v=!!u.j;v?Ot(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var A=u.h;if(v)ys(g,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var k=g.h.lastIndexOf("/");k!=-1&&(A=g.h.slice(0,k+1)+A)}if(k=A,k==".."||k==".")A="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){A=k.lastIndexOf("/",0)==0,k=k.split("/");const B=[];for(let te=0;te<k.length;){const Te=k[te++];Te=="."?A&&te==k.length&&B.push(""):Te==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&te==k.length&&B.push("")):(B.push(Te),A=!0)}A=B.join("/")}else A=k}return v?g.h=A:v=u.i.toString()!=="",v?Ao(g,hc(u.i)):v=!!u.m,v&&(g.m=u.m),g};function _t(u){return new mn(u)}function Ot(u,g,v){u.j=v?ui(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ys(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Ao(u,g,v){g instanceof vs?(u.i=g,fr(u.i,u.l)):(v||(g=Sa(g,_s)),u.i=new vs(g,u.l))}function qe(u,g,v){u.i.set(g,v)}function Ta(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ui(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sa(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Wt),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ur=/[#\/\?@]/g,lc=/[#\?:]/g,bo=/[#\?]/g,_s=/[#\?@]/g,cc=/#/g;function vs(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function en(u){u.g||(u.g=new Map,u.h=0,u.i&&cr(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=vs.prototype,s.add=function(u,g){en(this),this.i=null,u=Es(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function uc(u,g){en(u),g=Es(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function wo(u,g){return en(u),g=Es(u,g),u.g.has(g)}s.forEach=function(u,g){en(this),this.g.forEach(function(v,A){v.forEach(function(k){u.call(g,k,A,this)},this)},this)};function Ro(u,g){en(u);let v=[];if(typeof g=="string")wo(u,g)&&(v=v.concat(u.g.get(Es(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}s.set=function(u,g){return en(this),this.i=null,u=Es(this,u),wo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=Ro(this,u),u.length>0?String(u[0]):g):g};function hr(u,g,v){uc(u,g),v.length>0&&(u.i=null,u.g.set(Es(u,g),L(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const k=Pi(v);v=Ro(this,v);for(let B=0;B<v.length;B++){let te=k;v[B]!==""&&(te+="="+Pi(v[B])),u.push(te)}}return this.i=u.join("&")};function hc(u){const g=new vs;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Es(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function fr(u,g){g&&!u.j&&(en(u),u.i=null,u.g.forEach(function(v,A){const k=A.toLowerCase();A!=k&&(uc(this,A),hr(this,k,v))},u)),u.j=g}function qn(u,g){const v=new Un;if(f.Image){const A=new Image;A.onload=S(Rn,v,"TestLoadImage: loaded",!0,g,A),A.onerror=S(Rn,v,"TestLoadImage: error",!1,g,A),A.onabort=S(Rn,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=S(Rn,v,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function Co(u,g){const v=new Un,A=new AbortController,k=setTimeout(()=>{A.abort(),Rn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(B=>{clearTimeout(k),B.ok?Rn(v,"TestPingServer: ok",!0,g):Rn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),Rn(v,"TestPingServer: error",!1,g)})}function Rn(u,g,v,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(v)}catch{}}function Ts(){this.g=new Zl}function hi(u){this.i=u.Sb||null,this.h=u.ab||!1}b(hi,Wl),hi.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(u,g){re.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Aa,re),s=Aa.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Hn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function dr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ss(this):Hn(this),this.readyState==3&&dr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Ss(this))},s.Na=function(u){this.g&&(this.response=u,Ss(this))},s.ga=function(){this.g&&Ss(this)};function Ss(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Hn(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cn(u){let g="";return Me(u,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function ba(u,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Cn(v),typeof u=="string"?v!=null&&Pi(v):qe(u,g,v))}function Qe(u){re.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Qe,re);var fi=/^https?$/i,No=["POST","PUT"];s=Qe.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yo.g(),this.g.onreadystatechange=R(E(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){wa(this,B);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)v.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())v.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),k=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(No,g,void 0)>=0)||A||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of v)this.g.setRequestHeader(B,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){wa(this,B)}};function wa(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Io(u),Ui(u)}function Io(u){u.A||(u.A=!0,Ve(u,"complete"),Ve(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ve(this,"complete"),Ve(this,"abort"),Ui(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Qe.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ra(this):this.Xa())},s.Xa=function(){Ra(this)};function Ra(u){if(u.h&&typeof c<"u"){if(u.v&&Fn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ve(u,"readystatechange"),Fn(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=B===0){let te=String(u.D).match(oc)[1]||null;!te&&f.self&&f.self.location&&(te=f.self.location.protocol.slice(0,-1)),A=!fi.test(te?te.toLowerCase():"")}v=A}if(v)Ve(u,"complete"),Ve(u,"success");else{u.o=6;try{var k=Fn(u)>2?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.ca()+"]",Io(u)}}finally{Ui(u)}}}}function Ui(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Ve(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Fn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),jh(g)}};function Lt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(u){const g={};u=(u.g&&Fn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(C(u[A]))continue;var v=sc(u[A]);const k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=g[k]||[];g[k]=B,B.push(v)}Be(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function As(u){this.za=0,this.i=[],this.j=new Un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,u),this.Za=di("retryDelaySeedMs",1e4,u),this.Ta=di("forwardChannelMaxRetries",2,u),this.va=di("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _o(u&&u.concurrentRequestLimit),this.Ba=new Ts,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=As.prototype,s.ka=8,s.I=1,s.connect=function(u,g,v,A){pt(0),this.W=u,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=_c(this,null,this.W),mi(this)};function xo(u){if(mr(u),u.I==3){var g=u.V++,v=_t(u.J);if(qe(v,"SID",u.M),qe(v,"RID",g),qe(v,"TYPE","terminate"),Ca(u,v),g=new zn(u,u.j,g),g.M=2,g.A=Ta(_t(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=vc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ai(g)}yc(u)}function bs(u){u.g&&(Oo(u),u.g.cancel(),u.g=null)}function mr(u){bs(u),u.v&&(f.clearTimeout(u.v),u.v=null),gr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function mi(u){if(!vo(u.h)&&!u.m){u.m=!0;var g=u.Ea;fe||w(),ce||(fe(),ce=!0),x.add(g,u),u.D=0}}function pr(u,g){return li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ni(E(u.Ea,u,g),gc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const k=new zn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=rt(B),be(B,this.U)):B=this.U),this.u!==null||this.R||(k.J=B,B=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=fc(this,k,g),v=_t(this.J),qe(v,"RID",u),qe(v,"CVER",22),this.G&&qe(v,"X-HTTP-Session-Id",this.G),Ca(this,v),B&&(this.R?g="headers="+Pi(Cn(B))+"&"+g:this.u&&ba(v,this.u,B)),Eo(this.h,k),this.Ra&&qe(v,"TYPE","init"),this.S?(qe(v,"$req",g),qe(v,"SID","null"),k.U=!0,si(k,v,null)):si(k,v,g),this.I=2}}else this.I==3&&(u?Do(this,u):this.i.length==0||vo(this.h)||Do(this))};function Do(u,g){var v;g?v=g.l:v=u.V++;const A=_t(u.J);qe(A,"SID",u.M),qe(A,"RID",v),qe(A,"AID",u.K),Ca(u,A),u.u&&u.o&&ba(A,u.u,u.o),v=new zn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=fc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Eo(u.h,v),si(v,A,g)}function Ca(u,g){u.H&&Me(u.H,function(v,A){qe(g,A,v)}),u.l&&Me({},function(v,A){qe(g,A,v)})}function fc(u,g,v){v=Math.min(u.i.length,v);const A=u.l?E(u.l.Ka,u.l,u):null;e:{var k=u.i;let Te=-1;for(;;){const ht=["count="+v];Te==-1?v>0?(Te=k[0].g,ht.push("ofs="+Te)):Te=0:ht.push("ofs="+Te);let Pe=!0;for(let tt=0;tt<v;tt++){var B=k[tt].g;const Nn=k[tt].map;if(B-=Te,B<0)Te=Math.max(0,k[tt].g-100),Pe=!1;else try{B="req"+B+"_"||"";try{var te=Nn instanceof Map?Nn:Object.entries(Nn);for(const[gi,Gn]of te){let Qn=Gn;p(Gn)&&(Qn=gs(Gn)),ht.push(B+gi+"="+encodeURIComponent(Qn))}}catch(gi){throw ht.push(B+"type="+encodeURIComponent("_badmap")),gi}}catch{A&&A(Nn)}}if(Pe){te=ht.join("&");break e}}te=void 0}return u=u.i.splice(0,v),g.G=u,te}function dc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;fe||w(),ce||(fe(),ce=!0),x.add(g,u),u.A=0}}function Na(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ni(E(u.Da,u),gc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,mc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ni(E(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),bs(this),mc(this))};function Oo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function mc(u){u.g=new zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=_t(u.na);qe(g,"RID","rpc"),qe(g,"SID",u.M),qe(g,"AID",u.K),qe(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(g,"TO",u.ia),qe(g,"TYPE","xmlhttp"),Ca(u,g),u.u&&u.o&&ba(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ta(_t(g)),v.u=null,v.R=!0,or(v,u)}s.Va=function(){this.C!=null&&(this.C=null,bs(this),Na(this),pt(19))};function gr(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function pc(u,g){var v=null;if(u.g==g){gr(u),Oo(u),u.g=null;var A=2}else if(ci(u.h,g))v=g.G,To(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var k=u.D;A=rr(),Ve(A,new ti(A,v)),mi(u)}else dc(u);else if(k=g.m,k==3||k==0&&g.X>0||!(A==1&&pr(u,g)||A==2&&Na(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),k){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function gc(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function pi(u,g){if(u.j.info("Error code "+g),g==2){var v=E(u.bb,u),A=u.Ua;const k=!A;A=new mn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ot(A,"https"),Ta(A),k?qn(A.toString(),v):Co(A.toString(),v)}else pt(2);u.I=0,u.l&&u.l.pa(g),yc(u),mr(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function yc(u){if(u.I=0,u.ja=[],u.l){const g=So(u.h);(g.length!=0||u.i.length!=0)&&(q(u.ja,g),q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function _c(u,g,v){var A=v instanceof mn?_t(v):new mn(v);if(A.g!="")g&&(A.g=g+"."+A.g),ys(A,A.u);else{var k=f.location;A=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;const B=new mn(null);A&&Ot(B,A),g&&(B.g=g),k&&ys(B,k),v&&(B.h=v),A=B}return v=u.G,g=u.wa,v&&g&&qe(A,v,g),qe(A,"VER",u.ka),Ca(u,A),A}function vc(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Qe(new hi({ab:v})):new Qe(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}s=Ec.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ws(){}ws.prototype.g=function(u,g){return new $t(u,g)};function $t(u,g){re.call(this),this.g=new As(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Bi(this)}b($t,re),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){xo(this.g)},$t.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=gs(u),u=v);g.i.push(new yt(g.Ya++,u)),g.I==3&&mi(g)},$t.prototype.N=function(){this.g.l=null,delete this.j,xo(this.g),delete this.g,$t.Z.N.call(this)};function Tc(u){kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}b(Tc,kt);function Sc(){bn.call(this),this.status=1}b(Sc,bn);function Bi(u){this.g=u}b(Bi,Ec),Bi.prototype.ra=function(){Ve(this.g,"a")},Bi.prototype.qa=function(u){Ve(this.g,new Tc(u))},Bi.prototype.pa=function(u){Ve(this.g,new Sc)},Bi.prototype.oa=function(){Ve(this.g,"b")},ws.prototype.createWebChannel=ws.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,v1=function(){return new ws},_1=function(){return rr()},y1=ut,im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,Pu=va,go.COMPLETE="complete",g1=go,ec.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",re.prototype.listen=re.prototype.J,vl=ec,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,p1=Qe}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const Ev="@firebase/firestore",Tv="4.9.2";class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");let co="12.3.0";const Za=new wm("@firebase/firestore");function Kr(){return Za.logLevel}function se(s,...e){if(Za.logLevel<=Ie.DEBUG){const i=e.map(km);Za.debug(`Firestore (${co}): ${s}`,...i)}}function cs(s,...e){if(Za.logLevel<=Ie.ERROR){const i=e.map(km);Za.error(`Firestore (${co}): ${s}`,...i)}}function no(s,...e){if(Za.logLevel<=Ie.WARN){const i=e.map(km);Za.warn(`Firestore (${co}): ${s}`,...i)}}function km(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function _e(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,E1(s,a,i)}function E1(s,e,i){let a=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw cs(a),new Error(a)}function ze(s,e,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,s||E1(e,l,a)}function Ee(s,e){return s}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ji{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ia{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}class T1{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Qt.UNAUTHENTICATED)))}shutdown(){}}class Bw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class qw{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ze(this.o===void 0,42304);let a=this.i;const l=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let c=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ia,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const _=c;e.enqueueRetryable((async()=>{await _.promise,await l(this.currentUser)}))},p=_=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ia)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ze(typeof a.accessToken=="string",31837,{l:a}),new T1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class Hw{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Fw{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new Hw(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gw{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){ze(this.o===void 0,3512);const a=c=>{c.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const l=c=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(ze(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Sv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Qw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}class Lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=Qw(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<i&&(a+=e.charAt(l[c]%62))}return a}}function xe(s,e){return s<e?-1:s>e?1:0}function sm(s,e){const i=Math.min(s.length,e.length);for(let a=0;a<i;a++){const l=s.charAt(a),c=e.charAt(a);if(l!==c)return Hd(l)===Hd(c)?xe(l,c):Hd(l)?1:-1}return xe(s.length,e.length)}const Kw=55296,Yw=57343;function Hd(s){const e=s.charCodeAt(0);return e>=Kw&&e<=Yw}function io(s,e,i){return s.length===e.length&&s.every(((a,l)=>i(a,e[l])))}const Av="__name__";class Ti{constructor(e,i,a){i===void 0?i=0:i>e.length&&_e(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&_e(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let l=0;l<a;l++){const c=Ti.compareSegments(e.get(l),i.get(l));if(c!==0)return c}return xe(e.length,i.length)}static compareSegments(e,i){const a=Ti.isNumericId(e),l=Ti.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Ti.extractNumericId(e).compare(Ti.extractNumericId(i)):sm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class it extends Ti{construct(e,i,a){return new it(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new it(i)}static emptyPath(){return new it([])}}const Xw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ti{construct(e,i,a){return new Ht(e,i,a)}static isValidIdentifier(e){return Xw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Av}static keyField(){return new Ht([Av])}static fromServerFormat(e){const i=[];let a="",l=0;const c=()=>{if(a.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[l+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(a+=p,l++):(c(),l++)}if(c(),f)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(i)}static emptyPath(){return new Ht([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(it.fromString(e))}static fromName(e){return new pe(it.fromString(e).popFirst(5))}static empty(){return new pe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return it.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new it(e.slice()))}}function $w(s,e,i){if(!i)throw new he(Z.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Jw(s,e,i,a){if(e===!0&&a===!0)throw new he(Z.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function bv(s){if(!pe.isDocumentKey(s))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function S1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Pm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function Wa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Pm(s);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function bt(s,e){const i={typeString:s};return e&&(i.value=e),i}function Ql(s,e){if(!S1(s))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const l=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){i=`JSON missing required field: '${a}'`;break}const f=s[a];if(l&&typeof f!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){i=`Expected '${a}' field to equal '${c.value}'`;break}}if(i)throw new he(Z.INVALID_ARGUMENT,i);return!0}const wv=-62135596800,Rv=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Rv);return new et(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<wv)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rv}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ql(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:bt("string",et._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new et(0,0))}static max(){return new ve(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ml=-1;function Zw(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=ve.fromTimestamp(a===1e9?new et(i+1,0):new et(i,a));return new aa(l,pe.empty(),e)}function Ww(s){return new aa(s.readTime,s.key,Ml)}class aa{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new aa(ve.min(),pe.empty(),Ml)}static max(){return new aa(ve.max(),pe.empty(),Ml)}}function eR(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=pe.comparator(s.documentKey,e.documentKey),i!==0?i:xe(s.largestBatchId,e.largestBatchId))}const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function uo(s){if(s.code!==Z.FAILED_PRECONDITION||s.message!==tR)throw s;se("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new $(((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof $?i:$.resolve(i)}catch(i){return $.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):$.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):$.reject(i)}static resolve(e){return new $(((i,a)=>{i(e)}))}static reject(e){return new $(((i,a)=>{a(e)}))}static waitFor(e){return new $(((i,a)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&i()}),(_=>a(_)))})),f=!0,c===l&&i()}))}static or(e){let i=$.resolve(!1);for(const a of e)i=i.next((l=>l?$.resolve(l):a()));return i}static forEach(e,i){const a=[];return e.forEach(((l,c)=>{a.push(i.call(this,l,c))})),this.waitFor(a)}static mapArray(e,i){return new $(((a,l)=>{const c=e.length,f=new Array(c);let p=0;for(let _=0;_<c;_++){const E=_;i(e[E]).next((S=>{f[E]=S,++p,p===c&&a(f)}),(S=>l(S)))}}))}static doWhile(e,i){return new $(((a,l)=>{const c=()=>{e()===!0?i().next((()=>{c()}),l):a()};c()}))}}function iR(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ho(s){return s.name==="IndexedDbTransactionError"}class _h{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_h.ce=-1;const Um=-1;function vh(s){return s==null}function Wu(s){return s===0&&1/s==-1/0}function sR(s){return typeof s=="number"&&Number.isInteger(s)&&!Wu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const A1="";function aR(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Cv(e)),e=rR(s.get(i),e);return Cv(e)}function rR(s,e){let i=e;const a=s.length;for(let l=0;l<a;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case A1:i+="";break;default:i+=c}}return i}function Cv(s){return s+A1+""}function Nv(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function fa(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function b1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class st{constructor(e,i){this.comparator=e,this.root=i||qt.EMPTY}insert(e,i){return new st(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Iu(this.root,e,this.comparator,!0)}}class Iu{constructor(e,i,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?a(e.key,i):1,i&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,i,a,l,c){this.key=e,this.value=i,this.color=a??qt.RED,this.left=l??qt.EMPTY,this.right=c??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,l,c){return new qt(e??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const c=a(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,i,a),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return qt.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,i,a,l,c){return this}insert(e,i,a){return new qt(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Iv(this.data.getIterator())}getIteratorFrom(e){return new Iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new It(this.comparator);return i.data=e,i}}class Iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class An{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new An([])}unionWith(e){let i=new It(Ht.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new An(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}class w1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new w1("Invalid base64 string: "+c):c}})(e);return new Ft(i)}static fromUint8Array(e){const i=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Ft(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(s){if(ze(!!s,39018),typeof s=="string"){let e=0;const i=oR.exec(s);if(ze(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:mt(s.seconds),nanos:mt(s.nanos)}}function mt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function oa(s){return typeof s=="string"?Ft.fromBase64String(s):Ft.fromUint8Array(s)}const R1="server_timestamp",C1="__type__",N1="__previous_value__",I1="__local_write_time__";function zm(s){return(s?.mapValue?.fields||{})[C1]?.stringValue===R1}function Eh(s){const e=s.mapValue.fields[N1];return zm(e)?Eh(e):e}function jl(s){const e=ra(s.mapValue.fields[I1].timestampValue);return new et(e.seconds,e.nanos)}class lR{constructor(e,i,a,l,c,f,p,_,E,S){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=E,this.isUsingEmulator=S}}const eh="(default)";class Vl{constructor(e,i){this.projectId=e,this.database=i||eh}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===eh}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}const x1="__type__",cR="__max__",xu={mapValue:{}},D1="__vector__",th="value";function la(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zm(s)?4:hR(s)?9007199254740991:uR(s)?10:11:_e(28295,{value:s})}function Di(s,e){if(s===e)return!0;const i=la(s);if(i!==la(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return jl(s).isEqual(jl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=ra(l.timestampValue),p=ra(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return oa(l.bytesValue).isEqual(oa(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return mt(l.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(l.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return mt(l.integerValue)===mt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=mt(l.doubleValue),p=mt(c.doubleValue);return f===p?Wu(f)===Wu(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return io(s.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Nv(f)!==Nv(p))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(p[_]===void 0||!Di(f[_],p[_])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function kl(s,e){return(s.values||[]).find((i=>Di(i,e)))!==void 0}function so(s,e){if(s===e)return 0;const i=la(s),a=la(e);if(i!==a)return xe(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return xe(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=mt(c.integerValue||c.doubleValue),_=mt(f.integerValue||f.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(s,e);case 3:return xv(s.timestampValue,e.timestampValue);case 4:return xv(jl(s),jl(e));case 5:return sm(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=oa(c),_=oa(f);return p.compareTo(_)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),_=f.split("/");for(let E=0;E<p.length&&E<_.length;E++){const S=xe(p[E],_[E]);if(S!==0)return S}return xe(p.length,_.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=xe(mt(c.latitude),mt(f.latitude));return p!==0?p:xe(mt(c.longitude),mt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Dv(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},_=f.fields||{},E=p[th]?.arrayValue,S=_[th]?.arrayValue,b=xe(E?.values?.length||0,S?.values?.length||0);return b!==0?b:Dv(E,S)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===xu.mapValue&&f===xu.mapValue)return 0;if(c===xu.mapValue)return 1;if(f===xu.mapValue)return-1;const p=c.fields||{},_=Object.keys(p),E=f.fields||{},S=Object.keys(E);_.sort(),S.sort();for(let b=0;b<_.length&&b<S.length;++b){const R=sm(_[b],S[b]);if(R!==0)return R;const L=so(p[_[b]],E[S[b]]);if(L!==0)return L}return xe(_.length,S.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:i})}}function xv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xe(s,e);const i=ra(s),a=ra(e),l=xe(i.seconds,a.seconds);return l!==0?l:xe(i.nanos,a.nanos)}function Dv(s,e){const i=s.values||[],a=e.values||[];for(let l=0;l<i.length&&l<a.length;++l){const c=so(i[l],a[l]);if(c)return c}return xe(i.length,a.length)}function ao(s){return am(s)}function am(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const a=ra(i);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return oa(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return pe.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let a="[",l=!0;for(const c of i.values||[])l?l=!1:a+=",",a+=am(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const f of a)c?c=!1:l+=",",l+=`${f}:${am(i.fields[f])}`;return l+"}"})(s.mapValue):_e(61005,{value:s})}function Uu(s){switch(la(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eh(s);return e?16+Uu(e):16;case 5:return 2*s.stringValue.length;case 6:return oa(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,c)=>l+Uu(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return fa(a.fields,((c,f)=>{l+=c.length+Uu(f)})),l})(s.mapValue);default:throw _e(13486,{value:s})}}function rm(s){return!!s&&"integerValue"in s}function Bm(s){return!!s&&"arrayValue"in s}function Ov(s){return!!s&&"nullValue"in s}function Mv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function zu(s){return!!s&&"mapValue"in s}function uR(s){return(s?.mapValue?.fields||{})[x1]?.stringValue===D1}function wl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return fa(s.mapValue.fields,((i,a)=>e.mapValue.fields[i]=wl(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=wl(s.arrayValue.values[i]);return e}return{...s}}function hR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!zu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(i)}setAll(e){let i=Ht.emptyPath(),a={},l=[];e.forEach(((f,p)=>{if(!i.isImmediateParentOf(p)){const _=this.getFieldsMap(i);this.applyChanges(_,a,l),a={},l=[],i=p.popLast()}f?a[p.lastSegment()]=wl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,a,l)}delete(e){const i=this.field(e.popLast());zu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=i.mapValue.fields[e.get(a)];zu(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,a){fa(i,((l,c)=>e[l]=c));for(const l of a)delete e[l]}clone(){return new ln(wl(this.value))}}function O1(s){const e=[];return fa(s.fields,((i,a)=>{const l=new Ht([i]);if(zu(a)){const c=O1(a.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new An(e)}class Kt{constructor(e,i,a,l,c,f,p){this.key=e,this.documentType=i,this.version=a,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Kt(e,0,ve.min(),ve.min(),ve.min(),ln.empty(),0)}static newFoundDocument(e,i,a,l){return new Kt(e,1,i,ve.min(),a,l,0)}static newNoDocument(e,i){return new Kt(e,2,i,ve.min(),ve.min(),ln.empty(),0)}static newUnknownDocument(e,i){return new Kt(e,3,i,ve.min(),ve.min(),ln.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nh{constructor(e,i){this.position=e,this.inclusive=i}}function jv(s,e,i){let a=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?a=pe.comparator(pe.fromName(f.referenceValue),i.key):a=so(f,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Vv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Di(s.position[i],e.position[i]))return!1;return!0}class ih{constructor(e,i="asc"){this.field=e,this.dir=i}}function fR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class M1{}class Ct extends M1{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new mR(e,i,a):i==="array-contains"?new yR(e,a):i==="in"?new _R(e,a):i==="not-in"?new vR(e,a):i==="array-contains-any"?new ER(e,a):new Ct(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new pR(e,a):new gR(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(so(i,this.value)):i!==null&&la(this.value)===la(i)&&this.matchesComparison(so(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends M1{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Oi(e,i)}matches(e){return j1(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function j1(s){return s.op==="and"}function V1(s){return dR(s)&&j1(s)}function dR(s){for(const e of s.filters)if(e instanceof Oi)return!1;return!0}function om(s){if(s instanceof Ct)return s.field.canonicalString()+s.op.toString()+ao(s.value);if(V1(s))return s.filters.map((e=>om(e))).join(",");{const e=s.filters.map((i=>om(i))).join(",");return`${s.op}(${e})`}}function k1(s,e){return s instanceof Ct?(function(a,l){return l instanceof Ct&&a.op===l.op&&a.field.isEqual(l.field)&&Di(a.value,l.value)})(s,e):s instanceof Oi?(function(a,l){return l instanceof Oi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((c,f,p)=>c&&k1(f,l.filters[p])),!0):!1})(s,e):void _e(19439)}function L1(s){return s instanceof Ct?(function(i){return`${i.field.canonicalString()} ${i.op} ${ao(i.value)}`})(s):s instanceof Oi?(function(i){return i.op.toString()+" {"+i.getFilters().map(L1).join(" ,")+"}"})(s):"Filter"}class mR extends Ct{constructor(e,i,a){super(e,i,a),this.key=pe.fromName(a.referenceValue)}matches(e){const i=pe.comparator(e.key,this.key);return this.matchesComparison(i)}}class pR extends Ct{constructor(e,i){super(e,"in",i),this.keys=P1("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class gR extends Ct{constructor(e,i){super(e,"not-in",i),this.keys=P1("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function P1(s,e){return(e.arrayValue?.values||[]).map((i=>pe.fromName(i.referenceValue)))}class yR extends Ct{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Bm(i)&&kl(i.arrayValue,this.value)}}class _R extends Ct{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&kl(this.value.arrayValue,i)}}class vR extends Ct{constructor(e,i){super(e,"not-in",i)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!kl(this.value.arrayValue,i)}}class ER extends Ct{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Bm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>kl(this.value.arrayValue,a)))}}class TR{constructor(e,i=null,a=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function kv(s,e=null,i=[],a=[],l=null,c=null,f=null){return new TR(s,e,i,a,l,c,f)}function qm(s){const e=Ee(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>om(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),vh(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>ao(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>ao(a))).join(",")),e.Te=i}return e.Te}function Hm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!fR(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!k1(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Vv(s.startAt,e.startAt)&&Vv(s.endAt,e.endAt)}function lm(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Th{constructor(e,i=null,a=[],l=[],c=null,f="F",p=null,_=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SR(s,e,i,a,l,c,f,p){return new Th(s,e,i,a,l,c,f,p)}function Fm(s){return new Th(s)}function Lv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function AR(s){return s.collectionGroup!==null}function Rl(s){const e=Ee(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),i.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new It(Ht.comparator);return f.filters.forEach((_=>{_.getFlattenedFilters().forEach((E=>{E.isInequality()&&(p=p.add(E.field))}))})),p})(e).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ih(c,a))})),i.has(Ht.keyField().canonicalString())||e.Ie.push(new ih(Ht.keyField(),a))}return e.Ie}function Ri(s){const e=Ee(s);return e.Ee||(e.Ee=bR(e,Rl(s))),e.Ee}function bR(s,e){if(s.limitType==="F")return kv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ih(l.field,c)}));const i=s.endAt?new nh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new nh(s.startAt.position,s.startAt.inclusive):null;return kv(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function cm(s,e,i){return new Th(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Sh(s,e){return Hm(Ri(s),Ri(e))&&s.limitType===e.limitType}function U1(s){return`${qm(Ri(s))}|lt:${s.limitType}`}function Yr(s){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>L1(l))).join(", ")}]`),vh(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>ao(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>ao(l))).join(",")),`Target(${a})`})(Ri(s))}; limitType=${s.limitType})`}function Ah(s,e){return e.isFoundDocument()&&(function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):pe.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,l){for(const c of Rl(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(f,p,_){const E=jv(f,p,_);return f.inclusive?E<=0:E<0})(a.startAt,Rl(a),l)||a.endAt&&!(function(f,p,_){const E=jv(f,p,_);return f.inclusive?E>=0:E>0})(a.endAt,Rl(a),l))})(s,e)}function wR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function z1(s){return(e,i)=>{let a=!1;for(const l of Rl(s)){const c=RR(l,e,i);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function RR(s,e,i){const a=s.field.isKeyField()?pe.comparator(e.key,i.key):(function(c,f,p){const _=f.data.field(c),E=p.data.field(c);return _!==null&&E!==null?so(_,E):_e(42886)})(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return _e(19790,{direction:s.dir})}}class sr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,((i,a)=>{for(const[l,c]of a)e(l,c)}))}isEmpty(){return b1(this.inner)}size(){return this.innerSize}}const CR=new st(pe.comparator);function us(){return CR}const B1=new st(pe.comparator);function El(...s){let e=B1;for(const i of s)e=e.insert(i.key,i);return e}function q1(s){let e=B1;return s.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Qa(){return Cl()}function H1(){return Cl()}function Cl(){return new sr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const NR=new st(pe.comparator),IR=new It(pe.comparator);function De(...s){let e=IR;for(const i of s)e=e.add(i);return e}const xR=new It(xe);function DR(){return xR}function Gm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function F1(s){return{integerValue:""+s}}function OR(s,e){return sR(e)?F1(e):Gm(s,e)}class bh{constructor(){this._=void 0}}function MR(s,e,i){return s instanceof sh?(function(l,c){const f={fields:{[C1]:{stringValue:R1},[I1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&zm(c)&&(c=Eh(c)),c&&(f.fields[N1]=c),{mapValue:f}})(i,e):s instanceof Ll?Q1(s,e):s instanceof Pl?K1(s,e):(function(l,c){const f=G1(l,c),p=Pv(f)+Pv(l.Ae);return rm(f)&&rm(l.Ae)?F1(p):Gm(l.serializer,p)})(s,e)}function jR(s,e,i){return s instanceof Ll?Q1(s,e):s instanceof Pl?K1(s,e):i}function G1(s,e){return s instanceof ah?(function(a){return rm(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class sh extends bh{}class Ll extends bh{constructor(e){super(),this.elements=e}}function Q1(s,e){const i=Y1(e);for(const a of s.elements)i.some((l=>Di(l,a)))||i.push(a);return{arrayValue:{values:i}}}class Pl extends bh{constructor(e){super(),this.elements=e}}function K1(s,e){let i=Y1(e);for(const a of s.elements)i=i.filter((l=>!Di(l,a)));return{arrayValue:{values:i}}}class ah extends bh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Pv(s){return mt(s.integerValue||s.doubleValue)}function Y1(s){return Bm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function VR(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof Ll&&l instanceof Ll||a instanceof Pl&&l instanceof Pl?io(a.elements,l.elements,Di):a instanceof ah&&l instanceof ah?Di(a.Ae,l.Ae):a instanceof sh&&l instanceof sh})(s.transform,e.transform)}class kR{constructor(e,i){this.version=e,this.transformResults=i}}class Ci{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class wh{}function X1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new J1(s.key,Ci.none()):new Kl(s.key,s.data,Ci.none());{const i=s.data,a=ln.empty();let l=new It(Ht.comparator);for(let c of e.fields)if(!l.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?a.delete(c):a.set(c,f),l=l.add(c)}return new da(s.key,a,new An(l.toArray()),Ci.none())}}function LR(s,e,i){s instanceof Kl?(function(l,c,f){const p=l.value.clone(),_=zv(l.fieldTransforms,c,f.transformResults);p.setAll(_),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,i):s instanceof da?(function(l,c,f){if(!Bu(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=zv(l.fieldTransforms,c,f.transformResults),_=c.data;_.setAll($1(l)),_.setAll(p),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(s,e,i):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function Nl(s,e,i,a){return s instanceof Kl?(function(c,f,p,_){if(!Bu(c.precondition,f))return p;const E=c.value.clone(),S=Bv(c.fieldTransforms,_,f);return E.setAll(S),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null})(s,e,i,a):s instanceof da?(function(c,f,p,_){if(!Bu(c.precondition,f))return p;const E=Bv(c.fieldTransforms,_,f),S=f.data;return S.setAll($1(c)),S.setAll(E),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(s,e,i,a):(function(c,f,p){return Bu(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,i)}function PR(s,e){let i=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),c=G1(a.transform,l||null);c!=null&&(i===null&&(i=ln.empty()),i.set(a.field,c))}return i||null}function Uv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&io(a,l,((c,f)=>VR(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kl extends wh{constructor(e,i,a,l=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class da extends wh{constructor(e,i,a,l,c=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function $1(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}})),e}function zv(s,e,i){const a=new Map;ze(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);a.set(c.field,jR(f,p,i[l]))}return a}function Bv(s,e,i){const a=new Map;for(const l of s){const c=l.transform,f=i.data.field(l.field);a.set(l.field,MR(c,f,e))}return a}class J1 extends wh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UR extends wh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zR{constructor(e,i,a,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&LR(c,e,a[l])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Nl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Nl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=H1();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=i.has(l.key)?null:p;const _=X1(f,p);_!==null&&a.set(l.key,_),f.isValidDocument()||f.convertToNoDocument(ve.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),De())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((i,a)=>Uv(i,a)))&&io(this.baseMutations,e.baseMutations,((i,a)=>Uv(i,a)))}}class Qm{constructor(e,i,a,l){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(e,i,a){ze(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return NR})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,a[f].version);return new Qm(e,i,a,l)}}class BR{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qR{constructor(e,i){this.count=e,this.unchangedNames=i}}var At,je;function HR(s){switch(s){case Z.OK:return _e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function Z1(s){if(s===void 0)return cs("GRPC error has no .code"),Z.UNKNOWN;switch(s){case At.OK:return Z.OK;case At.CANCELLED:return Z.CANCELLED;case At.UNKNOWN:return Z.UNKNOWN;case At.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case At.INTERNAL:return Z.INTERNAL;case At.UNAVAILABLE:return Z.UNAVAILABLE;case At.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case At.NOT_FOUND:return Z.NOT_FOUND;case At.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case At.ABORTED:return Z.ABORTED;case At.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case At.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:s})}}(je=At||(At={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function FR(){return new TextEncoder}const GR=new na([4294967295,4294967295],0);function qv(s){const e=FR().encode(s),i=new m1;return i.update(e),new Uint8Array(i.digest())}function Hv(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new na([i,a],0),new na([l,c],0)]}class Km{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Tl(`Invalid padding: ${i}`);if(a<0)throw new Tl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=na.fromNumber(this.ge)}ye(e,i,a){let l=e.add(i.multiply(na.fromNumber(a)));return l.compare(GR)===1&&(l=new na([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=qv(e),[a,l]=Hv(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,l,c);if(!this.we(f))return!1}return!0}static create(e,i,a){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Km(c,l,i);return a.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const i=qv(e),[a,l]=Hv(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(a,l,c);this.Se(f)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rh{constructor(e,i,a,l,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const l=new Map;return l.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Rh(ve.min(),l,new st(xe),us(),De())}}class Yl{constructor(e,i,a,l,c){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new Yl(a,i,De(),De(),De())}}class qu{constructor(e,i,a,l){this.be=e,this.removedTargetIds=i,this.key=a,this.De=l}}class W1{constructor(e,i){this.targetId=e,this.Ce=i}}class eE{constructor(e,i,a=Ft.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=l}}class Fv{constructor(){this.ve=0,this.Fe=Gv(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),i=De(),a=De();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:_e(38017,{changeType:c})}})),new Yl(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=Gv()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QR{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Du(),this.He=Du(),this.Ye=new st(xe)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,a=e.Ce.count,l=this.ot(i);if(l){const c=l.target;if(lm(c))if(a===0){const f=new pe(c.path);this.et(i,f,Kt.newNoDocument(f,ve.min()))}else ze(a===1,20013,{expectedCount:a});else{const f=this._t(i);if(f!==a){const p=this.ut(e),_=p?this.ct(p,e,f):1;if(_!==0){this.it(i);const E=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,E)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=i;let f,p;try{f=oa(a).toUint8Array()}catch(_){if(_ instanceof w1)return no("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new Km(f,l,c)}catch(_){return no(_ instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(i,c,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&lm(p.target)){const _=new pe(p.target.path);this.It(_).has(f)||this.Et(f,_)||this.et(f,_,Kt.newNoDocument(_,e))}c.Be&&(i.set(f,c.ke()),c.qe())}}));let a=De();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((_=>{const E=this.ot(_);return!E||E.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new Rh(e,i,this.Ye,this.je,a);return this.je=us(),this.Je=Du(),this.He=Du(),this.Ye=new st(xe),l}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new Fv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new It(xe),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new It(xe),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||se("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Du(){return new st(pe.comparator)}function Gv(){return new st(pe.comparator)}const KR={asc:"ASCENDING",desc:"DESCENDING"},YR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XR={and:"AND",or:"OR"};class $R{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function um(s,e){return s.useProto3Json||vh(e)?e:{value:e}}function rh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function JR(s,e){return rh(s,e.toTimestamp())}function Ni(s){return ze(!!s,49232),ve.fromTimestamp((function(i){const a=ra(i);return new et(a.seconds,a.nanos)})(s))}function Ym(s,e){return hm(s,e).canonicalString()}function hm(s,e){const i=(function(l){return new it(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function nE(s){const e=it.fromString(s);return ze(oE(e),10190,{key:e.toString()}),e}function fm(s,e){return Ym(s.databaseId,e.path)}function Fd(s,e){const i=nE(e);if(i.get(1)!==s.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new pe(sE(i))}function iE(s,e){return Ym(s.databaseId,e)}function ZR(s){const e=nE(s);return e.length===4?it.emptyPath():sE(e)}function dm(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function sE(s){return ze(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Qv(s,e,i){return{name:fm(s,e),fields:i.value.mapValue.fields}}function WR(s,e){let i;if("targetChange"in e){e.targetChange;const a=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:_e(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(E,S){return E.useProto3Json?(ze(S===void 0||typeof S=="string",58123),Ft.fromBase64String(S||"")):(ze(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ft.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(E){const S=E.code===void 0?Z.UNKNOWN:Z1(E.code);return new he(S,E.message||"")})(f);i=new eE(a,l,c,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=Fd(s,a.document.name),c=Ni(a.document.updateTime),f=a.document.createTime?Ni(a.document.createTime):ve.min(),p=new ln({mapValue:{fields:a.document.fields}}),_=Kt.newFoundDocument(l,c,f,p),E=a.targetIds||[],S=a.removedTargetIds||[];i=new qu(E,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=Fd(s,a.document),c=a.readTime?Ni(a.readTime):ve.min(),f=Kt.newNoDocument(l,c),p=a.removedTargetIds||[];i=new qu([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=Fd(s,a.document),c=a.removedTargetIds||[];i=new qu([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,f=new qR(l,c),p=a.targetId;i=new W1(p,f)}}return i}function eC(s,e){let i;if(e instanceof Kl)i={update:Qv(s,e.key,e.value)};else if(e instanceof J1)i={delete:fm(s,e.key)};else if(e instanceof da)i={update:Qv(s,e.key,e.data),updateMask:cC(e.fieldMask)};else{if(!(e instanceof UR))return _e(16599,{Vt:e.type});i={verify:fm(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(c,f){const p=f.transform;if(p instanceof sh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ll)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Pl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ah)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:JR(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(s,e.precondition)),i}function tC(s,e){return s&&s.length>0?(ze(e!==void 0,14353),s.map((i=>(function(l,c){let f=l.updateTime?Ni(l.updateTime):Ni(c);return f.isEqual(ve.min())&&(f=Ni(c)),new kR(f,l.transformResults||[])})(i,e)))):[]}function nC(s,e){return{documents:[iE(s,e.path)]}}function iC(s,e){const i={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=iE(s,l);const c=(function(E){if(E.length!==0)return rE(Oi.create(E,"and"))})(e.filters);c&&(i.structuredQuery.where=c);const f=(function(E){if(E.length!==0)return E.map((S=>(function(R){return{field:Xr(R.field),direction:rC(R.dir)}})(S)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const p=um(s,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:i,parent:l}}function sC(s){let e=ZR(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){ze(a===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let c=[];i.where&&(c=(function(b){const R=aE(b);return R instanceof Oi&&V1(R)?R.getFilters():[R]})(i.where));let f=[];i.orderBy&&(f=(function(b){return b.map((R=>(function(q){return new ih($r(q.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(R)))})(i.orderBy));let p=null;i.limit&&(p=(function(b){let R;return R=typeof b=="object"?b.value:b,vh(R)?null:R})(i.limit));let _=null;i.startAt&&(_=(function(b){const R=!!b.before,L=b.values||[];return new nh(L,R)})(i.startAt));let E=null;return i.endAt&&(E=(function(b){const R=!b.before,L=b.values||[];return new nh(L,R)})(i.endAt)),SR(e,l,f,c,p,"F",_,E)}function aC(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function aE(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=$r(i.unaryFilter.field);return Ct.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=$r(i.unaryFilter.field);return Ct.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$r(i.unaryFilter.field);return Ct.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=$r(i.unaryFilter.field);return Ct.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Ct.create($r(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Oi.create(i.compositeFilter.filters.map((a=>aE(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(i.compositeFilter.op))})(s):_e(30097,{filter:s})}function rC(s){return KR[s]}function oC(s){return YR[s]}function lC(s){return XR[s]}function Xr(s){return{fieldPath:s.canonicalString()}}function $r(s){return Ht.fromServerFormat(s.fieldPath)}function rE(s){return s instanceof Ct?(function(i){if(i.op==="=="){if(Mv(i.value))return{unaryFilter:{field:Xr(i.field),op:"IS_NAN"}};if(Ov(i.value))return{unaryFilter:{field:Xr(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Mv(i.value))return{unaryFilter:{field:Xr(i.field),op:"IS_NOT_NAN"}};if(Ov(i.value))return{unaryFilter:{field:Xr(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(i.field),op:oC(i.op),value:i.value}}})(s):s instanceof Oi?(function(i){const a=i.getFilters().map((l=>rE(l)));return a.length===1?a[0]:{compositeFilter:{op:lC(i.op),filters:a}}})(s):_e(54877,{filter:s})}function cC(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function oE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Ws{constructor(e,i,a,l,c=ve.min(),f=ve.min(),p=Ft.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uC{constructor(e){this.yt=e}}function hC(s){const e=sC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?cm(e,e.limit,"L"):e}class fC{constructor(){this.Cn=new dC}addToCollectionParentIndex(e,i){return this.Cn.add(i),$.resolve()}getCollectionParents(e,i){return $.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return $.resolve()}deleteFieldIndex(e,i){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,i){return $.resolve()}getDocumentsMatchingTarget(e,i){return $.resolve(null)}getIndexType(e,i){return $.resolve(0)}getFieldIndexes(e,i){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,i){return $.resolve(aa.min())}getMinOffsetFromCollectionGroup(e,i){return $.resolve(aa.min())}updateCollectionGroup(e,i,a){return $.resolve()}updateIndexEntries(e,i){return $.resolve()}}class dC{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i]||new It(it.comparator),c=!l.has(a);return this.index[i]=l.add(a),c}has(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(e){return(this.index[e]||new It(it.comparator)).toArray()}}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lE=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(lE,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}const Yv="LruGarbageCollector",mC=1048576;function Xv([s,e],[i,a]){const l=xe(s,i);return l===0?xe(e,a):l}class pC{constructor(e){this.Ir=e,this.buffer=new It(Xv),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();Xv(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class gC{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ho(i)?se(Yv,"Ignoring IndexedDB error during garbage collection: ",i):await uo(i)}await this.Vr(3e5)}))}}class yC{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return $.resolve(_h.ce);const a=new pC(i);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Kv)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,l,c,f,p,_,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,f=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(a=b,p=Date.now(),this.removeTargets(e,a,i)))).next((b=>(c=b,_=Date.now(),this.removeOrphanedDocuments(e,a)))).next((b=>(E=Date.now(),Kr()<=Ie.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(_-p)+`ms
	Removed ${b} documents in `+(E-_)+`ms
Total Duration: ${E-S}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:b}))))}}function _C(s,e){return new yC(s,e)}class vC{constructor(){this.changes=new sr((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?$.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EC{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class TC{constructor(e,i,a,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(a!==null&&Nl(a.mutation,l,An.empty(),et.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,De()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=De()){const l=Qa();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,a).next((c=>{let f=El();return c.forEach(((p,_)=>{f=f.insert(p,_.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const a=Qa();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,De())))}populateOverlays(e,i,a){const l=[];return a.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{i.set(f,p)}))}))}computeViews(e,i,a,l){let c=us();const f=Cl(),p=(function(){return Cl()})();return i.forEach(((_,E)=>{const S=a.get(E.key);l.has(E.key)&&(S===void 0||S.mutation instanceof da)?c=c.insert(E.key,E):S!==void 0?(f.set(E.key,S.mutation.getFieldMask()),Nl(S.mutation,E,S.mutation.getFieldMask(),et.now())):f.set(E.key,An.empty())})),this.recalculateAndSaveOverlays(e,c).next((_=>(_.forEach(((E,S)=>f.set(E,S))),i.forEach(((E,S)=>p.set(E,new EC(S,f.get(E)??null)))),p)))}recalculateAndSaveOverlays(e,i){const a=Cl();let l=new st(((f,p)=>f-p)),c=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const p of f)p.keys().forEach((_=>{const E=i.get(_);if(E===null)return;let S=a.get(_)||An.empty();S=p.applyToLocalView(E,S),a.set(_,S);const b=(l.get(p.batchId)||De()).add(_);l=l.insert(p.batchId,b)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),E=_.key,S=_.value,b=H1();S.forEach((R=>{if(!c.has(R)){const L=X1(i.get(R),a.get(R));L!==null&&b.set(R,L),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,E,b))}return $.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,l){return(function(f){return pe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):AR(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,l):this.getDocumentsMatchingCollectionQuery(e,i,a,l)}getNextDocuments(e,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,l-c.size):$.resolve(Qa());let p=Ml,_=c;return f.next((E=>$.forEach(E,((S,b)=>(p<b.largestBatchId&&(p=b.largestBatchId),c.get(S)?$.resolve():this.remoteDocumentCache.getEntry(e,S).next((R=>{_=_.insert(S,R)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,_,E,De()))).next((S=>({batchId:p,changes:q1(S)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new pe(i)).next((a=>{let l=El();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,l){const c=i.collectionGroup;let f=El();return this.indexManager.getCollectionParents(e,c).next((p=>$.forEach(p,(_=>{const E=(function(b,R){return new Th(R,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(i,_.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,a,l).next((S=>{S.forEach(((b,R)=>{f=f.insert(b,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,c,l)))).next((f=>{c.forEach(((_,E)=>{const S=E.getKey();f.get(S)===null&&(f=f.insert(S,Kt.newInvalidDocument(S)))}));let p=El();return f.forEach(((_,E)=>{const S=c.get(_);S!==void 0&&Nl(S.mutation,E,An.empty(),et.now()),Ah(i,E)&&(p=p.insert(_,E))})),p}))}}class SC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return $.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ni(l.createTime)}})(i)),$.resolve()}getNamedQuery(e,i){return $.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:hC(l.bundledQuery),readTime:Ni(l.readTime)}})(i)),$.resolve()}}class AC{constructor(){this.overlays=new st(pe.comparator),this.qr=new Map}getOverlay(e,i){return $.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Qa();return $.forEach(i,(l=>this.getOverlay(e,l).next((c=>{c!==null&&a.set(l,c)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((l,c)=>{this.St(e,i,c)})),$.resolve()}removeOverlaysForBatchId(e,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),$.resolve()}getOverlaysForCollection(e,i,a){const l=Qa(),c=i.length+1,f=new pe(i.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const _=p.getNext().value,E=_.getKey();if(!i.isPrefixOf(E.path))break;E.path.length===c&&_.largestBatchId>a&&l.set(_.getKey(),_)}return $.resolve(l)}getOverlaysForCollectionGroup(e,i,a,l){let c=new st(((E,S)=>E-S));const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===i&&E.largestBatchId>a){let S=c.get(E.largestBatchId);S===null&&(S=Qa(),c=c.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const p=Qa(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((E,S)=>p.set(E,S))),!(p.size()>=l)););return $.resolve(p)}St(e,i,a){const l=this.overlays.get(a.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new BR(i,a));let c=this.qr.get(i);c===void 0&&(c=De(),this.qr.set(i,c)),this.qr.set(i,c.add(a.key))}}class bC{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,$.resolve()}}class Xm{constructor(){this.Qr=new It(jt.$r),this.Ur=new It(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new jt(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new jt(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new pe(new it([])),a=new jt(i,e),l=new jt(i,e+1),c=[];return this.Ur.forEachInRange([a,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new pe(new it([])),a=new jt(i,e),l=new jt(i,e+1);let c=De();return this.Ur.forEachInRange([a,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const i=new jt(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class jt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return pe.comparator(e.key,i.key)||xe(e.Yr,i.Yr)}static Kr(e,i){return xe(e.Yr,i.Yr)||pe.comparator(e.key,i.key)}}class wC{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new It(jt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new zR(c,i,a,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new jt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(f)}lookupMutationBatch(e,i){return $.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,l=this.ei(a),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Um:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new jt(i,0),l=new jt(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new It(xe);return i.forEach((l=>{const c=new jt(l,0),f=new jt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{a=a.add(p.Yr)}))})),$.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,l=a.length+1;let c=a;pe.isDocumentKey(c)||(c=c.child(""));const f=new jt(new pe(c),0);let p=new It(xe);return this.Zr.forEachWhile((_=>{const E=_.key.path;return!!a.isPrefixOf(E)&&(E.length===l&&(p=p.add(_.Yr)),!0)}),f),$.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){ze(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return $.forEach(i.mutations,(l=>{const c=new jt(l.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new jt(i,0),l=this.Zr.firstAfterOrEqual(a);return $.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class RC{constructor(e){this.ri=e,this.docs=(function(){return new st(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,l=this.docs.get(a),c=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return $.resolve(a?a.document.mutableCopy():Kt.newInvalidDocument(i))}getEntries(e,i){let a=us();return i.forEach((l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():Kt.newInvalidDocument(l))})),$.resolve(a)}getDocumentsMatchingQuery(e,i,a,l){let c=us();const f=i.path,p=new pe(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:E,value:{document:S}}=_.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||eR(Ww(S),a)<=0||(l.has(S.key)||Ah(i,S))&&(c=c.insert(S.key,S.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,i,a,l){_e(9500)}ii(e,i){return $.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new CC(this)}getSize(e){return $.resolve(this.size)}}class CC extends vC{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),$.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}class NC{constructor(e){this.persistence=e,this.si=new sr((i=>qm(i)),Hm),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Xm,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,i){return this.si.forEach(((a,l)=>i(l))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),$.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new ro(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,$.resolve()}updateTargetData(e,i){return this.Pr(i),$.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,i,a){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=i&&a.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return $.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),$.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),$.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return $.resolve(a)}containsKey(e,i){return $.resolve(this._i.containsKey(i))}}class cE{constructor(e,i){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new bC,this.referenceDelegate=e(this),this.Pi=new NC(this),this.indexManager=new fC,this.remoteDocumentCache=(function(l){return new RC(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new uC(i),this.Ii=new SC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new AC,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new wC(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){se("MemoryPersistence","Starting transaction:",e);const l=new IC(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,i){return $.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class IC extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.Ri=new Xm,this.Vi=null}static mi(e){return new $m(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),$.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),$.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),$.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(a=>{const l=pe.fromPath(a);return this.gi(e,l).next((c=>{c||i.removeEntry(l,ve.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return $.or([()=>$.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class oh{constructor(e,i){this.persistence=e,this.pi=new sr((a=>aR(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=_C(this,i)}static mi(e,i){return new oh(e,i)}Ei(){}di(e){return $.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((l=>a+l))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return $.forEach(this.pi,((a,l)=>this.br(e,a,l).next((c=>c?$.resolve():i(l)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((p=>{p||(a++,c.removeEntry(f,ve.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),$.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Uu(e.data.value)),i}br(e,i,a){return $.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return $.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jm{constructor(e,i,a,l){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=l}static As(e,i){let a=De(),l=De();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Jm(e,i.fromCache,a,l)}}class xC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class DC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sS()?8:iR(Yt())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,l){const c={result:null};return this.ys(e,i).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,i,l,a).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new xC;return this.Ss(e,i,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,i,f,p.size)}))})).next((()=>c.result))}bs(e,i,a,l){return a.documentReadCount<this.fs?(Kr()<=Ie.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Yr(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Kr()<=Ie.DEBUG&&se("QueryEngine","Query:",Yr(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(Kr()<=Ie.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Yr(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(i))):$.resolve())}ys(e,i){if(Lv(i))return $.resolve(null);let a=Ri(i);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=cm(i,null,"F"),a=Ri(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const f=De(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,a).next((_=>{const E=this.Ds(i,p);return this.Cs(i,E,f,_.readTime)?this.ys(e,cm(i,null,"F")):this.vs(e,E,i,_)}))))})))))}ws(e,i,a,l){return Lv(i)||l.isEqual(ve.min())?$.resolve(null):this.ps.getDocuments(e,a).next((c=>{const f=this.Ds(i,c);return this.Cs(i,f,a,l)?$.resolve(null):(Kr()<=Ie.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Yr(i)),this.vs(e,f,i,Zw(l,Ml)).next((p=>p)))}))}Ds(e,i){let a=new It(z1(e));return i.forEach(((l,c)=>{Ah(e,c)&&(a=a.add(c))})),a}Cs(e,i,a,l){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,i,a){return Kr()<=Ie.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Yr(i)),this.ps.getDocumentsMatchingQuery(e,i,aa.min(),a)}vs(e,i,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((c=>(i.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const Zm="LocalStore",OC=3e8;class MC{constructor(e,i,a,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new st(xe),this.xs=new sr((c=>qm(c)),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function jC(s,e,i,a){return new MC(s,e,i,a)}async function uE(s,e){const i=Ee(s);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((c=>(l=c,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((c=>{const f=[],p=[];let _=De();for(const E of l){f.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}for(const E of c){p.push(E.batchId);for(const S of E.mutations)_=_.add(S.key)}return i.localDocuments.getDocuments(a,_).next((E=>({Ls:E,removedBatchIds:f,addedBatchIds:p})))}))}))}function VC(s,e){const i=Ee(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,E,S){const b=E.batch,R=b.keys();let L=$.resolve();return R.forEach((q=>{L=L.next((()=>S.getEntry(_,q))).next((J=>{const G=E.docVersions.get(q);ze(G!==null,48541),J.version.compareTo(G)<0&&(b.applyToRemoteDocument(J,E),J.isValidDocument()&&(J.setReadTime(E.commitVersion),S.addEntry(J)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(_,b)))})(i,a,e,c).next((()=>c.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let _=De();for(let E=0;E<p.mutationResults.length;++E)p.mutationResults[E].transformResults.length>0&&(_=_.add(p.batch.mutations[E].key));return _})(e)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function hE(s){const e=Ee(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function kC(s,e){const i=Ee(s),a=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];e.targetChanges.forEach(((S,b)=>{const R=l.get(b);if(!R)return;p.push(i.Pi.removeMatchingKeys(c,S.removedDocuments,b).next((()=>i.Pi.addMatchingKeys(c,S.addedDocuments,b))));let L=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?L=L.withResumeToken(Ft.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):S.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(S.resumeToken,a)),l=l.insert(b,L),(function(J,G,H){return J.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=OC?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(R,L,S)&&p.push(i.Pi.updateTargetData(c,L))}));let _=us(),E=De();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(c,S))})),p.push(LC(c,f,e.documentUpdates).next((S=>{_=S.ks,E=S.qs}))),!a.isEqual(ve.min())){const S=i.Pi.getLastRemoteSnapshotVersion(c).next((b=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));p.push(S)}return $.waitFor(p).next((()=>f.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,_,E))).next((()=>_))})).then((c=>(i.Ms=l,c)))}function LC(s,e,i){let a=De(),l=De();return i.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let f=us();return i.forEach(((p,_)=>{const E=c.get(p);_.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(p)),_.isNoDocument()&&_.version.isEqual(ve.min())?(e.removeEntry(p,_.readTime),f=f.insert(p,_)):!E.isValidDocument()||_.version.compareTo(E.version)>0||_.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(_),f=f.insert(p,_)):se(Zm,"Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",_.version)})),{ks:f,qs:l}}))}function PC(s,e){const i=Ee(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Um),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function UC(s,e){const i=Ee(s);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,e).next((c=>c?(l=c,$.resolve(l)):i.Pi.allocateTargetId(a).next((f=>(l=new Ws(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function mm(s,e,i){const a=Ee(s),l=a.Ms.get(e),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,(f=>a.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ho(f))throw f;se(Zm,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function $v(s,e,i){const a=Ee(s);let l=ve.min(),c=De();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(_,E,S){const b=Ee(_),R=b.xs.get(S);return R!==void 0?$.resolve(b.Ms.get(R)):b.Pi.getTargetData(E,S)})(a,f,Ri(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,p.targetId).next((_=>{c=_}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,e,i?l:ve.min(),i?c:De()))).next((p=>(zC(a,wR(e),p),{documents:p,Qs:c})))))}function zC(s,e,i){let a=s.Os.get(e)||ve.min();i.forEach(((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(e,a)}class Jv{constructor(){this.activeTargetIds=DR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BC{constructor(){this.Mo=new Jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jv,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qC{Oo(e){}shutdown(){}}const Zv="ConnectivityMonitor";class Wv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Zv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Zv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ou=null;function pm(){return Ou===null?Ou=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ou++,"0x"+Ou.toString(16)}const Gd="RestConnection",HC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===eh?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,i,a,l,c){const f=pm(),p=this.zo(e,i.toUriEncodedString());se(Gd,`Sending RPC '${e}' ${f}:`,p,a);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,l,c);const{host:E}=new URL(p),S=nr(E);return this.Jo(e,p,_,a,S).then((b=>(se(Gd,`Received RPC '${e}' ${f}: `,b),b)),(b=>{throw no(Gd,`RPC '${e}' ${f} failed with error: `,b,"url: ",p,"request:",a),b}))}Ho(e,i,a,l,c,f){return this.Go(e,i,a,l,c)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>e[c]=l)),a&&a.headers.forEach(((l,c)=>e[c]=l))}zo(e,i){const a=HC[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}class GC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Gt="WebChannelConnection";class QC extends FC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,l,c){const f=pm();return new Promise(((p,_)=>{const E=new p1;E.setWithCredentials(!0),E.listenOnce(g1.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Pu.NO_ERROR:const b=E.getResponseJson();se(Gt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(b)),p(b);break;case Pu.TIMEOUT:se(Gt,`RPC '${e}' ${f} timed out`),_(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const R=E.getStatus();if(se(Gt,`RPC '${e}' ${f} failed with status:`,R,"response text:",E.getResponseText()),R>0){let L=E.getResponseJson();Array.isArray(L)&&(L=L[0]);const q=L?.error;if(q&&q.status&&q.message){const J=(function(H){const ne=H.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ne)>=0?ne:Z.UNKNOWN})(q.status);_(new he(J,q.message))}else _(new he(Z.UNKNOWN,"Server responded with status "+E.getStatus()))}else _(new he(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{se(Gt,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(l);se(Gt,`RPC '${e}' ${f} sending request:`,l),E.send(i,"POST",S,a,15)}))}T_(e,i,a){const l=pm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=v1(),p=_1(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(_.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const S=c.join("");se(Gt,`Creating RPC '${e}' stream ${l}: ${S}`,_);const b=f.createWebChannel(S,_);this.I_(b);let R=!1,L=!1;const q=new GC({Yo:G=>{L?se(Gt,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(R||(se(Gt,`Opening RPC '${e}' stream ${l} transport.`),b.open(),R=!0),se(Gt,`RPC '${e}' stream ${l} sending:`,G),b.send(G))},Zo:()=>b.close()}),J=(G,H,ne)=>{G.listen(H,(W=>{try{ne(W)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return J(b,vl.EventType.OPEN,(()=>{L||(se(Gt,`RPC '${e}' stream ${l} transport opened.`),q.o_())})),J(b,vl.EventType.CLOSE,(()=>{L||(L=!0,se(Gt,`RPC '${e}' stream ${l} transport closed`),q.a_(),this.E_(b))})),J(b,vl.EventType.ERROR,(G=>{L||(L=!0,no(Gt,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),q.a_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),J(b,vl.EventType.MESSAGE,(G=>{if(!L){const H=G.data[0];ze(!!H,16349);const ne=H,W=ne?.error||ne[0]?.error;if(W){se(Gt,`RPC '${e}' stream ${l} received error:`,W);const ee=W.status;let fe=(function(w){const I=At[w];if(I!==void 0)return Z1(I)})(ee),ce=W.message;fe===void 0&&(fe=Z.INTERNAL,ce="Unknown error status: "+ee+" with message "+W.message),L=!0,q.a_(new he(fe,ce)),b.close()}else se(Gt,`RPC '${e}' stream ${l} received:`,H),q.u_(H)}})),J(p,y1.STAT_EVENT,(G=>{G.stat===im.PROXY?se(Gt,`RPC '${e}' stream ${l} detected buffering proxy`):G.stat===im.NOPROXY&&se(Gt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Qd(){return typeof document<"u"?document:null}function Ch(s){return new $R(s,!0)}class fE{constructor(e,i,a=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&se("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const e0="PersistentStream";class dE{constructor(e,i,a,l,c,f,p,_){this.Mi=e,this.S_=a,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fE(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===Z.RESOURCE_EXHAUSTED?(cs(i.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{e((()=>{const l=new he(Z.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(e0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(se(e0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KC extends dE{constructor(e,i,a,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,f),this.serializer=c}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=WR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?ve.min():f.readTime?Ni(f.readTime):ve.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=dm(this.serializer),i.addTarget=(function(c,f){let p;const _=f.target;if(p=lm(_)?{documents:nC(c,_)}:{query:iC(c,_).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=tE(c,f.resumeToken);const E=um(c,f.expectedCount);E!==null&&(p.expectedCount=E)}else if(f.snapshotVersion.compareTo(ve.min())>0){p.readTime=rh(c,f.snapshotVersion.toTimestamp());const E=um(c,f.expectedCount);E!==null&&(p.expectedCount=E)}return p})(this.serializer,e);const a=aC(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=dm(this.serializer),i.removeTarget=e,this.q_(i)}}class YC extends dE{constructor(e,i,a,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=tC(e.writeResults,e.commitTime),a=Ni(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=dm(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>eC(this.serializer,a)))};this.q_(i)}}class XC{}class $C extends XC{constructor(e,i,a,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,hm(i,a),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(Z.UNKNOWN,c.toString())}))}Ho(e,i,a,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,hm(i,a),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(Z.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class JC{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cs(i),this.aa=!1):se("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const er="RemoteStore";class ZC{constructor(e,i,a,l,c){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{ar(this)&&(se(er,"Restarting streams for network reachability change."),await(async function(_){const E=Ee(_);E.Ea.add(4),await Xl(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Nh(E)})(this))}))})),this.Ra=new JC(a,l)}}async function Nh(s){if(ar(s))for(const e of s.da)await e(!0)}async function Xl(s){for(const e of s.da)await e(!1)}function mE(s,e){const i=Ee(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),np(i)?tp(i):fo(i).O_()&&ep(i,e))}function Wm(s,e){const i=Ee(s),a=fo(i);i.Ia.delete(e),a.O_()&&pE(i,e),i.Ia.size===0&&(a.O_()?a.L_():ar(i)&&i.Ra.set("Unknown"))}function ep(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}fo(s).Y_(e)}function pE(s,e){s.Va.Ue(e),fo(s).Z_(e)}function tp(s){s.Va=new QR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),fo(s).start(),s.Ra.ua()}function np(s){return ar(s)&&!fo(s).x_()&&s.Ia.size>0}function ar(s){return Ee(s).Ea.size===0}function gE(s){s.Va=void 0}async function WC(s){s.Ra.set("Online")}async function eN(s){s.Ia.forEach(((e,i)=>{ep(s,e)}))}async function tN(s,e){gE(s),np(s)?(s.Ra.ha(e),tp(s)):s.Ra.set("Unknown")}async function nN(s,e,i){if(s.Ra.set("Online"),e instanceof eE&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(a){se(er,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await lh(s,a)}else if(e instanceof qu?s.Va.Ze(e):e instanceof W1?s.Va.st(e):s.Va.tt(e),!i.isEqual(ve.min()))try{const a=await hE(s.localStore);i.compareTo(a)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const S=c.Ia.get(E);S&&c.Ia.set(E,S.withResumeToken(_.resumeToken,f))}})),p.targetMismatches.forEach(((_,E)=>{const S=c.Ia.get(_);if(!S)return;c.Ia.set(_,S.withResumeToken(Ft.EMPTY_BYTE_STRING,S.snapshotVersion)),pE(c,_);const b=new Ws(S.target,_,E,S.sequenceNumber);ep(c,b)})),c.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(a){se(er,"Failed to raise snapshot:",a),await lh(s,a)}}async function lh(s,e,i){if(!ho(e))throw e;s.Ea.add(1),await Xl(s),s.Ra.set("Offline"),i||(i=()=>hE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{se(er,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await Nh(s)}))}function yE(s,e){return e().catch((i=>lh(s,i,e)))}async function Ih(s){const e=Ee(s),i=ca(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Um;for(;iN(e);)try{const l=await PC(e.localStore,a);if(l===null){e.Ta.length===0&&i.L_();break}a=l.batchId,sN(e,l)}catch(l){await lh(e,l)}_E(e)&&vE(e)}function iN(s){return ar(s)&&s.Ta.length<10}function sN(s,e){s.Ta.push(e);const i=ca(s);i.O_()&&i.X_&&i.ea(e.mutations)}function _E(s){return ar(s)&&!ca(s).x_()&&s.Ta.length>0}function vE(s){ca(s).start()}async function aN(s){ca(s).ra()}async function rN(s){const e=ca(s);for(const i of s.Ta)e.ea(i.mutations)}async function oN(s,e,i){const a=s.Ta.shift(),l=Qm.from(a,e,i);await yE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Ih(s)}async function lN(s,e){e&&ca(s).X_&&await(async function(a,l){if((function(f){return HR(f)&&f!==Z.ABORTED})(l.code)){const c=a.Ta.shift();ca(a).B_(),await yE(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Ih(a)}})(s,e),_E(s)&&vE(s)}async function t0(s,e){const i=Ee(s);i.asyncQueue.verifyOperationInProgress(),se(er,"RemoteStore received new credentials");const a=ar(i);i.Ea.add(3),await Xl(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Nh(i)}async function cN(s,e){const i=Ee(s);e?(i.Ea.delete(2),await Nh(i)):e||(i.Ea.add(2),await Xl(i),i.Ra.set("Unknown"))}function fo(s){return s.ma||(s.ma=(function(i,a,l){const c=Ee(i);return c.sa(),new KC(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:WC.bind(null,s),t_:eN.bind(null,s),r_:tN.bind(null,s),H_:nN.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),np(s)?tp(s):s.Ra.set("Unknown")):(await s.ma.stop(),gE(s))}))),s.ma}function ca(s){return s.fa||(s.fa=(function(i,a,l){const c=Ee(i);return c.sa(),new YC(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:aN.bind(null,s),r_:lN.bind(null,s),ta:rN.bind(null,s),na:oN.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ih(s)):(await s.fa.stop(),s.Ta.length>0&&(se(er,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ip{constructor(e,i,a,l,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,l,c){const f=Date.now()+a,p=new ip(e,i,f,l,c);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(s,e){if(cs("AsyncQueue",`${e}: ${s}`),ho(s))return new he(Z.UNAVAILABLE,`${e}: ${s}`);throw s}class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||pe.comparator(i.key,a.key):(i,a)=>pe.comparator(i.key,a.key),this.keyedMap=El(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new to;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}class n0{constructor(){this.ga=new st(pe.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class oo{constructor(e,i,a,l,c,f,p,_,E){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=E}static fromInitialDocuments(e,i,a,l,c){const f=[];return i.forEach((p=>{f.push({type:0,doc:p})})),new oo(e,i,to.emptySet(i),f,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}class uN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hN{constructor(){this.queries=i0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Ee(i),c=l.queries;l.queries=i0(),c.forEach(((f,p)=>{for(const _ of p.Sa)_.onError(a)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function i0(){return new sr((s=>U1(s)),Sh)}async function fN(s,e){const i=Ee(s);let a=3;const l=e.query;let c=i.queries.get(l);c?!c.ba()&&e.Da()&&(a=2):(c=new uN,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const p=sp(f,`Initialization of query '${Yr(e.query)}' failed`);return void e.onError(p)}i.queries.set(l,c),c.Sa.push(e),e.va(i.onlineState),c.wa&&e.Fa(c.wa)&&ap(i)}async function dN(s,e){const i=Ee(s),a=e.query;let l=3;const c=i.queries.get(a);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function mN(s,e){const i=Ee(s);let a=!1;for(const l of e){const c=l.query,f=i.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(a=!0);f.wa=l}}a&&ap(i)}function pN(s,e,i){const a=Ee(s),l=a.queries.get(e);if(l)for(const c of l.Sa)c.onError(i);a.queries.delete(e)}function ap(s){s.Ca.forEach((e=>{e.next()}))}var gm,s0;(s0=gm||(gm={})).Ma="default",s0.Cache="cache";class gN{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new oo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gm.Cache}}class EE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class yN{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=z1(e),this.tu=new to(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new n0,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,f=l,p=!1;const _=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((S,b)=>{const R=l.get(S),L=Ah(this.query,b)?b:null,q=!!R&&this.mutatedKeys.has(R.key),J=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let G=!1;R&&L?R.data.isEqual(L.data)?q!==J&&(a.track({type:3,doc:L}),G=!0):this.su(R,L)||(a.track({type:2,doc:L}),G=!0,(_&&this.eu(L,_)>0||E&&this.eu(L,E)<0)&&(p=!0)):!R&&L?(a.track({type:0,doc:L}),G=!0):R&&!L&&(a.track({type:1,doc:R}),G=!0,(_||E)&&(p=!0)),G&&(L?(f=f.add(L),c=J?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),a.track({type:1,doc:S})}return{tu:f,iu:a,Cs:p,mutatedKeys:c}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,b)=>(function(L,q){const J=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:G})}};return J(L)-J(q)})(S.type,b.type)||this.eu(S.doc,b.doc))),this.ou(a),l=l??!1;const p=i&&!l?this._u():[],_=this.Xa.size===0&&this.current&&!l?1:0,E=_!==this.Za;return this.Za=_,f.length!==0||E?{snapshot:new oo(this.query,e.tu,c,f,e.mutatedKeys,_===0,E,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new TE(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new EE(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=De();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rp="SyncEngine";class _N{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class vN{constructor(e){this.key=e,this.hu=!1}}class EN{constructor(e,i,a,l,c,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new sr((p=>U1(p)),Sh),this.Iu=new Map,this.Eu=new Set,this.du=new st(pe.comparator),this.Au=new Map,this.Ru=new Xm,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TN(s,e,i=!0){const a=CE(s);let l;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await SE(a,e,i,!0),l}async function SN(s,e){const i=CE(s);await SE(i,e,!0,!1)}async function SE(s,e,i,a){const l=await UC(s.localStore,Ri(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,i);let p;return a&&(p=await AN(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&mE(s.remoteStore,l),p}async function AN(s,e,i,a,l){s.pu=(b,R,L)=>(async function(J,G,H,ne){let W=G.view.ru(H);W.Cs&&(W=await $v(J.localStore,G.query,!1).then((({documents:x})=>G.view.ru(x,W))));const ee=ne&&ne.targetChanges.get(G.targetId),fe=ne&&ne.targetMismatches.get(G.targetId)!=null,ce=G.view.applyChanges(W,J.isPrimaryClient,ee,fe);return r0(J,G.targetId,ce.au),ce.snapshot})(s,b,R,L);const c=await $v(s.localStore,e,!0),f=new yN(e,c.Qs),p=f.ru(c.documents),_=Yl.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",l),E=f.applyChanges(p,s.isPrimaryClient,_);r0(s,i,E.au);const S=new _N(e,i,f);return s.Tu.set(e,S),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),E.snapshot}async function bN(s,e,i){const a=Ee(s),l=a.Tu.get(e),c=a.Iu.get(l.targetId);if(c.length>1)return a.Iu.set(l.targetId,c.filter((f=>!Sh(f,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await mm(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&Wm(a.remoteStore,l.targetId),ym(a,l.targetId)})).catch(uo)):(ym(a,l.targetId),await mm(a.localStore,l.targetId,!0))}async function wN(s,e){const i=Ee(s),a=i.Tu.get(e),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Wm(i.remoteStore,a.targetId))}async function RN(s,e,i){const a=MN(s);try{const l=await(function(f,p){const _=Ee(f),E=et.now(),S=p.reduce(((L,q)=>L.add(q.key)),De());let b,R;return _.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let q=us(),J=De();return _.Ns.getEntries(L,S).next((G=>{q=G,q.forEach(((H,ne)=>{ne.isValidDocument()||(J=J.add(H))}))})).next((()=>_.localDocuments.getOverlayedDocuments(L,q))).next((G=>{b=G;const H=[];for(const ne of p){const W=PR(ne,b.get(ne.key).overlayedDocument);W!=null&&H.push(new da(ne.key,W,O1(W.value.mapValue),Ci.exists(!0)))}return _.mutationQueue.addMutationBatch(L,E,H,p)})).next((G=>{R=G;const H=G.applyToLocalDocumentSet(b,J);return _.documentOverlayCache.saveOverlays(L,G.batchId,H)}))})).then((()=>({batchId:R.batchId,changes:q1(b)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(f,p,_){let E=f.Vu[f.currentUser.toKey()];E||(E=new st(xe)),E=E.insert(p,_),f.Vu[f.currentUser.toKey()]=E})(a,l.batchId,i),await $l(a,l.changes),await Ih(a.remoteStore)}catch(l){const c=sp(l,"Failed to persist write");i.reject(c)}}async function AE(s,e){const i=Ee(s);try{const a=await kC(i.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=i.Au.get(c);f&&(ze(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ze(f.hu,14607):l.removedDocuments.size>0&&(ze(f.hu,42227),f.hu=!1))})),await $l(i,a,e)}catch(a){await uo(a)}}function a0(s,e,i){const a=Ee(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const _=Ee(f);_.onlineState=p;let E=!1;_.queries.forEach(((S,b)=>{for(const R of b.Sa)R.va(p)&&(E=!0)})),E&&ap(_)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function CN(s,e,i){const a=Ee(s);a.sharedClientState.updateQueryState(e,"rejected",i);const l=a.Au.get(e),c=l&&l.key;if(c){let f=new st(pe.comparator);f=f.insert(c,Kt.newNoDocument(c,ve.min()));const p=De().add(c),_=new Rh(ve.min(),new Map,new st(xe),f,p);await AE(a,_),a.du=a.du.remove(c),a.Au.delete(e),op(a)}else await mm(a.localStore,e,!1).then((()=>ym(a,e,i))).catch(uo)}async function NN(s,e){const i=Ee(s),a=e.batch.batchId;try{const l=await VC(i.localStore,e);wE(i,a,null),bE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await $l(i,l)}catch(l){await uo(l)}}async function IN(s,e,i){const a=Ee(s);try{const l=await(function(f,p){const _=Ee(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let S;return _.mutationQueue.lookupMutationBatch(E,p).next((b=>(ze(b!==null,37113),S=b.keys(),_.mutationQueue.removeMutationBatch(E,b)))).next((()=>_.mutationQueue.performConsistencyCheck(E))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(E,S,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,S))).next((()=>_.localDocuments.getDocuments(E,S)))}))})(a.localStore,e);wE(a,e,i),bE(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await $l(a,l)}catch(l){await uo(l)}}function bE(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function wE(s,e,i){const a=Ee(s);let l=a.Vu[a.currentUser.toKey()];if(l){const c=l.get(e);c&&(i?c.reject(i):c.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function ym(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),i&&s.Pu.yu(a,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||RE(s,a)}))}function RE(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(Wm(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),op(s))}function r0(s,e,i){for(const a of i)a instanceof EE?(s.Ru.addReference(a.key,e),xN(s,a)):a instanceof TE?(se(rp,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||RE(s,a.key)):_e(19791,{wu:a})}function xN(s,e){const i=e.key,a=i.path.canonicalString();s.du.get(i)||s.Eu.has(a)||(se(rp,"New document in limbo: "+i),s.Eu.add(a),op(s))}function op(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new pe(it.fromString(e)),a=s.fu.next();s.Au.set(a,new vN(i)),s.du=s.du.insert(i,a),mE(s.remoteStore,new Ws(Ri(Fm(i.path)),a,"TargetPurposeLimboResolution",_h.ce))}}async function $l(s,e,i){const a=Ee(s),l=[],c=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,_)=>{f.push(a.pu(_,e,i).then((E=>{if((E||i)&&a.isPrimaryClient){const S=E?!E.fromCache:i?.targetChanges.get(_.targetId)?.current;a.sharedClientState.updateQueryState(_.targetId,S?"current":"not-current")}if(E){l.push(E);const S=Jm.As(_.targetId,E);c.push(S)}})))})),await Promise.all(f),a.Pu.H_(l),await(async function(_,E){const S=Ee(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>$.forEach(E,(R=>$.forEach(R.Es,(L=>S.persistence.referenceDelegate.addReference(b,R.targetId,L))).next((()=>$.forEach(R.ds,(L=>S.persistence.referenceDelegate.removeReference(b,R.targetId,L)))))))))}catch(b){if(!ho(b))throw b;se(Zm,"Failed to update sequence numbers: "+b)}for(const b of E){const R=b.targetId;if(!b.fromCache){const L=S.Ms.get(R),q=L.snapshotVersion,J=L.withLastLimboFreeSnapshotVersion(q);S.Ms=S.Ms.insert(R,J)}}})(a.localStore,c))}async function DN(s,e){const i=Ee(s);if(!i.currentUser.isEqual(e)){se(rp,"User change. New user:",e.toKey());const a=await uE(i.localStore,e);i.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((_=>{_.reject(new he(Z.CANCELLED,f))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await $l(i,a.Ls)}}function ON(s,e){const i=Ee(s),a=i.Au.get(e);if(a&&a.hu)return De().add(a.key);{let l=De();const c=i.Iu.get(e);if(!c)return l;for(const f of c){const p=i.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function CE(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CN.bind(null,e),e.Pu.H_=mN.bind(null,e.eventManager),e.Pu.yu=pN.bind(null,e.eventManager),e}function MN(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,e),e}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return jC(this.persistence,new DC,e.initialUser,this.serializer)}Cu(e){return new cE($m.mi,this.serializer)}Du(e){return new BC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class jN extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){ze(this.persistence.referenceDelegate instanceof oh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new gC(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new cE((a=>oh.mi(a,i)),this.serializer)}}class _m{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>a0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=DN.bind(null,this.syncEngine),await cN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hN})()}createDatastore(e){const i=Ch(e.databaseInfo.databaseId),a=(function(c){return new QC(c)})(e.databaseInfo);return(function(c,f,p,_){return new $C(c,f,p,_)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,l,c,f,p){return new ZC(a,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>a0(this.syncEngine,i,0)),(function(){return Wv.v()?new Wv:new qC})())}createSyncEngine(e,i){return(function(l,c,f,p,_,E,S){const b=new EN(l,c,f,p,_,E);return S&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const a=Ee(i);se(er,"RemoteStore shutting down."),a.Ea.add(5),await Xl(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_m.provider={build:()=>new _m};class VN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}const ua="FirestoreClient";class kN{constructor(e,i,a,l,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=Qt.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async f=>{se(ua,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(se(ua,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=sp(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Kd(s,e){s.asyncQueue.verifyOperationInProgress(),se(ua,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await uE(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function o0(s,e){s.asyncQueue.verifyOperationInProgress();const i=await LN(s);se(ua,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((a=>t0(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>t0(e.remoteStore,l))),s._onlineComponents=e}async function LN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){se(ua,"Using user provided OfflineComponentProvider");try{await Kd(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;no("Error using user provided cache. Falling back to memory cache: "+i),await Kd(s,new ch)}}else se(ua,"Using default OfflineComponentProvider"),await Kd(s,new jN(void 0));return s._offlineComponents}async function NE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(se(ua,"Using user provided OnlineComponentProvider"),await o0(s,s._uninitializedComponentsProvider._online)):(se(ua,"Using default OnlineComponentProvider"),await o0(s,new _m))),s._onlineComponents}function PN(s){return NE(s).then((e=>e.syncEngine))}async function UN(s){const e=await NE(s),i=e.eventManager;return i.onListen=TN.bind(null,e.syncEngine),i.onUnlisten=bN.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=SN.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wN.bind(null,e.syncEngine),i}function zN(s,e,i={}){const a=new ia;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,_,E){const S=new VN({next:R=>{S.Nu(),f.enqueueAndForget((()=>dN(c,b)));const L=R.docs.has(p);!L&&R.fromCache?E.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&_&&_.source==="server"?E.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),b=new gN(Fm(p.path),S,{includeMetadataChanges:!0,qa:!0});return fN(c,b)})(await UN(s),s.asyncQueue,e,i,a))),a.promise}function IE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const l0=new Map;const xE="firestore.googleapis.com",c0=!0;class u0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xE,this.ssl=c0}else this.host=e.host,this.ssl=e.ssl??c0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mC)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IE(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,i,a,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new zw;switch(a.type){case"firstParty":return new Fw(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=l0.get(i);a&&(se("ComponentProvider","Removing Datastore"),l0.delete(i),a.terminate())})(this),Promise.resolve()}}function BN(s,e,i,a={}){s=Wa(s,lp);const l=nr(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${i}`;l&&(Am(`https://${p}`),bm("Firestore",!0)),c.host!==xE&&c.host!==p&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...c,host:p,ssl:l,emulatorOptions:a};if(!Ya(_,f)&&(s._setSettings(_),a.mockUserToken)){let E,S;if(typeof a.mockUserToken=="string")E=a.mockUserToken,S=Qt.MOCK_USER;else{E=R0(a.mockUserToken,s._app?.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Qt(b)}s._authCredentials=new Bw(new T1(E,S))}}class cp{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new cp(this.firestore,e,this._query)}}class Nt{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(Ql(i,Nt._jsonSchema))return new Nt(e,a||null,new pe(it.fromString(i.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:bt("string",Nt._jsonSchemaVersion),referencePath:bt("string")};class Ul extends cp{constructor(e,i,a){super(e,i,Fm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new pe(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function up(s,e,...i){if(s=Vt(s),arguments.length===1&&(e=Lm.newId()),$w("doc","path",e),s instanceof lp){const a=it.fromString(e,...i);return bv(a),new Nt(s,null,new pe(a))}{if(!(s instanceof Nt||s instanceof Ul))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(it.fromString(e,...i));return bv(a),new Nt(s.firestore,s instanceof Ul?s.converter:null,new pe(a))}}const h0="AsyncQueue";class f0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fE(this,"async_queue_retry"),this._c=()=>{const a=Qd();a&&se(h0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=Qd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Qd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;se(h0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",d0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=ip.createAndSchedule(this,e,i,a,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:d0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function d0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class xh extends lp{constructor(e,i,a,l){super(e,i,a,l),this.type="firestore",this._queue=new f0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f0(e),this._firestoreClient=void 0,await e}}}function qN(s,e){const i=typeof s=="object"?s:Cm(),a=typeof s=="string"?s:eh,l=mh(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=A0("firestore");c&&BN(l,...c)}return l}function DE(s){if(s._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||HN(s),s._firestoreClient}function HN(s){const e=s._freezeSettings(),i=(function(l,c,f,p){return new lR(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,IE(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new kN(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Ft.fromBase64String(e))}catch(i){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Ln(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ql(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:bt("string",Ln._jsonSchemaVersion),bytes:bt("string")};class Dh{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hp{constructor(e){this._methodName=e}}class Ii{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(e){if(Ql(e,Ii._jsonSchema))return new Ii(e.latitude,e.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:bt("string",Ii._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};class xi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ql(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new xi(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:bt("string",xi._jsonSchemaVersion),vectorValues:bt("object")};const FN=/^__.*__$/;class GN{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,i,this.fieldTransforms):new Kl(e,this.data,i,this.fieldTransforms)}}class OE{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new da(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function ME(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:s})}}class fp{constructor(e,i,a,l,c,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){const i=this.path?.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ME(this.Ac)&&FN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QN{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Ch(e)}Cc(e,i,a,l=!1){return new fp({Ac:e,methodName:i,Dc:a,path:Ht.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jE(s){const e=s._freezeSettings(),i=Ch(s._databaseId);return new QN(s._databaseId,!!e.ignoreUndefinedProperties,i)}function KN(s,e,i,a,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,i,l);dp("Data must be an object, but it was:",f,a);const p=VE(a,f);let _,E;if(c.merge)_=new An(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const b of c.mergeFields){const R=vm(e,b,i);if(!f.contains(R))throw new he(Z.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);LE(S,R)||S.push(R)}_=new An(S),E=f.fieldTransforms.filter((b=>_.covers(b.field)))}else _=null,E=f.fieldTransforms;return new GN(new ln(p),_,E)}class Oh extends hp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}function YN(s,e,i,a){const l=s.Cc(1,e,i);dp("Data must be an object, but it was:",l,a);const c=[],f=ln.empty();fa(a,((_,E)=>{const S=mp(e,_,i);E=Vt(E);const b=l.yc(S);if(E instanceof Oh)c.push(S);else{const R=Mh(E,b);R!=null&&(c.push(S),f.set(S,R))}}));const p=new An(c);return new OE(f,p,l.fieldTransforms)}function XN(s,e,i,a,l,c){const f=s.Cc(1,e,i),p=[vm(e,a,i)],_=[l];if(c.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(vm(e,c[R])),_.push(c[R+1]);const E=[],S=ln.empty();for(let R=p.length-1;R>=0;--R)if(!LE(E,p[R])){const L=p[R];let q=_[R];q=Vt(q);const J=f.yc(L);if(q instanceof Oh)E.push(L);else{const G=Mh(q,J);G!=null&&(E.push(L),S.set(L,G))}}const b=new An(E);return new OE(S,b,f.fieldTransforms)}function Mh(s,e){if(kE(s=Vt(s)))return dp("Unsupported field value:",e,s),VE(s,e);if(s instanceof hp)return(function(a,l){if(!ME(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const c=[];let f=0;for(const p of a){let _=Mh(p,l.wc(f));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),f++}return{arrayValue:{values:c}}})(s,e)}return(function(a,l){if((a=Vt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return OR(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=et.fromDate(a);return{timestampValue:rh(l.serializer,c)}}if(a instanceof et){const c=new et(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:rh(l.serializer,c)}}if(a instanceof Ii)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ln)return{bytesValue:tE(l.serializer,a._byteString)};if(a instanceof Nt){const c=l.databaseId,f=a.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ym(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof xi)return(function(f,p){return{mapValue:{fields:{[x1]:{stringValue:D1},[th]:{arrayValue:{values:f.toArray().map((E=>{if(typeof E!="number")throw p.Sc("VectorValues must only contain numeric values.");return Gm(p.serializer,E)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Pm(a)}`)})(s,e)}function VE(s,e){const i={};return b1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(s,((a,l)=>{const c=Mh(l,e.mc(a));c!=null&&(i[a]=c)})),{mapValue:{fields:i}}}function kE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof et||s instanceof Ii||s instanceof Ln||s instanceof Nt||s instanceof hp||s instanceof xi)}function dp(s,e,i){if(!kE(i)||!S1(i)){const a=Pm(i);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function vm(s,e,i){if((e=Vt(e))instanceof Dh)return e._internalPath;if(typeof e=="string")return mp(s,e);throw uh("Field path arguments must be of type string or ",s,!1,void 0,i)}const $N=new RegExp("[~\\*/\\[\\]]");function mp(s,e,i){if(e.search($N)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Dh(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function uh(s,e,i,a,l){const c=a&&!a.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(c||f)&&(_+=" (found",c&&(_+=` in field ${a}`),f&&(_+=` in document ${l}`),_+=")"),new he(Z.INVALID_ARGUMENT,p+s+_)}function LE(s,e){return s.some((i=>i.isEqual(e)))}class PE{constructor(e,i,a,l,c){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(UE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class JN extends PE{data(){return super.data()}}function UE(s,e){return typeof e=="string"?mp(s,e):e instanceof Dh?e._internalPath:e._delegate._internalPath}class ZN{convertValue(e,i="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return fa(e,((l,c)=>{a[l]=this.convertValue(c,i)})),a}convertVectorValue(e){const i=e.fields?.[th].arrayValue?.values?.map((a=>mt(a.doubleValue)));return new xi(i)}convertGeoPoint(e){return new Ii(mt(e.latitude),mt(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Eh(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const i=ra(e);return new et(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=it.fromString(e);ze(oE(a),9688,{name:e});const l=new Vl(a.get(1),a.get(3)),c=new pe(a.popFirst(5));return l.isEqual(i)||cs(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}function WN(s,e,i){let a;return a=s?s.toFirestore(e):e,a}class Sl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ka extends PE{constructor(e,i,a,l,c,f){super(e,i,a,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(UE("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Ka._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ka._jsonSchema={type:bt("string",Ka._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Hu extends Ka{data(e={}){return super.data(e)}}class Il{constructor(e,i,a,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Sl(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new Hu(this._firestore,this._userDataWriter,a.key,a,new Sl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const _=new Hu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const _=new Hu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,S=-1;return p.type!==0&&(E=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),S=f.indexOf(p.doc.key)),{type:eI(p.type),doc:_,oldIndex:E,newIndex:S}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}function tI(s){s=Wa(s,Nt);const e=Wa(s.firestore,xh);return zN(DE(e),s._key).then((i=>aI(e,s,i)))}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:bt("string",Il._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class nI extends ZN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,i)}}function iI(s,e,i){s=Wa(s,Nt);const a=Wa(s.firestore,xh),l=WN(s.converter,e);return zE(a,[KN(jE(a),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Ci.none())])}function sI(s,e,i,...a){s=Wa(s,Nt);const l=Wa(s.firestore,xh),c=jE(l);let f;return f=typeof(e=Vt(e))=="string"||e instanceof Dh?XN(c,"updateDoc",s._key,e,i,a):YN(c,"updateDoc",s._key,e),zE(l,[f.toMutation(s._key,Ci.exists(!0))])}function zE(s,e){return(function(a,l){const c=new ia;return a.asyncQueue.enqueueAndForget((async()=>RN(await PN(a),l,c))),c.promise})(DE(s),e)}function aI(s,e,i){const a=i.docs.get(e._key),l=new nI(s);return new Ka(s,l,e._key,a,new Sl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(l){co=l})(ir),Xa(new sa("firestore",((a,{instanceIdentifier:l,options:c})=>{const f=a.getProvider("app").getImmediate(),p=new xh(new qw(a.getProvider("auth-internal")),new Gw(f,a.getProvider("app-check-internal")),(function(E,S){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(E.options.projectId,S)})(f,l),f);return c={useFetchStreams:i,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ai(Ev,Tv,e),Ai(Ev,Tv,"esm2020")})();var rI="firebase",oI="12.6.0";Ai(rI,oI,"app");const BE="firebasestorage.googleapis.com",lI="storageBucket",cI=120*1e3,uI=600*1e3;class Vi extends ji{constructor(e,i,a=0){super(Yd(e),`Firebase Storage: ${i} (${Yd(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mi;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mi||(Mi={}));function Yd(s){return"storage/"+s}function hI(){const s="An unknown error occurred, please check the error payload for server response.";return new Vi(Mi.UNKNOWN,s)}function fI(){return new Vi(Mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dI(){return new Vi(Mi.CANCELED,"User canceled the upload/download.")}function mI(s){return new Vi(Mi.INVALID_URL,"Invalid URL '"+s+"'.")}function pI(s){return new Vi(Mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function m0(s){return new Vi(Mi.INVALID_ARGUMENT,s)}function qE(){return new Vi(Mi.APP_DELETED,"The Firebase app was deleted.")}function gI(s){return new Vi(Mi.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Jn{constructor(e,i){this.bucket=e,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,i){let a;try{a=Jn.makeFromUrl(e,i)}catch{return new Jn(e,"")}if(a.path==="")return a;throw pI(e)}static makeFromUrl(e,i){let a=null;const l="([A-Za-z0-9.\\-_]+)";function c(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+l+f,"i"),_={bucket:1,path:3};function E(ee){ee.path_=decodeURIComponent(ee.path)}const S="v[A-Za-z0-9_]+",b=i.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",L=new RegExp(`^https?://${b}/${S}/b/${l}/o${R}`,"i"),q={bucket:1,path:3},J=i===BE?"(?:storage.googleapis.com|storage.cloud.google.com)":i,G="([^?#]*)",H=new RegExp(`^https?://${J}/${l}/${G}`,"i"),W=[{regex:p,indices:_,postModify:c},{regex:L,indices:q,postModify:E},{regex:H,indices:{bucket:1,path:2},postModify:E}];for(let ee=0;ee<W.length;ee++){const fe=W[ee],ce=fe.regex.exec(e);if(ce){const x=ce[fe.indices.bucket];let w=ce[fe.indices.path];w||(w=""),a=new Jn(x,w),fe.postModify(a);break}}if(a==null)throw mI(e);return a}}class yI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _I(s,e,i){let a=1,l=null,c=null,f=!1,p=0;function _(){return p===2}let E=!1;function S(...G){E||(E=!0,e.apply(null,G))}function b(G){l=setTimeout(()=>{l=null,s(L,_())},G)}function R(){c&&clearTimeout(c)}function L(G,...H){if(E){R();return}if(G){R(),S.call(null,G,...H);return}if(_()||f){R(),S.call(null,G,...H);return}a<64&&(a*=2);let W;p===1?(p=2,W=0):W=(a+Math.random())*1e3,b(W)}let q=!1;function J(G){q||(q=!0,R(),!E&&(l!==null?(G||(p=2),clearTimeout(l),b(0)):G||(p=1)))}return b(0),c=setTimeout(()=>{f=!0,J(!0)},i),J}function vI(s){s(!1)}function EI(s){return s!==void 0}function p0(s,e,i,a){if(a<e)throw m0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>i)throw m0(`Invalid value for '${s}'. Expected ${i} or less.`)}function TI(s){const e=encodeURIComponent;let i="?";for(const a in s)if(s.hasOwnProperty(a)){const l=e(a)+"="+e(s[a]);i=i+l+"&"}return i=i.slice(0,-1),i}var hh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(hh||(hh={}));function SI(s,e){const i=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return i||l||c}class AI{constructor(e,i,a,l,c,f,p,_,E,S,b,R=!0,L=!1){this.url_=e,this.method_=i,this.headers_=a,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=S,this.connectionFactory_=b,this.retry=R,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,J)=>{this.resolve_=q,this.reject_=J,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new Mu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=p=>{const _=p.loaded,E=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(_,E)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const p=c.getErrorCode()===hh.NO_ERROR,_=c.getStatus();if(!p||SI(_,this.additionalRetryCodes_)&&this.retry){const S=c.getErrorCode()===hh.ABORT;a(!1,new Mu(!1,null,S));return}const E=this.successCodes_.indexOf(_)!==-1;a(!0,new Mu(E,c))})},i=(a,l)=>{const c=this.resolve_,f=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());EI(_)?c(_):c()}catch(_){f(_)}else if(p!==null){const _=hI();_.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,_)):f(_)}else if(l.canceled){const _=this.appDelete_?qE():dI();f(_)}else{const _=fI();f(_)}};this.canceled_?i(!1,new Mu(!1,null,!0)):this.backoffId_=_I(e,i,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mu{constructor(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a}}function bI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function wI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function CI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function NI(s,e,i,a,l,c,f=!0,p=!1){const _=TI(s.urlParams),E=s.url+_,S=Object.assign({},s.headers);return RI(S,e),bI(S,i),wI(S,c),CI(S,a),new AI(E,s.method,S,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,f,p)}function II(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function xI(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}class fh{constructor(e,i){this._service=e,i instanceof Jn?this._location=i:this._location=Jn.makeFromUrl(i,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,i){return new fh(e,i)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xI(this._location.path)}get storage(){return this._service}get parent(){const e=II(this._location.path);if(e===null)return null;const i=new Jn(this._location.bucket,e);return new fh(this._service,i)}_throwIfRoot(e){if(this._location.path==="")throw gI(e)}}function g0(s,e){const i=e?.[lI];return i==null?null:Jn.makeFromBucketSpec(i,s)}function DI(s,e,i,a={}){s.host=`${e}:${i}`;const l=nr(e);l&&(Am(`https://${s.host}/b`),bm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:c}=a;c&&(s._overrideAuthToken=typeof c=="string"?c:R0(c,s.app.options.projectId))}class OI{constructor(e,i,a,l,c,f=!1){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=BE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cI,this._maxUploadRetryTime=uI,this._requests=new Set,l!=null?this._bucket=Jn.makeFromBucketSpec(l,this._host):this._bucket=g0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=g0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const i=await e.getToken();if(i!==null)return i.accessToken}return null}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fh(this,e)}_makeRequest(e,i,a,l,c=!0){if(this._deleted)return new yI(qE());{const f=NI(e,this._appId,a,l,i,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,i){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,i,a,l).getPromise()}}const y0="@firebase/storage",_0="0.14.0";const HE="storage";function MI(s=Cm(),e){s=Vt(s);const a=mh(s,HE).getImmediate({identifier:e}),l=A0("storage");return l&&jI(a,...l),a}function jI(s,e,i,a={}){DI(s,e,i,a)}function VI(s,{instanceIdentifier:e}){const i=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new OI(i,a,l,e,ir)}function kI(){Xa(new sa(HE,VI,"PUBLIC").setMultipleInstances(!0)),Ai(y0,_0,""),Ai(y0,_0,"esm2020")}kI();const LI={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},pp=I0(LI),tr=Pw(pp),gp=qN(pp);MI(pp);const FE=async(s,e,i={})=>{try{const l=(await Sb(tr,s,e)).user;return await iI(up(gp,"users",l.uid),{email:s,nombres:i.nombres||"",apellidos:i.apellidos||"",fechaNacimiento:i.fechaNacimiento||null,dui:i.dui||"",genero:i.genero||"",direccion:i.direccion||"",telefono:i.telefono||"",emergenciaNombre:i.emergenciaNombre||"",emergenciaTelefono:i.emergenciaTelefono||"",emergenciaParentesco:i.emergenciaParentesco||"",tipoPaciente:i.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",l.email),await bb(l),console.log("Email verification sent successfully"),{user:l,error:null}}catch(a){return console.error("Sign up error:",a),{user:null,error:a}}},GE=async(s,e)=>{try{const i=await Ab(tr,s,e);return i.user.emailVerified?{user:i.user,error:null}:(await i1(tr),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(i){return console.error("Sign in error:",i),{user:null,error:i}}},QE=async()=>{try{return await i1(tr),{error:null}}catch(s){return console.error("Sign out error:",s),{error:s}}},KE=async s=>{try{return await Tb(tr,s),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},Em=async s=>{try{const e=up(gp,"users",s),i=await tI(e);return i.exists()?{profile:i.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},YE=async(s,e)=>{try{const i=up(gp,"users",s);return await sI(i,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(i){return console.error("Update user profile error:",i),{error:i}}},XE=s=>Cb(tr,s),$E=async(s,e)=>{try{const i=await new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(e)});return await YE(s,{photoURL:i}),{photoURL:i,error:null}}catch(i){return console.error("Upload profile photo error:",i),{photoURL:null,error:i}}},PI=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Em,onAuthChange:XE,resetPassword:KE,signIn:GE,signOut:QE,signUp:FE,updateUserProfile:YE,uploadProfilePhoto:$E},Symbol.toStringTag,{value:"Module"}));function UI({onLogout:s,userData:e,userType:i}){const[a,l]=ue.useState(!1),[c,f]=ue.useState(!1),p=ue.useRef(null),_=ue.useRef(null),E=e&&(e.nombres||e.nombre)||"Usuario",S=i==="admin"||i==="doctor";return ue.useEffect(()=>{const b=R=>{p.current&&!p.current.contains(R.target)&&f(!1)};return c&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[c]),ue.useEffect(()=>{const b=R=>{_.current&&!_.current.contains(R.target)&&l(!1)};return a&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[a]),m.jsx("header",{className:"header",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"header-content",children:[m.jsx(Si,{to:S?"/staff/dashboard":"/",className:"logo",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),m.jsxs("div",{className:"header-actions",children:[m.jsxs("div",{ref:_,children:[m.jsx("button",{className:"mobile-menu-btn",onClick:()=>l(!a),"aria-label":"Men",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),m.jsxs("nav",{className:`nav-menu ${a?"active":""}`,children:[!S&&m.jsxs(m.Fragment,{children:[m.jsx(Si,{to:"/",className:"nav-button",onClick:()=>l(!1),children:"Inicio"}),m.jsx(Si,{to:"/cita",className:"nav-button",onClick:()=>l(!1),children:"Cita"}),m.jsx(Si,{to:"/contacto",className:"nav-button",onClick:()=>l(!1),children:"Contacto"})]}),S&&m.jsx(Si,{to:"/staff/dashboard",className:"nav-button",onClick:()=>l(!1),children:"Dashboard"})]})]}),m.jsxs("div",{className:"profile-container",ref:p,children:[m.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>f(!c),children:[e?.photoURL?m.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("span",{className:"user-name",children:E})]}),c&&m.jsxs("div",{className:"profile-dropdown",children:[!S&&m.jsx(Si,{to:"/perfil",className:"dropdown-item",onClick:()=>f(!1),children:"Perfil"}),m.jsx("button",{className:"dropdown-item logout",onClick:s,children:"Cerrar sesin"})]})]})]})]})})})}function zI(){return m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),m.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Contacto Principal"}),m.jsxs("div",{className:"contact-info",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),m.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),m.jsx("polyline",{points:"22,6 12,13 2,6"})]}),m.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),m.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),m.jsxs("div",{className:"social-links",children:[m.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),m.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),m.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),m.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),m.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Horarios"}),m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Lunes - Sbado"}),m.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day"}),m.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Domingo"}),m.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const JE=({isOpen:s,onClose:e,onConfirm:i,title:a,message:l})=>s?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:a}),m.jsx("p",{className:"modal-message",children:l}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:i,children:"S, cancelar cita"})]})]})}):null;function BI(){const s=Tm(),[e,i]=ue.useState([]),[a,l]=ue.useState(!1),[c,f]=ue.useState(null),[p,_]=ue.useState(null);ue.useEffect(()=>{const q=localStorage.getItem("userData");q&&_(JSON.parse(q));const G=JSON.parse(localStorage.getItem("appointments")||"[]").sort((H,ne)=>{const W=new Date(`${H.date} ${H.time}`),ee=new Date(`${ne.date} ${ne.time}`);return W-ee});i(G)},[]);const E=q=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[q]||q,S=q=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[q]||q,b=q=>{f(q),l(!0)},R=()=>{if(!c)return;const J=JSON.parse(localStorage.getItem("appointments")||"[]").map(H=>H.id===c?{...H,status:"cancelada"}:H);localStorage.setItem("appointments",JSON.stringify(J));const G=J.sort((H,ne)=>{const W=new Date(`${H.date} ${H.time}`),ee=new Date(`${ne.date} ${ne.time}`);return W-ee});i(G),l(!1),f(null)},L=q=>{s("/cita",{state:{editingAppointment:q}})};return m.jsxs("div",{className:"home-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("section",{className:"my-appointments-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx("h2",{className:"section-title",children:"Mis Citas"}),e.length>3&&m.jsxs(Si,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),e.length>0?m.jsx(m.Fragment,{children:m.jsx("div",{className:"appointments-grid",children:e.slice(0,3).map(q=>m.jsxs("div",{className:"appointment-card",children:[m.jsxs("div",{className:"appointment-header",children:[m.jsx("div",{className:"appointment-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("span",{className:`appointment-status status-${q.status}`,children:E(q.status)})]}),m.jsxs("div",{className:"appointment-details",children:[m.jsxs("h3",{children:["Paciente: ",p?`${p.nombres} ${p.apellidos}`.trim():"Usuario"]}),m.jsxs("div",{className:"appointment-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:q.date})]}),m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m.jsx("span",{children:q.time})]})]}),q.reason&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Motivo:"})," ",q.reason]}),q.clinica&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Clnica:"})," ",S(q.clinica)]})]}),q.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>L(q),title:"Editar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>b(q.id),title:"Cancelar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},q.id))})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx(Si,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),m.jsxs("section",{className:"medical-history-section",children:[m.jsx("h2",{className:"section-title",children:"Historial Clnico"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tu Historial Mdico"}),m.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),m.jsxs("section",{className:"prescriptions-section",children:[m.jsx("h2",{className:"section-title",children:"Recetas"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),m.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tus Recetas Mdicas"}),m.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),m.jsx(JE,{isOpen:a,onClose:()=>{l(!1),f(null)},onConfirm:R,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function qI(){const s=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return m.jsx("div",{className:"contact-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"contact-header",children:[m.jsx("h1",{children:"Nuestras Ubicaciones"}),m.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),m.jsx("div",{className:"clinics-grid",children:s.map(e=>m.jsxs("div",{className:"clinic-card",children:[m.jsxs("div",{className:"clinic-header",children:[m.jsx("h2",{children:e.name}),m.jsx("span",{className:"location-tag",children:e.location})]}),m.jsxs("div",{className:"clinic-info",children:[m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((i,a)=>m.jsxs("div",{className:"info-item",children:[m.jsxs("span",{className:"label",children:[i.type,":"]}),i.whatsapp?m.jsxs("a",{href:`https://wa.me/${i.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[i.number,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):m.jsx("span",{className:"value",children:i.number})]},a))]}),m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),m.jsx("div",{className:"info-item",children:m.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function HI({userData:s}){const[e,i]=ue.useState(null),[a,l]=ue.useState(!1),[c,f]=ue.useState("");ue.useEffect(()=>{if(s)i(s);else{const b=localStorage.getItem("userData");b&&i(JSON.parse(b))}},[s]);const p=b=>new Promise((R,L)=>{const q=new FileReader;q.onload=J=>{const G=new Image;G.onload=()=>{const H=document.createElement("canvas"),ne=H.getContext("2d");let W=G.width,ee=G.height;const fe=800;W>ee?W>fe&&(ee=ee*fe/W,W=fe):ee>fe&&(W=W*fe/ee,ee=fe),H.width=W,H.height=ee,ne.drawImage(G,0,0,W,ee),H.toBlob(ce=>{ce?R(ce):L(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},G.onerror=()=>L(new Error("Error al cargar la imagen")),G.src=J.target.result},q.onerror=()=>L(new Error("Error al leer el archivo")),q.readAsDataURL(b)}),_=b=>{if(!b)return"No especificado";const[R,L,q]=b.split("-");return new Date(R,L-1,q).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},E=b=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[b]||b,S=async b=>{const R=b.target.files[0];if(!R)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(R.type)){f("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const q=5*1024*1024;if(R.size>q){f("La imagen debe ser menor a 5MB");return}l(!0),f("");const J=tr.currentUser;if(!J){f("Debes estar autenticado para subir una foto"),l(!1);return}try{const G=await p(R),H=new File([G],R.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:ne,error:W}=await $E(J.uid,H);if(W){console.error("Upload error:",W);let ee="Error al subir la foto. Por favor, intenta de nuevo.";W.code==="storage/unauthorized"?ee="No tienes permisos para subir fotos. Contacta al administrador.":W.code==="storage/canceled"?ee="La subida fue cancelada.":W.code==="storage/unknown"&&(ee="Error desconocido. Verifica tu conexin a internet."),f(ee),l(!1);return}i(ee=>({...ee,photoURL:ne})),l(!1)}catch(G){console.error("Unexpected error:",G),f(G.message||"Error inesperado. Por favor, intenta de nuevo."),l(!1)}};return e?m.jsx("div",{className:"profile-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"profile-header",children:[m.jsxs("div",{className:"profile-avatar-container",children:[m.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:S,style:{display:"none"}}),m.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:a?m.jsx("div",{className:"upload-spinner"}):e.photoURL?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),m.jsxs("div",{className:"profile-header-info",children:[m.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),m.jsx("p",{className:"profile-email",children:e.email}),c&&m.jsx("p",{className:"upload-error",children:c})]})]}),m.jsxs("div",{className:"profile-sections",children:[m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombres"}),m.jsx("p",{children:e.nombres||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("p",{children:e.apellidos||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("p",{children:_(e.fechaNacimiento)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"DUI"}),m.jsx("p",{children:e.dui||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Gnero"}),m.jsx("p",{children:E(e.genero)})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Correo Electrnico"}),m.jsx("p",{children:e.email||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.telefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Direccin"}),m.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombre"}),m.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Parentesco"}),m.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):m.jsx("div",{className:"profile-page",children:m.jsx("div",{className:"container",children:m.jsx("div",{className:"loading-state",children:m.jsx("p",{children:"Cargando perfil..."})})})})}function FI(){const s=Tm(),[e,i]=ue.useState([]),[a,l]=ue.useState(null),[c,f]=ue.useState(!1),[p,_]=ue.useState(null),[E,S]=ue.useState(null);ue.useEffect(()=>{const H=localStorage.getItem("userData");H&&S(JSON.parse(H));const W=JSON.parse(localStorage.getItem("appointments")||"[]").sort((ee,fe)=>{const ce=new Date(`${ee.date} ${ee.time}`);return new Date(`${fe.date} ${fe.time}`)-ce});i(W)},[]);const b=H=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[H]||H,R=H=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[H]||H,L=H=>{l(a===H?null:H)},q=H=>{_(H),f(!0)},J=()=>{if(!p)return;const ne=JSON.parse(localStorage.getItem("appointments")||"[]").map(ee=>ee.id===p?{...ee,status:"cancelada"}:ee);localStorage.setItem("appointments",JSON.stringify(ne));const W=ne.sort((ee,fe)=>{const ce=new Date(`${ee.date} ${ee.time}`);return new Date(`${fe.date} ${fe.time}`)-ce});i(W),f(!1),_(null)},G=H=>{s("/cita",{state:{editingAppointment:H}})};return m.jsxs("div",{className:"appointments-list-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"page-header",children:[m.jsxs("button",{className:"back-button",onClick:()=>s("/"),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),m.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),m.jsx("h1",{className:"page-title",children:"Mis Citas"}),m.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?m.jsx("div",{className:"appointments-list",children:e.map(H=>m.jsxs("div",{className:`appointment-list-item ${a===H.id?"expanded":""}`,children:[m.jsxs("div",{className:"appointment-summary",onClick:()=>L(H.id),children:[m.jsxs("div",{className:"summary-content",children:[m.jsxs("div",{className:"summary-date",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:H.date})]}),m.jsx("div",{className:"summary-reason",children:H.reason||"Sin motivo especificado"}),m.jsx("span",{className:`summary-status status-${H.status}`,children:b(H.status)})]}),m.jsx("div",{className:"expand-icon",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),a===H.id&&m.jsxs("div",{className:"appointment-details",children:[m.jsxs("div",{className:"details-grid",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Paciente"}),m.jsx("p",{children:E?`${E.nombres} ${E.apellidos}`.trim():"Usuario"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Hora"}),m.jsx("p",{children:H.time})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Clnica"}),m.jsx("p",{children:R(H.clinica)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Motivo"}),m.jsx("p",{children:H.reason||"No especificado"})]})]}),H.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>G(H),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>q(H.id),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},H.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx("button",{className:"cta-button",onClick:()=>s("/cita"),children:"Agendar Cita"})]})]}),m.jsx(JE,{isOpen:c,onClose:()=>{f(!1),_(null)},onConfirm:J,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function GI(){const s=Sm(),{appointment:e}=s.state||{},i={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},a={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card error",children:[m.jsx("h2",{children:"No se encontr informacin de la cita"}),m.jsx("p",{children:"Parece que has llegado aqu por error."}),m.jsx(Si,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const l=async()=>{const p=await fetch("/COI/logo.png");if(!p.ok)throw new Error("No se pudo obtener el logo");const _=await p.blob();return await new Promise((E,S)=>{const b=new FileReader;b.onload=()=>E(b.result),b.onerror=S,b.readAsDataURL(_)})},c=async()=>{try{const f=new O2({orientation:"portrait",unit:"mm",format:"a4"}),p=210,_=20,E=p-_*2;let S=_;try{const ce=await l(),x=new Image;await new Promise((O,V)=>{x.onload=O,x.onerror=V,x.src=ce});const w=40,I=x.height*w/x.width,M=(p-w)/2;f.addImage(ce,"PNG",M,S,w,I),S+=I+15}catch(ce){console.warn("No se pudo cargar el logo:",ce)}f.setFontSize(20),f.setFont("helvetica","bold"),f.setTextColor(0,0,0);const b="COMPROBANTE DE CITA",R=f.getTextWidth(b);f.text(b,(p-R)/2,S),S+=10,f.setDrawColor(200,200,200),f.line(_,S,p-_,S),S+=10;const L=a[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Informacin de la Clnica",_,S),S+=8,f.setFontSize(11),f.setFont("helvetica","normal"),f.text(L.name||"Clnica Dental Dr. Csar Vsquez",_,S),S+=6,L.location&&(f.setFont("helvetica","italic"),f.text(`Ubicacin: ${L.location}`,_,S),S+=6),L.phones&&L.phones.length>0&&(f.setFont("helvetica","normal"),f.text(`Telfono: ${L.phones.join(" / ")}`,_,S),S+=6),L.address){f.setFont("helvetica","normal");const ce=f.splitTextToSize(`Direccin: ${L.address}`,E);f.text(ce,_,S),S+=ce.length*6}S+=5,f.setDrawColor(200,200,200),f.line(_,S,p-_,S),S+=10,f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Detalles de la Cita",_,S),S+=8,f.setFontSize(11),f.setFont("helvetica","normal");const q=i[e.motivo]||e.motivo;f.setFont("helvetica","bold"),f.text("Motivo:",_,S),f.setFont("helvetica","normal"),f.text(q,_+30,S),S+=7,f.setFont("helvetica","bold"),f.text("Clnica:",_,S),f.setFont("helvetica","normal"),f.text(L.name||e.clinica,_+30,S),S+=7,f.setFont("helvetica","bold"),f.text("Fecha:",_,S),f.setFont("helvetica","normal");const J=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(f.text(J,_+30,S),S+=7,f.setFont("helvetica","bold"),f.text("Hora:",_,S),f.setFont("helvetica","normal"),f.text(e.hora,_+30,S),S+=7,e.notas&&e.notas.trim()){S+=3,f.setFont("helvetica","bold"),f.text("Notas adicionales:",_,S),S+=6,f.setFont("helvetica","normal");const ce=f.splitTextToSize(e.notas,E);f.text(ce,_,S),S+=ce.length*6}S+=10,f.setDrawColor(200,200,200),f.line(_,S,p-_,S),S+=10,f.setFontSize(10),f.setFont("helvetica","italic"),f.setTextColor(100,100,100);const G=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});f.text(`Comprobante generado el: ${G}`,_,S),S+=6,f.text("Este comprobante es una confirmacin de tu solicitud de cita.",_,S),S+=6,f.text("Te contactaremos pronto para confirmar los detalles.",_,S);const H=f.output("arraybuffer"),ne=new Blob([H],{type:"application/pdf"}),W=URL.createObjectURL(ne),ee=document.createElement("a"),fe=`comprobante-cita-${e.fecha}.pdf`;ee.href=W,ee.setAttribute("href",W),ee.download=fe,ee.setAttribute("download",fe),ee.style.display="none",document.body.appendChild(ee),ee.click(),setTimeout(()=>{document.body.removeChild(ee),URL.revokeObjectURL(W)},1500)}catch(f){console.error("Error generating PDF:",f),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card",children:[m.jsx("div",{className:"success-icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("h1",{children:"Cita Agendada Exitosamente!"}),m.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("h3",{children:"Detalles de la Cita"}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Motivo:"}),m.jsx("span",{className:"value",children:i[e.motivo]||e.motivo})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Clnica:"}),m.jsx("span",{className:"value",children:a[e.clinica]?.name||e.clinica})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Fecha:"}),m.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Hora:"}),m.jsx("span",{className:"value",children:e.hora})]}),e.notas&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Notas:"}),m.jsx("span",{className:"value",children:e.notas})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx(Si,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),m.jsxs("button",{onClick:c,className:"btn-primary",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function QI(){const s=Tm(),i=Sm().state?.editingAppointment,a=!!i,[l,c]=ue.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[f,p]=ue.useState({}),[_,E]=ue.useState(!1);ue.useEffect(()=>{if(i){const ne=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(W=>W.label===i.reason)?.value||"";c({motivo:ne,clinica:i.clinica||"",fecha:i.date||"",hora:i.time||"",notas:i.notas||""})}},[i]);const S=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],b=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],R=["7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM"],L=H=>{const{name:ne,value:W}=H.target;c(ee=>({...ee,[ne]:W})),f[ne]&&p(ee=>({...ee,[ne]:""}))},q=()=>{const H={};if(l.motivo||(H.motivo="Por favor selecciona el motivo de la cita"),l.clinica||(H.clinica="Por favor selecciona una clnica"),!l.fecha)H.fecha="Por favor selecciona una fecha";else{const ne=new Date(l.fecha+"T00:00:00"),W=new Date;W.setHours(0,0,0,0),ne<W&&(H.fecha="La fecha no puede ser en el pasado"),ne.getDay()===0&&(H.fecha="No se pueden agendar citas los domingos")}return l.hora||(H.hora="Por favor selecciona una hora"),H},J=async H=>{H.preventDefault();const ne=q();if(Object.keys(ne).length>0){p(ne);return}E(!0),setTimeout(()=>{console.log("Datos de la cita:",l);const W=JSON.parse(localStorage.getItem("appointments")||"[]");if(a){const ee=W.map(fe=>fe.id===i.id?{...fe,date:l.fecha,time:l.hora,reason:S.find(ce=>ce.value===l.motivo)?.label||l.motivo,clinica:l.clinica,notas:l.notas}:fe);localStorage.setItem("appointments",JSON.stringify(ee))}else{const fe=JSON.parse(localStorage.getItem("userData")||"{}").nombres||"Paciente",ce={id:Date.now(),patientName:fe,date:l.fecha,time:l.hora,reason:S.find(x=>x.value===l.motivo)?.label||l.motivo,status:"programada",clinica:l.clinica,notas:l.notas};localStorage.setItem("appointments",JSON.stringify([...W,ce]))}E(!1),a?s("/",{state:{message:"Cita actualizada exitosamente"}}):s("/cita-confirmada",{state:{appointment:l}})},1500)},G=new Date().toISOString().split("T")[0];return m.jsxs("div",{className:"appointment-form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:a?"Editar Cita":"Agenda tu Cita"}),m.jsx("p",{children:a?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),m.jsxs("form",{onSubmit:J,className:"appointment-form",noValidate:!0,children:[m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Informacin de la Cita"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"motivo",name:"motivo",value:l.motivo,onChange:L,className:`${f.motivo?"error":""} ${l.motivo?"":"placeholder"}`,children:S.map(H=>m.jsx("option",{value:H.value,children:H.label},H.value))}),f.motivo&&m.jsxs("span",{className:"error-message",children:[" ",f.motivo]})]})}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"clinica",name:"clinica",value:l.clinica,onChange:L,className:`${f.clinica?"error":""} ${l.clinica?"":"placeholder"}`,children:b.map(H=>m.jsx("option",{value:H.value,children:H.label},H.value))}),f.clinica&&m.jsxs("span",{className:"error-message",children:[" ",f.clinica]})]})}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("input",{type:"text",id:"fecha",name:"fecha",value:l.fecha,onChange:L,onFocus:H=>{H.target.type="date",H.target.showPicker&&H.target.showPicker()},onBlur:H=>{H.target.value||(H.target.type="text")},placeholder:"Selecciona una fecha",min:G,className:f.fecha?"error":""}),f.fecha&&m.jsxs("span",{className:"error-message",children:[" ",f.fecha]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("select",{id:"hora",name:"hora",value:l.hora,onChange:L,className:`${f.hora?"error":""} ${l.hora?"":"placeholder"}`,children:[m.jsx("option",{value:"",children:"Selecciona una hora"}),R.map(H=>m.jsx("option",{value:H,children:H},H))]}),f.hora&&m.jsxs("span",{className:"error-message",children:[" ",f.hora]})]})]})]}),m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Notas Adicionales"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),m.jsx("textarea",{id:"notas",name:"notas",value:l.notas,onChange:L,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),m.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:_,children:_?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner"}),"Procesando..."]}):a?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]})]})}function KI(){return m.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}const YI=({onLogin:s})=>{const[e,i]=ue.useState(!0),[a,l]=ue.useState(1),[c,f]=ue.useState(""),[p,_]=ue.useState({}),[E,S]=ue.useState(!1),[b,R]=ue.useState(!1),[L,q]=ue.useState(""),[J,G]=ue.useState(""),[H,ne]=ue.useState(!1),[W,ee]=ue.useState(""),[fe,ce]=ue.useState(""),[x,w]=ue.useState(""),[I,M]=ue.useState(""),[O,V]=ue.useState(""),[C,at]=ue.useState(""),[ct,K]=ue.useState(""),[ie,me]=ue.useState(""),[Me,Be]=ue.useState(""),[rt,Ge]=ue.useState(""),[be,Je]=ue.useState(""),[xt,Zt]=ue.useState(""),[cn,Wn]=ue.useState(""),[un,ds]=ue.useState("primera-vez"),wt=(oe,re)=>{re&&_(Ve=>({...Ve,[oe]:""}))},ms=async oe=>{oe.preventDefault(),f(""),_({}),S(!0);try{if(e){if(!W||!fe){f("Por favor, completa todos los campos."),S(!1);return}const{user:re,error:Ve}=await GE(W,fe);if(Ve){Ve.code==="auth/email-not-verified"?f("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):Ve.code==="auth/user-not-found"?f("No existe una cuenta con este correo."):Ve.code==="auth/wrong-password"?f("Contrasea incorrecta."):Ve.code==="auth/invalid-credential"?f("Correo o contrasea incorrectos."):f(Ve.message||"Error al iniciar sesin."),S(!1);return}re&&s(re)}else if(a===1){const re={};if(W||(re.email="Ingresa tu correo electrnico"),fe||(re.password="Crea una contrasea"),x||(re.confirmPassword="Confirma tu contrasea"),Object.keys(re).length>0){_(re),S(!1);return}if(fe.length<6){f("La contrasea debe tener al menos 6 caracteres."),S(!1);return}if(fe!==x){f("Las contraseas no coinciden."),S(!1);return}l(2),S(!1)}else{const re={};if(I||(re.nombres="Ingresa tus nombres"),O||(re.apellidos="Ingresa tus apellidos"),C||(re.fechaNacimiento="Selecciona tu fecha de nacimiento"),ct||(re.dui="Ingresa tu nmero de DUI"),ie||(re.genero="Selecciona tu gnero"),Me||(re.direccion="Ingresa tu direccin completa"),rt||(re.telefono="Ingresa tu nmero de telfono"),be||(re.emergenciaNombre="Ingresa el nombre del contacto"),xt||(re.emergenciaTelefono="Ingresa el telfono del contacto"),cn||(re.emergenciaParentesco="Selecciona el parentesco"),Object.keys(re).length>0){_(re),S(!1);return}const Ve={nombres:I,apellidos:O,fechaNacimiento:C,dui:ct,genero:ie,direccion:Me,telefono:rt,emergenciaNombre:be,emergenciaTelefono:xt,emergenciaParentesco:cn,tipoPaciente:un};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:fn,error:pa}=await FE(W,fe,Ve);if(pa){sessionStorage.removeItem("justRegistered"),pa.code==="auth/email-already-in-use"?f("Este correo ya est registrado."):f(pa.message||"Error al registrar usuario."),S(!1);return}f(""),ne(!0)}}catch(re){console.error("Error:",re),f("Ocurri un error inesperado. Por favor, intenta de nuevo."),S(!1)}},ki=async()=>{ne(!1),sessionStorage.removeItem("justRegistered");const{signOut:oe}=await M2(async()=>{const{signOut:re}=await Promise.resolve().then(()=>PI);return{signOut:re}},void 0);await oe(),i(!0),l(1),ee(""),ce(""),w("")},hn=oe=>{i(oe),f(""),_({}),l(1)},ma=async oe=>{if(oe.preventDefault(),G(""),!L){G("Por favor, ingresa tu correo electrnico.");return}S(!0);const{error:re}=await KE(L);S(!1),re?G("Error al enviar el correo de recuperacin."):(G("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{R(!1),q(""),G("")},3e3))},Li=oe=>{let re=oe.target.value.replace(/\D/g,"");re.length>9&&(re=re.slice(0,9)),re.length>8&&(re=re.slice(0,8)+"-"+re.slice(8,9)),K(re),wt("dui",re)},ps=(oe,re)=>Ve=>{const fn=Ve.target.value.replace(/\D/g,"");fn.length<=8&&(oe(fn),wt(re,fn))};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:`login-card ${!e&&a===2?"wide":""}`,children:[m.jsx("div",{className:"login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),a===1&&m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>hn(!0),children:"INICIAR SESIN"}),m.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>hn(!1),children:"REGISTRARSE"})]}),m.jsxs("form",{onSubmit:ms,className:"login-form",noValidate:!0,children:[(e||a===1)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:W,onChange:oe=>{ee(oe.target.value),wt("email",oe.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:fe,onChange:oe=>{ce(oe.target.value),wt("password",oe.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),!e&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),m.jsx("input",{type:"password",id:"confirmPassword",value:x,onChange:oe=>{w(oe.target.value),wt("confirmPassword",oe.target.value)},placeholder:"",className:p.confirmPassword?"input-error":"",required:!0}),p.confirmPassword&&m.jsx("span",{className:"field-error-message",children:p.confirmPassword})]})]}),!e&&a===2&&m.jsxs("div",{className:"registration-step-2",children:[m.jsx("h3",{children:"Datos Personales"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombres"}),m.jsx("input",{type:"text",value:I,onChange:oe=>{M(oe.target.value),wt("nombres",oe.target.value)},className:p.nombres?"input-error":"",required:!0}),p.nombres&&m.jsx("span",{className:"field-error-message",children:p.nombres})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("input",{type:"text",value:O,onChange:oe=>{V(oe.target.value),wt("apellidos",oe.target.value)},className:p.apellidos?"input-error":"",required:!0}),p.apellidos&&m.jsx("span",{className:"field-error-message",children:p.apellidos})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("input",{type:"date",value:C,onChange:oe=>{at(oe.target.value),wt("fechaNacimiento",oe.target.value)},className:p.fechaNacimiento?"input-error":"",required:!0}),p.fechaNacimiento&&m.jsx("span",{className:"field-error-message",children:p.fechaNacimiento})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"DUI"}),m.jsx("input",{type:"text",value:ct,onChange:Li,placeholder:"00000000-0",maxLength:"10",className:p.dui?"input-error":"",required:!0}),p.dui&&m.jsx("span",{className:"field-error-message",children:p.dui})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gnero"}),m.jsxs("select",{value:ie,onChange:oe=>{me(oe.target.value),wt("genero",oe.target.value)},required:!0,className:`${ie?"":"placeholder-selected"} ${p.genero?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Masculino",children:"Masculino"}),m.jsx("option",{value:"Femenino",children:"Femenino"})]}),p.genero&&m.jsx("span",{className:"field-error-message",children:p.genero})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Direccin"}),m.jsx("input",{type:"text",value:Me,onChange:oe=>{Be(oe.target.value),wt("direccion",oe.target.value)},className:p.direccion?"input-error":"",required:!0}),p.direccion&&m.jsx("span",{className:"field-error-message",children:p.direccion})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:rt,onChange:ps(Ge,"telefono"),placeholder:"00000000",maxLength:"8",className:p.telefono?"input-error":"",required:!0}),p.telefono&&m.jsx("span",{className:"field-error-message",children:p.telefono})]}),m.jsx("div",{className:"divider"}),m.jsx("h3",{children:"Contacto de Emergencia"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombre Completo"}),m.jsx("input",{type:"text",value:be,onChange:oe=>{Je(oe.target.value),wt("emergenciaNombre",oe.target.value)},className:p.emergenciaNombre?"input-error":"",required:!0}),p.emergenciaNombre&&m.jsx("span",{className:"field-error-message",children:p.emergenciaNombre})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:xt,onChange:ps(Zt,"emergenciaTelefono"),maxLength:"8",className:p.emergenciaTelefono?"input-error":"",required:!0}),p.emergenciaTelefono&&m.jsx("span",{className:"field-error-message",children:p.emergenciaTelefono})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Parentesco"}),m.jsxs("select",{value:cn,onChange:oe=>{Wn(oe.target.value),wt("emergenciaParentesco",oe.target.value)},required:!0,className:`${cn?"":"placeholder-selected"} ${p.emergenciaParentesco?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),m.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),m.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),m.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),m.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),m.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),m.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),m.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),m.jsx("option",{value:"To / Ta",children:"To / Ta"}),m.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),m.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),m.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),p.emergenciaParentesco&&m.jsx("span",{className:"field-error-message",children:p.emergenciaParentesco})]}),m.jsx("div",{className:"divider"}),m.jsxs("div",{className:"form-group radio-group",children:[m.jsx("label",{children:"Es primera vez o paciente recurrente?"}),m.jsxs("div",{className:"radio-options",children:[m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:un==="primera-vez",onChange:oe=>ds(oe.target.value)}),"Primera vez"]}),m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:un==="recurrente",onChange:oe=>ds(oe.target.value)}),"Recurrente"]})]})]})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsxs("div",{className:"button-group",children:[!e&&a===2&&m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>l(1),children:"Atrs"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Cargando...":e?"Ingresar":a===1?"Siguiente":"Finalizar Registro"})]}),e&&m.jsx("div",{className:"forgot-password",children:m.jsx("a",{href:"#",onClick:oe=>{oe.preventDefault(),R(!0)},children:"Olvidaste tu contrasea?"})})]}),b&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:oe=>oe.stopPropagation(),children:[m.jsx("h3",{children:"Recuperar Contrasea"}),m.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),m.jsxs("form",{onSubmit:ma,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"resetEmail",value:L,onChange:oe=>q(oe.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),J&&m.jsx("p",{className:J.includes("Error")?"error-message":"success-message",children:J}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>R(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Enviando...":"Enviar"})]})]})]})}),H&&m.jsx("div",{className:"modal-overlay",onClick:ki,children:m.jsxs("div",{className:"modal-content success-modal",onClick:oe=>oe.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),m.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:ki,children:"Aceptar"})})]})})]})})},XI=({onLogin:s})=>{const[e,i]=ue.useState(""),[a,l]=ue.useState(""),[c,f]=ue.useState(""),[p,_]=ue.useState({}),E=[{email:"admin@clinica.com",password:"admin123",type:"admin",nombre:"Mara Gonzlez",cargo:"Administradora"},{email:"doctor@clinica.com",password:"doctor123",type:"doctor",nombre:"Dr. Csar Vsquez",cargo:"Odontlogo"}],S=(R,L)=>{L&&_(q=>({...q,[R]:""}))},b=R=>{R.preventDefault(),f(""),_({});const L={};if(e||(L.email="Ingresa tu correo electrnico"),a||(L.password="Ingresa tu contrasea"),Object.keys(L).length>0){_(L);return}const q=E.find(J=>J.email===e&&J.password===a);q?s(e,a,null,q.type,{nombre:q.nombre,cargo:q.cargo}):f("Credenciales incorrectas. Verifica tu correo y contrasea.")};return m.jsx("div",{className:"staff-login-container",children:m.jsxs("div",{className:"staff-login-card",children:[m.jsx("div",{className:"staff-login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),m.jsxs("form",{onSubmit:b,className:"staff-login-form",noValidate:!0,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:R=>{i(R.target.value),S("email",R.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:a,onChange:R=>{l(R.target.value),S("password",R.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsx("button",{type:"submit",className:"staff-login-button",children:"Ingresar"}),m.jsx("div",{className:"staff-login-info",children:m.jsxs("p",{className:"info-text",children:[m.jsx("strong",{children:"Usuarios de prueba:"}),m.jsx("br",{}),"Admin: admin@clinica.com / admin123",m.jsx("br",{}),"Doctor: doctor@clinica.com / doctor123"]})})]})]})})},$I=({userType:s,userData:e})=>{const i=s==="admin",a=s==="doctor";return m.jsxs("div",{className:"staff-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[i&&" Panel Administrativo",a&&" Panel Mdico"]}),m.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",m.jsx("strong",{children:e?.nombre||"Usuario"})]})]}),m.jsxs("div",{className:"dashboard-content",children:[i&&m.jsxs("div",{className:"admin-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Gestin de Citas"}),m.jsx("p",{children:"Administra todas las citas programadas"}),m.jsx("button",{className:"card-button",children:"Ver Citas"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Pacientes"}),m.jsx("p",{children:"Gestiona la base de datos de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Pacientes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Reportes"}),m.jsx("p",{children:"Consulta estadsticas y reportes"}),m.jsx("button",{className:"card-button",children:"Ver Reportes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Configuracin"}),m.jsx("p",{children:"Ajustes del sistema y usuarios"}),m.jsx("button",{className:"card-button",children:"Configurar"})]})]}),m.jsxs("div",{className:"recent-activity",children:[m.jsx("h2",{children:"Actividad Reciente"}),m.jsxs("div",{className:"activity-list",children:[m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 5 min"}),m.jsx("span",{className:"activity-text",children:"Nueva cita programada - Juan Prez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 15 min"}),m.jsx("span",{className:"activity-text",children:"Cita cancelada - Mara Lpez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 1 hora"}),m.jsx("span",{className:"activity-text",children:"Nuevo paciente registrado - Carlos Gmez"})]})]})]})]}),a&&m.jsxs("div",{className:"doctor-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Citas del Da"}),m.jsx("p",{children:"Revisa tu agenda de hoy"}),m.jsx("button",{className:"card-button",children:"Ver Agenda"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Historial Clnico"}),m.jsx("p",{children:"Consulta historiales de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Historiales"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Notas Mdicas"}),m.jsx("p",{children:"Registra diagnsticos y tratamientos"}),m.jsx("button",{className:"card-button",children:"Nueva Nota"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Recetas"}),m.jsx("p",{children:"Gestiona prescripciones mdicas"}),m.jsx("button",{className:"card-button",children:"Ver Recetas"})]})]}),m.jsxs("div",{className:"today-appointments",children:[m.jsx("h2",{children:"Citas de Hoy"}),m.jsxs("div",{className:"appointments-list",children:[m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"09:00 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Ana Martnez"}),m.jsx("span",{children:"Limpieza dental"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"10:30 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Roberto Silva"}),m.jsx("span",{children:"Extraccin de muela"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"02:00 PM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Laura Hernndez"}),m.jsx("span",{children:"Consulta general"})]})]})]})]})]})]})]})};function JI({isAuthenticated:s,userType:e,userData:i,handleLogin:a,handleLogout:l,isStaff:c,isLoading:f}){const p=Sm(),_=p.pathname==="/staff/login"||p.pathname==="/staff/dashboard";return f?m.jsx("div",{className:"loading-container",children:m.jsx("div",{className:"loading-spinner"})}):m.jsxs(m.Fragment,{children:[s&&m.jsx(UI,{onLogout:l,userData:i,userType:e}),m.jsx("main",{className:"main-content",children:m.jsxs(D2,{children:[m.jsx(is,{path:"/staff/login",element:s?m.jsx(Ru,{to:c?"/staff/dashboard":"/",replace:!0}):m.jsx(XI,{onLogin:a})}),m.jsx(is,{path:"/",element:s?e==="patient"?m.jsx(BI,{}):m.jsx(Ru,{to:"/staff/dashboard",replace:!0}):m.jsx(YI,{onLogin:a})}),m.jsx(is,{path:"/staff/dashboard",element:s&&c?m.jsx($I,{userType:e,userData:i}):m.jsx(Ru,{to:s?"/":"/staff/login",replace:!0})}),s&&e==="patient"&&m.jsxs(m.Fragment,{children:[m.jsx(is,{path:"/cita",element:m.jsx("div",{className:"container",children:m.jsx(QI,{})})}),m.jsx(is,{path:"/contacto",element:m.jsx(qI,{})}),m.jsx(is,{path:"/perfil",element:m.jsx(HI,{userData:i})}),m.jsx(is,{path:"/mis-citas",element:m.jsx(FI,{})}),m.jsx(is,{path:"/cita-confirmada",element:m.jsx(GI,{})})]}),m.jsx(is,{path:"*",element:m.jsx(Ru,{to:s&&c?"/staff/dashboard":"/",replace:!0})})]})}),s&&e==="patient"&&m.jsx(KI,{}),!_&&m.jsx(zI,{})]})}function ZI(){const[s,e]=ue.useState(!1),[i,a]=ue.useState(null),[l,c]=ue.useState(null),[f,p]=ue.useState(!0);ue.useEffect(()=>{const b=XE(async q=>{if(console.log("Auth state changed, user:",q?.email),q){const J=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",J),J==="true"){console.log("User just registered, skipping auto-login"),p(!1);return}let G=3,H=null,ne=null;for(;G>0&&!H;){const W=await Em(q.uid);H=W.profile,ne=W.error,!H&&G>1&&(console.log(`Failed to load profile, retrying... (${G-1} attempts left)`),await new Promise(ee=>setTimeout(ee,1e3))),G--}H?(a(H),c("patient"),e(!0),p(!1)):(console.error("Failed to load profile after retries:",ne),e(!1),a(null),c(null),p(!1))}else e(!1),a(null),c(null),p(!1)}),R=()=>{const q=JSON.parse(localStorage.getItem("appointments")||"[]"),J=new Date;q.forEach(G=>{if(G.status==="programada"){const H=new Date(`${G.fecha}T${G.hora}`),ne=new Date(H.getTime()+7200*1e3);J>ne&&(G.status="perdida")}}),localStorage.setItem("appointments",JSON.stringify(q))};R();const L=setInterval(R,6e4);return()=>{b(),clearInterval(L)}},[]);const _=async b=>{const{profile:R,error:L}=await Em(b.uid);R?(a(R),c("patient"),e(!0)):console.error("Failed to load profile:",L)},E=async()=>{await QE(),e(!1),a(null),c(null)},S=l==="admin"||l==="doctor";return m.jsx(x2,{basename:"/COI/",children:m.jsx("div",{className:"app",children:m.jsx(JI,{isAuthenticated:s,userType:l,userData:i,handleLogin:_,handleLogout:E,isStaff:S,isLoading:f})})})}z2.createRoot(document.getElementById("root")).render(m.jsx(ue.StrictMode,{children:m.jsx(ZI,{})}));
