import{r as rA,a as aA,b as ue,L as wi,u as Vm,c as Eh,B as oA,R as lA,d as rs,N as Ou}from"./vendor-BIRSGIdg.js";import{E as cA,_ as q0}from"./pdf-utils-C-nx5KvR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Fd={exports:{}},El={};var tv;function uA(){if(tv)return El;tv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return El.Fragment=e,El.jsx=n,El.jsxs=n,El}var nv;function hA(){return nv||(nv=1,Fd.exports=uA()),Fd.exports}var m=hA(),Gd={exports:{}},Tl={},Qd={exports:{}},Kd={};var iv;function fA(){return iv||(iv=1,(function(s){function e(K,ie){var pe=K.length;K.push(ie);e:for(;0<pe;){var Me=pe-1>>>1,Be=K[Me];if(0<l(Be,ie))K[Me]=ie,K[pe]=Be,pe=Me;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],pe=K.pop();if(pe!==ie){K[0]=pe;e:for(var Me=0,Be=K.length,at=Be>>>1;Me<at;){var Ge=2*(Me+1)-1,Se=K[Ge],Je=Ge+1,Dt=K[Je];if(0>l(Se,pe))Je<Be&&0>l(Dt,Se)?(K[Me]=Dt,K[Je]=pe,Me=Je):(K[Me]=Se,K[Ge]=pe,Me=Ge);else if(Je<Be&&0>l(Dt,pe))K[Me]=Dt,K[Je]=pe,Me=Je;else break e}}return ie}function l(K,ie){var pe=K.sortIndex-ie.sortIndex;return pe!==0?pe:K.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],E=[],T=1,S=null,R=3,L=!1,Q=!1,H=!1,F=!1,Z=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function te(K){for(var ie=n(E);ie!==null;){if(ie.callback===null)r(E);else if(ie.startTime<=K)r(E),ie.sortIndex=ie.expirationTime,e(y,ie);else break;ie=n(E)}}function fe(K){if(H=!1,te(K),!Q)if(n(y)!==null)Q=!0,he||(he=!0,j());else{var ie=n(E);ie!==null&&ut(fe,ie.startTime-K)}}var he=!1,x=-1,w=5,C=-1;function M(){return F?!0:!(s.unstable_now()-C<w)}function O(){if(F=!1,he){var K=s.unstable_now();C=K;var ie=!0;try{e:{Q=!1,H&&(H=!1,ee(x),x=-1),L=!0;var pe=R;try{t:{for(te(K),S=n(y);S!==null&&!(S.expirationTime>K&&M());){var Me=S.callback;if(typeof Me=="function"){S.callback=null,R=S.priorityLevel;var Be=Me(S.expirationTime<=K);if(K=s.unstable_now(),typeof Be=="function"){S.callback=Be,te(K),ie=!0;break t}S===n(y)&&r(y),te(K)}else r(y);S=n(y)}if(S!==null)ie=!0;else{var at=n(E);at!==null&&ut(fe,at.startTime-K),ie=!1}}break e}finally{S=null,R=pe,L=!1}ie=void 0}}finally{ie?j():he=!1}}}var j;if(typeof J=="function")j=function(){J(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,rt=I.port2;I.port1.onmessage=O,j=function(){rt.postMessage(null)}}else j=function(){Z(O,0)};function ut(K,ie){x=Z(function(){K(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(K){switch(R){case 1:case 2:case 3:var ie=3;break;default:ie=R}var pe=R;R=ie;try{return K()}finally{R=pe}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var pe=R;R=K;try{return ie()}finally{R=pe}},s.unstable_scheduleCallback=function(K,ie,pe){var Me=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Me+pe:Me):pe=Me,K){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=pe+Be,K={id:T++,callback:ie,priorityLevel:K,startTime:pe,expirationTime:Be,sortIndex:-1},pe>Me?(K.sortIndex=pe,e(E,K),n(y)===null&&K===n(E)&&(H?(ee(x),x=-1):H=!0,ut(fe,pe-Me))):(K.sortIndex=Be,e(y,K),Q||L||(Q=!0,he||(he=!0,j()))),K},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(K){var ie=R;return function(){var pe=R;R=ie;try{return K.apply(this,arguments)}finally{R=pe}}}})(Kd)),Kd}var sv;function dA(){return sv||(sv=1,Qd.exports=fA()),Qd.exports}var rv;function mA(){if(rv)return Tl;rv=1;var s=dA(),e=rA(),n=aA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function E(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,A=h.child;A;){if(A===a){_=!0,a=h,o=d;break}if(A===o){_=!0,o=h,a=d;break}A=A.sibling}if(!_){for(A=d.child;A;){if(A===a){_=!0,a=d,o=h;break}if(A===o){_=!0,o=d,a=h;break}A=A.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),J=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Z:return"Profiler";case F:return"StrictMode";case fe:return"Suspense";case he:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case J:return t.displayName||"Context";case ee:return(t._context.displayName||"Context")+".Consumer";case te:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:rt(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return rt(t(i))}catch{}}return null}var ut=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Me=[],Be=-1;function at(t){return{current:t}}function Ge(t){0>Be||(t.current=Me[Be],Me[Be]=null,Be--)}function Se(t,i){Be++,Me[Be]=t.current,t.current=i}var Je=at(null),Dt=at(null),Zt=at(null),cn=at(null);function ni(t,i){switch(Se(Zt,i),Se(Dt,t),Se(Je,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?S_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=S_(i),t=w_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ge(Je),Se(Je,t)}function un(){Ge(Je),Ge(Dt),Ge(Zt)}function gs(t){t.memoizedState!==null&&Se(cn,t);var i=Je.current,a=w_(i,t.type);i!==a&&(Se(Dt,t),Se(Je,a))}function It(t){Dt.current===t&&(Ge(Je),Ge(Dt)),cn.current===t&&(Ge(cn),gl._currentValue=pe)}var ys,Pi;function hn(t){if(ys===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ys=i&&i[1]||"",Pi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ys+t+Pi}var _r=!1;function Ui(t,i){if(!t||_r)return"";_r=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(q){var z=q}Reflect.construct(t,[],X)}else{try{X.call()}catch(q){z=q}t.call(X.prototype)}}else{try{throw Error()}catch(q){z=q}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],A=d[1];if(_&&A){var N=_.split(`
`),U=A.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===U.length)for(o=N.length-1,h=U.length-1;1<=o&&0<=h&&N[o]!==U[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==U[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==U[h]){var G=`
`+N[o].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=o&&0<=h);break}}}finally{_r=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?hn(a):""}function _s(t,i){switch(t.tag){case 26:case 27:case 5:return hn(t.type);case 16:return hn("Lazy");case 13:return t.child!==i&&i!==null?hn("Suspense Fallback"):hn("Suspense");case 19:return hn("SuspenseList");case 0:case 15:return Ui(t.type,!1);case 11:return Ui(t.type.render,!1);case 1:return Ui(t.type,!0);case 31:return hn("Activity");default:return""}}function le(t){try{var i="",a=null;do i+=_s(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var oe=Object.prototype.hasOwnProperty,je=s.unstable_scheduleCallback,fn=s.unstable_cancelCallback,vr=s.unstable_shouldYield,ic=s.unstable_requestPaint,Xt=s.unstable_now,Er=s.unstable_getCurrentPriorityLevel,vo=s.unstable_ImmediatePriority,Eo=s.unstable_UserBlockingPriority,vs=s.unstable_NormalPriority,Qh=s.unstable_LowPriority,sc=s.unstable_IdlePriority,rc=s.log,ac=s.unstable_setDisableYieldValue,Un=null,kt=null;function wn(t){if(typeof rc=="function"&&ac(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Un,t)}catch{}}var ht=Math.clz32?Math.clz32:lc,oc=Math.log,ha=Math.LN2;function lc(t){return t>>>=0,t===0?32:31-(oc(t)/ha|0)|0}var ii=256,Tr=262144,yt=4194304;function si(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ri(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var A=o&134217727;return A!==0?(o=A&~d,o!==0?h=si(o):(_&=A,_!==0?h=si(_):a||(a=A&~t,a!==0&&(h=si(a))))):(A=o&~d,A!==0?h=si(A):_!==0?h=si(_):a||(a=o&~t,a!==0&&(h=si(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function zn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Kh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cc(){var t=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),t}function ai(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ar(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yh(t,i,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var A=t.entanglements,N=t.expirationTimes,U=t.hiddenUpdates;for(a=_&~a;0<a;){var G=31-ht(a),X=1<<G;A[G]=0,N[G]=-1;var z=U[G];if(z!==null)for(U[G]=null,G=0;G<z.length;G++){var q=z[G];q!==null&&(q.lane&=-536870913)}a&=~X}o!==0&&br(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function br(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-ht(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function To(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-ht(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Ao(t,i){var a=i&-i;return a=(a&42)!==0?1:Sr(a),(a&(t.suspendedLanes|i))!==0?0:a}function Sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function zi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function uc(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:Y_(t.type))}function Bn(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var qn=Math.random().toString(36).slice(2),_t="__reactFiber$"+qn,Ot="__reactProps$"+qn,oi="__reactContainer$"+qn,fa="__reactEvents$"+qn,Xh="__reactListeners$"+qn,hc="__reactHandles$"+qn,fc="__reactResources$"+qn,li="__reactMarker$"+qn;function da(t){delete t[_t],delete t[Ot],delete t[fa],delete t[Xh],delete t[hc]}function ci(t){var i=t[_t];if(i)return i;for(var a=t.parentNode;a;){if(i=a[oi]||a[_t]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[_t])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function Rn(t){if(t=t[_t]||t[oi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function dn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function ui(t){var i=t[fc];return i||(i=t[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function vt(t){t[li]=!0}var bo=new Set,So={};function hi(t,i){fi(t,i),fi(t+"Capture",i)}function fi(t,i){for(So[t]=i,t=0;t<i.length;t++)bo.add(i[t])}var wo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ro={},Co={};function dc(t){return oe.call(Co,t)?!0:oe.call(Ro,t)?!1:wo.test(t)?Co[t]=!0:(Ro[t]=!0,!1)}function ma(t,i,a){if(dc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function mn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Et(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Es(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Io(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function qe(t){if(!t._valueTracker){var i=Es(t)?"checked":"value";t._valueTracker=Io(t,i,""+t[i])}}function wr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Es(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function di(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function Jt(t){return t.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pa(t,i,a,o,h,d,_,A){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Mt(i)):t.value!==""+Mt(i)&&(t.value=""+Mt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?No(t,_,Mt(i)):a!=null?No(t,_,Mt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Mt(A):t.removeAttribute("name")}function mc(t,i,a,o,h,d,_,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){qe(t);return}a=a!=null?""+Mt(a):"",i=i!=null?""+Mt(i):a,A||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=A?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),qe(t)}function No(t,i,a){i==="number"&&di(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ts(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Mt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function pc(t,i,a){if(i!=null&&(i=""+Mt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Mt(a):""}function As(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(ut(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Mt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),qe(t)}function en(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||gc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Do(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&xo(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&xo(t,d,i[d])}function ga(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ya(t){return bs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Hn(){}var Oo=null;function Cn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ss=null,mi=null;function Cr(t){var i=Rn(t);if(i&&(t=i.stateNode)){var a=t[Ot]||null;e:switch(t=i.stateNode,i.type){case"input":if(pa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Ot]||null;if(!h)throw Error(r(90));pa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&wr(o)}break e;case"textarea":pc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ts(t,!!a.multiple,i,!1)}}}var _a=!1;function ws(t,i,a){if(_a)return t(i,a);_a=!0;try{var o=t(i);return o}finally{if(_a=!1,(Ss!==null||mi!==null)&&(uu(),Ss&&(i=Ss,t=mi,mi=Ss=null,Cr(i),t)))for(i=0;i<t.length;i++)Cr(t[i])}}function Fn(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Ot]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ir=!1;if(In)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){Ir=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{Ir=!1}var pi=null,Mo=null,Nr=null;function Vo(){if(Nr)return Nr;var t,i=Mo,a=i.length,o,h="value"in pi?pi.value:pi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[d-o];o++);return Nr=h.slice(t,1<o?1-o:void 0)}function xr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Bi(){return!0}function Gn(){return!1}function Lt(t){function i(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(a=t[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Bi:Gn,this.isPropagationStopped=Gn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),i}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=Lt(qi),Rs=S({},qi,{view:0,detail:0}),jo=Lt(Rs),Cs,va,yi,Ea=S({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(Cs=t.screenX-yi.screenX,va=t.screenY-yi.screenY):va=Cs=0,yi=t),Cs)},movementY:function(t){return"movementY"in t?t.movementY:va}}),ko=Lt(Ea),Dr=S({},Ea,{dataTransfer:0}),_c=Lt(Dr),vc=S({},Rs,{relatedTarget:0}),Or=Lt(vc),Lo=S({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ec=Lt(Lo),Ta=S({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tc=Lt(Ta),Ac=S({},qi,{data:0}),_i=Lt(Ac),bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=wc[t])?!!i[t]:!1}function Is(){return Rc}var $t=S({},Rs,{key:function(t){if(t.key){var i=bc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cc=Lt($t),Ic=S({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Lt(Ic),u=S({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),g=Lt(u),v=S({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Lt(v),k=S({},Ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B=Lt(k),ne=S({},qi,{newState:0,oldState:0}),Te=Lt(ne),ft=[9,13,27,32],Pe=In&&"CompositionEvent"in window,nt=null;In&&"documentMode"in document&&(nt=document.documentMode);var Nn=In&&"TextEvent"in window&&!nt,vi=In&&(!Pe||nt&&8<nt&&11>=nt),Qn=" ",Kn=!1;function Mr(t,i){switch(t){case"keyup":return ft.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ba=!1;function NT(t,i){switch(t){case"compositionend":return Aa(i);case"keypress":return i.which!==32?null:(Kn=!0,Qn);case"textInput":return t=i.data,t===Qn&&Kn?null:t;default:return null}}function xT(t,i){if(ba)return t==="compositionend"||!Pe&&Mr(t,i)?(t=Vo(),Nr=Mo=pi=null,ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vi&&i.locale!=="ko"?null:i.data;default:return null}}var DT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!DT[t.type]:i==="textarea"}function kp(t,i,a,o){Ss?mi?mi.push(o):mi=[o]:Ss=o,i=yu(i,"onChange"),0<i.length&&(a=new gi("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Po=null,Uo=null;function OT(t){__(t,0)}function Nc(t){var i=dn(t);if(wr(i))return t}function Lp(t,i){if(t==="change")return i}var Pp=!1;if(In){var $h;if(In){var Wh="oninput"in document;if(!Wh){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Wh=typeof Up.oninput=="function"}$h=Wh}else $h=!1;Pp=$h&&(!document.documentMode||9<document.documentMode)}function zp(){Po&&(Po.detachEvent("onpropertychange",Bp),Uo=Po=null)}function Bp(t){if(t.propertyName==="value"&&Nc(Uo)){var i=[];kp(i,Uo,t,Cn(t)),ws(OT,i)}}function MT(t,i,a){t==="focusin"?(zp(),Po=i,Uo=a,Po.attachEvent("onpropertychange",Bp)):t==="focusout"&&zp()}function VT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(Uo)}function jT(t,i){if(t==="click")return Nc(i)}function kT(t,i){if(t==="input"||t==="change")return Nc(i)}function LT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var pn=typeof Object.is=="function"?Object.is:LT;function zo(t,i){if(pn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!oe.call(i,h)||!pn(t[h],i[h]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,i){var a=qp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qp(a)}}function Fp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Fp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=di(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=di(t.document)}return i}function Zh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var PT=In&&"documentMode"in document&&11>=document.documentMode,Sa=null,Jh=null,Bo=null,ef=!1;function Qp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||Sa==null||Sa!==di(o)||(o=Sa,"selectionStart"in o&&Zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Bo&&zo(Bo,o)||(Bo=o,o=yu(Jh,"onSelect"),0<o.length&&(i=new gi("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Sa)))}function Vr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var wa={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},tf={},Kp={};In&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function jr(t){if(tf[t])return tf[t];if(!wa[t])return t;var i=wa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Kp)return tf[t]=i[a];return t}var Yp=jr("animationend"),Xp=jr("animationiteration"),$p=jr("animationstart"),UT=jr("transitionrun"),zT=jr("transitionstart"),BT=jr("transitioncancel"),Wp=jr("transitionend"),Zp=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function Yn(t,i){Zp.set(t,i),hi(i,[t])}var xc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},xn=[],Ra=0,sf=0;function Dc(){for(var t=Ra,i=sf=Ra=0;i<t;){var a=xn[i];xn[i++]=null;var o=xn[i];xn[i++]=null;var h=xn[i];xn[i++]=null;var d=xn[i];if(xn[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&Jp(a,h,d)}}function Oc(t,i,a,o){xn[Ra++]=t,xn[Ra++]=i,xn[Ra++]=a,xn[Ra++]=o,sf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function rf(t,i,a,o){return Oc(t,i,a,o),Mc(t)}function kr(t,i){return Oc(t,null,null,i),Mc(t)}function Jp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-ht(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Mc(t){if(50<cl)throw cl=0,md=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ca={};function qT(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,i,a,o){return new qT(t,i,a,o)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fi(t,i){var a=t.alternate;return a===null?(a=gn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Vc(t,i,a,o,h,d){var _=0;if(o=t,typeof t=="function")af(t)&&(_=1);else if(typeof t=="string")_=K2(t,a,Je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=gn(31,a,i,h),t.elementType=C,t.lanes=d,t;case H:return Lr(a.children,h,d,i);case F:_=8,h|=24;break;case Z:return t=gn(12,a,i,h|2),t.elementType=Z,t.lanes=d,t;case fe:return t=gn(13,a,i,h),t.elementType=fe,t.lanes=d,t;case he:return t=gn(19,a,i,h),t.elementType=he,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:_=10;break e;case ee:_=9;break e;case te:_=11;break e;case x:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=gn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Lr(t,i,a,o){return t=gn(7,t,o,i),t.lanes=a,t}function of(t,i,a){return t=gn(6,t,null,i),t.lanes=a,t}function tg(t){var i=gn(18,null,null,0);return i.stateNode=t,i}function lf(t,i,a){return i=gn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ng=new WeakMap;function Dn(t,i){if(typeof t=="object"&&t!==null){var a=ng.get(t);return a!==void 0?a:(i={value:t,source:i,stack:le(i)},ng.set(t,i),i)}return{value:t,source:i,stack:le(i)}}var Ia=[],Na=0,jc=null,qo=0,On=[],Mn=0,Ns=null,Ei=1,Ti="";function Gi(t,i){Ia[Na++]=qo,Ia[Na++]=jc,jc=t,qo=i}function ig(t,i,a){On[Mn++]=Ei,On[Mn++]=Ti,On[Mn++]=Ns,Ns=t;var o=Ei;t=Ti;var h=32-ht(o)-1;o&=~(1<<h),a+=1;var d=32-ht(i)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ei=1<<32-ht(i)+h|a<<h|o,Ti=d+t}else Ei=1<<d|a<<h|o,Ti=t}function cf(t){t.return!==null&&(Gi(t,1),ig(t,1,0))}function uf(t){for(;t===jc;)jc=Ia[--Na],Ia[Na]=null,qo=Ia[--Na],Ia[Na]=null;for(;t===Ns;)Ns=On[--Mn],On[Mn]=null,Ti=On[--Mn],On[Mn]=null,Ei=On[--Mn],On[Mn]=null}function sg(t,i){On[Mn++]=Ei,On[Mn++]=Ti,On[Mn++]=Ns,Ei=i.id,Ti=i.overflow,Ns=t}var Pt=null,et=null,Oe=!1,xs=null,Vn=!1,hf=Error(r(519));function Ds(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ho(Dn(i,t)),hf}function rg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[_t]=t,i[Ot]=o,a){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(a=0;a<hl.length;a++)Re(hl[a],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Re("invalid",i),mc(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Re("invalid",i);break;case"textarea":Re("invalid",i),As(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||A_(i.textContent,a)?(o.popover!=null&&(Re("beforetoggle",i),Re("toggle",i)),o.onScroll!=null&&Re("scroll",i),o.onScrollEnd!=null&&Re("scrollend",i),o.onClick!=null&&(i.onclick=Hn),i=!0):i=!1,i||Ds(t,!0)}function ag(t){for(Pt=t.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:Pt=Pt.return}}function xa(t){if(t!==Pt)return!1;if(!Oe)return ag(t),Oe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Nd(t.type,t.memoizedProps)),a=!a),a&&et&&Ds(t),ag(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=D_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));et=D_(t)}else i===27?(i=et,Gs(t.type)?(t=Vd,Vd=null,et=t):et=i):et=Pt?kn(t.stateNode.nextSibling):null;return!0}function Pr(){et=Pt=null,Oe=!1}function ff(){var t=xs;return t!==null&&(rn===null?rn=t:rn.push.apply(rn,t),xs=null),t}function Ho(t){xs===null?xs=[t]:xs.push(t)}var df=at(null),Ur=null,Qi=null;function Os(t,i,a){Se(df,i._currentValue),i._currentValue=a}function Ki(t){t._currentValue=df.current,Ge(df)}function mf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function pf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var A=d;d=h;for(var N=0;N<i.length;N++)if(A.context===i[N]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),mf(d.return,a,t),o||(_=null);break e}d=A.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),mf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Da(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var A=h.type;pn(h.pendingProps.value,_.value)||(t!==null?t.push(A):t=[A])}}else if(h===cn.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(gl):t=[gl])}h=h.return}t!==null&&pf(i,t,a,o),i.flags|=262144}function kc(t){for(t=t.firstContext;t!==null;){if(!pn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zr(t){Ur=t,Qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ut(t){return og(Ur,t)}function Lc(t,i){return Ur===null&&zr(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(t===null)throw Error(r(308));Qi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Qi=Qi.next=i;return a}var HT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},FT=s.unstable_scheduleCallback,GT=s.unstable_NormalPriority,Tt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new HT,data:new Map,refCount:0}}function Fo(t){t.refCount--,t.refCount===0&&FT(GT,function(){t.controller.abort()})}var Go=null,yf=0,Oa=0,Ma=null;function QT(t,i){if(Go===null){var a=Go=[];yf=0,Oa=Ed(),Ma={status:"pending",value:void 0,then:function(o){a.push(o)}}}return yf++,i.then(lg,lg),i}function lg(){if(--yf===0&&Go!==null){Ma!==null&&(Ma.status="fulfilled");var t=Go;Go=null,Oa=0,Ma=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function KT(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var cg=K.S;K.S=function(t,i){Qy=Xt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&QT(t,i),cg!==null&&cg(t,i)};var Br=at(null);function _f(){var t=Br.current;return t!==null?t:We.pooledCache}function Pc(t,i){i===null?Se(Br,Br.current):Se(Br,i.pool)}function ug(){var t=_f();return t===null?null:{parent:Tt._currentValue,pool:t}}var Va=Error(r(460)),vf=Error(r(474)),Uc=Error(r(542)),zc={then:function(){}};function hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Hn,Hn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t;default:if(typeof i.status=="string")i.then(Hn,Hn);else{if(t=We,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t}throw Hr=i,Va}}function qr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Hr=a,Va):a}}var Hr=null;function dg(){if(Hr===null)throw Error(r(459));var t=Hr;return Hr=null,t}function mg(t){if(t===Va||t===Uc)throw Error(r(483))}var ja=null,Qo=0;function Bc(t){var i=Qo;return Qo+=1,ja===null&&(ja=[]),fg(ja,t,i)}function Ko(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function qc(t,i){throw i.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function pg(t){function i(V,D){if(t){var P=V.deletions;P===null?(V.deletions=[D],V.flags|=16):P.push(D)}}function a(V,D){if(!t)return null;for(;D!==null;)i(V,D),D=D.sibling;return null}function o(V){for(var D=new Map;V!==null;)V.key!==null?D.set(V.key,V):D.set(V.index,V),V=V.sibling;return D}function h(V,D){return V=Fi(V,D),V.index=0,V.sibling=null,V}function d(V,D,P){return V.index=P,t?(P=V.alternate,P!==null?(P=P.index,P<D?(V.flags|=67108866,D):P):(V.flags|=67108866,D)):(V.flags|=1048576,D)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function A(V,D,P,Y){return D===null||D.tag!==6?(D=of(P,V.mode,Y),D.return=V,D):(D=h(D,P),D.return=V,D)}function N(V,D,P,Y){var de=P.type;return de===H?G(V,D,P.props.children,Y,P.key):D!==null&&(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&qr(de)===D.type)?(D=h(D,P.props),Ko(D,P),D.return=V,D):(D=Vc(P.type,P.key,P.props,null,V.mode,Y),Ko(D,P),D.return=V,D)}function U(V,D,P,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=lf(P,V.mode,Y),D.return=V,D):(D=h(D,P.children||[]),D.return=V,D)}function G(V,D,P,Y,de){return D===null||D.tag!==7?(D=Lr(P,V.mode,Y,de),D.return=V,D):(D=h(D,P),D.return=V,D)}function X(V,D,P){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=of(""+D,V.mode,P),D.return=V,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case L:return P=Vc(D.type,D.key,D.props,null,V.mode,P),Ko(P,D),P.return=V,P;case Q:return D=lf(D,V.mode,P),D.return=V,D;case w:return D=qr(D),X(V,D,P)}if(ut(D)||j(D))return D=Lr(D,V.mode,P,null),D.return=V,D;if(typeof D.then=="function")return X(V,Bc(D),P);if(D.$$typeof===J)return X(V,Lc(V,D),P);qc(V,D)}return null}function z(V,D,P,Y){var de=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return de!==null?null:A(V,D,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case L:return P.key===de?N(V,D,P,Y):null;case Q:return P.key===de?U(V,D,P,Y):null;case w:return P=qr(P),z(V,D,P,Y)}if(ut(P)||j(P))return de!==null?null:G(V,D,P,Y,null);if(typeof P.then=="function")return z(V,D,Bc(P),Y);if(P.$$typeof===J)return z(V,D,Lc(V,P),Y);qc(V,P)}return null}function q(V,D,P,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(P)||null,A(D,V,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:return V=V.get(Y.key===null?P:Y.key)||null,N(D,V,Y,de);case Q:return V=V.get(Y.key===null?P:Y.key)||null,U(D,V,Y,de);case w:return Y=qr(Y),q(V,D,P,Y,de)}if(ut(Y)||j(Y))return V=V.get(P)||null,G(D,V,Y,de,null);if(typeof Y.then=="function")return q(V,D,P,Bc(Y),de);if(Y.$$typeof===J)return q(V,D,P,Lc(D,Y),de);qc(D,Y)}return null}function ae(V,D,P,Y){for(var de=null,ke=null,ce=D,be=D=0,Ie=null;ce!==null&&be<P.length;be++){ce.index>be?(Ie=ce,ce=null):Ie=ce.sibling;var Le=z(V,ce,P[be],Y);if(Le===null){ce===null&&(ce=Ie);break}t&&ce&&Le.alternate===null&&i(V,ce),D=d(Le,D,be),ke===null?de=Le:ke.sibling=Le,ke=Le,ce=Ie}if(be===P.length)return a(V,ce),Oe&&Gi(V,be),de;if(ce===null){for(;be<P.length;be++)ce=X(V,P[be],Y),ce!==null&&(D=d(ce,D,be),ke===null?de=ce:ke.sibling=ce,ke=ce);return Oe&&Gi(V,be),de}for(ce=o(ce);be<P.length;be++)Ie=q(ce,V,be,P[be],Y),Ie!==null&&(t&&Ie.alternate!==null&&ce.delete(Ie.key===null?be:Ie.key),D=d(Ie,D,be),ke===null?de=Ie:ke.sibling=Ie,ke=Ie);return t&&ce.forEach(function($s){return i(V,$s)}),Oe&&Gi(V,be),de}function ge(V,D,P,Y){if(P==null)throw Error(r(151));for(var de=null,ke=null,ce=D,be=D=0,Ie=null,Le=P.next();ce!==null&&!Le.done;be++,Le=P.next()){ce.index>be?(Ie=ce,ce=null):Ie=ce.sibling;var $s=z(V,ce,Le.value,Y);if($s===null){ce===null&&(ce=Ie);break}t&&ce&&$s.alternate===null&&i(V,ce),D=d($s,D,be),ke===null?de=$s:ke.sibling=$s,ke=$s,ce=Ie}if(Le.done)return a(V,ce),Oe&&Gi(V,be),de;if(ce===null){for(;!Le.done;be++,Le=P.next())Le=X(V,Le.value,Y),Le!==null&&(D=d(Le,D,be),ke===null?de=Le:ke.sibling=Le,ke=Le);return Oe&&Gi(V,be),de}for(ce=o(ce);!Le.done;be++,Le=P.next())Le=q(ce,V,be,Le.value,Y),Le!==null&&(t&&Le.alternate!==null&&ce.delete(Le.key===null?be:Le.key),D=d(Le,D,be),ke===null?de=Le:ke.sibling=Le,ke=Le);return t&&ce.forEach(function(sA){return i(V,sA)}),Oe&&Gi(V,be),de}function Xe(V,D,P,Y){if(typeof P=="object"&&P!==null&&P.type===H&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case L:e:{for(var de=P.key;D!==null;){if(D.key===de){if(de=P.type,de===H){if(D.tag===7){a(V,D.sibling),Y=h(D,P.props.children),Y.return=V,V=Y;break e}}else if(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&qr(de)===D.type){a(V,D.sibling),Y=h(D,P.props),Ko(Y,P),Y.return=V,V=Y;break e}a(V,D);break}else i(V,D);D=D.sibling}P.type===H?(Y=Lr(P.props.children,V.mode,Y,P.key),Y.return=V,V=Y):(Y=Vc(P.type,P.key,P.props,null,V.mode,Y),Ko(Y,P),Y.return=V,V=Y)}return _(V);case Q:e:{for(de=P.key;D!==null;){if(D.key===de)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){a(V,D.sibling),Y=h(D,P.children||[]),Y.return=V,V=Y;break e}else{a(V,D);break}else i(V,D);D=D.sibling}Y=lf(P,V.mode,Y),Y.return=V,V=Y}return _(V);case w:return P=qr(P),Xe(V,D,P,Y)}if(ut(P))return ae(V,D,P,Y);if(j(P)){if(de=j(P),typeof de!="function")throw Error(r(150));return P=de.call(P),ge(V,D,P,Y)}if(typeof P.then=="function")return Xe(V,D,Bc(P),Y);if(P.$$typeof===J)return Xe(V,D,Lc(V,P),Y);qc(V,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,D!==null&&D.tag===6?(a(V,D.sibling),Y=h(D,P),Y.return=V,V=Y):(a(V,D),Y=of(P,V.mode,Y),Y.return=V,V=Y),_(V)):a(V,D)}return function(V,D,P,Y){try{Qo=0;var de=Xe(V,D,P,Y);return ja=null,de}catch(ce){if(ce===Va||ce===Uc)throw ce;var ke=gn(29,ce,null,V.mode);return ke.lanes=Y,ke.return=V,ke}finally{}}}var Fr=pg(!0),gg=pg(!1),Ms=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function js(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ue&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Mc(t),Jp(t,null,a),i}return Oc(t,o,i,a),Mc(t)}function Yo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,To(t,a)}}function Af(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var bf=!1;function Xo(){if(bf){var t=Ma;if(t!==null)throw t}}function $o(t,i,a,o){bf=!1;var h=t.updateQueue;Ms=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var N=A,U=N.next;N.next=null,_===null?d=U:_.next=U,_=N;var G=t.alternate;G!==null&&(G=G.updateQueue,A=G.lastBaseUpdate,A!==_&&(A===null?G.firstBaseUpdate=U:A.next=U,G.lastBaseUpdate=N))}if(d!==null){var X=h.baseState;_=0,G=U=N=null,A=d;do{var z=A.lane&-536870913,q=z!==A.lane;if(q?(Ce&z)===z:(o&z)===z){z!==0&&z===Oa&&(bf=!0),G!==null&&(G=G.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ae=t,ge=A;z=i;var Xe=a;switch(ge.tag){case 1:if(ae=ge.payload,typeof ae=="function"){X=ae.call(Xe,X,z);break e}X=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ge.payload,z=typeof ae=="function"?ae.call(Xe,X,z):ae,z==null)break e;X=S({},X,z);break e;case 2:Ms=!0}}z=A.callback,z!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(U=G=q,N=X):G=G.next=q,_|=z;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;q=A,A=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);G===null&&(N=X),h.baseState=N,h.firstBaseUpdate=U,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),zs|=_,t.lanes=_,t.memoizedState=X}}function yg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function _g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yg(a[t],i)}var ka=at(null),Hc=at(0);function vg(t,i){t=ns,Se(Hc,t),Se(ka,i),ns=t|i.baseLanes}function Sf(){Se(Hc,ns),Se(ka,ka.current)}function wf(){ns=Hc.current,Ge(ka),Ge(Hc)}var yn=at(null),jn=null;function ks(t){var i=t.alternate;Se(dt,dt.current&1),Se(yn,t),jn===null&&(i===null||ka.current!==null||i.memoizedState!==null)&&(jn=t)}function Rf(t){Se(dt,dt.current),Se(yn,t),jn===null&&(jn=t)}function Eg(t){t.tag===22?(Se(dt,dt.current),Se(yn,t),jn===null&&(jn=t)):Ls()}function Ls(){Se(dt,dt.current),Se(yn,yn.current)}function _n(t){Ge(yn),jn===t&&(jn=null),Ge(dt)}var dt=at(0);function Fc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Od(a)||Md(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,Ae=null,Ke=null,At=null,Gc=!1,La=!1,Gr=!1,Qc=0,Wo=0,Pa=null,YT=0;function ot(){throw Error(r(321))}function Cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!pn(t[a],i[a]))return!1;return!0}function If(t,i,a,o,h,d){return Yi=d,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?iy:Hf,Gr=!1,d=a(o,h),Gr=!1,La&&(d=Ag(i,a,o,h)),Tg(t),d}function Tg(t){K.H=el;var i=Ke!==null&&Ke.next!==null;if(Yi=0,At=Ke=Ae=null,Gc=!1,Wo=0,Pa=null,i)throw Error(r(300));t===null||bt||(t=t.dependencies,t!==null&&kc(t)&&(bt=!0))}function Ag(t,i,a,o){Ae=t;var h=0;do{if(La&&(Pa=null),Wo=0,La=!1,25<=h)throw Error(r(301));if(h+=1,At=Ke=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=sy,d=i(a,o)}while(La);return d}function XT(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?Zo(i):i,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Ae.flags|=1024),i}function Nf(){var t=Qc!==0;return Qc=0,t}function xf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Df(t){if(Gc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Gc=!1}Yi=0,At=Ke=Ae=null,La=!1,Wo=Qc=0,Pa=null}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ae.memoizedState=At=t:At=At.next=t,At}function mt(){if(Ke===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var i=At===null?Ae.memoizedState:At.next;if(i!==null)At=i,Ke=t;else{if(t===null)throw Ae.alternate===null?Error(r(467)):Error(r(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},At===null?Ae.memoizedState=At=t:At=At.next=t}return At}function Kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(t){var i=Wo;return Wo+=1,Pa===null&&(Pa=[]),t=fg(Pa,t,i),i=Ae,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?iy:Hf),t}function Yc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zo(t);if(t.$$typeof===J)return Ut(t)}throw Error(r(438,String(t)))}function Of(t){var i=null,a=Ae.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ae.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Kc(),Ae.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=M;return i.index++,a}function Xi(t,i){return typeof i=="function"?i(t):i}function Xc(t){var i=mt();return Mf(i,Ke,t)}function Mf(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var A=_=null,N=null,U=i,G=!1;do{var X=U.lane&-536870913;if(X!==U.lane?(Ce&X)===X:(Yi&X)===X){var z=U.revertLane;if(z===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),X===Oa&&(G=!0);else if((Yi&z)===z){U=U.next,z===Oa&&(G=!0);continue}else X={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(A=N=X,_=d):N=N.next=X,Ae.lanes|=z,zs|=z;X=U.action,Gr&&a(d,X),d=U.hasEagerState?U.eagerState:a(d,X)}else z={lane:X,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(A=N=z,_=d):N=N.next=z,Ae.lanes|=X,zs|=X;U=U.next}while(U!==null&&U!==i);if(N===null?_=d:N.next=A,!pn(d,t.memoizedState)&&(bt=!0,G&&(a=Ma,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Vf(t){var i=mt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);pn(d,i.memoizedState)||(bt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function bg(t,i,a){var o=Ae,h=mt(),d=Oe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!pn((Ke||h).memoizedState,a);if(_&&(h.memoizedState=a,bt=!0),h=h.queue,Lf(Rg.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||At!==null&&At.memoizedState.tag&1){if(o.flags|=2048,Ua(9,{destroy:void 0},wg.bind(null,o,h,a,i),null),We===null)throw Error(r(349));d||(Yi&127)!==0||Sg(o,i,a)}return a}function Sg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ae.updateQueue,i===null?(i=Kc(),Ae.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function wg(t,i,a,o){i.value=a,i.getSnapshot=o,Cg(i)&&Ig(t)}function Rg(t,i,a){return a(function(){Cg(i)&&Ig(t)})}function Cg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!pn(t,a)}catch{return!0}}function Ig(t){var i=kr(t,2);i!==null&&an(i,t,2)}function jf(t){var i=Wt();if(typeof t=="function"){var a=t;if(t=a(),Gr){wn(!0);try{a()}finally{wn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:t},i}function Ng(t,i,a,o){return t.baseState=a,Mf(t,Ke,typeof o=="function"?o:Xi)}function $T(t,i,a,o,h){if(Zc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,xg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function xg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var A=a(h,o),N=K.S;N!==null&&N(_,A),Dg(t,i,A)}catch(U){kf(t,i,U)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(h,o),Dg(t,i,d)}catch(U){kf(t,i,U)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Og(t,i,o)},function(o){return kf(t,i,o)}):Og(t,i,a)}function Og(t,i,a){i.status="fulfilled",i.value=a,Mg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,xg(t,a)))}function kf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Mg(i),i=i.next;while(i!==o)}t.action=null}function Mg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Vg(t,i){return i}function jg(t,i){if(Oe){var a=We.formState;if(a!==null){e:{var o=Ae;if(Oe){if(et){t:{for(var h=et,d=Vn;h.nodeType!==8;){if(!d){h=null;break t}if(h=kn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){et=kn(h.nextSibling),o=h.data==="F!";break e}}Ds(o)}o=!1}o&&(i=a[0])}}return a=Wt(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:i},a.queue=o,a=ey.bind(null,Ae,o),o.dispatch=a,o=jf(!1),d=qf.bind(null,Ae,!1,o.queue),o=Wt(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=$T.bind(null,Ae,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function kg(t){var i=mt();return Lg(i,Ke,t)}function Lg(t,i,a){if(i=Mf(t,i,Vg)[0],t=Xc(Xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Zo(i)}catch(_){throw _===Va?Uc:_}else o=i;i=mt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ae.flags|=2048,Ua(9,{destroy:void 0},WT.bind(null,h,a),null)),[o,d,t]}function WT(t,i){t.action=i}function Pg(t){var i=mt(),a=Ke;if(a!==null)return Lg(i,a,t);mt(),i=i.memoizedState,a=mt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ua(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=Kc(),Ae.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Ug(){return mt().memoizedState}function $c(t,i,a,o){var h=Wt();Ae.flags|=t,h.memoizedState=Ua(1|i,{destroy:void 0},a,o===void 0?null:o)}function Wc(t,i,a,o){var h=mt();o=o===void 0?null:o;var d=h.memoizedState.inst;Ke!==null&&o!==null&&Cf(o,Ke.memoizedState.deps)?h.memoizedState=Ua(i,d,a,o):(Ae.flags|=t,h.memoizedState=Ua(1|i,d,a,o))}function zg(t,i){$c(8390656,8,t,i)}function Lf(t,i){Wc(2048,8,t,i)}function ZT(t){Ae.flags|=4;var i=Ae.updateQueue;if(i===null)i=Kc(),Ae.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Bg(t){var i=mt().memoizedState;return ZT({ref:i,nextImpl:t}),function(){if((Ue&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function qg(t,i){return Wc(4,2,t,i)}function Hg(t,i){return Wc(4,4,t,i)}function Fg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,a){a=a!=null?a.concat([t]):null,Wc(4,4,Fg.bind(null,i,t),a)}function Pf(){}function Qg(t,i){var a=mt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Cf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Kg(t,i){var a=mt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Cf(i,o[1]))return o[0];if(o=t(),Gr){wn(!0);try{t()}finally{wn(!1)}}return a.memoizedState=[o,i],o}function Uf(t,i,a){return a===void 0||(Yi&1073741824)!==0&&(Ce&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Yy(),Ae.lanes|=t,zs|=t,a)}function Yg(t,i,a,o){return pn(a,i)?a:ka.current!==null?(t=Uf(t,a,o),pn(t,i)||(bt=!0),t):(Yi&42)===0||(Yi&1073741824)!==0&&(Ce&261930)===0?(bt=!0,t.memoizedState=a):(t=Yy(),Ae.lanes|=t,zs|=t,i)}function Xg(t,i,a,o,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var _=K.T,A={};K.T=A,qf(t,!1,i,a);try{var N=h(),U=K.S;if(U!==null&&U(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=KT(N,o);Jo(t,i,G,Tn(t))}else Jo(t,i,o,Tn(t))}catch(X){Jo(t,i,{then:function(){},status:"rejected",reason:X},Tn())}finally{ie.p=d,_!==null&&A.types!==null&&(_.types=A.types),K.T=_}}function JT(){}function zf(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=$g(t).queue;Xg(t,h,i,pe,a===null?JT:function(){return Wg(t),a(o)})}function $g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Wg(t){var i=$g(t);i.next===null&&(i=t.alternate.memoizedState),Jo(t,i.next.queue,{},Tn())}function Bf(){return Ut(gl)}function Zg(){return mt().memoizedState}function Jg(){return mt().memoizedState}function e2(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Tn();t=Vs(a);var o=js(i,t,a);o!==null&&(an(o,i,a),Yo(o,i,a)),i={cache:gf()},t.payload=i;return}i=i.return}}function t2(t,i,a){var o=Tn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zc(t)?ty(i,a):(a=rf(t,i,a,o),a!==null&&(an(a,t,o),ny(a,i,o)))}function ey(t,i,a){var o=Tn();Jo(t,i,a,o)}function Jo(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zc(t))ty(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,A=d(_,a);if(h.hasEagerState=!0,h.eagerState=A,pn(A,_))return Oc(t,i,h,0),We===null&&Dc(),!1}catch{}finally{}if(a=rf(t,i,h,o),a!==null)return an(a,t,o),ny(a,i,o),!0}return!1}function qf(t,i,a,o){if(o={lane:2,revertLane:Ed(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zc(t)){if(i)throw Error(r(479))}else i=rf(t,a,o,2),i!==null&&an(i,t,2)}function Zc(t){var i=t.alternate;return t===Ae||i!==null&&i===Ae}function ty(t,i){La=Gc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ny(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,To(t,a)}}var el={readContext:Ut,use:Yc,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};el.useEffectEvent=ot;var iy={readContext:Ut,use:Yc,useCallback:function(t,i){return Wt().memoizedState=[t,i===void 0?null:i],t},useContext:Ut,useEffect:zg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,$c(4194308,4,Fg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return $c(4194308,4,t,i)},useInsertionEffect:function(t,i){$c(4,2,t,i)},useMemo:function(t,i){var a=Wt();i=i===void 0?null:i;var o=t();if(Gr){wn(!0);try{t()}finally{wn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Wt();if(a!==void 0){var h=a(i);if(Gr){wn(!0);try{a(i)}finally{wn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=t2.bind(null,Ae,t),[o.memoizedState,t]},useRef:function(t){var i=Wt();return t={current:t},i.memoizedState=t},useState:function(t){t=jf(t);var i=t.queue,a=ey.bind(null,Ae,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Pf,useDeferredValue:function(t,i){var a=Wt();return Uf(a,t,i)},useTransition:function(){var t=jf(!1);return t=Xg.bind(null,Ae,t.queue,!0,!1),Wt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ae,h=Wt();if(Oe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),We===null)throw Error(r(349));(Ce&127)!==0||Sg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,zg(Rg.bind(null,o,d,t),[t]),o.flags|=2048,Ua(9,{destroy:void 0},wg.bind(null,o,d,a,i),null),a},useId:function(){var t=Wt(),i=We.identifierPrefix;if(Oe){var a=Ti,o=Ei;a=(o&~(1<<32-ht(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Qc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=YT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Bf,useFormState:jg,useActionState:jg,useOptimistic:function(t){var i=Wt();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qf.bind(null,Ae,!0,a),a.dispatch=i,[t,i]},useMemoCache:Of,useCacheRefresh:function(){return Wt().memoizedState=e2.bind(null,Ae)},useEffectEvent:function(t){var i=Wt(),a={impl:t};return i.memoizedState=a,function(){if((Ue&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Hf={readContext:Ut,use:Yc,useCallback:Qg,useContext:Ut,useEffect:Lf,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:Xc,useRef:Ug,useState:function(){return Xc(Xi)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=mt();return Yg(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Xc(Xi)[0],i=mt().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:bg,useId:Zg,useHostTransitionStatus:Bf,useFormState:kg,useActionState:kg,useOptimistic:function(t,i){var a=mt();return Ng(a,Ke,t,i)},useMemoCache:Of,useCacheRefresh:Jg};Hf.useEffectEvent=Bg;var sy={readContext:Ut,use:Yc,useCallback:Qg,useContext:Ut,useEffect:Lf,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:Vf,useRef:Ug,useState:function(){return Vf(Xi)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=mt();return Ke===null?Uf(a,t,i):Yg(a,Ke.memoizedState,t,i)},useTransition:function(){var t=Vf(Xi)[0],i=mt().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:bg,useId:Zg,useHostTransitionStatus:Bf,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=mt();return Ke!==null?Ng(a,Ke,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Of,useCacheRefresh:Jg};sy.useEffectEvent=Bg;function Ff(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Gf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Tn(),h=Vs(o);h.payload=i,a!=null&&(h.callback=a),i=js(t,h,o),i!==null&&(an(i,t,o),Yo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Tn(),h=Vs(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=js(t,h,o),i!==null&&(an(i,t,o),Yo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Tn(),o=Vs(a);o.tag=2,i!=null&&(o.callback=i),i=js(t,o,a),i!==null&&(an(i,t,a),Yo(i,t,a))}};function ry(t,i,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):i.prototype&&i.prototype.isPureReactComponent?!zo(a,o)||!zo(h,d):!0}function ay(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Gf.enqueueReplaceState(i,i.state,null)}function Qr(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function oy(t){xc(t)}function ly(t){console.error(t)}function cy(t){xc(t)}function Jc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function uy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Qf(t,i,a){return a=Vs(a),a.tag=3,a.payload={element:null},a.callback=function(){Jc(t,i)},a}function hy(t){return t=Vs(t),t.tag=3,t}function fy(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){uy(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){uy(i,a,o),typeof h!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function n2(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Da(i,a,h,!0),a=yn.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?hu():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===zc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),yd(t,o,h)),!1;case 22:return a.flags|=65536,o===zc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),yd(t,o,h)),!1}throw Error(r(435,a.tag))}return yd(t,o,h),hu(),!1}if(Oe)return i=yn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==hf&&(t=Error(r(422),{cause:o}),Ho(Dn(t,a)))):(o!==hf&&(i=Error(r(423),{cause:o}),Ho(Dn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Dn(o,a),h=Qf(t.stateNode,o,h),Af(t,h),lt!==4&&(lt=2)),!1;var d=Error(r(520),{cause:o});if(d=Dn(d,a),ll===null?ll=[d]:ll.push(d),lt!==4&&(lt=2),i===null)return!0;o=Dn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Qf(a.stateNode,o,t),Af(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Bs===null||!Bs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),fy(h,t,a,o),Af(a,h),!1}a=a.return}while(a!==null);return!1}var Kf=Error(r(461)),bt=!1;function zt(t,i,a,o){i.child=t===null?gg(i,null,a,o):Fr(i,t.child,a,o)}function dy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var _={};for(var A in o)A!=="ref"&&(_[A]=o[A])}else _=o;return zr(i),o=If(t,i,a,_,d,h),A=Nf(),t!==null&&!bt?(xf(t,i,h),$i(t,i,h)):(Oe&&A&&cf(i),i.flags|=1,zt(t,i,o,h),i.child)}function my(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,py(t,i,d,o,h)):(t=Vc(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!td(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:zo,a(_,o)&&t.ref===i.ref)return $i(t,i,h)}return i.flags|=1,t=Fi(d,o),t.ref=i.ref,t.return=i,i.child=t}function py(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(zo(d,o)&&t.ref===i.ref)if(bt=!1,i.pendingProps=o=d,td(t,h))(t.flags&131072)!==0&&(bt=!0);else return i.lanes=t.lanes,$i(t,i,h)}return Yf(t,i,a,o,h)}function gy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return yy(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pc(i,d!==null?d.cachePool:null),d!==null?vg(i,d):Sf(),Eg(i);else return o=i.lanes=536870912,yy(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Pc(i,d.cachePool),vg(i,d),Ls(),i.memoizedState=null):(t!==null&&Pc(i,null),Sf(),Ls());return zt(t,i,h,a),i.child}function tl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yy(t,i,a,o,h){var d=_f();return d=d===null?null:{parent:Tt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Pc(i,null),Sf(),Eg(i),t!==null&&Da(t,i,o,!0),i.childLanes=h,null}function eu(t,i){return i=nu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function _y(t,i,a){return Fr(i,t.child,null,a),t=eu(i,i.pendingProps),t.flags|=2,_n(i),i.memoizedState=null,t}function i2(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Oe){if(o.mode==="hidden")return t=eu(i,o),i.lanes=536870912,tl(null,t);if(Rf(i),(t=et)?(t=x_(t,Vn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ns!==null?{id:Ei,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Pt=i,et=null)):t=null,t===null)throw Ds(i);return i.lanes=536870912,null}return eu(i,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Rf(i),h)if(i.flags&256)i.flags&=-257,i=_y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(bt||Da(t,i,a,!1),h=(a&t.childLanes)!==0,bt||h){if(o=We,o!==null&&(_=Ao(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,kr(t,_),an(o,t,_),Kf;hu(),i=_y(t,i,a)}else t=d.treeContext,et=kn(_.nextSibling),Pt=i,Oe=!0,xs=null,Vn=!1,t!==null&&sg(i,t),i=eu(i,o),i.flags|=4096;return i}return t=Fi(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function tu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Yf(t,i,a,o,h){return zr(i),a=If(t,i,a,o,void 0,h),o=Nf(),t!==null&&!bt?(xf(t,i,h),$i(t,i,h)):(Oe&&o&&cf(i),i.flags|=1,zt(t,i,a,h),i.child)}function vy(t,i,a,o,h,d){return zr(i),i.updateQueue=null,a=Ag(i,o,a,h),Tg(t),o=Nf(),t!==null&&!bt?(xf(t,i,d),$i(t,i,d)):(Oe&&o&&cf(i),i.flags|=1,zt(t,i,a,d),i.child)}function Ey(t,i,a,o,h){if(zr(i),i.stateNode===null){var d=Ca,_=a.contextType;typeof _=="object"&&_!==null&&(d=Ut(_)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Ef(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Ut(_):Ca,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Ff(i,a,_,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Gf.enqueueReplaceState(d,d.state,null),$o(i,o,d,h),Xo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var A=i.memoizedProps,N=Qr(a,A);d.props=N;var U=d.context,G=a.contextType;_=Ca,typeof G=="object"&&G!==null&&(_=Ut(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||U!==_)&&ay(i,d,o,_),Ms=!1;var z=i.memoizedState;d.state=z,$o(i,o,d,h),Xo(),U=i.memoizedState,A||z!==U||Ms?(typeof X=="function"&&(Ff(i,a,X,o),U=i.memoizedState),(N=Ms||ry(i,a,N,o,z,U,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=U),d.props=o,d.state=U,d.context=_,o=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Tf(t,i),_=i.memoizedProps,G=Qr(a,_),d.props=G,X=i.pendingProps,z=d.context,U=a.contextType,N=Ca,typeof U=="object"&&U!==null&&(N=Ut(U)),A=a.getDerivedStateFromProps,(U=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||z!==N)&&ay(i,d,o,N),Ms=!1,z=i.memoizedState,d.state=z,$o(i,o,d,h),Xo();var q=i.memoizedState;_!==X||z!==q||Ms||t!==null&&t.dependencies!==null&&kc(t.dependencies)?(typeof A=="function"&&(Ff(i,a,A,o),q=i.memoizedState),(G=Ms||ry(i,a,G,o,z,q,N)||t!==null&&t.dependencies!==null&&kc(t.dependencies))?(U||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,q,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,q,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=q),d.props=o,d.state=q,d.context=N,o=G):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,tu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Fr(i,t.child,null,h),i.child=Fr(i,null,a,h)):zt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=$i(t,i,h),t}function Ty(t,i,a,o){return Pr(),i.flags|=256,zt(t,i,a,o),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(t){return{baseLanes:t,cachePool:ug()}}function Wf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=En),t}function Ay(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(dt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Oe){if(h?ks(i):Ls(),(t=et)?(t=x_(t,Vn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ns!==null?{id:Ei,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Pt=i,et=null)):t=null,t===null)throw Ds(i);return Md(t)?i.lanes=32:i.lanes=536870912,null}var A=o.children;return o=o.fallback,h?(Ls(),h=i.mode,A=nu({mode:"hidden",children:A},h),o=Lr(o,h,a,null),A.return=i,o.return=i,A.sibling=o,i.child=A,o=i.child,o.memoizedState=$f(a),o.childLanes=Wf(t,_,a),i.memoizedState=Xf,tl(null,o)):(ks(i),Zf(i,A))}var N=t.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(d)i.flags&256?(ks(i),i.flags&=-257,i=Jf(t,i,a)):i.memoizedState!==null?(Ls(),i.child=t.child,i.flags|=128,i=null):(Ls(),A=o.fallback,h=i.mode,o=nu({mode:"visible",children:o.children},h),A=Lr(A,h,a,null),A.flags|=2,o.return=i,A.return=i,o.sibling=A,i.child=o,Fr(i,t.child,null,a),o=i.child,o.memoizedState=$f(a),o.childLanes=Wf(t,_,a),i.memoizedState=Xf,i=tl(null,o));else if(ks(i),Md(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var U=_.dgst;_=U,o=Error(r(419)),o.stack="",o.digest=_,Ho({value:o,source:null,stack:null}),i=Jf(t,i,a)}else if(bt||Da(t,i,a,!1),_=(a&t.childLanes)!==0,bt||_){if(_=We,_!==null&&(o=Ao(_,a),o!==0&&o!==N.retryLane))throw N.retryLane=o,kr(t,o),an(_,t,o),Kf;Od(A)||hu(),i=Jf(t,i,a)}else Od(A)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,et=kn(A.nextSibling),Pt=i,Oe=!0,xs=null,Vn=!1,t!==null&&sg(i,t),i=Zf(i,o.children),i.flags|=4096);return i}return h?(Ls(),A=o.fallback,h=i.mode,N=t.child,U=N.sibling,o=Fi(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,U!==null?A=Fi(U,A):(A=Lr(A,h,a,null),A.flags|=2),A.return=i,o.return=i,o.sibling=A,i.child=o,tl(null,o),o=i.child,A=t.child.memoizedState,A===null?A=$f(a):(h=A.cachePool,h!==null?(N=Tt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=ug(),A={baseLanes:A.baseLanes|a,cachePool:h}),o.memoizedState=A,o.childLanes=Wf(t,_,a),i.memoizedState=Xf,tl(t.child,o)):(ks(i),a=t.child,t=a.sibling,a=Fi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Zf(t,i){return i=nu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function nu(t,i){return t=gn(22,t,null,i),t.lanes=0,t}function Jf(t,i,a){return Fr(i,t.child,null,a),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function by(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),mf(t.return,i,a)}function ed(t,i,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Sy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=dt.current,A=(_&2)!==0;if(A?(_=_&1|2,i.flags|=128):_&=1,Se(dt,_),zt(t,i,o,a),o=Oe?qo:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,a,i);else if(t.tag===19)by(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Fc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ed(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Fc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ed(i,!0,a,null,d,o);break;case"together":ed(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function $i(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),zs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Da(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Fi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Fi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function td(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&kc(t)))}function s2(t,i,a){switch(i.tag){case 3:ni(i,i.stateNode.containerInfo),Os(i,Tt,t.memoizedState.cache),Pr();break;case 27:case 5:gs(i);break;case 4:ni(i,i.stateNode.containerInfo);break;case 10:Os(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Rf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(ks(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Ay(t,i,a):(ks(i),t=$i(t,i,a),t!==null?t.sibling:null);ks(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Da(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Sy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Se(dt,dt.current),o)break;return null;case 22:return i.lanes=0,gy(t,i,a,i.pendingProps);case 24:Os(i,Tt,t.memoizedState.cache)}return $i(t,i,a)}function wy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)bt=!0;else{if(!td(t,a)&&(i.flags&128)===0)return bt=!1,s2(t,i,a);bt=(t.flags&131072)!==0}else bt=!1,Oe&&(i.flags&1048576)!==0&&ig(i,qo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=qr(i.elementType),i.type=t,typeof t=="function")af(t)?(o=Qr(t,o),i.tag=1,i=Ey(null,i,t,o,a)):(i.tag=0,i=Yf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===te){i.tag=11,i=dy(null,i,t,o,a);break e}else if(h===x){i.tag=14,i=my(null,i,t,o,a);break e}}throw i=rt(t)||t,Error(r(306,i,""))}}return i;case 0:return Yf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Qr(o,i.pendingProps),Ey(t,i,o,h,a);case 3:e:{if(ni(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Tf(t,i),$o(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Os(i,Tt,o),o!==d.cache&&pf(i,[Tt],a,!0),Xo(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ty(t,i,o,a);break e}else if(o!==h){h=Dn(Error(r(424)),i),Ho(h),i=Ty(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(et=kn(t.firstChild),Pt=i,Oe=!0,xs=null,Vn=!0,a=gg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pr(),o===h){i=$i(t,i,a);break e}zt(t,i,o,a)}i=i.child}return i;case 26:return tu(t,i),t===null?(a=k_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Oe||(a=i.type,t=i.pendingProps,o=_u(Zt.current).createElement(a),o[_t]=i,o[Ot]=t,Bt(o,a,t),vt(o),i.stateNode=o):i.memoizedState=k_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return gs(i),t===null&&Oe&&(o=i.stateNode=M_(i.type,i.pendingProps,Zt.current),Pt=i,Vn=!0,h=et,Gs(i.type)?(Vd=h,et=kn(o.firstChild)):et=h),zt(t,i,i.pendingProps.children,a),tu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Oe&&((h=o=et)&&(o=V2(o,i.type,i.pendingProps,Vn),o!==null?(i.stateNode=o,Pt=i,et=kn(o.firstChild),Vn=!1,h=!0):h=!1),h||Ds(i)),gs(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,Nd(h,d)?o=null:_!==null&&Nd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=If(t,i,XT,null,null,a),gl._currentValue=h),tu(t,i),zt(t,i,o,a),i.child;case 6:return t===null&&Oe&&((t=a=et)&&(a=j2(a,i.pendingProps,Vn),a!==null?(i.stateNode=a,Pt=i,et=null,t=!0):t=!1),t||Ds(i)),null;case 13:return Ay(t,i,a);case 4:return ni(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Fr(i,null,o,a):zt(t,i,o,a),i.child;case 11:return dy(t,i,i.type,i.pendingProps,a);case 7:return zt(t,i,i.pendingProps,a),i.child;case 8:return zt(t,i,i.pendingProps.children,a),i.child;case 12:return zt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Os(i,i.type,o.value),zt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,zr(i),h=Ut(h),o=o(h),i.flags|=1,zt(t,i,o,a),i.child;case 14:return my(t,i,i.type,i.pendingProps,a);case 15:return py(t,i,i.type,i.pendingProps,a);case 19:return Sy(t,i,a);case 31:return i2(t,i,a);case 22:return gy(t,i,a,i.pendingProps);case 24:return zr(i),o=Ut(Tt),t===null?(h=_f(),h===null&&(h=We,d=gf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Ef(i),Os(i,Tt,h)):((t.lanes&a)!==0&&(Tf(t,i),$o(i,null,null,a),Xo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Os(i,Tt,o)):(o=d.cache,Os(i,Tt,o),o!==h.cache&&pf(i,[Tt],a,!0))),zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Wi(t){t.flags|=4}function nd(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Zy())t.flags|=8192;else throw Hr=zc,vf}else t.flags&=-16777217}function Ry(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B_(i))if(Zy())t.flags|=8192;else throw Hr=zc,vf}function iu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?cc():536870912,t.lanes|=i,Ha|=i)}function nl(t,i){if(!Oe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function tt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function r2(t,i,a){var o=i.pendingProps;switch(uf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(i),null;case 1:return tt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ki(Tt),un(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xa(i)?Wi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ff())),tt(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(Wi(i),d!==null?(tt(i),Ry(i,d)):(tt(i),nd(i,h,null,o,a))):d?d!==t.memoizedState?(Wi(i),tt(i),Ry(i,d)):(tt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&Wi(i),tt(i),nd(i,h,t,o,a)),null;case 27:if(It(i),a=Zt.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Wi(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return tt(i),null}t=Je.current,xa(i)?rg(i):(t=M_(h,o,a),i.stateNode=t,Wi(i))}return tt(i),null;case 5:if(It(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Wi(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return tt(i),null}if(d=Je.current,xa(i))rg(i);else{var _=_u(Zt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[_t]=i,d[Ot]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Bt(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Wi(i)}}return tt(i),nd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Wi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=Zt.current,xa(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Pt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[_t]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||A_(t.nodeValue,a)),t||Ds(i,!0)}else t=_u(t).createTextNode(o),t[_t]=i,i.stateNode=t}return tt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=xa(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[_t]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),t=!1}else a=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(_n(i),i):(_n(i),null);if((i.flags&128)!==0)throw Error(r(558))}return tt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=xa(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[_t]=i}else Pr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),h=!1}else h=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(_n(i),i):(_n(i),null)}return _n(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),iu(i,i.updateQueue),tt(i),null);case 4:return un(),t===null&&Sd(i.stateNode.containerInfo),tt(i),null;case 10:return Ki(i.type),tt(i),null;case 19:if(Ge(dt),o=i.memoizedState,o===null)return tt(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)nl(o,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Fc(t),d!==null){for(i.flags|=128,nl(o,!1),t=d.updateQueue,i.updateQueue=t,iu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)eg(a,t),a=a.sibling;return Se(dt,dt.current&1|2),Oe&&Gi(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Xt()>lu&&(i.flags|=128,h=!0,nl(o,!1),i.lanes=4194304)}else{if(!h)if(t=Fc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,iu(i,t),nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Oe)return tt(i),null}else 2*Xt()-o.renderingStartTime>lu&&a!==536870912&&(i.flags|=128,h=!0,nl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xt(),t.sibling=null,a=dt.current,Se(dt,h?a&1|2:a&1),Oe&&Gi(i,o.treeForkCount),t):(tt(i),null);case 22:case 23:return _n(i),wf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(tt(i),i.subtreeFlags&6&&(i.flags|=8192)):tt(i),a=i.updateQueue,a!==null&&iu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&Ge(Br),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ki(Tt),tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function a2(t,i){switch(uf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ki(Tt),un(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return It(i),null;case 31:if(i.memoizedState!==null){if(_n(i),i.alternate===null)throw Error(r(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(_n(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Pr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Ge(dt),null;case 4:return un(),null;case 10:return Ki(i.type),null;case 22:case 23:return _n(i),wf(),t!==null&&Ge(Br),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ki(Tt),null;case 25:return null;default:return null}}function Cy(t,i){switch(uf(i),i.tag){case 3:Ki(Tt),un();break;case 26:case 27:case 5:It(i);break;case 4:un();break;case 31:i.memoizedState!==null&&_n(i);break;case 13:_n(i);break;case 19:Ge(dt);break;case 10:Ki(i.type);break;case 22:case 23:_n(i),wf(),t!==null&&Ge(Br);break;case 24:Ki(Tt)}}function il(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(A){Fe(i,i.return,A)}}function Ps(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,h=i;var N=a,U=A;try{U()}catch(G){Fe(h,N,G)}}}o=o.next}while(o!==d)}}catch(G){Fe(i,i.return,G)}}function Iy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{_g(i,a)}catch(o){Fe(t,t.return,o)}}}function Ny(t,i,a){a.props=Qr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Fe(t,i,o)}}function sl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Fe(t,i,h)}}function Ai(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Fe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Fe(t,i,h)}else a.current=null}function xy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Fe(t,t.return,h)}}function id(t,i,a){try{var o=t.stateNode;I2(o,t.type,a,i),o[Ot]=i}catch(h){Fe(t,t.return,h)}}function Dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gs(t.type)||t.tag===4}function sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Hn));else if(o!==4&&(o===27&&Gs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(rd(t,i,a),t=t.sibling;t!==null;)rd(t,i,a),t=t.sibling}function su(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Gs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(su(t,i,a),t=t.sibling;t!==null;)su(t,i,a),t=t.sibling}function Oy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Bt(i,o,a),i[_t]=t,i[Ot]=a}catch(d){Fe(t,t.return,d)}}var Zi=!1,St=!1,ad=!1,My=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function o2(t,i){if(t=t.containerInfo,Cd=wu,t=Gp(t),Zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,A=-1,N=-1,U=0,G=0,X=t,z=null;t:for(;;){for(var q;X!==a||h!==0&&X.nodeType!==3||(A=_+h),X!==d||o!==0&&X.nodeType!==3||(N=_+o),X.nodeType===3&&(_+=X.nodeValue.length),(q=X.firstChild)!==null;)z=X,X=q;for(;;){if(X===t)break t;if(z===a&&++U===h&&(A=_),z===d&&++G===o&&(N=_),(q=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=q}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Id={focusedElem:t,selectionRange:a},wu=!1,Vt=i;Vt!==null;)if(i=Vt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Vt=t;else for(;Vt!==null;){switch(i=Vt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var ae=Qr(a.type,h);t=o.getSnapshotBeforeUpdate(ae,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(ge){Fe(a,a.return,ge)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Dd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Vt=t;break}Vt=i.return}}function Vy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:es(t,a),o&4&&il(5,a);break;case 1:if(es(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Fe(a,a.return,_)}else{var h=Qr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Fe(a,a.return,_)}}o&64&&Iy(a),o&512&&sl(a,a.return);break;case 3:if(es(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{_g(t,i)}catch(_){Fe(a,a.return,_)}}break;case 27:i===null&&o&4&&Oy(a);case 26:case 5:es(t,a),i===null&&o&4&&xy(a),o&512&&sl(a,a.return);break;case 12:es(t,a);break;case 31:es(t,a),o&4&&Ly(t,a);break;case 13:es(t,a),o&4&&Py(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=g2.bind(null,a),k2(t,a))));break;case 22:if(o=a.memoizedState!==null||Zi,!o){i=i!==null&&i.memoizedState!==null||St,h=Zi;var d=St;Zi=o,(St=i)&&!d?ts(t,a,(a.subtreeFlags&8772)!==0):es(t,a),Zi=h,St=d}break;case 30:break;default:es(t,a)}}function jy(t){var i=t.alternate;i!==null&&(t.alternate=null,jy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&da(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,tn=!1;function Ji(t,i,a){for(a=a.child;a!==null;)ky(t,i,a),a=a.sibling}function ky(t,i,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Un,a)}catch{}switch(a.tag){case 26:St||Ai(a,i),Ji(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:St||Ai(a,i);var o=it,h=tn;Gs(a.type)&&(it=a.stateNode,tn=!1),Ji(t,i,a),dl(a.stateNode),it=o,tn=h;break;case 5:St||Ai(a,i);case 6:if(o=it,h=tn,it=null,Ji(t,i,a),it=o,tn=h,it!==null)if(tn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(d){Fe(a,i,d)}else try{it.removeChild(a.stateNode)}catch(d){Fe(a,i,d)}break;case 18:it!==null&&(tn?(t=it,I_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Wa(t)):I_(it,a.stateNode));break;case 4:o=it,h=tn,it=a.stateNode.containerInfo,tn=!0,Ji(t,i,a),it=o,tn=h;break;case 0:case 11:case 14:case 15:Ps(2,a,i),St||Ps(4,a,i),Ji(t,i,a);break;case 1:St||(Ai(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ny(a,i,o)),Ji(t,i,a);break;case 21:Ji(t,i,a);break;case 22:St=(o=St)||a.memoizedState!==null,Ji(t,i,a),St=o;break;default:Ji(t,i,a)}}function Ly(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Wa(t)}catch(a){Fe(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wa(t)}catch(a){Fe(i,i.return,a)}}function l2(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new My),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new My),i;default:throw Error(r(435,t.tag))}}function ru(t,i){var a=l2(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=y2.bind(null,t,o);o.then(h,h)}})}function nn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=i,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(Gs(A.type)){it=A.stateNode,tn=!1;break e}break;case 5:it=A.stateNode,tn=!1;break e;case 3:case 4:it=A.stateNode.containerInfo,tn=!0;break e}A=A.return}if(it===null)throw Error(r(160));ky(d,_,h),it=null,tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Uy(i,t),i=i.sibling}var Xn=null;function Uy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:nn(i,t),sn(t),o&4&&(Ps(3,t,t.return),il(3,t),Ps(5,t,t.return));break;case 1:nn(i,t),sn(t),o&512&&(St||a===null||Ai(a,a.return)),o&64&&Zi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Xn;if(nn(i,t),sn(t),o&512&&(St||a===null||Ai(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[li]||d[_t]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Bt(d,o,a),d[_t]=t,vt(d),o=d;break e;case"link":var _=U_("link","href",h).get(o+(a.href||""));if(_){for(var A=0;A<_.length;A++)if(d=_[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(A,1);break t}}d=h.createElement(o),Bt(d,o,a),h.head.appendChild(d);break;case"meta":if(_=U_("meta","content",h).get(o+(a.content||""))){for(A=0;A<_.length;A++)if(d=_[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(A,1);break t}}d=h.createElement(o),Bt(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[_t]=t,vt(d),o=d}t.stateNode=o}else z_(h,t.type,t.stateNode);else t.stateNode=P_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?z_(h,t.type,t.stateNode):P_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&id(t,t.memoizedProps,a.memoizedProps)}break;case 27:nn(i,t),sn(t),o&512&&(St||a===null||Ai(a,a.return)),a!==null&&o&4&&id(t,t.memoizedProps,a.memoizedProps);break;case 5:if(nn(i,t),sn(t),o&512&&(St||a===null||Ai(a,a.return)),t.flags&32){h=t.stateNode;try{en(h,"")}catch(ae){Fe(t,t.return,ae)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,id(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ad=!0);break;case 6:if(nn(i,t),sn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ae){Fe(t,t.return,ae)}}break;case 3:if(Tu=null,h=Xn,Xn=vu(i.containerInfo),nn(i,t),Xn=h,sn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Wa(i.containerInfo)}catch(ae){Fe(t,t.return,ae)}ad&&(ad=!1,zy(t));break;case 4:o=Xn,Xn=vu(t.stateNode.containerInfo),nn(i,t),sn(t),Xn=o;break;case 12:nn(i,t),sn(t);break;case 31:nn(i,t),sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ru(t,o)));break;case 13:nn(i,t),sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ou=Xt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ru(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,U=Zi,G=St;if(Zi=U||h,St=G||N,nn(i,t),St=G,Zi=U,sn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Zi||St||Kr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=N.stateNode;var X=N.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;A.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(ae){Fe(N,N.return,ae)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ae){Fe(N,N.return,ae)}}}else if(i.tag===18){if(a===null){N=i;try{var q=N.stateNode;h?N_(q,!0):N_(N.stateNode,!1)}catch(ae){Fe(N,N.return,ae)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ru(t,a))));break;case 19:nn(i,t),sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ru(t,o)));break;case 30:break;case 21:break;default:nn(i,t),sn(t)}}function sn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Dy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=sd(t);su(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(en(_,""),a.flags&=-33);var A=sd(t);su(t,A,_);break;case 3:case 4:var N=a.stateNode.containerInfo,U=sd(t);rd(t,U,N);break;default:throw Error(r(161))}}catch(G){Fe(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function es(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vy(t,i.alternate,i),i=i.sibling}function Kr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ps(4,i,i.return),Kr(i);break;case 1:Ai(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ny(i,i.return,a),Kr(i);break;case 27:dl(i.stateNode);case 26:case 5:Ai(i,i.return),Kr(i);break;case 22:i.memoizedState===null&&Kr(i);break;case 30:Kr(i);break;default:Kr(i)}t=t.sibling}}function ts(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ts(h,d,a),il(4,d);break;case 1:if(ts(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){Fe(o,o.return,U)}if(o=d,h=o.updateQueue,h!==null){var A=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)yg(N[h],A)}catch(U){Fe(o,o.return,U)}}a&&_&64&&Iy(d),sl(d,d.return);break;case 27:Oy(d);case 26:case 5:ts(h,d,a),a&&o===null&&_&4&&xy(d),sl(d,d.return);break;case 12:ts(h,d,a);break;case 31:ts(h,d,a),a&&_&4&&Ly(h,d);break;case 13:ts(h,d,a),a&&_&4&&Py(h,d);break;case 22:d.memoizedState===null&&ts(h,d,a),sl(d,d.return);break;case 30:break;default:ts(h,d,a)}i=i.sibling}}function od(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Fo(a))}function ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fo(t))}function $n(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)By(t,i,a,o),i=i.sibling}function By(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:$n(t,i,a,o),h&2048&&il(9,i);break;case 1:$n(t,i,a,o);break;case 3:$n(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Fo(t)));break;case 12:if(h&2048){$n(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,A=d.onPostCommit;typeof A=="function"&&A(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Fe(i,i.return,N)}}else $n(t,i,a,o);break;case 31:$n(t,i,a,o);break;case 13:$n(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?$n(t,i,a,o):rl(t,i):d._visibility&2?$n(t,i,a,o):(d._visibility|=2,za(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&od(_,i);break;case 24:$n(t,i,a,o),h&2048&&ld(i.alternate,i);break;default:$n(t,i,a,o)}}function za(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,A=a,N=o,U=_.flags;switch(_.tag){case 0:case 11:case 15:za(d,_,A,N,h),il(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?za(d,_,A,N,h):rl(d,_):(G._visibility|=2,za(d,_,A,N,h)),h&&U&2048&&od(_.alternate,_);break;case 24:za(d,_,A,N,h),h&&U&2048&&ld(_.alternate,_);break;default:za(d,_,A,N,h)}i=i.sibling}}function rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&od(o.alternate,o);break;case 24:rl(a,o),h&2048&&ld(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var al=8192;function Ba(t,i,a){if(t.subtreeFlags&al)for(t=t.child;t!==null;)qy(t,i,a),t=t.sibling}function qy(t,i,a){switch(t.tag){case 26:Ba(t,i,a),t.flags&al&&t.memoizedState!==null&&Y2(a,Xn,t.memoizedState,t.memoizedProps);break;case 5:Ba(t,i,a);break;case 3:case 4:var o=Xn;Xn=vu(t.stateNode.containerInfo),Ba(t,i,a),Xn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=al,al=16777216,Ba(t,i,a),al=o):Ba(t,i,a));break;default:Ba(t,i,a)}}function Hy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ol(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Vt=o,Gy(o,t)}Hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fy(t),t=t.sibling}function Fy(t){switch(t.tag){case 0:case 11:case 15:ol(t),t.flags&2048&&Ps(9,t,t.return);break;case 3:ol(t);break;case 12:ol(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,au(t)):ol(t);break;default:ol(t)}}function au(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Vt=o,Gy(o,t)}Hy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ps(8,i,i.return),au(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,au(i));break;default:au(i)}t=t.sibling}}function Gy(t,i){for(;Vt!==null;){var a=Vt;switch(a.tag){case 0:case 11:case 15:Ps(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Fo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Vt=o;else e:for(a=t;Vt!==null;){o=Vt;var h=o.sibling,d=o.return;if(jy(o),o===a){Vt=null;break e}if(h!==null){h.return=d,Vt=h;break e}Vt=d}}}var c2={getCacheForType:function(t){var i=Ut(Tt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Ut(Tt).controller.signal}},u2=typeof WeakMap=="function"?WeakMap:Map,Ue=0,We=null,we=null,Ce=0,He=0,vn=null,Us=!1,qa=!1,cd=!1,ns=0,lt=0,zs=0,Yr=0,ud=0,En=0,Ha=0,ll=null,rn=null,hd=!1,ou=0,Qy=0,lu=1/0,cu=null,Bs=null,Nt=0,qs=null,Fa=null,is=0,fd=0,dd=null,Ky=null,cl=0,md=null;function Tn(){return(Ue&2)!==0&&Ce!==0?Ce&-Ce:K.T!==null?Ed():uc()}function Yy(){if(En===0)if((Ce&536870912)===0||Oe){var t=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),En=t}else En=536870912;return t=yn.current,t!==null&&(t.flags|=32),En}function an(t,i,a){(t===We&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(Ga(t,0),Hs(t,Ce,En,!1)),Ar(t,a),((Ue&2)===0||t!==We)&&(t===We&&((Ue&2)===0&&(Yr|=a),lt===4&&Hs(t,Ce,En,!1)),bi(t))}function Xy(t,i,a){if((Ue&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||zn(t,i),h=o?d2(t,i):gd(t,i,!0),d=o;do{if(h===0){qa&&!o&&Hs(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!h2(a)){h=gd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var A=t;h=ll;var N=A.current.memoizedState.isDehydrated;if(N&&(Ga(A,_).flags|=256),_=gd(A,_,!1),_!==2){if(cd&&!N){A.errorRecoveryDisabledLanes|=d,Yr|=d,h=4;break e}d=rn,rn=h,d!==null&&(rn===null?rn=d:rn.push.apply(rn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Ga(t,0),Hs(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Hs(o,i,En,!Us);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=ou+300-Xt(),10<h)){if(Hs(o,i,En,!Us),ri(o,0,!0)!==0)break e;is=i,o.timeoutHandle=R_($y.bind(null,o,a,rn,cu,hd,i,En,Yr,Ha,Us,d,"Throttled",-0,0),h);break e}$y(o,a,rn,cu,hd,i,En,Yr,Ha,Us,d,null,-0,0)}}break}while(!0);bi(t)}function $y(t,i,a,o,h,d,_,A,N,U,G,X,z,q){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},qy(i,d,X);var ae=(d&62914560)===d?ou-Xt():(d&4194048)===d?Qy-Xt():0;if(ae=X2(X,ae),ae!==null){is=d,t.cancelPendingCommit=ae(s_.bind(null,t,i,d,a,o,h,_,A,N,G,X,null,z,q)),Hs(t,d,_,!U);return}}s_(t,i,d,a,o,h,_,A,N)}function h2(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hs(t,i,a,o){i&=~ud,i&=~Yr,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-ht(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&br(t,a,i)}function uu(){return(Ue&6)===0?(ul(0),!1):!0}function pd(){if(we!==null){if(He===0)var t=we.return;else t=we,Qi=Ur=null,Df(t),ja=null,Qo=0,t=we;for(;t!==null;)Cy(t.alternate,t),t=t.return;we=null}}function Ga(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,D2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),is=0,pd(),We=t,we=a=Fi(t.current,null),Ce=i,He=0,vn=null,Us=!1,qa=zn(t,i),cd=!1,Ha=En=ud=Yr=zs=lt=0,rn=ll=null,hd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-ht(o),d=1<<h;i|=t[h],o&=~d}return ns=i,Dc(),a}function Wy(t,i){Ae=null,K.H=el,i===Va||i===Uc?(i=dg(),He=3):i===vf?(i=dg(),He=4):He=i===Kf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,we===null&&(lt=1,Jc(t,Dn(i,t.current)))}function Zy(){var t=yn.current;return t===null?!0:(Ce&4194048)===Ce?jn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?t===jn:!1}function Jy(){var t=K.H;return K.H=el,t===null?el:t}function e_(){var t=K.A;return K.A=c2,t}function hu(){lt=4,Us||(Ce&4194048)!==Ce&&yn.current!==null||(qa=!0),(zs&134217727)===0&&(Yr&134217727)===0||We===null||Hs(We,Ce,En,!1)}function gd(t,i,a){var o=Ue;Ue|=2;var h=Jy(),d=e_();(We!==t||Ce!==i)&&(cu=null,Ga(t,i)),i=!1;var _=lt;e:do try{if(He!==0&&we!==null){var A=we,N=vn;switch(He){case 8:pd(),_=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(i=!0);var U=He;if(He=0,vn=null,Qa(t,A,N,U),a&&qa){_=0;break e}break;default:U=He,He=0,vn=null,Qa(t,A,N,U)}}f2(),_=lt;break}catch(G){Wy(t,G)}while(!0);return i&&t.shellSuspendCounter++,Qi=Ur=null,Ue=o,K.H=h,K.A=d,we===null&&(We=null,Ce=0,Dc()),_}function f2(){for(;we!==null;)t_(we)}function d2(t,i){var a=Ue;Ue|=2;var o=Jy(),h=e_();We!==t||Ce!==i?(cu=null,lu=Xt()+500,Ga(t,i)):qa=zn(t,i);e:do try{if(He!==0&&we!==null){i=we;var d=vn;t:switch(He){case 1:He=0,vn=null,Qa(t,i,d,1);break;case 2:case 9:if(hg(d)){He=0,vn=null,n_(i);break}i=function(){He!==2&&He!==9||We!==t||(He=7),bi(t)},d.then(i,i);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:hg(d)?(He=0,vn=null,n_(i)):(He=0,vn=null,Qa(t,i,d,7));break;case 5:var _=null;switch(we.tag){case 26:_=we.memoizedState;case 5:case 27:var A=we;if(_?B_(_):A.stateNode.complete){He=0,vn=null;var N=A.sibling;if(N!==null)we=N;else{var U=A.return;U!==null?(we=U,fu(U)):we=null}break t}}He=0,vn=null,Qa(t,i,d,5);break;case 6:He=0,vn=null,Qa(t,i,d,6);break;case 8:pd(),lt=6;break e;default:throw Error(r(462))}}m2();break}catch(G){Wy(t,G)}while(!0);return Qi=Ur=null,K.H=o,K.A=h,Ue=a,we!==null?0:(We=null,Ce=0,Dc(),lt)}function m2(){for(;we!==null&&!vr();)t_(we)}function t_(t){var i=wy(t.alternate,t,ns);t.memoizedProps=t.pendingProps,i===null?fu(t):we=i}function n_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=vy(a,i,i.pendingProps,i.type,void 0,Ce);break;case 11:i=vy(a,i,i.pendingProps,i.type.render,i.ref,Ce);break;case 5:Df(i);default:Cy(a,i),i=we=eg(i,ns),i=wy(a,i,ns)}t.memoizedProps=t.pendingProps,i===null?fu(t):we=i}function Qa(t,i,a,o){Qi=Ur=null,Df(i),ja=null,Qo=0;var h=i.return;try{if(n2(t,h,i,a,Ce)){lt=1,Jc(t,Dn(a,t.current)),we=null;return}}catch(d){if(h!==null)throw we=h,d;lt=1,Jc(t,Dn(a,t.current)),we=null;return}i.flags&32768?(Oe||o===1?t=!0:qa||(Ce&536870912)!==0?t=!1:(Us=t=!0,(o===2||o===9||o===3||o===6)&&(o=yn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(i,t)):fu(i)}function fu(t){var i=t;do{if((i.flags&32768)!==0){i_(i,Us);return}t=i.return;var a=r2(i.alternate,i,ns);if(a!==null){we=a;return}if(i=i.sibling,i!==null){we=i;return}we=i=t}while(i!==null);lt===0&&(lt=5)}function i_(t,i){do{var a=a2(t.alternate,t);if(a!==null){a.flags&=32767,we=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){we=t;return}we=t=a}while(t!==null);lt=6,we=null}function s_(t,i,a,o,h,d,_,A,N){t.cancelPendingCommit=null;do du();while(Nt!==0);if((Ue&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=sf,Yh(t,a,d,_,A,N),t===We&&(we=We=null,Ce=0),Fa=i,qs=t,is=a,fd=d,dd=h,Ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,_2(vs,function(){return c_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=ie.p,ie.p=2,_=Ue,Ue|=4;try{o2(t,i,a)}finally{Ue=_,ie.p=h,K.T=o}}Nt=1,r_(),a_(),o_()}}function r_(){if(Nt===1){Nt=0;var t=qs,i=Fa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=ie.p;ie.p=2;var h=Ue;Ue|=4;try{Uy(i,t);var d=Id,_=Gp(t.containerInfo),A=d.focusedElem,N=d.selectionRange;if(_!==A&&A&&A.ownerDocument&&Fp(A.ownerDocument.documentElement,A)){if(N!==null&&Zh(A)){var U=N.start,G=N.end;if(G===void 0&&(G=U),"selectionStart"in A)A.selectionStart=U,A.selectionEnd=Math.min(G,A.value.length);else{var X=A.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var q=z.getSelection(),ae=A.textContent.length,ge=Math.min(N.start,ae),Xe=N.end===void 0?ge:Math.min(N.end,ae);!q.extend&&ge>Xe&&(_=Xe,Xe=ge,ge=_);var V=Hp(A,ge),D=Hp(A,Xe);if(V&&D&&(q.rangeCount!==1||q.anchorNode!==V.node||q.anchorOffset!==V.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var P=X.createRange();P.setStart(V.node,V.offset),q.removeAllRanges(),ge>Xe?(q.addRange(P),q.extend(D.node,D.offset)):(P.setEnd(D.node,D.offset),q.addRange(P))}}}}for(X=[],q=A;q=q.parentNode;)q.nodeType===1&&X.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<X.length;A++){var Y=X[A];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}wu=!!Cd,Id=Cd=null}finally{Ue=h,ie.p=o,K.T=a}}t.current=i,Nt=2}}function a_(){if(Nt===2){Nt=0;var t=qs,i=Fa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=ie.p;ie.p=2;var h=Ue;Ue|=4;try{Vy(t,i.alternate,i)}finally{Ue=h,ie.p=o,K.T=a}}Nt=3}}function o_(){if(Nt===4||Nt===3){Nt=0,ic();var t=qs,i=Fa,a=is,o=Ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nt=5:(Nt=0,Fa=qs=null,l_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Bs=null),zi(a),i=i.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Un,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=K.T,h=ie.p,ie.p=2,K.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var A=o[_];d(A.value,{componentStack:A.stack})}}finally{K.T=i,ie.p=h}}(is&3)!==0&&du(),bi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===md?cl++:(cl=0,md=t):cl=0,ul(0)}}function l_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Fo(i)))}function du(){return r_(),a_(),o_(),c_()}function c_(){if(Nt!==5)return!1;var t=qs,i=fd;fd=0;var a=zi(is),o=K.T,h=ie.p;try{ie.p=32>a?32:a,K.T=null,a=dd,dd=null;var d=qs,_=is;if(Nt=0,Fa=qs=null,is=0,(Ue&6)!==0)throw Error(r(331));var A=Ue;if(Ue|=4,Fy(d.current),By(d,d.current,_,a),Ue=A,ul(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Un,d)}catch{}return!0}finally{ie.p=h,K.T=o,l_(t,i)}}function u_(t,i,a){i=Dn(a,i),i=Qf(t.stateNode,i,2),t=js(t,i,2),t!==null&&(Ar(t,2),bi(t))}function Fe(t,i,a){if(t.tag===3)u_(t,t,a);else for(;i!==null;){if(i.tag===3){u_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Bs===null||!Bs.has(o))){t=Dn(a,t),a=hy(2),o=js(i,a,2),o!==null&&(fy(a,o,i,t),Ar(o,2),bi(o));break}}i=i.return}}function yd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new u2;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(cd=!0,h.add(a),t=p2.bind(null,t,i,a),i.then(t,t))}function p2(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,We===t&&(Ce&a)===a&&(lt===4||lt===3&&(Ce&62914560)===Ce&&300>Xt()-ou?(Ue&2)===0&&Ga(t,0):ud|=a,Ha===Ce&&(Ha=0)),bi(t)}function h_(t,i){i===0&&(i=cc()),t=kr(t,i),t!==null&&(Ar(t,i),bi(t))}function g2(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),h_(t,a)}function y2(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),h_(t,a)}function _2(t,i){return je(t,i)}var mu=null,Ka=null,_d=!1,pu=!1,vd=!1,Fs=0;function bi(t){t!==Ka&&t.next===null&&(Ka===null?mu=Ka=t:Ka=Ka.next=t),pu=!0,_d||(_d=!0,E2())}function ul(t,i){if(!vd&&pu){vd=!0;do for(var a=!1,o=mu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,A=o.pingedLanes;d=(1<<31-ht(42|t)+1)-1,d&=h&~(_&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,p_(o,d))}else d=Ce,d=ri(o,o===We?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||zn(o,d)||(a=!0,p_(o,d));o=o.next}while(a);vd=!1}}function v2(){f_()}function f_(){pu=_d=!1;var t=0;Fs!==0&&x2()&&(t=Fs);for(var i=Xt(),a=null,o=mu;o!==null;){var h=o.next,d=d_(o,i);d===0?(o.next=null,a===null?mu=h:a.next=h,h===null&&(Ka=a)):(a=o,(t!==0||(d&3)!==0)&&(pu=!0)),o=h}Nt!==0&&Nt!==5||ul(t),Fs!==0&&(Fs=0)}function d_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-ht(d),A=1<<_,N=h[_];N===-1?((A&a)===0||(A&o)!==0)&&(h[_]=Kh(A,i)):N<=i&&(t.expiredLanes|=A),d&=~A}if(i=We,a=Ce,a=ri(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(He===2||He===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&fn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||zn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&fn(o),zi(a)){case 2:case 8:a=Eo;break;case 32:a=vs;break;case 268435456:a=sc;break;default:a=vs}return o=m_.bind(null,t),a=je(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&fn(o),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,i){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(du()&&t.callbackNode!==a)return null;var o=Ce;return o=ri(t,t===We?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xy(t,o,i),d_(t,Xt()),t.callbackNode!=null&&t.callbackNode===a?m_.bind(null,t):null)}function p_(t,i){if(du())return null;Xy(t,i,!0)}function E2(){O2(function(){(Ue&6)!==0?je(vo,v2):f_()})}function Ed(){if(Fs===0){var t=Oa;t===0&&(t=ii,ii<<=1,(ii&261888)===0&&(ii=256)),Fs=t}return Fs}function g_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ya(""+t)}function y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function T2(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=g_((h[Ot]||null).action),_=o.submitter;_&&(i=(i=_[Ot]||null)?g_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var A=new gi("action","action",null,o,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Fs!==0){var N=_?y_(h,_):new FormData(h);zf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(A.preventDefault(),N=_?y_(h,_):new FormData(h),zf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Td=0;Td<nf.length;Td++){var Ad=nf[Td],A2=Ad.toLowerCase(),b2=Ad[0].toUpperCase()+Ad.slice(1);Yn(A2,"on"+b2)}Yn(Yp,"onAnimationEnd"),Yn(Xp,"onAnimationIteration"),Yn($p,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(UT,"onTransitionRun"),Yn(zT,"onTransitionStart"),Yn(BT,"onTransitionCancel"),Yn(Wp,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function __(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var _=o.length-1;0<=_;_--){var A=o[_],N=A.instance,U=A.currentTarget;if(A=A.listener,N!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=U;try{d(h)}catch(G){xc(G)}h.currentTarget=null,d=N}else for(_=0;_<o.length;_++){if(A=o[_],N=A.instance,U=A.currentTarget,A=A.listener,N!==d&&h.isPropagationStopped())break e;d=A,h.currentTarget=U;try{d(h)}catch(G){xc(G)}h.currentTarget=null,d=N}}}}function Re(t,i){var a=i[fa];a===void 0&&(a=i[fa]=new Set);var o=t+"__bubble";a.has(o)||(v_(i,t,2,!1),a.add(o))}function bd(t,i,a){var o=0;i&&(o|=4),v_(a,t,o,i)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Sd(t){if(!t[gu]){t[gu]=!0,bo.forEach(function(a){a!=="selectionchange"&&(S2.has(a)||bd(a,!1,t),bd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[gu]||(i[gu]=!0,bd("selectionchange",!1,i))}}function v_(t,i,a,o){switch(Y_(i)){case 2:var h=Z2;break;case 8:h=J2;break;default:h=Ud}a=h.bind(null,i,a,t),h=void 0,!Ir||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function wd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var A=o.stateNode.containerInfo;if(A===h)break;if(_===4)for(_=o.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;A!==null;){if(_=ci(A),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){o=d=_;continue e}A=A.parentNode}}o=o.return}ws(function(){var U=d,G=Cn(a),X=[];e:{var z=Zp.get(t);if(z!==void 0){var q=gi,ae=t;switch(t){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":q=Cc;break;case"focusin":ae="focus",q=Or;break;case"focusout":ae="blur",q=Or;break;case"beforeblur":case"afterblur":q=Or;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=_c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=g;break;case Yp:case Xp:case $p:q=Ec;break;case Wp:q=b;break;case"scroll":case"scrollend":q=jo;break;case"wheel":q=B;break;case"copy":case"cut":case"paste":q=Tc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Hi;break;case"toggle":case"beforetoggle":q=Te}var ge=(i&4)!==0,Xe=!ge&&(t==="scroll"||t==="scrollend"),V=ge?z!==null?z+"Capture":null:z;ge=[];for(var D=U,P;D!==null;){var Y=D;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||V===null||(Y=Fn(D,V),Y!=null&&ge.push(fl(D,Y,P))),Xe)break;D=D.return}0<ge.length&&(z=new q(z,ae,null,a,G),X.push({event:z,listeners:ge}))}}if((i&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",z&&a!==Oo&&(ae=a.relatedTarget||a.fromElement)&&(ci(ae)||ae[oi]))break e;if((q||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,q?(ae=a.relatedTarget||a.toElement,q=U,ae=ae?ci(ae):null,ae!==null&&(Xe=c(ae),ge=ae.tag,ae!==Xe||ge!==5&&ge!==27&&ge!==6)&&(ae=null)):(q=null,ae=U),q!==ae)){if(ge=ko,Y="onMouseLeave",V="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Hi,Y="onPointerLeave",V="onPointerEnter",D="pointer"),Xe=q==null?z:dn(q),P=ae==null?z:dn(ae),z=new ge(Y,D+"leave",q,a,G),z.target=Xe,z.relatedTarget=P,Y=null,ci(G)===U&&(ge=new ge(V,D+"enter",ae,a,G),ge.target=P,ge.relatedTarget=Xe,Y=ge),Xe=Y,q&&ae)t:{for(ge=w2,V=q,D=ae,P=0,Y=V;Y;Y=ge(Y))P++;Y=0;for(var de=D;de;de=ge(de))Y++;for(;0<P-Y;)V=ge(V),P--;for(;0<Y-P;)D=ge(D),Y--;for(;P--;){if(V===D||D!==null&&V===D.alternate){ge=V;break t}V=ge(V),D=ge(D)}ge=null}else ge=null;q!==null&&E_(X,z,q,ge,!1),ae!==null&&Xe!==null&&E_(X,Xe,ae,ge,!0)}}e:{if(z=U?dn(U):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var ke=Lp;else if(jp(z))if(Pp)ke=kT;else{ke=VT;var ce=MT}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?U&&ga(U.elementType)&&(ke=Lp):ke=jT;if(ke&&(ke=ke(t,U))){kp(X,ke,a,G);break e}ce&&ce(t,z,U),t==="focusout"&&U&&z.type==="number"&&U.memoizedProps.value!=null&&No(z,"number",z.value)}switch(ce=U?dn(U):window,t){case"focusin":(jp(ce)||ce.contentEditable==="true")&&(Sa=ce,Jh=U,Bo=null);break;case"focusout":Bo=Jh=Sa=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Qp(X,a,G);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":Qp(X,a,G)}var be;if(Pe)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ba?Mr(t,a)&&(Ie="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(vi&&a.locale!=="ko"&&(ba||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ba&&(be=Vo()):(pi=G,Mo="value"in pi?pi.value:pi.textContent,ba=!0)),ce=yu(U,Ie),0<ce.length&&(Ie=new _i(Ie,t,null,a,G),X.push({event:Ie,listeners:ce}),be?Ie.data=be:(be=Aa(a),be!==null&&(Ie.data=be)))),(be=Nn?NT(t,a):xT(t,a))&&(Ie=yu(U,"onBeforeInput"),0<Ie.length&&(ce=new _i("onBeforeInput","beforeinput",null,a,G),X.push({event:ce,listeners:Ie}),ce.data=be)),T2(X,t,U,a,G)}__(X,i)})}function fl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function yu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Fn(t,a),h!=null&&o.unshift(fl(t,h,d)),h=Fn(t,i),h!=null&&o.push(fl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function w2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,i,a,o,h){for(var d=i._reactName,_=[];a!==null&&a!==o;){var A=a,N=A.alternate,U=A.stateNode;if(A=A.tag,N!==null&&N===o)break;A!==5&&A!==26&&A!==27||U===null||(N=U,h?(U=Fn(a,d),U!=null&&_.unshift(fl(a,U,N))):h||(U=Fn(a,d),U!=null&&_.push(fl(a,U,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var R2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(R2,`
`).replace(C2,"")}function A_(t,i){return i=T_(i),T_(t)===i}function Ye(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||en(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&en(t,""+o);break;case"className":mn(t,"class",o);break;case"tabIndex":mn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(t,a,o);break;case"style":Do(t,o,d);break;case"data":if(i!=="object"){mn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ya(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ye(t,i,"name",h.name,h,null),Ye(t,i,"formEncType",h.formEncType,h,null),Ye(t,i,"formMethod",h.formMethod,h,null),Ye(t,i,"formTarget",h.formTarget,h,null)):(Ye(t,i,"encType",h.encType,h,null),Ye(t,i,"method",h.method,h,null),Ye(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ya(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Hn);break;case"onScroll":o!=null&&Re("scroll",t);break;case"onScrollEnd":o!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ya(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Re("beforetoggle",t),Re("toggle",t),ma(t,"popover",o);break;case"xlinkActuate":Et(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Et(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Et(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Et(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Et(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Et(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Et(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Et(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Et(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ma(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yc.get(a)||a,ma(t,a,o))}}function Rd(t,i,a,o,h,d){switch(a){case"style":Do(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?en(t,o):(typeof o=="number"||typeof o=="bigint")&&en(t,""+o);break;case"onScroll":o!=null&&Re("scroll",t);break;case"onScrollEnd":o!=null&&Re("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Ot]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ma(t,a,o)}}}function Bt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ye(t,i,d,_,a,null)}}h&&Ye(t,i,"srcSet",a.srcSet,a,null),o&&Ye(t,i,"src",a.src,a,null);return;case"input":Re("invalid",t);var A=d=_=h=null,N=null,U=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":_=G;break;case"checked":N=G;break;case"defaultChecked":U=G;break;case"value":d=G;break;case"defaultValue":A=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Ye(t,i,o,G,a,null)}}mc(t,d,A,N,U,_,h,!1);return;case"select":Re("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":_=A;break;case"multiple":o=A;default:Ye(t,i,h,A,a,null)}i=d,a=_,t.multiple=!!o,i!=null?Ts(t,!!o,i,!1):a!=null&&Ts(t,!!o,a,!0);return;case"textarea":Re("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(A=a[_],A!=null))switch(_){case"value":o=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Ye(t,i,_,A,a,null)}As(t,o,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ye(t,i,N,o,a,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(o=0;o<hl.length;o++)Re(hl[o],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(o=a[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ye(t,i,U,o,a,null)}return;default:if(ga(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Rd(t,i,G,o,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(o=a[A],o!=null&&Ye(t,i,A,o,a,null))}function I2(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,A=null,N=null,U=null,G=null;for(q in a){var X=a[q];if(a.hasOwnProperty(q)&&X!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=X;default:o.hasOwnProperty(q)||Ye(t,i,q,null,o,X)}}for(var z in o){var q=o[z];if(X=a[z],o.hasOwnProperty(z)&&(q!=null||X!=null))switch(z){case"type":d=q;break;case"name":h=q;break;case"checked":U=q;break;case"defaultChecked":G=q;break;case"value":_=q;break;case"defaultValue":A=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==X&&Ye(t,i,z,q,o,X)}}pa(t,_,A,N,U,G,d,h);return;case"select":q=_=A=z=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":q=N;default:o.hasOwnProperty(d)||Ye(t,i,d,null,o,N)}for(h in o)if(d=o[h],N=a[h],o.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":z=d;break;case"defaultValue":A=d;break;case"multiple":_=d;default:d!==N&&Ye(t,i,h,d,o,N)}i=A,a=_,o=q,z!=null?Ts(t,!!a,z,!1):!!o!=!!a&&(i!=null?Ts(t,!!a,i,!0):Ts(t,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ye(t,i,A,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Ye(t,i,_,h,o,d)}pc(t,z,q);return;case"option":for(var ae in a)if(z=a[ae],a.hasOwnProperty(ae)&&z!=null&&!o.hasOwnProperty(ae))switch(ae){case"selected":t.selected=!1;break;default:Ye(t,i,ae,null,o,z)}for(N in o)if(z=o[N],q=a[N],o.hasOwnProperty(N)&&z!==q&&(z!=null||q!=null))switch(N){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ye(t,i,N,z,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)z=a[ge],a.hasOwnProperty(ge)&&z!=null&&!o.hasOwnProperty(ge)&&Ye(t,i,ge,null,o,z);for(U in o)if(z=o[U],q=a[U],o.hasOwnProperty(U)&&z!==q&&(z!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,i));break;default:Ye(t,i,U,z,o,q)}return;default:if(ga(i)){for(var Xe in a)z=a[Xe],a.hasOwnProperty(Xe)&&z!==void 0&&!o.hasOwnProperty(Xe)&&Rd(t,i,Xe,void 0,o,z);for(G in o)z=o[G],q=a[G],!o.hasOwnProperty(G)||z===q||z===void 0&&q===void 0||Rd(t,i,G,z,o,q);return}}for(var V in a)z=a[V],a.hasOwnProperty(V)&&z!=null&&!o.hasOwnProperty(V)&&Ye(t,i,V,null,o,z);for(X in o)z=o[X],q=a[X],!o.hasOwnProperty(X)||z===q||z==null&&q==null||Ye(t,i,X,z,o,q)}function b_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function N2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,A=h.duration;if(d&&A&&b_(_)){for(_=0,A=h.responseEnd,o+=1;o<a.length;o++){var N=a[o],U=N.startTime;if(U>A)break;var G=N.transferSize,X=N.initiatorType;G&&b_(X)&&(N=N.responseEnd,_+=G*(N<A?1:(A-U)/(N-U)))}if(--o,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cd=null,Id=null;function _u(t){return t.nodeType===9?t:t.ownerDocument}function S_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Nd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xd=null;function x2(){var t=window.event;return t&&t.type==="popstate"?t===xd?!1:(xd=t,!0):(xd=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,D2=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(t){return C_.resolve(null).then(t).catch(M2)}:R_;function M2(t){setTimeout(function(){throw t})}function Gs(t){return t==="head"}function I_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),Wa(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")dl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,dl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,A=d.nodeName;d[li]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&dl(t.ownerDocument.body);a=h}while(a);Wa(i)}function N_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Dd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dd(a),da(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function V2(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[li])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=kn(t.nextSibling),t===null)break}return null}function j2(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=kn(t.nextSibling),t===null))return null;return t}function x_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=kn(t.nextSibling),t===null))return null;return t}function Od(t){return t.data==="$?"||t.data==="$~"}function Md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function k2(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function kn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Vd=null;function D_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return kn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function M_(t,i,a){switch(i=_u(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);da(t)}var Ln=new Map,V_=new Set;function vu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ss=ie.d;ie.d={f:L2,r:P2,D:U2,C:z2,L:B2,m:q2,X:F2,S:H2,M:G2};function L2(){var t=ss.f(),i=uu();return t||i}function P2(t){var i=Rn(t);i!==null&&i.tag===5&&i.type==="form"?Wg(i):ss.r(t)}var Ya=typeof document>"u"?null:document;function j_(t,i,a){var o=Ya;if(o&&typeof i=="string"&&i){var h=Jt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),V_.has(h)||(V_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Bt(i,"link",t),vt(i),o.head.appendChild(i)))}}function U2(t){ss.D(t),j_("dns-prefetch",t,null)}function z2(t,i){ss.C(t,i),j_("preconnect",t,i)}function B2(t,i,a){ss.L(t,i,a);var o=Ya;if(o&&t&&i){var h='link[rel="preload"][as="'+Jt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Jt(a.imageSizes)+'"]')):h+='[href="'+Jt(t)+'"]';var d=h;switch(i){case"style":d=Xa(t);break;case"script":d=$a(t)}Ln.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Ln.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(ml(d))||i==="script"&&o.querySelector(pl(d))||(i=o.createElement("link"),Bt(i,"link",t),vt(i),o.head.appendChild(i)))}}function q2(t,i){ss.m(t,i);var a=Ya;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Jt(o)+'"][href="'+Jt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=$a(t)}if(!Ln.has(d)&&(t=S({rel:"modulepreload",href:t},i),Ln.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pl(d)))return}o=a.createElement("link"),Bt(o,"link",t),vt(o),a.head.appendChild(o)}}}function H2(t,i,a){ss.S(t,i,a);var o=Ya;if(o&&t){var h=ui(o).hoistableStyles,d=Xa(t);i=i||"default";var _=h.get(d);if(!_){var A={loading:0,preload:null};if(_=o.querySelector(ml(d)))A.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Ln.get(d))&&jd(t,a);var N=_=o.createElement("link");vt(N),Bt(N,"link",t),N._p=new Promise(function(U,G){N.onload=U,N.onerror=G}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Eu(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:A},h.set(d,_)}}}function F2(t,i){ss.X(t,i);var a=Ya;if(a&&t){var o=ui(a).hoistableScripts,h=$a(t),d=o.get(h);d||(d=a.querySelector(pl(h)),d||(t=S({src:t,async:!0},i),(i=Ln.get(h))&&kd(t,i),d=a.createElement("script"),vt(d),Bt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function G2(t,i){ss.M(t,i);var a=Ya;if(a&&t){var o=ui(a).hoistableScripts,h=$a(t),d=o.get(h);d||(d=a.querySelector(pl(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Ln.get(h))&&kd(t,i),d=a.createElement("script"),vt(d),Bt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function k_(t,i,a,o){var h=(h=Zt.current)?vu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Xa(a.href),a=ui(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xa(a.href);var d=ui(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(ml(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Ln.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(t,a),d||Q2(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$a(a),a=ui(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Xa(t){return'href="'+Jt(t)+'"'}function ml(t){return'link[rel="stylesheet"]['+t+"]"}function L_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Q2(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Bt(i,"link",a),vt(i),t.head.appendChild(i))}function $a(t){return'[src="'+Jt(t)+'"]'}function pl(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(o)return i.instance=o,vt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),vt(o),Bt(o,"style",h),Eu(o,a.precedence,t),i.instance=o;case"stylesheet":h=Xa(a.href);var d=t.querySelector(ml(h));if(d)return i.state.loading|=4,i.instance=d,vt(d),d;o=L_(a),(h=Ln.get(h))&&jd(o,h),d=(t.ownerDocument||t).createElement("link"),vt(d);var _=d;return _._p=new Promise(function(A,N){_.onload=A,_.onerror=N}),Bt(d,"link",o),i.state.loading|=4,Eu(d,a.precedence,t),i.instance=d;case"script":return d=$a(a.src),(h=t.querySelector(pl(d)))?(i.instance=h,vt(h),h):(o=a,(h=Ln.get(d))&&(o=S({},a),kd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),vt(h),Bt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Eu(o,a.precedence,t));return i.instance}function Eu(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var A=o[_];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function jd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function kd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Tu=null;function U_(t,i,a){if(Tu===null){var o=new Map,h=Tu=new Map;h.set(a,o)}else h=Tu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[li]||d[_t]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var A=o.get(_);A?A.push(d):o.set(_,[d])}}return o}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function K2(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function B_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Y2(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Xa(o.href),d=i.querySelector(ml(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Au.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,vt(d);return}d=i.ownerDocument||i,o=L_(o),(h=Ln.get(h))&&jd(o,h),d=d.createElement("link"),vt(d);var _=d;_._p=new Promise(function(A,N){_.onload=A,_.onerror=N}),Bt(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Au.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ld=0;function X2(t,i){return t.stylesheets&&t.count===0&&Su(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Su(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Ld===0&&(Ld=62500*N2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Su(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Ld?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Au(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var bu=null;function Su(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,bu=new Map,i.forEach($2,t),bu=null,Au.call(t))}function $2(t,i){if(!(i.state.loading&4)){var a=bu.get(t);if(a)var o=a.get(null);else{a=new Map,bu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Au.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var gl={$$typeof:J,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function W2(t,i,a,o,h,d,_,A,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function q_(t,i,a,o,h,d,_,A,N,U,G,X){return t=new W2(t,i,a,_,N,U,G,X,A),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),t.current=d,d.stateNode=t,i=gf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Ef(d),t}function H_(t){return t?(t=Ca,t):Ca}function F_(t,i,a,o,h,d){h=H_(h),o.context===null?o.context=h:o.pendingContext=h,o=Vs(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=js(t,o,i),a!==null&&(an(a,t,i),Yo(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Pd(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=kr(t,67108864);i!==null&&an(i,t,67108864),Pd(t,67108864)}}function K_(t){if(t.tag===13||t.tag===31){var i=Tn();i=Sr(i);var a=kr(t,i);a!==null&&an(a,t,i),Pd(t,i)}}var wu=!0;function Z2(t,i,a,o){var h=K.T;K.T=null;var d=ie.p;try{ie.p=2,Ud(t,i,a,o)}finally{ie.p=d,K.T=h}}function J2(t,i,a,o){var h=K.T;K.T=null;var d=ie.p;try{ie.p=8,Ud(t,i,a,o)}finally{ie.p=d,K.T=h}}function Ud(t,i,a,o){if(wu){var h=zd(o);if(h===null)wd(t,i,o,Ru,a),X_(t,o);else if(tA(h,t,i,a,o))o.stopPropagation();else if(X_(t,o),i&4&&-1<eA.indexOf(t)){for(;h!==null;){var d=Rn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=si(d.pendingLanes);if(_!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var N=1<<31-ht(_);A.entanglements[1]|=N,_&=~N}bi(d),(Ue&6)===0&&(lu=Xt()+500,ul(0))}}break;case 31:case 13:A=kr(d,2),A!==null&&an(A,d,2),uu(),Pd(d,2)}if(d=zd(o),d===null&&wd(t,i,o,Ru,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else wd(t,i,o,null,a)}}function zd(t){return t=Cn(t),Bd(t)}var Ru=null;function Bd(t){if(Ru=null,t=ci(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ru=t,null}function Y_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case vo:return 2;case Eo:return 8;case vs:case Qh:return 32;case sc:return 268435456;default:return 32}default:return 32}}var qd=!1,Qs=null,Ks=null,Ys=null,yl=new Map,_l=new Map,Xs=[],eA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(t,i){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function vl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Rn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function tA(t,i,a,o,h){switch(i){case"focusin":return Qs=vl(Qs,t,i,a,o,h),!0;case"dragenter":return Ks=vl(Ks,t,i,a,o,h),!0;case"mouseover":return Ys=vl(Ys,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return yl.set(d,vl(yl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,_l.set(d,vl(_l.get(d)||null,t,i,a,o,h)),!0}return!1}function $_(t){var i=ci(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Bn(t.priority,function(){K_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Bn(t.priority,function(){K_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=zd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Oo=o,a.target.dispatchEvent(o),Oo=null}else return i=Rn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function W_(t,i,a){Cu(t)&&a.delete(i)}function nA(){qd=!1,Qs!==null&&Cu(Qs)&&(Qs=null),Ks!==null&&Cu(Ks)&&(Ks=null),Ys!==null&&Cu(Ys)&&(Ys=null),yl.forEach(W_),_l.forEach(W_)}function Iu(t,i){t.blockedOn===i&&(t.blockedOn=null,qd||(qd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nA)))}var Nu=null;function Z_(t){Nu!==t&&(Nu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nu===t&&(Nu=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Bd(o||a)===null)continue;break}var d=Rn(a);d!==null&&(t.splice(i,3),i-=3,zf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function Wa(t){function i(N){return Iu(N,t)}Qs!==null&&Iu(Qs,t),Ks!==null&&Iu(Ks,t),Ys!==null&&Iu(Ys,t),yl.forEach(i),_l.forEach(i);for(var a=0;a<Xs.length;a++){var o=Xs[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Xs.length&&(a=Xs[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&Xs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[Ot]||null;if(typeof d=="function")_||Z_(a);else if(_){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Ot]||null)A=_.formAction;else if(Bd(h)!==null)continue}else A=_.action;typeof A=="function"?a[o+1]=A:(a.splice(o,3),o-=3),Z_(a)}}}function J_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Hd(t){this._internalRoot=t}xu.prototype.render=Hd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=Tn();F_(a,o,t,i,null,null)},xu.prototype.unmount=Hd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;F_(t.current,2,null,t,null,null),uu(),i[oi]=null}};function xu(t){this._internalRoot=t}xu.prototype.unstable_scheduleHydration=function(t){if(t){var i=uc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Xs.length&&i!==0&&i<Xs[a].priority;a++);Xs.splice(a,0,t),a===0&&$_(t)}};var ev=e.version;if(ev!=="19.2.0")throw Error(r(527,ev,"19.2.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=E(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Un=Du.inject(iA),kt=Du}catch{}}return Tl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=oy,d=ly,_=cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=q_(t,1,!1,null,null,a,o,null,h,d,_,J_),t[oi]=i.current,Sd(t),new Hd(i)},Tl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=oy,_=ly,A=cy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=q_(t,1,!0,i,a??null,o,h,N,d,_,A,J_),i.context=H_(null),a=i.current,o=Tn(),o=Sr(o),h=Vs(o),h.callback=null,js(a,h,o),a=o,i.current.lanes=a,Ar(i,a),bi(i),t[oi]=i.current,Sd(t),new xu(i)},Tl.version="19.2.0",Tl}var av;function pA(){if(av)return Gd.exports;av=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gd.exports=mA(),Gd.exports}var gA=pA();const yA=()=>{};var ov={};const H0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},_A=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],f=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,E=y?s[l+2]:0,T=c>>2,S=(c&3)<<4|p>>4;let R=(p&15)<<2|E>>6,L=E&63;y||(L=64,f||(R=64)),r.push(n[T],n[S],n[R],n[L])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(H0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):_A(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const E=l<s.length?n[s.charAt(l)]:64;++l;const S=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||E==null||S==null)throw new vA;const R=c<<2|p>>4;if(r.push(R),E!==64){const L=p<<4&240|E>>2;if(r.push(L),S!==64){const Q=E<<6&192|S;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class vA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EA=function(s){const e=H0(s);return F0.encodeByteArray(e,!0)},$u=function(s){return EA(s).replace(/\./g,"")},G0=function(s){try{return F0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const AA=()=>TA().__FIREBASE_DEFAULTS__,bA=()=>{if(typeof process>"u"||typeof ov>"u")return;const s=ov.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},SA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&G0(s[1]);return e&&JSON.parse(e)},Th=()=>{try{return yA()||AA()||bA()||SA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Q0=s=>Th()?.emulatorHosts?.[s],K0=s=>{const e=Q0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y0=()=>Th()?.config,X0=s=>Th()?.[`_${s}`];class wA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function ra(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jm(s){return(await fetch(s,{credentials:"include"})).ok}function $0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[$u(JSON.stringify(n)),$u(JSON.stringify(f)),""].join(".")}const Il={};function RA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?s.emulator.push(e):s.prod.push(e);return s}function CA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let lv=!1;function km(s,e){if(typeof window>"u"||typeof document>"u"||!ra(window.location.host)||Il[s]===e||Il[s]||lv)return;Il[s]=e;function n(R){return`__firebase__banner__${R}`}const r="__firebase__banner",c=RA().prod.length>0;function f(){const R=document.getElementById(r);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,L){R.setAttribute("width","24"),R.setAttribute("id",L),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function E(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{lv=!0,f()},R}function T(R,L){R.setAttribute("id",L),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function S(){const R=CA(r),L=n("text"),Q=document.getElementById(L)||document.createElement("span"),H=n("learnmore"),F=document.getElementById(H)||document.createElement("a"),Z=n("preprendIcon"),ee=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const J=R.element;p(J),T(F,H);const te=E();y(ee,Z),J.append(ee,Q,F,te),document.body.appendChild(J)}c?(Q.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function NA(){const s=Th()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MA(){const s=Yt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function VA(){return!NA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jA(){try{return typeof indexedDB=="object"}catch{return!1}}function kA(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const LA="FirebaseError";class ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LA,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?PA(c,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new ki(l,p,r)}}function PA(s,e){return s.replace(UA,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const UA=/\{\$([^}]+)}/g;function zA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Jr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],f=e[l];if(cv(c)&&cv(f)){if(!Jr(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function cv(s){return s!==null&&typeof s=="object"}function Fl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Al(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function bl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function BA(s,e){const n=new qA(s,e);return n.subscribe.bind(n)}class qA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HA(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Yd),l.error===void 0&&(l.error=Yd),l.complete===void 0&&(l.complete=Yd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Yd(){}function gt(s){return s&&s._delegate?s._delegate:s}class or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xr="[DEFAULT]";class FA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QA(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GA(s){return s===Xr?void 0:s}function QA(s){return s.instantiationMode==="EAGER"}class KA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ne;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ne||(Ne={}));const YA={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},XA=Ne.INFO,$A={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},WA=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=$A[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lm{constructor(e){this.name=e,this._logLevel=XA,this._logHandler=WA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const ZA=(s,e)=>e.some(n=>s instanceof n);let uv,hv;function JA(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eb(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,om=new WeakMap,Z0=new WeakMap,Xd=new WeakMap,Pm=new WeakMap;function tb(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(ir(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&W0.set(n,s)}).catch(()=>{}),Pm.set(e,s),e}function nb(s){if(om.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});om.set(s,e)}let lm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return om.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Z0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function ib(s){lm=s(lm)}function sb(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call($d(this),e,...n);return Z0.set(r,e.sort?e.sort():[e]),ir(r)}:eb().includes(s)?function(...e){return s.apply($d(this),e),ir(W0.get(this))}:function(...e){return ir(s.apply($d(this),e))}}function rb(s){return typeof s=="function"?sb(s):(s instanceof IDBTransaction&&nb(s),ZA(s,JA())?new Proxy(s,lm):s)}function ir(s){if(s instanceof IDBRequest)return tb(s);if(Xd.has(s))return Xd.get(s);const e=rb(s);return e!==s&&(Xd.set(s,e),Pm.set(e,s)),e}const $d=s=>Pm.get(s);function ab(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=ir(f);return r&&f.addEventListener("upgradeneeded",y=>{r(ir(f.result),y.oldVersion,y.newVersion,ir(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),p}const ob=["get","getKey","getAll","getAllKeys","count"],lb=["put","add","delete","clear"],Wd=new Map;function fv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=lb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||ob.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(p.shift())),(await Promise.all([E[n](...p),l&&y.done]))[0]};return Wd.set(e,c),c}ib(s=>({...s,get:(e,n,r)=>fv(e,n)||s.get(e,n,r),has:(e,n)=>!!fv(e,n)||s.has(e,n)}));class cb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ub(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ub(s){return s.getComponent()?.type==="VERSION"}const cm="@firebase/app",dv="0.14.6";const us=new Lm("@firebase/app"),hb="@firebase/app-compat",fb="@firebase/analytics-compat",db="@firebase/analytics",mb="@firebase/app-check-compat",pb="@firebase/app-check",gb="@firebase/auth",yb="@firebase/auth-compat",_b="@firebase/database",vb="@firebase/data-connect",Eb="@firebase/database-compat",Tb="@firebase/functions",Ab="@firebase/functions-compat",bb="@firebase/installations",Sb="@firebase/installations-compat",wb="@firebase/messaging",Rb="@firebase/messaging-compat",Cb="@firebase/performance",Ib="@firebase/performance-compat",Nb="@firebase/remote-config",xb="@firebase/remote-config-compat",Db="@firebase/storage",Ob="@firebase/storage-compat",Mb="@firebase/firestore",Vb="@firebase/ai",jb="@firebase/firestore-compat",kb="firebase",Lb="12.6.0";const um="[DEFAULT]",Pb={[cm]:"fire-core",[hb]:"fire-core-compat",[db]:"fire-analytics",[fb]:"fire-analytics-compat",[pb]:"fire-app-check",[mb]:"fire-app-check-compat",[gb]:"fire-auth",[yb]:"fire-auth-compat",[_b]:"fire-rtdb",[vb]:"fire-data-connect",[Eb]:"fire-rtdb-compat",[Tb]:"fire-fn",[Ab]:"fire-fn-compat",[bb]:"fire-iid",[Sb]:"fire-iid-compat",[wb]:"fire-fcm",[Rb]:"fire-fcm-compat",[Cb]:"fire-perf",[Ib]:"fire-perf-compat",[Nb]:"fire-rc",[xb]:"fire-rc-compat",[Db]:"fire-gcs",[Ob]:"fire-gcs-compat",[Mb]:"fire-fst",[jb]:"fire-fst-compat",[Vb]:"fire-vertex","fire-js":"fire-js",[kb]:"fire-js-all"};const Wu=new Map,Ub=new Map,hm=new Map;function mv(s,e){try{s.container.addComponent(e)}catch(n){us.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ea(s){const e=s.name;if(hm.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,s);for(const n of Wu.values())mv(n,s);for(const n of Ub.values())mv(n,s);return!0}function Ah(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function An(s){return s==null?!1:s.settings!==void 0}const zb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Hl("app","Firebase",zb);class Bb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const aa=Lb;function J0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:um,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw sr.create("bad-app-name",{appName:String(l)});if(n||(n=Y0()),!n)throw sr.create("no-options");const c=Wu.get(l);if(c){if(Jr(n,c.options)&&Jr(r,c.config))return c;throw sr.create("duplicate-app",{appName:l})}const f=new KA(l);for(const y of hm.values())f.addComponent(y);const p=new Bb(n,r,f);return Wu.set(l,p),p}function Um(s=um){const e=Wu.get(s);if(!e&&s===um&&Y0())return J0();if(!e)throw sr.create("no-app",{appName:s});return e}function Ri(s,e,n){let r=Pb[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(f.join(" "));return}ea(new or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const qb="firebase-heartbeat-database",Hb=1,Vl="firebase-heartbeat-store";let Zd=null;function e1(){return Zd||(Zd=ab(qb,Hb,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(s=>{throw sr.create("idb-open",{originalErrorMessage:s.message})})),Zd}async function Fb(s){try{const n=(await e1()).transaction(Vl),r=await n.objectStore(Vl).get(t1(s));return await n.done,r}catch(e){if(e instanceof ki)us.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e?.message});us.warn(n.message)}}}async function pv(s,e){try{const r=(await e1()).transaction(Vl,"readwrite");await r.objectStore(Vl).put(e,t1(s)),await r.done}catch(n){if(n instanceof ki)us.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n?.message});us.warn(r.message)}}}function t1(s){return`${s.name}!${s.options.appId}`}const Gb=1024,Qb=30;class Kb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Qb){const l=$b(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gv(),{heartbeatsToSend:n,unsentEntries:r}=Yb(this._heartbeatsCache.heartbeats),l=$u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return us.warn(e),""}}}function gv(){return new Date().toISOString().substring(0,10)}function Yb(s,e=Gb){const n=[];let r=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),yv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),yv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jA()?kA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yv(s){return $u(JSON.stringify({version:2,heartbeats:s})).length}function $b(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function Wb(s){ea(new or("platform-logger",e=>new cb(e),"PRIVATE")),ea(new or("heartbeat",e=>new Kb(e),"PRIVATE")),Ri(cm,dv,s),Ri(cm,dv,"esm2020"),Ri("fire-js","")}Wb("");function n1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zb=n1,i1=new Hl("auth","Firebase",n1());const Zu=new Lm("@firebase/auth");function Jb(s,...e){Zu.logLevel<=Ne.WARN&&Zu.warn(`Auth (${aa}): ${s}`,...e)}function zu(s,...e){Zu.logLevel<=Ne.ERROR&&Zu.error(`Auth (${aa}): ${s}`,...e)}function ei(s,...e){throw zm(s,...e)}function Ci(s,...e){return zm(s,...e)}function s1(s,e,n){const r={...Zb(),[e]:n};return new Hl("auth","Firebase",r).create(e,{appName:s.name})}function ls(s){return s1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return i1.create(s,...e)}function ye(s,e,...n){if(!s)throw zm(e,...n)}function as(s){const e="INTERNAL ASSERTION FAILED: "+s;throw zu(e),new Error(e)}function hs(s,e){s||as(e)}function fm(){return typeof self<"u"&&self.location?.href||""}function eS(){return _v()==="http:"||_v()==="https:"}function _v(){return typeof self<"u"&&self.location?.protocol||null}function tS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eS()||DA()||"connection"in navigator)?navigator.onLine:!0}function nS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=IA()||OA()}get(){return tS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bm(s,e){hs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class r1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rS=new Gl(3e4,6e4);function ms(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ps(s,e,n,r,l={}){return a1(s,l,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Fl({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const E={method:e,headers:y,...c};return xA()||(E.referrerPolicy="no-referrer"),s.emulatorConfig&&ra(s.emulatorConfig.host)&&(E.credentials="include"),r1.fetch()(await o1(s,s.config.apiHost,n,p),E)})}async function a1(s,e,n){s._canInitEmulator=!1;const r={...iS,...e};try{const l=new oS(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Mu(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,E]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mu(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Mu(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw Mu(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw s1(s,T,E);ei(s,T)}}catch(l){if(l instanceof ki)throw l;ei(s,"network-request-failed",{message:String(l)})}}async function Ql(s,e,n,r,l={}){const c=await ps(s,e,n,r,l);return"mfaPendingCredential"in c&&ei(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function o1(s,e,n,r){const l=`${e}${n}?${r}`,c=s,f=c.config.emulator?Bm(s.config,l):`${s.config.apiScheme}://${l}`;return sS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function aS(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ci(this.auth,"network-request-failed")),rS.get())})}}function Mu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Ci(s,e,r);return l.customData._tokenResponse=n,l}function vv(s){return s!==void 0&&s.enterprise!==void 0}class lS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cS(s,e){return ps(s,"GET","/v2/recaptchaConfig",ms(s,e))}async function uS(s,e){return ps(s,"POST","/v1/accounts:delete",e)}async function Ju(s,e){return ps(s,"POST","/v1/accounts:lookup",e)}function Nl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hS(s,e=!1){const n=gt(s),r=await n.getIdToken(e),l=qm(r);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:r,authTime:Nl(Jd(l.auth_time)),issuedAtTime:Nl(Jd(l.iat)),expirationTime:Nl(Jd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Jd(s){return Number(s)*1e3}function qm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const l=G0(n);return l?JSON.parse(l):(zu("Failed to decode base64 JWT payload"),null)}catch(l){return zu("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Ev(s){const e=qm(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ki&&fS(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function fS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class dS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function eh(s){const e=s.auth,n=await s.getIdToken(),r=await jl(s,Ju(e,{idToken:n}));ye(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?l1(l.providerUserInfo):[],f=pS(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,T)}async function mS(s){const e=gt(s);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pS(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function l1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function gS(s,e){const n=await a1(s,{},async()=>{const r=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await o1(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&ra(s.emulatorConfig.host)&&(y.credentials="include"),r1.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yS(s,e){return ps(s,"POST","/v2/accounts:revokeToken",ms(s,e))}class io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await gS(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,f=new io;return r&&(ye(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(ye(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new io,this.toJSON())}_performRefresh(){return as("not implemented")}}function Ws(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new dS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new dm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await jl(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await jl(this,uS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,E=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:R,isAnonymous:L,providerData:Q,stsTokenManager:H}=n;ye(S&&H,e,"internal-error");const F=io.fromJSON(this.name,H);ye(typeof S=="string",e,"internal-error"),Ws(r,e.name),Ws(l,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof L=="boolean",e,"internal-error"),Ws(c,e.name),Ws(f,e.name),Ws(p,e.name),Ws(y,e.name),Ws(E,e.name),Ws(T,e.name);const Z=new Wn({uid:S,auth:e,email:l,emailVerified:R,displayName:r,isAnonymous:L,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:F,createdAt:E,lastLoginAt:T});return Q&&Array.isArray(Q)&&(Z.providerData=Q.map(ee=>({...ee}))),y&&(Z._redirectEventId=y),Z}static async _fromIdTokenResponse(e,n,r=!1){const l=new io;l.updateFromServerResponse(n);const c=new Wn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await eh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?l1(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new io;p.updateFromIdToken(r);const y=new Wn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,E),y}}const Tv=new Map;function os(s){hs(s instanceof Function,"Expected a class definition");let e=Tv.get(s);return e?(hs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Tv.set(s,e),e)}class c1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c1.type="NONE";const Av=c1;function Bu(s,e,n){return`firebase:${s}:${e}:${n}`}class so{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Bu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Bu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ju(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new so(os(Av),e,r);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=l[0]||os(Av);const f=Bu(r,e.config.apiKey,e.name);let p=null;for(const E of n)try{const T=await E._get(f);if(T){let S;if(typeof T=="string"){const R=await Ju(e,{idToken:T}).catch(()=>{});if(!R)break;S=await Wn._fromGetAccountInfoResponse(e,R,T)}else S=Wn._fromJSON(e,T);E!==c&&(p=S),c=E;break}}catch{}const y=l.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new so(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async E=>{if(E!==c)try{await E._remove(f)}catch{}})),new so(c,e,r))}}function bv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p1(e))return"Blackberry";if(g1(e))return"Webos";if(h1(e))return"Safari";if((e.includes("chrome/")||f1(e))&&!e.includes("edge/"))return"Chrome";if(m1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function u1(s=Yt()){return/firefox\//i.test(s)}function h1(s=Yt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f1(s=Yt()){return/crios\//i.test(s)}function d1(s=Yt()){return/iemobile/i.test(s)}function m1(s=Yt()){return/android/i.test(s)}function p1(s=Yt()){return/blackberry/i.test(s)}function g1(s=Yt()){return/webos/i.test(s)}function Hm(s=Yt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function _S(s=Yt()){return Hm(s)&&!!window.navigator?.standalone}function vS(){return MA()&&document.documentMode===10}function y1(s=Yt()){return Hm(s)||m1(s)||g1(s)||p1(s)||/windows phone/i.test(s)||d1(s)}function _1(s,e=[]){let n;switch(s){case"Browser":n=bv(Yt());break;case"Worker":n=`${bv(Yt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${r}`}class ES{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function TS(s,e={}){return ps(s,"GET","/v2/passwordPolicy",ms(s,e))}const AS=6;class bS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class SS{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new ES(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=os(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await so.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ju(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(An(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(ls(this));const n=e?gt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TS(this),n=new bS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yS(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&os(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Jb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pr(s){return gt(s)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=BA(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wS(s){bh=s}function v1(s){return bh.loadJS(s)}function RS(){return bh.recaptchaEnterpriseScript}function CS(){return bh.gapiScript}function IS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class NS{constructor(){this.enterprise=new xS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DS="recaptcha-enterprise",E1="NO_RECAPTCHA";class OS{constructor(e){this.type=DS,this.auth=pr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{cS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const E=new lS(y);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,f(E.siteKey)}}).catch(y=>{p(y)})})}function l(c,f,p){const y=window.grecaptcha;vv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(E=>{f(E)}).catch(()=>{f(E1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NS().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&vv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=RS();y.length!==0&&(y+=p),v1(y).then(()=>{l(p,c,f)}).catch(E=>{f(E)})}}).catch(p=>{f(p)})})}}async function wv(s,e,n,r=!1,l=!1){const c=new OS(s);let f;if(l)f=E1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,E=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function th(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await wv(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await wv(s,e,n,n==="getOobCode");return r(s,f)}else return Promise.reject(c)})}function MS(s,e){const n=Ah(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Jr(c,e??{}))return l;ei(l,"already-initialized")}return n.initialize({options:e})}function VS(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(os);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function jS(s,e,n){const r=pr(s);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=T1(e),{host:f,port:p}=kS(e),y=p===null?"":`:${p}`,E={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Jr(E,r.config.emulator)&&Jr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=E,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ra(f)?(jm(`${c}//${f}${y}`),km("Auth",!0)):LS()}function T1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function kS(s){const e=T1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:Rv(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:Rv(f)}}}function Rv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function LS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Fm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,n){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function PS(s,e){return ps(s,"POST","/v1/accounts:signUp",e)}async function US(s,e){return Ql(s,"POST","/v1/accounts:signInWithPassword",ms(s,e))}async function A1(s,e){return ps(s,"POST","/v1/accounts:sendOobCode",ms(s,e))}async function zS(s,e){return A1(s,e)}async function BS(s,e){return A1(s,e)}async function qS(s,e){return Ql(s,"POST","/v1/accounts:signInWithEmailLink",ms(s,e))}async function HS(s,e){return Ql(s,"POST","/v1/accounts:signInWithEmailLink",ms(s,e))}class kl extends Fm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,n,"signInWithPassword",US);case"emailLink":return qS(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return th(e,r,"signUpPassword",PS);case"emailLink":return HS(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ro(s,e){return Ql(s,"POST","/v1/accounts:signInWithIdp",ms(s,e))}const FS="http://localhost";class ta extends Fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const f=new ta(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ro(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:FS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}function GS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QS(s){const e=Al(bl(s)).link,n=e?Al(bl(e)).deep_link_id:null,r=Al(bl(s)).deep_link_id;return(r?Al(bl(r)).link:null)||r||n||e||s}class Gm{constructor(e){const n=Al(bl(e)),r=n.apiKey??null,l=n.oobCode??null,c=GS(n.mode??null);ye(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QS(e);try{return new Gm(n)}catch{return null}}}class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,n){return kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gm.parseLink(n);return ye(r,"argument-error"),kl._fromEmailAndCode(e,r.code,r.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class b1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Kl extends b1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends Kl{constructor(){super("facebook.com")}static credential(e){return ta._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zs.PROVIDER_ID="facebook.com";class Js extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ta._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";class er extends Kl{constructor(){super("github.com")}static credential(e){return ta._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";class tr extends Kl{constructor(){super("twitter.com")}static credential(e,n){return ta._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";async function KS(s,e){return Ql(s,"POST","/v1/accounts:signUp",ms(s,e))}class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await Wn._fromIdTokenResponse(e,r,l),f=Cv(r);return new na({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=Cv(r);return new na({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function Cv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class nh extends ki{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new nh(e,n,r,l)}}function S1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(s,c,e,r):c})}async function YS(s,e,n=!1){const r=await jl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return na._forOperation(s,"link",r)}async function XS(s,e,n=!1){const{auth:r}=s;if(An(r.app))return Promise.reject(ls(r));const l="reauthenticate";try{const c=await jl(s,S1(r,l,e,s),n);ye(c.idToken,r,"internal-error");const f=qm(c.idToken);ye(f,r,"internal-error");const{sub:p}=f;return ye(s.uid===p,r,"user-mismatch"),na._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ei(r,"user-mismatch"),c}}async function w1(s,e,n=!1){if(An(s.app))return Promise.reject(ls(s));const r="signIn",l=await S1(s,r,e),c=await na._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function $S(s,e){return w1(pr(s),e)}async function R1(s){const e=pr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WS(s,e,n){const r=pr(s);await th(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BS)}async function ZS(s,e,n){if(An(s.app))return Promise.reject(ls(s));const r=pr(s),f=await th(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&R1(s),y}),p=await na._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function JS(s,e,n){return An(s.app)?Promise.reject(ls(s)):$S(gt(s),mo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R1(s),r})}async function ew(s,e){const n=gt(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await zS(n.auth,l);c!==s.email&&await s.reload()}function tw(s,e,n,r){return gt(s).onIdTokenChanged(e,n,r)}function nw(s,e,n){return gt(s).beforeAuthStateChanged(e,n)}function iw(s,e,n,r){return gt(s).onAuthStateChanged(e,n,r)}function C1(s){return gt(s).signOut()}const ih="__sak";class I1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ih,"1"),this.storage.removeItem(ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sw=1e3,rw=10;class N1 extends I1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);vS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,rw):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N1.type="LOCAL";const aw=N1;class x1 extends I1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x1.type="SESSION";const D1=x1;function ow(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async E=>E(n.origin,c)),y=await ow(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];function Qm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class lw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const E=Qm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(S){const R=S;if(R.data.eventId===E)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:E,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ii(){return window}function cw(s){Ii().location.href=s}function O1(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function uw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hw(){return navigator?.serviceWorker?.controller||null}function fw(){return O1()?self:null}const M1="firebaseLocalStorageDb",dw=1,sh="firebaseLocalStorage",V1="fbase_key";class Yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wh(s,e){return s.transaction([sh],e?"readwrite":"readonly").objectStore(sh)}function mw(){const s=indexedDB.deleteDatabase(M1);return new Yl(s).toPromise()}function mm(){const s=indexedDB.open(M1,dw);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(sh,{keyPath:V1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(sh)?e(r):(r.close(),await mw(),e(await mm()))})})}async function Iv(s,e,n){const r=wh(s,!0).put({[V1]:e,value:n});return new Yl(r).toPromise()}async function pw(s,e){const n=wh(s,!1).get(e),r=await new Yl(n).toPromise();return r===void 0?null:r.value}function Nv(s,e){const n=wh(s,!0).delete(e);return new Yl(n).toPromise()}const gw=800,yw=3;class j1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(fw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uw(),!this.activeServiceWorker)return;this.sender=new lw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await Iv(e,ih,"1"),await Nv(e,ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pw(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=wh(l,!1).getAll();return new Yl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j1.type="LOCAL";const _w=j1;new Gl(3e4,6e4);function vw(s,e){return e?os(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Km extends Fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ew(s){return w1(s.auth,new Km(s),s.bypassAuthState)}function Tw(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),XS(n,new Km(s),s.bypassAuthState)}async function Aw(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),YS(n,new Km(s),s.bypassAuthState)}class k1{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ew;case"linkViaPopup":case"linkViaRedirect":return Aw;case"reauthViaPopup":case"reauthViaRedirect":return Tw;default:ei(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bw=new Gl(2e3,1e4);class no extends k1{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bw.get())};e()}}no.currentPopupAction=null;const Sw="pendingRedirect",qu=new Map;class ww extends k1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qu.get(this.auth._key());if(!e){try{const r=await Rw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qu.set(this.auth._key(),e)}return this.bypassAuthState||qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rw(s,e){const n=Nw(e),r=Iw(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function Cw(s,e){qu.set(s._key(),e)}function Iw(s){return os(s._redirectPersistence)}function Nw(s){return Bu(Sw,s.config.apiKey,s.name)}async function xw(s,e,n=!1){if(An(s.app))return Promise.reject(ls(s));const r=pr(s),l=vw(r,e),f=await new ww(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const Dw=600*1e3;class Ow{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!L1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ci(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dw&&this.cachedEventUids.clear(),this.cachedEventUids.has(xv(e))}saveEventToCache(e){this.cachedEventUids.add(xv(e)),this.lastProcessedEventTime=Date.now()}}function xv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function L1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Mw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L1(s);default:return!1}}async function Vw(s,e={}){return ps(s,"GET","/v1/projects",e)}const jw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kw=/^https?/;async function Lw(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Vw(s);for(const n of e)try{if(Pw(n))return}catch{}ei(s,"unauthorized-domain")}function Pw(s){const e=fm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!kw.test(n))return!1;if(jw.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const Uw=new Gl(3e4,6e4);function Dv(){const s=Ii().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function zw(s){return new Promise((e,n)=>{function r(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Ci(s,"network-request-failed"))},timeout:Uw.get()})}if(Ii().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ii().gapi?.load)r();else{const l=IS("iframefcb");return Ii()[l]=()=>{gapi.load?r():n(Ci(s,"network-request-failed"))},v1(`${CS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Hu=null,e})}let Hu=null;function Bw(s){return Hu=Hu||zw(s),Hu}const qw=new Gl(5e3,15e3),Hw="__/auth/iframe",Fw="emulator/auth/iframe",Gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kw(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Bm(e,Fw):`https://${s.config.authDomain}/${Hw}`,r={apiKey:e.apiKey,appName:s.name,v:aa},l=Qw.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Fl(r).slice(1)}`}async function Yw(s){const e=await Bw(s),n=Ii().gapi;return ye(n,s,"internal-error"),e.open({where:document.body,url:Kw(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gw,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=Ci(s,"network-request-failed"),p=Ii().setTimeout(()=>{c(f)},qw.get());function y(){Ii().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(f)})}))}const Xw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$w=500,Ww=600,Zw="_blank",Jw="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(s,e,n,r=$w,l=Ww){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...Xw,width:r.toString(),height:l.toString(),top:c,left:f},E=Yt().toLowerCase();n&&(p=f1(E)?Zw:n),u1(E)&&(e=e||Jw,y.scrollbars="yes");const T=Object.entries(y).reduce((R,[L,Q])=>`${R}${L}=${Q},`,"");if(_S(E)&&p!=="_self")return tR(e||"",p),new Ov(null);const S=window.open(e||"",p,T);ye(S,s,"popup-blocked");try{S.focus()}catch{}return new Ov(S)}function tR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const nR="__/auth/handler",iR="emulator/auth/handler",sR=encodeURIComponent("fac");async function Mv(s,e,n,r,l,c){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:aa,eventId:l};if(e instanceof b1){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",zA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof Kl){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),E=y?`#${sR}=${encodeURIComponent(y)}`:"";return`${rR(s)}?${Fl(p).slice(1)}${E}`}function rR({config:s}){return s.emulator?Bm(s,iR):`https://${s.authDomain}/${nR}`}const em="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D1,this._completeRedirectFn=xw,this._overrideRedirectResult=Cw}async _openPopup(e,n,r,l){hs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Mv(e,n,r,fm(),l);return eR(e,c,Qm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await Mv(e,n,r,fm(),l);return cw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(hs(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Yw(e),r=new Ow(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(em,{type:em},l=>{const c=l?.[0]?.[em];c!==void 0&&n(!!c),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Lw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y1()||h1()||Hm()}}const oR=aR;var Vv="@firebase/auth",jv="1.11.1";class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uR(s){ea(new or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_1(s)},E=new SS(r,l,c,y);return VS(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ea(new or("auth-internal",e=>{const n=pr(e.getProvider("auth").getImmediate());return(r=>new lR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(Vv,jv,cR(s)),Ri(Vv,jv,"esm2020")}const hR=300,fR=X0("authIdTokenMaxAge")||hR;let kv=null;const dR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fR)return;const l=n?.token;kv!==l&&(kv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function mR(s=Um()){const e=Ah(s,"auth");if(e.isInitialized())return e.getImmediate();const n=MS(s,{popupRedirectResolver:oR,persistence:[_w,aw,D1]}),r=X0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=dR(c.toString());nw(n,f,()=>f(n.currentUser)),tw(n,p=>f(p))}}const l=Q0("auth");return l&&jS(n,`http://${l}`),n}function pR(){return document.getElementsByTagName("head")?.[0]??document}wS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=Ci("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",pR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uR("Browser");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rr,P1;(function(){var s;function e(x,w){function C(){}C.prototype=w.prototype,x.F=w.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(M,O,j){for(var I=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)I[rt-2]=arguments[rt];return w.prototype[O].apply(M,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(x,w,C){C||(C=0);const M=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)M[O]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(O=0;O<16;++O)M[O]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=x.g[0],C=x.g[1],O=x.g[2];let j=x.g[3],I;I=w+(j^C&(O^j))+M[0]+3614090360&4294967295,w=C+(I<<7&4294967295|I>>>25),I=j+(O^w&(C^O))+M[1]+3905402710&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(C^j&(w^C))+M[2]+606105819&4294967295,O=j+(I<<17&4294967295|I>>>15),I=C+(w^O&(j^w))+M[3]+3250441966&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(j^C&(O^j))+M[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=j+(O^w&(C^O))+M[5]+1200080426&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(C^j&(w^C))+M[6]+2821735955&4294967295,O=j+(I<<17&4294967295|I>>>15),I=C+(w^O&(j^w))+M[7]+4249261313&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(j^C&(O^j))+M[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=j+(O^w&(C^O))+M[9]+2336552879&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(C^j&(w^C))+M[10]+4294925233&4294967295,O=j+(I<<17&4294967295|I>>>15),I=C+(w^O&(j^w))+M[11]+2304563134&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(j^C&(O^j))+M[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=j+(O^w&(C^O))+M[13]+4254626195&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(C^j&(w^C))+M[14]+2792965006&4294967295,O=j+(I<<17&4294967295|I>>>15),I=C+(w^O&(j^w))+M[15]+1236535329&4294967295,C=O+(I<<22&4294967295|I>>>10),I=w+(O^j&(C^O))+M[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=j+(C^O&(w^C))+M[6]+3225465664&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(j^w))+M[11]+643717713&4294967295,O=j+(I<<14&4294967295|I>>>18),I=C+(j^w&(O^j))+M[0]+3921069994&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(C^O))+M[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=j+(C^O&(w^C))+M[10]+38016083&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(j^w))+M[15]+3634488961&4294967295,O=j+(I<<14&4294967295|I>>>18),I=C+(j^w&(O^j))+M[4]+3889429448&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(C^O))+M[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=j+(C^O&(w^C))+M[14]+3275163606&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(j^w))+M[3]+4107603335&4294967295,O=j+(I<<14&4294967295|I>>>18),I=C+(j^w&(O^j))+M[8]+1163531501&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(C^O))+M[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=j+(C^O&(w^C))+M[2]+4243563512&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^C&(j^w))+M[7]+1735328473&4294967295,O=j+(I<<14&4294967295|I>>>18),I=C+(j^w&(O^j))+M[12]+2368359562&4294967295,C=O+(I<<20&4294967295|I>>>12),I=w+(C^O^j)+M[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=j+(w^C^O)+M[8]+2272392833&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^C)+M[11]+1839030562&4294967295,O=j+(I<<16&4294967295|I>>>16),I=C+(O^j^w)+M[14]+4259657740&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^j)+M[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=j+(w^C^O)+M[4]+1272893353&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^C)+M[7]+4139469664&4294967295,O=j+(I<<16&4294967295|I>>>16),I=C+(O^j^w)+M[10]+3200236656&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^j)+M[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=j+(w^C^O)+M[0]+3936430074&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^C)+M[3]+3572445317&4294967295,O=j+(I<<16&4294967295|I>>>16),I=C+(O^j^w)+M[6]+76029189&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(C^O^j)+M[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=j+(w^C^O)+M[12]+3873151461&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^C)+M[15]+530742520&4294967295,O=j+(I<<16&4294967295|I>>>16),I=C+(O^j^w)+M[2]+3299628645&4294967295,C=O+(I<<23&4294967295|I>>>9),I=w+(O^(C|~j))+M[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=j+(C^(w|~O))+M[7]+1126891415&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~C))+M[14]+2878612391&4294967295,O=j+(I<<15&4294967295|I>>>17),I=C+(j^(O|~w))+M[5]+4237533241&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~j))+M[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=j+(C^(w|~O))+M[3]+2399980690&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~C))+M[10]+4293915773&4294967295,O=j+(I<<15&4294967295|I>>>17),I=C+(j^(O|~w))+M[1]+2240044497&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~j))+M[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=j+(C^(w|~O))+M[15]+4264355552&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~C))+M[6]+2734768916&4294967295,O=j+(I<<15&4294967295|I>>>17),I=C+(j^(O|~w))+M[13]+1309151649&4294967295,C=O+(I<<21&4294967295|I>>>11),I=w+(O^(C|~j))+M[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=j+(C^(w|~O))+M[11]+3174756917&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~C))+M[2]+718787259&4294967295,O=j+(I<<15&4294967295|I>>>17),I=C+(j^(O|~w))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+j&4294967295}r.prototype.v=function(x,w){w===void 0&&(w=x.length);const C=w-this.blockSize,M=this.C;let O=this.h,j=0;for(;j<w;){if(O==0)for(;j<=C;)l(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<w;)if(M[O++]=x.charCodeAt(j++),O==this.blockSize){l(this,M),O=0;break}}else for(;j<w;)if(M[O++]=x[j++],O==this.blockSize){l(this,M),O=0;break}}this.h=O,this.o+=w},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;w=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=w&255,w/=256;for(this.v(x),x=Array(16),w=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)x[w++]=this.g[C]>>>M&255;return x};function c(x,w){var C=p;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=w(x)}function f(x,w){this.h=w;const C=[];let M=!0;for(let O=x.length-1;O>=0;O--){const j=x[O]|0;M&&j==w||(C[O]=j,M=!1)}this.g=C}var p={};function y(x){return-128<=x&&x<128?c(x,function(w){return new f([w|0],w<0?-1:0)}):new f([x|0],x<0?-1:0)}function E(x){if(isNaN(x)||!isFinite(x))return S;if(x<0)return F(E(-x));const w=[];let C=1;for(let M=0;x>=C;M++)w[M]=x/C|0,C*=4294967296;return new f(w,0)}function T(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return F(T(x.substring(1),w));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=E(Math.pow(w,8));let M=S;for(let j=0;j<x.length;j+=8){var O=Math.min(8,x.length-j);const I=parseInt(x.substring(j,j+O),w);O<8?(O=E(Math.pow(w,O)),M=M.j(O).add(E(I))):(M=M.j(C),M=M.add(E(I)))}return M}var S=y(0),R=y(1),L=y(16777216);s=f.prototype,s.m=function(){if(H(this))return-F(this).m();let x=0,w=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);x+=(M>=0?M:4294967296+M)*w,w*=4294967296}return x},s.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(Q(this))return"0";if(H(this))return"-"+F(this).toString(x);const w=E(Math.pow(x,6));var C=this;let M="";for(;;){const O=te(C,w).g;C=Z(C,O.j(w));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=O,Q(C))return j+M;for(;j.length<6;)j="0"+j;M=j+M}},s.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function Q(x){if(x.h!=0)return!1;for(let w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function H(x){return x.h==-1}s.l=function(x){return x=Z(this,x),H(x)?-1:Q(x)?0:1};function F(x){const w=x.g.length,C=[];for(let M=0;M<w;M++)C[M]=~x.g[M];return new f(C,~x.h).add(R)}s.abs=function(){return H(this)?F(this):this},s.add=function(x){const w=Math.max(this.g.length,x.g.length),C=[];let M=0;for(let O=0;O<=w;O++){let j=M+(this.i(O)&65535)+(x.i(O)&65535),I=(j>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);M=I>>>16,j&=65535,I&=65535,C[O]=I<<16|j}return new f(C,C[C.length-1]&-2147483648?-1:0)};function Z(x,w){return x.add(F(w))}s.j=function(x){if(Q(this)||Q(x))return S;if(H(this))return H(x)?F(this).j(F(x)):F(F(this).j(x));if(H(x))return F(this.j(F(x)));if(this.l(L)<0&&x.l(L)<0)return E(this.m()*x.m());const w=this.g.length+x.g.length,C=[];for(var M=0;M<2*w;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<x.g.length;O++){const j=this.i(M)>>>16,I=this.i(M)&65535,rt=x.i(O)>>>16,ut=x.i(O)&65535;C[2*M+2*O]+=I*ut,ee(C,2*M+2*O),C[2*M+2*O+1]+=j*ut,ee(C,2*M+2*O+1),C[2*M+2*O+1]+=I*rt,ee(C,2*M+2*O+1),C[2*M+2*O+2]+=j*rt,ee(C,2*M+2*O+2)}for(x=0;x<w;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=w;x<2*w;x++)C[x]=0;return new f(C,0)};function ee(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function J(x,w){this.g=x,this.h=w}function te(x,w){if(Q(w))throw Error("division by zero");if(Q(x))return new J(S,S);if(H(x))return w=te(F(x),w),new J(F(w.g),F(w.h));if(H(w))return w=te(x,F(w)),new J(F(w.g),w.h);if(x.g.length>30){if(H(x)||H(w))throw Error("slowDivide_ only works with positive integers.");for(var C=R,M=w;M.l(x)<=0;)C=fe(C),M=fe(M);var O=he(C,1),j=he(M,1);for(M=he(M,2),C=he(C,2);!Q(M);){var I=j.add(M);I.l(x)<=0&&(O=O.add(C),j=I),M=he(M,1),C=he(C,1)}return w=Z(x,O.j(w)),new J(O,w)}for(O=S;x.l(w)>=0;){for(C=Math.max(1,Math.floor(x.m()/w.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),j=E(C),I=j.j(w);H(I)||I.l(x)>0;)C-=M,j=E(C),I=j.j(w);Q(j)&&(j=R),O=O.add(j),x=Z(x,I)}return new J(O,x)}s.B=function(x){return te(this,x).h},s.and=function(x){const w=Math.max(this.g.length,x.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)&x.i(M);return new f(C,this.h&x.h)},s.or=function(x){const w=Math.max(this.g.length,x.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)|x.i(M);return new f(C,this.h|x.h)},s.xor=function(x){const w=Math.max(this.g.length,x.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)^x.i(M);return new f(C,this.h^x.h)};function fe(x){const w=x.g.length+1,C=[];for(let M=0;M<w;M++)C[M]=x.i(M)<<1|x.i(M-1)>>>31;return new f(C,x.h)}function he(x,w){const C=w>>5;w%=32;const M=x.g.length-C,O=[];for(let j=0;j<M;j++)O[j]=w>0?x.i(j+C)>>>w|x.i(j+C+1)<<32-w:x.i(j+C);return new f(O,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,P1=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=T,rr=f}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var U1,Sl,z1,Fu,pm,B1,q1,H1;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(u,g){if(g)e:{var v=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var k=u[b];if(!(k in v))break e;v=v[k]}u=u[u.length-1],b=v[u],g=g(b),g!=b&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],b;for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&v.push([b,g[b]]);return v}});var c=c||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,v){return u.call.apply(u.bind,arguments)}function E(u,g,v){return E=y,E.apply(null,arguments)}function T(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function S(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(b,k,B){for(var ne=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)ne[Te-2]=arguments[Te];return g.prototype[k].apply(b,ne)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const g=u.length;if(g>0){const v=Array(g);for(let b=0;b<g;b++)v[b]=u[b];return v}return[]}function Q(u,g){for(let b=1;b<arguments.length;b++){const k=arguments[b];var v=typeof k;if(v=v!="object"?v:k?Array.isArray(k)?"array":v:"null",v=="array"||v=="object"&&typeof k.length=="number"){v=u.length||0;const B=k.length||0;u.length=v+B;for(let ne=0;ne<B;ne++)u[v+ne]=k[ne]}else u.push(k)}}class H{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(u){f.setTimeout(()=>{throw u},0)}function Z(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ee{constructor(){this.h=this.g=null}add(g,v){const b=J.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var J=new H(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,he=!1,x=new ee,w=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(C)}};function C(){for(var u;u=Z();){try{u.h.call(u.g)}catch(v){F(v)}var g=J;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}he=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function rt(u,g){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}S(rt,O),rt.prototype.init=function(u,g){const v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),K=0;function ie(u,g,v,b,k){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=k,this.key=++K,this.da=this.fa=!1}function pe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Me(u,g,v){for(const b in u)g.call(v,u[b],b,u)}function Be(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function at(u){const g={};for(const v in u)g[v]=u[v];return g}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,g){let v,b;for(let k=1;k<arguments.length;k++){b=arguments[k];for(v in b)u[v]=b[v];for(let B=0;B<Ge.length;B++)v=Ge[B],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function Je(u){this.src=u,this.g={},this.h=0}Je.prototype.add=function(u,g,v,b,k){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const ne=Zt(u,g,b,k);return ne>-1?(g=u[ne],v||(g.fa=!1)):(g=new ie(g,this.src,B,!!b,k),g.fa=v,u.push(g)),g};function Dt(u,g){const v=g.type;if(v in u.g){var b=u.g[v],k=Array.prototype.indexOf.call(b,g,void 0),B;(B=k>=0)&&Array.prototype.splice.call(b,k,1),B&&(pe(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Zt(u,g,v,b){for(let k=0;k<u.length;++k){const B=u[k];if(!B.da&&B.listener==g&&B.capture==!!v&&B.ha==b)return k}return-1}var cn="closure_lm_"+(Math.random()*1e6|0),ni={};function un(u,g,v,b,k){if(Array.isArray(g)){for(let B=0;B<g.length;B++)un(u,g[B],v,b,k);return null}return v=le(v),u&&u[ut]?u.J(g,v,p(b)?!!b.capture:!1,k):gs(u,g,v,!1,b,k)}function gs(u,g,v,b,k,B){if(!g)throw Error("Invalid event type");const ne=p(k)?!!k.capture:!!k;let Te=Ui(u);if(Te||(u[cn]=Te=new Je(u)),v=Te.add(g,v,b,ne,B),v.proxy)return v;if(b=It(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)j||(k=ne),k===void 0&&(k=!1),u.addEventListener(g.toString(),b,k);else if(u.attachEvent)u.attachEvent(hn(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function It(){function u(v){return g.call(u.src,u.listener,v)}const g=_r;return u}function ys(u,g,v,b,k){if(Array.isArray(g))for(var B=0;B<g.length;B++)ys(u,g[B],v,b,k);else b=p(b)?!!b.capture:!!b,v=le(v),u&&u[ut]?(u=u.i,B=String(g).toString(),B in u.g&&(g=u.g[B],v=Zt(g,v,b,k),v>-1&&(pe(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[B],u.h--)))):u&&(u=Ui(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Zt(g,v,b,k)),(v=u>-1?g[u]:null)&&Pi(v))}function Pi(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ut])Dt(g.i,u);else{var v=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(v,b,u.capture):g.detachEvent?g.detachEvent(hn(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=Ui(g))?(Dt(v,u),v.h==0&&(v.src=null,g[cn]=null)):pe(u)}}}function hn(u){return u in ni?ni[u]:ni[u]="on"+u}function _r(u,g){if(u.da)u=!0;else{g=new rt(g,this);const v=u.listener,b=u.ha||u.src;u.fa&&Pi(u),u=v.call(b,g)}return u}function Ui(u){return u=u[cn],u instanceof Je?u:null}var _s="__closure_events_fn_"+(Math.random()*1e9>>>0);function le(u){return typeof u=="function"?u:(u[_s]||(u[_s]=function(g){return u.handleEvent(g)}),u[_s])}function oe(){M.call(this),this.i=new Je(this),this.M=this,this.G=null}S(oe,M),oe.prototype[ut]=!0,oe.prototype.removeEventListener=function(u,g,v,b){ys(this,u,g,v,b)};function je(u,g){var v,b=u.G;if(b)for(v=[];b;b=b.G)v.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new O(g,u);else if(g instanceof O)g.target=g.target||u;else{var k=g;g=new O(b,u),Se(g,k)}k=!0;let B,ne;if(v)for(ne=v.length-1;ne>=0;ne--)B=g.g=v[ne],k=fn(B,b,!0,g)&&k;if(B=g.g=u,k=fn(B,b,!0,g)&&k,k=fn(B,b,!1,g)&&k,v)for(ne=0;ne<v.length;ne++)B=g.g=v[ne],k=fn(B,b,!1,g)&&k}oe.prototype.N=function(){if(oe.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let b=0;b<v.length;b++)pe(v[b]);delete u.g[g],u.h--}}this.G=null},oe.prototype.J=function(u,g,v,b){return this.i.add(String(u),g,!1,v,b)},oe.prototype.K=function(u,g,v,b){return this.i.add(String(u),g,!0,v,b)};function fn(u,g,v,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let k=!0;for(let B=0;B<g.length;++B){const ne=g[B];if(ne&&!ne.da&&ne.capture==v){const Te=ne.listener,ft=ne.ha||ne.src;ne.fa&&Dt(u.i,ne),k=Te.call(ft,b)!==!1&&k}}return k&&!b.defaultPrevented}function vr(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function ic(u){u.g=vr(()=>{u.g=null,u.i&&(u.i=!1,ic(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Xt extends M{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ic(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(u){M.call(this),this.h=u,this.g={}}S(Er,M);var vo=[];function Eo(u){Me(u.g,function(g,v){this.g.hasOwnProperty(v)&&Pi(g)},u),u.g={}}Er.prototype.N=function(){Er.Z.N.call(this),Eo(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=f.JSON.stringify,Qh=f.JSON.parse,sc=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function rc(){}function ac(){}var Un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){O.call(this,"d")}S(kt,O);function wn(){O.call(this,"c")}S(wn,O);var ht={},oc=null;function ha(){return oc=oc||new oe}ht.Ia="serverreachability";function lc(u){O.call(this,ht.Ia,u)}S(lc,O);function ii(u){const g=ha();je(g,new lc(g))}ht.STAT_EVENT="statevent";function Tr(u,g){O.call(this,ht.STAT_EVENT,u),this.stat=g}S(Tr,O);function yt(u){const g=ha();je(g,new Tr(g,u))}ht.Ja="timingevent";function si(u,g){O.call(this,ht.Ja,u),this.size=g}S(si,O);function ri(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function Kh(u,g,v,b,k,B){u.info(function(){if(u.g)if(B){var ne="",Te=B.split("&");for(let Pe=0;Pe<Te.length;Pe++){var ft=Te[Pe].split("=");if(ft.length>1){const nt=ft[0];ft=ft[1];const Nn=nt.split("_");ne=Nn.length>=2&&Nn[1]=="type"?ne+(nt+"="+ft+"&"):ne+(nt+"=redacted&")}}}else ne=null;else ne=B;return"XMLHTTP REQ ("+b+") [attempt "+k+"]: "+g+`
`+v+`
`+ne})}function cc(u,g,v,b,k,B,ne){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+k+"]: "+g+`
`+v+`
`+B+" "+ne})}function ai(u,g,v,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Yh(u,v)+(b?" "+b:"")})}function Ar(u,g){u.info(function(){return"TIMEOUT: "+g})}zn.prototype.info=function(){};function Yh(u,g){if(!u.g)return g;if(!g)return null;try{const B=JSON.parse(g);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var k=b[0];if(k!="noop"&&k!="stop"&&k!="close")for(let ne=1;ne<b.length;ne++)b[ne]=""}}}}return vs(B)}catch{return g}}var br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},To={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ao;function Sr(){}S(Sr,rc),Sr.prototype.g=function(){return new XMLHttpRequest},Ao=new Sr;function zi(u){return encodeURIComponent(String(u))}function uc(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Bn(u,g,v,b){this.j=u,this.i=g,this.l=v,this.S=b||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var _t={},Ot={};function oi(u,g,v){u.M=1,u.A=wr(Et(g)),u.u=v,u.R=!0,fa(u,null)}function fa(u,g){u.F=Date.now(),li(u),u.B=Et(u.A);var v=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),ga(v.i,"t",b),u.C=0,v=u.j.L,u.h=new qn,u.g=wc(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Xt(E(u.Y,u,u.g),u.P)),g=u.V,v=u.g,b=u.ba;var k="readystatechange";Array.isArray(k)||(k&&(vo[0]=k.toString()),k=vo);for(let B=0;B<k.length;B++){const ne=un(v,k[B],b||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=u.J?at(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ii(),Kh(u.i,u.v,u.B,u.l,u.S,u.u)}Bn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Gn(u)==3?g.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const Te=Gn(this.g),ft=this.g.ya(),Pe=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||Lt(this.g)))){this.K||Te!=4||ft==7||(ft==8||Pe<=0?ii(3):ii(2)),ci(this);var g=this.g.ca();this.X=g;var v=Xh(this);if(this.o=g==200,cc(this.i,this.v,this.B,this.l,this.S,Te,g),this.o){if(this.U&&!this.L){t:{if(this.g){var b,k=this.g;if((b=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(b)){var B=b;break t}}B=null}if(u=B)ai(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ui(this,u);else{this.o=!1,this.m=3,yt(12),dn(this),Rn(this);break e}}if(this.R){u=!0;let nt;for(;!this.K&&this.C<v.length;)if(nt=fc(this,v),nt==Ot){Te==4&&(this.m=4,yt(14),u=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==_t){this.m=4,yt(15),ai(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ai(this.i,this.l,nt,null),ui(this,nt);if(hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||v.length!=0||this.h.h||(this.m=1,yt(16),u=!1),this.o=this.o&&u,!u)ai(this.i,this.l,v,"[Invalid Chunked Response]"),dn(this),Rn(this);else if(v.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Lo(ne),ne.P=!0,yt(11))}}else ai(this.i,this.l,v,null),ui(this,v);Te==4&&dn(this),this.o&&!this.K&&(Te==4?Tc(this.j,this):(this.o=!1,li(this)))}else qi(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),dn(this),Rn(this)}}}catch{}finally{}};function Xh(u){if(!hc(u))return u.g.la();const g=Lt(u.g);if(g==="")return"";let v="";const b=g.length,k=Gn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return dn(u),Rn(u),"";u.h.i=new f.TextDecoder}for(let B=0;B<b;B++)u.h.h=!0,v+=u.h.i.decode(g[B],{stream:!(k&&B==b-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function hc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function fc(u,g){var v=u.C,b=g.indexOf(`
`,v);return b==-1?Ot:(v=Number(g.substring(v,b)),isNaN(v)?_t:(b+=1,b+v>g.length?Ot:(g=g.slice(b,b+v),u.C=b+v,g)))}Bn.prototype.cancel=function(){this.K=!0,dn(this)};function li(u){u.T=Date.now()+u.H,da(u,u.H)}function da(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ri(E(u.aa,u),g)}function ci(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(ii(),yt(17)),dn(this),this.m=2,Rn(this)):da(this,this.T-u)};function Rn(u){u.j.I==0||u.K||Tc(u.j,u)}function dn(u){ci(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Eo(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ui(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||fi(v.h,u))){if(!u.L&&fi(v.h,u)&&v.I==3){try{var b=v.Ba.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var k=b;if(k[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ta(v),Cs(v);else break e;Or(v),yt(18)}}else v.xa=k[1],0<v.xa-v.K&&k[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ri(E(v.Va,v),6e3));hi(v.h)<=1&&v.ta&&(v.ta=void 0)}else _i(v,11)}else if((u.L||v.g==u)&&Ta(v),!I(g))for(k=v.Ba.g.parse(g),g=0;g<k.length;g++){let Pe=k[g];const nt=Pe[0];if(!(nt<=v.K))if(v.K=nt,Pe=Pe[1],v.I==2)if(Pe[0]=="c"){v.M=Pe[1],v.ba=Pe[2];const Nn=Pe[3];Nn!=null&&(v.ka=Nn,v.j.info("VER="+v.ka));const vi=Pe[4];vi!=null&&(v.za=vi,v.j.info("SVER="+v.za));const Qn=Pe[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(b=1.5*Qn,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Kn=u.g;if(Kn){const Mr=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var B=b.h;B.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(wo(B,B.h),B.h=null))}if(b.G){const Aa=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(b.wa=Aa,qe(b.J,b.G,Aa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var ne=u;if(b.na=Sc(b,b.L?b.ba:null,b.W),ne.L){Ro(b.h,ne);var Te=ne,ft=b.O;ft&&(Te.H=ft),Te.D&&(ci(Te),li(Te)),b.g=ne}else vc(b);v.i.length>0&&yi(v)}else Pe[0]!="stop"&&Pe[0]!="close"||_i(v,7);else v.I==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?_i(v,7):jo(v):Pe[0]!="noop"&&v.l&&v.l.qa(Pe),v.A=0)}}ii(4)}catch{}}var vt=class{constructor(u,g){this.g=u,this.map=g}};function bo(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function So(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hi(u){return u.h?1:u.g?u.g.size:0}function fi(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function wo(u,g){u.g?u.g.add(g):u.h=g}function Ro(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}bo.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Co(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return L(u.i)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ma(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const b=u[v].indexOf("=");let k,B=null;b>=0?(k=u[v].substring(0,b),B=u[v].substring(b+1)):k=u[v],g(k,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof mn?(this.l=u.l,Mt(this,u.j),this.o=u.o,this.g=u.g,Es(this,u.u),this.h=u.h,Io(this,yc(u.i)),this.m=u.m):u&&(g=String(u).match(dc))?(this.l=!1,Mt(this,g[1]||"",!0),this.o=di(g[2]||""),this.g=di(g[3]||"",!0),Es(this,g[4]),this.h=di(g[5]||"",!0),Io(this,g[6]||"",!0),this.m=di(g[7]||"")):(this.l=!1,this.i=new As(null,this.l))}mn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Rr(g,pa,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Rr(g,pa,!0),"@"),u.push(zi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Rr(v,v.charAt(0)=="/"?No:mc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Rr(v,pc)),u.join("")},mn.prototype.resolve=function(u){const g=Et(this);let v=!!u.j;v?Mt(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var b=u.h;if(v)Es(g,u.u);else if(v=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var k=g.h.lastIndexOf("/");k!=-1&&(b=g.h.slice(0,k+1)+b)}if(k=b,k==".."||k==".")b="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){b=k.lastIndexOf("/",0)==0,k=k.split("/");const B=[];for(let ne=0;ne<k.length;){const Te=k[ne++];Te=="."?b&&ne==k.length&&B.push(""):Te==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),b&&ne==k.length&&B.push("")):(B.push(Te),b=!0)}b=B.join("/")}else b=k}return v?g.h=b:v=u.i.toString()!=="",v?Io(g,yc(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Et(u){return new mn(u)}function Mt(u,g,v){u.j=v?di(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Es(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Io(u,g,v){g instanceof As?(u.i=g,ya(u.i,u.l)):(v||(g=Rr(g,Ts)),u.i=new As(g,u.l))}function qe(u,g,v){u.i.set(g,v)}function wr(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function di(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Jt),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var pa=/[#\/\?@]/g,mc=/[#\?:]/g,No=/[#\?]/g,Ts=/[#\?@]/g,pc=/#/g;function As(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function en(u){u.g||(u.g=new Map,u.h=0,u.i&&ma(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=As.prototype,s.add=function(u,g){en(this),this.i=null,u=bs(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function gc(u,g){en(u),g=bs(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function xo(u,g){return en(u),g=bs(u,g),u.g.has(g)}s.forEach=function(u,g){en(this),this.g.forEach(function(v,b){v.forEach(function(k){u.call(g,k,b,this)},this)},this)};function Do(u,g){en(u);let v=[];if(typeof g=="string")xo(u,g)&&(v=v.concat(u.g.get(bs(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}s.set=function(u,g){return en(this),this.i=null,u=bs(this,u),xo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=Do(this,u),u.length>0?String(u[0]):g):g};function ga(u,g,v){gc(u,g),v.length>0&&(u.i=null,u.g.set(bs(u,g),L(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let b=0;b<g.length;b++){var v=g[b];const k=zi(v);v=Do(this,v);for(let B=0;B<v.length;B++){let ne=k;v[B]!==""&&(ne+="="+zi(v[B])),u.push(ne)}}return this.i=u.join("&")};function yc(u){const g=new As;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function bs(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ya(u,g){g&&!u.j&&(en(u),u.i=null,u.g.forEach(function(v,b){const k=b.toLowerCase();b!=k&&(gc(this,b),ga(this,k,v))},u)),u.j=g}function Hn(u,g){const v=new zn;if(f.Image){const b=new Image;b.onload=T(Cn,v,"TestLoadImage: loaded",!0,g,b),b.onerror=T(Cn,v,"TestLoadImage: error",!1,g,b),b.onabort=T(Cn,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=T(Cn,v,"TestLoadImage: timeout",!1,g,b),f.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function Oo(u,g){const v=new zn,b=new AbortController,k=setTimeout(()=>{b.abort(),Cn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(B=>{clearTimeout(k),B.ok?Cn(v,"TestPingServer: ok",!0,g):Cn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),Cn(v,"TestPingServer: error",!1,g)})}function Cn(u,g,v,b,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),b(v)}catch{}}function Ss(){this.g=new sc}function mi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(mi,rc),mi.prototype.g=function(){return new Cr(this.i,this.h)};function Cr(u,g){oe.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Cr,oe),s=Cr.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Fn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_a(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function _a(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ws(this):Fn(this),this.readyState==3&&_a(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,ws(this))},s.Na=function(u){this.g&&(this.response=u,ws(this))},s.ga=function(){this.g&&ws(this)};function ws(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Fn(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Fn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function In(u){let g="";return Me(u,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function Ir(u,g,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=In(v),typeof u=="string"?v!=null&&zi(v):qe(u,g,v))}function Qe(u){oe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Qe,oe);var pi=/^https?$/i,Mo=["POST","PUT"];s=Qe.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ao.g(),this.g.onreadystatechange=R(E(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){Nr(this,B);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var k in b)v.set(k,b[k]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const B of b.keys())v.set(B,b.get(B));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),k=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Mo,g,void 0)>=0)||b||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ne]of v)this.g.setRequestHeader(B,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){Nr(this,B)}};function Nr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Vo(u),Bi(u)}function Vo(u){u.A||(u.A=!0,je(u,"complete"),je(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,je(this,"complete"),je(this,"abort"),Bi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),Qe.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},s.Xa=function(){xr(this)};function xr(u){if(u.h&&typeof c<"u"){if(u.v&&Gn(u)==4)setTimeout(u.Ca.bind(u),0);else if(je(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const B=u.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var b;if(b=B===0){let ne=String(u.D).match(dc)[1]||null;!ne&&f.self&&f.self.location&&(ne=f.self.location.protocol.slice(0,-1)),b=!pi.test(ne?ne.toLowerCase():"")}v=b}if(v)je(u,"complete"),je(u,"success");else{u.o=6;try{var k=Gn(u)>2?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.ca()+"]",Vo(u)}}finally{Bi(u)}}}}function Bi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||je(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Qh(g)}};function Lt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(u){const g={};u=(u.g&&Gn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(I(u[b]))continue;var v=uc(u[b]);const k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=g[k]||[];g[k]=B,B.push(v)}Be(g,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Rs(u){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gi("baseRetryDelayMs",5e3,u),this.Za=gi("retryDelaySeedMs",1e4,u),this.Ta=gi("forwardChannelMaxRetries",2,u),this.va=gi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bo(u&&u.concurrentRequestLimit),this.Ba=new Ss,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Rs.prototype,s.ka=8,s.I=1,s.connect=function(u,g,v,b){yt(0),this.W=u,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=Sc(this,null,this.W),yi(this)};function jo(u){if(va(u),u.I==3){var g=u.V++,v=Et(u.J);if(qe(v,"SID",u.M),qe(v,"RID",g),qe(v,"TYPE","terminate"),Dr(u,v),g=new Bn(u,u.j,g),g.M=2,g.A=wr(Et(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=wc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),li(g)}bc(u)}function Cs(u){u.g&&(Lo(u),u.g.cancel(),u.g=null)}function va(u){Cs(u),u.v&&(f.clearTimeout(u.v),u.v=null),Ta(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function yi(u){if(!So(u.h)&&!u.m){u.m=!0;var g=u.Ea;fe||w(),he||(fe(),he=!0),x.add(g,u),u.D=0}}function Ea(u,g){return hi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ri(E(u.Ea,u,g),Ac(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const k=new Bn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=at(B),Se(B,this.U)):B=this.U),this.u!==null||this.R||(k.J=B,B=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=_c(this,k,g),v=Et(this.J),qe(v,"RID",u),qe(v,"CVER",22),this.G&&qe(v,"X-HTTP-Session-Id",this.G),Dr(this,v),B&&(this.R?g="headers="+zi(In(B))+"&"+g:this.u&&Ir(v,this.u,B)),wo(this.h,k),this.Ra&&qe(v,"TYPE","init"),this.S?(qe(v,"$req",g),qe(v,"SID","null"),k.U=!0,oi(k,v,null)):oi(k,v,g),this.I=2}}else this.I==3&&(u?ko(this,u):this.i.length==0||So(this.h)||ko(this))};function ko(u,g){var v;g?v=g.l:v=u.V++;const b=Et(u.J);qe(b,"SID",u.M),qe(b,"RID",v),qe(b,"AID",u.K),Dr(u,b),u.u&&u.o&&Ir(b,u.u,u.o),v=new Bn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=_c(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),wo(u.h,v),oi(v,b,g)}function Dr(u,g){u.H&&Me(u.H,function(v,b){qe(g,b,v)}),u.l&&Me({},function(v,b){qe(g,b,v)})}function _c(u,g,v){v=Math.min(u.i.length,v);const b=u.l?E(u.l.Ka,u.l,u):null;e:{var k=u.i;let Te=-1;for(;;){const ft=["count="+v];Te==-1?v>0?(Te=k[0].g,ft.push("ofs="+Te)):Te=0:ft.push("ofs="+Te);let Pe=!0;for(let nt=0;nt<v;nt++){var B=k[nt].g;const Nn=k[nt].map;if(B-=Te,B<0)Te=Math.max(0,k[nt].g-100),Pe=!1;else try{B="req"+B+"_"||"";try{var ne=Nn instanceof Map?Nn:Object.entries(Nn);for(const[vi,Qn]of ne){let Kn=Qn;p(Qn)&&(Kn=vs(Qn)),ft.push(B+vi+"="+encodeURIComponent(Kn))}}catch(vi){throw ft.push(B+"type="+encodeURIComponent("_badmap")),vi}}catch{b&&b(Nn)}}if(Pe){ne=ft.join("&");break e}}ne=void 0}return u=u.i.splice(0,v),g.G=u,ne}function vc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;fe||w(),he||(fe(),he=!0),x.add(g,u),u.A=0}}function Or(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ri(E(u.Da,u),Ac(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ri(E(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),Cs(this),Ec(this))};function Lo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Ec(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Et(u.na);qe(g,"RID","rpc"),qe(g,"SID",u.M),qe(g,"AID",u.K),qe(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(g,"TO",u.ia),qe(g,"TYPE","xmlhttp"),Dr(u,g),u.u&&u.o&&Ir(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=wr(Et(g)),v.u=null,v.R=!0,fa(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Cs(this),Or(this),yt(19))};function Ta(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Tc(u,g){var v=null;if(u.g==g){Ta(u),Lo(u),u.g=null;var b=2}else if(fi(u.h,g))v=g.G,Ro(u.h,g),b=1;else return;if(u.I!=0){if(g.o)if(b==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var k=u.D;b=ha(),je(b,new si(b,v)),yi(u)}else vc(u);else if(k=g.m,k==3||k==0&&g.X>0||!(b==1&&Ea(u,g)||b==2&&Or(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),k){case 1:_i(u,5);break;case 4:_i(u,10);break;case 3:_i(u,6);break;default:_i(u,2)}}}function Ac(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function _i(u,g){if(u.j.info("Error code "+g),g==2){var v=E(u.bb,u),b=u.Ua;const k=!b;b=new mn(b||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Mt(b,"https"),wr(b),k?Hn(b.toString(),v):Oo(b.toString(),v)}else yt(2);u.I=0,u.l&&u.l.pa(g),bc(u),va(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function bc(u){if(u.I=0,u.ja=[],u.l){const g=Co(u.h);(g.length!=0||u.i.length!=0)&&(Q(u.ja,g),Q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Sc(u,g,v){var b=v instanceof mn?Et(v):new mn(v);if(b.g!="")g&&(b.g=g+"."+b.g),Es(b,b.u);else{var k=f.location;b=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;const B=new mn(null);b&&Mt(B,b),g&&(B.g=g),k&&Es(B,k),v&&(B.h=v),b=B}return v=u.G,g=u.wa,v&&g&&qe(b,v,g),qe(b,"VER",u.ka),Dr(u,b),b}function wc(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Qe(new mi({ab:v})):new Qe(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}s=Rc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Is(){}Is.prototype.g=function(u,g){return new $t(u,g)};function $t(u,g){oe.call(this),this.g=new Rs(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Hi(this)}S($t,oe),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){jo(this.g)},$t.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=vs(u),u=v);g.i.push(new vt(g.Ya++,u)),g.I==3&&yi(g)},$t.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,$t.Z.N.call(this)};function Cc(u){kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}S(Cc,kt);function Ic(){wn.call(this),this.status=1}S(Ic,wn);function Hi(u){this.g=u}S(Hi,Rc),Hi.prototype.ra=function(){je(this.g,"a")},Hi.prototype.qa=function(u){je(this.g,new Cc(u))},Hi.prototype.pa=function(u){je(this.g,new Ic)},Hi.prototype.oa=function(){je(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,H1=function(){return new Is},q1=function(){return ha()},B1=ht,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,Fu=br,To.COMPLETE="complete",z1=To,ac.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",oe.prototype.listen=oe.prototype.J,Sl=ac,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,U1=Qe}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",Uv="4.9.2";class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");let po="12.3.0";const ia=new Lm("@firebase/firestore");function Za(){return ia.logLevel}function re(s,...e){if(ia.logLevel<=Ne.DEBUG){const n=e.map(Ym);ia.debug(`Firestore (${po}): ${s}`,...n)}}function fs(s,...e){if(ia.logLevel<=Ne.ERROR){const n=e.map(Ym);ia.error(`Firestore (${po}): ${s}`,...n)}}function oo(s,...e){if(ia.logLevel<=Ne.WARN){const n=e.map(Ym);ia.warn(`Firestore (${po}): ${s}`,...n)}}function Ym(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function _e(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,F1(s,r,n)}function F1(s,e,n){let r=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fs(r),new Error(r)}function ze(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||F1(e,l,r)}function Ee(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class G1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Qt.UNAUTHENTICATED)))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new cs,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new cs)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new G1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class vR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Qt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=c=>{c.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=AR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function xe(s,e){return s<e?-1:s>e?1:0}function gm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return tm(l)===tm(c)?xe(l,c):tm(l)?1:-1}return xe(s.length,e.length)}const bR=55296,SR=57343;function tm(s){const e=s.charCodeAt(0);return e>=bR&&e<=SR}function lo(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const Bv="__name__";class Si{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Si.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return xe(e.length,n.length)}static compareSegments(e,n){const r=Si.isNumericId(e),l=Si.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Si.extractNumericId(e).compare(Si.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class Ze extends Si{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new Ze(n)}static emptyPath(){return new Ze([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Si{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bv}static keyField(){return new Ht([Bv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new se($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(c(),l++)}if(c(),f)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(Ze.fromString(e))}static fromName(e){return new me(Ze.fromString(e).popFirst(5))}static empty(){return new me(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ze(e.slice()))}}function Q1(s,e,n){if(!n)throw new se($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function RR(s,e,n,r){if(e===!0&&r===!0)throw new se($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function qv(s){if(!me.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hv(s){if(me.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function K1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Rh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function Sn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rh(s);throw new se($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Ct(s,e){const n={typeString:s};return e&&(n.value=e),n}function Xl(s,e){if(!K1(s))throw new se($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new se($.INVALID_ARGUMENT,n);return!0}const Fv=-62135596800,Gv=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Gv);return new $e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fv)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xl(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Ct("string",$e._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new $e(0,0))}static max(){return new ve(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ll=-1;function CR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=ve.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new lr(l,me.empty(),e)}function IR(s){return new lr(s.readTime,s.key,Ll)}class lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lr(ve.min(),me.empty(),Ll)}static max(){return new lr(ve.max(),me.empty(),Ll)}}function NR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:xe(s.largestBatchId,e.largestBatchId))}const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function go(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==xR)throw s;re("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(y=>r(y)))})),f=!0,c===l&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((l=>l?W.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,l)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next((T=>{f[E]=T,++p,p===c&&r(f)}),(T=>l(T)))}}))}static doWhile(e,n){return new W(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function OR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(s){return s.name==="IndexedDbTransactionError"}class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;const $m=-1;function Ih(s){return s==null}function rh(s){return s===0&&1/s==-1/0}function MR(s){return typeof s=="number"&&Number.isInteger(s)&&!rh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Y1="";function VR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Qv(e)),e=jR(s.get(n),e);return Qv(e)}function jR(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case Y1:n+="";break;default:n+=c}}return n}function Qv(s){return s+Y1+""}function Kv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function gr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function X1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class st{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}}class ju{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??qt.RED,this.left=l??qt.EMPTY,this.right=c??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new qt(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return qt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class bn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new bn([])}unionWith(e){let n=new xt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class $1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new $1("Invalid base64 string: "+c):c}})(e);return new Ft(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(s){if(ze(!!s,39018),typeof s=="string"){let e=0;const n=kR.exec(s);if(ze(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(s.seconds),nanos:pt(s.nanos)}}function pt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ur(s){return typeof s=="string"?Ft.fromBase64String(s):Ft.fromUint8Array(s)}const W1="server_timestamp",Z1="__type__",J1="__previous_value__",eE="__local_write_time__";function Wm(s){return(s?.mapValue?.fields||{})[Z1]?.stringValue===W1}function Nh(s){const e=s.mapValue.fields[J1];return Wm(e)?Nh(e):e}function Pl(s){const e=cr(s.mapValue.fields[eE].timestampValue);return new $e(e.seconds,e.nanos)}class LR{constructor(e,n,r,l,c,f,p,y,E,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=E,this.isUsingEmulator=T}}const ah="(default)";class Ul{constructor(e,n){this.projectId=e,this.database=n||ah}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===ah}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}const tE="__type__",PR="__max__",ku={mapValue:{}},nE="__vector__",oh="value";function hr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Wm(s)?4:zR(s)?9007199254740991:UR(s)?10:11:_e(28295,{value:s})}function Mi(s,e){if(s===e)return!0;const n=hr(s);if(n!==hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Pl(s).isEqual(Pl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=cr(l.timestampValue),p=cr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return ur(l.bytesValue).isEqual(ur(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return pt(l.geoPointValue.latitude)===pt(c.geoPointValue.latitude)&&pt(l.geoPointValue.longitude)===pt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return pt(l.integerValue)===pt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=pt(l.doubleValue),p=pt(c.doubleValue);return f===p?rh(f)===rh(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return lo(s.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Kv(f)!==Kv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Mi(f[y],p[y])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function zl(s,e){return(s.values||[]).find((n=>Mi(n,e)))!==void 0}function co(s,e){if(s===e)return 0;const n=hr(s),r=hr(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=pt(c.integerValue||c.doubleValue),y=pt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return Xv(s.timestampValue,e.timestampValue);case 4:return Xv(Pl(s),Pl(e));case 5:return gm(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=ur(c),y=ur(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let E=0;E<p.length&&E<y.length;E++){const T=xe(p[E],y[E]);if(T!==0)return T}return xe(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=xe(pt(c.latitude),pt(f.latitude));return p!==0?p:xe(pt(c.longitude),pt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return $v(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},E=p[oh]?.arrayValue,T=y[oh]?.arrayValue,S=xe(E?.values?.length||0,T?.values?.length||0);return S!==0?S:$v(E,T)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===ku.mapValue&&f===ku.mapValue)return 0;if(c===ku.mapValue)return 1;if(f===ku.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),E=f.fields||{},T=Object.keys(E);y.sort(),T.sort();for(let S=0;S<y.length&&S<T.length;++S){const R=gm(y[S],T[S]);if(R!==0)return R;const L=co(p[y[S]],E[T[S]]);if(L!==0)return L}return xe(y.length,T.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Xv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xe(s,e);const n=cr(s),r=cr(e),l=xe(n.seconds,r.seconds);return l!==0?l:xe(n.nanos,r.nanos)}function $v(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=co(n[l],r[l]);if(c)return c}return xe(n.length,r.length)}function uo(s){return ym(s)}function ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=cr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return ur(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=ym(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${ym(n.fields[f])}`;return l+"}"})(s.mapValue):_e(61005,{value:s})}function Gu(s){switch(hr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(s);return e?16+Gu(e):16;case 5:return 2*s.stringValue.length;case 6:return ur(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Gu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return gr(r.fields,((c,f)=>{l+=c.length+Gu(f)})),l})(s.mapValue);default:throw _e(13486,{value:s})}}function Wv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function _m(s){return!!s&&"integerValue"in s}function Zm(s){return!!s&&"arrayValue"in s}function Zv(s){return!!s&&"nullValue"in s}function Jv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Qu(s){return!!s&&"mapValue"in s}function UR(s){return(s?.mapValue?.fields||{})[tE]?.stringValue===nE}function xl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return gr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=xl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(s.arrayValue.values[n]);return e}return{...s}}function zR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=Ht.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=xl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Qu(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){gr(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new ln(xl(this.value))}}function iE(s){const e=[];return gr(s.fields,((n,r)=>{const l=new Ht([n]);if(Qu(r)){const c=iE(r.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new bn(e)}class Kt{constructor(e,n,r,l,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Kt(e,0,ve.min(),ve.min(),ve.min(),ln.empty(),0)}static newFoundDocument(e,n,r,l){return new Kt(e,1,n,ve.min(),r,l,0)}static newNoDocument(e,n){return new Kt(e,2,n,ve.min(),ve.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,ve.min(),ve.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lh{constructor(e,n){this.position=e,this.inclusive=n}}function e0(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?r=me.comparator(me.fromName(f.referenceValue),n.key):r=co(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Mi(s.position[n],e.position[n]))return!1;return!0}class ch{constructor(e,n="asc"){this.field=e,this.dir=n}}function BR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class sE{}class Rt extends sE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HR(e,n,r):n==="array-contains"?new QR(e,r):n==="in"?new KR(e,r):n==="not-in"?new YR(e,r):n==="array-contains-any"?new XR(e,r):new Rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FR(e,r):new GR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends sE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ti(e,n)}matches(e){return rE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rE(s){return s.op==="and"}function aE(s){return qR(s)&&rE(s)}function qR(s){for(const e of s.filters)if(e instanceof ti)return!1;return!0}function vm(s){if(s instanceof Rt)return s.field.canonicalString()+s.op.toString()+uo(s.value);if(aE(s))return s.filters.map((e=>vm(e))).join(",");{const e=s.filters.map((n=>vm(n))).join(",");return`${s.op}(${e})`}}function oE(s,e){return s instanceof Rt?(function(r,l){return l instanceof Rt&&r.op===l.op&&r.field.isEqual(l.field)&&Mi(r.value,l.value)})(s,e):s instanceof ti?(function(r,l){return l instanceof ti&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,f,p)=>c&&oE(f,l.filters[p])),!0):!1})(s,e):void _e(19439)}function lE(s){return s instanceof Rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`})(s):s instanceof ti?(function(n){return n.op.toString()+" {"+n.getFilters().map(lE).join(" ,")+"}"})(s):"Filter"}class HR extends Rt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class FR extends Rt{constructor(e,n){super(e,"in",n),this.keys=cE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class GR extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=cE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cE(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class QR extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&zl(n.arrayValue,this.value)}}class KR extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class YR extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class XR extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>zl(this.value.arrayValue,r)))}}class $R{constructor(e,n=null,r=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function n0(s,e=null,n=[],r=[],l=null,c=null,f=null){return new $R(s,e,n,r,l,c,f)}function Jm(s){const e=Ee(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>vm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>uo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>uo(r))).join(",")),e.Te=n}return e.Te}function ep(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!BR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!oE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!t0(s.startAt,e.startAt)&&t0(s.endAt,e.endAt)}function Em(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class $l{constructor(e,n=null,r=[],l=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WR(s,e,n,r,l,c,f,p){return new $l(s,e,n,r,l,c,f,p)}function xh(s){return new $l(s)}function i0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function uE(s){return s.collectionGroup!==null}function Dl(s){const e=Ee(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new xt(Ht.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((E=>{E.isInequality()&&(p=p.add(E.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ch(c,r))})),n.has(Ht.keyField().canonicalString())||e.Ie.push(new ch(Ht.keyField(),r))}return e.Ie}function Ni(s){const e=Ee(s);return e.Ee||(e.Ee=ZR(e,Dl(s))),e.Ee}function ZR(s,e){if(s.limitType==="F")return n0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ch(l.field,c)}));const n=s.endAt?new lh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new lh(s.startAt.position,s.startAt.inclusive):null;return n0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Tm(s,e){const n=s.filters.concat([e]);return new $l(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Am(s,e,n){return new $l(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Dh(s,e){return ep(Ni(s),Ni(e))&&s.limitType===e.limitType}function hE(s){return`${Jm(Ni(s))}|lt:${s.limitType}`}function Ja(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>lE(l))).join(", ")}]`),Ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>uo(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>uo(l))).join(",")),`Target(${r})`})(Ni(s))}; limitType=${s.limitType})`}function Oh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Dl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const E=e0(f,p,y);return f.inclusive?E<=0:E<0})(r.startAt,Dl(r),l)||r.endAt&&!(function(f,p,y){const E=e0(f,p,y);return f.inclusive?E>=0:E>0})(r.endAt,Dl(r),l))})(s,e)}function JR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fE(s){return(e,n)=>{let r=!1;for(const l of Dl(s)){const c=eC(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function eC(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,f,p){const y=f.data.field(c),E=p.data.field(c);return y!==null&&E!==null?co(y,E):_e(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return X1(this.inner)}size(){return this.innerSize}}const tC=new st(me.comparator);function ds(){return tC}const dE=new st(me.comparator);function wl(...s){let e=dE;for(const n of s)e=e.insert(n.key,n);return e}function mE(s){let e=dE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function $r(){return Ol()}function pE(){return Ol()}function Ol(){return new oa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const nC=new st(me.comparator),iC=new xt(me.comparator);function De(...s){let e=iC;for(const n of s)e=e.add(n);return e}const sC=new xt(xe);function rC(){return sC}function tp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function gE(s){return{integerValue:""+s}}function aC(s,e){return MR(e)?gE(e):tp(s,e)}class Mh{constructor(){this._=void 0}}function oC(s,e,n){return s instanceof uh?(function(l,c){const f={fields:{[Z1]:{stringValue:W1},[eE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Wm(c)&&(c=Nh(c)),c&&(f.fields[J1]=c),{mapValue:f}})(n,e):s instanceof Bl?_E(s,e):s instanceof ql?vE(s,e):(function(l,c){const f=yE(l,c),p=s0(f)+s0(l.Ae);return _m(f)&&_m(l.Ae)?gE(p):tp(l.serializer,p)})(s,e)}function lC(s,e,n){return s instanceof Bl?_E(s,e):s instanceof ql?vE(s,e):n}function yE(s,e){return s instanceof hh?(function(r){return _m(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class uh extends Mh{}class Bl extends Mh{constructor(e){super(),this.elements=e}}function _E(s,e){const n=EE(e);for(const r of s.elements)n.some((l=>Mi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class ql extends Mh{constructor(e){super(),this.elements=e}}function vE(s,e){let n=EE(e);for(const r of s.elements)n=n.filter((l=>!Mi(l,r)));return{arrayValue:{values:n}}}class hh extends Mh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s0(s){return pt(s.integerValue||s.doubleValue)}function EE(s){return Zm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function cC(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Bl&&l instanceof Bl||r instanceof ql&&l instanceof ql?lo(r.elements,l.elements,Mi):r instanceof hh&&l instanceof hh?Mi(r.Ae,l.Ae):r instanceof uh&&l instanceof uh})(s.transform,e.transform)}class uC{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Vh{}function TE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new bE(s.key,Jn.none()):new Wl(s.key,s.data,Jn.none());{const n=s.data,r=ln.empty();let l=new xt(Ht.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new yr(s.key,r,new bn(l.toArray()),Jn.none())}}function hC(s,e,n){s instanceof Wl?(function(l,c,f){const p=l.value.clone(),y=a0(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof yr?(function(l,c,f){if(!Ku(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=a0(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(AE(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ml(s,e,n,r){return s instanceof Wl?(function(c,f,p,y){if(!Ku(c.precondition,f))return p;const E=c.value.clone(),T=o0(c.fieldTransforms,y,f);return E.setAll(T),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null})(s,e,n,r):s instanceof yr?(function(c,f,p,y){if(!Ku(c.precondition,f))return p;const E=o0(c.fieldTransforms,y,f),T=f.data;return T.setAll(AE(c)),T.setAll(E),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(c,f,p){return Ku(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function fC(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=yE(r.transform,l||null);c!=null&&(n===null&&(n=ln.empty()),n.set(r.field,c))}return n||null}function r0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&lo(r,l,((c,f)=>cC(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Wl extends Vh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class yr extends Vh{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function AE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function a0(s,e,n){const r=new Map;ze(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);r.set(c.field,lC(f,p,n[l]))}return r}function o0(s,e,n){const r=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);r.set(l.field,oC(c,f,e))}return r}class bE extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mC{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&hC(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pE();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const y=TE(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),De())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,((n,r)=>r0(n,r)))&&lo(this.baseMutations,e.baseMutations,((n,r)=>r0(n,r)))}}class np{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return nC})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new np(e,n,r,l)}}class pC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gC{constructor(e,n){this.count=e,this.unchangedNames=n}}var wt,Ve;function yC(s){switch(s){case $.OK:return _e(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function SE(s){if(s===void 0)return fs("GRPC error has no .code"),$.UNKNOWN;switch(s){case wt.OK:return $.OK;case wt.CANCELLED:return $.CANCELLED;case wt.UNKNOWN:return $.UNKNOWN;case wt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case wt.INTERNAL:return $.INTERNAL;case wt.UNAVAILABLE:return $.UNAVAILABLE;case wt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case wt.NOT_FOUND:return $.NOT_FOUND;case wt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case wt.ABORTED:return $.ABORTED;case wt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case wt.DATA_LOSS:return $.DATA_LOSS;default:return _e(39323,{code:s})}}(Ve=wt||(wt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";function _C(){return new TextEncoder}const vC=new rr([4294967295,4294967295],0);function l0(s){const e=_C().encode(s),n=new P1;return n.update(e),new Uint8Array(n.digest())}function c0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new rr([n,r],0),new rr([l,c],0)]}class ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(rr.fromNumber(r)));return l.compare(vC)===1&&(l=new rr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new ip(c,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jh{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jh(ve.min(),l,new st(xe),ds(),De())}}class Zl{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zl(r,n,De(),De(),De())}}class Yu{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class wE{constructor(e,n){this.targetId=e,this.Ce=n}}class RE{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class u0{constructor(){this.ve=0,this.Fe=h0(),this.Me=Ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),n=De(),r=De();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:_e(38017,{changeType:c})}})),new Zl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=h0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ds(),this.Je=Lu(),this.He=Lu(),this.Ye=new st(xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Em(c))if(r===0){const f=new me(c.path);this.et(n,f,Kt.newNoDocument(f,ve.min()))}else ze(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=ur(r).toUint8Array()}catch(y){if(y instanceof $1)return oo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ip(f,l,c)}catch(y){return oo(y instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&Em(p.target)){const y=new me(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Kt.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=De();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const E=this.ot(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new jh(e,n,this.Ye,this.je,r);return this.je=ds(),this.Je=Lu(),this.He=Lu(),this.Ye=new st(xe),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lu(){return new st(me.comparator)}function h0(){return new st(me.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class SC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(s,e){return s.useProto3Json||Ih(e)?e:{value:e}}function fh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function wC(s,e){return fh(s,e.toTimestamp())}function xi(s){return ze(!!s,49232),ve.fromTimestamp((function(n){const r=cr(n);return new $e(r.seconds,r.nanos)})(s))}function sp(s,e){return Sm(s,e).canonicalString()}function Sm(s,e){const n=(function(l){return new Ze(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function IE(s){const e=Ze.fromString(s);return ze(ME(e),10190,{key:e.toString()}),e}function wm(s,e){return sp(s.databaseId,e.path)}function nm(s,e){const n=IE(e);if(n.get(1)!==s.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(xE(n))}function NE(s,e){return sp(s.databaseId,e)}function RC(s){const e=IE(s);return e.length===4?Ze.emptyPath():xE(e)}function Rm(s){return new Ze(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function xE(s){return ze(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function f0(s,e,n){return{name:wm(s,e),fields:n.value.mapValue.fields}}function CC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:_e(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(E,T){return E.useProto3Json?(ze(T===void 0||typeof T=="string",58123),Ft.fromBase64String(T||"")):(ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ft.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(E){const T=E.code===void 0?$.UNKNOWN:SE(E.code);return new se(T,E.message||"")})(f);n=new RE(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=nm(s,r.document.name),c=xi(r.document.updateTime),f=r.document.createTime?xi(r.document.createTime):ve.min(),p=new ln({mapValue:{fields:r.document.fields}}),y=Kt.newFoundDocument(l,c,f,p),E=r.targetIds||[],T=r.removedTargetIds||[];n=new Yu(E,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=nm(s,r.document),c=r.readTime?xi(r.readTime):ve.min(),f=Kt.newNoDocument(l,c),p=r.removedTargetIds||[];n=new Yu([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=nm(s,r.document),c=r.removedTargetIds||[];n=new Yu([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new gC(l,c),p=r.targetId;n=new wE(p,f)}}return n}function IC(s,e){let n;if(e instanceof Wl)n={update:f0(s,e.key,e.value)};else if(e instanceof bE)n={delete:wm(s,e.key)};else if(e instanceof yr)n={update:f0(s,e.key,e.data),updateMask:LC(e.fieldMask)};else{if(!(e instanceof dC))return _e(16599,{Vt:e.type});n={verify:wm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof uh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Bl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ql)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof hh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:wC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(s,e.precondition)),n}function NC(s,e){return s&&s.length>0?(ze(e!==void 0,14353),s.map((n=>(function(l,c){let f=l.updateTime?xi(l.updateTime):xi(c);return f.isEqual(ve.min())&&(f=xi(c)),new uC(f,l.transformResults||[])})(n,e)))):[]}function xC(s,e){return{documents:[NE(s,e.path)]}}function DC(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NE(s,l);const c=(function(E){if(E.length!==0)return OE(ti.create(E,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(E){if(E.length!==0)return E.map((T=>(function(R){return{field:eo(R.field),direction:VC(R.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=bm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:l}}function OC(s){let e=RC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){ze(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(S){const R=DE(S);return R instanceof ti&&aE(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((R=>(function(Q){return new ch(to(Q.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let R;return R=typeof S=="object"?S.value:S,Ih(R)?null:R})(n.limit));let y=null;n.startAt&&(y=(function(S){const R=!!S.before,L=S.values||[];return new lh(L,R)})(n.startAt));let E=null;return n.endAt&&(E=(function(S){const R=!S.before,L=S.values||[];return new lh(L,R)})(n.endAt)),WR(e,l,f,c,p,"F",y,E)}function MC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=to(n.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=to(n.unaryFilter.field);return Rt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=to(n.unaryFilter.field);return Rt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=to(n.unaryFilter.field);return Rt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Rt.create(to(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ti.create(n.compositeFilter.filters.map((r=>DE(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(s):_e(30097,{filter:s})}function VC(s){return TC[s]}function jC(s){return AC[s]}function kC(s){return bC[s]}function eo(s){return{fieldPath:s.canonicalString()}}function to(s){return Ht.fromServerFormat(s.fieldPath)}function OE(s){return s instanceof Rt?(function(n){if(n.op==="=="){if(Jv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:jC(n.op),value:n.value}}})(s):s instanceof ti?(function(n){const r=n.getFilters().map((l=>OE(l)));return r.length===1?r[0]:{compositeFilter:{op:kC(n.op),filters:r}}})(s):_e(54877,{filter:s})}function LC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ME(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class nr{constructor(e,n,r,l,c=ve.min(),f=ve.min(),p=Ft.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PC{constructor(e){this.yt=e}}function UC(s){const e=OC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Am(e,e.limit,"L"):e}class zC{constructor(){this.Cn=new BC}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(lr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class BC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new xt(Ze.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new xt(Ze.comparator)).toArray()}}const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VE=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(VE,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);class ho{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ho(0)}static cr(){return new ho(-1)}}const m0="LruGarbageCollector",qC=1048576;function p0([s,e],[n,r]){const l=xe(s,n);return l===0?xe(e,r):l}class HC{constructor(e){this.Ir=e,this.buffer=new xt(p0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(m0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yo(n)?re(m0,"Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.Vr(3e5)}))}}class GC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Ch.ce);const r=new HC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(d0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,f,p,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,n)))).next((S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(E=Date.now(),Za()<=Ne.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${S} documents in `+(E-y)+`ms
Total Duration: ${E-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function QC(s,e){return new GC(s,e)}class KC{constructor(){this.changes=new oa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Ml(r.mutation,l,bn.empty(),$e.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=De()){const l=$r();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let f=wl();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,De())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let c=ds();const f=Ol(),p=(function(){return Ol()})();return n.forEach(((y,E)=>{const T=r.get(E.key);l.has(E.key)&&(T===void 0||T.mutation instanceof yr)?c=c.insert(E.key,E):T!==void 0?(f.set(E.key,T.mutation.getFieldMask()),Ml(T.mutation,E,T.mutation.getFieldMask(),$e.now())):f.set(E.key,bn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((E,T)=>f.set(E,T))),n.forEach(((E,T)=>p.set(E,new YC(T,f.get(E)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Ol();let l=new st(((f,p)=>f-p)),c=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const E=n.get(y);if(E===null)return;let T=r.get(y)||bn.empty();T=p.applyToLocalView(E,T),r.set(y,T);const S=(l.get(p.batchId)||De()).add(y);l=l.insert(p.batchId,S)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),E=y.key,T=y.value,S=pE();T.forEach((R=>{if(!c.has(R)){const L=TE(n.get(R),r.get(R));L!==null&&S.set(R,L),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,E,S))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):W.resolve($r());let p=Ll,y=c;return f.next((E=>W.forEach(E,((T,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{y=y.insert(T,R)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,y,E,De()))).next((T=>({batchId:p,changes:mE(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let l=wl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let f=wl();return this.indexManager.getCollectionParents(e,c).next((p=>W.forEach(p,(y=>{const E=(function(S,R){return new $l(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,r,l).next((T=>{T.forEach(((S,R)=>{f=f.insert(S,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((f=>{c.forEach(((y,E)=>{const T=E.getKey();f.get(T)===null&&(f=f.insert(T,Kt.newInvalidDocument(T)))}));let p=wl();return f.forEach(((y,E)=>{const T=c.get(y);T!==void 0&&Ml(T.mutation,E,bn.empty(),$e.now()),Oh(n,E)&&(p=p.insert(y,E))})),p}))}}class $C{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:xi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:UC(l.bundledQuery),readTime:xi(l.readTime)}})(n)),W.resolve()}}class WC{constructor(){this.overlays=new st(me.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return W.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const l=$r(),c=n.length+1,f=new me(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new st(((E,T)=>E-T));const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>r){let T=c.get(E.largestBatchId);T===null&&(T=$r(),c=c.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=$r(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((E,T)=>p.set(E,T))),!(p.size()>=l)););return W.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new pC(n,r));let c=this.qr.get(n);c===void 0&&(c=De(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}class ZC{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class rp{constructor(){this.Qr=new xt(jt.$r),this.Ur=new xt(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new Ze([])),r=new jt(n,e),l=new jt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Ze([])),r=new jt(n,e),l=new jt(n,e+1);let c=De();return this.Ur.forEachInRange([r,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||xe(e.Yr,n.Yr)}static Kr(e,n){return xe(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}class JC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(jt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new mC(c,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new jt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),l=new jt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(xe);return n.forEach((l=>{const c=new jt(l,0),f=new jt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const f=new jt(new me(c),0);let p=new xt(xe);return this.Zr.forEachWhile((y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===l&&(p=p.add(y.Yr)),!0)}),f),W.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,(l=>{const c=new jt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new jt(n,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eI{constructor(e){this.ri=e,this.docs=(function(){return new st(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let r=ds();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():Kt.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=ds();const f=n.path,p=new me(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:E,value:{document:T}}=y.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||NR(IR(T),r)<=0||(l.has(T.key)||Oh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,r,l){_e(9500)}ii(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new tI(this)}getSize(e){return W.resolve(this.size)}}class tI extends KC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class nI{constructor(e){this.persistence=e,this.si=new oa((n=>Jm(n)),ep),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=ho.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(c).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class jE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new nI(this),this.indexManager=new zC,this.remoteDocumentCache=(function(l){return new eI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new PC(n),this.Ii=new $C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new JC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const l=new iI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class iI extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new ap(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dh{constructor(e,n){this.persistence=e,this.pi=new oa((r=>VR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=QC(this,n)}static mi(e,n){return new dh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?W.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,c.removeEntry(f,ve.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gu(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class op{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=De(),l=De();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new op(e,n.fromCache,r,l)}}class sI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VA()?8:OR(Yt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new sI;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(Za()<=Ne.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Za()<=Ne.DEBUG&&re("QueryEngine","Query:",Ja(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Za()<=Ne.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):W.resolve())}ys(e,n){if(i0(n))return W.resolve(null);let r=Ni(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Am(n,null,"F"),r=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=De(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const E=this.Ds(n,p);return this.Cs(n,E,f,y.readTime)?this.ys(e,Am(n,null,"F")):this.vs(e,E,n,y)}))))})))))}ws(e,n,r,l){return i0(n)||l.isEqual(ve.min())?W.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,l)?W.resolve(null):(Za()<=Ne.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ja(n)),this.vs(e,f,n,CR(l,Ll)).next((p=>p)))}))}Ds(e,n){let r=new xt(fE(e));return n.forEach(((l,c)=>{Oh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return Za()<=Ne.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ps.getDocumentsMatchingQuery(e,n,lr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const lp="LocalStore",aI=3e8;class oI{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new st(xe),this.xs=new oa((c=>Jm(c)),ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function lI(s,e,n,r){return new oI(s,e,n,r)}async function kE(s,e){const n=Ee(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=De();for(const E of l){f.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of c){p.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((E=>({Ls:E,removedBatchIds:f,addedBatchIds:p})))}))}))}function cI(s,e){const n=Ee(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,E,T){const S=E.batch,R=S.keys();let L=W.resolve();return R.forEach((Q=>{L=L.next((()=>T.getEntry(y,Q))).next((H=>{const F=E.docVersions.get(Q);ze(F!==null,48541),H.version.compareTo(F)<0&&(S.applyToRemoteDocument(H,E),H.isValidDocument()&&(H.setReadTime(E.commitVersion),T.addEntry(H)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(y,S)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=De();for(let E=0;E<p.mutationResults.length;++E)p.mutationResults[E].transformResults.length>0&&(y=y.add(p.batch.mutations[E].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function LE(s){const e=Ee(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function uI(s,e){const n=Ee(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,S)=>{const R=l.get(S);if(!R)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,S))));let L=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?L=L.withResumeToken(Ft.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,r)),l=l.insert(S,L),(function(H,F,Z){return H.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=aI?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(R,L,T)&&p.push(n.Pi.updateTargetData(c,L))}));let y=ds(),E=De();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(hI(c,f,e.documentUpdates).next((T=>{y=T.ks,E=T.qs}))),!r.isEqual(ve.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,E))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function hI(s,e,n){let r=De(),l=De();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=ds();return n.forEach(((p,y)=>{const E=c.get(p);y.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(ve.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):re(lp,"Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function fI(s,e){const n=Ee(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$m),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dI(s,e){const n=Ee(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,W.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new nr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Cm(s,e,n){const r=Ee(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!yo(f))throw f;re(lp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function g0(s,e,n){const r=Ee(s);let l=ve.min(),c=De();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,E,T){const S=Ee(y),R=S.xs.get(T);return R!==void 0?W.resolve(S.Ms.get(R)):S.Pi.getTargetData(E,T)})(r,f,Ni(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:ve.min(),n?c:De()))).next((p=>(mI(r,JR(e),p),{documents:p,Qs:c})))))}function mI(s,e,n){let r=s.Os.get(e)||ve.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class y0{constructor(){this.activeTargetIds=rC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pI{constructor(){this.Mo=new y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gI{Oo(e){}shutdown(){}}const _0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(_0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(_0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Pu=null;function Im(){return Pu===null?Pu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pu++,"0x"+Pu.toString(16)}const im="RestConnection",yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _I{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===ah?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const f=Im(),p=this.zo(e,n.toUriEncodedString());re(im,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:E}=new URL(p),T=ra(E);return this.Jo(e,p,y,r,T).then((S=>(re(im,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw oo(im,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(e,n,r,l,c,f){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=yI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class vI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Gt="WebChannelConnection";class EI extends _I{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const f=Im();return new Promise(((p,y)=>{const E=new U1;E.setWithCredentials(!0),E.listenOnce(z1.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Fu.NO_ERROR:const S=E.getResponseJson();re(Gt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case Fu.TIMEOUT:re(Gt,`RPC '${e}' ${f} timed out`),y(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const R=E.getStatus();if(re(Gt,`RPC '${e}' ${f} failed with status:`,R,"response text:",E.getResponseText()),R>0){let L=E.getResponseJson();Array.isArray(L)&&(L=L[0]);const Q=L?.error;if(Q&&Q.status&&Q.message){const H=(function(Z){const ee=Z.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ee)>=0?ee:$.UNKNOWN})(Q.status);y(new se(H,Q.message))}else y(new se($.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new se($.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{re(Gt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);re(Gt,`RPC '${e}' ${f} sending request:`,l),E.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=Im(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=H1(),p=q1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");re(Gt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const S=f.createWebChannel(T,y);this.I_(S);let R=!1,L=!1;const Q=new vI({Yo:F=>{L?re(Gt,`Not sending because RPC '${e}' stream ${l} is closed:`,F):(R||(re(Gt,`Opening RPC '${e}' stream ${l} transport.`),S.open(),R=!0),re(Gt,`RPC '${e}' stream ${l} sending:`,F),S.send(F))},Zo:()=>S.close()}),H=(F,Z,ee)=>{F.listen(Z,(J=>{try{ee(J)}catch(te){setTimeout((()=>{throw te}),0)}}))};return H(S,Sl.EventType.OPEN,(()=>{L||(re(Gt,`RPC '${e}' stream ${l} transport opened.`),Q.o_())})),H(S,Sl.EventType.CLOSE,(()=>{L||(L=!0,re(Gt,`RPC '${e}' stream ${l} transport closed`),Q.a_(),this.E_(S))})),H(S,Sl.EventType.ERROR,(F=>{L||(L=!0,oo(Gt,`RPC '${e}' stream ${l} transport errored. Name:`,F.name,"Message:",F.message),Q.a_(new se($.UNAVAILABLE,"The operation could not be completed")))})),H(S,Sl.EventType.MESSAGE,(F=>{if(!L){const Z=F.data[0];ze(!!Z,16349);const ee=Z,J=ee?.error||ee[0]?.error;if(J){re(Gt,`RPC '${e}' stream ${l} received error:`,J);const te=J.status;let fe=(function(w){const C=wt[w];if(C!==void 0)return SE(C)})(te),he=J.message;fe===void 0&&(fe=$.INTERNAL,he="Unknown error status: "+te+" with message "+J.message),L=!0,Q.a_(new se(fe,he)),S.close()}else re(Gt,`RPC '${e}' stream ${l} received:`,Z),Q.u_(Z)}})),H(p,B1.STAT_EVENT,(F=>{F.stat===pm.PROXY?re(Gt,`RPC '${e}' stream ${l} detected buffering proxy`):F.stat===pm.NOPROXY&&re(Gt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sm(){return typeof document<"u"?document:null}function kh(s){return new SC(s,!0)}class PE{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&re("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const E0="PersistentStream";class UE{constructor(e,n,r,l,c,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new se($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(E0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(E0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TI extends UE{constructor(e,n,r,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?ve.min():f.readTime?xi(f.readTime):ve.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Rm(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=Em(y)?{documents:xC(c,y)}:{query:DC(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=CE(c,f.resumeToken);const E=bm(c,f.expectedCount);E!==null&&(p.expectedCount=E)}else if(f.snapshotVersion.compareTo(ve.min())>0){p.readTime=fh(c,f.snapshotVersion.toTimestamp());const E=bm(c,f.expectedCount);E!==null&&(p.expectedCount=E)}return p})(this.serializer,e);const r=MC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Rm(this.serializer),n.removeTarget=e,this.q_(n)}}class AI extends UE{constructor(e,n,r,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NC(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Rm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>IC(this.serializer,r)))};this.q_(n)}}class bI{}class SI extends bI{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Sm(n,r),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se($.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Sm(n,r),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new se($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fs(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const sa="RemoteStore";class RI{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{la(this)&&(re(sa,"Restarting streams for network reachability change."),await(async function(y){const E=Ee(y);E.Ea.add(4),await Jl(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Lh(E)})(this))}))})),this.Ra=new wI(r,l)}}async function Lh(s){if(la(s))for(const e of s.da)await e(!0)}async function Jl(s){for(const e of s.da)await e(!1)}function zE(s,e){const n=Ee(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fp(n)?hp(n):_o(n).O_()&&up(n,e))}function cp(s,e){const n=Ee(s),r=_o(n);n.Ia.delete(e),r.O_()&&BE(n,e),n.Ia.size===0&&(r.O_()?r.L_():la(n)&&n.Ra.set("Unknown"))}function up(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(s).Y_(e)}function BE(s,e){s.Va.Ue(e),_o(s).Z_(e)}function hp(s){s.Va=new EC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),_o(s).start(),s.Ra.ua()}function fp(s){return la(s)&&!_o(s).x_()&&s.Ia.size>0}function la(s){return Ee(s).Ea.size===0}function qE(s){s.Va=void 0}async function CI(s){s.Ra.set("Online")}async function II(s){s.Ia.forEach(((e,n)=>{up(s,e)}))}async function NI(s,e){qE(s),fp(s)?(s.Ra.ha(e),hp(s)):s.Ra.set("Unknown")}async function xI(s,e,n){if(s.Ra.set("Online"),e instanceof RE&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){re(sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(s,r)}else if(e instanceof Yu?s.Va.Ze(e):e instanceof wE?s.Va.st(e):s.Va.tt(e),!n.isEqual(ve.min()))try{const r=await LE(s.localStore);n.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(E);T&&c.Ia.set(E,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,E)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Ft.EMPTY_BYTE_STRING,T.snapshotVersion)),BE(c,y);const S=new nr(T.target,y,E,T.sequenceNumber);up(c,S)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){re(sa,"Failed to raise snapshot:",r),await mh(s,r)}}async function mh(s,e,n){if(!yo(e))throw e;s.Ea.add(1),await Jl(s),s.Ra.set("Offline"),n||(n=()=>LE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{re(sa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Lh(s)}))}function HE(s,e){return e().catch((n=>mh(s,n,e)))}async function Ph(s){const e=Ee(s),n=fr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$m;for(;DI(e);)try{const l=await fI(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,OI(e,l)}catch(l){await mh(e,l)}FE(e)&&GE(e)}function DI(s){return la(s)&&s.Ta.length<10}function OI(s,e){s.Ta.push(e);const n=fr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function FE(s){return la(s)&&!fr(s).x_()&&s.Ta.length>0}function GE(s){fr(s).start()}async function MI(s){fr(s).ra()}async function VI(s){const e=fr(s);for(const n of s.Ta)e.ea(n.mutations)}async function jI(s,e,n){const r=s.Ta.shift(),l=np.from(r,e,n);await HE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Ph(s)}async function kI(s,e){e&&fr(s).X_&&await(async function(r,l){if((function(f){return yC(f)&&f!==$.ABORTED})(l.code)){const c=r.Ta.shift();fr(r).B_(),await HE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Ph(r)}})(s,e),FE(s)&&GE(s)}async function T0(s,e){const n=Ee(s);n.asyncQueue.verifyOperationInProgress(),re(sa,"RemoteStore received new credentials");const r=la(n);n.Ea.add(3),await Jl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lh(n)}async function LI(s,e){const n=Ee(s);e?(n.Ea.delete(2),await Lh(n)):e||(n.Ea.add(2),await Jl(n),n.Ra.set("Unknown"))}function _o(s){return s.ma||(s.ma=(function(n,r,l){const c=Ee(n);return c.sa(),new TI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:CI.bind(null,s),t_:II.bind(null,s),r_:NI.bind(null,s),H_:xI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),fp(s)?hp(s):s.Ra.set("Unknown")):(await s.ma.stop(),qE(s))}))),s.ma}function fr(s){return s.fa||(s.fa=(function(n,r,l){const c=Ee(n);return c.sa(),new AI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:MI.bind(null,s),r_:kI.bind(null,s),ta:VI.bind(null,s),na:jI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Ph(s)):(await s.fa.stop(),s.Ta.length>0&&(re(sa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dp{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const f=Date.now()+r,p=new dp(e,n,f,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(s,e){if(fs("AsyncQueue",`${e}: ${s}`),yo(s))return new se($.UNAVAILABLE,`${e}: ${s}`);throw s}class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class A0{constructor(){this.ga=new st(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class fo{constructor(e,n,r,l,c,f,p,y,E){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,r,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new fo(e,n,ao.emptySet(n),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class PI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Ee(n),c=l.queries;l.queries=b0(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new se($.ABORTED,"Firestore shutting down"))}}function b0(){return new oa((s=>hE(s)),Dh)}async function pp(s,e){const n=Ee(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new PI,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=mp(f,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&yp(n)}async function gp(s,e){const n=Ee(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zI(s,e){const n=Ee(s);let r=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&yp(n)}function BI(s,e,n){const r=Ee(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function yp(s){s.Ca.forEach((e=>{e.next()}))}var Nm,S0;(S0=Nm||(Nm={})).Ma="default",S0.Cache="cache";class _p{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nm.Cache}}class QE{constructor(e){this.key=e}}class KE{constructor(e){this.key=e}}class qI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=fE(e),this.tu=new ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new A0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,S)=>{const R=l.get(T),L=Oh(this.query,S)?S:null,Q=!!R&&this.mutatedKeys.has(R.key),H=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;R&&L?R.data.isEqual(L.data)?Q!==H&&(r.track({type:3,doc:L}),F=!0):this.su(R,L)||(r.track({type:2,doc:L}),F=!0,(y&&this.eu(L,y)>0||E&&this.eu(L,E)<0)&&(p=!0)):!R&&L?(r.track({type:0,doc:L}),F=!0):R&&!L&&(r.track({type:1,doc:R}),F=!0,(y||E)&&(p=!0)),F&&(L?(f=f.add(L),c=H?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(L,Q){const H=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:F})}};return H(L)-H(Q)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,E=y!==this.Za;return this.Za=y,f.length!==0||E?{snapshot:new fo(this.query,e.tu,c,f,e.mutatedKeys,y===0,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new KE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new QE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=De();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vp="SyncEngine";class HI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class FI{constructor(e){this.key=e,this.hu=!1}}class GI{constructor(e,n,r,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new oa((p=>hE(p)),Dh),this.Iu=new Map,this.Eu=new Set,this.du=new st(me.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QI(s,e,n=!0){const r=JE(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await YE(r,e,n,!0),l}async function KI(s,e){const n=JE(s);await YE(n,e,!0,!1)}async function YE(s,e,n,r){const l=await dI(s.localStore,Ni(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await YI(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&zE(s.remoteStore,l),p}async function YI(s,e,n,r,l){s.pu=(S,R,L)=>(async function(H,F,Z,ee){let J=F.view.ru(Z);J.Cs&&(J=await g0(H.localStore,F.query,!1).then((({documents:x})=>F.view.ru(x,J))));const te=ee&&ee.targetChanges.get(F.targetId),fe=ee&&ee.targetMismatches.get(F.targetId)!=null,he=F.view.applyChanges(J,H.isPrimaryClient,te,fe);return R0(H,F.targetId,he.au),he.snapshot})(s,S,R,L);const c=await g0(s.localStore,e,!0),f=new qI(e,c.Qs),p=f.ru(c.documents),y=Zl.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),E=f.applyChanges(p,s.isPrimaryClient,y);R0(s,n,E.au);const T=new HI(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),E.snapshot}async function XI(s,e,n){const r=Ee(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((f=>!Dh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Cm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&cp(r.remoteStore,l.targetId),xm(r,l.targetId)})).catch(go)):(xm(r,l.targetId),await Cm(r.localStore,l.targetId,!0))}async function $I(s,e){const n=Ee(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cp(n.remoteStore,r.targetId))}async function WI(s,e,n){const r=sN(s);try{const l=await(function(f,p){const y=Ee(f),E=$e.now(),T=p.reduce(((L,Q)=>L.add(Q.key)),De());let S,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let Q=ds(),H=De();return y.Ns.getEntries(L,T).next((F=>{Q=F,Q.forEach(((Z,ee)=>{ee.isValidDocument()||(H=H.add(Z))}))})).next((()=>y.localDocuments.getOverlayedDocuments(L,Q))).next((F=>{S=F;const Z=[];for(const ee of p){const J=fC(ee,S.get(ee.key).overlayedDocument);J!=null&&Z.push(new yr(ee.key,J,iE(J.value.mapValue),Jn.exists(!0)))}return y.mutationQueue.addMutationBatch(L,E,Z,p)})).next((F=>{R=F;const Z=F.applyToLocalDocumentSet(S,H);return y.documentOverlayCache.saveOverlays(L,F.batchId,Z)}))})).then((()=>({batchId:R.batchId,changes:mE(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let E=f.Vu[f.currentUser.toKey()];E||(E=new st(xe)),E=E.insert(p,y),f.Vu[f.currentUser.toKey()]=E})(r,l.batchId,n),await ec(r,l.changes),await Ph(r.remoteStore)}catch(l){const c=mp(l,"Failed to persist write");n.reject(c)}}async function XE(s,e){const n=Ee(s);try{const r=await uI(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(ze(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ze(f.hu,14607):l.removedDocuments.size>0&&(ze(f.hu,42227),f.hu=!1))})),await ec(n,r,e)}catch(r){await go(r)}}function w0(s,e,n){const r=Ee(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=Ee(f);y.onlineState=p;let E=!1;y.queries.forEach(((T,S)=>{for(const R of S.Sa)R.va(p)&&(E=!0)})),E&&yp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZI(s,e,n){const r=Ee(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let f=new st(me.comparator);f=f.insert(c,Kt.newNoDocument(c,ve.min()));const p=De().add(c),y=new jh(ve.min(),new Map,new st(xe),f,p);await XE(r,y),r.du=r.du.remove(c),r.Au.delete(e),Ep(r)}else await Cm(r.localStore,e,!1).then((()=>xm(r,e,n))).catch(go)}async function JI(s,e){const n=Ee(s),r=e.batch.batchId;try{const l=await cI(n.localStore,e);WE(n,r,null),$E(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ec(n,l)}catch(l){await go(l)}}async function eN(s,e,n){const r=Ee(s);try{const l=await(function(f,p){const y=Ee(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let T;return y.mutationQueue.lookupMutationBatch(E,p).next((S=>(ze(S!==null,37113),T=S.keys(),y.mutationQueue.removeMutationBatch(E,S)))).next((()=>y.mutationQueue.performConsistencyCheck(E))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(E,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,T))).next((()=>y.localDocuments.getDocuments(E,T)))}))})(r.localStore,e);WE(r,e,n),$E(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ec(r,l)}catch(l){await go(l)}}function $E(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function WE(s,e,n){const r=Ee(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function xm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||ZE(s,r)}))}function ZE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(cp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Ep(s))}function R0(s,e,n){for(const r of n)r instanceof QE?(s.Ru.addReference(r.key,e),tN(s,r)):r instanceof KE?(re(vp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||ZE(s,r.key)):_e(19791,{wu:r})}function tN(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(re(vp,"New document in limbo: "+n),s.Eu.add(r),Ep(s))}function Ep(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(Ze.fromString(e)),r=s.fu.next();s.Au.set(r,new FI(n)),s.du=s.du.insert(n,r),zE(s.remoteStore,new nr(Ni(xh(n.path)),r,"TargetPurposeLimboResolution",Ch.ce))}}async function ec(s,e,n){const r=Ee(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,n).then((E=>{if((E||n)&&r.isPrimaryClient){const T=E?!E.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(E){l.push(E);const T=op.As(y.targetId,E);c.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,E){const T=Ee(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(E,(R=>W.forEach(R.Es,(L=>T.persistence.referenceDelegate.addReference(S,R.targetId,L))).next((()=>W.forEach(R.ds,(L=>T.persistence.referenceDelegate.removeReference(S,R.targetId,L)))))))))}catch(S){if(!yo(S))throw S;re(lp,"Failed to update sequence numbers: "+S)}for(const S of E){const R=S.targetId;if(!S.fromCache){const L=T.Ms.get(R),Q=L.snapshotVersion,H=L.withLastLimboFreeSnapshotVersion(Q);T.Ms=T.Ms.insert(R,H)}}})(r.localStore,c))}async function nN(s,e){const n=Ee(s);if(!n.currentUser.isEqual(e)){re(vp,"User change. New user:",e.toKey());const r=await kE(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new se($.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ec(n,r.Ls)}}function iN(s,e){const n=Ee(s),r=n.Au.get(e);if(r&&r.hu)return De().add(r.key);{let l=De();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function JE(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=XE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,e),e.Pu.H_=zI.bind(null,e.eventManager),e.Pu.yu=BI.bind(null,e.eventManager),e}function sN(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eN.bind(null,e),e}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lI(this.persistence,new rI,e.initialUser,this.serializer)}Cu(e){return new jE(ap.mi,this.serializer)}Du(e){return new pI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class rN extends ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof dh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new jE((r=>dh.mi(r,n)),this.serializer)}}class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nN.bind(null,this.syncEngine),await LI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),r=(function(c){return new EI(c)})(e.databaseInfo);return(function(c,f,p,y){return new SI(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,f,p){return new RI(r,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>w0(this.syncEngine,n,0)),(function(){return v0.v()?new v0:new gI})())}createSyncEngine(e,n){return(function(l,c,f,p,y,E,T){const S=new GI(l,c,f,p,y,E);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ee(n);re(sa,"RemoteStore shutting down."),r.Ea.add(5),await Jl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dm.provider={build:()=>new Dm};class Tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const dr="FirestoreClient";class aN{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Qt.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{re(dr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(re(dr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function rm(s,e){s.asyncQueue.verifyOperationInProgress(),re(dr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await kE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function C0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await oN(s);re(dr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>T0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>T0(e.remoteStore,l))),s._onlineComponents=e}async function oN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){re(dr,"Using user provided OfflineComponentProvider");try{await rm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await rm(s,new ph)}}else re(dr,"Using default OfflineComponentProvider"),await rm(s,new rN(void 0));return s._offlineComponents}async function eT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(re(dr,"Using user provided OnlineComponentProvider"),await C0(s,s._uninitializedComponentsProvider._online)):(re(dr,"Using default OnlineComponentProvider"),await C0(s,new Dm))),s._onlineComponents}function lN(s){return eT(s).then((e=>e.syncEngine))}async function gh(s){const e=await eT(s),n=e.eventManager;return n.onListen=QI.bind(null,e.syncEngine),n.onUnlisten=XI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$I.bind(null,e.syncEngine),n}function cN(s,e,n={}){const r=new cs;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Tp({next:R=>{T.Nu(),f.enqueueAndForget((()=>gp(c,S)));const L=R.docs.has(p);!L&&R.fromCache?E.reject(new se($.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&y&&y.source==="server"?E.reject(new se($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),S=new _p(xh(p.path),T,{includeMetadataChanges:!0,qa:!0});return pp(c,S)})(await gh(s),s.asyncQueue,e,n,r))),r.promise}function uN(s,e,n={}){const r=new cs;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Tp({next:R=>{T.Nu(),f.enqueueAndForget((()=>gp(c,S))),R.fromCache&&y.source==="server"?E.reject(new se($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),S=new _p(p,T,{includeMetadataChanges:!0,qa:!0});return pp(c,S)})(await gh(s),s.asyncQueue,e,n,r))),r.promise}function tT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const I0=new Map;const nT="firestore.googleapis.com",N0=!0;class x0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nT,this.ssl=N0}else this.host=e.host,this.ssl=e.ssl??N0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gR;switch(r.type){case"firstParty":return new ER(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=I0.get(n);r&&(re("ComponentProvider","Removing Datastore"),I0.delete(n),r.terminate())})(this),Promise.resolve()}}function hN(s,e,n,r={}){s=Sn(s,Uh);const l=ra(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(jm(`https://${p}`),km("Firestore",!0)),c.host!==nT&&c.host!==p&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!Jr(y,f)&&(s._setSettings(y),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=Qt.MOCK_USER;else{E=$0(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Qt(S)}s._authCredentials=new yR(new G1(E,T))}}class ca{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ca(this.firestore,e,this._query)}}class ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xl(n,ct._jsonSchema))return new ct(e,r||null,new me(Ze.fromString(n.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:Ct("string",ct._jsonSchemaVersion),referencePath:Ct("string")};class ar extends ca{constructor(e,n,r){super(e,n,xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new me(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function Ap(s,e,...n){if(s=gt(s),Q1("collection","path",e),s instanceof Uh){const r=Ze.fromString(e,...n);return Hv(r),new ar(s,null,r)}{if(!(s instanceof ct||s instanceof ar))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ze.fromString(e,...n));return Hv(r),new ar(s.firestore,null,r)}}function tc(s,e,...n){if(s=gt(s),arguments.length===1&&(e=Xm.newId()),Q1("doc","path",e),s instanceof Uh){const r=Ze.fromString(e,...n);return qv(r),new ct(s,null,new me(r))}{if(!(s instanceof ct||s instanceof ar))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ze.fromString(e,...n));return qv(r),new ct(s.firestore,s instanceof ar?s.converter:null,new me(r))}}const D0="AsyncQueue";class O0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PE(this,"async_queue_retry"),this._c=()=>{const r=sm();r&&re(D0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;re(D0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,fs("INTERNAL UNHANDLED ERROR: ",M0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=dp.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function V0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class mr extends Uh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new O0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O0(e),this._firestoreClient=void 0,await e}}}function fN(s,e){const n=typeof s=="object"?s:Um(),r=typeof s=="string"?s:ah,l=Ah(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=K0("firestore");c&&hN(l,...c)}return l}function zh(s){if(s._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dN(s),s._firestoreClient}function dN(s){const e=s._freezeSettings(),n=(function(l,c,f,p){return new LR(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,tT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new aN(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Ft.fromBase64String(e))}catch(n){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xl(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:Ct("string",Pn._jsonSchemaVersion),bytes:Ct("string")};class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bp{constructor(e){this._methodName=e}}class Di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(Xl(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:Ct("string",Di._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};class Oi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xl(e,Oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Oi(e.vectorValues);throw new se($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oi._jsonSchemaVersion="firestore/vectorValue/1.0",Oi._jsonSchema={type:Ct("string",Oi._jsonSchemaVersion),vectorValues:Ct("object")};const mN=/^__.*__$/;class pN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class iT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:s})}}class Sp{constructor(e,n,r,l,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sT(this.Ac)&&mN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kh(e)}Cc(e,n,r,l=!1){return new Sp({Ac:e,methodName:n,Dc:r,path:Ht.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(s){const e=s._freezeSettings(),n=kh(s._databaseId);return new gN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function rT(s,e,n,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);wp("Data must be an object, but it was:",f,r);const p=aT(r,f);let y,E;if(c.merge)y=new bn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const S of c.mergeFields){const R=Om(e,S,n);if(!f.contains(R))throw new se($.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);lT(T,R)||T.push(R)}y=new bn(T),E=f.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,E=f.fieldTransforms;return new pN(new ln(p),y,E)}class Hh extends bp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function yN(s,e,n,r){const l=s.Cc(1,e,n);wp("Data must be an object, but it was:",l,r);const c=[],f=ln.empty();gr(r,((y,E)=>{const T=Rp(e,y,n);E=gt(E);const S=l.yc(T);if(E instanceof Hh)c.push(T);else{const R=nc(E,S);R!=null&&(c.push(T),f.set(T,R))}}));const p=new bn(c);return new iT(f,p,l.fieldTransforms)}function _N(s,e,n,r,l,c){const f=s.Cc(1,e,n),p=[Om(e,r,n)],y=[l];if(c.length%2!=0)throw new se($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(Om(e,c[R])),y.push(c[R+1]);const E=[],T=ln.empty();for(let R=p.length-1;R>=0;--R)if(!lT(E,p[R])){const L=p[R];let Q=y[R];Q=gt(Q);const H=f.yc(L);if(Q instanceof Hh)E.push(L);else{const F=nc(Q,H);F!=null&&(E.push(L),T.set(L,F))}}const S=new bn(E);return new iT(T,S,f.fieldTransforms)}function vN(s,e,n,r=!1){return nc(n,s.Cc(r?4:3,e))}function nc(s,e){if(oT(s=gt(s)))return wp("Unsupported field value:",e,s),aT(s,e);if(s instanceof bp)return(function(r,l){if(!sT(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let f=0;for(const p of r){let y=nc(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=$e.fromDate(r);return{timestampValue:fh(l.serializer,c)}}if(r instanceof $e){const c=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(l.serializer,c)}}if(r instanceof Di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:CE(l.serializer,r._byteString)};if(r instanceof ct){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Oi)return(function(f,p){return{mapValue:{fields:{[tE]:{stringValue:nE},[oh]:{arrayValue:{values:f.toArray().map((E=>{if(typeof E!="number")throw p.Sc("VectorValues must only contain numeric values.");return tp(p.serializer,E)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Rh(r)}`)})(s,e)}function aT(s,e){const n={};return X1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(s,((r,l)=>{const c=nc(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function oT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $e||s instanceof Di||s instanceof Pn||s instanceof ct||s instanceof bp||s instanceof Oi)}function wp(s,e,n){if(!oT(n)||!K1(n)){const r=Rh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Om(s,e,n){if((e=gt(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return Rp(s,e);throw yh("Field path arguments must be of type string or ",s,!1,void 0,n)}const EN=new RegExp("[~\\*/\\[\\]]");function Rp(s,e,n){if(e.search(EN)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function yh(s,e,n,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new se($.INVALID_ARGUMENT,p+s+y)}function lT(s,e){return s.some((n=>n.isEqual(e)))}class cT{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TN extends cT{data(){return super.data()}}function Cp(s,e){return typeof e=="string"?Rp(s,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}function uT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class AN extends Ip{}function hT(s,e,...n){let r=[];e instanceof Ip&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((y=>y instanceof Np)).length,p=c.filter((y=>y instanceof Fh)).length;if(f>1||f>0&&p>0)throw new se($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Fh extends AN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=this._parse(e);return dT(e._query,n),new ca(e.firestore,e.converter,Tm(e._query,n))}_parse(e){const n=qh(e.firestore);return(function(c,f,p,y,E,T,S){let R;if(E.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){k0(S,T);const Q=[];for(const H of S)Q.push(j0(y,c,H));R={arrayValue:{values:Q}}}else R=j0(y,c,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||k0(S,T),R=vN(p,f,S,T==="in"||T==="not-in");return Rt.create(E,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fT(s,e,n){const r=e,l=Cp("where",s);return Fh._create(l,r,n)}class Np extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Np(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const y of p)dT(f,y),f=Tm(f,y)})(e._query,n),new ca(e.firestore,e.converter,Tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function j0(s,e,n){if(typeof(n=gt(n))=="string"){if(n==="")throw new se($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uE(e)&&n.indexOf("/")!==-1)throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ze.fromString(n));if(!me.isDocumentKey(r))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(s,new me(r))}if(n instanceof ct)return Wv(s,n._key);throw new se($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(n)}.`)}function k0(s,e){if(!Array.isArray(s)||s.length===0)throw new se($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dT(s,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bN{convertValue(e,n="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gr(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[oh].arrayValue?.values?.map((r=>pt(r.doubleValue)));return new Oi(n)}convertGeoPoint(e){return new Di(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const n=cr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);ze(ME(r),9688,{name:e});const l=new Ul(r.get(1),r.get(3)),c=new me(r.popFirst(5));return l.isEqual(n)||fs(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function mT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Cl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends cT{constructor(e,n,r,l,c,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:Ct("string",Wr._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class Xu extends Wr{data(e={}){return super.data(e)}}class Zr{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Cl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Xu(this._firestore,this._userDataWriter,r.key,r,new Cl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new Xu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Xu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Cl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,T=-1;return p.type!==0&&(E=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:SN(p.type),doc:y,oldIndex:E,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}function wN(s){s=Sn(s,ct);const e=Sn(s.firestore,mr);return cN(zh(e),s._key).then((n=>gT(e,s,n)))}Zr._jsonSchemaVersion="firestore/querySnapshot/1.0",Zr._jsonSchema={type:Ct("string",Zr._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class xp extends bN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function RN(s){s=Sn(s,ca);const e=Sn(s.firestore,mr),n=zh(e),r=new xp(e);return uT(s._query),uN(n,s._query).then((l=>new Zr(e,r,s,l)))}function CN(s,e,n){s=Sn(s,ct);const r=Sn(s.firestore,mr),l=mT(s.converter,e);return Dp(r,[rT(qh(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Jn.none())])}function pT(s,e,n,...r){s=Sn(s,ct);const l=Sn(s.firestore,mr),c=qh(l);let f;return f=typeof(e=gt(e))=="string"||e instanceof Bh?_N(c,"updateDoc",s._key,e,n,r):yN(c,"updateDoc",s._key,e),Dp(l,[f.toMutation(s._key,Jn.exists(!0))])}function IN(s,e){const n=Sn(s.firestore,mr),r=tc(s),l=mT(s.converter,e);return Dp(n,[rT(qh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then((()=>r))}function NN(s,...e){s=gt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||V0(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(V0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,f,p;if(s instanceof ct)f=Sn(s.firestore,mr),p=xh(s._key.path),c={next:y=>{e[r]&&e[r](gT(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Sn(s,ca);f=Sn(y.firestore,mr),p=y._query;const E=new xp(f);c={next:T=>{e[r]&&e[r](new Zr(f,E,y,T))},error:e[r+1],complete:e[r+2]},uT(s._query)}return(function(E,T,S,R){const L=new Tp(R),Q=new _p(T,L,S);return E.asyncQueue.enqueueAndForget((async()=>pp(await gh(E),Q))),()=>{L.Nu(),E.asyncQueue.enqueueAndForget((async()=>gp(await gh(E),Q)))}})(zh(f),p,l,c)}function Dp(s,e){return(function(r,l){const c=new cs;return r.asyncQueue.enqueueAndForget((async()=>WI(await lN(r),l,c))),c.promise})(zh(s),e)}function gT(s,e,n){const r=n.docs.get(e._key),l=new xp(s);return new Wr(s,l,e._key,r,new Cl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){po=l})(aa),ea(new or("firestore",((r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new mr(new _R(r.getProvider("auth-internal")),new TR(f,r.getProvider("app-check-internal")),(function(E,T){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(E.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ri(Pv,Uv,e),Ri(Pv,Uv,"esm2020")})();var xN="firebase",DN="12.6.0";Ri(xN,DN,"app");const yT="firebasestorage.googleapis.com",ON="storageBucket",MN=120*1e3,VN=600*1e3;class Li extends ki{constructor(e,n,r=0){super(am(e),`Firebase Storage: ${n} (${am(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vi;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vi||(Vi={}));function am(s){return"storage/"+s}function jN(){const s="An unknown error occurred, please check the error payload for server response.";return new Li(Vi.UNKNOWN,s)}function kN(){return new Li(Vi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LN(){return new Li(Vi.CANCELED,"User canceled the upload/download.")}function PN(s){return new Li(Vi.INVALID_URL,"Invalid URL '"+s+"'.")}function UN(s){return new Li(Vi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function L0(s){return new Li(Vi.INVALID_ARGUMENT,s)}function _T(){return new Li(Vi.APP_DELETED,"The Firebase app was deleted.")}function zN(s){return new Li(Vi.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zn.makeFromUrl(e,n)}catch{return new Zn(e,"")}if(r.path==="")return r;throw UN(e)}static makeFromUrl(e,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function c(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+l+f,"i"),y={bucket:1,path:3};function E(te){te.path_=decodeURIComponent(te.path)}const T="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",L=new RegExp(`^https?://${S}/${T}/b/${l}/o${R}`,"i"),Q={bucket:1,path:3},H=n===yT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",Z=new RegExp(`^https?://${H}/${l}/${F}`,"i"),J=[{regex:p,indices:y,postModify:c},{regex:L,indices:Q,postModify:E},{regex:Z,indices:{bucket:1,path:2},postModify:E}];for(let te=0;te<J.length;te++){const fe=J[te],he=fe.regex.exec(e);if(he){const x=he[fe.indices.bucket];let w=he[fe.indices.path];w||(w=""),r=new Zn(x,w),fe.postModify(r);break}}if(r==null)throw PN(e);return r}}class BN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qN(s,e,n){let r=1,l=null,c=null,f=!1,p=0;function y(){return p===2}let E=!1;function T(...F){E||(E=!0,e.apply(null,F))}function S(F){l=setTimeout(()=>{l=null,s(L,y())},F)}function R(){c&&clearTimeout(c)}function L(F,...Z){if(E){R();return}if(F){R(),T.call(null,F,...Z);return}if(y()||f){R(),T.call(null,F,...Z);return}r<64&&(r*=2);let J;p===1?(p=2,J=0):J=(r+Math.random())*1e3,S(J)}let Q=!1;function H(F){Q||(Q=!0,R(),!E&&(l!==null?(F||(p=2),clearTimeout(l),S(0)):F||(p=1)))}return S(0),c=setTimeout(()=>{f=!0,H(!0)},n),H}function HN(s){s(!1)}function FN(s){return s!==void 0}function P0(s,e,n,r){if(r<e)throw L0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw L0(`Invalid value for '${s}'. Expected ${n} or less.`)}function GN(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const l=e(r)+"="+e(s[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var _h;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(_h||(_h={}));function QN(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||l||c}class KN{constructor(e,n,r,l,c,f,p,y,E,T,S,R=!0,L=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=S,this.retry=R,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,H)=>{this.resolve_=Q,this.reject_=H,this.start_()})}start_(){const e=(r,l)=>{if(l){r(!1,new Uu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=p=>{const y=p.loaded,E=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,E)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const p=c.getErrorCode()===_h.NO_ERROR,y=c.getStatus();if(!p||QN(y,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===_h.ABORT;r(!1,new Uu(!1,null,T));return}const E=this.successCodes_.indexOf(y)!==-1;r(!0,new Uu(E,c))})},n=(r,l)=>{const c=this.resolve_,f=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());FN(y)?c(y):c()}catch(y){f(y)}else if(p!==null){const y=jN();y.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,y)):f(y)}else if(l.canceled){const y=this.appDelete_?_T():LN();f(y)}else{const y=kN();f(y)}};this.canceled_?n(!1,new Uu(!1,null,!0)):this.backoffId_=qN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YN(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function XN(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $N(s,e){e&&(s["X-Firebase-GMPID"]=e)}function WN(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function ZN(s,e,n,r,l,c,f=!0,p=!1){const y=GN(s.urlParams),E=s.url+y,T=Object.assign({},s.headers);return $N(T,e),YN(T,n),XN(T,c),WN(T,r),new KN(E,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,f,p)}function JN(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function ex(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}class vh{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vh(e,n)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ex(this._location.path)}get storage(){return this._service}get parent(){const e=JN(this._location.path);if(e===null)return null;const n=new Zn(this._location.bucket,e);return new vh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zN(e)}}function U0(s,e){const n=e?.[ON];return n==null?null:Zn.makeFromBucketSpec(n,s)}function tx(s,e,n,r={}){s.host=`${e}:${n}`;const l=ra(e);l&&(jm(`https://${s.host}/b`),km("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:$0(c,s.app.options.projectId))}class nx{constructor(e,n,r,l,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=yT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MN,this._maxUploadRetryTime=VN,this._requests=new Set,l!=null?this._bucket=Zn.makeFromBucketSpec(l,this._host):this._bucket=U0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=U0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vh(this,e)}_makeRequest(e,n,r,l,c=!0){if(this._deleted)return new BN(_T());{const f=ZN(e,this._appId,r,l,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,l).getPromise()}}const z0="@firebase/storage",B0="0.14.0";const vT="storage";function ix(s=Um(),e){s=gt(s);const r=Ah(s,vT).getImmediate({identifier:e}),l=K0("storage");return l&&sx(r,...l),r}function sx(s,e,n,r={}){tx(s,e,n,r)}function rx(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new nx(n,r,l,e,aa)}function ax(){ea(new or(vT,rx,"PUBLIC").setMultipleInstances(!0)),Ri(z0,B0,""),Ri(z0,B0,"esm2020")}ax();const ox={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},Op=J0(ox),ji=mR(Op),ua=fN(Op);ix(Op);const ET=async(s,e,n={})=>{try{const l=(await ZS(ji,s,e)).user;return await CN(tc(ua,"users",l.uid),{email:s,nombres:n.nombres||"",apellidos:n.apellidos||"",fechaNacimiento:n.fechaNacimiento||null,dui:n.dui||"",genero:n.genero||"",direccion:n.direccion||"",telefono:n.telefono||"",emergenciaNombre:n.emergenciaNombre||"",emergenciaTelefono:n.emergenciaTelefono||"",emergenciaParentesco:n.emergenciaParentesco||"",tipoPaciente:n.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",l.email),await ew(l),console.log("Email verification sent successfully"),{user:l,error:null}}catch(r){return console.error("Sign up error:",r),{user:null,error:r}}},TT=async(s,e)=>{try{const n=await JS(ji,s,e);return n.user.emailVerified?{user:n.user,error:null}:(await C1(ji),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(n){return console.error("Sign in error:",n),{user:null,error:n}}},AT=async()=>{try{return await C1(ji),{error:null}}catch(s){return console.error("Sign out error:",s),{error:s}}},bT=async s=>{try{return await WS(ji,s),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},Mm=async s=>{try{const e=tc(ua,"users",s),n=await wN(e);return n.exists()?{profile:n.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},ST=async(s,e)=>{try{const n=tc(ua,"users",s);return await pT(n,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(n){return console.error("Update user profile error:",n),{error:n}}},wT=s=>iw(ji,s),RT=async(s,e)=>{try{const n=await new Promise((r,l)=>{const c=new FileReader;c.onload=()=>r(c.result),c.onerror=l,c.readAsDataURL(e)});return await ST(s,{photoURL:n}),{photoURL:n,error:null}}catch(n){return console.error("Upload profile photo error:",n),{photoURL:null,error:n}}},lx=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Mm,onAuthChange:wT,resetPassword:bT,signIn:TT,signOut:AT,signUp:ET,updateUserProfile:ST,uploadProfilePhoto:RT},Symbol.toStringTag,{value:"Module"}));function cx({onLogout:s,userData:e,userType:n}){const[r,l]=ue.useState(!1),[c,f]=ue.useState(!1),p=ue.useRef(null),y=ue.useRef(null),E=e&&(e.nombres||e.nombre)||"Usuario",T=n==="admin"||n==="doctor";return ue.useEffect(()=>{const S=R=>{p.current&&!p.current.contains(R.target)&&f(!1)};return c&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[c]),ue.useEffect(()=>{const S=R=>{y.current&&!y.current.contains(R.target)&&l(!1)};return r&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[r]),m.jsx("header",{className:"header",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"header-content",children:[m.jsx(wi,{to:T?"/staff/dashboard":"/",className:"logo",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),m.jsxs("div",{className:"header-actions",children:[m.jsxs("div",{ref:y,children:[m.jsx("button",{className:"mobile-menu-btn",onClick:()=>l(!r),"aria-label":"Men",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),m.jsxs("nav",{className:`nav-menu ${r?"active":""}`,children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(wi,{to:"/",className:"nav-button",onClick:()=>l(!1),children:"Inicio"}),m.jsx(wi,{to:"/cita",className:"nav-button",onClick:()=>l(!1),children:"Cita"}),m.jsx(wi,{to:"/contacto",className:"nav-button",onClick:()=>l(!1),children:"Contacto"})]}),T&&m.jsx(wi,{to:"/staff/dashboard",className:"nav-button",onClick:()=>l(!1),children:"Dashboard"})]})]}),m.jsxs("div",{className:"profile-container",ref:p,children:[m.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>f(!c),children:[e?.photoURL?m.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("span",{className:"user-name",children:E})]}),c&&m.jsxs("div",{className:"profile-dropdown",children:[!T&&m.jsx(wi,{to:"/perfil",className:"dropdown-item",onClick:()=>f(!1),children:"Perfil"}),m.jsx("button",{className:"dropdown-item logout",onClick:s,children:"Cerrar sesin"})]})]})]})]})})})}function ux(){return m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),m.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Contacto Principal"}),m.jsxs("div",{className:"contact-info",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),m.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),m.jsx("polyline",{points:"22,6 12,13 2,6"})]}),m.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),m.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),m.jsxs("div",{className:"social-links",children:[m.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),m.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),m.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),m.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),m.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Horarios"}),m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Lunes - Sbado"}),m.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day"}),m.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Domingo"}),m.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const CT=async(s,e)=>{try{const n={userId:s,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdAt:$e.now(),updatedAt:$e.now()};return{appointmentId:(await IN(Ap(ua,"appointments"),n)).id,error:null}}catch(n){return console.error("Error creating appointment:",n),{appointmentId:null,error:n}}},Mp=(s,e)=>{const n=hT(Ap(ua,"appointments"),fT("userId","==",s));return NN(n,r=>{const l=[];r.forEach(c=>{l.push({id:c.id,...c.data()})}),l.sort((c,f)=>{const p=new Date(`${c.date} ${c.time}`),y=new Date(`${f.date} ${f.time}`);return p-y}),e(l)},r=>{console.error("Error in appointments subscription:",r),e([])})},Vp=async(s,e)=>{try{const n=tc(ua,"appointments",s);return await pT(n,{...e,updatedAt:$e.now()}),{error:null}}catch(n){return console.error("Error updating appointment:",n),{error:n}}},Gh=async(s,e)=>Vp(s,{status:e}),hx=async()=>{try{const s=hT(Ap(ua,"appointments"),fT("status","==","programada")),e=await RN(s),n=new Date;let r=0;const l=[];return e.forEach(c=>{const f=c.data(),p=new Date(`${f.date}T${f.time}`),y=new Date(p.getTime()+7200*1e3);n>y&&(l.push(Gh(c.id,"perdida")),r++)}),await Promise.all(l),{updatedCount:r,error:null}}catch(s){return console.error("Error marking overdue appointments:",s),{updatedCount:0,error:s}}},fx=Object.freeze(Object.defineProperty({__proto__:null,createAppointment:CT,markOverdueAppointmentsAsLost:hx,subscribeToUserAppointments:Mp,updateAppointment:Vp,updateAppointmentStatus:Gh},Symbol.toStringTag,{value:"Module"})),IT=({isOpen:s,onClose:e,onConfirm:n,title:r,message:l})=>s?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:r}),m.jsx("p",{className:"modal-message",children:l}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:n,children:"S, cancelar cita"})]})]})}):null;function dx({userData:s}){const e=Vm(),[n,r]=ue.useState([]),[l,c]=ue.useState(!1),[f,p]=ue.useState(null),[y,E]=ue.useState(!0);ue.useEffect(()=>{const H=ji.currentUser;if(!H){E(!1);return}const F=Mp(H.uid,Z=>{const ee=Z.sort((J,te)=>{const fe=new Date(`${J.date} ${J.time} `),he=new Date(`${te.date} ${te.time} `);return fe-he});r(ee),E(!1)});return()=>F()},[]);const T=H=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[H]||H,S=H=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[H]||H,R=H=>{p(H),c(!0)},L=async()=>{if(f)try{const{error:H}=await Gh(f,"cancelada");H&&(console.error("Error cancelling appointment:",H),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),c(!1),p(null)}catch(H){console.error("Unexpected error:",H),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),c(!1),p(null)}},Q=H=>{e("/cita",{state:{editingAppointment:H}})};return m.jsxs("div",{className:"home-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("section",{className:"my-appointments-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx("h2",{className:"section-title",children:"Mis Citas"}),n.length>3&&m.jsxs(wi,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),y?m.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:[m.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),m.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Cargando citas..."})]}):n.length>0?m.jsx(m.Fragment,{children:m.jsx("div",{className:"appointments-grid",children:n.slice(0,3).map(H=>m.jsxs("div",{className:"appointment-card",children:[m.jsxs("div",{className:"appointment-header",children:[m.jsx("div",{className:"appointment-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("span",{className:`appointment-status status-${H.status}`,children:T(H.status)})]}),m.jsxs("div",{className:"appointment-details",children:[m.jsxs("h3",{children:["Paciente: ",H.patientName||"Usuario"]}),m.jsxs("div",{className:"appointment-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:H.date})]}),m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m.jsx("span",{children:H.time})]})]}),H.reason&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Motivo:"})," ",H.reason]}),H.clinica&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Clnica:"})," ",S(H.clinica)]})]}),H.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>Q(H),title:"Editar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>R(H.id),title:"Cancelar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},H.id))})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx(wi,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),m.jsxs("section",{className:"medical-history-section",children:[m.jsx("h2",{className:"section-title",children:"Historial Clnico"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tu Historial Mdico"}),m.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),m.jsxs("section",{className:"prescriptions-section",children:[m.jsx("h2",{className:"section-title",children:"Recetas"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),m.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tus Recetas Mdicas"}),m.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),m.jsx(IT,{isOpen:l,onClose:()=>{c(!1),p(null)},onConfirm:L,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function mx(){const s=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return m.jsx("div",{className:"contact-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"contact-header",children:[m.jsx("h1",{children:"Nuestras Ubicaciones"}),m.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),m.jsx("div",{className:"clinics-grid",children:s.map(e=>m.jsxs("div",{className:"clinic-card",children:[m.jsxs("div",{className:"clinic-header",children:[m.jsx("h2",{children:e.name}),m.jsx("span",{className:"location-tag",children:e.location})]}),m.jsxs("div",{className:"clinic-info",children:[m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((n,r)=>m.jsxs("div",{className:"info-item",children:[m.jsxs("span",{className:"label",children:[n.type,":"]}),n.whatsapp?m.jsxs("a",{href:`https://wa.me/${n.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[n.number,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):m.jsx("span",{className:"value",children:n.number})]},r))]}),m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),m.jsx("div",{className:"info-item",children:m.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function px({userData:s}){const[e,n]=ue.useState(null),[r,l]=ue.useState(!1),[c,f]=ue.useState("");ue.useEffect(()=>{if(s)n(s);else{const S=localStorage.getItem("userData");S&&n(JSON.parse(S))}},[s]);const p=S=>new Promise((R,L)=>{const Q=new FileReader;Q.onload=H=>{const F=new Image;F.onload=()=>{const Z=document.createElement("canvas"),ee=Z.getContext("2d");let J=F.width,te=F.height;const fe=800;J>te?J>fe&&(te=te*fe/J,J=fe):te>fe&&(J=J*fe/te,te=fe),Z.width=J,Z.height=te,ee.drawImage(F,0,0,J,te),Z.toBlob(he=>{he?R(he):L(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},F.onerror=()=>L(new Error("Error al cargar la imagen")),F.src=H.target.result},Q.onerror=()=>L(new Error("Error al leer el archivo")),Q.readAsDataURL(S)}),y=S=>{if(!S)return"No especificado";const[R,L,Q]=S.split("-");return new Date(R,L-1,Q).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},E=S=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[S]||S,T=async S=>{const R=S.target.files[0];if(!R)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(R.type)){f("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const Q=5*1024*1024;if(R.size>Q){f("La imagen debe ser menor a 5MB");return}l(!0),f("");const H=ji.currentUser;if(!H){f("Debes estar autenticado para subir una foto"),l(!1);return}try{const F=await p(R),Z=new File([F],R.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:ee,error:J}=await RT(H.uid,Z);if(J){console.error("Upload error:",J);let te="Error al subir la foto. Por favor, intenta de nuevo.";J.code==="storage/unauthorized"?te="No tienes permisos para subir fotos. Contacta al administrador.":J.code==="storage/canceled"?te="La subida fue cancelada.":J.code==="storage/unknown"&&(te="Error desconocido. Verifica tu conexin a internet."),f(te),l(!1);return}n(te=>({...te,photoURL:ee})),l(!1)}catch(F){console.error("Unexpected error:",F),f(F.message||"Error inesperado. Por favor, intenta de nuevo."),l(!1)}};return e?m.jsx("div",{className:"profile-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"profile-header",children:[m.jsxs("div",{className:"profile-avatar-container",children:[m.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:T,style:{display:"none"}}),m.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:r?m.jsx("div",{className:"upload-spinner"}):e.photoURL?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),m.jsxs("div",{className:"profile-header-info",children:[m.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),m.jsx("p",{className:"profile-email",children:e.email}),c&&m.jsx("p",{className:"upload-error",children:c})]})]}),m.jsxs("div",{className:"profile-sections",children:[m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombres"}),m.jsx("p",{children:e.nombres||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("p",{children:e.apellidos||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("p",{children:y(e.fechaNacimiento)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"DUI"}),m.jsx("p",{children:e.dui||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Gnero"}),m.jsx("p",{children:E(e.genero)})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Correo Electrnico"}),m.jsx("p",{children:e.email||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.telefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Direccin"}),m.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombre"}),m.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Parentesco"}),m.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):m.jsx("div",{className:"profile-page",children:m.jsx("div",{className:"container",children:m.jsx("div",{className:"loading-state",children:m.jsx("p",{children:"Cargando perfil..."})})})})}function gx(){const s=Vm(),[e,n]=ue.useState([]),[r,l]=ue.useState(null),[c,f]=ue.useState(!1),[p,y]=ue.useState(null),[E,T]=ue.useState(!0);ue.useEffect(()=>{const Z=ji.currentUser;if(!Z){T(!1);return}const ee=Mp(Z.uid,J=>{const te=J.sort((fe,he)=>{const x=new Date(`${fe.date} ${fe.time}`);return new Date(`${he.date} ${he.time}`)-x});n(te),T(!1)});return()=>ee()},[]);const S=Z=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[Z]||Z,R=Z=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[Z]||Z,L=Z=>{l(r===Z?null:Z)},Q=Z=>{y(Z),f(!0)},H=async()=>{if(p)try{const{error:Z}=await Gh(p,"cancelada");Z&&(console.error("Error cancelling appointment:",Z),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),f(!1),y(null)}catch(Z){console.error("Unexpected error:",Z),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),f(!1),y(null)}},F=Z=>{s("/cita",{state:{editingAppointment:Z}})};return m.jsxs("div",{className:"appointments-list-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"page-header",children:[m.jsxs("button",{className:"back-button",onClick:()=>s("/"),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),m.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),m.jsx("h1",{className:"page-title",children:"Mis Citas"}),m.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?m.jsx("div",{className:"appointments-list",children:e.map(Z=>m.jsxs("div",{className:`appointment-list-item ${r===Z.id?"expanded":""}`,children:[m.jsxs("div",{className:"appointment-summary",onClick:()=>L(Z.id),children:[m.jsxs("div",{className:"summary-content",children:[m.jsxs("div",{className:"summary-date",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:Z.date})]}),m.jsx("div",{className:"summary-reason",children:Z.reason||"Sin motivo especificado"}),m.jsx("span",{className:`summary-status status-${Z.status}`,children:S(Z.status)})]}),m.jsx("div",{className:"expand-icon",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),r===Z.id&&m.jsxs("div",{className:"appointment-details",children:[m.jsxs("div",{className:"details-grid",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Paciente"}),m.jsx("p",{children:Z.patientName||"Usuario"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Hora"}),m.jsx("p",{children:Z.time})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Clnica"}),m.jsx("p",{children:R(Z.clinica)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Motivo"}),m.jsx("p",{children:Z.reason||"No especificado"})]})]}),Z.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>F(Z),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>Q(Z.id),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},Z.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx("button",{className:"cta-button",onClick:()=>s("/cita"),children:"Agendar Cita"})]})]}),m.jsx(IT,{isOpen:c,onClose:()=>{f(!1),y(null)},onConfirm:H,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function yx(){const s=Eh(),{appointment:e}=s.state||{},n={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},r={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card error",children:[m.jsx("h2",{children:"No se encontr informacin de la cita"}),m.jsx("p",{children:"Parece que has llegado aqu por error."}),m.jsx(wi,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const l=async()=>{const p=await fetch("/COI/logo.png");if(!p.ok)throw new Error("No se pudo obtener el logo");const y=await p.blob();return await new Promise((E,T)=>{const S=new FileReader;S.onload=()=>E(S.result),S.onerror=T,S.readAsDataURL(y)})},c=async()=>{try{const f=new cA({orientation:"portrait",unit:"mm",format:"a4"}),p=210,y=20,E=p-y*2;let T=y;try{const he=await l(),x=new Image;await new Promise((O,j)=>{x.onload=O,x.onerror=j,x.src=he});const w=40,C=x.height*w/x.width,M=(p-w)/2;f.addImage(he,"PNG",M,T,w,C),T+=C+15}catch(he){console.warn("No se pudo cargar el logo:",he)}f.setFontSize(20),f.setFont("helvetica","bold"),f.setTextColor(0,0,0);const S="COMPROBANTE DE CITA",R=f.getTextWidth(S);f.text(S,(p-R)/2,T),T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10;const L=r[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Informacin de la Clnica",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal"),f.text(L.name||"Clnica Dental Dr. Csar Vsquez",y,T),T+=6,L.location&&(f.setFont("helvetica","italic"),f.text(`Ubicacin: ${L.location}`,y,T),T+=6),L.phones&&L.phones.length>0&&(f.setFont("helvetica","normal"),f.text(`Telfono: ${L.phones.join(" / ")}`,y,T),T+=6),L.address){f.setFont("helvetica","normal");const he=f.splitTextToSize(`Direccin: ${L.address}`,E);f.text(he,y,T),T+=he.length*6}T+=5,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Detalles de la Cita",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal");const Q=n[e.motivo]||e.motivo;f.setFont("helvetica","bold"),f.text("Motivo:",y,T),f.setFont("helvetica","normal"),f.text(Q,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Clnica:",y,T),f.setFont("helvetica","normal"),f.text(L.name||e.clinica,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Fecha:",y,T),f.setFont("helvetica","normal");const H=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(f.text(H,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Hora:",y,T),f.setFont("helvetica","normal"),f.text(e.hora,y+30,T),T+=7,e.notas&&e.notas.trim()){T+=3,f.setFont("helvetica","bold"),f.text("Notas adicionales:",y,T),T+=6,f.setFont("helvetica","normal");const he=f.splitTextToSize(e.notas,E);f.text(he,y,T),T+=he.length*6}T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(10),f.setFont("helvetica","italic"),f.setTextColor(100,100,100);const F=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});f.text(`Comprobante generado el: ${F}`,y,T),T+=6,f.text("Este comprobante es una confirmacin de tu solicitud de cita.",y,T),T+=6,f.text("Te contactaremos pronto para confirmar los detalles.",y,T);const Z=f.output("arraybuffer"),ee=new Blob([Z],{type:"application/pdf"}),J=URL.createObjectURL(ee),te=document.createElement("a"),fe=`comprobante-cita-${e.fecha}.pdf`;te.href=J,te.setAttribute("href",J),te.download=fe,te.setAttribute("download",fe),te.style.display="none",document.body.appendChild(te),te.click(),setTimeout(()=>{document.body.removeChild(te),URL.revokeObjectURL(J)},1500)}catch(f){console.error("Error generating PDF:",f),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card",children:[m.jsx("div",{className:"success-icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("h1",{children:"Cita Agendada Exitosamente!"}),m.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("h3",{children:"Detalles de la Cita"}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Motivo:"}),m.jsx("span",{className:"value",children:n[e.motivo]||e.motivo})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Clnica:"}),m.jsx("span",{className:"value",children:r[e.clinica]?.name||e.clinica})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Fecha:"}),m.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Hora:"}),m.jsx("span",{className:"value",children:e.hora})]}),e.notas&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Notas:"}),m.jsx("span",{className:"value",children:e.notas})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx(wi,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),m.jsxs("button",{onClick:c,className:"btn-primary",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function _x({userData:s}){const e=Vm(),r=Eh().state?.editingAppointment,l=!!r,[c,f]=ue.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[p,y]=ue.useState({}),[E,T]=ue.useState(!1);ue.useEffect(()=>{if(r){const J=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(te=>te.label===r.reason)?.value||"";f({motivo:J,clinica:r.clinica||"",fecha:r.date||"",hora:r.time||"",notas:r.notas||""})}},[r]);const S=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],R=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],L=["7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM"],Q=ee=>{const{name:J,value:te}=ee.target;f(fe=>({...fe,[J]:te})),p[J]&&y(fe=>({...fe,[J]:""}))},H=()=>{const ee={};if(c.motivo||(ee.motivo="Por favor selecciona el motivo de la cita"),c.clinica||(ee.clinica="Por favor selecciona una clnica"),!c.fecha)ee.fecha="Por favor selecciona una fecha";else{const J=new Date(c.fecha+"T00:00:00"),te=new Date;te.setHours(0,0,0,0),J<te&&(ee.fecha="La fecha no puede ser en el pasado"),J.getDay()===0&&(ee.fecha="No se pueden agendar citas los domingos")}return c.hora||(ee.hora="Por favor selecciona una hora"),ee},F=async ee=>{ee.preventDefault();const J=H();if(Object.keys(J).length>0){y(J);return}T(!0);try{const te=ji.currentUser;if(!te){y({general:"Debes iniciar sesin para agendar una cita"}),T(!1);return}const fe=s?`${s.nombres||""} ${s.apellidos||""}`.trim():"Paciente",he=S.find(x=>x.value===c.motivo)?.label||c.motivo;if(l){const x={date:c.fecha,time:c.hora,reason:he,clinica:c.clinica,notas:c.notas},{error:w}=await Vp(r.id,x);if(w){console.error("Error updating appointment:",w),y({general:"Error al actualizar la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/",{state:{message:"Cita actualizada exitosamente"}})}else{const x={patientName:fe,date:c.fecha,time:c.hora,reason:he,clinica:c.clinica,notas:c.notas,status:"programada"},{appointmentId:w,error:C}=await CT(te.uid,x);if(C){console.error("Error creating appointment:",C),y({general:"Error al crear la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/cita-confirmada",{state:{appointment:c}})}}catch(te){console.error("Unexpected error:",te),y({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),T(!1)}},Z=new Date().toISOString().split("T")[0];return m.jsxs("div",{className:"appointment-form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:l?"Editar Cita":"Agenda tu Cita"}),m.jsx("p",{children:l?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),m.jsxs("form",{onSubmit:F,className:"appointment-form",noValidate:!0,children:[m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Informacin de la Cita"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"motivo",name:"motivo",value:c.motivo,onChange:Q,className:`${p.motivo?"error":""} ${c.motivo?"":"placeholder"}`,children:S.map(ee=>m.jsx("option",{value:ee.value,children:ee.label},ee.value))}),p.motivo&&m.jsxs("span",{className:"error-message",children:[" ",p.motivo]})]})}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"clinica",name:"clinica",value:c.clinica,onChange:Q,className:`${p.clinica?"error":""} ${c.clinica?"":"placeholder"}`,children:R.map(ee=>m.jsx("option",{value:ee.value,children:ee.label},ee.value))}),p.clinica&&m.jsxs("span",{className:"error-message",children:[" ",p.clinica]})]})}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("input",{type:"text",id:"fecha",name:"fecha",value:c.fecha,onChange:Q,onFocus:ee=>{ee.target.type="date",ee.target.showPicker&&ee.target.showPicker()},onBlur:ee=>{ee.target.value||(ee.target.type="text")},placeholder:"Selecciona una fecha",min:Z,className:p.fecha?"error":""}),p.fecha&&m.jsxs("span",{className:"error-message",children:[" ",p.fecha]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("select",{id:"hora",name:"hora",value:c.hora,onChange:Q,className:`${p.hora?"error":""} ${c.hora?"":"placeholder"}`,children:[m.jsx("option",{value:"",children:"Selecciona una hora"}),L.map(ee=>m.jsx("option",{value:ee,children:ee},ee))]}),p.hora&&m.jsxs("span",{className:"error-message",children:[" ",p.hora]})]})]})]}),m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Notas Adicionales"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),m.jsx("textarea",{id:"notas",name:"notas",value:c.notas,onChange:Q,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),p.general&&m.jsxs("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:[" ",p.general]}),m.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:E,children:E?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner"}),"Procesando..."]}):l?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]})]})}function vx(){return m.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}const Ex=({onLogin:s})=>{const[e,n]=ue.useState(!0),[r,l]=ue.useState(1),[c,f]=ue.useState(""),[p,y]=ue.useState({}),[E,T]=ue.useState(!1),[S,R]=ue.useState(!1),[L,Q]=ue.useState(""),[H,F]=ue.useState(""),[Z,ee]=ue.useState(!1),[J,te]=ue.useState(""),[fe,he]=ue.useState(""),[x,w]=ue.useState(""),[C,M]=ue.useState(""),[O,j]=ue.useState(""),[I,rt]=ue.useState(""),[ut,K]=ue.useState(""),[ie,pe]=ue.useState(""),[Me,Be]=ue.useState(""),[at,Ge]=ue.useState(""),[Se,Je]=ue.useState(""),[Dt,Zt]=ue.useState(""),[cn,ni]=ue.useState(""),[un,gs]=ue.useState("primera-vez"),It=(le,oe)=>{oe&&y(je=>({...je,[le]:""}))},ys=async le=>{le.preventDefault(),f(""),y({}),T(!0);try{if(e){if(!J||!fe){f("Por favor, completa todos los campos."),T(!1);return}const{user:oe,error:je}=await TT(J,fe);if(je){je.code==="auth/email-not-verified"?f("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):je.code==="auth/user-not-found"?f("No existe una cuenta con este correo."):je.code==="auth/wrong-password"?f("Contrasea incorrecta."):je.code==="auth/invalid-credential"?f("Correo o contrasea incorrectos."):f(je.message||"Error al iniciar sesin."),T(!1);return}oe&&s(oe)}else if(r===1){const oe={};if(J||(oe.email="Ingresa tu correo electrnico"),fe||(oe.password="Crea una contrasea"),x||(oe.confirmPassword="Confirma tu contrasea"),Object.keys(oe).length>0){y(oe),T(!1);return}if(fe.length<6){f("La contrasea debe tener al menos 6 caracteres."),T(!1);return}if(fe!==x){f("Las contraseas no coinciden."),T(!1);return}l(2),T(!1)}else{const oe={};if(C||(oe.nombres="Ingresa tus nombres"),O||(oe.apellidos="Ingresa tus apellidos"),I||(oe.fechaNacimiento="Selecciona tu fecha de nacimiento"),ut||(oe.dui="Ingresa tu nmero de DUI"),ie||(oe.genero="Selecciona tu gnero"),Me||(oe.direccion="Ingresa tu direccin completa"),at||(oe.telefono="Ingresa tu nmero de telfono"),Se||(oe.emergenciaNombre="Ingresa el nombre del contacto"),Dt||(oe.emergenciaTelefono="Ingresa el telfono del contacto"),cn||(oe.emergenciaParentesco="Selecciona el parentesco"),Object.keys(oe).length>0){y(oe),T(!1);return}const je={nombres:C,apellidos:O,fechaNacimiento:I,dui:ut,genero:ie,direccion:Me,telefono:at,emergenciaNombre:Se,emergenciaTelefono:Dt,emergenciaParentesco:cn,tipoPaciente:un};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:fn,error:vr}=await ET(J,fe,je);if(vr){sessionStorage.removeItem("justRegistered"),vr.code==="auth/email-already-in-use"?f("Este correo ya est registrado."):f(vr.message||"Error al registrar usuario."),T(!1);return}f(""),ee(!0)}}catch(oe){console.error("Error:",oe),f("Ocurri un error inesperado. Por favor, intenta de nuevo."),T(!1)}},Pi=async()=>{ee(!1),sessionStorage.removeItem("justRegistered");const{signOut:le}=await q0(async()=>{const{signOut:oe}=await Promise.resolve().then(()=>lx);return{signOut:oe}},void 0);await le(),n(!0),l(1),te(""),he(""),w(""),window.scrollTo(0,0)},hn=le=>{n(le),f(""),y({}),l(1)},_r=async le=>{if(le.preventDefault(),F(""),!L){F("Por favor, ingresa tu correo electrnico.");return}T(!0);const{error:oe}=await bT(L);T(!1),oe?F("Error al enviar el correo de recuperacin."):(F("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{R(!1),Q(""),F("")},3e3))},Ui=le=>{let oe=le.target.value.replace(/\D/g,"");oe.length>9&&(oe=oe.slice(0,9)),oe.length>8&&(oe=oe.slice(0,8)+"-"+oe.slice(8,9)),K(oe),It("dui",oe)},_s=(le,oe)=>je=>{const fn=je.target.value.replace(/\D/g,"");fn.length<=8&&(le(fn),It(oe,fn))};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:`login-card ${!e&&r===2?"wide":""}`,children:[m.jsx("div",{className:"login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),r===1&&m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>hn(!0),children:"INICIAR SESIN"}),m.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>hn(!1),children:"REGISTRARSE"})]}),m.jsxs("form",{onSubmit:ys,className:"login-form",noValidate:!0,children:[(e||r===1)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:J,onChange:le=>{te(le.target.value),It("email",le.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:fe,onChange:le=>{he(le.target.value),It("password",le.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),!e&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),m.jsx("input",{type:"password",id:"confirmPassword",value:x,onChange:le=>{w(le.target.value),It("confirmPassword",le.target.value)},placeholder:"",className:p.confirmPassword?"input-error":"",required:!0}),p.confirmPassword&&m.jsx("span",{className:"field-error-message",children:p.confirmPassword})]})]}),!e&&r===2&&m.jsxs("div",{className:"registration-step-2",children:[m.jsx("h3",{children:"Datos Personales"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombres"}),m.jsx("input",{type:"text",value:C,onChange:le=>{M(le.target.value),It("nombres",le.target.value)},className:p.nombres?"input-error":"",required:!0}),p.nombres&&m.jsx("span",{className:"field-error-message",children:p.nombres})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("input",{type:"text",value:O,onChange:le=>{j(le.target.value),It("apellidos",le.target.value)},className:p.apellidos?"input-error":"",required:!0}),p.apellidos&&m.jsx("span",{className:"field-error-message",children:p.apellidos})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("input",{type:"date",value:I,onChange:le=>{rt(le.target.value),It("fechaNacimiento",le.target.value)},className:p.fechaNacimiento?"input-error":"",required:!0}),p.fechaNacimiento&&m.jsx("span",{className:"field-error-message",children:p.fechaNacimiento})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"DUI"}),m.jsx("input",{type:"text",value:ut,onChange:Ui,placeholder:"00000000-0",maxLength:"10",className:p.dui?"input-error":"",required:!0}),p.dui&&m.jsx("span",{className:"field-error-message",children:p.dui})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gnero"}),m.jsxs("select",{value:ie,onChange:le=>{pe(le.target.value),It("genero",le.target.value)},required:!0,className:`${ie?"":"placeholder-selected"} ${p.genero?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Masculino",children:"Masculino"}),m.jsx("option",{value:"Femenino",children:"Femenino"})]}),p.genero&&m.jsx("span",{className:"field-error-message",children:p.genero})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Direccin"}),m.jsx("input",{type:"text",value:Me,onChange:le=>{Be(le.target.value),It("direccion",le.target.value)},className:p.direccion?"input-error":"",required:!0}),p.direccion&&m.jsx("span",{className:"field-error-message",children:p.direccion})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:at,onChange:_s(Ge,"telefono"),placeholder:"00000000",maxLength:"8",className:p.telefono?"input-error":"",required:!0}),p.telefono&&m.jsx("span",{className:"field-error-message",children:p.telefono})]}),m.jsx("div",{className:"divider"}),m.jsx("h3",{children:"Contacto de Emergencia"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombre Completo"}),m.jsx("input",{type:"text",value:Se,onChange:le=>{Je(le.target.value),It("emergenciaNombre",le.target.value)},className:p.emergenciaNombre?"input-error":"",required:!0}),p.emergenciaNombre&&m.jsx("span",{className:"field-error-message",children:p.emergenciaNombre})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:Dt,onChange:_s(Zt,"emergenciaTelefono"),maxLength:"8",className:p.emergenciaTelefono?"input-error":"",required:!0}),p.emergenciaTelefono&&m.jsx("span",{className:"field-error-message",children:p.emergenciaTelefono})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Parentesco"}),m.jsxs("select",{value:cn,onChange:le=>{ni(le.target.value),It("emergenciaParentesco",le.target.value)},required:!0,className:`${cn?"":"placeholder-selected"} ${p.emergenciaParentesco?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),m.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),m.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),m.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),m.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),m.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),m.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),m.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),m.jsx("option",{value:"To / Ta",children:"To / Ta"}),m.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),m.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),m.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),p.emergenciaParentesco&&m.jsx("span",{className:"field-error-message",children:p.emergenciaParentesco})]}),m.jsx("div",{className:"divider"}),m.jsxs("div",{className:"form-group radio-group",children:[m.jsx("label",{children:"Es primera vez o paciente recurrente?"}),m.jsxs("div",{className:"radio-options",children:[m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:un==="primera-vez",onChange:le=>gs(le.target.value)}),"Primera vez"]}),m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:un==="recurrente",onChange:le=>gs(le.target.value)}),"Recurrente"]})]})]})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsxs("div",{className:"button-group",children:[!e&&r===2&&m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>l(1),children:"Atrs"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Cargando...":e?"Ingresar":r===1?"Siguiente":"Finalizar Registro"})]}),e&&m.jsx("div",{className:"forgot-password",children:m.jsx("a",{href:"#",onClick:le=>{le.preventDefault(),R(!0)},children:"Olvidaste tu contrasea?"})})]}),S&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:le=>le.stopPropagation(),children:[m.jsx("h3",{children:"Recuperar Contrasea"}),m.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),m.jsxs("form",{onSubmit:_r,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"resetEmail",value:L,onChange:le=>Q(le.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),H&&m.jsx("p",{className:H.includes("Error")?"error-message":"success-message",children:H}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>R(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Enviando...":"Enviar"})]})]})]})}),Z&&m.jsx("div",{className:"modal-overlay",onClick:Pi,children:m.jsxs("div",{className:"modal-content success-modal",onClick:le=>le.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),m.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Pi,children:"Aceptar"})})]})})]})})},Tx=({onLogin:s})=>{const[e,n]=ue.useState(""),[r,l]=ue.useState(""),[c,f]=ue.useState(""),[p,y]=ue.useState({}),E=[{email:"admin@clinica.com",password:"admin123",type:"admin",nombre:"Mara Gonzlez",cargo:"Administradora"},{email:"doctor@clinica.com",password:"doctor123",type:"doctor",nombre:"Dr. Csar Vsquez",cargo:"Odontlogo"}],T=(R,L)=>{L&&y(Q=>({...Q,[R]:""}))},S=R=>{R.preventDefault(),f(""),y({});const L={};if(e||(L.email="Ingresa tu correo electrnico"),r||(L.password="Ingresa tu contrasea"),Object.keys(L).length>0){y(L);return}const Q=E.find(H=>H.email===e&&H.password===r);Q?s(e,r,null,Q.type,{nombre:Q.nombre,cargo:Q.cargo}):f("Credenciales incorrectas. Verifica tu correo y contrasea.")};return m.jsx("div",{className:"staff-login-container",children:m.jsxs("div",{className:"staff-login-card",children:[m.jsx("div",{className:"staff-login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),m.jsxs("form",{onSubmit:S,className:"staff-login-form",noValidate:!0,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:R=>{n(R.target.value),T("email",R.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:r,onChange:R=>{l(R.target.value),T("password",R.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsx("button",{type:"submit",className:"staff-login-button",children:"Ingresar"}),m.jsx("div",{className:"staff-login-info",children:m.jsxs("p",{className:"info-text",children:[m.jsx("strong",{children:"Usuarios de prueba:"}),m.jsx("br",{}),"Admin: admin@clinica.com / admin123",m.jsx("br",{}),"Doctor: doctor@clinica.com / doctor123"]})})]})]})})},Ax=({userType:s,userData:e})=>{const n=s==="admin",r=s==="doctor";return m.jsxs("div",{className:"staff-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[n&&" Panel Administrativo",r&&" Panel Mdico"]}),m.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",m.jsx("strong",{children:e?.nombre||"Usuario"})]})]}),m.jsxs("div",{className:"dashboard-content",children:[n&&m.jsxs("div",{className:"admin-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Gestin de Citas"}),m.jsx("p",{children:"Administra todas las citas programadas"}),m.jsx("button",{className:"card-button",children:"Ver Citas"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Pacientes"}),m.jsx("p",{children:"Gestiona la base de datos de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Pacientes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Reportes"}),m.jsx("p",{children:"Consulta estadsticas y reportes"}),m.jsx("button",{className:"card-button",children:"Ver Reportes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Configuracin"}),m.jsx("p",{children:"Ajustes del sistema y usuarios"}),m.jsx("button",{className:"card-button",children:"Configurar"})]})]}),m.jsxs("div",{className:"recent-activity",children:[m.jsx("h2",{children:"Actividad Reciente"}),m.jsxs("div",{className:"activity-list",children:[m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 5 min"}),m.jsx("span",{className:"activity-text",children:"Nueva cita programada - Juan Prez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 15 min"}),m.jsx("span",{className:"activity-text",children:"Cita cancelada - Mara Lpez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 1 hora"}),m.jsx("span",{className:"activity-text",children:"Nuevo paciente registrado - Carlos Gmez"})]})]})]})]}),r&&m.jsxs("div",{className:"doctor-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Citas del Da"}),m.jsx("p",{children:"Revisa tu agenda de hoy"}),m.jsx("button",{className:"card-button",children:"Ver Agenda"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Historial Clnico"}),m.jsx("p",{children:"Consulta historiales de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Historiales"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Notas Mdicas"}),m.jsx("p",{children:"Registra diagnsticos y tratamientos"}),m.jsx("button",{className:"card-button",children:"Nueva Nota"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Recetas"}),m.jsx("p",{children:"Gestiona prescripciones mdicas"}),m.jsx("button",{className:"card-button",children:"Ver Recetas"})]})]}),m.jsxs("div",{className:"today-appointments",children:[m.jsx("h2",{children:"Citas de Hoy"}),m.jsxs("div",{className:"appointments-list",children:[m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"09:00 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Ana Martnez"}),m.jsx("span",{children:"Limpieza dental"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"10:30 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Roberto Silva"}),m.jsx("span",{children:"Extraccin de muela"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"02:00 PM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Laura Hernndez"}),m.jsx("span",{children:"Consulta general"})]})]})]})]})]})]})]})};function bx(){const{pathname:s}=Eh();return ue.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function Sx({isAuthenticated:s,userType:e,userData:n,handleLogin:r,handleLogout:l,isStaff:c,isLoading:f}){const p=Eh(),y=p.pathname==="/staff/login"||p.pathname==="/staff/dashboard";return f?m.jsx("div",{className:"loading-container",children:m.jsx("div",{className:"loading-spinner"})}):m.jsxs(m.Fragment,{children:[s&&m.jsx(cx,{onLogout:l,userData:n,userType:e}),m.jsx("main",{className:"main-content",children:m.jsxs(lA,{children:[m.jsx(rs,{path:"/staff/login",element:s?m.jsx(Ou,{to:c?"/staff/dashboard":"/",replace:!0}):m.jsx(Tx,{onLogin:r})}),m.jsx(rs,{path:"/",element:s?e==="patient"?m.jsx(dx,{userData:n}):m.jsx(Ou,{to:"/staff/dashboard",replace:!0}):m.jsx(Ex,{onLogin:r})}),m.jsx(rs,{path:"/staff/dashboard",element:s&&c?m.jsx(Ax,{userType:e,userData:n}):m.jsx(Ou,{to:s?"/":"/staff/login",replace:!0})}),s&&e==="patient"&&m.jsxs(m.Fragment,{children:[m.jsx(rs,{path:"/cita",element:m.jsx("div",{className:"container",children:m.jsx(_x,{userData:n})})}),m.jsx(rs,{path:"/contacto",element:m.jsx(mx,{})}),m.jsx(rs,{path:"/perfil",element:m.jsx(px,{userData:n})}),m.jsx(rs,{path:"/mis-citas",element:m.jsx(gx,{})}),m.jsx(rs,{path:"/cita-confirmada",element:m.jsx(yx,{})})]}),m.jsx(rs,{path:"*",element:m.jsx(Ou,{to:s&&c?"/staff/dashboard":"/",replace:!0})})]})}),s&&e==="patient"&&m.jsx(vx,{}),!y&&m.jsx(ux,{})]})}function wx(){const[s,e]=ue.useState(!1),[n,r]=ue.useState(null),[l,c]=ue.useState(null),[f,p]=ue.useState(!0);ue.useEffect(()=>{const S=wT(async Q=>{if(console.log("Auth state changed, user:",Q?.email),Q){const H=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",H),H==="true"){console.log("User just registered, skipping auto-login"),p(!1);return}let F=3,Z=null,ee=null;for(;F>0&&!Z;){const J=await Mm(Q.uid);Z=J.profile,ee=J.error,!Z&&F>1&&(console.log(`Failed to load profile, retrying... (${F-1} attempts left)`),await new Promise(te=>setTimeout(te,1e3))),F--}Z?(r(Z),c("patient"),e(!0),p(!1)):(console.error("Failed to load profile after retries:",ee),e(!1),r(null),c(null),p(!1))}else e(!1),r(null),c(null),p(!1)}),R=async()=>{const{markOverdueAppointmentsAsLost:Q}=await q0(async()=>{const{markOverdueAppointmentsAsLost:H}=await Promise.resolve().then(()=>fx);return{markOverdueAppointmentsAsLost:H}},void 0);await Q()};R();const L=setInterval(R,6e4);return()=>{S(),clearInterval(L)}},[]);const y=async S=>{const{profile:R,error:L}=await Mm(S.uid);R?(r(R),c("patient"),e(!0)):console.error("Failed to load profile:",L)},E=async()=>{await AT(),e(!1),r(null),c(null)},T=l==="admin"||l==="doctor";return m.jsxs(oA,{basename:"/COI/",children:[m.jsx(bx,{}),m.jsx("div",{className:"app",children:m.jsx(Sx,{isAuthenticated:s,userType:l,userData:n,handleLogin:y,handleLogout:E,isStaff:T,isLoading:f})})]})}gA.createRoot(document.getElementById("root")).render(m.jsx(ue.StrictMode,{children:m.jsx(wx,{})}));
