import{r as bC,a as EC,b as z,L as Mr,u as Nu,c as Ru,R as bE,d as xC,e as te,f as TC,B as SC,g as CC,h as Ir,N as yl}from"./vendor-BhpeQ1g1.js";import{E as EE}from"./pdf-utils-DolBdstO.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var ug={exports:{}},Jc={};var K1;function DC(){if(K1)return Jc;K1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return Jc.Fragment=e,Jc.jsx=t,Jc.jsxs=t,Jc}var X1;function AC(){return X1||(X1=1,ug.exports=DC()),ug.exports}var d=AC(),dg={exports:{}},eu={},hg={exports:{}},fg={};var $1;function NC(){return $1||($1=1,(function(r){function e(U,$){var Z=U.length;U.push($);e:for(;0<Z;){var ce=Z-1>>>1,ye=U[ce];if(0<s(ye,$))U[ce]=$,U[Z]=ye,Z=ce;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var $=U[0],Z=U.pop();if(Z!==$){U[0]=Z;e:for(var ce=0,ye=U.length,Ie=ye>>>1;ce<Ie;){var le=2*(ce+1)-1,be=U[le],Ye=le+1,wt=U[Ye];if(0>s(be,Z))Ye<ye&&0>s(wt,be)?(U[ce]=wt,U[Ye]=Z,ce=Ye):(U[ce]=be,U[le]=Z,ce=le);else if(Ye<ye&&0>s(wt,Z))U[ce]=wt,U[Ye]=Z,ce=Ye;else break e}}return $}function s(U,$){var Z=U.sortIndex-$.sortIndex;return Z!==0?Z:U.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var m=[],v=[],y=1,w=null,E=3,S=!1,k=!1,L=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function X(U){for(var $=t(v);$!==null;){if($.callback===null)n(v);else if($.startTime<=U)n(v),$.sortIndex=$.expirationTime,e(m,$);else break;$=t(v)}}function Q(U){if(L=!1,X(U),!k)if(t(m)!==null)k=!0,ae||(ae=!0,P());else{var $=t(v);$!==null&&fe(Q,$.startTime-U)}}var ae=!1,O=-1,C=5,N=-1;function M(){return T?!0:!(r.unstable_now()-N<C)}function j(){if(T=!1,ae){var U=r.unstable_now();N=U;var $=!0;try{e:{k=!1,L&&(L=!1,q(O),O=-1),S=!0;var Z=E;try{t:{for(X(U),w=t(m);w!==null&&!(w.expirationTime>U&&M());){var ce=w.callback;if(typeof ce=="function"){w.callback=null,E=w.priorityLevel;var ye=ce(w.expirationTime<=U);if(U=r.unstable_now(),typeof ye=="function"){w.callback=ye,X(U),$=!0;break t}w===t(m)&&n(m),X(U)}else n(m);w=t(m)}if(w!==null)$=!0;else{var Ie=t(v);Ie!==null&&fe(Q,Ie.startTime-U),$=!1}}break e}finally{w=null,E=Z,S=!1}$=void 0}}finally{$?P():ae=!1}}}var P;if(typeof B=="function")P=function(){B(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=j,P=function(){de.postMessage(null)}}else P=function(){R(j,0)};function fe(U,$){O=R(function(){U(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(U){switch(E){case 1:case 2:case 3:var $=3;break;default:$=E}var Z=E;E=$;try{return U()}finally{E=Z}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=E;E=U;try{return $()}finally{E=Z}},r.unstable_scheduleCallback=function(U,$,Z){var ce=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,U){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,U={id:y++,callback:$,priorityLevel:U,startTime:Z,expirationTime:ye,sortIndex:-1},Z>ce?(U.sortIndex=Z,e(v,U),t(m)===null&&U===t(v)&&(L?(q(O),O=-1):L=!0,fe(Q,Z-ce))):(U.sortIndex=ye,e(m,U),k||S||(k=!0,ae||(ae=!0,P()))),U},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(U){var $=E;return function(){var Z=E;E=$;try{return U.apply(this,arguments)}finally{E=Z}}}})(fg)),fg}var Z1;function RC(){return Z1||(Z1=1,hg.exports=NC()),hg.exports}var J1;function kC(){if(J1)return eu;J1=1;var r=RC(),e=bC(),t=EC();function n(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var i=a,l=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(l=i.return),a=i.return;while(a)}return i.tag===3?l:null}function c(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function h(a){if(a.tag===31){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function m(a){if(o(a)!==a)throw Error(n(188))}function v(a){var i=a.alternate;if(!i){if(i=o(a),i===null)throw Error(n(188));return i!==a?null:a}for(var l=a,u=i;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){l=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return m(p),a;if(g===u)return m(p),i;g=g.sibling}throw Error(n(188))}if(l.return!==u.return)l=p,u=g;else{for(var b=!1,D=p.child;D;){if(D===l){b=!0,l=p,u=g;break}if(D===u){b=!0,u=p,l=g;break}D=D.sibling}if(!b){for(D=g.child;D;){if(D===l){b=!0,l=g,u=p;break}if(D===u){b=!0,u=g,l=p;break}D=D.sibling}if(!b)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:i}function y(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=y(a),i!==null)return i;a=a.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var I=Symbol.for("react.client.reference");function de(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===I?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case L:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case Q:return"Suspense";case ae:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case k:return"Portal";case B:return a.displayName||"Context";case q:return(a._context.displayName||"Context")+".Consumer";case X:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return i=a.displayName||null,i!==null?i:de(a.type)||"Memo";case C:i=a._payload,a=a._init;try{return de(a(i))}catch{}}return null}var fe=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ce=[],ye=-1;function Ie(a){return{current:a}}function le(a){0>ye||(a.current=ce[ye],ce[ye]=null,ye--)}function be(a,i){ye++,ce[ye]=a.current,a.current=i}var Ye=Ie(null),wt=Ie(null),fn=Ie(null),Cn=Ie(null);function nr(a,i){switch(be(fn,i),be(wt,a),be(Ye,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?y1(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=y1(i),a=_1(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}le(Ye),be(Ye,a)}function yn(){le(Ye),le(wt),le(fn)}function As(a){a.memoizedState!==null&&be(Cn,a);var i=Ye.current,l=_1(i,a.type);i!==l&&(be(wt,a),be(Ye,l))}function yr(a){wt.current===a&&(le(Ye),le(wt)),Cn.current===a&&(le(Cn),Kc._currentValue=Z)}var Ei,Hr;function Ln(a){if(Ei===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ei=i&&i[1]||"",Hr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ei+a+Hr}var qr=!1;function Pa(a,i){if(!a||qr)return"";qr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(ee){var K=ee}Reflect.construct(a,[],ie)}else{try{ie.call()}catch(ee){K=ee}a.call(ie.prototype)}}else{try{throw Error()}catch(ee){K=ee}(ie=a())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),b=g[0],D=g[1];if(b&&D){var V=b.split(`
`),W=D.split(`
`);for(p=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;if(u===V.length||p===W.length)for(u=V.length-1,p=W.length-1;1<=u&&0<=p&&V[u]!==W[p];)p--;for(;1<=u&&0<=p;u--,p--)if(V[u]!==W[p]){if(u!==1||p!==1)do if(u--,p--,0>p||V[u]!==W[p]){var ne=`
`+V[u].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=u&&0<=p);break}}}finally{qr=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?Ln(l):""}function Yr(a,i){switch(a.tag){case 26:case 27:case 5:return Ln(a.type);case 16:return Ln("Lazy");case 13:return a.child!==i&&i!==null?Ln("Suspense Fallback"):Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return Pa(a.type,!1);case 11:return Pa(a.type.render,!1);case 1:return Pa(a.type,!0);case 31:return Ln("Activity");default:return""}}function Ns(a){try{var i="",l=null;do i+=Yr(a,l),l=a,a=a.return;while(a);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,Pt=r.unstable_scheduleCallback,Ct=r.unstable_cancelCallback,Jl=r.unstable_shouldYield,Rs=r.unstable_requestPaint,$t=r.unstable_now,La=r.unstable_getCurrentPriorityLevel,ks=r.unstable_ImmediatePriority,xi=r.unstable_UserBlockingPriority,me=r.unstable_NormalPriority,Se=r.unstable_LowPriority,Qt=r.unstable_IdlePriority,_r=r.log,wr=r.unstable_setDisableYieldValue,_n=null,Dt=null;function wn(a){if(typeof _r=="function"&&wr(a),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(_n,a)}catch{}}var mt=Math.clz32?Math.clz32:Ku,Qu=Math.log,ko=Math.LN2;function Ku(a){return a>>>=0,a===0?32:31-(Qu(a)/ko|0)|0}var Gr=256,Is=262144,Lt=4194304;function Wr(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Qr(a,i,l){var u=a.pendingLanes;if(u===0)return 0;var p=0,g=a.suspendedLanes,b=a.pingedLanes;a=a.warmLanes;var D=u&134217727;return D!==0?(u=D&~g,u!==0?p=Wr(u):(b&=D,b!==0?p=Wr(b):l||(l=D&~a,l!==0&&(p=Wr(l))))):(D=u&~g,D!==0?p=Wr(D):b!==0?p=Wr(b):l||(l=u&~a,l!==0&&(p=Wr(l)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:p}function br(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function pp(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xu(){var a=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),a}function Kr(a){for(var i=[],l=0;31>l;l++)i.push(a);return i}function Ms(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function mp(a,i,l,u,p,g){var b=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var D=a.entanglements,V=a.expirationTimes,W=a.hiddenUpdates;for(l=b&~l;0<l;){var ne=31-mt(l),ie=1<<ne;D[ne]=0,V[ne]=-1;var K=W[ne];if(K!==null)for(W[ne]=null,ne=0;ne<K.length;ne++){var ee=K[ne];ee!==null&&(ee.lane&=-536870913)}l&=~ie}u!==0&&js(a,u,0),g!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=g&~(b&~i))}function js(a,i,l){a.pendingLanes|=i,a.suspendedLanes&=~i;var u=31-mt(i);a.entangledLanes|=i,a.entanglements[u]=a.entanglements[u]|1073741824|l&261930}function ec(a,i){var l=a.entangledLanes|=i;for(a=a.entanglements;l;){var u=31-mt(l),p=1<<u;p&i|a[u]&i&&(a[u]|=i),l&=~p}}function tc(a,i){var l=i&-i;return l=(l&42)!==0?1:Os(l),(l&(a.suspendedLanes|i))!==0?0:l}function Os(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Va(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function $u(){var a=$.p;return a!==0?a:(a=window.event,a===void 0?32:B1(a.type))}function Er(a,i){var l=$.p;try{return $.p=a,i()}finally{$.p=l}}var xr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+xr,Zt="__reactProps$"+xr,Xr="__reactContainer$"+xr,Io="__reactEvents$"+xr,gp="__reactListeners$"+xr,Zu="__reactHandles$"+xr,Ju="__reactResources$"+xr,$r="__reactMarker$"+xr;function Mo(a){delete a[Vt],delete a[Zt],delete a[Io],delete a[gp],delete a[Zu]}function Zr(a){var i=a[Vt];if(i)return i;for(var l=a.parentNode;l;){if(i=l[Xr]||l[Vt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(a=C1(a);a!==null;){if(l=a[Vt])return l;a=C1(a)}return i}a=l,l=a.parentNode}return null}function rr(a){if(a=a[Vt]||a[Xr]){var i=a.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return a}return null}function Vn(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(n(33))}function Jr(a){var i=a[Ju];return i||(i=a[Ju]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ut(a){a[$r]=!0}var nc=new Set,rc={};function ea(a,i){ta(a,i),ta(a+"Capture",i)}function ta(a,i){for(rc[a]=i,a=0;a<i.length;a++)nc.add(i[a])}var ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ic={},sc={};function ed(a){return St.call(sc,a)?!0:St.call(ic,a)?!1:ac.test(a)?sc[a]=!0:(ic[a]=!0,!1)}function jo(a,i,l){if(ed(i))if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+l)}}function Un(a,i,l){if(l===null)a.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+l)}}function Ft(a,i,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(i,l,""+u)}}function Jt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ti(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oc(a,i,l){var u=Object.getOwnPropertyDescriptor(a.constructor.prototype,i);if(!a.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return p.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(a,i,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function tt(a){if(!a._valueTracker){var i=Ti(a)?"checked":"value";a._valueTracker=oc(a,i,""+a[i])}}function Ps(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return a&&(u=Ti(a)?a.checked?"true":"false":a.value),a=u,a!==l?(i.setValue(a),!0):!1}function na(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ls=/[\n"\\]/g;function Dn(a){return a.replace(Ls,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Oo(a,i,l,u,p,g,b,D){a.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?a.type=b:a.removeAttribute("type"),i!=null?b==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+Jt(i)):a.value!==""+Jt(i)&&(a.value=""+Jt(i)):b!=="submit"&&b!=="reset"||a.removeAttribute("value"),i!=null?lc(a,b,Jt(i)):l!=null?lc(a,b,Jt(l)):u!=null&&a.removeAttribute("value"),p==null&&g!=null&&(a.defaultChecked=!!g),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+Jt(D):a.removeAttribute("name")}function td(a,i,l,u,p,g,b,D){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(a.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){tt(a);return}l=l!=null?""+Jt(l):"",i=i!=null?""+Jt(i):l,D||i===a.value||(a.value=i),a.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,a.checked=D?a.checked:!!u,a.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.name=b),tt(a)}function lc(a,i,l){i==="number"&&na(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Si(a,i,l,u){if(a=a.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<a.length;l++)p=i.hasOwnProperty("$"+a[l].value),a[l].selected!==p&&(a[l].selected=p),p&&u&&(a[l].defaultSelected=!0)}else{for(l=""+Jt(l),i=null,p=0;p<a.length;p++){if(a[p].value===l){a[p].selected=!0,u&&(a[p].defaultSelected=!0);return}i!==null||a[p].disabled||(i=a[p])}i!==null&&(i.selected=!0)}}function nd(a,i,l){if(i!=null&&(i=""+Jt(i),i!==a.value&&(a.value=i),l==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=l!=null?""+Jt(l):""}function Ci(a,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(n(92));if(fe(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=Jt(i),a.defaultValue=l,u=a.textContent,u===l&&u!==""&&u!==null&&(a.value=u),tt(a)}function An(a,i){if(i){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=i;return}}a.textContent=i}var rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(a,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":u?a.setProperty(i,l):typeof l!="number"||l===0||rd.has(i)?i==="float"?a.cssFloat=l:a[i]=(""+l).trim():a[i]=l+"px"}function uc(a,i,l){if(i!=null&&typeof i!="object")throw Error(n(62));if(a=a.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&l[p]!==u&&cc(a,p,u)}else for(var g in i)i.hasOwnProperty(g)&&cc(a,g,i[g])}function Po(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Di=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lo(a){return Di.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Tr(){}var dc=null;function ar(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ai=null,ra=null;function Vs(a){var i=rr(a);if(i&&(a=i.stateNode)){var l=a[Zt]||null;e:switch(a=i.stateNode,i.type){case"input":if(Oo(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Dn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==a&&u.form===a.form){var p=u[Zt]||null;if(!p)throw Error(n(90));Oo(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===a.form&&Ps(u)}break e;case"textarea":nd(a,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Si(a,!!l.multiple,i,!1)}}}var Vo=!1;function Ni(a,i,l){if(Vo)return a(i,l);Vo=!0;try{var u=a(i);return u}finally{if(Vo=!1,(Ai!==null||ra!==null)&&($d(),Ai&&(i=Ai,a=ra,ra=Ai=null,Vs(i),a)))for(i=0;i<a.length;i++)Vs(a[i])}}function Sr(a,i){var l=a.stateNode;if(l===null)return null;var u=l[Zt]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(a=a.type,u=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!u;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(ir)try{var st={};Object.defineProperty(st,"passive",{get:function(){Us=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Us=!1}var aa=null,hc=null,Fs=null;function fc(){if(Fs)return Fs;var a,i=hc,l=i.length,u,p="value"in aa?aa.value:aa.textContent,g=p.length;for(a=0;a<l&&i[a]===p[a];a++);var b=l-a;for(u=1;u<=b&&i[l-u]===p[g-u];u++);return Fs=p.slice(a,1<u?1-u:void 0)}function zs(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function Ua(){return!0}function Cr(){return!1}function nn(a){function i(l,u,p,g,b){this._reactName=l,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(l=a[D],this[D]=l?l(g):g[D]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ua:Cr,this.isPropagationStopped=Cr,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),i}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=nn(Fa),Ri=w({},Fa,{view:0,detail:0}),pc=nn(Ri),ki,Uo,sa,Fo=w({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==sa&&(sa&&a.type==="mousemove"?(ki=a.screenX-sa.screenX,Uo=a.screenY-sa.screenY):Uo=ki=0,sa=a),ki)},movementY:function(a){return"movementY"in a?a.movementY:Uo}}),mc=nn(Fo),Bs=w({},Fo,{dataTransfer:0}),id=nn(Bs),sd=w({},Ri,{relatedTarget:0}),Hs=nn(sd),gc=w({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),od=nn(gc),zo=w({},Fa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ld=nn(zo),cd=w({},Fa,{data:0}),oa=nn(cd),ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fd(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=hd[a])?!!i[a]:!1}function Ii(){return fd}var bn=w({},Ri,{key:function(a){if(a.key){var i=ud[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=zs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?dd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(a){return a.type==="keypress"?zs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?zs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),pd=nn(bn),md=w({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),za=nn(md),f=w({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),_=nn(f),x=w({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=nn(x),Y=w({},Fo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),J=nn(Y),ue=w({},Fa,{newState:0,oldState:0}),Re=nn(ue),At=[9,13,27,32],Xe=ir&&"CompositionEvent"in window,gt=null;ir&&"documentMode"in document&&(gt=document.documentMode);var sr=ir&&"TextEvent"in window&&!gt,la=ir&&(!Xe||gt&&8<gt&&11>=gt),Dr=" ",Ar=!1;function qs(a,i){switch(a){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ho=!1;function YT(a,i){switch(a){case"compositionend":return Bo(i);case"keypress":return i.which!==32?null:(Ar=!0,Dr);case"textInput":return a=i.data,a===Dr&&Ar?null:a;default:return null}}function GT(a,i){if(Ho)return a==="compositionend"||!Xe&&qs(a,i)?(a=fc(),Fs=hc=aa=null,Ho=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return la&&i.locale!=="ko"?null:i.data;default:return null}}var WT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!WT[a.type]:i==="textarea"}function Ry(a,i,l,u){Ai?ra?ra.push(u):ra=[u]:Ai=u,i=ah(i,"onChange"),0<i.length&&(l=new ia("onChange","change",null,l,u),a.push({event:l,listeners:i}))}var vc=null,yc=null;function QT(a){h1(a,0)}function gd(a){var i=Vn(a);if(Ps(i))return a}function ky(a,i){if(a==="change")return i}var Iy=!1;if(ir){var vp;if(ir){var yp="oninput"in document;if(!yp){var My=document.createElement("div");My.setAttribute("oninput","return;"),yp=typeof My.oninput=="function"}vp=yp}else vp=!1;Iy=vp&&(!document.documentMode||9<document.documentMode)}function jy(){vc&&(vc.detachEvent("onpropertychange",Oy),yc=vc=null)}function Oy(a){if(a.propertyName==="value"&&gd(yc)){var i=[];Ry(i,yc,a,ar(a)),Ni(QT,i)}}function KT(a,i,l){a==="focusin"?(jy(),vc=i,yc=l,vc.attachEvent("onpropertychange",Oy)):a==="focusout"&&jy()}function XT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return gd(yc)}function $T(a,i){if(a==="click")return gd(i)}function ZT(a,i){if(a==="input"||a==="change")return gd(i)}function JT(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Fn=typeof Object.is=="function"?Object.is:JT;function _c(a,i){if(Fn(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var p=l[u];if(!St.call(i,p)||!Fn(a[p],i[p]))return!1}return!0}function Py(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ly(a,i){var l=Py(a);a=0;for(var u;l;){if(l.nodeType===3){if(u=a+l.textContent.length,a<=i&&u>=i)return{node:l,offset:i-a};a=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Py(l)}}function Vy(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?Vy(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function Uy(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=na(a.document);i instanceof a.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)a=i.contentWindow;else break;i=na(a.document)}return i}function _p(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var eS=ir&&"documentMode"in document&&11>=document.documentMode,qo=null,wp=null,wc=null,bp=!1;function Fy(a,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bp||qo==null||qo!==na(u)||(u=qo,"selectionStart"in u&&_p(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wc&&_c(wc,u)||(wc=u,u=ah(wp,"onSelect"),0<u.length&&(i=new ia("onSelect","select",null,i,l),a.push({event:i,listeners:u}),i.target=qo)))}function Ys(a,i){var l={};return l[a.toLowerCase()]=i.toLowerCase(),l["Webkit"+a]="webkit"+i,l["Moz"+a]="moz"+i,l}var Yo={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Ep={},zy={};ir&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Gs(a){if(Ep[a])return Ep[a];if(!Yo[a])return a;var i=Yo[a],l;for(l in i)if(i.hasOwnProperty(l)&&l in zy)return Ep[a]=i[l];return a}var By=Gs("animationend"),Hy=Gs("animationiteration"),qy=Gs("animationstart"),tS=Gs("transitionrun"),nS=Gs("transitionstart"),rS=Gs("transitioncancel"),Yy=Gs("transitionend"),Gy=new Map,xp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xp.push("scrollEnd");function Nr(a,i){Gy.set(a,i),ea(i,[a])}var vd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},or=[],Go=0,Tp=0;function yd(){for(var a=Go,i=Tp=Go=0;i<a;){var l=or[i];or[i++]=null;var u=or[i];or[i++]=null;var p=or[i];or[i++]=null;var g=or[i];if(or[i++]=null,u!==null&&p!==null){var b=u.pending;b===null?p.next=p:(p.next=b.next,b.next=p),u.pending=p}g!==0&&Wy(l,p,g)}}function _d(a,i,l,u){or[Go++]=a,or[Go++]=i,or[Go++]=l,or[Go++]=u,Tp|=u,a.lanes|=u,a=a.alternate,a!==null&&(a.lanes|=u)}function Sp(a,i,l,u){return _d(a,i,l,u),wd(a)}function Ws(a,i){return _d(a,null,null,i),wd(a)}function Wy(a,i,l){a.lanes|=l;var u=a.alternate;u!==null&&(u.lanes|=l);for(var p=!1,g=a.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(a=g.stateNode,a===null||a._visibility&1||(p=!0)),a=g,g=g.return;return a.tag===3?(g=a.stateNode,p&&i!==null&&(p=31-mt(l),a=g.hiddenUpdates,u=a[p],u===null?a[p]=[i]:u.push(i),i.lane=l|536870912),g):null}function wd(a){if(50<Bc)throw Bc=0,jm=null,Error(n(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Wo={};function aS(a,i,l,u){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(a,i,l,u){return new aS(a,i,l,u)}function Cp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ba(a,i){var l=a.alternate;return l===null?(l=zn(a.tag,i,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=i,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,i=a.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function Qy(a,i){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,i=l.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function bd(a,i,l,u,p,g){var b=0;if(u=a,typeof a=="function")Cp(a)&&(b=1);else if(typeof a=="string")b=cC(a,l,Ye.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=zn(31,l,i,p),a.elementType=N,a.lanes=g,a;case L:return Qs(l.children,p,g,i);case T:b=8,p|=24;break;case R:return a=zn(12,l,i,p|2),a.elementType=R,a.lanes=g,a;case Q:return a=zn(13,l,i,p),a.elementType=Q,a.lanes=g,a;case ae:return a=zn(19,l,i,p),a.elementType=ae,a.lanes=g,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:b=10;break e;case q:b=9;break e;case X:b=11;break e;case O:b=14;break e;case C:b=16,u=null;break e}b=29,l=Error(n(130,a===null?"null":typeof a,"")),u=null}return i=zn(b,l,i,p),i.elementType=a,i.type=u,i.lanes=g,i}function Qs(a,i,l,u){return a=zn(7,a,u,i),a.lanes=l,a}function Dp(a,i,l){return a=zn(6,a,null,i),a.lanes=l,a}function Ky(a){var i=zn(18,null,null,0);return i.stateNode=a,i}function Ap(a,i,l){return i=zn(4,a.children!==null?a.children:[],a.key,i),i.lanes=l,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Xy=new WeakMap;function lr(a,i){if(typeof a=="object"&&a!==null){var l=Xy.get(a);return l!==void 0?l:(i={value:a,source:i,stack:Ns(i)},Xy.set(a,i),i)}return{value:a,source:i,stack:Ns(i)}}var Qo=[],Ko=0,Ed=null,bc=0,cr=[],ur=0,Mi=null,ca=1,ua="";function Ha(a,i){Qo[Ko++]=bc,Qo[Ko++]=Ed,Ed=a,bc=i}function $y(a,i,l){cr[ur++]=ca,cr[ur++]=ua,cr[ur++]=Mi,Mi=a;var u=ca;a=ua;var p=32-mt(u)-1;u&=~(1<<p),l+=1;var g=32-mt(i)+p;if(30<g){var b=p-p%5;g=(u&(1<<b)-1).toString(32),u>>=b,p-=b,ca=1<<32-mt(i)+p|l<<p|u,ua=g+a}else ca=1<<g|l<<p|u,ua=a}function Np(a){a.return!==null&&(Ha(a,1),$y(a,1,0))}function Rp(a){for(;a===Ed;)Ed=Qo[--Ko],Qo[Ko]=null,bc=Qo[--Ko],Qo[Ko]=null;for(;a===Mi;)Mi=cr[--ur],cr[ur]=null,ua=cr[--ur],cr[ur]=null,ca=cr[--ur],cr[ur]=null}function Zy(a,i){cr[ur++]=ca,cr[ur++]=ua,cr[ur++]=Mi,ca=i.id,ua=i.overflow,Mi=a}var rn=null,ht=null,qe=!1,ji=null,dr=!1,kp=Error(n(519));function Oi(a){var i=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ec(lr(i,a)),kp}function Jy(a){var i=a.stateNode,l=a.type,u=a.memoizedProps;switch(i[Vt]=a,i[Zt]=u,l){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(l=0;l<qc.length;l++)Oe(qc[l],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),td(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),Ci(i,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||g1(i.textContent,l)?(u.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),u.onScroll!=null&&Oe("scroll",i),u.onScrollEnd!=null&&Oe("scrollend",i),u.onClick!=null&&(i.onclick=Tr),i=!0):i=!1,i||Oi(a,!0)}function e0(a){for(rn=a.return;rn;)switch(rn.tag){case 5:case 31:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:rn=rn.return}}function Xo(a){if(a!==rn)return!1;if(!qe)return e0(a),qe=!0,!1;var i=a.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||Km(a.type,a.memoizedProps)),l=!l),l&&ht&&Oi(a),e0(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));ht=S1(a)}else if(i===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));ht=S1(a)}else i===27?(i=ht,Ki(a.type)?(a=eg,eg=null,ht=a):ht=i):ht=rn?fr(a.stateNode.nextSibling):null;return!0}function Ks(){ht=rn=null,qe=!1}function Ip(){var a=ji;return a!==null&&(In===null?In=a:In.push.apply(In,a),ji=null),a}function Ec(a){ji===null?ji=[a]:ji.push(a)}var Mp=Ie(null),Xs=null,qa=null;function Pi(a,i,l){be(Mp,i._currentValue),i._currentValue=l}function Ya(a){a._currentValue=Mp.current,le(Mp)}function jp(a,i,l){for(;a!==null;){var u=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),a===l)break;a=a.return}}function Op(a,i,l,u){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var g=p.dependencies;if(g!==null){var b=p.child;g=g.firstContext;e:for(;g!==null;){var D=g;g=p;for(var V=0;V<i.length;V++)if(D.context===i[V]){g.lanes|=l,D=g.alternate,D!==null&&(D.lanes|=l),jp(g.return,l,a),u||(b=null);break e}g=D.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(n(341));b.lanes|=l,g=b.alternate,g!==null&&(g.lanes|=l),jp(b,l,a),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===a){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function $o(a,i,l,u){a=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var D=p.type;Fn(p.pendingProps.value,b.value)||(a!==null?a.push(D):a=[D])}}else if(p===Cn.current){if(b=p.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(Kc):a=[Kc])}p=p.return}a!==null&&Op(i,a,l,u),i.flags|=262144}function xd(a){for(a=a.firstContext;a!==null;){if(!Fn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function $s(a){Xs=a,qa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function an(a){return t0(Xs,a)}function Td(a,i){return Xs===null&&$s(a),t0(a,i)}function t0(a,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},qa===null){if(a===null)throw Error(n(308));qa=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else qa=qa.next=i;return l}var iS=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(l,u){a.push(u)}};this.abort=function(){i.aborted=!0,a.forEach(function(l){return l()})}},sS=r.unstable_scheduleCallback,oS=r.unstable_NormalPriority,zt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pp(){return{controller:new iS,data:new Map,refCount:0}}function xc(a){a.refCount--,a.refCount===0&&sS(oS,function(){a.controller.abort()})}var Tc=null,Lp=0,Zo=0,Jo=null;function lS(a,i){if(Tc===null){var l=Tc=[];Lp=0,Zo=Fm(),Jo={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Lp++,i.then(n0,n0),i}function n0(){if(--Lp===0&&Tc!==null){Jo!==null&&(Jo.status="fulfilled");var a=Tc;Tc=null,Zo=0,Jo=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function cS(a,i){var l=[],u={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return a.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),u}var r0=U.S;U.S=function(a,i){F_=$t(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&lS(a,i),r0!==null&&r0(a,i)};var Zs=Ie(null);function Vp(){var a=Zs.current;return a!==null?a:ut.pooledCache}function Sd(a,i){i===null?be(Zs,Zs.current):be(Zs,i.pool)}function a0(){var a=Vp();return a===null?null:{parent:zt._currentValue,pool:a}}var el=Error(n(460)),Up=Error(n(474)),Cd=Error(n(542)),Dd={then:function(){}};function i0(a){return a=a.status,a==="fulfilled"||a==="rejected"}function s0(a,i,l){switch(l=a[l],l===void 0?a.push(i):l!==i&&(i.then(Tr,Tr),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,l0(a),a;default:if(typeof i.status=="string")i.then(Tr,Tr);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=i,a.status="pending",a.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,l0(a),a}throw eo=i,el}}function Js(a){try{var i=a._init;return i(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(eo=l,el):l}}var eo=null;function o0(){if(eo===null)throw Error(n(459));var a=eo;return eo=null,a}function l0(a){if(a===el||a===Cd)throw Error(n(483))}var tl=null,Sc=0;function Ad(a){var i=Sc;return Sc+=1,tl===null&&(tl=[]),s0(tl,a,i)}function Cc(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function Nd(a,i){throw i.$$typeof===E?Error(n(525)):(a=Object.prototype.toString.call(i),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function c0(a){function i(H,F){if(a){var G=H.deletions;G===null?(H.deletions=[F],H.flags|=16):G.push(F)}}function l(H,F){if(!a)return null;for(;F!==null;)i(H,F),F=F.sibling;return null}function u(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function p(H,F){return H=Ba(H,F),H.index=0,H.sibling=null,H}function g(H,F,G){return H.index=G,a?(G=H.alternate,G!==null?(G=G.index,G<F?(H.flags|=67108866,F):G):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function b(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function D(H,F,G,re){return F===null||F.tag!==6?(F=Dp(G,H.mode,re),F.return=H,F):(F=p(F,G),F.return=H,F)}function V(H,F,G,re){var Ee=G.type;return Ee===L?ne(H,F,G.props.children,re,G.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===C&&Js(Ee)===F.type)?(F=p(F,G.props),Cc(F,G),F.return=H,F):(F=bd(G.type,G.key,G.props,null,H.mode,re),Cc(F,G),F.return=H,F)}function W(H,F,G,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==G.containerInfo||F.stateNode.implementation!==G.implementation?(F=Ap(G,H.mode,re),F.return=H,F):(F=p(F,G.children||[]),F.return=H,F)}function ne(H,F,G,re,Ee){return F===null||F.tag!==7?(F=Qs(G,H.mode,re,Ee),F.return=H,F):(F=p(F,G),F.return=H,F)}function ie(H,F,G){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Dp(""+F,H.mode,G),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return G=bd(F.type,F.key,F.props,null,H.mode,G),Cc(G,F),G.return=H,G;case k:return F=Ap(F,H.mode,G),F.return=H,F;case C:return F=Js(F),ie(H,F,G)}if(fe(F)||P(F))return F=Qs(F,H.mode,G,null),F.return=H,F;if(typeof F.then=="function")return ie(H,Ad(F),G);if(F.$$typeof===B)return ie(H,Td(H,F),G);Nd(H,F)}return null}function K(H,F,G,re){var Ee=F!==null?F.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ee!==null?null:D(H,F,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case S:return G.key===Ee?V(H,F,G,re):null;case k:return G.key===Ee?W(H,F,G,re):null;case C:return G=Js(G),K(H,F,G,re)}if(fe(G)||P(G))return Ee!==null?null:ne(H,F,G,re,null);if(typeof G.then=="function")return K(H,F,Ad(G),re);if(G.$$typeof===B)return K(H,F,Td(H,G),re);Nd(H,G)}return null}function ee(H,F,G,re,Ee){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(G)||null,D(F,H,""+re,Ee);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case S:return H=H.get(re.key===null?G:re.key)||null,V(F,H,re,Ee);case k:return H=H.get(re.key===null?G:re.key)||null,W(F,H,re,Ee);case C:return re=Js(re),ee(H,F,G,re,Ee)}if(fe(re)||P(re))return H=H.get(G)||null,ne(F,H,re,Ee,null);if(typeof re.then=="function")return ee(H,F,G,Ad(re),Ee);if(re.$$typeof===B)return ee(H,F,G,Td(F,re),Ee);Nd(F,re)}return null}function ve(H,F,G,re){for(var Ee=null,We=null,_e=F,Me=F=0,Ue=null;_e!==null&&Me<G.length;Me++){_e.index>Me?(Ue=_e,_e=null):Ue=_e.sibling;var Qe=K(H,_e,G[Me],re);if(Qe===null){_e===null&&(_e=Ue);break}a&&_e&&Qe.alternate===null&&i(H,_e),F=g(Qe,F,Me),We===null?Ee=Qe:We.sibling=Qe,We=Qe,_e=Ue}if(Me===G.length)return l(H,_e),qe&&Ha(H,Me),Ee;if(_e===null){for(;Me<G.length;Me++)_e=ie(H,G[Me],re),_e!==null&&(F=g(_e,F,Me),We===null?Ee=_e:We.sibling=_e,We=_e);return qe&&Ha(H,Me),Ee}for(_e=u(_e);Me<G.length;Me++)Ue=ee(_e,H,Me,G[Me],re),Ue!==null&&(a&&Ue.alternate!==null&&_e.delete(Ue.key===null?Me:Ue.key),F=g(Ue,F,Me),We===null?Ee=Ue:We.sibling=Ue,We=Ue);return a&&_e.forEach(function(es){return i(H,es)}),qe&&Ha(H,Me),Ee}function Te(H,F,G,re){if(G==null)throw Error(n(151));for(var Ee=null,We=null,_e=F,Me=F=0,Ue=null,Qe=G.next();_e!==null&&!Qe.done;Me++,Qe=G.next()){_e.index>Me?(Ue=_e,_e=null):Ue=_e.sibling;var es=K(H,_e,Qe.value,re);if(es===null){_e===null&&(_e=Ue);break}a&&_e&&es.alternate===null&&i(H,_e),F=g(es,F,Me),We===null?Ee=es:We.sibling=es,We=es,_e=Ue}if(Qe.done)return l(H,_e),qe&&Ha(H,Me),Ee;if(_e===null){for(;!Qe.done;Me++,Qe=G.next())Qe=ie(H,Qe.value,re),Qe!==null&&(F=g(Qe,F,Me),We===null?Ee=Qe:We.sibling=Qe,We=Qe);return qe&&Ha(H,Me),Ee}for(_e=u(_e);!Qe.done;Me++,Qe=G.next())Qe=ee(_e,H,Me,Qe.value,re),Qe!==null&&(a&&Qe.alternate!==null&&_e.delete(Qe.key===null?Me:Qe.key),F=g(Qe,F,Me),We===null?Ee=Qe:We.sibling=Qe,We=Qe);return a&&_e.forEach(function(wC){return i(H,wC)}),qe&&Ha(H,Me),Ee}function ct(H,F,G,re){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case S:e:{for(var Ee=G.key;F!==null;){if(F.key===Ee){if(Ee=G.type,Ee===L){if(F.tag===7){l(H,F.sibling),re=p(F,G.props.children),re.return=H,H=re;break e}}else if(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===C&&Js(Ee)===F.type){l(H,F.sibling),re=p(F,G.props),Cc(re,G),re.return=H,H=re;break e}l(H,F);break}else i(H,F);F=F.sibling}G.type===L?(re=Qs(G.props.children,H.mode,re,G.key),re.return=H,H=re):(re=bd(G.type,G.key,G.props,null,H.mode,re),Cc(re,G),re.return=H,H=re)}return b(H);case k:e:{for(Ee=G.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===G.containerInfo&&F.stateNode.implementation===G.implementation){l(H,F.sibling),re=p(F,G.children||[]),re.return=H,H=re;break e}else{l(H,F);break}else i(H,F);F=F.sibling}re=Ap(G,H.mode,re),re.return=H,H=re}return b(H);case C:return G=Js(G),ct(H,F,G,re)}if(fe(G))return ve(H,F,G,re);if(P(G)){if(Ee=P(G),typeof Ee!="function")throw Error(n(150));return G=Ee.call(G),Te(H,F,G,re)}if(typeof G.then=="function")return ct(H,F,Ad(G),re);if(G.$$typeof===B)return ct(H,F,Td(H,G),re);Nd(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,F!==null&&F.tag===6?(l(H,F.sibling),re=p(F,G),re.return=H,H=re):(l(H,F),re=Dp(G,H.mode,re),re.return=H,H=re),b(H)):l(H,F)}return function(H,F,G,re){try{Sc=0;var Ee=ct(H,F,G,re);return tl=null,Ee}catch(_e){if(_e===el||_e===Cd)throw _e;var We=zn(29,_e,null,H.mode);return We.lanes=re,We.return=H,We}finally{}}}var to=c0(!0),u0=c0(!1),Li=!1;function Fp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zp(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Vi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ui(a,i,l){var u=a.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=wd(a),Wy(a,null,l),i}return _d(a,u,i,l),wd(a)}function Dc(a,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,ec(a,l)}}function Bp(a,i){var l=a.updateQueue,u=a.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=b:g=g.next=b,l=l.next}while(l!==null);g===null?p=g=i:g=g.next=i}else p=g=i;l={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=i:a.next=i,l.lastBaseUpdate=i}var Hp=!1;function Ac(){if(Hp){var a=Jo;if(a!==null)throw a}}function Nc(a,i,l,u){Hp=!1;var p=a.updateQueue;Li=!1;var g=p.firstBaseUpdate,b=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var V=D,W=V.next;V.next=null,b===null?g=W:b.next=W,b=V;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==b&&(D===null?ne.firstBaseUpdate=W:D.next=W,ne.lastBaseUpdate=V))}if(g!==null){var ie=p.baseState;b=0,ne=W=V=null,D=g;do{var K=D.lane&-536870913,ee=K!==D.lane;if(ee?(Ve&K)===K:(u&K)===K){K!==0&&K===Zo&&(Hp=!0),ne!==null&&(ne=ne.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ve=a,Te=D;K=i;var ct=l;switch(Te.tag){case 1:if(ve=Te.payload,typeof ve=="function"){ie=ve.call(ct,ie,K);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Te.payload,K=typeof ve=="function"?ve.call(ct,ie,K):ve,K==null)break e;ie=w({},ie,K);break e;case 2:Li=!0}}K=D.callback,K!==null&&(a.flags|=64,ee&&(a.flags|=8192),ee=p.callbacks,ee===null?p.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(W=ne=ee,V=ie):ne=ne.next=ee,b|=K;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;ee=D,D=ee.next,ee.next=null,p.lastBaseUpdate=ee,p.shared.pending=null}}while(!0);ne===null&&(V=ie),p.baseState=V,p.firstBaseUpdate=W,p.lastBaseUpdate=ne,g===null&&(p.shared.lanes=0),qi|=b,a.lanes=b,a.memoizedState=ie}}function d0(a,i){if(typeof a!="function")throw Error(n(191,a));a.call(i)}function h0(a,i){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)d0(l[a],i)}var nl=Ie(null),Rd=Ie(0);function f0(a,i){a=ei,be(Rd,a),be(nl,i),ei=a|i.baseLanes}function qp(){be(Rd,ei),be(nl,nl.current)}function Yp(){ei=Rd.current,le(nl),le(Rd)}var Bn=Ie(null),hr=null;function Fi(a){var i=a.alternate;be(Nt,Nt.current&1),be(Bn,a),hr===null&&(i===null||nl.current!==null||i.memoizedState!==null)&&(hr=a)}function Gp(a){be(Nt,Nt.current),be(Bn,a),hr===null&&(hr=a)}function p0(a){a.tag===22?(be(Nt,Nt.current),be(Bn,a),hr===null&&(hr=a)):zi()}function zi(){be(Nt,Nt.current),be(Bn,Bn.current)}function Hn(a){le(Bn),hr===a&&(hr=null),le(Nt)}var Nt=Ie(0);function kd(a){for(var i=a;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Zm(l)||Jm(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ga=0,ke=null,ot=null,Bt=null,Id=!1,rl=!1,no=!1,Md=0,Rc=0,al=null,uS=0;function bt(){throw Error(n(321))}function Wp(a,i){if(i===null)return!1;for(var l=0;l<i.length&&l<a.length;l++)if(!Fn(a[l],i[l]))return!1;return!0}function Qp(a,i,l,u,p,g){return Ga=g,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=a===null||a.memoizedState===null?$0:cm,no=!1,g=l(u,p),no=!1,rl&&(g=g0(i,l,u,p)),m0(a),g}function m0(a){U.H=Mc;var i=ot!==null&&ot.next!==null;if(Ga=0,Bt=ot=ke=null,Id=!1,Rc=0,al=null,i)throw Error(n(300));a===null||Ht||(a=a.dependencies,a!==null&&xd(a)&&(Ht=!0))}function g0(a,i,l,u){ke=a;var p=0;do{if(rl&&(al=null),Rc=0,rl=!1,25<=p)throw Error(n(301));if(p+=1,Bt=ot=null,a.updateQueue!=null){var g=a.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}U.H=Z0,g=i(l,u)}while(rl);return g}function dS(){var a=U.H,i=a.useState()[0];return i=typeof i.then=="function"?kc(i):i,a=a.useState()[0],(ot!==null?ot.memoizedState:null)!==a&&(ke.flags|=1024),i}function Kp(){var a=Md!==0;return Md=0,a}function Xp(a,i,l){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~l}function $p(a){if(Id){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Id=!1}Ga=0,Bt=ot=ke=null,rl=!1,Rc=Md=0,al=null}function En(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ke.memoizedState=Bt=a:Bt=Bt.next=a,Bt}function Rt(){if(ot===null){var a=ke.alternate;a=a!==null?a.memoizedState:null}else a=ot.next;var i=Bt===null?ke.memoizedState:Bt.next;if(i!==null)Bt=i,ot=a;else{if(a===null)throw ke.alternate===null?Error(n(467)):Error(n(310));ot=a,a={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Bt===null?ke.memoizedState=Bt=a:Bt=Bt.next=a}return Bt}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kc(a){var i=Rc;return Rc+=1,al===null&&(al=[]),a=s0(al,a,i),i=ke,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?$0:cm),a}function Od(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return kc(a);if(a.$$typeof===B)return an(a)}throw Error(n(438,String(a)))}function Zp(a){var i=null,l=ke.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=jd(),ke.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(a),u=0;u<a;u++)l[u]=M;return i.index++,l}function Wa(a,i){return typeof i=="function"?i(a):i}function Pd(a){var i=Rt();return Jp(i,ot,a)}function Jp(a,i,l){var u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var p=a.baseQueue,g=u.pending;if(g!==null){if(p!==null){var b=p.next;p.next=g.next,g.next=b}i.baseQueue=p=g,u.pending=null}if(g=a.baseState,p===null)a.memoizedState=g;else{i=p.next;var D=b=null,V=null,W=i,ne=!1;do{var ie=W.lane&-536870913;if(ie!==W.lane?(Ve&ie)===ie:(Ga&ie)===ie){var K=W.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ie===Zo&&(ne=!0);else if((Ga&K)===K){W=W.next,K===Zo&&(ne=!0);continue}else ie={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},V===null?(D=V=ie,b=g):V=V.next=ie,ke.lanes|=K,qi|=K;ie=W.action,no&&l(g,ie),g=W.hasEagerState?W.eagerState:l(g,ie)}else K={lane:ie,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},V===null?(D=V=K,b=g):V=V.next=K,ke.lanes|=ie,qi|=ie;W=W.next}while(W!==null&&W!==i);if(V===null?b=g:V.next=D,!Fn(g,a.memoizedState)&&(Ht=!0,ne&&(l=Jo,l!==null)))throw l;a.memoizedState=g,a.baseState=b,a.baseQueue=V,u.lastRenderedState=g}return p===null&&(u.lanes=0),[a.memoizedState,u.dispatch]}function em(a){var i=Rt(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var u=l.dispatch,p=l.pending,g=i.memoizedState;if(p!==null){l.pending=null;var b=p=p.next;do g=a(g,b.action),b=b.next;while(b!==p);Fn(g,i.memoizedState)||(Ht=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,u]}function v0(a,i,l){var u=ke,p=Rt(),g=qe;if(g){if(l===void 0)throw Error(n(407));l=l()}else l=i();var b=!Fn((ot||p).memoizedState,l);if(b&&(p.memoizedState=l,Ht=!0),p=p.queue,rm(w0.bind(null,u,p,a),[a]),p.getSnapshot!==i||b||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,il(9,{destroy:void 0},_0.bind(null,u,p,l,i),null),ut===null)throw Error(n(349));g||(Ga&127)!==0||y0(u,i,l)}return l}function y0(a,i,l){a.flags|=16384,a={getSnapshot:i,value:l},i=ke.updateQueue,i===null?(i=jd(),ke.updateQueue=i,i.stores=[a]):(l=i.stores,l===null?i.stores=[a]:l.push(a))}function _0(a,i,l,u){i.value=l,i.getSnapshot=u,b0(i)&&E0(a)}function w0(a,i,l){return l(function(){b0(i)&&E0(a)})}function b0(a){var i=a.getSnapshot;a=a.value;try{var l=i();return!Fn(a,l)}catch{return!0}}function E0(a){var i=Ws(a,2);i!==null&&Mn(i,a,2)}function tm(a){var i=En();if(typeof a=="function"){var l=a;if(a=l(),no){wn(!0);try{l()}finally{wn(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:a},i}function x0(a,i,l,u){return a.baseState=l,Jp(a,ot,typeof u=="function"?u:Wa)}function hS(a,i,l,u,p){if(Ud(a))throw Error(n(485));if(a=i.action,a!==null){var g={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};U.T!==null?l(!0):g.isTransition=!1,u(g),l=i.pending,l===null?(g.next=i.pending=g,T0(i,g)):(g.next=l.next,i.pending=l.next=g)}}function T0(a,i){var l=i.action,u=i.payload,p=a.state;if(i.isTransition){var g=U.T,b={};U.T=b;try{var D=l(p,u),V=U.S;V!==null&&V(b,D),S0(a,i,D)}catch(W){nm(a,i,W)}finally{g!==null&&b.types!==null&&(g.types=b.types),U.T=g}}else try{g=l(p,u),S0(a,i,g)}catch(W){nm(a,i,W)}}function S0(a,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){C0(a,i,u)},function(u){return nm(a,i,u)}):C0(a,i,l)}function C0(a,i,l){i.status="fulfilled",i.value=l,D0(i),a.state=l,i=a.pending,i!==null&&(l=i.next,l===i?a.pending=null:(l=l.next,i.next=l,T0(a,l)))}function nm(a,i,l){var u=a.pending;if(a.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,D0(i),i=i.next;while(i!==u)}a.action=null}function D0(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function A0(a,i){return i}function N0(a,i){if(qe){var l=ut.formState;if(l!==null){e:{var u=ke;if(qe){if(ht){t:{for(var p=ht,g=dr;p.nodeType!==8;){if(!g){p=null;break t}if(p=fr(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){ht=fr(p.nextSibling),u=p.data==="F!";break e}}Oi(u)}u=!1}u&&(i=l[0])}}return l=En(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:i},l.queue=u,l=Q0.bind(null,ke,u),u.dispatch=l,u=tm(!1),g=lm.bind(null,ke,!1,u.queue),u=En(),p={state:i,dispatch:null,action:a,pending:null},u.queue=p,l=hS.bind(null,ke,p,g,l),p.dispatch=l,u.memoizedState=a,[i,l,!1]}function R0(a){var i=Rt();return k0(i,ot,a)}function k0(a,i,l){if(i=Jp(a,i,A0)[0],a=Pd(Wa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=kc(i)}catch(b){throw b===el?Cd:b}else u=i;i=Rt();var p=i.queue,g=p.dispatch;return l!==i.memoizedState&&(ke.flags|=2048,il(9,{destroy:void 0},fS.bind(null,p,l),null)),[u,g,a]}function fS(a,i){a.action=i}function I0(a){var i=Rt(),l=ot;if(l!==null)return k0(i,l,a);Rt(),i=i.memoizedState,l=Rt();var u=l.queue.dispatch;return l.memoizedState=a,[i,u,!1]}function il(a,i,l,u){return a={tag:a,create:l,deps:u,inst:i,next:null},i=ke.updateQueue,i===null&&(i=jd(),ke.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=a.next=a:(u=l.next,l.next=a,a.next=u,i.lastEffect=a),a}function M0(){return Rt().memoizedState}function Ld(a,i,l,u){var p=En();ke.flags|=a,p.memoizedState=il(1|i,{destroy:void 0},l,u===void 0?null:u)}function Vd(a,i,l,u){var p=Rt();u=u===void 0?null:u;var g=p.memoizedState.inst;ot!==null&&u!==null&&Wp(u,ot.memoizedState.deps)?p.memoizedState=il(i,g,l,u):(ke.flags|=a,p.memoizedState=il(1|i,g,l,u))}function j0(a,i){Ld(8390656,8,a,i)}function rm(a,i){Vd(2048,8,a,i)}function pS(a){ke.flags|=4;var i=ke.updateQueue;if(i===null)i=jd(),ke.updateQueue=i,i.events=[a];else{var l=i.events;l===null?i.events=[a]:l.push(a)}}function O0(a){var i=Rt().memoizedState;return pS({ref:i,nextImpl:a}),function(){if(($e&2)!==0)throw Error(n(440));return i.impl.apply(void 0,arguments)}}function P0(a,i){return Vd(4,2,a,i)}function L0(a,i){return Vd(4,4,a,i)}function V0(a,i){if(typeof i=="function"){a=a();var l=i(a);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function U0(a,i,l){l=l!=null?l.concat([a]):null,Vd(4,4,V0.bind(null,i,a),l)}function am(){}function F0(a,i){var l=Rt();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Wp(i,u[1])?u[0]:(l.memoizedState=[a,i],a)}function z0(a,i){var l=Rt();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Wp(i,u[1]))return u[0];if(u=a(),no){wn(!0);try{a()}finally{wn(!1)}}return l.memoizedState=[u,i],u}function im(a,i,l){return l===void 0||(Ga&1073741824)!==0&&(Ve&261930)===0?a.memoizedState=i:(a.memoizedState=l,a=B_(),ke.lanes|=a,qi|=a,l)}function B0(a,i,l,u){return Fn(l,i)?l:nl.current!==null?(a=im(a,l,u),Fn(a,i)||(Ht=!0),a):(Ga&42)===0||(Ga&1073741824)!==0&&(Ve&261930)===0?(Ht=!0,a.memoizedState=l):(a=B_(),ke.lanes|=a,qi|=a,i)}function H0(a,i,l,u,p){var g=$.p;$.p=g!==0&&8>g?g:8;var b=U.T,D={};U.T=D,lm(a,!1,i,l);try{var V=p(),W=U.S;if(W!==null&&W(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ne=cS(V,u);Ic(a,i,ne,Gn(a))}else Ic(a,i,u,Gn(a))}catch(ie){Ic(a,i,{then:function(){},status:"rejected",reason:ie},Gn())}finally{$.p=g,b!==null&&D.types!==null&&(b.types=D.types),U.T=b}}function mS(){}function sm(a,i,l,u){if(a.tag!==5)throw Error(n(476));var p=q0(a).queue;H0(a,p,i,Z,l===null?mS:function(){return Y0(a),l(u)})}function q0(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:Z},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:l},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function Y0(a){var i=q0(a);i.next===null&&(i=a.alternate.memoizedState),Ic(a,i.next.queue,{},Gn())}function om(){return an(Kc)}function G0(){return Rt().memoizedState}function W0(){return Rt().memoizedState}function gS(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var l=Gn();a=Vi(l);var u=Ui(i,a,l);u!==null&&(Mn(u,i,l),Dc(u,i,l)),i={cache:Pp()},a.payload=i;return}i=i.return}}function vS(a,i,l){var u=Gn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ud(a)?K0(i,l):(l=Sp(a,i,l,u),l!==null&&(Mn(l,a,u),X0(l,i,u)))}function Q0(a,i,l){var u=Gn();Ic(a,i,l,u)}function Ic(a,i,l,u){var p={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ud(a))K0(i,p);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,D=g(b,l);if(p.hasEagerState=!0,p.eagerState=D,Fn(D,b))return _d(a,i,p,0),ut===null&&yd(),!1}catch{}finally{}if(l=Sp(a,i,p,u),l!==null)return Mn(l,a,u),X0(l,i,u),!0}return!1}function lm(a,i,l,u){if(u={lane:2,revertLane:Fm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ud(a)){if(i)throw Error(n(479))}else i=Sp(a,l,u,2),i!==null&&Mn(i,a,2)}function Ud(a){var i=a.alternate;return a===ke||i!==null&&i===ke}function K0(a,i){rl=Id=!0;var l=a.pending;l===null?i.next=i:(i.next=l.next,l.next=i),a.pending=i}function X0(a,i,l){if((l&4194048)!==0){var u=i.lanes;u&=a.pendingLanes,l|=u,i.lanes=l,ec(a,l)}}var Mc={readContext:an,use:Od,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};Mc.useEffectEvent=bt;var $0={readContext:an,use:Od,useCallback:function(a,i){return En().memoizedState=[a,i===void 0?null:i],a},useContext:an,useEffect:j0,useImperativeHandle:function(a,i,l){l=l!=null?l.concat([a]):null,Ld(4194308,4,V0.bind(null,i,a),l)},useLayoutEffect:function(a,i){return Ld(4194308,4,a,i)},useInsertionEffect:function(a,i){Ld(4,2,a,i)},useMemo:function(a,i){var l=En();i=i===void 0?null:i;var u=a();if(no){wn(!0);try{a()}finally{wn(!1)}}return l.memoizedState=[u,i],u},useReducer:function(a,i,l){var u=En();if(l!==void 0){var p=l(i);if(no){wn(!0);try{l(i)}finally{wn(!1)}}}else p=i;return u.memoizedState=u.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},u.queue=a,a=a.dispatch=vS.bind(null,ke,a),[u.memoizedState,a]},useRef:function(a){var i=En();return a={current:a},i.memoizedState=a},useState:function(a){a=tm(a);var i=a.queue,l=Q0.bind(null,ke,i);return i.dispatch=l,[a.memoizedState,l]},useDebugValue:am,useDeferredValue:function(a,i){var l=En();return im(l,a,i)},useTransition:function(){var a=tm(!1);return a=H0.bind(null,ke,a.queue,!0,!1),En().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,l){var u=ke,p=En();if(qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),ut===null)throw Error(n(349));(Ve&127)!==0||y0(u,i,l)}p.memoizedState=l;var g={value:l,getSnapshot:i};return p.queue=g,j0(w0.bind(null,u,g,a),[a]),u.flags|=2048,il(9,{destroy:void 0},_0.bind(null,u,g,l,i),null),l},useId:function(){var a=En(),i=ut.identifierPrefix;if(qe){var l=ua,u=ca;l=(u&~(1<<32-mt(u)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Md++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=uS++,i="_"+i+"r_"+l.toString(32)+"_";return a.memoizedState=i},useHostTransitionStatus:om,useFormState:N0,useActionState:N0,useOptimistic:function(a){var i=En();i.memoizedState=i.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=lm.bind(null,ke,!0,l),l.dispatch=i,[a,i]},useMemoCache:Zp,useCacheRefresh:function(){return En().memoizedState=gS.bind(null,ke)},useEffectEvent:function(a){var i=En(),l={impl:a};return i.memoizedState=l,function(){if(($e&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},cm={readContext:an,use:Od,useCallback:F0,useContext:an,useEffect:rm,useImperativeHandle:U0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:z0,useReducer:Pd,useRef:M0,useState:function(){return Pd(Wa)},useDebugValue:am,useDeferredValue:function(a,i){var l=Rt();return B0(l,ot.memoizedState,a,i)},useTransition:function(){var a=Pd(Wa)[0],i=Rt().memoizedState;return[typeof a=="boolean"?a:kc(a),i]},useSyncExternalStore:v0,useId:G0,useHostTransitionStatus:om,useFormState:R0,useActionState:R0,useOptimistic:function(a,i){var l=Rt();return x0(l,ot,a,i)},useMemoCache:Zp,useCacheRefresh:W0};cm.useEffectEvent=O0;var Z0={readContext:an,use:Od,useCallback:F0,useContext:an,useEffect:rm,useImperativeHandle:U0,useInsertionEffect:P0,useLayoutEffect:L0,useMemo:z0,useReducer:em,useRef:M0,useState:function(){return em(Wa)},useDebugValue:am,useDeferredValue:function(a,i){var l=Rt();return ot===null?im(l,a,i):B0(l,ot.memoizedState,a,i)},useTransition:function(){var a=em(Wa)[0],i=Rt().memoizedState;return[typeof a=="boolean"?a:kc(a),i]},useSyncExternalStore:v0,useId:G0,useHostTransitionStatus:om,useFormState:I0,useActionState:I0,useOptimistic:function(a,i){var l=Rt();return ot!==null?x0(l,ot,a,i):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:Zp,useCacheRefresh:W0};Z0.useEffectEvent=O0;function um(a,i,l,u){i=a.memoizedState,l=l(u,i),l=l==null?i:w({},i,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var dm={enqueueSetState:function(a,i,l){a=a._reactInternals;var u=Gn(),p=Vi(u);p.payload=i,l!=null&&(p.callback=l),i=Ui(a,p,u),i!==null&&(Mn(i,a,u),Dc(i,a,u))},enqueueReplaceState:function(a,i,l){a=a._reactInternals;var u=Gn(),p=Vi(u);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=Ui(a,p,u),i!==null&&(Mn(i,a,u),Dc(i,a,u))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var l=Gn(),u=Vi(l);u.tag=2,i!=null&&(u.callback=i),i=Ui(a,u,l),i!==null&&(Mn(i,a,l),Dc(i,a,l))}};function J0(a,i,l,u,p,g,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(u,g,b):i.prototype&&i.prototype.isPureReactComponent?!_c(l,u)||!_c(p,g):!0}function e_(a,i,l,u){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==a&&dm.enqueueReplaceState(i,i.state,null)}function ro(a,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(a=a.defaultProps){l===i&&(l=w({},l));for(var p in a)l[p]===void 0&&(l[p]=a[p])}return l}function t_(a){vd(a)}function n_(a){console.error(a)}function r_(a){vd(a)}function Fd(a,i){try{var l=a.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function a_(a,i,l){try{var u=a.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function hm(a,i,l){return l=Vi(l),l.tag=3,l.payload={element:null},l.callback=function(){Fd(a,i)},l}function i_(a){return a=Vi(a),a.tag=3,a}function s_(a,i,l,u){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;a.payload=function(){return p(g)},a.callback=function(){a_(i,l,u)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(a.callback=function(){a_(i,l,u),typeof p!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function yS(a,i,l,u,p){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&$o(i,l,p,!0),l=Bn.current,l!==null){switch(l.tag){case 31:case 13:return hr===null?Zd():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=p,u===Dd?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Lm(a,u,p)),!1;case 22:return l.flags|=65536,u===Dd?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Lm(a,u,p)),!1}throw Error(n(435,l.tag))}return Lm(a,u,p),Zd(),!1}if(qe)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==kp&&(a=Error(n(422),{cause:u}),Ec(lr(a,l)))):(u!==kp&&(i=Error(n(423),{cause:u}),Ec(lr(i,l))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,u=lr(u,l),p=hm(a.stateNode,u,p),Bp(a,p),Et!==4&&(Et=2)),!1;var g=Error(n(520),{cause:u});if(g=lr(g,l),zc===null?zc=[g]:zc.push(g),Et!==4&&(Et=2),i===null)return!0;u=lr(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,a=p&-p,l.lanes|=a,a=hm(l.stateNode,u,a),Bp(l,a),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Yi===null||!Yi.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=i_(p),s_(p,a,l,u),Bp(l,p),!1}l=l.return}while(l!==null);return!1}var fm=Error(n(461)),Ht=!1;function sn(a,i,l,u){i.child=a===null?u0(i,null,l,u):to(i,a.child,l,u)}function o_(a,i,l,u,p){l=l.render;var g=i.ref;if("ref"in u){var b={};for(var D in u)D!=="ref"&&(b[D]=u[D])}else b=u;return $s(i),u=Qp(a,i,l,b,g,p),D=Kp(),a!==null&&!Ht?(Xp(a,i,p),Qa(a,i,p)):(qe&&D&&Np(i),i.flags|=1,sn(a,i,u,p),i.child)}function l_(a,i,l,u,p){if(a===null){var g=l.type;return typeof g=="function"&&!Cp(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,c_(a,i,g,u,p)):(a=bd(l.type,null,u,i,i.mode,p),a.ref=i.ref,a.return=i,i.child=a)}if(g=a.child,!bm(a,p)){var b=g.memoizedProps;if(l=l.compare,l=l!==null?l:_c,l(b,u)&&a.ref===i.ref)return Qa(a,i,p)}return i.flags|=1,a=Ba(g,u),a.ref=i.ref,a.return=i,i.child=a}function c_(a,i,l,u,p){if(a!==null){var g=a.memoizedProps;if(_c(g,u)&&a.ref===i.ref)if(Ht=!1,i.pendingProps=u=g,bm(a,p))(a.flags&131072)!==0&&(Ht=!0);else return i.lanes=a.lanes,Qa(a,i,p)}return pm(a,i,l,u,p)}function u_(a,i,l,u){var p=u.children,g=a!==null?a.memoizedState:null;if(a===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,a!==null){for(u=i.child=a.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,i.child=null;return d_(a,i,g,l,u)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&Sd(i,g!==null?g.cachePool:null),g!==null?f0(i,g):qp(),p0(i);else return u=i.lanes=536870912,d_(a,i,g!==null?g.baseLanes|l:l,l,u)}else g!==null?(Sd(i,g.cachePool),f0(i,g),zi(),i.memoizedState=null):(a!==null&&Sd(i,null),qp(),zi());return sn(a,i,p,l),i.child}function jc(a,i){return a!==null&&a.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function d_(a,i,l,u,p){var g=Vp();return g=g===null?null:{parent:zt._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},a!==null&&Sd(i,null),qp(),p0(i),a!==null&&$o(a,i,u,!0),i.childLanes=p,null}function zd(a,i){return i=Hd({mode:i.mode,children:i.children},a.mode),i.ref=a.ref,a.child=i,i.return=a,i}function h_(a,i,l){return to(i,a.child,null,l),a=zd(i,i.pendingProps),a.flags|=2,Hn(i),i.memoizedState=null,a}function _S(a,i,l){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,a===null){if(qe){if(u.mode==="hidden")return a=zd(i,u),i.lanes=536870912,jc(null,a);if(Gp(i),(a=ht)?(a=T1(a,dr),a=a!==null&&a.data==="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:Mi!==null?{id:ca,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},l=Ky(a),l.return=i,i.child=l,rn=i,ht=null)):a=null,a===null)throw Oi(i);return i.lanes=536870912,null}return zd(i,u)}var g=a.memoizedState;if(g!==null){var b=g.dehydrated;if(Gp(i),p)if(i.flags&256)i.flags&=-257,i=h_(a,i,l);else if(i.memoizedState!==null)i.child=a.child,i.flags|=128,i=null;else throw Error(n(558));else if(Ht||$o(a,i,l,!1),p=(l&a.childLanes)!==0,Ht||p){if(u=ut,u!==null&&(b=tc(u,l),b!==0&&b!==g.retryLane))throw g.retryLane=b,Ws(a,b),Mn(u,a,b),fm;Zd(),i=h_(a,i,l)}else a=g.treeContext,ht=fr(b.nextSibling),rn=i,qe=!0,ji=null,dr=!1,a!==null&&Zy(i,a),i=zd(i,u),i.flags|=4096;return i}return a=Ba(a.child,{mode:u.mode,children:u.children}),a.ref=i.ref,i.child=a,a.return=i,a}function Bd(a,i){var l=i.ref;if(l===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(i.flags|=4194816)}}function pm(a,i,l,u,p){return $s(i),l=Qp(a,i,l,u,void 0,p),u=Kp(),a!==null&&!Ht?(Xp(a,i,p),Qa(a,i,p)):(qe&&u&&Np(i),i.flags|=1,sn(a,i,l,p),i.child)}function f_(a,i,l,u,p,g){return $s(i),i.updateQueue=null,l=g0(i,u,l,p),m0(a),u=Kp(),a!==null&&!Ht?(Xp(a,i,g),Qa(a,i,g)):(qe&&u&&Np(i),i.flags|=1,sn(a,i,l,g),i.child)}function p_(a,i,l,u,p){if($s(i),i.stateNode===null){var g=Wo,b=l.contextType;typeof b=="object"&&b!==null&&(g=an(b)),g=new l(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=dm,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Fp(i),b=l.contextType,g.context=typeof b=="object"&&b!==null?an(b):Wo,g.state=i.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(um(i,l,b,u),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&dm.enqueueReplaceState(g,g.state,null),Nc(i,u,g,p),Ac(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(a===null){g=i.stateNode;var D=i.memoizedProps,V=ro(l,D);g.props=V;var W=g.context,ne=l.contextType;b=Wo,typeof ne=="object"&&ne!==null&&(b=an(ne));var ie=l.getDerivedStateFromProps;ne=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(D||W!==b)&&e_(i,g,u,b),Li=!1;var K=i.memoizedState;g.state=K,Nc(i,u,g,p),Ac(),W=i.memoizedState,D||K!==W||Li?(typeof ie=="function"&&(um(i,l,ie,u),W=i.memoizedState),(V=Li||J0(i,l,V,u,K,W,b))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=W),g.props=u,g.state=W,g.context=b,u=V):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,zp(a,i),b=i.memoizedProps,ne=ro(l,b),g.props=ne,ie=i.pendingProps,K=g.context,W=l.contextType,V=Wo,typeof W=="object"&&W!==null&&(V=an(W)),D=l.getDerivedStateFromProps,(W=typeof D=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ie||K!==V)&&e_(i,g,u,V),Li=!1,K=i.memoizedState,g.state=K,Nc(i,u,g,p),Ac();var ee=i.memoizedState;b!==ie||K!==ee||Li||a!==null&&a.dependencies!==null&&xd(a.dependencies)?(typeof D=="function"&&(um(i,l,D,u),ee=i.memoizedState),(ne=Li||J0(i,l,ne,u,K,ee,V)||a!==null&&a.dependencies!==null&&xd(a.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ee,V),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ee,V)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===a.memoizedProps&&K===a.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&K===a.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ee),g.props=u,g.state=ee,g.context=V,u=ne):(typeof g.componentDidUpdate!="function"||b===a.memoizedProps&&K===a.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&K===a.memoizedState||(i.flags|=1024),u=!1)}return g=u,Bd(a,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,a!==null&&u?(i.child=to(i,a.child,null,p),i.child=to(i,null,l,p)):sn(a,i,l,p),i.memoizedState=g.state,a=i.child):a=Qa(a,i,p),a}function m_(a,i,l,u){return Ks(),i.flags|=256,sn(a,i,l,u),i.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(a){return{baseLanes:a,cachePool:a0()}}function vm(a,i,l){return a=a!==null?a.childLanes&~l:0,i&&(a|=Yn),a}function g_(a,i,l){var u=i.pendingProps,p=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=a!==null&&a.memoizedState===null?!1:(Nt.current&2)!==0),b&&(p=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,a===null){if(qe){if(p?Fi(i):zi(),(a=ht)?(a=T1(a,dr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:Mi!==null?{id:ca,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},l=Ky(a),l.return=i,i.child=l,rn=i,ht=null)):a=null,a===null)throw Oi(i);return Jm(a)?i.lanes=32:i.lanes=536870912,null}var D=u.children;return u=u.fallback,p?(zi(),p=i.mode,D=Hd({mode:"hidden",children:D},p),u=Qs(u,p,l,null),D.return=i,u.return=i,D.sibling=u,i.child=D,u=i.child,u.memoizedState=gm(l),u.childLanes=vm(a,b,l),i.memoizedState=mm,jc(null,u)):(Fi(i),ym(i,D))}var V=a.memoizedState;if(V!==null&&(D=V.dehydrated,D!==null)){if(g)i.flags&256?(Fi(i),i.flags&=-257,i=_m(a,i,l)):i.memoizedState!==null?(zi(),i.child=a.child,i.flags|=128,i=null):(zi(),D=u.fallback,p=i.mode,u=Hd({mode:"visible",children:u.children},p),D=Qs(D,p,l,null),D.flags|=2,u.return=i,D.return=i,u.sibling=D,i.child=u,to(i,a.child,null,l),u=i.child,u.memoizedState=gm(l),u.childLanes=vm(a,b,l),i.memoizedState=mm,i=jc(null,u));else if(Fi(i),Jm(D)){if(b=D.nextSibling&&D.nextSibling.dataset,b)var W=b.dgst;b=W,u=Error(n(419)),u.stack="",u.digest=b,Ec({value:u,source:null,stack:null}),i=_m(a,i,l)}else if(Ht||$o(a,i,l,!1),b=(l&a.childLanes)!==0,Ht||b){if(b=ut,b!==null&&(u=tc(b,l),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ws(a,u),Mn(b,a,u),fm;Zm(D)||Zd(),i=_m(a,i,l)}else Zm(D)?(i.flags|=192,i.child=a.child,i=null):(a=V.treeContext,ht=fr(D.nextSibling),rn=i,qe=!0,ji=null,dr=!1,a!==null&&Zy(i,a),i=ym(i,u.children),i.flags|=4096);return i}return p?(zi(),D=u.fallback,p=i.mode,V=a.child,W=V.sibling,u=Ba(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,W!==null?D=Ba(W,D):(D=Qs(D,p,l,null),D.flags|=2),D.return=i,u.return=i,u.sibling=D,i.child=u,jc(null,u),u=i.child,D=a.child.memoizedState,D===null?D=gm(l):(p=D.cachePool,p!==null?(V=zt._currentValue,p=p.parent!==V?{parent:V,pool:V}:p):p=a0(),D={baseLanes:D.baseLanes|l,cachePool:p}),u.memoizedState=D,u.childLanes=vm(a,b,l),i.memoizedState=mm,jc(a.child,u)):(Fi(i),l=a.child,a=l.sibling,l=Ba(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,a!==null&&(b=i.deletions,b===null?(i.deletions=[a],i.flags|=16):b.push(a)),i.child=l,i.memoizedState=null,l)}function ym(a,i){return i=Hd({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function Hd(a,i){return a=zn(22,a,null,i),a.lanes=0,a}function _m(a,i,l){return to(i,a.child,null,l),a=ym(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function v_(a,i,l){a.lanes|=i;var u=a.alternate;u!==null&&(u.lanes|=i),jp(a.return,i,l)}function wm(a,i,l,u,p,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:p,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=l,b.tailMode=p,b.treeForkCount=g)}function y_(a,i,l){var u=i.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var b=Nt.current,D=(b&2)!==0;if(D?(b=b&1|2,i.flags|=128):b&=1,be(Nt,b),sn(a,i,u,l),u=qe?bc:0,!D&&a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&v_(a,l,i);else if(a.tag===19)v_(a,l,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(p){case"forwards":for(l=i.child,p=null;l!==null;)a=l.alternate,a!==null&&kd(a)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),wm(i,!1,p,l,g,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(a=p.alternate,a!==null&&kd(a)===null){i.child=p;break}a=p.sibling,p.sibling=l,l=p,p=a}wm(i,!0,l,null,g,u);break;case"together":wm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Qa(a,i,l){if(a!==null&&(i.dependencies=a.dependencies),qi|=i.lanes,(l&i.childLanes)===0)if(a!==null){if($o(a,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(n(153));if(i.child!==null){for(a=i.child,l=Ba(a,a.pendingProps),i.child=l,l.return=i;a.sibling!==null;)a=a.sibling,l=l.sibling=Ba(a,a.pendingProps),l.return=i;l.sibling=null}return i.child}function bm(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&xd(a)))}function wS(a,i,l){switch(i.tag){case 3:nr(i,i.stateNode.containerInfo),Pi(i,zt,a.memoizedState.cache),Ks();break;case 27:case 5:As(i);break;case 4:nr(i,i.stateNode.containerInfo);break;case 10:Pi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gp(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Fi(i),i.flags|=128,null):(l&i.child.childLanes)!==0?g_(a,i,l):(Fi(i),a=Qa(a,i,l),a!==null?a.sibling:null);Fi(i);break;case 19:var p=(a.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||($o(a,i,l,!1),u=(l&i.childLanes)!==0),p){if(u)return y_(a,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),be(Nt,Nt.current),u)break;return null;case 22:return i.lanes=0,u_(a,i,l,i.pendingProps);case 24:Pi(i,zt,a.memoizedState.cache)}return Qa(a,i,l)}function __(a,i,l){if(a!==null)if(a.memoizedProps!==i.pendingProps)Ht=!0;else{if(!bm(a,l)&&(i.flags&128)===0)return Ht=!1,wS(a,i,l);Ht=(a.flags&131072)!==0}else Ht=!1,qe&&(i.flags&1048576)!==0&&$y(i,bc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(a=Js(i.elementType),i.type=a,typeof a=="function")Cp(a)?(u=ro(a,u),i.tag=1,i=p_(null,i,a,u,l)):(i.tag=0,i=pm(null,i,a,u,l));else{if(a!=null){var p=a.$$typeof;if(p===X){i.tag=11,i=o_(null,i,a,u,l);break e}else if(p===O){i.tag=14,i=l_(null,i,a,u,l);break e}}throw i=de(a)||a,Error(n(306,i,""))}}return i;case 0:return pm(a,i,i.type,i.pendingProps,l);case 1:return u=i.type,p=ro(u,i.pendingProps),p_(a,i,u,p,l);case 3:e:{if(nr(i,i.stateNode.containerInfo),a===null)throw Error(n(387));u=i.pendingProps;var g=i.memoizedState;p=g.element,zp(a,i),Nc(i,u,null,l);var b=i.memoizedState;if(u=b.cache,Pi(i,zt,u),u!==g.cache&&Op(i,[zt],l,!0),Ac(),u=b.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=m_(a,i,u,l);break e}else if(u!==p){p=lr(Error(n(424)),i),Ec(p),i=m_(a,i,u,l);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ht=fr(a.firstChild),rn=i,qe=!0,ji=null,dr=!0,l=u0(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ks(),u===p){i=Qa(a,i,l);break e}sn(a,i,u,l)}i=i.child}return i;case 26:return Bd(a,i),a===null?(l=R1(i.type,null,i.pendingProps,null))?i.memoizedState=l:qe||(l=i.type,a=i.pendingProps,u=ih(fn.current).createElement(l),u[Vt]=i,u[Zt]=a,on(u,l,a),Ut(u),i.stateNode=u):i.memoizedState=R1(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return As(i),a===null&&qe&&(u=i.stateNode=D1(i.type,i.pendingProps,fn.current),rn=i,dr=!0,p=ht,Ki(i.type)?(eg=p,ht=fr(u.firstChild)):ht=p),sn(a,i,i.pendingProps.children,l),Bd(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&qe&&((p=u=ht)&&(u=XS(u,i.type,i.pendingProps,dr),u!==null?(i.stateNode=u,rn=i,ht=fr(u.firstChild),dr=!1,p=!0):p=!1),p||Oi(i)),As(i),p=i.type,g=i.pendingProps,b=a!==null?a.memoizedProps:null,u=g.children,Km(p,g)?u=null:b!==null&&Km(p,b)&&(i.flags|=32),i.memoizedState!==null&&(p=Qp(a,i,dS,null,null,l),Kc._currentValue=p),Bd(a,i),sn(a,i,u,l),i.child;case 6:return a===null&&qe&&((a=l=ht)&&(l=$S(l,i.pendingProps,dr),l!==null?(i.stateNode=l,rn=i,ht=null,a=!0):a=!1),a||Oi(i)),null;case 13:return g_(a,i,l);case 4:return nr(i,i.stateNode.containerInfo),u=i.pendingProps,a===null?i.child=to(i,null,u,l):sn(a,i,u,l),i.child;case 11:return o_(a,i,i.type,i.pendingProps,l);case 7:return sn(a,i,i.pendingProps,l),i.child;case 8:return sn(a,i,i.pendingProps.children,l),i.child;case 12:return sn(a,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,Pi(i,i.type,u.value),sn(a,i,u.children,l),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,$s(i),p=an(p),u=u(p),i.flags|=1,sn(a,i,u,l),i.child;case 14:return l_(a,i,i.type,i.pendingProps,l);case 15:return c_(a,i,i.type,i.pendingProps,l);case 19:return y_(a,i,l);case 31:return _S(a,i,l);case 22:return u_(a,i,l,i.pendingProps);case 24:return $s(i),u=an(zt),a===null?(p=Vp(),p===null&&(p=ut,g=Pp(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),i.memoizedState={parent:u,cache:p},Fp(i),Pi(i,zt,p)):((a.lanes&l)!==0&&(zp(a,i),Nc(i,null,null,l),Ac()),p=a.memoizedState,g=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Pi(i,zt,u)):(u=g.cache,Pi(i,zt,u),u!==p.cache&&Op(i,[zt],l,!0))),sn(a,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function Ka(a){a.flags|=4}function Em(a,i,l,u,p){if((i=(a.mode&32)!==0)&&(i=!1),i){if(a.flags|=16777216,(p&335544128)===p)if(a.stateNode.complete)a.flags|=8192;else if(G_())a.flags|=8192;else throw eo=Dd,Up}else a.flags&=-16777217}function w_(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!O1(i))if(G_())a.flags|=8192;else throw eo=Dd,Up}function qd(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?Xu():536870912,a.lanes|=i,cl|=i)}function Oc(a,i){if(!qe)switch(a.tailMode){case"hidden":i=a.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:u.sibling=null}}function ft(a){var i=a.alternate!==null&&a.alternate.child===a.child,l=0,u=0;if(i)for(var p=a.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)l|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=u,a.childLanes=l,i}function bS(a,i,l){var u=i.pendingProps;switch(Rp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return l=i.stateNode,u=null,a!==null&&(u=a.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ya(zt),yn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(Xo(i)?Ka(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ip())),ft(i),null;case 26:var p=i.type,g=i.memoizedState;return a===null?(Ka(i),g!==null?(ft(i),w_(i,g)):(ft(i),Em(i,p,null,u,l))):g?g!==a.memoizedState?(Ka(i),ft(i),w_(i,g)):(ft(i),i.flags&=-16777217):(a=a.memoizedProps,a!==u&&Ka(i),ft(i),Em(i,p,a,u,l)),null;case 27:if(yr(i),l=fn.current,p=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&Ka(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return ft(i),null}a=Ye.current,Xo(i)?Jy(i):(a=D1(p,u,l),i.stateNode=a,Ka(i))}return ft(i),null;case 5:if(yr(i),p=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==u&&Ka(i);else{if(!u){if(i.stateNode===null)throw Error(n(166));return ft(i),null}if(g=Ye.current,Xo(i))Jy(i);else{var b=ih(fn.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?b.createElement(p,{is:u.is}):b.createElement(p)}}g[Vt]=i,g[Zt]=u;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(on(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ka(i)}}return ft(i),Em(i,i.type,a===null?null:a.memoizedProps,i.pendingProps,l),null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==u&&Ka(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(a=fn.current,Xo(i)){if(a=i.stateNode,l=i.memoizedProps,u=null,p=rn,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}a[Vt]=i,a=!!(a.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||g1(a.nodeValue,l)),a||Oi(i,!0)}else a=ih(a).createTextNode(u),a[Vt]=i,i.stateNode=a}return ft(i),null;case 31:if(l=i.memoizedState,a===null||a.memoizedState!==null){if(u=Xo(i),l!==null){if(a===null){if(!u)throw Error(n(318));if(a=i.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Vt]=i}else Ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),a=!1}else l=Ip(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return i.flags&256?(Hn(i),i):(Hn(i),null);if((i.flags&128)!==0)throw Error(n(558))}return ft(i),null;case 13:if(u=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=Xo(i),u!==null&&u.dehydrated!==null){if(a===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Vt]=i}else Ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),p=!1}else p=Ip(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(Hn(i),i):(Hn(i),null)}return Hn(i),(i.flags&128)!==0?(i.lanes=l,i):(l=u!==null,a=a!==null&&a.memoizedState!==null,l&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),l!==a&&l&&(i.child.flags|=8192),qd(i,i.updateQueue),ft(i),null);case 4:return yn(),a===null&&qm(i.stateNode.containerInfo),ft(i),null;case 10:return Ya(i.type),ft(i),null;case 19:if(le(Nt),u=i.memoizedState,u===null)return ft(i),null;if(p=(i.flags&128)!==0,g=u.rendering,g===null)if(p)Oc(u,!1);else{if(Et!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(g=kd(a),g!==null){for(i.flags|=128,Oc(u,!1),a=g.updateQueue,i.updateQueue=a,qd(i,a),i.subtreeFlags=0,a=l,l=i.child;l!==null;)Qy(l,a),l=l.sibling;return be(Nt,Nt.current&1|2),qe&&Ha(i,u.treeForkCount),i.child}a=a.sibling}u.tail!==null&&$t()>Kd&&(i.flags|=128,p=!0,Oc(u,!1),i.lanes=4194304)}else{if(!p)if(a=kd(g),a!==null){if(i.flags|=128,p=!0,a=a.updateQueue,i.updateQueue=a,qd(i,a),Oc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!qe)return ft(i),null}else 2*$t()-u.renderingStartTime>Kd&&l!==536870912&&(i.flags|=128,p=!0,Oc(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(a=u.last,a!==null?a.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(a=u.tail,u.rendering=a,u.tail=a.sibling,u.renderingStartTime=$t(),a.sibling=null,l=Nt.current,be(Nt,p?l&1|2:l&1),qe&&Ha(i,u.treeForkCount),a):(ft(i),null);case 22:case 23:return Hn(i),Yp(),u=i.memoizedState!==null,a!==null?a.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),l=i.updateQueue,l!==null&&qd(i,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),a!==null&&le(Zs),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ya(zt),ft(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function ES(a,i){switch(Rp(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Ya(zt),yn(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return yr(i),null;case 31:if(i.memoizedState!==null){if(Hn(i),i.alternate===null)throw Error(n(340));Ks()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 13:if(Hn(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Ks()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return le(Nt),null;case 4:return yn(),null;case 10:return Ya(i.type),null;case 22:case 23:return Hn(i),Yp(),a!==null&&le(Zs),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Ya(zt),null;case 25:return null;default:return null}}function b_(a,i){switch(Rp(i),i.tag){case 3:Ya(zt),yn();break;case 26:case 27:case 5:yr(i);break;case 4:yn();break;case 31:i.memoizedState!==null&&Hn(i);break;case 13:Hn(i);break;case 19:le(Nt);break;case 10:Ya(i.type);break;case 22:case 23:Hn(i),Yp(),a!==null&&le(Zs);break;case 24:Ya(zt)}}function Pc(a,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var p=u.next;l=p;do{if((l.tag&a)===a){u=void 0;var g=l.create,b=l.inst;u=g(),b.destroy=u}l=l.next}while(l!==p)}}catch(D){rt(i,i.return,D)}}function Bi(a,i,l){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&a)===a){var b=u.inst,D=b.destroy;if(D!==void 0){b.destroy=void 0,p=i;var V=l,W=D;try{W()}catch(ne){rt(p,V,ne)}}}u=u.next}while(u!==g)}}catch(ne){rt(i,i.return,ne)}}function E_(a){var i=a.updateQueue;if(i!==null){var l=a.stateNode;try{h0(i,l)}catch(u){rt(a,a.return,u)}}}function x_(a,i,l){l.props=ro(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(u){rt(a,i,u)}}function Lc(a,i){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var u=a.stateNode;break;case 30:u=a.stateNode;break;default:u=a.stateNode}typeof l=="function"?a.refCleanup=l(u):l.current=u}}catch(p){rt(a,i,p)}}function da(a,i){var l=a.ref,u=a.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(p){rt(a,i,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){rt(a,i,p)}else l.current=null}function T_(a){var i=a.type,l=a.memoizedProps,u=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(p){rt(a,a.return,p)}}function xm(a,i,l){try{var u=a.stateNode;qS(u,a.type,l,i),u[Zt]=i}catch(p){rt(a,a.return,p)}}function S_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ki(a.type)||a.tag===4}function Tm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||S_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ki(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Sm(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(a),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Tr));else if(u!==4&&(u===27&&Ki(a.type)&&(l=a.stateNode,i=null),a=a.child,a!==null))for(Sm(a,i,l),a=a.sibling;a!==null;)Sm(a,i,l),a=a.sibling}function Yd(a,i,l){var u=a.tag;if(u===5||u===6)a=a.stateNode,i?l.insertBefore(a,i):l.appendChild(a);else if(u!==4&&(u===27&&Ki(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Yd(a,i,l),a=a.sibling;a!==null;)Yd(a,i,l),a=a.sibling}function C_(a){var i=a.stateNode,l=a.memoizedProps;try{for(var u=a.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);on(i,u,l),i[Vt]=a,i[Zt]=l}catch(g){rt(a,a.return,g)}}var Xa=!1,qt=!1,Cm=!1,D_=typeof WeakSet=="function"?WeakSet:Set,en=null;function xS(a,i){if(a=a.containerInfo,Wm=hh,a=Uy(a),_p(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var b=0,D=-1,V=-1,W=0,ne=0,ie=a,K=null;t:for(;;){for(var ee;ie!==l||p!==0&&ie.nodeType!==3||(D=b+p),ie!==g||u!==0&&ie.nodeType!==3||(V=b+u),ie.nodeType===3&&(b+=ie.nodeValue.length),(ee=ie.firstChild)!==null;)K=ie,ie=ee;for(;;){if(ie===a)break t;if(K===l&&++W===p&&(D=b),K===g&&++ne===u&&(V=b),(ee=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=ee}l=D===-1||V===-1?null:{start:D,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qm={focusedElem:a,selectionRange:l},hh=!1,en=i;en!==null;)if(i=en,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,en=a;else for(;en!==null;){switch(i=en,g=i.alternate,a=i.flags,i.tag){case 0:if((a&4)!==0&&(a=i.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)p=a[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&g!==null){a=void 0,l=i,p=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var ve=ro(l.type,p);a=u.getSnapshotBeforeUpdate(ve,g),u.__reactInternalSnapshotBeforeUpdate=a}catch(Te){rt(l,l.return,Te)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,l=a.nodeType,l===9)$m(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":$m(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=i.sibling,a!==null){a.return=i.return,en=a;break}en=i.return}}function A_(a,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Za(a,l),u&4&&Pc(5,l);break;case 1:if(Za(a,l),u&4)if(a=l.stateNode,i===null)try{a.componentDidMount()}catch(b){rt(l,l.return,b)}else{var p=ro(l.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(p,i,a.__reactInternalSnapshotBeforeUpdate)}catch(b){rt(l,l.return,b)}}u&64&&E_(l),u&512&&Lc(l,l.return);break;case 3:if(Za(a,l),u&64&&(a=l.updateQueue,a!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{h0(a,i)}catch(b){rt(l,l.return,b)}}break;case 27:i===null&&u&4&&C_(l);case 26:case 5:Za(a,l),i===null&&u&4&&T_(l),u&512&&Lc(l,l.return);break;case 12:Za(a,l);break;case 31:Za(a,l),u&4&&k_(a,l);break;case 13:Za(a,l),u&4&&I_(a,l),u&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=IS.bind(null,l),ZS(a,l))));break;case 22:if(u=l.memoizedState!==null||Xa,!u){i=i!==null&&i.memoizedState!==null||qt,p=Xa;var g=qt;Xa=u,(qt=i)&&!g?Ja(a,l,(l.subtreeFlags&8772)!==0):Za(a,l),Xa=p,qt=g}break;case 30:break;default:Za(a,l)}}function N_(a){var i=a.alternate;i!==null&&(a.alternate=null,N_(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Mo(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var vt=null,Nn=!1;function $a(a,i,l){for(l=l.child;l!==null;)R_(a,i,l),l=l.sibling}function R_(a,i,l){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(_n,l)}catch{}switch(l.tag){case 26:qt||da(l,i),$a(a,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||da(l,i);var u=vt,p=Nn;Ki(l.type)&&(vt=l.stateNode,Nn=!1),$a(a,i,l),Gc(l.stateNode),vt=u,Nn=p;break;case 5:qt||da(l,i);case 6:if(u=vt,p=Nn,vt=null,$a(a,i,l),vt=u,Nn=p,vt!==null)if(Nn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(g){rt(l,i,g)}else try{vt.removeChild(l.stateNode)}catch(g){rt(l,i,g)}break;case 18:vt!==null&&(Nn?(a=vt,E1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),vl(a)):E1(vt,l.stateNode));break;case 4:u=vt,p=Nn,vt=l.stateNode.containerInfo,Nn=!0,$a(a,i,l),vt=u,Nn=p;break;case 0:case 11:case 14:case 15:Bi(2,l,i),qt||Bi(4,l,i),$a(a,i,l);break;case 1:qt||(da(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&x_(l,i,u)),$a(a,i,l);break;case 21:$a(a,i,l);break;case 22:qt=(u=qt)||l.memoizedState!==null,$a(a,i,l),qt=u;break;default:$a(a,i,l)}}function k_(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{vl(a)}catch(l){rt(i,i.return,l)}}}function I_(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{vl(a)}catch(l){rt(i,i.return,l)}}function TS(a){switch(a.tag){case 31:case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new D_),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new D_),i;default:throw Error(n(435,a.tag))}}function Gd(a,i){var l=TS(a);i.forEach(function(u){if(!l.has(u)){l.add(u);var p=MS.bind(null,a,u);u.then(p,p)}})}function Rn(a,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var p=l[u],g=a,b=i,D=b;e:for(;D!==null;){switch(D.tag){case 27:if(Ki(D.type)){vt=D.stateNode,Nn=!1;break e}break;case 5:vt=D.stateNode,Nn=!1;break e;case 3:case 4:vt=D.stateNode.containerInfo,Nn=!0;break e}D=D.return}if(vt===null)throw Error(n(160));R_(g,b,p),vt=null,Nn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)M_(i,a),i=i.sibling}var Rr=null;function M_(a,i){var l=a.alternate,u=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Rn(i,a),kn(a),u&4&&(Bi(3,a,a.return),Pc(3,a),Bi(5,a,a.return));break;case 1:Rn(i,a),kn(a),u&512&&(qt||l===null||da(l,l.return)),u&64&&Xa&&(a=a.updateQueue,a!==null&&(u=a.callbacks,u!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var p=Rr;if(Rn(i,a),kn(a),u&512&&(qt||l===null||da(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=a.memoizedState,l===null)if(u===null)if(a.stateNode===null){e:{u=a.type,l=a.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[$r]||g[Vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),on(g,u,l),g[Vt]=a,Ut(g),u=g;break e;case"link":var b=M1("link","href",p).get(u+(l.href||""));if(b){for(var D=0;D<b.length;D++)if(g=b[D],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(D,1);break t}}g=p.createElement(u),on(g,u,l),p.head.appendChild(g);break;case"meta":if(b=M1("meta","content",p).get(u+(l.content||""))){for(D=0;D<b.length;D++)if(g=b[D],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(D,1);break t}}g=p.createElement(u),on(g,u,l),p.head.appendChild(g);break;default:throw Error(n(468,u))}g[Vt]=a,Ut(g),u=g}a.stateNode=u}else j1(p,a.type,a.stateNode);else a.stateNode=I1(p,u,a.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?j1(p,a.type,a.stateNode):I1(p,u,a.memoizedProps)):u===null&&a.stateNode!==null&&xm(a,a.memoizedProps,l.memoizedProps)}break;case 27:Rn(i,a),kn(a),u&512&&(qt||l===null||da(l,l.return)),l!==null&&u&4&&xm(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Rn(i,a),kn(a),u&512&&(qt||l===null||da(l,l.return)),a.flags&32){p=a.stateNode;try{An(p,"")}catch(ve){rt(a,a.return,ve)}}u&4&&a.stateNode!=null&&(p=a.memoizedProps,xm(a,p,l!==null?l.memoizedProps:p)),u&1024&&(Cm=!0);break;case 6:if(Rn(i,a),kn(a),u&4){if(a.stateNode===null)throw Error(n(162));u=a.memoizedProps,l=a.stateNode;try{l.nodeValue=u}catch(ve){rt(a,a.return,ve)}}break;case 3:if(lh=null,p=Rr,Rr=sh(i.containerInfo),Rn(i,a),Rr=p,kn(a),u&4&&l!==null&&l.memoizedState.isDehydrated)try{vl(i.containerInfo)}catch(ve){rt(a,a.return,ve)}Cm&&(Cm=!1,j_(a));break;case 4:u=Rr,Rr=sh(a.stateNode.containerInfo),Rn(i,a),kn(a),Rr=u;break;case 12:Rn(i,a),kn(a);break;case 31:Rn(i,a),kn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Gd(a,u)));break;case 13:Rn(i,a),kn(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qd=$t()),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Gd(a,u)));break;case 22:p=a.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,W=Xa,ne=qt;if(Xa=W||p,qt=ne||V,Rn(i,a),qt=ne,Xa=W,kn(a),u&8192)e:for(i=a.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(l===null||V||Xa||qt||ao(a)),l=null,i=a;;){if(i.tag===5||i.tag===26){if(l===null){V=l=i;try{if(g=V.stateNode,p)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{D=V.stateNode;var ie=V.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;D.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ve){rt(V,V.return,ve)}}}else if(i.tag===6){if(l===null){V=i;try{V.stateNode.nodeValue=p?"":V.memoizedProps}catch(ve){rt(V,V.return,ve)}}}else if(i.tag===18){if(l===null){V=i;try{var ee=V.stateNode;p?x1(ee,!0):x1(V.stateNode,!1)}catch(ve){rt(V,V.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=a.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Gd(a,l))));break;case 19:Rn(i,a),kn(a),u&4&&(u=a.updateQueue,u!==null&&(a.updateQueue=null,Gd(a,u)));break;case 30:break;case 21:break;default:Rn(i,a),kn(a)}}function kn(a){var i=a.flags;if(i&2){try{for(var l,u=a.return;u!==null;){if(S_(u)){l=u;break}u=u.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,g=Tm(a);Yd(a,g,p);break;case 5:var b=l.stateNode;l.flags&32&&(An(b,""),l.flags&=-33);var D=Tm(a);Yd(a,D,b);break;case 3:case 4:var V=l.stateNode.containerInfo,W=Tm(a);Sm(a,W,V);break;default:throw Error(n(161))}}catch(ne){rt(a,a.return,ne)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function j_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;j_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function Za(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)A_(a,i.alternate,i),i=i.sibling}function ao(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:Bi(4,i,i.return),ao(i);break;case 1:da(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&x_(i,i.return,l),ao(i);break;case 27:Gc(i.stateNode);case 26:case 5:da(i,i.return),ao(i);break;case 22:i.memoizedState===null&&ao(i);break;case 30:ao(i);break;default:ao(i)}a=a.sibling}}function Ja(a,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=a,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ja(p,g,l),Pc(4,g);break;case 1:if(Ja(p,g,l),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(W){rt(u,u.return,W)}if(u=g,p=u.updateQueue,p!==null){var D=u.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)d0(V[p],D)}catch(W){rt(u,u.return,W)}}l&&b&64&&E_(g),Lc(g,g.return);break;case 27:C_(g);case 26:case 5:Ja(p,g,l),l&&u===null&&b&4&&T_(g),Lc(g,g.return);break;case 12:Ja(p,g,l);break;case 31:Ja(p,g,l),l&&b&4&&k_(p,g);break;case 13:Ja(p,g,l),l&&b&4&&I_(p,g);break;case 22:g.memoizedState===null&&Ja(p,g,l),Lc(g,g.return);break;case 30:break;default:Ja(p,g,l)}i=i.sibling}}function Dm(a,i){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&xc(l))}function Am(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&xc(a))}function kr(a,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)O_(a,i,l,u),i=i.sibling}function O_(a,i,l,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:kr(a,i,l,u),p&2048&&Pc(9,i);break;case 1:kr(a,i,l,u);break;case 3:kr(a,i,l,u),p&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&xc(a)));break;case 12:if(p&2048){kr(a,i,l,u),a=i.stateNode;try{var g=i.memoizedProps,b=g.id,D=g.onPostCommit;typeof D=="function"&&D(b,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(V){rt(i,i.return,V)}}else kr(a,i,l,u);break;case 31:kr(a,i,l,u);break;case 13:kr(a,i,l,u);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?kr(a,i,l,u):Vc(a,i):g._visibility&2?kr(a,i,l,u):(g._visibility|=2,sl(a,i,l,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&Dm(b,i);break;case 24:kr(a,i,l,u),p&2048&&Am(i.alternate,i);break;default:kr(a,i,l,u)}}function sl(a,i,l,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=a,b=i,D=l,V=u,W=b.flags;switch(b.tag){case 0:case 11:case 15:sl(g,b,D,V,p),Pc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?sl(g,b,D,V,p):Vc(g,b):(ne._visibility|=2,sl(g,b,D,V,p)),p&&W&2048&&Dm(b.alternate,b);break;case 24:sl(g,b,D,V,p),p&&W&2048&&Am(b.alternate,b);break;default:sl(g,b,D,V,p)}i=i.sibling}}function Vc(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=a,u=i,p=u.flags;switch(u.tag){case 22:Vc(l,u),p&2048&&Dm(u.alternate,u);break;case 24:Vc(l,u),p&2048&&Am(u.alternate,u);break;default:Vc(l,u)}i=i.sibling}}var Uc=8192;function ol(a,i,l){if(a.subtreeFlags&Uc)for(a=a.child;a!==null;)P_(a,i,l),a=a.sibling}function P_(a,i,l){switch(a.tag){case 26:ol(a,i,l),a.flags&Uc&&a.memoizedState!==null&&uC(l,Rr,a.memoizedState,a.memoizedProps);break;case 5:ol(a,i,l);break;case 3:case 4:var u=Rr;Rr=sh(a.stateNode.containerInfo),ol(a,i,l),Rr=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=Uc,Uc=16777216,ol(a,i,l),Uc=u):ol(a,i,l));break;default:ol(a,i,l)}}function L_(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Fc(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];en=u,U_(u,a)}L_(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)V_(a),a=a.sibling}function V_(a){switch(a.tag){case 0:case 11:case 15:Fc(a),a.flags&2048&&Bi(9,a,a.return);break;case 3:Fc(a);break;case 12:Fc(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,Wd(a)):Fc(a);break;default:Fc(a)}}function Wd(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];en=u,U_(u,a)}L_(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:Bi(8,i,i.return),Wd(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Wd(i));break;default:Wd(i)}a=a.sibling}}function U_(a,i){for(;en!==null;){var l=en;switch(l.tag){case 0:case 11:case 15:Bi(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,en=u;else e:for(l=a;en!==null;){u=en;var p=u.sibling,g=u.return;if(N_(u),u===l){en=null;break e}if(p!==null){p.return=g,en=p;break e}en=g}}}var SS={getCacheForType:function(a){var i=an(zt),l=i.data.get(a);return l===void 0&&(l=a(),i.data.set(a,l)),l},cacheSignal:function(){return an(zt).controller.signal}},CS=typeof WeakMap=="function"?WeakMap:Map,$e=0,ut=null,je=null,Ve=0,nt=0,qn=null,Hi=!1,ll=!1,Nm=!1,ei=0,Et=0,qi=0,io=0,Rm=0,Yn=0,cl=0,zc=null,In=null,km=!1,Qd=0,F_=0,Kd=1/0,Xd=null,Yi=null,Kt=0,Gi=null,ul=null,ti=0,Im=0,Mm=null,z_=null,Bc=0,jm=null;function Gn(){return($e&2)!==0&&Ve!==0?Ve&-Ve:U.T!==null?Fm():$u()}function B_(){if(Yn===0)if((Ve&536870912)===0||qe){var a=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),Yn=a}else Yn=536870912;return a=Bn.current,a!==null&&(a.flags|=32),Yn}function Mn(a,i,l){(a===ut&&(nt===2||nt===9)||a.cancelPendingCommit!==null)&&(dl(a,0),Wi(a,Ve,Yn,!1)),Ms(a,l),(($e&2)===0||a!==ut)&&(a===ut&&(($e&2)===0&&(io|=l),Et===4&&Wi(a,Ve,Yn,!1)),ha(a))}function H_(a,i,l){if(($e&6)!==0)throw Error(n(327));var u=!l&&(i&127)===0&&(i&a.expiredLanes)===0||br(a,i),p=u?NS(a,i):Pm(a,i,!0),g=u;do{if(p===0){ll&&!u&&Wi(a,i,0,!1);break}else{if(l=a.current.alternate,g&&!DS(l)){p=Pm(a,i,!1),g=!1;continue}if(p===2){if(g=i,a.errorRecoveryDisabledLanes&g)var b=0;else b=a.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var D=a;p=zc;var V=D.current.memoizedState.isDehydrated;if(V&&(dl(D,b).flags|=256),b=Pm(D,b,!1),b!==2){if(Nm&&!V){D.errorRecoveryDisabledLanes|=g,io|=g,p=4;break e}g=In,In=p,g!==null&&(In===null?In=g:In.push.apply(In,g))}p=b}if(g=!1,p!==2)continue}}if(p===1){dl(a,0),Wi(a,i,0,!0);break}e:{switch(u=a,g=p,g){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:Wi(u,i,Yn,!Hi);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(p=Qd+300-$t(),10<p)){if(Wi(u,i,Yn,!Hi),Qr(u,0,!0)!==0)break e;ti=i,u.timeoutHandle=w1(q_.bind(null,u,l,In,Xd,km,i,Yn,io,cl,Hi,g,"Throttled",-0,0),p);break e}q_(u,l,In,Xd,km,i,Yn,io,cl,Hi,g,null,-0,0)}}break}while(!0);ha(a)}function q_(a,i,l,u,p,g,b,D,V,W,ne,ie,K,ee){if(a.timeoutHandle=-1,ie=i.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tr},P_(i,g,ie);var ve=(g&62914560)===g?Qd-$t():(g&4194048)===g?F_-$t():0;if(ve=dC(ie,ve),ve!==null){ti=g,a.cancelPendingCommit=ve(Z_.bind(null,a,i,g,l,u,p,b,D,V,ne,ie,null,K,ee)),Wi(a,g,b,!W);return}}Z_(a,i,g,l,u,p,b,D,V)}function DS(a){for(var i=a;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var p=l[u],g=p.getSnapshot;p=p.value;try{if(!Fn(g(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wi(a,i,l,u){i&=~Rm,i&=~io,a.suspendedLanes|=i,a.pingedLanes&=~i,u&&(a.warmLanes|=i),u=a.expirationTimes;for(var p=i;0<p;){var g=31-mt(p),b=1<<g;u[g]=-1,p&=~b}l!==0&&js(a,l,i)}function $d(){return($e&6)===0?(Hc(0),!1):!0}function Om(){if(je!==null){if(nt===0)var a=je.return;else a=je,qa=Xs=null,$p(a),tl=null,Sc=0,a=je;for(;a!==null;)b_(a.alternate,a),a=a.return;je=null}}function dl(a,i){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,WS(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),ti=0,Om(),ut=a,je=l=Ba(a.current,null),Ve=i,nt=0,qn=null,Hi=!1,ll=br(a,i),Nm=!1,cl=Yn=Rm=io=qi=Et=0,In=zc=null,km=!1,(i&8)!==0&&(i|=i&32);var u=a.entangledLanes;if(u!==0)for(a=a.entanglements,u&=i;0<u;){var p=31-mt(u),g=1<<p;i|=a[p],u&=~g}return ei=i,yd(),l}function Y_(a,i){ke=null,U.H=Mc,i===el||i===Cd?(i=o0(),nt=3):i===Up?(i=o0(),nt=4):nt=i===fm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,qn=i,je===null&&(Et=1,Fd(a,lr(i,a.current)))}function G_(){var a=Bn.current;return a===null?!0:(Ve&4194048)===Ve?hr===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?a===hr:!1}function W_(){var a=U.H;return U.H=Mc,a===null?Mc:a}function Q_(){var a=U.A;return U.A=SS,a}function Zd(){Et=4,Hi||(Ve&4194048)!==Ve&&Bn.current!==null||(ll=!0),(qi&134217727)===0&&(io&134217727)===0||ut===null||Wi(ut,Ve,Yn,!1)}function Pm(a,i,l){var u=$e;$e|=2;var p=W_(),g=Q_();(ut!==a||Ve!==i)&&(Xd=null,dl(a,i)),i=!1;var b=Et;e:do try{if(nt!==0&&je!==null){var D=je,V=qn;switch(nt){case 8:Om(),b=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var W=nt;if(nt=0,qn=null,hl(a,D,V,W),l&&ll){b=0;break e}break;default:W=nt,nt=0,qn=null,hl(a,D,V,W)}}AS(),b=Et;break}catch(ne){Y_(a,ne)}while(!0);return i&&a.shellSuspendCounter++,qa=Xs=null,$e=u,U.H=p,U.A=g,je===null&&(ut=null,Ve=0,yd()),b}function AS(){for(;je!==null;)K_(je)}function NS(a,i){var l=$e;$e|=2;var u=W_(),p=Q_();ut!==a||Ve!==i?(Xd=null,Kd=$t()+500,dl(a,i)):ll=br(a,i);e:do try{if(nt!==0&&je!==null){i=je;var g=qn;t:switch(nt){case 1:nt=0,qn=null,hl(a,i,g,1);break;case 2:case 9:if(i0(g)){nt=0,qn=null,X_(i);break}i=function(){nt!==2&&nt!==9||ut!==a||(nt=7),ha(a)},g.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:i0(g)?(nt=0,qn=null,X_(i)):(nt=0,qn=null,hl(a,i,g,7));break;case 5:var b=null;switch(je.tag){case 26:b=je.memoizedState;case 5:case 27:var D=je;if(b?O1(b):D.stateNode.complete){nt=0,qn=null;var V=D.sibling;if(V!==null)je=V;else{var W=D.return;W!==null?(je=W,Jd(W)):je=null}break t}}nt=0,qn=null,hl(a,i,g,5);break;case 6:nt=0,qn=null,hl(a,i,g,6);break;case 8:Om(),Et=6;break e;default:throw Error(n(462))}}RS();break}catch(ne){Y_(a,ne)}while(!0);return qa=Xs=null,U.H=u,U.A=p,$e=l,je!==null?0:(ut=null,Ve=0,yd(),Et)}function RS(){for(;je!==null&&!Jl();)K_(je)}function K_(a){var i=__(a.alternate,a,ei);a.memoizedProps=a.pendingProps,i===null?Jd(a):je=i}function X_(a){var i=a,l=i.alternate;switch(i.tag){case 15:case 0:i=f_(l,i,i.pendingProps,i.type,void 0,Ve);break;case 11:i=f_(l,i,i.pendingProps,i.type.render,i.ref,Ve);break;case 5:$p(i);default:b_(l,i),i=je=Qy(i,ei),i=__(l,i,ei)}a.memoizedProps=a.pendingProps,i===null?Jd(a):je=i}function hl(a,i,l,u){qa=Xs=null,$p(i),tl=null,Sc=0;var p=i.return;try{if(yS(a,p,i,l,Ve)){Et=1,Fd(a,lr(l,a.current)),je=null;return}}catch(g){if(p!==null)throw je=p,g;Et=1,Fd(a,lr(l,a.current)),je=null;return}i.flags&32768?(qe||u===1?a=!0:ll||(Ve&536870912)!==0?a=!1:(Hi=a=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),$_(i,a)):Jd(i)}function Jd(a){var i=a;do{if((i.flags&32768)!==0){$_(i,Hi);return}a=i.return;var l=bS(i.alternate,i,ei);if(l!==null){je=l;return}if(i=i.sibling,i!==null){je=i;return}je=i=a}while(i!==null);Et===0&&(Et=5)}function $_(a,i){do{var l=ES(a.alternate,a);if(l!==null){l.flags&=32767,je=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(a=a.sibling,a!==null)){je=a;return}je=a=l}while(a!==null);Et=6,je=null}function Z_(a,i,l,u,p,g,b,D,V){a.cancelPendingCommit=null;do eh();while(Kt!==0);if(($e&6)!==0)throw Error(n(327));if(i!==null){if(i===a.current)throw Error(n(177));if(g=i.lanes|i.childLanes,g|=Tp,mp(a,l,g,b,D,V),a===ut&&(je=ut=null,Ve=0),ul=i,Gi=a,ti=l,Im=g,Mm=p,z_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,jS(me,function(){return r1(),null})):(a.callbackNode=null,a.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,p=$.p,$.p=2,b=$e,$e|=4;try{xS(a,i,l)}finally{$e=b,$.p=p,U.T=u}}Kt=1,J_(),e1(),t1()}}function J_(){if(Kt===1){Kt=0;var a=Gi,i=ul,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=U.T,U.T=null;var u=$.p;$.p=2;var p=$e;$e|=4;try{M_(i,a);var g=Qm,b=Uy(a.containerInfo),D=g.focusedElem,V=g.selectionRange;if(b!==D&&D&&D.ownerDocument&&Vy(D.ownerDocument.documentElement,D)){if(V!==null&&_p(D)){var W=V.start,ne=V.end;if(ne===void 0&&(ne=W),"selectionStart"in D)D.selectionStart=W,D.selectionEnd=Math.min(ne,D.value.length);else{var ie=D.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var ee=K.getSelection(),ve=D.textContent.length,Te=Math.min(V.start,ve),ct=V.end===void 0?Te:Math.min(V.end,ve);!ee.extend&&Te>ct&&(b=ct,ct=Te,Te=b);var H=Ly(D,Te),F=Ly(D,ct);if(H&&F&&(ee.rangeCount!==1||ee.anchorNode!==H.node||ee.anchorOffset!==H.offset||ee.focusNode!==F.node||ee.focusOffset!==F.offset)){var G=ie.createRange();G.setStart(H.node,H.offset),ee.removeAllRanges(),Te>ct?(ee.addRange(G),ee.extend(F.node,F.offset)):(G.setEnd(F.node,F.offset),ee.addRange(G))}}}}for(ie=[],ee=D;ee=ee.parentNode;)ee.nodeType===1&&ie.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ie.length;D++){var re=ie[D];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}hh=!!Wm,Qm=Wm=null}finally{$e=p,$.p=u,U.T=l}}a.current=i,Kt=2}}function e1(){if(Kt===2){Kt=0;var a=Gi,i=ul,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=U.T,U.T=null;var u=$.p;$.p=2;var p=$e;$e|=4;try{A_(a,i.alternate,i)}finally{$e=p,$.p=u,U.T=l}}Kt=3}}function t1(){if(Kt===4||Kt===3){Kt=0,Rs();var a=Gi,i=ul,l=ti,u=z_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kt=5:(Kt=0,ul=Gi=null,n1(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(Yi=null),Va(l),i=i.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(_n,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=U.T,p=$.p,$.p=2,U.T=null;try{for(var g=a.onRecoverableError,b=0;b<u.length;b++){var D=u[b];g(D.value,{componentStack:D.stack})}}finally{U.T=i,$.p=p}}(ti&3)!==0&&eh(),ha(a),p=a.pendingLanes,(l&261930)!==0&&(p&42)!==0?a===jm?Bc++:(Bc=0,jm=a):Bc=0,Hc(0)}}function n1(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,xc(i)))}function eh(){return J_(),e1(),t1(),r1()}function r1(){if(Kt!==5)return!1;var a=Gi,i=Im;Im=0;var l=Va(ti),u=U.T,p=$.p;try{$.p=32>l?32:l,U.T=null,l=Mm,Mm=null;var g=Gi,b=ti;if(Kt=0,ul=Gi=null,ti=0,($e&6)!==0)throw Error(n(331));var D=$e;if($e|=4,V_(g.current),O_(g,g.current,b,l),$e=D,Hc(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(_n,g)}catch{}return!0}finally{$.p=p,U.T=u,n1(a,i)}}function a1(a,i,l){i=lr(l,i),i=hm(a.stateNode,i,2),a=Ui(a,i,2),a!==null&&(Ms(a,2),ha(a))}function rt(a,i,l){if(a.tag===3)a1(a,a,l);else for(;i!==null;){if(i.tag===3){a1(i,a,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yi===null||!Yi.has(u))){a=lr(l,a),l=i_(2),u=Ui(i,l,2),u!==null&&(s_(l,u,i,a),Ms(u,2),ha(u));break}}i=i.return}}function Lm(a,i,l){var u=a.pingCache;if(u===null){u=a.pingCache=new CS;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(l)||(Nm=!0,p.add(l),a=kS.bind(null,a,i,l),i.then(a,a))}function kS(a,i,l){var u=a.pingCache;u!==null&&u.delete(i),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,ut===a&&(Ve&l)===l&&(Et===4||Et===3&&(Ve&62914560)===Ve&&300>$t()-Qd?($e&2)===0&&dl(a,0):Rm|=l,cl===Ve&&(cl=0)),ha(a)}function i1(a,i){i===0&&(i=Xu()),a=Ws(a,i),a!==null&&(Ms(a,i),ha(a))}function IS(a){var i=a.memoizedState,l=0;i!==null&&(l=i.retryLane),i1(a,l)}function MS(a,i){var l=0;switch(a.tag){case 31:case 13:var u=a.stateNode,p=a.memoizedState;p!==null&&(l=p.retryLane);break;case 19:u=a.stateNode;break;case 22:u=a.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(i),i1(a,l)}function jS(a,i){return Pt(a,i)}var th=null,fl=null,Vm=!1,nh=!1,Um=!1,Qi=0;function ha(a){a!==fl&&a.next===null&&(fl===null?th=fl=a:fl=fl.next=a),nh=!0,Vm||(Vm=!0,PS())}function Hc(a,i){if(!Um&&nh){Um=!0;do for(var l=!1,u=th;u!==null;){if(a!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var b=u.suspendedLanes,D=u.pingedLanes;g=(1<<31-mt(42|a)+1)-1,g&=p&~(b&~D),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,c1(u,g))}else g=Ve,g=Qr(u,u===ut?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||br(u,g)||(l=!0,c1(u,g));u=u.next}while(l);Um=!1}}function OS(){s1()}function s1(){nh=Vm=!1;var a=0;Qi!==0&&GS()&&(a=Qi);for(var i=$t(),l=null,u=th;u!==null;){var p=u.next,g=o1(u,i);g===0?(u.next=null,l===null?th=p:l.next=p,p===null&&(fl=l)):(l=u,(a!==0||(g&3)!==0)&&(nh=!0)),u=p}Kt!==0&&Kt!==5||Hc(a),Qi!==0&&(Qi=0)}function o1(a,i){for(var l=a.suspendedLanes,u=a.pingedLanes,p=a.expirationTimes,g=a.pendingLanes&-62914561;0<g;){var b=31-mt(g),D=1<<b,V=p[b];V===-1?((D&l)===0||(D&u)!==0)&&(p[b]=pp(D,i)):V<=i&&(a.expiredLanes|=D),g&=~D}if(i=ut,l=Ve,l=Qr(a,a===i?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u=a.callbackNode,l===0||a===i&&(nt===2||nt===9)||a.cancelPendingCommit!==null)return u!==null&&u!==null&&Ct(u),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||br(a,l)){if(i=l&-l,i===a.callbackPriority)return i;switch(u!==null&&Ct(u),Va(l)){case 2:case 8:l=xi;break;case 32:l=me;break;case 268435456:l=Qt;break;default:l=me}return u=l1.bind(null,a),l=Pt(l,u),a.callbackPriority=i,a.callbackNode=l,i}return u!==null&&u!==null&&Ct(u),a.callbackPriority=2,a.callbackNode=null,2}function l1(a,i){if(Kt!==0&&Kt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(eh()&&a.callbackNode!==l)return null;var u=Ve;return u=Qr(a,a===ut?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),u===0?null:(H_(a,u,i),o1(a,$t()),a.callbackNode!=null&&a.callbackNode===l?l1.bind(null,a):null)}function c1(a,i){if(eh())return null;H_(a,i,!0)}function PS(){QS(function(){($e&6)!==0?Pt(ks,OS):s1()})}function Fm(){if(Qi===0){var a=Zo;a===0&&(a=Gr,Gr<<=1,(Gr&261888)===0&&(Gr=256)),Qi=a}return Qi}function u1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Lo(""+a)}function d1(a,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,a.id&&l.setAttribute("form",a.id),i.parentNode.insertBefore(l,i),a=new FormData(a),l.parentNode.removeChild(l),a}function LS(a,i,l,u,p){if(i==="submit"&&l&&l.stateNode===p){var g=u1((p[Zt]||null).action),b=u.submitter;b&&(i=(i=b[Zt]||null)?u1(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var D=new ia("action","action",null,u,p);a.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qi!==0){var V=b?d1(p,b):new FormData(p);sm(l,{pending:!0,data:V,method:p.method,action:g},null,V)}}else typeof g=="function"&&(D.preventDefault(),V=b?d1(p,b):new FormData(p),sm(l,{pending:!0,data:V,method:p.method,action:g},g,V))},currentTarget:p}]})}}for(var zm=0;zm<xp.length;zm++){var Bm=xp[zm],VS=Bm.toLowerCase(),US=Bm[0].toUpperCase()+Bm.slice(1);Nr(VS,"on"+US)}Nr(By,"onAnimationEnd"),Nr(Hy,"onAnimationIteration"),Nr(qy,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(tS,"onTransitionRun"),Nr(nS,"onTransitionStart"),Nr(rS,"onTransitionCancel"),Nr(Yy,"onTransitionEnd"),ta("onMouseEnter",["mouseout","mouseover"]),ta("onMouseLeave",["mouseout","mouseover"]),ta("onPointerEnter",["pointerout","pointerover"]),ta("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function h1(a,i){i=(i&4)!==0;for(var l=0;l<a.length;l++){var u=a[l],p=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var b=u.length-1;0<=b;b--){var D=u[b],V=D.instance,W=D.currentTarget;if(D=D.listener,V!==g&&p.isPropagationStopped())break e;g=D,p.currentTarget=W;try{g(p)}catch(ne){vd(ne)}p.currentTarget=null,g=V}else for(b=0;b<u.length;b++){if(D=u[b],V=D.instance,W=D.currentTarget,D=D.listener,V!==g&&p.isPropagationStopped())break e;g=D,p.currentTarget=W;try{g(p)}catch(ne){vd(ne)}p.currentTarget=null,g=V}}}}function Oe(a,i){var l=i[Io];l===void 0&&(l=i[Io]=new Set);var u=a+"__bubble";l.has(u)||(f1(i,a,2,!1),l.add(u))}function Hm(a,i,l){var u=0;i&&(u|=4),f1(l,a,u,i)}var rh="_reactListening"+Math.random().toString(36).slice(2);function qm(a){if(!a[rh]){a[rh]=!0,nc.forEach(function(l){l!=="selectionchange"&&(FS.has(l)||Hm(l,!1,a),Hm(l,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[rh]||(i[rh]=!0,Hm("selectionchange",!1,i))}}function f1(a,i,l,u){switch(B1(i)){case 2:var p=pC;break;case 8:p=mC;break;default:p=ig}l=p.bind(null,i,l,a),p=void 0,!Us||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?a.addEventListener(i,l,{capture:!0,passive:p}):a.addEventListener(i,l,!0):p!==void 0?a.addEventListener(i,l,{passive:p}):a.addEventListener(i,l,!1)}function Ym(a,i,l,u,p){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var D=u.stateNode.containerInfo;if(D===p)break;if(b===4)for(b=u.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;D!==null;){if(b=Zr(D),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){u=g=b;continue e}D=D.parentNode}}u=u.return}Ni(function(){var W=g,ne=ar(l),ie=[];e:{var K=Gy.get(a);if(K!==void 0){var ee=ia,ve=a;switch(a){case"keypress":if(zs(l)===0)break e;case"keydown":case"keyup":ee=pd;break;case"focusin":ve="focus",ee=Hs;break;case"focusout":ve="blur",ee=Hs;break;case"beforeblur":case"afterblur":ee=Hs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=_;break;case By:case Hy:case qy:ee=od;break;case Yy:ee=A;break;case"scroll":case"scrollend":ee=pc;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=za;break;case"toggle":case"beforetoggle":ee=Re}var Te=(i&4)!==0,ct=!Te&&(a==="scroll"||a==="scrollend"),H=Te?K!==null?K+"Capture":null:K;Te=[];for(var F=W,G;F!==null;){var re=F;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||H===null||(re=Sr(F,H),re!=null&&Te.push(Yc(F,re,G))),ct)break;F=F.return}0<Te.length&&(K=new ee(K,ve,null,l,ne),ie.push({event:K,listeners:Te}))}}if((i&7)===0){e:{if(K=a==="mouseover"||a==="pointerover",ee=a==="mouseout"||a==="pointerout",K&&l!==dc&&(ve=l.relatedTarget||l.fromElement)&&(Zr(ve)||ve[Xr]))break e;if((ee||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(ve=l.relatedTarget||l.toElement,ee=W,ve=ve?Zr(ve):null,ve!==null&&(ct=o(ve),Te=ve.tag,ve!==ct||Te!==5&&Te!==27&&Te!==6)&&(ve=null)):(ee=null,ve=W),ee!==ve)){if(Te=mc,re="onMouseLeave",H="onMouseEnter",F="mouse",(a==="pointerout"||a==="pointerover")&&(Te=za,re="onPointerLeave",H="onPointerEnter",F="pointer"),ct=ee==null?K:Vn(ee),G=ve==null?K:Vn(ve),K=new Te(re,F+"leave",ee,l,ne),K.target=ct,K.relatedTarget=G,re=null,Zr(ne)===W&&(Te=new Te(H,F+"enter",ve,l,ne),Te.target=G,Te.relatedTarget=ct,re=Te),ct=re,ee&&ve)t:{for(Te=zS,H=ee,F=ve,G=0,re=H;re;re=Te(re))G++;re=0;for(var Ee=F;Ee;Ee=Te(Ee))re++;for(;0<G-re;)H=Te(H),G--;for(;0<re-G;)F=Te(F),re--;for(;G--;){if(H===F||F!==null&&H===F.alternate){Te=H;break t}H=Te(H),F=Te(F)}Te=null}else Te=null;ee!==null&&p1(ie,K,ee,Te,!1),ve!==null&&ct!==null&&p1(ie,ct,ve,Te,!0)}}e:{if(K=W?Vn(W):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var We=ky;else if(Ny(K))if(Iy)We=ZT;else{We=XT;var _e=KT}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?W&&Po(W.elementType)&&(We=ky):We=$T;if(We&&(We=We(a,W))){Ry(ie,We,l,ne);break e}_e&&_e(a,K,W),a==="focusout"&&W&&K.type==="number"&&W.memoizedProps.value!=null&&lc(K,"number",K.value)}switch(_e=W?Vn(W):window,a){case"focusin":(Ny(_e)||_e.contentEditable==="true")&&(qo=_e,wp=W,wc=null);break;case"focusout":wc=wp=qo=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,Fy(ie,l,ne);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":Fy(ie,l,ne)}var Me;if(Xe)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ho?qs(a,l)&&(Ue="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(la&&l.locale!=="ko"&&(Ho||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ho&&(Me=fc()):(aa=ne,hc="value"in aa?aa.value:aa.textContent,Ho=!0)),_e=ah(W,Ue),0<_e.length&&(Ue=new oa(Ue,a,null,l,ne),ie.push({event:Ue,listeners:_e}),Me?Ue.data=Me:(Me=Bo(l),Me!==null&&(Ue.data=Me)))),(Me=sr?YT(a,l):GT(a,l))&&(Ue=ah(W,"onBeforeInput"),0<Ue.length&&(_e=new oa("onBeforeInput","beforeinput",null,l,ne),ie.push({event:_e,listeners:Ue}),_e.data=Me)),LS(ie,a,W,l,ne)}h1(ie,i)})}function Yc(a,i,l){return{instance:a,listener:i,currentTarget:l}}function ah(a,i){for(var l=i+"Capture",u=[];a!==null;){var p=a,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Sr(a,l),p!=null&&u.unshift(Yc(a,p,g)),p=Sr(a,i),p!=null&&u.push(Yc(a,p,g))),a.tag===3)return u;a=a.return}return[]}function zS(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function p1(a,i,l,u,p){for(var g=i._reactName,b=[];l!==null&&l!==u;){var D=l,V=D.alternate,W=D.stateNode;if(D=D.tag,V!==null&&V===u)break;D!==5&&D!==26&&D!==27||W===null||(V=W,p?(W=Sr(l,g),W!=null&&b.unshift(Yc(l,W,V))):p||(W=Sr(l,g),W!=null&&b.push(Yc(l,W,V)))),l=l.return}b.length!==0&&a.push({event:i,listeners:b})}var BS=/\r\n?/g,HS=/\u0000|\uFFFD/g;function m1(a){return(typeof a=="string"?a:""+a).replace(BS,`
`).replace(HS,"")}function g1(a,i){return i=m1(i),m1(a)===i}function lt(a,i,l,u,p,g){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||An(a,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&An(a,""+u);break;case"className":Un(a,"class",u);break;case"tabIndex":Un(a,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Un(a,l,u);break;case"style":uc(a,u,g);break;case"data":if(i!=="object"){Un(a,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){a.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Lo(""+u),a.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&lt(a,i,"name",p.name,p,null),lt(a,i,"formEncType",p.formEncType,p,null),lt(a,i,"formMethod",p.formMethod,p,null),lt(a,i,"formTarget",p.formTarget,p,null)):(lt(a,i,"encType",p.encType,p,null),lt(a,i,"method",p.method,p,null),lt(a,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){a.removeAttribute(l);break}u=Lo(""+u),a.setAttribute(l,u);break;case"onClick":u!=null&&(a.onclick=Tr);break;case"onScroll":u!=null&&Oe("scroll",a);break;case"onScrollEnd":u!=null&&Oe("scrollend",a);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":a.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){a.removeAttribute("xlink:href");break}l=Lo(""+u),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""+u):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":u===!0?a.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?a.setAttribute(l,u):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?a.setAttribute(l,u):a.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?a.removeAttribute(l):a.setAttribute(l,u);break;case"popover":Oe("beforetoggle",a),Oe("toggle",a),jo(a,"popover",u);break;case"xlinkActuate":Ft(a,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ft(a,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ft(a,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ft(a,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ft(a,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ft(a,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ft(a,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ft(a,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ft(a,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":jo(a,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ad.get(l)||l,jo(a,l,u))}}function Gm(a,i,l,u,p,g){switch(l){case"style":uc(a,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(p.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof u=="string"?An(a,u):(typeof u=="number"||typeof u=="bigint")&&An(a,""+u);break;case"onScroll":u!=null&&Oe("scroll",a);break;case"onScrollEnd":u!=null&&Oe("scrollend",a);break;case"onClick":u!=null&&(a.onclick=Tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),g=a[Zt]||null,g=g!=null?g[l]:null,typeof g=="function"&&a.removeEventListener(i,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(i,u,p);break e}l in a?a[l]=u:u===!0?a.setAttribute(l,""):jo(a,l,u)}}}function on(a,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",a),Oe("load",a);var u=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var b=l[g];if(b!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:lt(a,i,g,b,l,null)}}p&&lt(a,i,"srcSet",l.srcSet,l,null),u&&lt(a,i,"src",l.src,l,null);return;case"input":Oe("invalid",a);var D=g=b=p=null,V=null,W=null;for(u in l)if(l.hasOwnProperty(u)){var ne=l[u];if(ne!=null)switch(u){case"name":p=ne;break;case"type":b=ne;break;case"checked":V=ne;break;case"defaultChecked":W=ne;break;case"value":g=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,i));break;default:lt(a,i,u,ne,l,null)}}td(a,g,D,V,W,b,p,!1);return;case"select":Oe("invalid",a),u=b=g=null;for(p in l)if(l.hasOwnProperty(p)&&(D=l[p],D!=null))switch(p){case"value":g=D;break;case"defaultValue":b=D;break;case"multiple":u=D;default:lt(a,i,p,D,l,null)}i=g,l=b,a.multiple=!!u,i!=null?Si(a,!!u,i,!1):l!=null&&Si(a,!!u,l,!0);return;case"textarea":Oe("invalid",a),g=p=u=null;for(b in l)if(l.hasOwnProperty(b)&&(D=l[b],D!=null))switch(b){case"value":u=D;break;case"defaultValue":p=D;break;case"children":g=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:lt(a,i,b,D,l,null)}Ci(a,u,p,g);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(u=l[V],u!=null))switch(V){case"selected":a.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:lt(a,i,V,u,l,null)}return;case"dialog":Oe("beforetoggle",a),Oe("toggle",a),Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":Oe("load",a);break;case"video":case"audio":for(u=0;u<qc.length;u++)Oe(qc[u],a);break;case"image":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"embed":case"source":case"link":Oe("error",a),Oe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(u=l[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:lt(a,i,W,u,l,null)}return;default:if(Po(i)){for(ne in l)l.hasOwnProperty(ne)&&(u=l[ne],u!==void 0&&Gm(a,i,ne,u,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(u=l[D],u!=null&&lt(a,i,D,u,l,null))}function qS(a,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,b=null,D=null,V=null,W=null,ne=null;for(ee in l){var ie=l[ee];if(l.hasOwnProperty(ee)&&ie!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=ie;default:u.hasOwnProperty(ee)||lt(a,i,ee,null,u,ie)}}for(var K in u){var ee=u[K];if(ie=l[K],u.hasOwnProperty(K)&&(ee!=null||ie!=null))switch(K){case"type":g=ee;break;case"name":p=ee;break;case"checked":W=ee;break;case"defaultChecked":ne=ee;break;case"value":b=ee;break;case"defaultValue":D=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,i));break;default:ee!==ie&&lt(a,i,K,ee,u,ie)}}Oo(a,b,D,V,W,ne,g,p);return;case"select":ee=b=D=K=null;for(g in l)if(V=l[g],l.hasOwnProperty(g)&&V!=null)switch(g){case"value":break;case"multiple":ee=V;default:u.hasOwnProperty(g)||lt(a,i,g,null,u,V)}for(p in u)if(g=u[p],V=l[p],u.hasOwnProperty(p)&&(g!=null||V!=null))switch(p){case"value":K=g;break;case"defaultValue":D=g;break;case"multiple":b=g;default:g!==V&&lt(a,i,p,g,u,V)}i=D,l=b,u=ee,K!=null?Si(a,!!l,K,!1):!!u!=!!l&&(i!=null?Si(a,!!l,i,!0):Si(a,!!l,l?[]:"",!1));return;case"textarea":ee=K=null;for(D in l)if(p=l[D],l.hasOwnProperty(D)&&p!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:lt(a,i,D,null,u,p)}for(b in u)if(p=u[b],g=l[b],u.hasOwnProperty(b)&&(p!=null||g!=null))switch(b){case"value":K=p;break;case"defaultValue":ee=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==g&&lt(a,i,b,p,u,g)}nd(a,K,ee);return;case"option":for(var ve in l)if(K=l[ve],l.hasOwnProperty(ve)&&K!=null&&!u.hasOwnProperty(ve))switch(ve){case"selected":a.selected=!1;break;default:lt(a,i,ve,null,u,K)}for(V in u)if(K=u[V],ee=l[V],u.hasOwnProperty(V)&&K!==ee&&(K!=null||ee!=null))switch(V){case"selected":a.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:lt(a,i,V,K,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)K=l[Te],l.hasOwnProperty(Te)&&K!=null&&!u.hasOwnProperty(Te)&&lt(a,i,Te,null,u,K);for(W in u)if(K=u[W],ee=l[W],u.hasOwnProperty(W)&&K!==ee&&(K!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,i));break;default:lt(a,i,W,K,u,ee)}return;default:if(Po(i)){for(var ct in l)K=l[ct],l.hasOwnProperty(ct)&&K!==void 0&&!u.hasOwnProperty(ct)&&Gm(a,i,ct,void 0,u,K);for(ne in u)K=u[ne],ee=l[ne],!u.hasOwnProperty(ne)||K===ee||K===void 0&&ee===void 0||Gm(a,i,ne,K,u,ee);return}}for(var H in l)K=l[H],l.hasOwnProperty(H)&&K!=null&&!u.hasOwnProperty(H)&&lt(a,i,H,null,u,K);for(ie in u)K=u[ie],ee=l[ie],!u.hasOwnProperty(ie)||K===ee||K==null&&ee==null||lt(a,i,ie,K,u,ee)}function v1(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YS(){if(typeof performance.getEntriesByType=="function"){for(var a=0,i=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var p=l[u],g=p.transferSize,b=p.initiatorType,D=p.duration;if(g&&D&&v1(b)){for(b=0,D=p.responseEnd,u+=1;u<l.length;u++){var V=l[u],W=V.startTime;if(W>D)break;var ne=V.transferSize,ie=V.initiatorType;ne&&v1(ie)&&(V=V.responseEnd,b+=ne*(V<D?1:(D-W)/(V-W)))}if(--u,i+=8*(g+b)/(p.duration/1e3),a++,10<a)break}}if(0<a)return i/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Wm=null,Qm=null;function ih(a){return a.nodeType===9?a:a.ownerDocument}function y1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _1(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function Km(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Xm=null;function GS(){var a=window.event;return a&&a.type==="popstate"?a===Xm?!1:(Xm=a,!0):(Xm=null,!1)}var w1=typeof setTimeout=="function"?setTimeout:void 0,WS=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,QS=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(a){return b1.resolve(null).then(a).catch(KS)}:w1;function KS(a){setTimeout(function(){throw a})}function Ki(a){return a==="head"}function E1(a,i){var l=i,u=0;do{var p=l.nextSibling;if(a.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(u===0){a.removeChild(p),vl(i);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Gc(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Gc(l);for(var g=l.firstChild;g;){var b=g.nextSibling,D=g.nodeName;g[$r]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=b}}else l==="body"&&Gc(a.ownerDocument.body);l=p}while(l);vl(i)}function x1(a,i){var l=a;a=0;do{var u=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=u}while(l)}function $m(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$m(l),Mo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function XS(a,i,l,u){for(;a.nodeType===1;){var p=l;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(u){if(!a[$r])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(g=a.getAttribute("rel"),g==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(g!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(g=a.getAttribute("src"),(g!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===g)return a}else return a;if(a=fr(a.nextSibling),a===null)break}return null}function $S(a,i,l){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=fr(a.nextSibling),a===null))return null;return a}function T1(a,i){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!i||(a=fr(a.nextSibling),a===null))return null;return a}function Zm(a){return a.data==="$?"||a.data==="$~"}function Jm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function ZS(a,i){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=i;else if(a.data!=="$?"||l.readyState!=="loading")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),a._reactRetry=u}}function fr(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return a}var eg=null;function S1(a){a=a.nextSibling;for(var i=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(i===0)return fr(a.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}a=a.nextSibling}return null}function C1(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return a;i--}else l!=="/$"&&l!=="/&"||i++}a=a.previousSibling}return null}function D1(a,i,l){switch(i=ih(l),a){case"html":if(a=i.documentElement,!a)throw Error(n(452));return a;case"head":if(a=i.head,!a)throw Error(n(453));return a;case"body":if(a=i.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Gc(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Mo(a)}var pr=new Map,A1=new Set;function sh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ni=$.d;$.d={f:JS,r:eC,D:tC,C:nC,L:rC,m:aC,X:sC,S:iC,M:oC};function JS(){var a=ni.f(),i=$d();return a||i}function eC(a){var i=rr(a);i!==null&&i.tag===5&&i.type==="form"?Y0(i):ni.r(a)}var pl=typeof document>"u"?null:document;function N1(a,i,l){var u=pl;if(u&&typeof i=="string"&&i){var p=Dn(i);p='link[rel="'+a+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),A1.has(p)||(A1.add(p),a={rel:a,crossOrigin:l,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),on(i,"link",a),Ut(i),u.head.appendChild(i)))}}function tC(a){ni.D(a),N1("dns-prefetch",a,null)}function nC(a,i){ni.C(a,i),N1("preconnect",a,i)}function rC(a,i,l){ni.L(a,i,l);var u=pl;if(u&&a&&i){var p='link[rel="preload"][as="'+Dn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Dn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Dn(l.imageSizes)+'"]')):p+='[href="'+Dn(a)+'"]';var g=p;switch(i){case"style":g=ml(a);break;case"script":g=gl(a)}pr.has(g)||(a=w({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:a,as:i},l),pr.set(g,a),u.querySelector(p)!==null||i==="style"&&u.querySelector(Wc(g))||i==="script"&&u.querySelector(Qc(g))||(i=u.createElement("link"),on(i,"link",a),Ut(i),u.head.appendChild(i)))}}function aC(a,i){ni.m(a,i);var l=pl;if(l&&a){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Dn(u)+'"][href="'+Dn(a)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=gl(a)}if(!pr.has(g)&&(a=w({rel:"modulepreload",href:a},i),pr.set(g,a),l.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Qc(g)))return}u=l.createElement("link"),on(u,"link",a),Ut(u),l.head.appendChild(u)}}}function iC(a,i,l){ni.S(a,i,l);var u=pl;if(u&&a){var p=Jr(u).hoistableStyles,g=ml(a);i=i||"default";var b=p.get(g);if(!b){var D={loading:0,preload:null};if(b=u.querySelector(Wc(g)))D.loading=5;else{a=w({rel:"stylesheet",href:a,"data-precedence":i},l),(l=pr.get(g))&&tg(a,l);var V=b=u.createElement("link");Ut(V),on(V,"link",a),V._p=new Promise(function(W,ne){V.onload=W,V.onerror=ne}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,oh(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:D},p.set(g,b)}}}function sC(a,i){ni.X(a,i);var l=pl;if(l&&a){var u=Jr(l).hoistableScripts,p=gl(a),g=u.get(p);g||(g=l.querySelector(Qc(p)),g||(a=w({src:a,async:!0},i),(i=pr.get(p))&&ng(a,i),g=l.createElement("script"),Ut(g),on(g,"link",a),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function oC(a,i){ni.M(a,i);var l=pl;if(l&&a){var u=Jr(l).hoistableScripts,p=gl(a),g=u.get(p);g||(g=l.querySelector(Qc(p)),g||(a=w({src:a,async:!0,type:"module"},i),(i=pr.get(p))&&ng(a,i),g=l.createElement("script"),Ut(g),on(g,"link",a),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function R1(a,i,l,u){var p=(p=fn.current)?sh(p):null;if(!p)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=ml(l.href),l=Jr(p).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=ml(l.href);var g=Jr(p).hoistableStyles,b=g.get(a);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(a,b),(g=p.querySelector(Wc(a)))&&!g._p&&(b.instance=g,b.state.loading=5),pr.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},pr.set(a,l),g||lC(p,a,l,b.state))),i&&u===null)throw Error(n(528,""));return b}if(i&&u!==null)throw Error(n(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=gl(l),l=Jr(p).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function ml(a){return'href="'+Dn(a)+'"'}function Wc(a){return'link[rel="stylesheet"]['+a+"]"}function k1(a){return w({},a,{"data-precedence":a.precedence,precedence:null})}function lC(a,i,l,u){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=a.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),on(i,"link",l),Ut(i),a.head.appendChild(i))}function gl(a){return'[src="'+Dn(a)+'"]'}function Qc(a){return"script[async]"+a}function I1(a,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=a.querySelector('style[data-href~="'+Dn(l.href)+'"]');if(u)return i.instance=u,Ut(u),u;var p=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(a.ownerDocument||a).createElement("style"),Ut(u),on(u,"style",p),oh(u,l.precedence,a),i.instance=u;case"stylesheet":p=ml(l.href);var g=a.querySelector(Wc(p));if(g)return i.state.loading|=4,i.instance=g,Ut(g),g;u=k1(l),(p=pr.get(p))&&tg(u,p),g=(a.ownerDocument||a).createElement("link"),Ut(g);var b=g;return b._p=new Promise(function(D,V){b.onload=D,b.onerror=V}),on(g,"link",u),i.state.loading|=4,oh(g,l.precedence,a),i.instance=g;case"script":return g=gl(l.src),(p=a.querySelector(Qc(g)))?(i.instance=p,Ut(p),p):(u=l,(p=pr.get(g))&&(u=w({},l),ng(u,p)),a=a.ownerDocument||a,p=a.createElement("script"),Ut(p),on(p,"link",u),a.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,oh(u,l.precedence,a));return i.instance}function oh(a,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,b=0;b<u.length;b++){var D=u[b];if(D.dataset.precedence===i)g=D;else if(g!==p)break}g?g.parentNode.insertBefore(a,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(a,i.firstChild))}function tg(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function ng(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var lh=null;function M1(a,i,l){if(lh===null){var u=new Map,p=lh=new Map;p.set(l,u)}else p=lh,u=p.get(l),u||(u=new Map,p.set(l,u));if(u.has(a))return u;for(u.set(a,null),l=l.getElementsByTagName(a),p=0;p<l.length;p++){var g=l[p];if(!(g[$r]||g[Vt]||a==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=a+b;var D=u.get(b);D?D.push(g):u.set(b,[g])}}return u}function j1(a,i,l){a=a.ownerDocument||a,a.head.insertBefore(l,i==="title"?a.querySelector("head > title"):null)}function cC(a,i,l){if(l===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function O1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function uC(a,i,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=ml(u.href),g=i.querySelector(Wc(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(a.count++,a=ch.bind(a),i.then(a,a)),l.state.loading|=4,l.instance=g,Ut(g);return}g=i.ownerDocument||i,u=k1(u),(p=pr.get(p))&&tg(u,p),g=g.createElement("link"),Ut(g);var b=g;b._p=new Promise(function(D,V){b.onload=D,b.onerror=V}),on(g,"link",u),l.instance=g}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=ch.bind(a),i.addEventListener("load",l),i.addEventListener("error",l))}}var rg=0;function dC(a,i){return a.stylesheets&&a.count===0&&dh(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var u=setTimeout(function(){if(a.stylesheets&&dh(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4+i);0<a.imgBytes&&rg===0&&(rg=62500*YS());var p=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&dh(a,a.stylesheets),a.unsuspend)){var g=a.unsuspend;a.unsuspend=null,g()}},(a.imgBytes>rg?50:800)+i);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var uh=null;function dh(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,uh=new Map,i.forEach(hC,a),uh=null,ch.call(a))}function hC(a,i){if(!(i.state.loading&4)){var l=uh.get(a);if(l)var u=l.get(null);else{l=new Map,uh.set(a,l);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var b=p[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),u=b)}u&&l.set(null,u)}p=i.instance,b=p.getAttribute("data-precedence"),g=l.get(b)||u,g===u&&l.set(null,p),l.set(b,p),this.count++,u=ch.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),i.state.loading|=4}}var Kc={$$typeof:B,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function fC(a,i,l,u,p,g,b,D,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function P1(a,i,l,u,p,g,b,D,V,W,ne,ie){return a=new fC(a,i,l,b,V,W,ne,ie,D),i=1,g===!0&&(i|=24),g=zn(3,null,null,i),a.current=g,g.stateNode=a,i=Pp(),i.refCount++,a.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:i},Fp(g),a}function L1(a){return a?(a=Wo,a):Wo}function V1(a,i,l,u,p,g){p=L1(p),u.context===null?u.context=p:u.pendingContext=p,u=Vi(i),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Ui(a,u,i),l!==null&&(Mn(l,a,i),Dc(l,a,i))}function U1(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<i?l:i}}function ag(a,i){U1(a,i),(a=a.alternate)&&U1(a,i)}function F1(a){if(a.tag===13||a.tag===31){var i=Ws(a,67108864);i!==null&&Mn(i,a,67108864),ag(a,67108864)}}function z1(a){if(a.tag===13||a.tag===31){var i=Gn();i=Os(i);var l=Ws(a,i);l!==null&&Mn(l,a,i),ag(a,i)}}var hh=!0;function pC(a,i,l,u){var p=U.T;U.T=null;var g=$.p;try{$.p=2,ig(a,i,l,u)}finally{$.p=g,U.T=p}}function mC(a,i,l,u){var p=U.T;U.T=null;var g=$.p;try{$.p=8,ig(a,i,l,u)}finally{$.p=g,U.T=p}}function ig(a,i,l,u){if(hh){var p=sg(u);if(p===null)Ym(a,i,u,fh,l),H1(a,u);else if(vC(p,a,i,l,u))u.stopPropagation();else if(H1(a,u),i&4&&-1<gC.indexOf(a)){for(;p!==null;){var g=rr(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Wr(g.pendingLanes);if(b!==0){var D=g;for(D.pendingLanes|=2,D.entangledLanes|=2;b;){var V=1<<31-mt(b);D.entanglements[1]|=V,b&=~V}ha(g),($e&6)===0&&(Kd=$t()+500,Hc(0))}}break;case 31:case 13:D=Ws(g,2),D!==null&&Mn(D,g,2),$d(),ag(g,2)}if(g=sg(u),g===null&&Ym(a,i,u,fh,l),g===p)break;p=g}p!==null&&u.stopPropagation()}else Ym(a,i,u,null,l)}}function sg(a){return a=ar(a),og(a)}var fh=null;function og(a){if(fh=null,a=Zr(a),a!==null){var i=o(a);if(i===null)a=null;else{var l=i.tag;if(l===13){if(a=c(i),a!==null)return a;a=null}else if(l===31){if(a=h(i),a!==null)return a;a=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return fh=a,null}function B1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(La()){case ks:return 2;case xi:return 8;case me:case Se:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var lg=!1,Xi=null,$i=null,Zi=null,Xc=new Map,$c=new Map,Ji=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H1(a,i){switch(a){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Xc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(i.pointerId)}}function Zc(a,i,l,u,p,g){return a===null||a.nativeEvent!==g?(a={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},i!==null&&(i=rr(i),i!==null&&F1(i)),a):(a.eventSystemFlags|=u,i=a.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),a)}function vC(a,i,l,u,p){switch(i){case"focusin":return Xi=Zc(Xi,a,i,l,u,p),!0;case"dragenter":return $i=Zc($i,a,i,l,u,p),!0;case"mouseover":return Zi=Zc(Zi,a,i,l,u,p),!0;case"pointerover":var g=p.pointerId;return Xc.set(g,Zc(Xc.get(g)||null,a,i,l,u,p)),!0;case"gotpointercapture":return g=p.pointerId,$c.set(g,Zc($c.get(g)||null,a,i,l,u,p)),!0}return!1}function q1(a){var i=Zr(a.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=c(l),i!==null){a.blockedOn=i,Er(a.priority,function(){z1(l)});return}}else if(i===31){if(i=h(l),i!==null){a.blockedOn=i,Er(a.priority,function(){z1(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ph(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var l=sg(a.nativeEvent);if(l===null){l=a.nativeEvent;var u=new l.constructor(l.type,l);dc=u,l.target.dispatchEvent(u),dc=null}else return i=rr(l),i!==null&&F1(i),a.blockedOn=l,!1;i.shift()}return!0}function Y1(a,i,l){ph(a)&&l.delete(i)}function yC(){lg=!1,Xi!==null&&ph(Xi)&&(Xi=null),$i!==null&&ph($i)&&($i=null),Zi!==null&&ph(Zi)&&(Zi=null),Xc.forEach(Y1),$c.forEach(Y1)}function mh(a,i){a.blockedOn===i&&(a.blockedOn=null,lg||(lg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yC)))}var gh=null;function G1(a){gh!==a&&(gh=a,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){gh===a&&(gh=null);for(var i=0;i<a.length;i+=3){var l=a[i],u=a[i+1],p=a[i+2];if(typeof u!="function"){if(og(u||l)===null)continue;break}var g=rr(l);g!==null&&(a.splice(i,3),i-=3,sm(g,{pending:!0,data:p,method:l.method,action:u},u,p))}}))}function vl(a){function i(V){return mh(V,a)}Xi!==null&&mh(Xi,a),$i!==null&&mh($i,a),Zi!==null&&mh(Zi,a),Xc.forEach(i),$c.forEach(i);for(var l=0;l<Ji.length;l++){var u=Ji[l];u.blockedOn===a&&(u.blockedOn=null)}for(;0<Ji.length&&(l=Ji[0],l.blockedOn===null);)q1(l),l.blockedOn===null&&Ji.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var p=l[u],g=l[u+1],b=p[Zt]||null;if(typeof g=="function")b||G1(l);else if(b){var D=null;if(g&&g.hasAttribute("formAction")){if(p=g,b=g[Zt]||null)D=b.formAction;else if(og(p)!==null)continue}else D=b.action;typeof D=="function"?l[u+1]=D:(l.splice(u,3),u-=3),G1(l)}}}function W1(){function a(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function cg(a){this._internalRoot=a}vh.prototype.render=cg.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(n(409));var l=i.current,u=Gn();V1(l,u,a,i,null,null)},vh.prototype.unmount=cg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;V1(a.current,2,null,a,null,null),$d(),i[Xr]=null}};function vh(a){this._internalRoot=a}vh.prototype.unstable_scheduleHydration=function(a){if(a){var i=$u();a={blockedOn:null,target:a,priority:i};for(var l=0;l<Ji.length&&i!==0&&i<Ji[l].priority;l++);Ji.splice(l,0,a),l===0&&q1(a)}};var Q1=e.version;if(Q1!=="19.2.0")throw Error(n(527,Q1,"19.2.0"));$.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=v(i),a=a!==null?y(a):null,a=a===null?null:a.stateNode,a};var _C={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{_n=yh.inject(_C),Dt=yh}catch{}}return eu.createRoot=function(a,i){if(!s(a))throw Error(n(299));var l=!1,u="",p=t_,g=n_,b=r_;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=P1(a,1,!1,null,null,l,u,null,p,g,b,W1),a[Xr]=i.current,qm(a),new cg(i)},eu.hydrateRoot=function(a,i,l){if(!s(a))throw Error(n(299));var u=!1,p="",g=t_,b=n_,D=r_,V=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),i=P1(a,1,!0,i,l??null,u,p,V,g,b,D,W1),i.context=L1(null),l=i.current,u=Gn(),u=Os(u),p=Vi(u),p.callback=null,Ui(l,p,u),l=u,i.current.lanes=l,Ms(i,l),ha(i),a[Xr]=i.current,qm(a),new vh(i)},eu.version="19.2.0",eu}var ew;function IC(){if(ew)return dg.exports;ew=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dg.exports=kC(),dg.exports}var MC=IC();const jC=()=>{};var tw={};const xE=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},OC=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=r[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=r[t++],c=r[t++],h=r[t++],m=((s&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(m>>10)),e[n++]=String.fromCharCode(56320+(m&1023))}else{const o=r[t++],c=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const o=r[s],c=s+1<r.length,h=c?r[s+1]:0,m=s+2<r.length,v=m?r[s+2]:0,y=o>>2,w=(o&3)<<4|h>>4;let E=(h&15)<<2|v>>6,S=v&63;m||(S=64,c||(E=64)),n.push(t[y],t[w],t[E],t[S])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(xE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const o=t[r.charAt(s++)],h=s<r.length?t[r.charAt(s)]:0;++s;const v=s<r.length?t[r.charAt(s)]:64;++s;const w=s<r.length?t[r.charAt(s)]:64;if(++s,o==null||h==null||v==null||w==null)throw new PC;const E=o<<2|h>>4;if(n.push(E),v!==64){const S=h<<4&240|v>>2;if(n.push(S),w!==64){const k=v<<6&192|w;n.push(k)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LC=function(r){const e=xE(r);return TE.encodeByteArray(e,!0)},Kh=function(r){return LC(r).replace(/\./g,"")},SE=function(r){try{return TE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UC=()=>VC().__FIREBASE_DEFAULTS__,FC=()=>{if(typeof process>"u"||typeof tw>"u")return;const r=tw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&SE(r[1]);return e&&JSON.parse(e)},Mf=()=>{try{return jC()||UC()||FC()||zC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},CE=r=>Mf()?.emulatorHosts?.[r],DE=r=>{const e=CE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},AE=()=>Mf()?.config,NE=r=>Mf()?.[`_${r}`];class BC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function So(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fv(r){return(await fetch(r,{credentials:"include"})).ok}function RE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Kh(JSON.stringify(t)),Kh(JSON.stringify(c)),""].join(".")}const du={};function HC(){const r={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?r.emulator.push(e):r.prod.push(e);return r}function qC(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let nw=!1;function pv(r,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||du[r]===e||du[r]||nw)return;du[r]=e;function t(E){return`__firebase__banner__${E}`}const n="__firebase__banner",o=HC().prod.length>0;function c(){const E=document.getElementById(n);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function v(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{nw=!0,c()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=qC(n),S=t("text"),k=document.getElementById(S)||document.createElement("span"),L=t("learnmore"),T=document.getElementById(L)||document.createElement("a"),R=t("preprendIcon"),q=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;h(B),y(T,L);const X=v();m(q,R),B.append(q,k,T,X),document.body.appendChild(B)}o?(k.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function GC(){const r=Mf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function KC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XC(){const r=vn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function $C(){return!GC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZC(){try{return typeof indexedDB=="object"}catch{return!1}}function JC(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const eD="FirebaseError";class Ma extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=eD,Object.setPrototypeOf(this,Ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?tD(o,n):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new Ma(s,h,n)}}function tD(r,e){return r.replace(nD,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const nD=/\{\$([^}]+)}/g;function rD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vo(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=r[s],c=e[s];if(rw(o)&&rw(c)){if(!vo(o,c))return!1}else if(o!==c)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function rw(r){return r!==null&&typeof r=="object"}function Iu(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ru(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function au(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function aD(r,e){const t=new iD(r,e);return t.subscribe.bind(t)}class iD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");sD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=pg),s.error===void 0&&(s.error=pg),s.complete===void 0&&(s.complete=pg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sD(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pg(){}function jt(r){return r&&r._delegate?r._delegate:r}class ms{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const so="[DEFAULT]";class oD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new BC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cD(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&c.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:lD(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lD(r){return r===so?void 0:r}function cD(r){return r.instantiationMode==="EAGER"}class uD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const dD={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},hD=ze.INFO,fD={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},pD=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=fD[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mv{constructor(e){this.name=e,this._logLevel=hD,this._logHandler=pD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const mD=(r,e)=>e.some(t=>r instanceof t);let aw,iw;function gD(){return aw||(aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vD(){return iw||(iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,Og=new WeakMap,IE=new WeakMap,mg=new WeakMap,gv=new WeakMap;function yD(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(cs(r.result)),s()},c=()=>{n(r.error),s()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kE.set(t,r)}).catch(()=>{}),gv.set(e,r),e}function _D(r){if(Og.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Og.set(r,e)}let Pg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Og.get(r);if(e==="objectStoreNames")return r.objectStoreNames||IE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wD(r){Pg=r(Pg)}function bD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(gg(this),e,...t);return IE.set(n,e.sort?e.sort():[e]),cs(n)}:vD().includes(r)?function(...e){return r.apply(gg(this),e),cs(kE.get(this))}:function(...e){return cs(r.apply(gg(this),e))}}function ED(r){return typeof r=="function"?bD(r):(r instanceof IDBTransaction&&_D(r),mD(r,gD())?new Proxy(r,Pg):r)}function cs(r){if(r instanceof IDBRequest)return yD(r);if(mg.has(r))return mg.get(r);const e=ED(r);return e!==r&&(mg.set(r,e),gv.set(e,r)),e}const gg=r=>gv.get(r);function xD(r,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const c=indexedDB.open(r,e),h=cs(c);return n&&c.addEventListener("upgradeneeded",m=>{n(cs(c.result),m.oldVersion,m.newVersion,cs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),s&&m.addEventListener("versionchange",v=>s(v.oldVersion,v.newVersion,v))}).catch(()=>{}),h}const TD=["get","getKey","getAll","getAllKeys","count"],SD=["put","add","delete","clear"],vg=new Map;function sw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(vg.get(e))return vg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=SD.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||TD.includes(t)))return;const o=async function(c,...h){const m=this.transaction(c,s?"readwrite":"readonly");let v=m.store;return n&&(v=v.index(h.shift())),(await Promise.all([v[t](...h),s&&m.done]))[0]};return vg.set(e,o),o}wD(r=>({...r,get:(e,t,n)=>sw(e,t)||r.get(e,t,n),has:(e,t)=>!!sw(e,t)||r.has(e,t)}));class CD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DD(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function DD(r){return r.getComponent()?.type==="VERSION"}const Lg="@firebase/app",ow="0.14.6";const di=new mv("@firebase/app"),AD="@firebase/app-compat",ND="@firebase/analytics-compat",RD="@firebase/analytics",kD="@firebase/app-check-compat",ID="@firebase/app-check",MD="@firebase/auth",jD="@firebase/auth-compat",OD="@firebase/database",PD="@firebase/data-connect",LD="@firebase/database-compat",VD="@firebase/functions",UD="@firebase/functions-compat",FD="@firebase/installations",zD="@firebase/installations-compat",BD="@firebase/messaging",HD="@firebase/messaging-compat",qD="@firebase/performance",YD="@firebase/performance-compat",GD="@firebase/remote-config",WD="@firebase/remote-config-compat",QD="@firebase/storage",KD="@firebase/storage-compat",XD="@firebase/firestore",$D="@firebase/ai",ZD="@firebase/firestore-compat",JD="firebase",eA="12.6.0";const Vg="[DEFAULT]",tA={[Lg]:"fire-core",[AD]:"fire-core-compat",[RD]:"fire-analytics",[ND]:"fire-analytics-compat",[ID]:"fire-app-check",[kD]:"fire-app-check-compat",[MD]:"fire-auth",[jD]:"fire-auth-compat",[OD]:"fire-rtdb",[PD]:"fire-data-connect",[LD]:"fire-rtdb-compat",[VD]:"fire-fn",[UD]:"fire-fn-compat",[FD]:"fire-iid",[zD]:"fire-iid-compat",[BD]:"fire-fcm",[HD]:"fire-fcm-compat",[qD]:"fire-perf",[YD]:"fire-perf-compat",[GD]:"fire-rc",[WD]:"fire-rc-compat",[QD]:"fire-gcs",[KD]:"fire-gcs-compat",[XD]:"fire-fst",[ZD]:"fire-fst-compat",[$D]:"fire-vertex","fire-js":"fire-js",[JD]:"fire-js-all"};const Xh=new Map,nA=new Map,Ug=new Map;function lw(r,e){try{r.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function yo(r){const e=r.name;if(Ug.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Ug.set(e,r);for(const t of Xh.values())lw(t,r);for(const t of nA.values())lw(t,r);return!0}function jf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Kn(r){return r==null?!1:r.settings!==void 0}const rA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new ku("app","Firebase",rA);class aA{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}const Co=eA;function ME(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Vg,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw us.create("bad-app-name",{appName:String(s)});if(t||(t=AE()),!t)throw us.create("no-options");const o=Xh.get(s);if(o){if(vo(t,o.options)&&vo(n,o.config))return o;throw us.create("duplicate-app",{appName:s})}const c=new uD(s);for(const m of Ug.values())c.addComponent(m);const h=new aA(t,n,c);return Xh.set(s,h),h}function vv(r=Vg){const e=Xh.get(r);if(!e&&r===Vg&&AE())return ME();if(!e)throw us.create("no-app",{appName:r});return e}function Ea(r,e,t){let n=tA[r]??r;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${n}" with version "${e}":`];s&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(c.join(" "));return}yo(new ms(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const iA="firebase-heartbeat-database",sA=1,vu="firebase-heartbeat-store";let yg=null;function jE(){return yg||(yg=xD(iA,sA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(r=>{throw us.create("idb-open",{originalErrorMessage:r.message})})),yg}async function oA(r){try{const t=(await jE()).transaction(vu),n=await t.objectStore(vu).get(OE(r));return await t.done,n}catch(e){if(e instanceof Ma)di.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e?.message});di.warn(t.message)}}}async function cw(r,e){try{const n=(await jE()).transaction(vu,"readwrite");await n.objectStore(vu).put(e,OE(r)),await n.done}catch(t){if(t instanceof Ma)di.warn(t.message);else{const n=us.create("idb-set",{originalErrorMessage:t?.message});di.warn(n.message)}}}function OE(r){return`${r.name}!${r.options.appId}`}const lA=1024,cA=30;class uA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=uw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>cA){const s=fA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){di.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uw(),{heartbeatsToSend:t,unsentEntries:n}=dA(this._heartbeatsCache.heartbeats),s=Kh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return di.warn(e),""}}}function uw(){return new Date().toISOString().substring(0,10)}function dA(r,e=lA){const t=[];let n=r.slice();for(const s of r){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),dw(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),dw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class hA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZC()?JC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function dw(r){return Kh(JSON.stringify({version:2,heartbeats:r})).length}function fA(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function pA(r){yo(new ms("platform-logger",e=>new CD(e),"PRIVATE")),yo(new ms("heartbeat",e=>new uA(e),"PRIVATE")),Ea(Lg,ow,r),Ea(Lg,ow,"esm2020"),Ea("fire-js","")}pA("");function PE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=PE,LE=new ku("auth","Firebase",PE());const $h=new mv("@firebase/auth");function gA(r,...e){$h.logLevel<=ze.WARN&&$h.warn(`Auth (${Co}): ${r}`,...e)}function jh(r,...e){$h.logLevel<=ze.ERROR&&$h.error(`Auth (${Co}): ${r}`,...e)}function Fr(r,...e){throw yv(r,...e)}function xa(r,...e){return yv(r,...e)}function VE(r,e,t){const n={...mA(),[e]:t};return new ku("auth","Firebase",n).create(e,{appName:r.name})}function si(r){return VE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yv(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return LE.create(r,...e)}function Ce(r,e,...t){if(!r)throw yv(e,...t)}function ri(r){const e="INTERNAL ASSERTION FAILED: "+r;throw jh(e),new Error(e)}function hi(r,e){r||ri(e)}function Fg(){return typeof self<"u"&&self.location?.href||""}function vA(){return hw()==="http:"||hw()==="https:"}function hw(){return typeof self<"u"&&self.location?.protocol||null}function yA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vA()||QC()||"connection"in navigator)?navigator.onLine:!0}function _A(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,hi(t>e,"Short delay should be less than long delay!"),this.isMobile=YC()||KC()}get(){return yA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _v(r,e){hi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class UE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EA=new Mu(3e4,6e4);function yi(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function _i(r,e,t,n,s={}){return FE(r,s,async()=>{let o={},c={};n&&(e==="GET"?c=n:o={body:JSON.stringify(n)});const h=Iu({key:r.config.apiKey,...c}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:m,...o};return WC()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&So(r.emulatorConfig.host)&&(v.credentials="include"),UE.fetch()(await zE(r,r.config.apiHost,t,h),v)})}async function FE(r,e,t){r._canInitEmulator=!1;const n={...wA,...e};try{const s=new TA(r),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw _h(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[m,v]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(r,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw _h(r,"email-already-in-use",c);if(m==="USER_DISABLED")throw _h(r,"user-disabled",c);const y=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw VE(r,y,v);Fr(r,y)}}catch(s){if(s instanceof Ma)throw s;Fr(r,"network-request-failed",{message:String(s)})}}async function ju(r,e,t,n,s={}){const o=await _i(r,e,t,n,s);return"mfaPendingCredential"in o&&Fr(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function zE(r,e,t,n){const s=`${e}${t}?${n}`,o=r,c=o.config.emulator?_v(r.config,s):`${r.config.apiScheme}://${s}`;return bA.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function xA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(xa(this.auth,"network-request-failed")),EA.get())})}}function _h(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=xa(r,e,n);return s.customData._tokenResponse=t,s}function fw(r){return r!==void 0&&r.enterprise!==void 0}class SA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CA(r,e){return _i(r,"GET","/v2/recaptchaConfig",yi(r,e))}async function DA(r,e){return _i(r,"POST","/v1/accounts:delete",e)}async function Zh(r,e){return _i(r,"POST","/v1/accounts:lookup",e)}function hu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AA(r,e=!1){const t=jt(r),n=await t.getIdToken(e),s=wv(n);Ce(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:n,authTime:hu(_g(s.auth_time)),issuedAtTime:hu(_g(s.iat)),expirationTime:hu(_g(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function _g(r){return Number(r)*1e3}function wv(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const s=SE(t);return s?JSON.parse(s):(jh("Failed to decode base64 JWT payload"),null)}catch(s){return jh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function pw(r){const e=wv(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function yu(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ma&&NA(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function NA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class RA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Jh(r){const e=r.auth,t=await r.getIdToken(),n=await yu(r,Zh(e,{idToken:t}));Ce(n?.users.length,e,"internal-error");const s=n.users[0];r._notifyReloadListener(s);const o=s.providerUserInfo?.length?BE(s.providerUserInfo):[],c=IA(r.providerData,o),h=r.isAnonymous,m=!(r.email&&s.passwordHash)&&!c?.length,v=h?m:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new zg(s.createdAt,s.lastLoginAt),isAnonymous:v};Object.assign(r,y)}async function kA(r){const e=jt(r);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IA(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function BE(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function MA(r,e){const t=await FE(r,{},async()=>{const n=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=r.config,c=await zE(r,s,"/v1/token",`key=${o}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:n};return r.emulatorConfig&&So(r.emulatorConfig.host)&&(m.credentials="include"),UE.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jA(r,e){return _i(r,"POST","/v2/accounts:revokeToken",yi(r,e))}class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=pw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await MA(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,c=new Dl;return n&&(Ce(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),s&&(Ce(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Ce(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return ri("not implemented")}}function ts(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new RA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await yu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AA(this,e)}reload(){return kA(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await yu(this,DA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,v=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:k,stsTokenManager:L}=t;Ce(w&&L,e,"internal-error");const T=Dl.fromJSON(this.name,L);Ce(typeof w=="string",e,"internal-error"),ts(n,e.name),ts(s,e.name),Ce(typeof E=="boolean",e,"internal-error"),Ce(typeof S=="boolean",e,"internal-error"),ts(o,e.name),ts(c,e.name),ts(h,e.name),ts(m,e.name),ts(v,e.name),ts(y,e.name);const R=new jr({uid:w,auth:e,email:s,emailVerified:E,displayName:n,isAnonymous:S,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:T,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(R.providerData=k.map(q=>({...q}))),m&&(R._redirectEventId=m),R}static async _fromIdTokenResponse(e,t,n=!1){const s=new Dl;s.updateFromServerResponse(t);const o=new jr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Jh(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?BE(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,h=new Dl;h.updateFromIdToken(n);const m=new jr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new zg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(m,v),m}}const mw=new Map;function ai(r){hi(r instanceof Function,"Expected a class definition");let e=mw.get(r);return e?(hi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,mw.set(r,e),e)}class HE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HE.type="NONE";const gw=HE;function Oh(r,e,t){return`firebase:${r}:${e}:${t}`}class Al{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Oh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Oh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zh(this.auth,{idToken:e}).catch(()=>{});return t?jr._fromGetAccountInfoResponse(this.auth,t,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Al(ai(gw),e,n);const s=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let o=s[0]||ai(gw);const c=Oh(n,e.config.apiKey,e.name);let h=null;for(const v of t)try{const y=await v._get(c);if(y){let w;if(typeof y=="string"){const E=await Zh(e,{idToken:y}).catch(()=>{});if(!E)break;w=await jr._fromGetAccountInfoResponse(e,E,y)}else w=jr._fromJSON(e,y);v!==o&&(h=w),o=v;break}}catch{}const m=s.filter(v=>v._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Al(o,e,n):(o=m[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async v=>{if(v!==o)try{await v._remove(c)}catch{}})),new Al(o,e,n))}}function vw(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KE(e))return"Blackberry";if(XE(e))return"Webos";if(YE(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(QE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function qE(r=vn()){return/firefox\//i.test(r)}function YE(r=vn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(r=vn()){return/crios\//i.test(r)}function WE(r=vn()){return/iemobile/i.test(r)}function QE(r=vn()){return/android/i.test(r)}function KE(r=vn()){return/blackberry/i.test(r)}function XE(r=vn()){return/webos/i.test(r)}function bv(r=vn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function OA(r=vn()){return bv(r)&&!!window.navigator?.standalone}function PA(){return XC()&&document.documentMode===10}function $E(r=vn()){return bv(r)||QE(r)||XE(r)||KE(r)||/windows phone/i.test(r)||WE(r)}function ZE(r,e=[]){let t;switch(r){case"Browser":t=vw(vn());break;case"Worker":t=`${vw(vn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Co}/${n}`}class LA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((c,h)=>{try{const m=e(o);c(m)}catch(m){h(m)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function VA(r,e={}){return _i(r,"GET","/v2/passwordPolicy",yi(r,e))}const UA=6;class FA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??UA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class zA{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yw(this),this.idTokenSubscription=new yw(this),this.beforeStateQueue=new LA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zh(this,{idToken:e}),n=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=n?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&h?.user&&(n=h.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_A()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(si(this));const t=e?jt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VA(this),t=new FA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await jA(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ai(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,n,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ss(r){return jt(r)}class yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=aD(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BA(r){Of=r}function JE(r){return Of.loadJS(r)}function HA(){return Of.recaptchaEnterpriseScript}function qA(){return Of.gapiScript}function YA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class GA{constructor(){this.enterprise=new WA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class WA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QA="recaptcha-enterprise",e2="NO_RECAPTCHA";class KA{constructor(e){this.type=QA,this.auth=Ss(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{CA(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const v=new SA(m);return o.tenantId==null?o._agentRecaptchaConfig=v:o._tenantRecaptchaConfigs[o.tenantId]=v,c(v.siteKey)}}).catch(m=>{h(m)})})}function s(o,c,h){const m=window.grecaptcha;fw(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(v=>{c(v)}).catch(()=>{c(e2)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GA().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{n(this.auth).then(h=>{if(!t&&fw(window.grecaptcha))s(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=HA();m.length!==0&&(m+=h),JE(m).then(()=>{s(h,o,c)}).catch(v=>{c(v)})}}).catch(h=>{c(h)})})}}async function _w(r,e,t,n=!1,s=!1){const o=new KA(r);let c;if(s)c=e2;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,v=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:v,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return n?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function ef(r,e,t,n,s){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _w(r,e,t,t==="getOobCode");return n(r,o)}else return n(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _w(r,e,t,t==="getOobCode");return n(r,c)}else return Promise.reject(o)})}function XA(r,e){const t=jf(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(vo(o,e??{}))return s;Fr(s,"already-initialized")}return t.initialize({options:e})}function $A(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(ai);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function ZA(r,e,t){const n=Ss(r);Ce(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=t2(e),{host:c,port:h}=JA(e),m=h===null?"":`:${h}`,v={url:`${o}//${c}${m}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ce(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ce(vo(v,n.config.emulator)&&vo(y,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=v,n.emulatorConfig=y,n.settings.appVerificationDisabledForTesting=!0,So(c)?(fv(`${o}//${c}${m}`),pv("Auth",!0)):eN()}function t2(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function JA(r){const e=t2(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:ww(n.substr(o.length+1))}}else{const[o,c]=n.split(":");return{host:o,port:ww(c)}}}function ww(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function eN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Ev{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}async function tN(r,e){return _i(r,"POST","/v1/accounts:signUp",e)}async function nN(r,e){return ju(r,"POST","/v1/accounts:signInWithPassword",yi(r,e))}async function n2(r,e){return _i(r,"POST","/v1/accounts:sendOobCode",yi(r,e))}async function rN(r,e){return n2(r,e)}async function aN(r,e){return n2(r,e)}async function iN(r,e){return ju(r,"POST","/v1/accounts:signInWithEmailLink",yi(r,e))}async function sN(r,e){return ju(r,"POST","/v1/accounts:signInWithEmailLink",yi(r,e))}class _u extends Ev{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new _u(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new _u(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,t,"signInWithPassword",nN);case"emailLink":return iN(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ef(e,n,"signUpPassword",tN);case"emailLink":return sN(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nl(r,e){return ju(r,"POST","/v1/accounts:signInWithIdp",yi(r,e))}const oN="http://localhost";class _o extends Ev{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const c=new _o(n,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Nl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Nl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Nl(e,t)}buildRequest(){const e={requestUri:oN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}function lN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cN(r){const e=ru(au(r)).link,t=e?ru(au(e)).deep_link_id:null,n=ru(au(r)).deep_link_id;return(n?ru(au(n)).link:null)||n||t||e||r}class xv{constructor(e){const t=ru(au(e)),n=t.apiKey??null,s=t.oobCode??null,o=lN(t.mode??null);Ce(n&&s&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cN(e);try{return new xv(t)}catch{return null}}}class Wl{constructor(){this.providerId=Wl.PROVIDER_ID}static credential(e,t){return _u._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xv.parseLink(t);return Ce(n,"argument-error"),_u._fromEmailAndCode(e,n.code,n.tenantId)}}Wl.PROVIDER_ID="password";Wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class r2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ou extends r2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rs extends Ou{constructor(){super("facebook.com")}static credential(e){return _o._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";class as extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _o._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return as.credential(t,n)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";class is extends Ou{constructor(){super("github.com")}static credential(e){return _o._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";class ss extends Ou{constructor(){super("twitter.com")}static credential(e,t){return _o._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ss.credential(t,n)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";async function uN(r,e){return ju(r,"POST","/v1/accounts:signUp",yi(r,e))}class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await jr._fromIdTokenResponse(e,n,s),c=bw(n);return new wo({user:o,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=bw(n);return new wo({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function bw(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class tf extends Ma{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new tf(e,t,n,s)}}function a2(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(r,o,e,n):o})}async function dN(r,e,t=!1){const n=await yu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return wo._forOperation(r,"link",n)}async function hN(r,e,t=!1){const{auth:n}=r;if(Kn(n.app))return Promise.reject(si(n));const s="reauthenticate";try{const o=await yu(r,a2(n,s,e,r),t);Ce(o.idToken,n,"internal-error");const c=wv(o.idToken);Ce(c,n,"internal-error");const{sub:h}=c;return Ce(r.uid===h,n,"user-mismatch"),wo._forOperation(r,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Fr(n,"user-mismatch"),o}}async function i2(r,e,t=!1){if(Kn(r.app))return Promise.reject(si(r));const n="signIn",s=await a2(r,n,e),o=await wo._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(o.user),o}async function fN(r,e){return i2(Ss(r),e)}async function s2(r){const e=Ss(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pN(r,e,t){const n=Ss(r);await ef(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aN)}async function o2(r,e,t){if(Kn(r.app))return Promise.reject(si(r));const n=Ss(r),c=await ef(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uN).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&s2(r),m}),h=await wo._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(h.user),h}function l2(r,e,t){return Kn(r.app)?Promise.reject(si(r)):fN(jt(r),Wl.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&s2(r),n})}async function mN(r,e){const t=jt(r),s={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()},{email:o}=await rN(t.auth,s);o!==r.email&&await r.reload()}function gN(r,e,t,n){return jt(r).onIdTokenChanged(e,t,n)}function vN(r,e,t){return jt(r).beforeAuthStateChanged(e,t)}function yN(r,e,t,n){return jt(r).onAuthStateChanged(e,t,n)}function Pf(r){return jt(r).signOut()}const nf="__sak";class c2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _N=1e3,wN=10;class u2 extends c2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},o=this.storage.getItem(n);PA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wN):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},_N)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}u2.type="LOCAL";const bN=u2;class d2 extends c2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}d2.type="SESSION";const h2=d2;function EN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new Lf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const h=Array.from(c).map(async v=>v(t.origin,o)),m=await EN(h);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];function Tv(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class xN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((h,m)=>{const v=Tv("",20);s.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},n);c={messageChannel:s,onMessage(w){const E=w;if(E.data.eventId===v)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(y),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ta(){return window}function TN(r){Ta().location.href=r}function f2(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function SN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CN(){return navigator?.serviceWorker?.controller||null}function DN(){return f2()?self:null}const p2="firebaseLocalStorageDb",AN=1,rf="firebaseLocalStorage",m2="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vf(r,e){return r.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function NN(){const r=indexedDB.deleteDatabase(p2);return new Pu(r).toPromise()}function Bg(){const r=indexedDB.open(p2,AN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(rf,{keyPath:m2})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(rf)?e(n):(n.close(),await NN(),e(await Bg()))})})}async function Ew(r,e,t){const n=Vf(r,!0).put({[m2]:e,value:t});return new Pu(n).toPromise()}async function RN(r,e){const t=Vf(r,!1).get(e),n=await new Pu(t).toPromise();return n===void 0?null:n.value}function xw(r,e){const t=Vf(r,!0).delete(e);return new Pu(t).toPromise()}const kN=800,IN=3;class g2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>IN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(DN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SN(),!this.activeServiceWorker)return;this.sender=new xN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await Ew(e,nf,"1"),await xw(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ew(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>RN(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Vf(s,!1).getAll();return new Pu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g2.type="LOCAL";const MN=g2;new Mu(3e4,6e4);function jN(r,e){return e?ai(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Sv extends Ev{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ON(r){return i2(r.auth,new Sv(r),r.bypassAuthState)}function PN(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),hN(t,new Sv(r),r.bypassAuthState)}async function LN(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),dN(t,new Sv(r),r.bypassAuthState)}class v2{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ON;case"linkViaPopup":case"linkViaRedirect":return LN;case"reauthViaPopup":case"reauthViaRedirect":return PN;default:Fr(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const VN=new Mu(2e3,1e4);class Cl extends v2{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,Cl.currentPopupAction&&Cl.currentPopupAction.cancel(),Cl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=Tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VN.get())};e()}}Cl.currentPopupAction=null;const UN="pendingRedirect",Ph=new Map;class FN extends v2{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const n=await zN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zN(r,e){const t=qN(e),n=HN(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function BN(r,e){Ph.set(r._key(),e)}function HN(r){return ai(r._redirectPersistence)}function qN(r){return Oh(UN,r.config.apiKey,r.name)}async function YN(r,e,t=!1){if(Kn(r.app))return Promise.reject(si(r));const n=Ss(r),s=jN(n,e),c=await new FN(n,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}const GN=600*1e3;class WN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!y2(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xa(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tw(e))}saveEventToCache(e){this.cachedEventUids.add(Tw(e)),this.lastProcessedEventTime=Date.now()}}function Tw(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function y2({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function QN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y2(r);default:return!1}}async function KN(r,e={}){return _i(r,"GET","/v1/projects",e)}const XN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$N=/^https?/;async function ZN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KN(r);for(const t of e)try{if(JN(t))return}catch{}Fr(r,"unauthorized-domain")}function JN(r){const e=Fg(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!$N.test(t))return!1;if(XN.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const eR=new Mu(3e4,6e4);function Sw(){const r=Ta().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function tR(r){return new Promise((e,t)=>{function n(){Sw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sw(),t(xa(r,"network-request-failed"))},timeout:eR.get()})}if(Ta().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ta().gapi?.load)n();else{const s=YA("iframefcb");return Ta()[s]=()=>{gapi.load?n():t(xa(r,"network-request-failed"))},JE(`${qA()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function nR(r){return Lh=Lh||tR(r),Lh}const rR=new Mu(5e3,15e3),aR="__/auth/iframe",iR="emulator/auth/iframe",sR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lR(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_v(e,iR):`https://${r.config.authDomain}/${aR}`,n={apiKey:e.apiKey,appName:r.name,v:Co},s=oR.get(r.config.apiHost);s&&(n.eid=s);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Iu(n).slice(1)}`}async function cR(r){const e=await nR(r),t=Ta().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:lR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sR,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const c=xa(r,"network-request-failed"),h=Ta().setTimeout(()=>{o(c)},rR.get());function m(){Ta().clearTimeout(h),s(n)}n.ping(m).then(m,()=>{o(c)})}))}const uR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dR=500,hR=600,fR="_blank",pR="http://localhost";class Cw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mR(r,e,t,n=dR,s=hR){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let h="";const m={...uR,width:n.toString(),height:s.toString(),top:o,left:c},v=vn().toLowerCase();t&&(h=GE(v)?fR:t),qE(v)&&(e=e||pR,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[S,k])=>`${E}${S}=${k},`,"");if(OA(v)&&h!=="_self")return gR(e||"",h),new Cw(null);const w=window.open(e||"",h,y);Ce(w,r,"popup-blocked");try{w.focus()}catch{}return new Cw(w)}function gR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const vR="__/auth/handler",yR="emulator/auth/handler",_R=encodeURIComponent("fac");async function Dw(r,e,t,n,s,o){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Co,eventId:s};if(e instanceof r2){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",rD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))c[y]=w}if(e instanceof Ou){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(c.scopes=y.join(","))}r.tenantId&&(c.tid=r.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await r._getAppCheckToken(),v=m?`#${_R}=${encodeURIComponent(m)}`:"";return`${wR(r)}?${Iu(h).slice(1)}${v}`}function wR({config:r}){return r.emulator?_v(r,yR):`https://${r.authDomain}/${vR}`}const wg="webStorageSupport";class bR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h2,this._completeRedirectFn=YN,this._overrideRedirectResult=BN}async _openPopup(e,t,n,s){hi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Dw(e,t,n,Fg(),s);return mR(e,o,Tv())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await Dw(e,t,n,Fg(),s);return TN(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(hi(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await cR(e),n=new WN(e);return t.register("authEvent",s=>(Ce(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wg,{type:wg},s=>{const o=s?.[0]?.[wg];o!==void 0&&t(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $E()||YE()||bv()}}const ER=bR;var Aw="@firebase/auth",Nw="1.11.1";class xR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function TR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SR(r){yo(new ms("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=n.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:c,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(r)},v=new zA(n,s,o,m);return $A(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),yo(new ms("auth-internal",e=>{const t=Ss(e.getProvider("auth").getImmediate());return(n=>new xR(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ea(Aw,Nw,TR(r)),Ea(Aw,Nw,"esm2020")}const CR=300,DR=NE("authIdTokenMaxAge")||CR;let Rw=null;const AR=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>DR)return;const s=t?.token;Rw!==s&&(Rw=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NR(r=vv()){const e=jf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=XA(r,{popupRedirectResolver:ER,persistence:[MN,bN,h2]}),n=NE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const c=AR(o.toString());vN(t,c,()=>c(t.currentUser)),gN(t,h=>c(h))}}const s=CE("auth");return s&&ZA(t,`http://${s}`),t}function RR(){return document.getElementsByTagName("head")?.[0]??document}BA({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const o=xa("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",RR().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SR("Browser");var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ds,_2;(function(){var r;function e(O,C){function N(){}N.prototype=C.prototype,O.F=C.prototype,O.prototype=new N,O.prototype.constructor=O,O.D=function(M,j,P){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return C.prototype[j].apply(M,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,C,N){N||(N=0);const M=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)M[j]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(j=0;j<16;++j)M[j]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=O.g[0],N=O.g[1],j=O.g[2];let P=O.g[3],I;I=C+(P^N&(j^P))+M[0]+3614090360&4294967295,C=N+(I<<7&4294967295|I>>>25),I=P+(j^C&(N^j))+M[1]+3905402710&4294967295,P=C+(I<<12&4294967295|I>>>20),I=j+(N^P&(C^N))+M[2]+606105819&4294967295,j=P+(I<<17&4294967295|I>>>15),I=N+(C^j&(P^C))+M[3]+3250441966&4294967295,N=j+(I<<22&4294967295|I>>>10),I=C+(P^N&(j^P))+M[4]+4118548399&4294967295,C=N+(I<<7&4294967295|I>>>25),I=P+(j^C&(N^j))+M[5]+1200080426&4294967295,P=C+(I<<12&4294967295|I>>>20),I=j+(N^P&(C^N))+M[6]+2821735955&4294967295,j=P+(I<<17&4294967295|I>>>15),I=N+(C^j&(P^C))+M[7]+4249261313&4294967295,N=j+(I<<22&4294967295|I>>>10),I=C+(P^N&(j^P))+M[8]+1770035416&4294967295,C=N+(I<<7&4294967295|I>>>25),I=P+(j^C&(N^j))+M[9]+2336552879&4294967295,P=C+(I<<12&4294967295|I>>>20),I=j+(N^P&(C^N))+M[10]+4294925233&4294967295,j=P+(I<<17&4294967295|I>>>15),I=N+(C^j&(P^C))+M[11]+2304563134&4294967295,N=j+(I<<22&4294967295|I>>>10),I=C+(P^N&(j^P))+M[12]+1804603682&4294967295,C=N+(I<<7&4294967295|I>>>25),I=P+(j^C&(N^j))+M[13]+4254626195&4294967295,P=C+(I<<12&4294967295|I>>>20),I=j+(N^P&(C^N))+M[14]+2792965006&4294967295,j=P+(I<<17&4294967295|I>>>15),I=N+(C^j&(P^C))+M[15]+1236535329&4294967295,N=j+(I<<22&4294967295|I>>>10),I=C+(j^P&(N^j))+M[1]+4129170786&4294967295,C=N+(I<<5&4294967295|I>>>27),I=P+(N^j&(C^N))+M[6]+3225465664&4294967295,P=C+(I<<9&4294967295|I>>>23),I=j+(C^N&(P^C))+M[11]+643717713&4294967295,j=P+(I<<14&4294967295|I>>>18),I=N+(P^C&(j^P))+M[0]+3921069994&4294967295,N=j+(I<<20&4294967295|I>>>12),I=C+(j^P&(N^j))+M[5]+3593408605&4294967295,C=N+(I<<5&4294967295|I>>>27),I=P+(N^j&(C^N))+M[10]+38016083&4294967295,P=C+(I<<9&4294967295|I>>>23),I=j+(C^N&(P^C))+M[15]+3634488961&4294967295,j=P+(I<<14&4294967295|I>>>18),I=N+(P^C&(j^P))+M[4]+3889429448&4294967295,N=j+(I<<20&4294967295|I>>>12),I=C+(j^P&(N^j))+M[9]+568446438&4294967295,C=N+(I<<5&4294967295|I>>>27),I=P+(N^j&(C^N))+M[14]+3275163606&4294967295,P=C+(I<<9&4294967295|I>>>23),I=j+(C^N&(P^C))+M[3]+4107603335&4294967295,j=P+(I<<14&4294967295|I>>>18),I=N+(P^C&(j^P))+M[8]+1163531501&4294967295,N=j+(I<<20&4294967295|I>>>12),I=C+(j^P&(N^j))+M[13]+2850285829&4294967295,C=N+(I<<5&4294967295|I>>>27),I=P+(N^j&(C^N))+M[2]+4243563512&4294967295,P=C+(I<<9&4294967295|I>>>23),I=j+(C^N&(P^C))+M[7]+1735328473&4294967295,j=P+(I<<14&4294967295|I>>>18),I=N+(P^C&(j^P))+M[12]+2368359562&4294967295,N=j+(I<<20&4294967295|I>>>12),I=C+(N^j^P)+M[5]+4294588738&4294967295,C=N+(I<<4&4294967295|I>>>28),I=P+(C^N^j)+M[8]+2272392833&4294967295,P=C+(I<<11&4294967295|I>>>21),I=j+(P^C^N)+M[11]+1839030562&4294967295,j=P+(I<<16&4294967295|I>>>16),I=N+(j^P^C)+M[14]+4259657740&4294967295,N=j+(I<<23&4294967295|I>>>9),I=C+(N^j^P)+M[1]+2763975236&4294967295,C=N+(I<<4&4294967295|I>>>28),I=P+(C^N^j)+M[4]+1272893353&4294967295,P=C+(I<<11&4294967295|I>>>21),I=j+(P^C^N)+M[7]+4139469664&4294967295,j=P+(I<<16&4294967295|I>>>16),I=N+(j^P^C)+M[10]+3200236656&4294967295,N=j+(I<<23&4294967295|I>>>9),I=C+(N^j^P)+M[13]+681279174&4294967295,C=N+(I<<4&4294967295|I>>>28),I=P+(C^N^j)+M[0]+3936430074&4294967295,P=C+(I<<11&4294967295|I>>>21),I=j+(P^C^N)+M[3]+3572445317&4294967295,j=P+(I<<16&4294967295|I>>>16),I=N+(j^P^C)+M[6]+76029189&4294967295,N=j+(I<<23&4294967295|I>>>9),I=C+(N^j^P)+M[9]+3654602809&4294967295,C=N+(I<<4&4294967295|I>>>28),I=P+(C^N^j)+M[12]+3873151461&4294967295,P=C+(I<<11&4294967295|I>>>21),I=j+(P^C^N)+M[15]+530742520&4294967295,j=P+(I<<16&4294967295|I>>>16),I=N+(j^P^C)+M[2]+3299628645&4294967295,N=j+(I<<23&4294967295|I>>>9),I=C+(j^(N|~P))+M[0]+4096336452&4294967295,C=N+(I<<6&4294967295|I>>>26),I=P+(N^(C|~j))+M[7]+1126891415&4294967295,P=C+(I<<10&4294967295|I>>>22),I=j+(C^(P|~N))+M[14]+2878612391&4294967295,j=P+(I<<15&4294967295|I>>>17),I=N+(P^(j|~C))+M[5]+4237533241&4294967295,N=j+(I<<21&4294967295|I>>>11),I=C+(j^(N|~P))+M[12]+1700485571&4294967295,C=N+(I<<6&4294967295|I>>>26),I=P+(N^(C|~j))+M[3]+2399980690&4294967295,P=C+(I<<10&4294967295|I>>>22),I=j+(C^(P|~N))+M[10]+4293915773&4294967295,j=P+(I<<15&4294967295|I>>>17),I=N+(P^(j|~C))+M[1]+2240044497&4294967295,N=j+(I<<21&4294967295|I>>>11),I=C+(j^(N|~P))+M[8]+1873313359&4294967295,C=N+(I<<6&4294967295|I>>>26),I=P+(N^(C|~j))+M[15]+4264355552&4294967295,P=C+(I<<10&4294967295|I>>>22),I=j+(C^(P|~N))+M[6]+2734768916&4294967295,j=P+(I<<15&4294967295|I>>>17),I=N+(P^(j|~C))+M[13]+1309151649&4294967295,N=j+(I<<21&4294967295|I>>>11),I=C+(j^(N|~P))+M[4]+4149444226&4294967295,C=N+(I<<6&4294967295|I>>>26),I=P+(N^(C|~j))+M[11]+3174756917&4294967295,P=C+(I<<10&4294967295|I>>>22),I=j+(C^(P|~N))+M[2]+718787259&4294967295,j=P+(I<<15&4294967295|I>>>17),I=N+(P^(j|~C))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,O.g[2]=O.g[2]+j&4294967295,O.g[3]=O.g[3]+P&4294967295}n.prototype.v=function(O,C){C===void 0&&(C=O.length);const N=C-this.blockSize,M=this.C;let j=this.h,P=0;for(;P<C;){if(j==0)for(;P<=N;)s(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<C;)if(M[j++]=O.charCodeAt(P++),j==this.blockSize){s(this,M),j=0;break}}else for(;P<C;)if(M[j++]=O[P++],j==this.blockSize){s(this,M),j=0;break}}this.h=j,this.o+=C},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;C=this.o*8;for(var N=O.length-8;N<O.length;++N)O[N]=C&255,C/=256;for(this.v(O),O=Array(16),C=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)O[C++]=this.g[N]>>>M&255;return O};function o(O,C){var N=h;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=C(O)}function c(O,C){this.h=C;const N=[];let M=!0;for(let j=O.length-1;j>=0;j--){const P=O[j]|0;M&&P==C||(N[j]=P,M=!1)}this.g=N}var h={};function m(O){return-128<=O&&O<128?o(O,function(C){return new c([C|0],C<0?-1:0)}):new c([O|0],O<0?-1:0)}function v(O){if(isNaN(O)||!isFinite(O))return w;if(O<0)return T(v(-O));const C=[];let N=1;for(let M=0;O>=N;M++)C[M]=O/N|0,N*=4294967296;return new c(C,0)}function y(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return T(y(O.substring(1),C));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=v(Math.pow(C,8));let M=w;for(let P=0;P<O.length;P+=8){var j=Math.min(8,O.length-P);const I=parseInt(O.substring(P,P+j),C);j<8?(j=v(Math.pow(C,j)),M=M.j(j).add(v(I))):(M=M.j(N),M=M.add(v(I)))}return M}var w=m(0),E=m(1),S=m(16777216);r=c.prototype,r.m=function(){if(L(this))return-T(this).m();let O=0,C=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);O+=(M>=0?M:4294967296+M)*C,C*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(L(this))return"-"+T(this).toString(O);const C=v(Math.pow(O,6));var N=this;let M="";for(;;){const j=X(N,C).g;N=R(N,j.j(C));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(O);if(N=j,k(N))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(let C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function L(O){return O.h==-1}r.l=function(O){return O=R(this,O),L(O)?-1:k(O)?0:1};function T(O){const C=O.g.length,N=[];for(let M=0;M<C;M++)N[M]=~O.g[M];return new c(N,~O.h).add(E)}r.abs=function(){return L(this)?T(this):this},r.add=function(O){const C=Math.max(this.g.length,O.g.length),N=[];let M=0;for(let j=0;j<=C;j++){let P=M+(this.i(j)&65535)+(O.i(j)&65535),I=(P>>>16)+(this.i(j)>>>16)+(O.i(j)>>>16);M=I>>>16,P&=65535,I&=65535,N[j]=I<<16|P}return new c(N,N[N.length-1]&-2147483648?-1:0)};function R(O,C){return O.add(T(C))}r.j=function(O){if(k(this)||k(O))return w;if(L(this))return L(O)?T(this).j(T(O)):T(T(this).j(O));if(L(O))return T(this.j(T(O)));if(this.l(S)<0&&O.l(S)<0)return v(this.m()*O.m());const C=this.g.length+O.g.length,N=[];for(var M=0;M<2*C;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let j=0;j<O.g.length;j++){const P=this.i(M)>>>16,I=this.i(M)&65535,de=O.i(j)>>>16,fe=O.i(j)&65535;N[2*M+2*j]+=I*fe,q(N,2*M+2*j),N[2*M+2*j+1]+=P*fe,q(N,2*M+2*j+1),N[2*M+2*j+1]+=I*de,q(N,2*M+2*j+1),N[2*M+2*j+2]+=P*de,q(N,2*M+2*j+2)}for(O=0;O<C;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=C;O<2*C;O++)N[O]=0;return new c(N,0)};function q(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function B(O,C){this.g=O,this.h=C}function X(O,C){if(k(C))throw Error("division by zero");if(k(O))return new B(w,w);if(L(O))return C=X(T(O),C),new B(T(C.g),T(C.h));if(L(C))return C=X(O,T(C)),new B(T(C.g),C.h);if(O.g.length>30){if(L(O)||L(C))throw Error("slowDivide_ only works with positive integers.");for(var N=E,M=C;M.l(O)<=0;)N=Q(N),M=Q(M);var j=ae(N,1),P=ae(M,1);for(M=ae(M,2),N=ae(N,2);!k(M);){var I=P.add(M);I.l(O)<=0&&(j=j.add(N),P=I),M=ae(M,1),N=ae(N,1)}return C=R(O,j.j(C)),new B(j,C)}for(j=w;O.l(C)>=0;){for(N=Math.max(1,Math.floor(O.m()/C.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=v(N),I=P.j(C);L(I)||I.l(O)>0;)N-=M,P=v(N),I=P.j(C);k(P)&&(P=E),j=j.add(P),O=R(O,I)}return new B(j,O)}r.B=function(O){return X(this,O).h},r.and=function(O){const C=Math.max(this.g.length,O.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)&O.i(M);return new c(N,this.h&O.h)},r.or=function(O){const C=Math.max(this.g.length,O.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)|O.i(M);return new c(N,this.h|O.h)},r.xor=function(O){const C=Math.max(this.g.length,O.g.length),N=[];for(let M=0;M<C;M++)N[M]=this.i(M)^O.i(M);return new c(N,this.h^O.h)};function Q(O){const C=O.g.length+1,N=[];for(let M=0;M<C;M++)N[M]=O.i(M)<<1|O.i(M-1)>>>31;return new c(N,O.h)}function ae(O,C){const N=C>>5;C%=32;const M=O.g.length-N,j=[];for(let P=0;P<M;P++)j[P]=C>0?O.i(P+N)>>>C|O.i(P+N+1)<<32-C:O.i(P+N);return new c(j,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,_2=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=y,ds=c}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var w2,iu,b2,Vh,Hg,E2,x2,T2;(function(){var r,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var _=0;_<f.length;++_){var x=f[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var n=t(this);function s(f,_){if(_)e:{var x=n;f=f.split(".");for(var A=0;A<f.length-1;A++){var Y=f[A];if(!(Y in x))break e;x=x[Y]}f=f[f.length-1],A=x[f],_=_(A),_!=A&&_!=null&&e(x,f,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(_){var x=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&x.push([A,_[A]]);return x}});var o=o||{},c=this||self;function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function m(f,_,x){return f.call.apply(f.bind,arguments)}function v(f,_,x){return v=m,v.apply(null,arguments)}function y(f,_){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function w(f,_){function x(){}x.prototype=_.prototype,f.Z=_.prototype,f.prototype=new x,f.prototype.constructor=f,f.Ob=function(A,Y,J){for(var ue=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ue[Re-2]=arguments[Re];return _.prototype[Y].apply(A,ue)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function S(f){const _=f.length;if(_>0){const x=Array(_);for(let A=0;A<_;A++)x[A]=f[A];return x}return[]}function k(f,_){for(let A=1;A<arguments.length;A++){const Y=arguments[A];var x=typeof Y;if(x=x!="object"?x:Y?Array.isArray(Y)?"array":x:"null",x=="array"||x=="object"&&typeof Y.length=="number"){x=f.length||0;const J=Y.length||0;f.length=x+J;for(let ue=0;ue<J;ue++)f[x+ue]=Y[ue]}else f.push(Y)}}class L{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function T(f){c.setTimeout(()=>{throw f},0)}function R(){var f=O;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class q{constructor(){this.h=this.g=null}add(_,x){const A=B.get();A.set(_,x),this.h?this.h.next=A:this.g=A,this.h=A}}var B=new L(()=>new X,f=>f.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,ae=!1,O=new q,C=()=>{const f=Promise.resolve(void 0);Q=()=>{f.then(N)}};function N(){for(var f;f=R();){try{f.h.call(f.g)}catch(x){T(x)}var _=B;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}ae=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const x=()=>{};c.addEventListener("test",x,_),c.removeEventListener("test",x,_)}catch{}return f})();function I(f){return/^[\s\xa0]*$/.test(f)}function de(f,_){j.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}w(de,j),de.prototype.init=function(f,_){const x=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(x=="mouseover"?_=f.fromElement:x=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),U=0;function $(f,_,x,A,Y){this.listener=f,this.proxy=null,this.src=_,this.type=x,this.capture=!!A,this.ha=Y,this.key=++U,this.da=this.fa=!1}function Z(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ce(f,_,x){for(const A in f)_.call(x,f[A],A,f)}function ye(f,_){for(const x in f)_.call(void 0,f[x],x,f)}function Ie(f){const _={};for(const x in f)_[x]=f[x];return _}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(f,_){let x,A;for(let Y=1;Y<arguments.length;Y++){A=arguments[Y];for(x in A)f[x]=A[x];for(let J=0;J<le.length;J++)x=le[J],Object.prototype.hasOwnProperty.call(A,x)&&(f[x]=A[x])}}function Ye(f){this.src=f,this.g={},this.h=0}Ye.prototype.add=function(f,_,x,A,Y){const J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);const ue=fn(f,_,A,Y);return ue>-1?(_=f[ue],x||(_.fa=!1)):(_=new $(_,this.src,J,!!A,Y),_.fa=x,f.push(_)),_};function wt(f,_){const x=_.type;if(x in f.g){var A=f.g[x],Y=Array.prototype.indexOf.call(A,_,void 0),J;(J=Y>=0)&&Array.prototype.splice.call(A,Y,1),J&&(Z(_),f.g[x].length==0&&(delete f.g[x],f.h--))}}function fn(f,_,x,A){for(let Y=0;Y<f.length;++Y){const J=f[Y];if(!J.da&&J.listener==_&&J.capture==!!x&&J.ha==A)return Y}return-1}var Cn="closure_lm_"+(Math.random()*1e6|0),nr={};function yn(f,_,x,A,Y){if(Array.isArray(_)){for(let J=0;J<_.length;J++)yn(f,_[J],x,A,Y);return null}return x=Ns(x),f&&f[fe]?f.J(_,x,h(A)?!!A.capture:!1,Y):As(f,_,x,!1,A,Y)}function As(f,_,x,A,Y,J){if(!_)throw Error("Invalid event type");const ue=h(Y)?!!Y.capture:!!Y;let Re=Pa(f);if(Re||(f[Cn]=Re=new Ye(f)),x=Re.add(_,x,A,ue,J),x.proxy)return x;if(A=yr(),x.proxy=A,A.src=f,A.listener=x,f.addEventListener)P||(Y=ue),Y===void 0&&(Y=!1),f.addEventListener(_.toString(),A,Y);else if(f.attachEvent)f.attachEvent(Ln(_.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function yr(){function f(x){return _.call(f.src,f.listener,x)}const _=qr;return f}function Ei(f,_,x,A,Y){if(Array.isArray(_))for(var J=0;J<_.length;J++)Ei(f,_[J],x,A,Y);else A=h(A)?!!A.capture:!!A,x=Ns(x),f&&f[fe]?(f=f.i,J=String(_).toString(),J in f.g&&(_=f.g[J],x=fn(_,x,A,Y),x>-1&&(Z(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete f.g[J],f.h--)))):f&&(f=Pa(f))&&(_=f.g[_.toString()],f=-1,_&&(f=fn(_,x,A,Y)),(x=f>-1?_[f]:null)&&Hr(x))}function Hr(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[fe])wt(_.i,f);else{var x=f.type,A=f.proxy;_.removeEventListener?_.removeEventListener(x,A,f.capture):_.detachEvent?_.detachEvent(Ln(x),A):_.addListener&&_.removeListener&&_.removeListener(A),(x=Pa(_))?(wt(x,f),x.h==0&&(x.src=null,_[Cn]=null)):Z(f)}}}function Ln(f){return f in nr?nr[f]:nr[f]="on"+f}function qr(f,_){if(f.da)f=!0;else{_=new de(_,this);const x=f.listener,A=f.ha||f.src;f.fa&&Hr(f),f=x.call(A,_)}return f}function Pa(f){return f=f[Cn],f instanceof Ye?f:null}var Yr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ns(f){return typeof f=="function"?f:(f[Yr]||(f[Yr]=function(_){return f.handleEvent(_)}),f[Yr])}function St(){M.call(this),this.i=new Ye(this),this.M=this,this.G=null}w(St,M),St.prototype[fe]=!0,St.prototype.removeEventListener=function(f,_,x,A){Ei(this,f,_,x,A)};function Pt(f,_){var x,A=f.G;if(A)for(x=[];A;A=A.G)x.push(A);if(f=f.M,A=_.type||_,typeof _=="string")_=new j(_,f);else if(_ instanceof j)_.target=_.target||f;else{var Y=_;_=new j(A,f),be(_,Y)}Y=!0;let J,ue;if(x)for(ue=x.length-1;ue>=0;ue--)J=_.g=x[ue],Y=Ct(J,A,!0,_)&&Y;if(J=_.g=f,Y=Ct(J,A,!0,_)&&Y,Y=Ct(J,A,!1,_)&&Y,x)for(ue=0;ue<x.length;ue++)J=_.g=x[ue],Y=Ct(J,A,!1,_)&&Y}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const x=f.g[_];for(let A=0;A<x.length;A++)Z(x[A]);delete f.g[_],f.h--}}this.G=null},St.prototype.J=function(f,_,x,A){return this.i.add(String(f),_,!1,x,A)},St.prototype.K=function(f,_,x,A){return this.i.add(String(f),_,!0,x,A)};function Ct(f,_,x,A){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let Y=!0;for(let J=0;J<_.length;++J){const ue=_[J];if(ue&&!ue.da&&ue.capture==x){const Re=ue.listener,At=ue.ha||ue.src;ue.fa&&wt(f.i,ue),Y=Re.call(At,A)!==!1&&Y}}return Y&&!A.defaultPrevented}function Jl(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(f,_||0)}function Rs(f){f.g=Jl(()=>{f.g=null,f.i&&(f.i=!1,Rs(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class $t extends M{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Rs(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(f){M.call(this),this.h=f,this.g={}}w(La,M);var ks=[];function xi(f){ce(f.g,function(_,x){this.g.hasOwnProperty(x)&&Hr(_)},f),f.g={}}La.prototype.N=function(){La.Z.N.call(this),xi(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=c.JSON.stringify,Se=c.JSON.parse,Qt=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function _r(){}function wr(){}var _n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){j.call(this,"d")}w(Dt,j);function wn(){j.call(this,"c")}w(wn,j);var mt={},Qu=null;function ko(){return Qu=Qu||new St}mt.Ia="serverreachability";function Ku(f){j.call(this,mt.Ia,f)}w(Ku,j);function Gr(f){const _=ko();Pt(_,new Ku(_))}mt.STAT_EVENT="statevent";function Is(f,_){j.call(this,mt.STAT_EVENT,f),this.stat=_}w(Is,j);function Lt(f){const _=ko();Pt(_,new Is(_,f))}mt.Ja="timingevent";function Wr(f,_){j.call(this,mt.Ja,f),this.size=_}w(Wr,j);function Qr(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},_)}function br(){this.g=!0}br.prototype.ua=function(){this.g=!1};function pp(f,_,x,A,Y,J){f.info(function(){if(f.g)if(J){var ue="",Re=J.split("&");for(let Xe=0;Xe<Re.length;Xe++){var At=Re[Xe].split("=");if(At.length>1){const gt=At[0];At=At[1];const sr=gt.split("_");ue=sr.length>=2&&sr[1]=="type"?ue+(gt+"="+At+"&"):ue+(gt+"=redacted&")}}}else ue=null;else ue=J;return"XMLHTTP REQ ("+A+") [attempt "+Y+"]: "+_+`
`+x+`
`+ue})}function Xu(f,_,x,A,Y,J,ue){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Y+"]: "+_+`
`+x+`
`+J+" "+ue})}function Kr(f,_,x,A){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+mp(f,x)+(A?" "+A:"")})}function Ms(f,_){f.info(function(){return"TIMEOUT: "+_})}br.prototype.info=function(){};function mp(f,_){if(!f.g)return _;if(!_)return null;try{const J=JSON.parse(_);if(J){for(f=0;f<J.length;f++)if(Array.isArray(J[f])){var x=J[f];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var Y=A[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return me(J)}catch{return _}}var js={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ec={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tc;function Os(){}w(Os,_r),Os.prototype.g=function(){return new XMLHttpRequest},tc=new Os;function Va(f){return encodeURIComponent(String(f))}function $u(f){var _=1;f=f.split(":");const x=[];for(;_>0&&f.length;)x.push(f.shift()),_--;return f.length&&x.push(f.join(":")),x}function Er(f,_,x,A){this.j=f,this.i=_,this.l=x,this.S=A||1,this.V=new La(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Vt={},Zt={};function Xr(f,_,x){f.M=1,f.A=Ps(Ft(_)),f.u=x,f.R=!0,Io(f,null)}function Io(f,_){f.F=Date.now(),$r(f),f.B=Ft(f.A);var x=f.B,A=f.S;Array.isArray(A)||(A=[String(A)]),Po(x.i,"t",A),f.C=0,x=f.j.L,f.h=new xr,f.g=hd(f.j,x?_:null,!f.u),f.P>0&&(f.O=new $t(v(f.Y,f,f.g),f.P)),_=f.V,x=f.g,A=f.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ks[0]=Y.toString()),Y=ks);for(let J=0;J<Y.length;J++){const ue=yn(x,Y[J],A||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=f.J?Ie(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Gr(),pp(f.i,f.v,f.B,f.l,f.S,f.u)}Er.prototype.ba=function(f){f=f.target;const _=this.O;_&&Cr(f)==3?_.j():this.Y(f)},Er.prototype.Y=function(f){try{if(f==this.g)e:{const Re=Cr(this.g),At=this.g.ya(),Xe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Re!=4||At==7||(At==8||Xe<=0?Gr(3):Gr(2)),Zr(this);var _=this.g.ca();this.X=_;var x=gp(this);if(this.o=_==200,Xu(this.i,this.v,this.B,this.l,this.S,Re,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,Y=this.g;if((A=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var J=A;break t}}J=null}if(f=J)Kr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jr(this,f);else{this.o=!1,this.m=3,Lt(12),Vn(this),rr(this);break e}}if(this.R){f=!0;let gt;for(;!this.K&&this.C<x.length;)if(gt=Ju(this,x),gt==Zt){Re==4&&(this.m=4,Lt(14),f=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Vt){this.m=4,Lt(15),Kr(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Kr(this.i,this.l,gt,null),Jr(this,gt);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||x.length!=0||this.h.h||(this.m=1,Lt(16),f=!1),this.o=this.o&&f,!f)Kr(this.i,this.l,x,"[Invalid Chunked Response]"),Vn(this),rr(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),gc(ue),ue.P=!0,Lt(11))}}else Kr(this.i,this.l,x,null),Jr(this,x);Re==4&&Vn(this),this.o&&!this.K&&(Re==4?ld(this.j,this):(this.o=!1,$r(this)))}else Fa(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Vn(this),rr(this)}}}catch{}finally{}};function gp(f){if(!Zu(f))return f.g.la();const _=nn(f.g);if(_==="")return"";let x="";const A=_.length,Y=Cr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Vn(f),rr(f),"";f.h.i=new c.TextDecoder}for(let J=0;J<A;J++)f.h.h=!0,x+=f.h.i.decode(_[J],{stream:!(Y&&J==A-1)});return _.length=0,f.h.g+=x,f.C=0,f.h.g}function Zu(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ju(f,_){var x=f.C,A=_.indexOf(`
`,x);return A==-1?Zt:(x=Number(_.substring(x,A)),isNaN(x)?Vt:(A+=1,A+x>_.length?Zt:(_=_.slice(A,A+x),f.C=A+x,_)))}Er.prototype.cancel=function(){this.K=!0,Vn(this)};function $r(f){f.T=Date.now()+f.H,Mo(f,f.H)}function Mo(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Qr(v(f.aa,f),_)}function Zr(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Er.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ms(this.i,this.B),this.M!=2&&(Gr(),Lt(17)),Vn(this),this.m=2,rr(this)):Mo(this,this.T-f)};function rr(f){f.j.I==0||f.K||ld(f.j,f)}function Vn(f){Zr(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,xi(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function Jr(f,_){try{var x=f.j;if(x.I!=0&&(x.g==f||ta(x.h,f))){if(!f.L&&ta(x.h,f)&&x.I==3){try{var A=x.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Y=A;if(Y[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<f.F)zo(x),ki(x);else break e;Hs(x),Lt(18)}}else x.xa=Y[1],0<x.xa-x.K&&Y[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Qr(v(x.Va,x),6e3));ea(x.h)<=1&&x.ta&&(x.ta=void 0)}else oa(x,11)}else if((f.L||x.g==f)&&zo(x),!I(_))for(Y=x.Ba.g.parse(_),_=0;_<Y.length;_++){let Xe=Y[_];const gt=Xe[0];if(!(gt<=x.K))if(x.K=gt,Xe=Xe[1],x.I==2)if(Xe[0]=="c"){x.M=Xe[1],x.ba=Xe[2];const sr=Xe[3];sr!=null&&(x.ka=sr,x.j.info("VER="+x.ka));const la=Xe[4];la!=null&&(x.za=la,x.j.info("SVER="+x.za));const Dr=Xe[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(A=1.5*Dr,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Ar=f.g;if(Ar){const qs=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var J=A.h;J.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ac(J,J.h),J.h=null))}if(A.G){const Bo=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(A.wa=Bo,tt(A.J,A.G,Bo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-f.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var ue=f;if(A.na=dd(A,A.L?A.ba:null,A.W),ue.L){ic(A.h,ue);var Re=ue,At=A.O;At&&(Re.H=At),Re.D&&(Zr(Re),$r(Re)),A.g=ue}else sd(A);x.i.length>0&&sa(x)}else Xe[0]!="stop"&&Xe[0]!="close"||oa(x,7);else x.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?oa(x,7):pc(x):Xe[0]!="noop"&&x.l&&x.l.qa(Xe),x.A=0)}}Gr(4)}catch{}}var Ut=class{constructor(f,_){this.g=f,this.map=_}};function nc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ea(f){return f.h?1:f.g?f.g.size:0}function ta(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function ac(f,_){f.g?f.g.add(_):f.h=_}function ic(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}nc.prototype.cancel=function(){if(this.i=sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function sc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const x of f.g.values())_=_.concat(x.G);return _}return S(f.i)}var ed=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jo(f,_){if(f){f=f.split("&");for(let x=0;x<f.length;x++){const A=f[x].indexOf("=");let Y,J=null;A>=0?(Y=f[x].substring(0,A),J=f[x].substring(A+1)):Y=f[x],_(Y,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Un(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof Un?(this.l=f.l,Jt(this,f.j),this.o=f.o,this.g=f.g,Ti(this,f.u),this.h=f.h,oc(this,ad(f.i)),this.m=f.m):f&&(_=String(f).match(ed))?(this.l=!1,Jt(this,_[1]||"",!0),this.o=na(_[2]||""),this.g=na(_[3]||"",!0),Ti(this,_[4]),this.h=na(_[5]||"",!0),oc(this,_[6]||"",!0),this.m=na(_[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}Un.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Ls(_,Oo,!0),":");var x=this.g;return(x||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Ls(_,Oo,!0),"@"),f.push(Va(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&f.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&f.push("/"),f.push(Ls(x,x.charAt(0)=="/"?lc:td,!0))),(x=this.i.toString())&&f.push("?",x),(x=this.m)&&f.push("#",Ls(x,nd)),f.join("")},Un.prototype.resolve=function(f){const _=Ft(this);let x=!!f.j;x?Jt(_,f.j):x=!!f.o,x?_.o=f.o:x=!!f.g,x?_.g=f.g:x=f.u!=null;var A=f.h;if(x)Ti(_,f.u);else if(x=!!f.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Y=_.h.lastIndexOf("/");Y!=-1&&(A=_.h.slice(0,Y+1)+A)}if(Y=A,Y==".."||Y==".")A="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){A=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const J=[];for(let ue=0;ue<Y.length;){const Re=Y[ue++];Re=="."?A&&ue==Y.length&&J.push(""):Re==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ue==Y.length&&J.push("")):(J.push(Re),A=!0)}A=J.join("/")}else A=Y}return x?_.h=A:x=f.i.toString()!=="",x?oc(_,ad(f.i)):x=!!f.m,x&&(_.m=f.m),_};function Ft(f){return new Un(f)}function Jt(f,_,x){f.j=x?na(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Ti(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function oc(f,_,x){_ instanceof Ci?(f.i=_,Lo(f.i,f.l)):(x||(_=Ls(_,Si)),f.i=new Ci(_,f.l))}function tt(f,_,x){f.i.set(_,x)}function Ps(f){return tt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function na(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ls(f,_,x){return typeof f=="string"?(f=encodeURI(f).replace(_,Dn),x&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Dn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Oo=/[#\/\?@]/g,td=/[#\?:]/g,lc=/[#\?]/g,Si=/[#\?@]/g,nd=/#/g;function Ci(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function An(f){f.g||(f.g=new Map,f.h=0,f.i&&jo(f.i,function(_,x){f.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}r=Ci.prototype,r.add=function(f,_){An(this),this.i=null,f=Di(this,f);let x=this.g.get(f);return x||this.g.set(f,x=[]),x.push(_),this.h+=1,this};function rd(f,_){An(f),_=Di(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function cc(f,_){return An(f),_=Di(f,_),f.g.has(_)}r.forEach=function(f,_){An(this),this.g.forEach(function(x,A){x.forEach(function(Y){f.call(_,Y,A,this)},this)},this)};function uc(f,_){An(f);let x=[];if(typeof _=="string")cc(f,_)&&(x=x.concat(f.g.get(Di(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)x=x.concat(f[_]);return x}r.set=function(f,_){return An(this),this.i=null,f=Di(this,f),cc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},r.get=function(f,_){return f?(f=uc(this,f),f.length>0?String(f[0]):_):_};function Po(f,_,x){rd(f,_),x.length>0&&(f.i=null,f.g.set(Di(f,_),S(x)),f.h+=x.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var x=_[A];const Y=Va(x);x=uc(this,x);for(let J=0;J<x.length;J++){let ue=Y;x[J]!==""&&(ue+="="+Va(x[J])),f.push(ue)}}return this.i=f.join("&")};function ad(f){const _=new Ci;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Di(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Lo(f,_){_&&!f.j&&(An(f),f.i=null,f.g.forEach(function(x,A){const Y=A.toLowerCase();A!=Y&&(rd(this,A),Po(this,Y,x))},f)),f.j=_}function Tr(f,_){const x=new br;if(c.Image){const A=new Image;A.onload=y(ar,x,"TestLoadImage: loaded",!0,_,A),A.onerror=y(ar,x,"TestLoadImage: error",!1,_,A),A.onabort=y(ar,x,"TestLoadImage: abort",!1,_,A),A.ontimeout=y(ar,x,"TestLoadImage: timeout",!1,_,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else _(!1)}function dc(f,_){const x=new br,A=new AbortController,Y=setTimeout(()=>{A.abort(),ar(x,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:A.signal}).then(J=>{clearTimeout(Y),J.ok?ar(x,"TestPingServer: ok",!0,_):ar(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),ar(x,"TestPingServer: error",!1,_)})}function ar(f,_,x,A,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),A(x)}catch{}}function Ai(){this.g=new Qt}function ra(f){this.i=f.Sb||null,this.h=f.ab||!1}w(ra,_r),ra.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(f,_){St.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Vs,St),r=Vs.prototype,r.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,Sr(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},r.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}r.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Ni(this):Sr(this),this.readyState==3&&Vo(this)}},r.Oa=function(f){this.g&&(this.response=this.responseText=f,Ni(this))},r.Na=function(f){this.g&&(this.response=f,Ni(this))},r.ga=function(){this.g&&Ni(this)};function Ni(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Sr(f)}r.setRequestHeader=function(f,_){this.A.append(f,_)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,f.push(x[0]+": "+x[1]),x=_.next();return f.join(`\r
`)};function Sr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ir(f){let _="";return ce(f,function(x,A){_+=A,_+=":",_+=x,_+=`\r
`}),_}function Us(f,_,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=ir(x),typeof f=="string"?x!=null&&Va(x):tt(f,_,x))}function st(f){St.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(st,St);var aa=/^https?$/i,hc=["POST","PUT"];r=st.prototype,r.Fa=function(f){this.H=f},r.ea=function(f,_,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tc.g(),this.g.onreadystatechange=E(v(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(J){Fs(this,J);return}if(f=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Y in A)x.set(Y,A[Y]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())x.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(J=>J.toLowerCase()=="content-type"),Y=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(hc,_,void 0)>=0)||A||Y||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ue]of x)this.g.setRequestHeader(J,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(J){Fs(this,J)}};function Fs(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,fc(f),Ua(f)}function fc(f){f.A||(f.A=!0,Pt(f,"complete"),Pt(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Pt(this,"complete"),Pt(this,"abort"),Ua(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),st.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?zs(this):this.Xa())},r.Xa=function(){zs(this)};function zs(f){if(f.h&&typeof o<"u"){if(f.v&&Cr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Pt(f,"readystatechange"),Cr(f)==4){f.h=!1;try{const J=f.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var A;if(A=J===0){let ue=String(f.D).match(ed)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),A=!aa.test(ue?ue.toLowerCase():"")}x=A}if(x)Pt(f,"complete"),Pt(f,"success");else{f.o=6;try{var Y=Cr(f)>2?f.g.statusText:""}catch{Y=""}f.l=Y+" ["+f.ca()+"]",fc(f)}}finally{Ua(f)}}}}function Ua(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const x=f.g;f.g=null,_||Pt(f,"ready");try{x.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Cr(f){return f.g?f.g.readyState:0}r.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Se(_)}};function nn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Fa(f){const _={};f=(f.g&&Cr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(I(f[A]))continue;var x=$u(f[A]);const Y=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const J=_[Y]||[];_[Y]=J,J.push(x)}ye(_,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(f,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[f]||_}function Ri(f){this.za=0,this.i=[],this.j=new br,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ia("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ia("baseRetryDelayMs",5e3,f),this.Za=ia("retryDelaySeedMs",1e4,f),this.Ta=ia("forwardChannelMaxRetries",2,f),this.va=ia("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new nc(f&&f.concurrentRequestLimit),this.Ba=new Ai,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ri.prototype,r.ka=8,r.I=1,r.connect=function(f,_,x,A){Lt(0),this.W=f,this.H=_||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=dd(this,null,this.W),sa(this)};function pc(f){if(Uo(f),f.I==3){var _=f.V++,x=Ft(f.J);if(tt(x,"SID",f.M),tt(x,"RID",_),tt(x,"TYPE","terminate"),Bs(f,x),_=new Er(f,f.j,_),_.M=2,_.A=Ps(Ft(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=_.A,x=!0),x||(_.g=hd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),$r(_)}ud(f)}function ki(f){f.g&&(gc(f),f.g.cancel(),f.g=null)}function Uo(f){ki(f),f.v&&(c.clearTimeout(f.v),f.v=null),zo(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function sa(f){if(!rc(f.h)&&!f.m){f.m=!0;var _=f.Ea;Q||C(),ae||(Q(),ae=!0),O.add(_,f),f.D=0}}function Fo(f,_){return ea(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Qr(v(f.Ea,f,_),cd(f,f.D)),f.D++,!0)}r.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Y=new Er(this,this.j,f);let J=this.o;if(this.U&&(J?(J=Ie(J),be(J,this.U)):J=this.U),this.u!==null||this.R||(Y.J=J,J=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=id(this,Y,_),x=Ft(this.J),tt(x,"RID",f),tt(x,"CVER",22),this.G&&tt(x,"X-HTTP-Session-Id",this.G),Bs(this,x),J&&(this.R?_="headers="+Va(ir(J))+"&"+_:this.u&&Us(x,this.u,J)),ac(this.h,Y),this.Ra&&tt(x,"TYPE","init"),this.S?(tt(x,"$req",_),tt(x,"SID","null"),Y.U=!0,Xr(Y,x,null)):Xr(Y,x,_),this.I=2}}else this.I==3&&(f?mc(this,f):this.i.length==0||rc(this.h)||mc(this))};function mc(f,_){var x;_?x=_.l:x=f.V++;const A=Ft(f.J);tt(A,"SID",f.M),tt(A,"RID",x),tt(A,"AID",f.K),Bs(f,A),f.u&&f.o&&Us(A,f.u,f.o),x=new Er(f,f.j,x,f.D+1),f.u===null&&(x.J=f.o),_&&(f.i=_.G.concat(f.i)),_=id(f,x,1e3),x.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ac(f.h,x),Xr(x,A,_)}function Bs(f,_){f.H&&ce(f.H,function(x,A){tt(_,A,x)}),f.l&&ce({},function(x,A){tt(_,A,x)})}function id(f,_,x){x=Math.min(f.i.length,x);const A=f.l?v(f.l.Ka,f.l,f):null;e:{var Y=f.i;let Re=-1;for(;;){const At=["count="+x];Re==-1?x>0?(Re=Y[0].g,At.push("ofs="+Re)):Re=0:At.push("ofs="+Re);let Xe=!0;for(let gt=0;gt<x;gt++){var J=Y[gt].g;const sr=Y[gt].map;if(J-=Re,J<0)Re=Math.max(0,Y[gt].g-100),Xe=!1;else try{J="req"+J+"_"||"";try{var ue=sr instanceof Map?sr:Object.entries(sr);for(const[la,Dr]of ue){let Ar=Dr;h(Dr)&&(Ar=me(Dr)),At.push(J+la+"="+encodeURIComponent(Ar))}}catch(la){throw At.push(J+"type="+encodeURIComponent("_badmap")),la}}catch{A&&A(sr)}}if(Xe){ue=At.join("&");break e}}ue=void 0}return f=f.i.splice(0,x),_.G=f,ue}function sd(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;Q||C(),ae||(Q(),ae=!0),O.add(_,f),f.A=0}}function Hs(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Qr(v(f.Da,f),cd(f,f.A)),f.A++,!0)}r.Da=function(){if(this.v=null,od(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Qr(v(this.Wa,this),f)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),ki(this),od(this))};function gc(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function od(f){f.g=new Er(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=Ft(f.na);tt(_,"RID","rpc"),tt(_,"SID",f.M),tt(_,"AID",f.K),tt(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&tt(_,"TO",f.ia),tt(_,"TYPE","xmlhttp"),Bs(f,_),f.u&&f.o&&Us(_,f.u,f.o),f.O&&(f.g.H=f.O);var x=f.g;f=f.ba,x.M=1,x.A=Ps(Ft(_)),x.u=null,x.R=!0,Io(x,f)}r.Va=function(){this.C!=null&&(this.C=null,ki(this),Hs(this),Lt(19))};function zo(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ld(f,_){var x=null;if(f.g==_){zo(f),gc(f),f.g=null;var A=2}else if(ta(f.h,_))x=_.G,ic(f.h,_),A=1;else return;if(f.I!=0){if(_.o)if(A==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var Y=f.D;A=ko(),Pt(A,new Wr(A,x)),sa(f)}else sd(f);else if(Y=_.m,Y==3||Y==0&&_.X>0||!(A==1&&Fo(f,_)||A==2&&Hs(f)))switch(x&&x.length>0&&(_=f.h,_.i=_.i.concat(x)),Y){case 1:oa(f,5);break;case 4:oa(f,10);break;case 3:oa(f,6);break;default:oa(f,2)}}}function cd(f,_){let x=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(x*=2),x*_}function oa(f,_){if(f.j.info("Error code "+_),_==2){var x=v(f.bb,f),A=f.Ua;const Y=!A;A=new Un(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(A,"https"),Ps(A),Y?Tr(A.toString(),x):dc(A.toString(),x)}else Lt(2);f.I=0,f.l&&f.l.pa(_),ud(f),Uo(f)}r.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function ud(f){if(f.I=0,f.ja=[],f.l){const _=sc(f.h);(_.length!=0||f.i.length!=0)&&(k(f.ja,_),k(f.ja,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.oa()}}function dd(f,_,x){var A=x instanceof Un?Ft(x):new Un(x);if(A.g!="")_&&(A.g=_+"."+A.g),Ti(A,A.u);else{var Y=c.location;A=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;const J=new Un(null);A&&Jt(J,A),_&&(J.g=_),Y&&Ti(J,Y),x&&(J.h=x),A=J}return x=f.G,_=f.wa,x&&_&&tt(A,x,_),tt(A,"VER",f.ka),Bs(f,A),A}function hd(f,_,x){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new st(new ra({ab:x})):new st(f.ma),_.Fa(f.L),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function fd(){}r=fd.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ii(){}Ii.prototype.g=function(f,_){return new bn(f,_)};function bn(f,_){St.call(this),this.g=new Ri(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!I(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new za(this)}w(bn,St),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){pc(this.g)},bn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var x={};x.__data__=f,f=x}else this.v&&(x={},x.__data__=me(f),f=x);_.i.push(new Ut(_.Ya++,f)),_.I==3&&sa(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,pc(this.g),delete this.g,bn.Z.N.call(this)};function pd(f){Dt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const x in _){f=x;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}w(pd,Dt);function md(){wn.call(this),this.status=1}w(md,wn);function za(f){this.g=f}w(za,fd),za.prototype.ra=function(){Pt(this.g,"a")},za.prototype.qa=function(f){Pt(this.g,new pd(f))},za.prototype.pa=function(f){Pt(this.g,new md)},za.prototype.oa=function(){Pt(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,T2=function(){return new Ii},x2=function(){return ko()},E2=mt,Hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,Vh=js,ec.COMPLETE="complete",b2=ec,wr.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",St.prototype.listen=St.prototype.J,iu=wr,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,w2=st}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const Iw="@firebase/firestore",Mw="4.9.2";class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let Ql="12.3.0";const bo=new mv("@firebase/firestore");function bl(){return bo.logLevel}function ge(r,...e){if(bo.logLevel<=ze.DEBUG){const t=e.map(Cv);bo.debug(`Firestore (${Ql}): ${r}`,...t)}}function fi(r,...e){if(bo.logLevel<=ze.ERROR){const t=e.map(Cv);bo.error(`Firestore (${Ql}): ${r}`,...t)}}function jl(r,...e){if(bo.logLevel<=ze.WARN){const t=e.map(Cv);bo.warn(`Firestore (${Ql}): ${r}`,...t)}}function Cv(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function De(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,S2(r,n,t)}function S2(r,e,t){let n=`FIRESTORE (${Ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw fi(n),new Error(n)}function et(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||S2(e,s,n)}function Ne(r,e){return r}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ma{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class C2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class IR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class MR{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let n=this.i;const s=m=>this.i!==n?(n=this.i,t(m)):Promise.resolve();let o=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oi,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},h=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(et(typeof n.accessToken=="string",31837,{l:n}),new C2(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class jR{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OR{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new jR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const n=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function LR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Dv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=LR(40);for(let o=0;o<s.length;++o)n.length<20&&s[o]<t&&(n+=e.charAt(s[o]%62))}return n}}function Be(r,e){return r<e?-1:r>e?1:0}function qg(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const s=r.charAt(n),o=e.charAt(n);if(s!==o)return bg(s)===bg(o)?Be(s,o):bg(s)?1:-1}return Be(r.length,e.length)}const VR=55296,UR=57343;function bg(r){const e=r.charCodeAt(0);return e>=VR&&e<=UR}function Ol(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}const Ow="__name__";class fa{constructor(e,t,n){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&De(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return fa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fa?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const o=fa.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Be(e.length,t.length)}static compareSegments(e,t){const n=fa.isNumericId(e),s=fa.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?fa.extractNumericId(e).compare(fa.extractNumericId(t)):qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class dt extends fa{construct(e,t,n){return new dt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends fa{construct(e,t,n){return new cn(e,t,n)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ow}static keyField(){return new cn([Ow])}static fromServerFormat(e){const t=[];let n="",s=0;const o=()=>{if(n.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=m,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(n+=h,s++):(o(),s++)}if(o(),c)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(dt.fromString(e))}static fromName(e){return new xe(dt.fromString(e).popFirst(5))}static empty(){return new xe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new dt(e.slice()))}}function D2(r,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function zR(r,e,t,n){if(e===!0&&n===!0)throw new pe(se.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Pw(r){if(!xe.isDocumentKey(r))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Lw(r){if(xe.isDocumentKey(r))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function A2(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Uf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function Zn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uf(r);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Lu(r,e){if(!A2(r))throw new pe(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(s&&typeof c!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new pe(se.INVALID_ARGUMENT,t);return!0}const Vw=-62135596800,Uw=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Uw);return new Je(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vw)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uw}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:Wt("string",Je._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Je(0,0))}static max(){return new Ae(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wu=-1;function BR(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(n===1e9?new Je(t+1,0):new Je(t,n));return new gs(s,xe.empty(),e)}function HR(r){return new gs(r.readTime,r.key,wu)}class gs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gs(Ae.min(),xe.empty(),wu)}static max(){return new gs(Ae.max(),xe.empty(),wu)}}function qR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:Be(r.largestBatchId,e.largestBatchId))}const YR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Kl(r){if(r.code!==se.FAILED_PRECONDITION||r.message!==YR)throw r;ge("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((n,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,n)=>{t(e)}))}static reject(e){return new oe(((t,n)=>{n(e)}))}static waitFor(e){return new oe(((t,n)=>{let s=0,o=0,c=!1;e.forEach((h=>{++s,h.next((()=>{++o,c&&o===s&&t()}),(m=>n(m)))})),c=!0,o===s&&t()}))}static or(e){let t=oe.resolve(!1);for(const n of e)t=t.next((s=>s?oe.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,o)=>{n.push(t.call(this,s,o))})),this.waitFor(n)}static mapArray(e,t){return new oe(((n,s)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const v=m;t(e[v]).next((y=>{c[v]=y,++h,h===o&&n(c)}),(y=>s(y)))}}))}static doWhile(e,t){return new oe(((n,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):n()};o()}))}}function WR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xl(r){return r.name==="IndexedDbTransactionError"}class Ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;const Av=-1;function zf(r){return r==null}function af(r){return r===0&&1/r==-1/0}function QR(r){return typeof r=="number"&&Number.isInteger(r)&&!af(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const N2="";function KR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Fw(e)),e=XR(r.get(t),e);return Fw(e)}function XR(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const o=r.charAt(s);switch(o){case"\0":t+="";break;case N2:t+="";break;default:t+=o}}return t}function Fw(r){return r+N2+""}function zw(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Cs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function R2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class _t{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,n,s,o){this.key=e,this.value=t,this.color=n??ln.RED,this.left=s??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,o){return new ln(e??this.key,t??this.value,n??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,n),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,n,s,o){return this}insert(e,t,n){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bw(this.data.getIterator())}getIteratorFrom(e){return new Bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class Bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $n{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new $n([])}unionWith(e){let t=new Xt(cn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class k2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new k2("Invalid base64 string: "+o):o}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(r){if(et(!!r,39018),typeof r=="string"){let e=0;const t=$R.exec(r);if(et(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:kt(r.seconds),nanos:kt(r.nanos)}}function kt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ys(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}const I2="server_timestamp",M2="__type__",j2="__previous_value__",O2="__local_write_time__";function Nv(r){return(r?.mapValue?.fields||{})[M2]?.stringValue===I2}function Bf(r){const e=r.mapValue.fields[j2];return Nv(e)?Bf(e):e}function bu(r){const e=vs(r.mapValue.fields[O2].timestampValue);return new Je(e.seconds,e.nanos)}class ZR{constructor(e,t,n,s,o,c,h,m,v,y){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v,this.isUsingEmulator=y}}const sf="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||sf}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===sf}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}const P2="__type__",JR="__max__",Eh={mapValue:{}},L2="__vector__",of="value";function _s(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nv(r)?4:tk(r)?9007199254740991:ek(r)?10:11:De(28295,{value:r})}function Ra(r,e){if(r===e)return!0;const t=_s(r);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return bu(r).isEqual(bu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=vs(s.timestampValue),h=vs(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,o){return ys(s.bytesValue).isEqual(ys(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,o){return kt(s.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(o.geoPointValue.longitude)})(r,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return kt(s.integerValue)===kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=kt(s.doubleValue),h=kt(o.doubleValue);return c===h?af(c)===af(h):isNaN(c)&&isNaN(h)}return!1})(r,e);case 9:return Ol(r.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:case 11:return(function(s,o){const c=s.mapValue.fields||{},h=o.mapValue.fields||{};if(zw(c)!==zw(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!Ra(c[m],h[m])))return!1;return!0})(r,e);default:return De(52216,{left:r})}}function xu(r,e){return(r.values||[]).find((t=>Ra(t,e)))!==void 0}function Pl(r,e){if(r===e)return 0;const t=_s(r),n=_s(e);if(t!==n)return Be(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=kt(o.integerValue||o.doubleValue),m=kt(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(r,e);case 3:return Hw(r.timestampValue,e.timestampValue);case 4:return Hw(bu(r),bu(e));case 5:return qg(r.stringValue,e.stringValue);case 6:return(function(o,c){const h=ys(o),m=ys(c);return h.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),m=c.split("/");for(let v=0;v<h.length&&v<m.length;v++){const y=Be(h[v],m[v]);if(y!==0)return y}return Be(h.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=Be(kt(o.latitude),kt(c.latitude));return h!==0?h:Be(kt(o.longitude),kt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return qw(r.arrayValue,e.arrayValue);case 10:return(function(o,c){const h=o.fields||{},m=c.fields||{},v=h[of]?.arrayValue,y=m[of]?.arrayValue,w=Be(v?.values?.length||0,y?.values?.length||0);return w!==0?w:qw(v,y)})(r.mapValue,e.mapValue);case 11:return(function(o,c){if(o===Eh.mapValue&&c===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(c===Eh.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),v=c.fields||{},y=Object.keys(v);m.sort(),y.sort();for(let w=0;w<m.length&&w<y.length;++w){const E=qg(m[w],y[w]);if(E!==0)return E;const S=Pl(h[m[w]],v[y[w]]);if(S!==0)return S}return Be(m.length,y.length)})(r.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function Hw(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const t=vs(r),n=vs(e),s=Be(t.seconds,n.seconds);return s!==0?s:Be(t.nanos,n.nanos)}function qw(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const o=Pl(t[s],n[s]);if(o)return o}return Be(t.length,n.length)}function Ll(r){return Yg(r)}function Yg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=vs(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ys(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return xe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const o of t.values||[])s?s=!1:n+=",",n+=Yg(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of n)o?o=!1:s+=",",s+=`${c}:${Yg(t.fields[c])}`;return s+"}"})(r.mapValue):De(61005,{value:r})}function Uh(r){switch(_s(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bf(r);return e?16+Uh(e):16;case 5:return 2*r.stringValue.length;case 6:return ys(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,o)=>s+Uh(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let s=0;return Cs(n.fields,((o,c)=>{s+=o.length+Uh(c)})),s})(r.mapValue);default:throw De(13486,{value:r})}}function Yw(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gg(r){return!!r&&"integerValue"in r}function Rv(r){return!!r&&"arrayValue"in r}function Gw(r){return!!r&&"nullValue"in r}function Ww(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Fh(r){return!!r&&"mapValue"in r}function ek(r){return(r?.mapValue?.fields||{})[P2]?.stringValue===L2}function fu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Cs(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=fu(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(r.arrayValue.values[t]);return e}return{...r}}function tk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JR}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=cn.emptyPath(),n={},s=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,n,s),n={},s=[],t=h.popLast()}c?n[h.lastSegment()]=fu(c):s.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,s)}delete(e){const t=this.field(e.popLast());Fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Fh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Cs(t,((s,o)=>e[s]=o));for(const s of n)delete e[s]}clone(){return new On(fu(this.value))}}function V2(r){const e=[];return Cs(r.fields,((t,n)=>{const s=new cn([t]);if(Fh(n)){const o=V2(n.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)})),new $n(e)}class gn{constructor(e,t,n,s,o,c,h){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new gn(e,0,Ae.min(),Ae.min(),Ae.min(),On.empty(),0)}static newFoundDocument(e,t,n,s){return new gn(e,1,t,Ae.min(),n,s,0)}static newNoDocument(e,t){return new gn(e,2,t,Ae.min(),Ae.min(),On.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Ae.min(),Ae.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lf{constructor(e,t){this.position=e,this.inclusive=t}}function Qw(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const o=e[s],c=r.position[s];if(o.field.isKeyField()?n=xe.comparator(xe.fromName(c.referenceValue),t.key):n=Pl(c,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Kw(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ra(r.position[t],e.position[t]))return!1;return!0}class cf{constructor(e,t="asc"){this.field=e,this.dir=t}}function nk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class U2{}class Gt extends U2{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new ak(e,t,n):t==="array-contains"?new ok(e,n):t==="in"?new lk(e,n):t==="not-in"?new ck(e,n):t==="array-contains-any"?new uk(e,n):new Gt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new ik(e,n):new sk(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pl(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends U2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zr(e,t)}matches(e){return F2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function F2(r){return r.op==="and"}function z2(r){return rk(r)&&F2(r)}function rk(r){for(const e of r.filters)if(e instanceof zr)return!1;return!0}function Wg(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+Ll(r.value);if(z2(r))return r.filters.map((e=>Wg(e))).join(",");{const e=r.filters.map((t=>Wg(t))).join(",");return`${r.op}(${e})`}}function B2(r,e){return r instanceof Gt?(function(n,s){return s instanceof Gt&&n.op===s.op&&n.field.isEqual(s.field)&&Ra(n.value,s.value)})(r,e):r instanceof zr?(function(n,s){return s instanceof zr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((o,c,h)=>o&&B2(c,s.filters[h])),!0):!1})(r,e):void De(19439)}function H2(r){return r instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ll(t.value)}`})(r):r instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(H2).join(" ,")+"}"})(r):"Filter"}class ak extends Gt{constructor(e,t,n){super(e,t,n),this.key=xe.fromName(n.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class ik extends Gt{constructor(e,t){super(e,"in",t),this.keys=q2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sk extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=q2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function q2(r,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class ok extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rv(t)&&xu(t.arrayValue,this.value)}}class lk extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class ck extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class uk extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>xu(this.value.arrayValue,n)))}}class dk{constructor(e,t=null,n=[],s=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function Xw(r,e=null,t=[],n=[],s=null,o=null,c=null){return new dk(r,e,t,n,s,o,c)}function kv(r){const e=Ne(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Wg(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),zf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Ll(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Ll(n))).join(",")),e.Te=t}return e.Te}function Iv(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!nk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!B2(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Kw(r.startAt,e.startAt)&&Kw(r.endAt,e.endAt)}function Qg(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Vu{constructor(e,t=null,n=[],s=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hk(r,e,t,n,s,o,c,h){return new Vu(r,e,t,n,s,o,c,h)}function Hf(r){return new Vu(r)}function $w(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Y2(r){return r.collectionGroup!==null}function pu(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Xt(cn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(h=h.add(v.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cf(o,n))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new cf(cn.keyField(),n))}return e.Ie}function Sa(r){const e=Ne(r);return e.Ee||(e.Ee=fk(e,pu(r))),e.Ee}function fk(r,e){if(r.limitType==="F")return Xw(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new cf(s.field,o)}));const t=r.endAt?new lf(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new lf(r.startAt.position,r.startAt.inclusive):null;return Xw(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Kg(r,e){const t=r.filters.concat([e]);return new Vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xg(r,e,t){return new Vu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function qf(r,e){return Iv(Sa(r),Sa(e))&&r.limitType===e.limitType}function G2(r){return`${kv(Sa(r))}|lt:${r.limitType}`}function El(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>H2(s))).join(", ")}]`),zf(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Ll(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Ll(s))).join(",")),`Target(${n})`})(Sa(r))}; limitType=${r.limitType})`}function Yf(r,e){return e.isFoundDocument()&&(function(n,s){const o=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):xe.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,s){for(const o of pu(n))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const o of n.filters)if(!o.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(c,h,m){const v=Qw(c,h,m);return c.inclusive?v<=0:v<0})(n.startAt,pu(n),s)||n.endAt&&!(function(c,h,m){const v=Qw(c,h,m);return c.inclusive?v>=0:v>0})(n.endAt,pu(n),s))})(r,e)}function pk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function W2(r){return(e,t)=>{let n=!1;for(const s of pu(r)){const o=mk(s,e,t);if(o!==0)return o;n=n||s.field.isKeyField()}return 0}}function mk(r,e,t){const n=r.field.isKeyField()?xe.comparator(e.key,t.key):(function(o,c,h){const m=c.data.field(o),v=h.data.field(o);return m!==null&&v!==null?Pl(m,v):De(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return De(19790,{direction:r.dir})}}class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,o]of n)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((t,n)=>{for(const[s,o]of n)e(s,o)}))}isEmpty(){return R2(this.inner)}size(){return this.innerSize}}const gk=new _t(xe.comparator);function pi(){return gk}const Q2=new _t(xe.comparator);function su(...r){let e=Q2;for(const t of r)e=e.insert(t.key,t);return e}function K2(r){let e=Q2;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function co(){return mu()}function X2(){return mu()}function mu(){return new Do((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vk=new _t(xe.comparator),yk=new Xt(xe.comparator);function He(...r){let e=yk;for(const t of r)e=e.add(t);return e}const _k=new Xt(Be);function wk(){return _k}function Mv(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function $2(r){return{integerValue:""+r}}function bk(r,e){return QR(e)?$2(e):Mv(r,e)}class Gf{constructor(){this._=void 0}}function Ek(r,e,t){return r instanceof uf?(function(s,o){const c={fields:{[M2]:{stringValue:I2},[O2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Nv(o)&&(o=Bf(o)),o&&(c.fields[j2]=o),{mapValue:c}})(t,e):r instanceof Tu?J2(r,e):r instanceof Su?ex(r,e):(function(s,o){const c=Z2(s,o),h=Zw(c)+Zw(s.Ae);return Gg(c)&&Gg(s.Ae)?$2(h):Mv(s.serializer,h)})(r,e)}function xk(r,e,t){return r instanceof Tu?J2(r,e):r instanceof Su?ex(r,e):t}function Z2(r,e){return r instanceof df?(function(n){return Gg(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class uf extends Gf{}class Tu extends Gf{constructor(e){super(),this.elements=e}}function J2(r,e){const t=tx(e);for(const n of r.elements)t.some((s=>Ra(s,n)))||t.push(n);return{arrayValue:{values:t}}}class Su extends Gf{constructor(e){super(),this.elements=e}}function ex(r,e){let t=tx(e);for(const n of r.elements)t=t.filter((s=>!Ra(s,n)));return{arrayValue:{values:t}}}class df extends Gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zw(r){return kt(r.integerValue||r.doubleValue)}function tx(r){return Rv(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Tk(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof Tu&&s instanceof Tu||n instanceof Su&&s instanceof Su?Ol(n.elements,s.elements,Ra):n instanceof df&&s instanceof df?Ra(n.Ae,s.Ae):n instanceof uf&&s instanceof uf})(r.transform,e.transform)}class Sk{constructor(e,t){this.version=e,this.transformResults=t}}class Vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Wf{}function nx(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ax(r.key,Vr.none()):new Uu(r.key,r.data,Vr.none());{const t=r.data,n=On.empty();let s=new Xt(cn.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?n.delete(o):n.set(o,c),s=s.add(o)}return new Ds(r.key,n,new $n(s.toArray()),Vr.none())}}function Ck(r,e,t){r instanceof Uu?(function(s,o,c){const h=s.value.clone(),m=eb(s.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(r,e,t):r instanceof Ds?(function(s,o,c){if(!zh(s.precondition,o))return void o.convertToUnknownDocument(c.version);const h=eb(s.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(rx(s)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):(function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function gu(r,e,t,n){return r instanceof Uu?(function(o,c,h,m){if(!zh(o.precondition,c))return h;const v=o.value.clone(),y=tb(o.fieldTransforms,m,c);return v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null})(r,e,t,n):r instanceof Ds?(function(o,c,h,m){if(!zh(o.precondition,c))return h;const v=tb(o.fieldTransforms,m,c),y=c.data;return y.setAll(rx(o)),y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(r,e,t,n):(function(o,c,h){return zh(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(r,e,t)}function Dk(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),o=Z2(n.transform,s||null);o!=null&&(t===null&&(t=On.empty()),t.set(n.field,o))}return t||null}function Jw(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ol(n,s,((o,c)=>Tk(o,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Uu extends Wf{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ds extends Wf{constructor(e,t,n,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function rx(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function eb(r,e,t){const n=new Map;et(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let s=0;s<t.length;s++){const o=r[s],c=o.transform,h=e.data.field(o.field);n.set(o.field,xk(c,h,t[s]))}return n}function tb(r,e,t){const n=new Map;for(const s of r){const o=s.transform,c=t.data.field(s.field);n.set(s.field,Ek(o,c,e))}return n}class ax extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ak extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nk{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ck(o,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=X2();return this.mutations.forEach((s=>{const o=e.get(s.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(s.key)?null:h;const m=nx(c,h);m!==null&&n.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((t,n)=>Jw(t,n)))&&Ol(this.baseMutations,e.baseMutations,((t,n)=>Jw(t,n)))}}class jv{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){et(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=(function(){return vk})();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,n[c].version);return new jv(e,t,n,s)}}class Rk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kk{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yt,Ge;function Ik(r){switch(r){case se.OK:return De(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function ix(r){if(r===void 0)return fi("GRPC error has no .code"),se.UNKNOWN;switch(r){case Yt.OK:return se.OK;case Yt.CANCELLED:return se.CANCELLED;case Yt.UNKNOWN:return se.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return se.INTERNAL;case Yt.UNAVAILABLE:return se.UNAVAILABLE;case Yt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Yt.NOT_FOUND:return se.NOT_FOUND;case Yt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Yt.ABORTED:return se.ABORTED;case Yt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Yt.DATA_LOSS:return se.DATA_LOSS;default:return De(39323,{code:r})}}(Ge=Yt||(Yt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function Mk(){return new TextEncoder}const jk=new ds([4294967295,4294967295],0);function nb(r){const e=Mk().encode(r),t=new _2;return t.update(e),new Uint8Array(t.digest())}function rb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ds([t,n],0),new ds([s,o],0)]}class Ov{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ou(`Invalid padding: ${t}`);if(n<0)throw new ou(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ou(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ds.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(ds.fromNumber(n)));return s.compare(jk)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nb(e),[n,s]=rb(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);if(!this.we(c))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Ov(o,s,t);return n.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=nb(e),[n,s]=rb(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(n,s,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qf{constructor(e,t,n,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qf(Ae.min(),s,new _t(Be),pi(),He())}}class Fu{constructor(e,t,n,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fu(n,t,He(),He(),He())}}class Bh{constructor(e,t,n,s){this.be=e,this.removedTargetIds=t,this.key=n,this.De=s}}class sx{constructor(e,t){this.targetId=e,this.Ce=t}}class ox{constructor(e,t,n=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class ab{constructor(){this.ve=0,this.Fe=ib(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),n=He();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:De(38017,{changeType:o})}})),new Fu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ib()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ok{constructor(e){this.Ge=e,this.ze=new Map,this.je=pi(),this.Je=xh(),this.He=xh(),this.Ye=new _t(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,n=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Qg(o))if(n===0){const c=new xe(o.path);this.et(t,c,gn.newNoDocument(c,Ae.min()))}else et(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:o=0}=t;let c,h;try{c=ys(n).toUint8Array()}catch(m){if(m instanceof k2)return jl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Ov(c,s,o)}catch(m){return jl(m instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let s=0;return n.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&Qg(h.target)){const m=new xe(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,gn.newNoDocument(m,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let n=He();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((m=>{const v=this.ot(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const s=new Qf(e,t,this.Ye,this.je,n);return this.je=pi(),this.Je=xh(),this.He=xh(),this.Ye=new _t(Be),s}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ab,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ab),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xh(){return new _t(xe.comparator)}function ib(){return new _t(xe.comparator)}const Pk={asc:"ASCENDING",desc:"DESCENDING"},Lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vk={and:"AND",or:"OR"};class Uk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $g(r,e){return r.useProto3Json||zf(e)?e:{value:e}}function hf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lx(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Fk(r,e){return hf(r,e.toTimestamp())}function Ca(r){return et(!!r,49232),Ae.fromTimestamp((function(t){const n=vs(t);return new Je(n.seconds,n.nanos)})(r))}function Pv(r,e){return Zg(r,e).canonicalString()}function Zg(r,e){const t=(function(s){return new dt(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function cx(r){const e=dt.fromString(r);return et(px(e),10190,{key:e.toString()}),e}function Jg(r,e){return Pv(r.databaseId,e.path)}function Eg(r,e){const t=cx(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(dx(t))}function ux(r,e){return Pv(r.databaseId,e)}function zk(r){const e=cx(r);return e.length===4?dt.emptyPath():dx(e)}function ev(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function dx(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function sb(r,e,t){return{name:Jg(r,e),fields:t.value.mapValue.fields}}function Bk(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:De(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(v,y){return v.useProto3Json?(et(y===void 0||typeof y=="string",58123),dn.fromBase64String(y||"")):(et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),dn.fromUint8Array(y||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(v){const y=v.code===void 0?se.UNKNOWN:ix(v.code);return new pe(y,v.message||"")})(c);t=new ox(n,s,o,h||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Eg(r,n.document.name),o=Ca(n.document.updateTime),c=n.document.createTime?Ca(n.document.createTime):Ae.min(),h=new On({mapValue:{fields:n.document.fields}}),m=gn.newFoundDocument(s,o,c,h),v=n.targetIds||[],y=n.removedTargetIds||[];t=new Bh(v,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Eg(r,n.document),o=n.readTime?Ca(n.readTime):Ae.min(),c=gn.newNoDocument(s,o),h=n.removedTargetIds||[];t=new Bh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Eg(r,n.document),o=n.removedTargetIds||[];t=new Bh([],o,s,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:o}=n,c=new kk(s,o),h=n.targetId;t=new sx(h,c)}}return t}function Hk(r,e){let t;if(e instanceof Uu)t={update:sb(r,e.key,e.value)};else if(e instanceof ax)t={delete:Jg(r,e.key)};else if(e instanceof Ds)t={update:sb(r,e.key,e.data),updateMask:Zk(e.fieldMask)};else{if(!(e instanceof Ak))return De(16599,{Vt:e.type});t={verify:Jg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,c){const h=c.transform;if(h instanceof uf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Tu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof df)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw De(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:Fk(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:De(27497)})(r,e.precondition)),t}function qk(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map((t=>(function(s,o){let c=s.updateTime?Ca(s.updateTime):Ca(o);return c.isEqual(Ae.min())&&(c=Ca(o)),new Sk(c,s.transformResults||[])})(t,e)))):[]}function Yk(r,e){return{documents:[ux(r,e.path)]}}function Gk(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=ux(r,s);const o=(function(v){if(v.length!==0)return fx(zr.create(v,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(v){if(v.length!==0)return v.map((y=>(function(E){return{field:xl(E.field),direction:Kk(E.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=$g(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:s}}function Wk(r){let e=zk(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){et(n===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(w){const E=hx(w);return E instanceof zr&&z2(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((E=>(function(k){return new cf(Tl(k.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let E;return E=typeof w=="object"?w.value:w,zf(E)?null:E})(t.limit));let m=null;t.startAt&&(m=(function(w){const E=!!w.before,S=w.values||[];return new lf(S,E)})(t.startAt));let v=null;return t.endAt&&(v=(function(w){const E=!w.before,S=w.values||[];return new lf(S,E)})(t.endAt)),hk(e,s,c,o,h,"F",m,v)}function Qk(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hx(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Tl(t.unaryFilter.field);return Gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Tl(t.unaryFilter.field);return Gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tl(t.unaryFilter.field);return Gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Tl(t.unaryFilter.field);return Gt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gt.create(Tl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map((n=>hx(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(r):De(30097,{filter:r})}function Kk(r){return Pk[r]}function Xk(r){return Lk[r]}function $k(r){return Vk[r]}function xl(r){return{fieldPath:r.canonicalString()}}function Tl(r){return cn.fromServerFormat(r.fieldPath)}function fx(r){return r instanceof Gt?(function(t){if(t.op==="=="){if(Ww(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NAN"}};if(Gw(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ww(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NAN"}};if(Gw(t.value))return{unaryFilter:{field:xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(t.field),op:Xk(t.op),value:t.value}}})(r):r instanceof zr?(function(t){const n=t.getFilters().map((s=>fx(s)));return n.length===1?n[0]:{compositeFilter:{op:$k(t.op),filters:n}}})(r):De(54877,{filter:r})}function Zk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function px(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class os{constructor(e,t,n,s,o=Ae.min(),c=Ae.min(),h=dn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jk{constructor(e){this.yt=e}}function eI(r){const e=Wk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xg(e,e.limit,"L"):e}class tI{constructor(){this.Cn=new nI}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(gs.min())}updateCollectionGroup(e,t,n){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class nI{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Xt(dt.comparator),o=!s.has(n);return this.index[t]=s.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}}const ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mx=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(mx,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class Vl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vl(0)}static cr(){return new Vl(-1)}}const lb="LruGarbageCollector",rI=1048576;function cb([r,e],[t,n]){const s=Be(r,t);return s===0?Be(e,n):s}class aI{constructor(e){this.Ir=e,this.buffer=new Xt(cb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();cb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iI{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(lb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xl(t)?ge(lb,"Ignoring IndexedDB error during garbage collection: ",t):await Kl(t)}await this.Vr(3e5)}))}}class sI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Ff.ce);const n=new aI(t);return this.mr.forEachTarget(e,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(ob)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ob):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,s,o,c,h,m,v;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,c=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(n=w,h=Date.now(),this.removeTargets(e,n,t)))).next((w=>(o=w,m=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(v=Date.now(),bl()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${w} documents in `+(v-m)+`ms
Total Duration: ${v-y}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w}))))}}function oI(r,e){return new sI(r,e)}class lI{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?oe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uI{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&gu(n.mutation,s,$n.empty(),Je.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,He()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=He()){const s=co();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((o=>{let c=su();return o.forEach(((h,m)=>{c=c.insert(h,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=co();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,He())))}populateOverlays(e,t,n){const s=[];return n.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,n,s){let o=pi();const c=mu(),h=(function(){return mu()})();return t.forEach(((m,v)=>{const y=n.get(v.key);s.has(v.key)&&(y===void 0||y.mutation instanceof Ds)?o=o.insert(v.key,v):y!==void 0?(c.set(v.key,y.mutation.getFieldMask()),gu(y.mutation,v,y.mutation.getFieldMask(),Je.now())):c.set(v.key,$n.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((v,y)=>c.set(v,y))),t.forEach(((v,y)=>h.set(v,new cI(y,c.get(v)??null)))),h)))}recalculateAndSaveOverlays(e,t){const n=mu();let s=new _t(((c,h)=>c-h)),o=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let y=n.get(m)||$n.empty();y=h.applyToLocalView(v,y),n.set(m,y);const w=(s.get(h.batchId)||He()).add(m);s=s.insert(h.batchId,w)}))})).next((()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,y=m.value,w=X2();y.forEach((E=>{if(!o.has(E)){const S=nx(t.get(E),n.get(E));S!==null&&w.set(E,S),o=o.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,w))}return oe.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(c){return xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-o.size):oe.resolve(co());let h=wu,m=o;return c.next((v=>oe.forEach(v,((y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{m=m.insert(y,E)}))))).next((()=>this.populateOverlays(e,v,o))).next((()=>this.computeViews(e,m,v,He()))).next((y=>({batchId:h,changes:K2(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((n=>{let s=su();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const o=t.collectionGroup;let c=su();return this.indexManager.getCollectionParents(e,o).next((h=>oe.forEach(h,(m=>{const v=(function(w,E){return new Vu(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,v,n,s).next((y=>{y.forEach(((w,E)=>{c=c.insert(w,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,s)))).next((c=>{o.forEach(((m,v)=>{const y=v.getKey();c.get(y)===null&&(c=c.insert(y,gn.newInvalidDocument(y)))}));let h=su();return c.forEach(((m,v)=>{const y=o.get(m);y!==void 0&&gu(y.mutation,v,$n.empty(),Je.now()),Yf(t,v)&&(h=h.insert(m,v))})),h}))}}class dI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ca(s.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:eI(s.bundledQuery),readTime:Ca(s.readTime)}})(t)),oe.resolve()}}class hI{constructor(){this.overlays=new _t(xe.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=co();return oe.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&n.set(s,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,o)=>{this.St(e,t,o)})),oe.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),oe.resolve()}getOverlaysForCollection(e,t,n){const s=co(),o=t.length+1,c=new xe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&m.largestBatchId>n&&s.set(m.getKey(),m)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let o=new _t(((v,y)=>v-y));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>n){let y=o.get(v.largestBatchId);y===null&&(y=co(),o=o.insert(v.largestBatchId,y)),y.set(v.getKey(),v)}}const h=co(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,y)=>h.set(v,y))),!(h.size()>=s)););return oe.resolve(h)}St(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new Rk(t,n));let o=this.qr.get(t);o===void 0&&(o=He(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}class fI{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}class Lv{constructor(){this.Qr=new Xt(tn.$r),this.Ur=new Xt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new tn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new tn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new xe(new dt([])),n=new tn(t,e),s=new tn(t,e+1),o=[];return this.Ur.forEachInRange([n,s],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new dt([])),n=new tn(t,e),s=new tn(t,e+1);let o=He();return this.Ur.forEachInRange([n,s],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new tn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}class pI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(tn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Nk(o,t,n,s);this.mutationQueue.push(c);for(const h of s)this.Zr=this.Zr.add(new tn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.ei(n),o=s<0?0:s;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Av:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tn(t,0),s=new tn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,s],(c=>{const h=this.Xr(c.Yr);o.push(h)})),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xt(Be);return t.forEach((s=>{const o=new tn(s,0),c=new tn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{n=n.add(h.Yr)}))})),oe.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let o=n;xe.isDocumentKey(o)||(o=o.child(""));const c=new tn(new xe(o),0);let h=new Xt(Be);return this.Zr.forEachWhile((m=>{const v=m.key.path;return!!n.isPrefixOf(v)&&(v.length===s&&(h=h.add(m.Yr)),!0)}),c),oe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((n=>{const s=this.Xr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return oe.forEach(t.mutations,(s=>{const o=new tn(s.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new tn(t,0),s=this.Zr.firstAfterOrEqual(n);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mI{constructor(e){this.ri=e,this.docs=(function(){return new _t(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),o=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return oe.resolve(n?n.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let n=pi();return t.forEach((s=>{const o=this.docs.get(s);n=n.insert(s,o?o.document.mutableCopy():gn.newInvalidDocument(s))})),oe.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let o=pi();const c=t.path,h=new xe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:y}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||qR(HR(y),n)<=0||(s.has(y.key)||Yf(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,n,s){De(9500)}ii(e,t){return oe.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new gI(this)}getSize(e){return oe.resolve(this.size)}}class gI extends lI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class vI{constructor(e){this.persistence=e,this.si=new Do((t=>kv(t)),Iv),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Lv,this.targetCount=0,this.ai=Vl.ur()}forEachTarget(e,t){return this.si.forEach(((n,s)=>t(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,n){let s=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&n.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),oe.waitFor(o).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return oe.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),oe.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((c=>{o.push(s.markPotentiallyOrphaned(e,c))})),oe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return oe.resolve(n)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}class gx{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ff(0),this.li=!1,this.li=!0,this.hi=new fI,this.referenceDelegate=e(this),this.Pi=new vI(this),this.indexManager=new tI,this.remoteDocumentCache=(function(s){return new mI(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new Jk(t),this.Ii=new dI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new pI(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ge("MemoryPersistence","Starting transaction:",e);const s=new yI(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return oe.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class yI extends GR{constructor(e){super(),this.currentSequenceNumber=e}}class Vv{constructor(e){this.persistence=e,this.Ri=new Lv,this.Vi=null}static mi(e){return new Vv(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),oe.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(n=>{const s=xe.fromPath(n);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ff{constructor(e,t){this.persistence=e,this.pi=new Do((n=>KR(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=oI(this,t)}static mi(e,t){return new ff(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((s=>n+s))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((n,s)=>this.br(e,n,s).next((o=>o?oe.resolve():t(s)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((h=>{h||(n++,o.removeEntry(c,Ae.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}br(e,t,n){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return oe.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uv{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=s}static As(e,t){let n=He(),s=He();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Uv(e,t.fromCache,n,s)}}class _I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $C()?8:WR(vn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,s){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,s,n).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new _I;return this.Ss(e,t,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>o.result))}bs(e,t,n,s){return n.documentReadCount<this.fs?(bl()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(bl()<=ze.DEBUG&&ge("QueryEngine","Query:",El(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(bl()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sa(t))):oe.resolve())}ys(e,t){if($w(t))return oe.resolve(null);let n=Sa(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Xg(t,null,"F"),n=Sa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const c=He(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,n).next((m=>{const v=this.Ds(t,h);return this.Cs(t,v,c,m.readTime)?this.ys(e,Xg(t,null,"F")):this.vs(e,v,t,m)}))))})))))}ws(e,t,n,s){return $w(t)||s.isEqual(Ae.min())?oe.resolve(null):this.ps.getDocuments(e,n).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,n,s)?oe.resolve(null):(bl()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(t)),this.vs(e,c,t,BR(s,wu)).next((h=>h)))}))}Ds(e,t){let n=new Xt(W2(e));return t.forEach(((s,o)=>{Yf(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,n){return bl()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",El(t)),this.ps.getDocumentsMatchingQuery(e,t,gs.min(),n)}vs(e,t,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Fv="LocalStore",bI=3e8;class EI{constructor(e,t,n,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new _t(Be),this.xs=new Do((o=>kv(o)),Iv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function xI(r,e,t,n){return new EI(r,e,t,n)}async function vx(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const c=[],h=[];let m=He();for(const v of s){c.push(v.batchId);for(const y of v.mutations)m=m.add(y.key)}for(const v of o){h.push(v.batchId);for(const y of v.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(n,m).next((v=>({Ls:v,removedBatchIds:c,addedBatchIds:h})))}))}))}function TI(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,v,y){const w=v.batch,E=w.keys();let S=oe.resolve();return E.forEach((k=>{S=S.next((()=>y.getEntry(m,k))).next((L=>{const T=v.docVersions.get(k);et(T!==null,48541),L.version.compareTo(T)<0&&(w.applyToRemoteDocument(L,v),L.isValidDocument()&&(L.setReadTime(v.commitVersion),y.addEntry(L)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(m,w)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let m=He();for(let v=0;v<h.mutationResults.length;++v)h.mutationResults[v].transformResults.length>0&&(m=m.add(h.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function yx(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function SI(r,e){const t=Ne(r),n=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((y,w)=>{const E=s.get(w);if(!E)return;h.push(t.Pi.removeMatchingKeys(o,y.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(o,y.addedDocuments,w))));let S=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(dn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,n)),s=s.insert(w,S),(function(L,T,R){return L.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=bI?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(E,S,y)&&h.push(t.Pi.updateTargetData(o,S))}));let m=pi(),v=He();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(CI(o,c,e.documentUpdates).next((y=>{m=y.ks,v=y.qs}))),!n.isEqual(Ae.min())){const y=t.Pi.getLastRemoteSnapshotVersion(o).next((w=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));h.push(y)}return oe.waitFor(h).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,m,v))).next((()=>m))})).then((o=>(t.Ms=s,o)))}function CI(r,e,t){let n=He(),s=He();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let c=pi();return t.forEach(((h,m)=>{const v=o.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(s=s.add(h)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):ge(Fv,"Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)})),{ks:c,qs:s}}))}function DI(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=Av),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function AI(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Pi.getTargetData(n,e).next((o=>o?(s=o,oe.resolve(s)):t.Pi.allocateTargetId(n).next((c=>(s=new os(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function tv(r,e,t){const n=Ne(r),s=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(c=>n.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Xl(c))throw c;ge(Fv,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function ub(r,e,t){const n=Ne(r);let s=Ae.min(),o=He();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,v,y){const w=Ne(m),E=w.xs.get(y);return E!==void 0?oe.resolve(w.Ms.get(E)):w.Pi.getTargetData(v,y)})(n,c,Sa(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,h.targetId).next((m=>{o=m}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?s:Ae.min(),t?o:He()))).next((h=>(NI(n,pk(e),h),{documents:h,Qs:o})))))}function NI(r,e,t){let n=r.Os.get(e)||Ae.min();t.forEach(((s,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class db{constructor(){this.activeTargetIds=wk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RI{constructor(){this.Mo=new db,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new db,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kI{Oo(e){}shutdown(){}}const hb="ConnectivityMonitor";class fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(hb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Th=null;function nv(){return Th===null?Th=(function(){return 268435456+Math.round(2147483648*Math.random())})():Th++,"0x"+Th.toString(16)}const xg="RestConnection",II={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===sf?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,t,n,s,o){const c=nv(),h=this.zo(e,t.toUriEncodedString());ge(xg,`Sending RPC '${e}' ${c}:`,h,n);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,s,o);const{host:v}=new URL(h),y=So(v);return this.Jo(e,h,m,n,y).then((w=>(ge(xg,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw jl(xg,`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",n),w}))}Ho(e,t,n,s,o,c){return this.Go(e,t,n,s,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),n&&n.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const n=II[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class jI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const pn="WebChannelConnection";class OI extends MI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,s,o){const c=nv();return new Promise(((h,m)=>{const v=new w2;v.setWithCredentials(!0),v.listenOnce(b2.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Vh.NO_ERROR:const w=v.getResponseJson();ge(pn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Vh.TIMEOUT:ge(pn,`RPC '${e}' ${c} timed out`),m(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const E=v.getStatus();if(ge(pn,`RPC '${e}' ${c} failed with status:`,E,"response text:",v.getResponseText()),E>0){let S=v.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S?.error;if(k&&k.status&&k.message){const L=(function(R){const q=R.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(q)>=0?q:se.UNKNOWN})(k.status);m(new pe(L,k.message))}else m(new pe(se.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new pe(se.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:c,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ge(pn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(s);ge(pn,`RPC '${e}' ${c} sending request:`,s),v.send(t,"POST",y,n,15)}))}T_(e,t,n){const s=nv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=T2(),h=x2(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,n),m.encodeInitMessageHeaders=!0;const y=o.join("");ge(pn,`Creating RPC '${e}' stream ${s}: ${y}`,m);const w=c.createWebChannel(y,m);this.I_(w);let E=!1,S=!1;const k=new jI({Yo:T=>{S?ge(pn,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(E||(ge(pn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),E=!0),ge(pn,`RPC '${e}' stream ${s} sending:`,T),w.send(T))},Zo:()=>w.close()}),L=(T,R,q)=>{T.listen(R,(B=>{try{q(B)}catch(X){setTimeout((()=>{throw X}),0)}}))};return L(w,iu.EventType.OPEN,(()=>{S||(ge(pn,`RPC '${e}' stream ${s} transport opened.`),k.o_())})),L(w,iu.EventType.CLOSE,(()=>{S||(S=!0,ge(pn,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(w))})),L(w,iu.EventType.ERROR,(T=>{S||(S=!0,jl(pn,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),k.a_(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),L(w,iu.EventType.MESSAGE,(T=>{if(!S){const R=T.data[0];et(!!R,16349);const q=R,B=q?.error||q[0]?.error;if(B){ge(pn,`RPC '${e}' stream ${s} received error:`,B);const X=B.status;let Q=(function(C){const N=Yt[C];if(N!==void 0)return ix(N)})(X),ae=B.message;Q===void 0&&(Q=se.INTERNAL,ae="Unknown error status: "+X+" with message "+B.message),S=!0,k.a_(new pe(Q,ae)),w.close()}else ge(pn,`RPC '${e}' stream ${s} received:`,R),k.u_(R)}})),L(h,E2.STAT_EVENT,(T=>{T.stat===Hg.PROXY?ge(pn,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===Hg.NOPROXY&&ge(pn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Tg(){return typeof document<"u"?document:null}function Kf(r){return new Uk(r,!0)}class _x{constructor(e,t,n=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-n);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const pb="PersistentStream";class wx{constructor(e,t,n,s,o,c,h,m){this.Mi=e,this.S_=n,this.b_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _x(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===t&&this.G_(n,s)}),(n=>{e((()=>{const s=new pe(se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PI extends wx{constructor(e,t,n,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Bk(this.serializer,e),n=(function(o){if(!("targetChange"in o))return Ae.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Ca(c.readTime):Ae.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ev(this.serializer),t.addTarget=(function(o,c){let h;const m=c.target;if(h=Qg(m)?{documents:Yk(o,m)}:{query:Gk(o,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=lx(o,c.resumeToken);const v=$g(o,c.expectedCount);v!==null&&(h.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ae.min())>0){h.readTime=hf(o,c.snapshotVersion.toTimestamp());const v=$g(o,c.expectedCount);v!==null&&(h.expectedCount=v)}return h})(this.serializer,e);const n=Qk(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ev(this.serializer),t.removeTarget=e,this.q_(t)}}class LI extends wx{constructor(e,t,n,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qk(e.writeResults,e.commitTime),n=Ca(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ev(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Hk(this.serializer,n)))};this.q_(t)}}class VI{}class UI extends VI{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,Zg(t,n),s,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(se.UNKNOWN,o.toString())}))}Ho(e,t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Zg(t,n),s,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Eo="RemoteStore";class zI{constructor(e,t,n,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Ao(this)&&(ge(Eo,"Restarting streams for network reachability change."),await(async function(m){const v=Ne(m);v.Ea.add(4),await zu(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Xf(v)})(this))}))})),this.Ra=new FI(n,s)}}async function Xf(r){if(Ao(r))for(const e of r.da)await e(!0)}async function zu(r){for(const e of r.da)await e(!1)}function bx(r,e){const t=Ne(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qv(t)?Hv(t):$l(t).O_()&&Bv(t,e))}function zv(r,e){const t=Ne(r),n=$l(t);t.Ia.delete(e),n.O_()&&Ex(t,e),t.Ia.size===0&&(n.O_()?n.L_():Ao(t)&&t.Ra.set("Unknown"))}function Bv(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$l(r).Y_(e)}function Ex(r,e){r.Va.Ue(e),$l(r).Z_(e)}function Hv(r){r.Va=new Ok({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),$l(r).start(),r.Ra.ua()}function qv(r){return Ao(r)&&!$l(r).x_()&&r.Ia.size>0}function Ao(r){return Ne(r).Ea.size===0}function xx(r){r.Va=void 0}async function BI(r){r.Ra.set("Online")}async function HI(r){r.Ia.forEach(((e,t)=>{Bv(r,e)}))}async function qI(r,e){xx(r),qv(r)?(r.Ra.ha(e),Hv(r)):r.Ra.set("Unknown")}async function YI(r,e,t){if(r.Ra.set("Online"),e instanceof ox&&e.state===2&&e.cause)try{await(async function(s,o){const c=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Ia.delete(h),s.Va.removeTarget(h))})(r,e)}catch(n){ge(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await pf(r,n)}else if(e instanceof Bh?r.Va.Ze(e):e instanceof sx?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const n=await yx(r.localStore);t.compareTo(n)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const y=o.Ia.get(v);y&&o.Ia.set(v,y.withResumeToken(m.resumeToken,c))}})),h.targetMismatches.forEach(((m,v)=>{const y=o.Ia.get(m);if(!y)return;o.Ia.set(m,y.withResumeToken(dn.EMPTY_BYTE_STRING,y.snapshotVersion)),Ex(o,m);const w=new os(y.target,m,v,y.sequenceNumber);Bv(o,w)})),o.remoteSyncer.applyRemoteEvent(h)})(r,t)}catch(n){ge(Eo,"Failed to raise snapshot:",n),await pf(r,n)}}async function pf(r,e,t){if(!Xl(e))throw e;r.Ea.add(1),await zu(r),r.Ra.set("Offline"),t||(t=()=>yx(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Eo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Xf(r)}))}function Tx(r,e){return e().catch((t=>pf(r,t,e)))}async function $f(r){const e=Ne(r),t=ws(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Av;for(;GI(e);)try{const s=await DI(e.localStore,n);if(s===null){e.Ta.length===0&&t.L_();break}n=s.batchId,WI(e,s)}catch(s){await pf(e,s)}Sx(e)&&Cx(e)}function GI(r){return Ao(r)&&r.Ta.length<10}function WI(r,e){r.Ta.push(e);const t=ws(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Sx(r){return Ao(r)&&!ws(r).x_()&&r.Ta.length>0}function Cx(r){ws(r).start()}async function QI(r){ws(r).ra()}async function KI(r){const e=ws(r);for(const t of r.Ta)e.ea(t.mutations)}async function XI(r,e,t){const n=r.Ta.shift(),s=jv.from(n,e,t);await Tx(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await $f(r)}async function $I(r,e){e&&ws(r).X_&&await(async function(n,s){if((function(c){return Ik(c)&&c!==se.ABORTED})(s.code)){const o=n.Ta.shift();ws(n).B_(),await Tx(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,s))),await $f(n)}})(r,e),Sx(r)&&Cx(r)}async function mb(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),ge(Eo,"RemoteStore received new credentials");const n=Ao(t);t.Ea.add(3),await zu(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xf(t)}async function ZI(r,e){const t=Ne(r);e?(t.Ea.delete(2),await Xf(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function $l(r){return r.ma||(r.ma=(function(t,n,s){const o=Ne(t);return o.sa(),new PI(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:BI.bind(null,r),t_:HI.bind(null,r),r_:qI.bind(null,r),H_:YI.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qv(r)?Hv(r):r.Ra.set("Unknown")):(await r.ma.stop(),xx(r))}))),r.ma}function ws(r){return r.fa||(r.fa=(function(t,n,s){const o=Ne(t);return o.sa(),new LI(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:QI.bind(null,r),r_:$I.bind(null,r),ta:KI.bind(null,r),na:XI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await $f(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(Eo,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Yv{constructor(e,t,n,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=o,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,o){const c=Date.now()+n,h=new Yv(e,t,c,s,o);return h.start(n),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gv(r,e){if(fi("AsyncQueue",`${e}: ${r}`),Xl(r))return new pe(se.UNAVAILABLE,`${e}: ${r}`);throw r}class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||xe.comparator(t.key,n.key):(t,n)=>xe.comparator(t.key,n.key),this.keyedMap=su(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=n.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Rl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class gb{constructor(){this.ga=new _t(xe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ul{constructor(e,t,n,s,o,c,h,m,v){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,n,s,o){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Ul(e,t,Rl.emptySet(t),c,n,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class JI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eM{constructor(){this.queries=vb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const s=Ne(t),o=s.queries;s.queries=vb(),o.forEach(((c,h)=>{for(const m of h.Sa)m.onError(n)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function vb(){return new Do((r=>G2(r)),qf)}async function Wv(r,e){const t=Ne(r);let n=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(n=2):(o=new JI,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=Gv(c,`Initialization of query '${El(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Kv(t)}async function Qv(r,e){const t=Ne(r),n=e.query;let s=3;const o=t.queries.get(n);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function tM(r,e){const t=Ne(r);let n=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(s)&&(n=!0);c.wa=s}}n&&Kv(t)}function nM(r,e,t){const n=Ne(r),s=n.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);n.queries.delete(e)}function Kv(r){r.Ca.forEach((e=>{e.next()}))}var rv,yb;(yb=rv||(rv={})).Ma="default",yb.Cache="cache";class Xv{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ul(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rv.Cache}}class Dx{constructor(e){this.key=e}}class Ax{constructor(e){this.key=e}}class rM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=W2(e),this.tu=new Rl(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new gb,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,v=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,w)=>{const E=s.get(y),S=Yf(this.query,w)?w:null,k=!!E&&this.mutatedKeys.has(E.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let T=!1;E&&S?E.data.isEqual(S.data)?k!==L&&(n.track({type:3,doc:S}),T=!0):this.su(E,S)||(n.track({type:2,doc:S}),T=!0,(m&&this.eu(S,m)>0||v&&this.eu(S,v)<0)&&(h=!0)):!E&&S?(n.track({type:0,doc:S}),T=!0):E&&!S&&(n.track({type:1,doc:E}),T=!0,(m||v)&&(h=!0)),T&&(S?(c=c.add(S),o=L?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),n.track({type:1,doc:y})}return{tu:c,iu:n,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,w)=>(function(S,k){const L=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:T})}};return L(S)-L(k)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(n),s=s??!1;const h=t&&!s?this._u():[],m=this.Xa.size===0&&this.current&&!s?1:0,v=m!==this.Za;return this.Za=m,c.length!==0||v?{snapshot:new Ul(this.query,e.tu,o,c,e.mutatedKeys,m===0,v,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Ax(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Dx(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $v="SyncEngine";class aM{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class iM{constructor(e){this.key=e,this.hu=!1}}class sM{constructor(e,t,n,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Do((h=>G2(h)),qf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(xe.comparator),this.Au=new Map,this.Ru=new Lv,this.Vu={},this.mu=new Map,this.fu=Vl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oM(r,e,t=!0){const n=jx(r);let s;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Nx(n,e,t,!0),s}async function lM(r,e){const t=jx(r);await Nx(t,e,!0,!1)}async function Nx(r,e,t,n){const s=await AI(r.localStore,Sa(e)),o=s.targetId,c=r.sharedClientState.addLocalQueryTarget(o,t);let h;return n&&(h=await cM(r,e,o,c==="current",s.resumeToken)),r.isPrimaryClient&&t&&bx(r.remoteStore,s),h}async function cM(r,e,t,n,s){r.pu=(w,E,S)=>(async function(L,T,R,q){let B=T.view.ru(R);B.Cs&&(B=await ub(L.localStore,T.query,!1).then((({documents:O})=>T.view.ru(O,B))));const X=q&&q.targetChanges.get(T.targetId),Q=q&&q.targetMismatches.get(T.targetId)!=null,ae=T.view.applyChanges(B,L.isPrimaryClient,X,Q);return wb(L,T.targetId,ae.au),ae.snapshot})(r,w,E,S);const o=await ub(r.localStore,e,!0),c=new rM(e,o.Qs),h=c.ru(o.documents),m=Fu.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),v=c.applyChanges(h,r.isPrimaryClient,m);wb(r,t,v.au);const y=new aM(e,t,c);return r.Tu.set(e,y),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function uM(r,e,t){const n=Ne(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);if(o.length>1)return n.Iu.set(s.targetId,o.filter((c=>!qf(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await tv(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&zv(n.remoteStore,s.targetId),av(n,s.targetId)})).catch(Kl)):(av(n,s.targetId),await tv(n.localStore,s.targetId,!0))}async function dM(r,e){const t=Ne(r),n=t.Tu.get(e),s=t.Iu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),zv(t.remoteStore,n.targetId))}async function hM(r,e,t){const n=_M(r);try{const s=await(function(c,h){const m=Ne(c),v=Je.now(),y=h.reduce(((S,k)=>S.add(k.key)),He());let w,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=pi(),L=He();return m.Ns.getEntries(S,y).next((T=>{k=T,k.forEach(((R,q)=>{q.isValidDocument()||(L=L.add(R))}))})).next((()=>m.localDocuments.getOverlayedDocuments(S,k))).next((T=>{w=T;const R=[];for(const q of h){const B=Dk(q,w.get(q.key).overlayedDocument);B!=null&&R.push(new Ds(q.key,B,V2(B.value.mapValue),Vr.exists(!0)))}return m.mutationQueue.addMutationBatch(S,v,R,h)})).next((T=>{E=T;const R=T.applyToLocalDocumentSet(w,L);return m.documentOverlayCache.saveOverlays(S,T.batchId,R)}))})).then((()=>({batchId:E.batchId,changes:K2(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(c,h,m){let v=c.Vu[c.currentUser.toKey()];v||(v=new _t(Be)),v=v.insert(h,m),c.Vu[c.currentUser.toKey()]=v})(n,s.batchId,t),await Bu(n,s.changes),await $f(n.remoteStore)}catch(s){const o=Gv(s,"Failed to persist write");t.reject(o)}}async function Rx(r,e){const t=Ne(r);try{const n=await SI(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const c=t.Au.get(o);c&&(et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?et(c.hu,14607):s.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await Bu(t,n,e)}catch(n){await Kl(n)}}function _b(r,e,t){const n=Ne(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(c,h){const m=Ne(c);m.onlineState=h;let v=!1;m.queries.forEach(((y,w)=>{for(const E of w.Sa)E.va(h)&&(v=!0)})),v&&Kv(m)})(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function fM(r,e,t){const n=Ne(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Au.get(e),o=s&&s.key;if(o){let c=new _t(xe.comparator);c=c.insert(o,gn.newNoDocument(o,Ae.min()));const h=He().add(o),m=new Qf(Ae.min(),new Map,new _t(Be),c,h);await Rx(n,m),n.du=n.du.remove(o),n.Au.delete(e),Zv(n)}else await tv(n.localStore,e,!1).then((()=>av(n,e,t))).catch(Kl)}async function pM(r,e){const t=Ne(r),n=e.batch.batchId;try{const s=await TI(t.localStore,e);Ix(t,n,null),kx(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Bu(t,s)}catch(s){await Kl(s)}}async function mM(r,e,t){const n=Ne(r);try{const s=await(function(c,h){const m=Ne(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let y;return m.mutationQueue.lookupMutationBatch(v,h).next((w=>(et(w!==null,37113),y=w.keys(),m.mutationQueue.removeMutationBatch(v,w)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,y))).next((()=>m.localDocuments.getDocuments(v,y)))}))})(n.localStore,e);Ix(n,e,t),kx(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Bu(n,s)}catch(s){await Kl(s)}}function kx(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Ix(r,e,t){const n=Ne(r);let s=n.Vu[n.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function av(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||Mx(r,n)}))}function Mx(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(zv(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Zv(r))}function wb(r,e,t){for(const n of t)n instanceof Dx?(r.Ru.addReference(n.key,e),gM(r,n)):n instanceof Ax?(ge($v,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||Mx(r,n.key)):De(19791,{wu:n})}function gM(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ge($v,"New document in limbo: "+t),r.Eu.add(n),Zv(r))}function Zv(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new xe(dt.fromString(e)),n=r.fu.next();r.Au.set(n,new iM(t)),r.du=r.du.insert(t,n),bx(r.remoteStore,new os(Sa(Hf(t.path)),n,"TargetPurposeLimboResolution",Ff.ce))}}async function Bu(r,e,t){const n=Ne(r),s=[],o=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,m)=>{c.push(n.pu(m,e,t).then((v=>{if((v||t)&&n.isPrimaryClient){const y=v?!v.fromCache:t?.targetChanges.get(m.targetId)?.current;n.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(v){s.push(v);const y=Uv.As(m.targetId,v);o.push(y)}})))})),await Promise.all(c),n.Pu.H_(s),await(async function(m,v){const y=Ne(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(v,(E=>oe.forEach(E.Es,(S=>y.persistence.referenceDelegate.addReference(w,E.targetId,S))).next((()=>oe.forEach(E.ds,(S=>y.persistence.referenceDelegate.removeReference(w,E.targetId,S)))))))))}catch(w){if(!Xl(w))throw w;ge(Fv,"Failed to update sequence numbers: "+w)}for(const w of v){const E=w.targetId;if(!w.fromCache){const S=y.Ms.get(E),k=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(E,L)}}})(n.localStore,o))}async function vM(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){ge($v,"User change. New user:",e.toKey());const n=await vx(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((m=>{m.reject(new pe(se.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Bu(t,n.Ls)}}function yM(r,e){const t=Ne(r),n=t.Au.get(e);if(n&&n.hu)return He().add(n.key);{let s=He();const o=t.Iu.get(e);if(!o)return s;for(const c of o){const h=t.Tu.get(c);s=s.unionWith(h.view.nu)}return s}}function jx(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fM.bind(null,e),e.Pu.H_=tM.bind(null,e.eventManager),e.Pu.yu=nM.bind(null,e.eventManager),e}function _M(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mM.bind(null,e),e}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return xI(this.persistence,new wI,e.initialUser,this.serializer)}Cu(e){return new gx(Vv.mi,this.serializer)}Du(e){return new RI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class wM extends mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof ff,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iI(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new gx((n=>ff.mi(n,t)),this.serializer)}}class iv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>_b(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=vM.bind(null,this.syncEngine),await ZI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eM})()}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),n=(function(o){return new OI(o)})(e.databaseInfo);return(function(o,c,h,m){return new UI(o,c,h,m)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,o,c,h){return new zI(n,s,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>_b(this.syncEngine,t,0)),(function(){return fb.v()?new fb:new kI})())}createSyncEngine(e,t){return(function(s,o,c,h,m,v,y){const w=new sM(s,o,c,h,m,v);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ne(t);ge(Eo,"RemoteStore shutting down."),n.Ea.add(5),await zu(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}iv.provider={build:()=>new iv};class Jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const bs="FirestoreClient";class bM{constructor(e,t,n,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=mn.UNAUTHENTICATED,this.clientId=Dv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async c=>{ge(bs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ge(bs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gv(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Sg(r,e){r.asyncQueue.verifyOperationInProgress(),ge(bs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await vx(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function bb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await EM(r);ge(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>mb(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>mb(e.remoteStore,s))),r._onlineComponents=e}async function EM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(bs,"Using user provided OfflineComponentProvider");try{await Sg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;jl("Error using user provided cache. Falling back to memory cache: "+t),await Sg(r,new mf)}}else ge(bs,"Using default OfflineComponentProvider"),await Sg(r,new wM(void 0));return r._offlineComponents}async function Ox(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(bs,"Using user provided OnlineComponentProvider"),await bb(r,r._uninitializedComponentsProvider._online)):(ge(bs,"Using default OnlineComponentProvider"),await bb(r,new iv))),r._onlineComponents}function xM(r){return Ox(r).then((e=>e.syncEngine))}async function gf(r){const e=await Ox(r),t=e.eventManager;return t.onListen=oM.bind(null,e.syncEngine),t.onUnlisten=uM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dM.bind(null,e.syncEngine),t}function TM(r,e,t={}){const n=new oi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,m,v){const y=new Jv({next:E=>{y.Nu(),c.enqueueAndForget((()=>Qv(o,w)));const S=E.docs.has(h);!S&&E.fromCache?v.reject(new pe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&m&&m.source==="server"?v.reject(new pe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(E)},error:E=>v.reject(E)}),w=new Xv(Hf(h.path),y,{includeMetadataChanges:!0,qa:!0});return Wv(o,w)})(await gf(r),r.asyncQueue,e,t,n))),n.promise}function SM(r,e,t={}){const n=new oi;return r.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,m,v){const y=new Jv({next:E=>{y.Nu(),c.enqueueAndForget((()=>Qv(o,w))),E.fromCache&&m.source==="server"?v.reject(new pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(E)},error:E=>v.reject(E)}),w=new Xv(h,y,{includeMetadataChanges:!0,qa:!0});return Wv(o,w)})(await gf(r),r.asyncQueue,e,t,n))),n.promise}function Px(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Eb=new Map;const Lx="firestore.googleapis.com",xb=!0;class Tb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lx,this.ssl=xb}else this.host=e.host,this.ssl=e.ssl??xb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rI)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Px(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new kR;switch(n.type){case"firstParty":return new OR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Eb.get(t);n&&(ge("ComponentProvider","Removing Datastore"),Eb.delete(t),n.terminate())})(this),Promise.resolve()}}function CM(r,e,t,n={}){r=Zn(r,Zf);const s=So(e),o=r._getSettings(),c={...o,emulatorOptions:r._getEmulatorOptions()},h=`${e}:${t}`;s&&(fv(`https://${h}`),pv("Firestore",!0)),o.host!==Lx&&o.host!==h&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:s,emulatorOptions:n};if(!vo(m,c)&&(r._setSettings(m),n.mockUserToken)){let v,y;if(typeof n.mockUserToken=="string")v=n.mockUserToken,y=mn.MOCK_USER;else{v=RE(n.mockUserToken,r._app?.options.projectId);const w=n.mockUserToken.sub||n.mockUserToken.user_id;if(!w)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new mn(w)}r._authCredentials=new IR(new C2(v,y))}}class No{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class xt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Lu(t,xt._jsonSchema))return new xt(e,n||null,new xe(dt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Wt("string",xt._jsonSchemaVersion),referencePath:Wt("string")};class hs extends No{constructor(e,t,n){super(e,t,Hf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new xe(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function tr(r,e,...t){if(r=jt(r),D2("collection","path",e),r instanceof Zf){const n=dt.fromString(e,...t);return Lw(n),new hs(r,null,n)}{if(!(r instanceof xt||r instanceof hs))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(dt.fromString(e,...t));return Lw(n),new hs(r.firestore,null,n)}}function wi(r,e,...t){if(r=jt(r),arguments.length===1&&(e=Dv.newId()),D2("doc","path",e),r instanceof Zf){const n=dt.fromString(e,...t);return Pw(n),new xt(r,null,new xe(n))}{if(!(r instanceof xt||r instanceof hs))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(dt.fromString(e,...t));return Pw(n),new xt(r.firestore,r instanceof hs?r.converter:null,new xe(n))}}const Sb="AsyncQueue";class Cb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _x(this,"async_queue_retry"),this._c=()=>{const n=Tg();n&&ge(Sb,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Tg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Tg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new oi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xl(e))throw e;ge(Sb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",Db(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Yv.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&De(47125,{Pc:Db(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Db(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Ab(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of n)if(o in s&&typeof s[o]=="function")return!0;return!1})(r,["next","error","complete"])}class Es extends Zf{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Cb,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cb(e),this._firestoreClient=void 0,await e}}}function DM(r,e){const t=typeof r=="object"?r:vv(),n=typeof r=="string"?r:sf,s=jf(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const o=DE("firestore");o&&CM(s,...o)}return s}function Jf(r){if(r._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||AM(r),r._firestoreClient}function AM(r){const e=r._freezeSettings(),t=(function(s,o,c,h){return new ZR(s,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Px(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new bM(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(r._componentsProvider))}class gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gr(dn.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,gr._jsonSchema))return gr.fromBase64String(e.bytes)}}gr._jsonSchemaVersion="firestore/bytes/1.0",gr._jsonSchema={type:Wt("string",gr._jsonSchemaVersion),bytes:Wt("string")};class ep{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ey{constructor(e){this._methodName=e}}class Da{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Da._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,Da._jsonSchema))return new Da(e.latitude,e.longitude)}}Da._jsonSchemaVersion="firestore/geoPoint/1.0",Da._jsonSchema={type:Wt("string",Da._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};class Aa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Aa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,Aa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Aa(e.vectorValues);throw new pe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Aa._jsonSchemaVersion="firestore/vectorValue/1.0",Aa._jsonSchema={type:Wt("string",Aa._jsonSchemaVersion),vectorValues:Wt("object")};const NM=/^__.*__$/;class RM{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uu(e,this.data,t,this.fieldTransforms)}}class Vx{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ux(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:r})}}class ty{constructor(e,t,n,s,o,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ty({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ux(this.Ac)&&NM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kM{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Kf(e)}Cc(e,t,n,s=!1){return new ty({Ac:e,methodName:t,Dc:n,path:cn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tp(r){const e=r._freezeSettings(),t=Kf(r._databaseId);return new kM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Fx(r,e,t,n,s,o={}){const c=r.Cc(o.merge||o.mergeFields?2:0,e,t,s);ny("Data must be an object, but it was:",c,n);const h=zx(n,c);let m,v;if(o.merge)m=new $n(c.fieldMask),v=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const E=sv(e,w,t);if(!c.contains(E))throw new pe(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Hx(y,E)||y.push(E)}m=new $n(y),v=c.fieldTransforms.filter((w=>m.covers(w.field)))}else m=null,v=c.fieldTransforms;return new RM(new On(h),m,v)}class np extends ey{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}function IM(r,e,t,n){const s=r.Cc(1,e,t);ny("Data must be an object, but it was:",s,n);const o=[],c=On.empty();Cs(n,((m,v)=>{const y=ry(e,m,t);v=jt(v);const w=s.yc(y);if(v instanceof np)o.push(y);else{const E=Hu(v,w);E!=null&&(o.push(y),c.set(y,E))}}));const h=new $n(o);return new Vx(c,h,s.fieldTransforms)}function MM(r,e,t,n,s,o){const c=r.Cc(1,e,t),h=[sv(e,n,t)],m=[s];if(o.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(sv(e,o[E])),m.push(o[E+1]);const v=[],y=On.empty();for(let E=h.length-1;E>=0;--E)if(!Hx(v,h[E])){const S=h[E];let k=m[E];k=jt(k);const L=c.yc(S);if(k instanceof np)v.push(S);else{const T=Hu(k,L);T!=null&&(v.push(S),y.set(S,T))}}const w=new $n(v);return new Vx(y,w,c.fieldTransforms)}function jM(r,e,t,n=!1){return Hu(t,r.Cc(n?4:3,e))}function Hu(r,e){if(Bx(r=jt(r)))return ny("Unsupported field value:",e,r),zx(r,e);if(r instanceof ey)return(function(n,s){if(!Ux(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,s){const o=[];let c=0;for(const h of n){let m=Hu(h,s.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}})(r,e)}return(function(n,s){if((n=jt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bk(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Je.fromDate(n);return{timestampValue:hf(s.serializer,o)}}if(n instanceof Je){const o=new Je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:hf(s.serializer,o)}}if(n instanceof Da)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gr)return{bytesValue:lx(s.serializer,n._byteString)};if(n instanceof xt){const o=s.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pv(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Aa)return(function(c,h){return{mapValue:{fields:{[P2]:{stringValue:L2},[of]:{arrayValue:{values:c.toArray().map((v=>{if(typeof v!="number")throw h.Sc("VectorValues must only contain numeric values.");return Mv(h.serializer,v)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${Uf(n)}`)})(r,e)}function zx(r,e){const t={};return R2(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(r,((n,s)=>{const o=Hu(s,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function Bx(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Je||r instanceof Da||r instanceof gr||r instanceof xt||r instanceof ey||r instanceof Aa)}function ny(r,e,t){if(!Bx(t)||!A2(t)){const n=Uf(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function sv(r,e,t){if((e=jt(e))instanceof ep)return e._internalPath;if(typeof e=="string")return ry(r,e);throw vf("Field path arguments must be of type string or ",r,!1,void 0,t)}const OM=new RegExp("[~\\*/\\[\\]]");function ry(r,e,t){if(e.search(OM)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ep(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vf(r,e,t,n,s){const o=n&&!n.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${n}`),c&&(m+=` in document ${s}`),m+=")"),new pe(se.INVALID_ARGUMENT,h+r+m)}function Hx(r,e){return r.some((t=>t.isEqual(e)))}class qx{constructor(e,t,n,s,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ay("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PM extends qx{data(){return super.data()}}function ay(r,e){return typeof e=="string"?ry(r,e):e instanceof ep?e._internalPath:e._delegate._internalPath}function Yx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}class LM extends iy{}function mi(r,e,...t){let n=[];e instanceof iy&&n.push(e),n=n.concat(t),(function(o){const c=o.filter((m=>m instanceof sy)).length,h=o.filter((m=>m instanceof rp)).length;if(c>1||c>0&&h>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class rp extends LM{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new rp(e,t,n)}_apply(e){const t=this._parse(e);return Gx(e._query,t),new No(e.firestore,e.converter,Kg(e._query,t))}_parse(e){const t=tp(e.firestore);return(function(o,c,h,m,v,y,w){let E;if(v.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Rb(w,y);const k=[];for(const L of w)k.push(Nb(m,o,L));E={arrayValue:{values:k}}}else E=Nb(m,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Rb(w,y),E=jM(h,c,w,y==="in"||y==="not-in");return Gt.create(v,y,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jn(r,e,t){const n=e,s=ay("where",r);return rp._create(s,n,t)}class sy extends iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sy(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let c=s;const h=o.getFlattenedFilters();for(const m of h)Gx(c,m),c=Kg(c,m)})(e._query,t),new No(e.firestore,e.converter,Kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Nb(r,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y2(e)&&t.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(dt.fromString(t));if(!xe.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Yw(r,new xe(n))}if(t instanceof xt)return Yw(r,t._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(t)}.`)}function Rb(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gx(r,e){const t=(function(s,o){for(const c of s)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VM{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Cs(e,((s,o)=>{n[s]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[of].arrayValue?.values?.map((n=>kt(n.doubleValue)));return new Aa(t)}convertGeoPoint(e){return new Da(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bf(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const t=vs(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dt.fromString(e);et(px(n),9688,{name:e});const s=new Eu(n.get(1),n.get(3)),o=new xe(n.popFirst(5));return s.isEqual(t)||fi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Wx(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends qx{constructor(e,t,n,s,o,c){super(e,t,n,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ay("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:Wt("string",fo._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Hh extends fo{data(e={}){return super.data(e)}}class po{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new lu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Hh(this._firestore,this._userDataWriter,n.key,n,new lu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((h=>{const m=new Hh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const m=new Hh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new lu(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let v=-1,y=-1;return h.type!==0&&(v=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:UM(h.type),doc:m,oldIndex:v,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}function oy(r){r=Zn(r,xt);const e=Zn(r.firestore,Es);return TM(Jf(e),r._key).then((t=>Xx(e,r,t)))}po._jsonSchemaVersion="firestore/querySnapshot/1.0",po._jsonSchema={type:Wt("string",po._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class ly extends VM{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function gi(r){r=Zn(r,No);const e=Zn(r.firestore,Es),t=Jf(e),n=new ly(e);return Yx(r._query),SM(t,r._query).then((s=>new po(e,n,r,s)))}function Qx(r,e,t){r=Zn(r,xt);const n=Zn(r.firestore,Es),s=Wx(r.converter,e);return uy(n,[Fx(tp(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Vr.none())])}function cy(r,e,t,...n){r=Zn(r,xt);const s=Zn(r.firestore,Es),o=tp(s);let c;return c=typeof(e=jt(e))=="string"||e instanceof ep?MM(o,"updateDoc",r._key,e,t,n):IM(o,"updateDoc",r._key,e),uy(s,[c.toMutation(r._key,Vr.exists(!0))])}function Kx(r,e){const t=Zn(r.firestore,Es),n=wi(r),s=Wx(r.converter,e);return uy(t,[Fx(tp(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,Vr.exists(!1))]).then((()=>n))}function FM(r,...e){r=jt(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Ab(e[n])||(t=e[n++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ab(e[n])){const m=e[n];e[n]=m.next?.bind(m),e[n+1]=m.error?.bind(m),e[n+2]=m.complete?.bind(m)}let o,c,h;if(r instanceof xt)c=Zn(r.firestore,Es),h=Hf(r._key.path),o={next:m=>{e[n]&&e[n](Xx(c,r,m))},error:e[n+1],complete:e[n+2]};else{const m=Zn(r,No);c=Zn(m.firestore,Es),h=m._query;const v=new ly(c);o={next:y=>{e[n]&&e[n](new po(c,v,m,y))},error:e[n+1],complete:e[n+2]},Yx(r._query)}return(function(v,y,w,E){const S=new Jv(E),k=new Xv(y,S,w);return v.asyncQueue.enqueueAndForget((async()=>Wv(await gf(v),k))),()=>{S.Nu(),v.asyncQueue.enqueueAndForget((async()=>Qv(await gf(v),k)))}})(Jf(c),h,s,o)}function uy(r,e){return(function(n,s){const o=new oi;return n.asyncQueue.enqueueAndForget((async()=>hM(await xM(n),s,o))),o.promise})(Jf(r),e)}function Xx(r,e,t){const n=t.docs.get(e._key),s=new ly(r);return new fo(r,s,e._key,n,new lu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Ql=s})(Co),yo(new ms("firestore",((n,{instanceIdentifier:s,options:o})=>{const c=n.getProvider("app").getImmediate(),h=new Es(new MR(n.getProvider("auth-internal")),new PR(c,n.getProvider("app-check-internal")),(function(v,y){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(v.options.projectId,y)})(c,s),c);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Ea(Iw,Mw,e),Ea(Iw,Mw,"esm2020")})();var zM="firebase",BM="12.6.0";Ea(zM,BM,"app");const $x="firebasestorage.googleapis.com",HM="storageBucket",qM=120*1e3,YM=600*1e3;class ja extends Ma{constructor(e,t,n=0){super(Cg(e),`Firebase Storage: ${t} (${Cg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ja.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ka;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ka||(ka={}));function Cg(r){return"storage/"+r}function GM(){const r="An unknown error occurred, please check the error payload for server response.";return new ja(ka.UNKNOWN,r)}function WM(){return new ja(ka.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QM(){return new ja(ka.CANCELED,"User canceled the upload/download.")}function KM(r){return new ja(ka.INVALID_URL,"Invalid URL '"+r+"'.")}function XM(r){return new ja(ka.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function kb(r){return new ja(ka.INVALID_ARGUMENT,r)}function Zx(){return new ja(ka.APP_DELETED,"The Firebase app was deleted.")}function $M(r){return new ja(ka.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Or.makeFromUrl(e,t)}catch{return new Or(e,"")}if(n.path==="")return n;throw XM(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function o(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+s+c,"i"),m={bucket:1,path:3};function v(X){X.path_=decodeURIComponent(X.path)}const y="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",S=new RegExp(`^https?://${w}/${y}/b/${s}/o${E}`,"i"),k={bucket:1,path:3},L=t===$x?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",R=new RegExp(`^https?://${L}/${s}/${T}`,"i"),B=[{regex:h,indices:m,postModify:o},{regex:S,indices:k,postModify:v},{regex:R,indices:{bucket:1,path:2},postModify:v}];for(let X=0;X<B.length;X++){const Q=B[X],ae=Q.regex.exec(e);if(ae){const O=ae[Q.indices.bucket];let C=ae[Q.indices.path];C||(C=""),n=new Or(O,C),Q.postModify(n);break}}if(n==null)throw KM(e);return n}}class ZM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JM(r,e,t){let n=1,s=null,o=null,c=!1,h=0;function m(){return h===2}let v=!1;function y(...T){v||(v=!0,e.apply(null,T))}function w(T){s=setTimeout(()=>{s=null,r(S,m())},T)}function E(){o&&clearTimeout(o)}function S(T,...R){if(v){E();return}if(T){E(),y.call(null,T,...R);return}if(m()||c){E(),y.call(null,T,...R);return}n<64&&(n*=2);let B;h===1?(h=2,B=0):B=(n+Math.random())*1e3,w(B)}let k=!1;function L(T){k||(k=!0,E(),!v&&(s!==null?(T||(h=2),clearTimeout(s),w(0)):T||(h=1)))}return w(0),o=setTimeout(()=>{c=!0,L(!0)},t),L}function e4(r){r(!1)}function t4(r){return r!==void 0}function Ib(r,e,t,n){if(n<e)throw kb(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw kb(`Invalid value for '${r}'. Expected ${t} or less.`)}function n4(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var yf;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(yf||(yf={}));function r4(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,o=e.indexOf(r)!==-1;return t||s||o}class a4{constructor(e,t,n,s,o,c,h,m,v,y,w,E=!0,S=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=y,this.connectionFactory_=w,this.retry=E,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Sh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const m=h.loaded,v=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,v)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===yf.NO_ERROR,m=o.getStatus();if(!h||r4(m,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===yf.ABORT;n(!1,new Sh(!1,null,y));return}const v=this.successCodes_.indexOf(m)!==-1;n(!0,new Sh(v,o))})},t=(n,s)=>{const o=this.resolve_,c=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());t4(m)?o(m):o()}catch(m){c(m)}else if(h!==null){const m=GM();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(s.canceled){const m=this.appDelete_?Zx():QM();c(m)}else{const m=WM();c(m)}};this.canceled_?t(!1,new Sh(!1,null,!0)):this.backoffId_=JM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sh{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function i4(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function s4(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function o4(r,e){e&&(r["X-Firebase-GMPID"]=e)}function l4(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function c4(r,e,t,n,s,o,c=!0,h=!1){const m=n4(r.urlParams),v=r.url+m,y=Object.assign({},r.headers);return o4(y,e),i4(y,t),s4(y,o),l4(y,n),new a4(v,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,c,h)}function u4(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function d4(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class _f{constructor(e,t){this._service=e,t instanceof Or?this._location=t:this._location=Or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _f(e,t)}get root(){const e=new Or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d4(this._location.path)}get storage(){return this._service}get parent(){const e=u4(this._location.path);if(e===null)return null;const t=new Or(this._location.bucket,e);return new _f(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $M(e)}}function Mb(r,e){const t=e?.[HM];return t==null?null:Or.makeFromBucketSpec(t,r)}function h4(r,e,t,n={}){r.host=`${e}:${t}`;const s=So(e);s&&(fv(`https://${r.host}/b`),pv("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:o}=n;o&&(r._overrideAuthToken=typeof o=="string"?o:RE(o,r.app.options.projectId))}class f4{constructor(e,t,n,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=$x,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qM,this._maxUploadRetryTime=YM,this._requests=new Set,s!=null?this._bucket=Or.makeFromBucketSpec(s,this._host):this._bucket=Mb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Or.makeFromBucketSpec(this._url,e):this._bucket=Mb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ib("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ib("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _f(this,e)}_makeRequest(e,t,n,s,o=!0){if(this._deleted)return new ZM(Zx());{const c=c4(e,this._appId,n,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const jb="@firebase/storage",Ob="0.14.0";const Jx="storage";function p4(r=vv(),e){r=jt(r);const n=jf(r,Jx).getImmediate({identifier:e}),s=DE("storage");return s&&m4(n,...s),n}function m4(r,e,t,n={}){h4(r,e,t,n)}function g4(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new f4(t,n,s,e,Co)}function v4(){yo(new ms(Jx,g4,"PUBLIC").setMultipleInstances(!0)),Ea(jb,Ob,""),Ea(jb,Ob,"esm2020")}v4();const y4={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},dy=ME(y4),Sn=NR(dy),Ot=DM(dy);p4(dy);const _4=async(r,e,t={})=>{try{const s=(await o2(Sn,r,e)).user;return await Qx(wi(Ot,"users",s.uid),{email:r,nombres:t.nombres||"",apellidos:t.apellidos||"",fechaNacimiento:t.fechaNacimiento||null,dui:t.dui||"",genero:t.genero||"",direccion:t.direccion||"",telefono:t.telefono||"",emergenciaNombre:t.emergenciaNombre||"",emergenciaTelefono:t.emergenciaTelefono||"",emergenciaParentesco:t.emergenciaParentesco||"",tipoPaciente:t.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",s.email),await mN(s),console.log("Email verification sent successfully"),{user:s,error:null}}catch(n){return console.error("Sign up error:",n),{user:null,error:n}}},w4=async(r,e)=>{try{const t=await l2(Sn,r,e);return t.user.emailVerified?{user:t.user,error:null}:(await Pf(Sn),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(t){return console.error("Sign in error:",t),{user:null,error:t}}},eT=async()=>{try{return await Pf(Sn),{error:null}}catch(r){return console.error("Sign out error:",r),{error:r}}},b4=async r=>{try{return await pN(Sn,r),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},Pb=async r=>{try{const e=wi(Ot,"users",r),t=await oy(e);return t.exists()?{profile:t.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},E4=async(r,e)=>{try{const t=wi(Ot,"users",r);return await cy(t,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(t){return console.error("Update user profile error:",t),{error:t}}},x4=r=>yN(Sn,r),T4=async(r,e)=>{try{const t=await new Promise((n,s)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=s,o.readAsDataURL(e)});return await E4(r,{photoURL:t}),{photoURL:t,error:null}}catch(t){return console.error("Upload profile photo error:",t),{photoURL:null,error:t}}},S4=async(r,e,t={})=>{try{const s=(await o2(Sn,r,e)).user;return await Qx(wi(Ot,"staff",s.uid),{email:r,nombres:t.nombres||"",apellidos:t.apellidos||"",cargo:t.cargo||"",role:t.role||"doctor",telefono:t.telefono||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:t.createdBy||s.uid}),await Pf(Sn),{success:!0,error:null}}catch(n){return console.error("Create staff profile error:",n),{success:!1,error:n}}},C4=async(r,e)=>{try{const t=await l2(Sn,r,e),n=t.user,s=await tT(n.uid);return s.profile?{user:t.user,staffProfile:s.profile,error:null}:(await Pf(Sn),{user:null,staffProfile:null,error:{code:"auth/not-staff",message:"Esta cuenta no tiene permisos de personal."}})}catch(t){return console.error("Staff sign in error:",t),{user:null,staffProfile:null,error:t}}},tT=async r=>{try{const e=wi(Ot,"staff",r),t=await oy(e);return t.exists()?{profile:t.data(),error:null}:{profile:null,error:new Error("Staff profile not found")}}catch(e){return console.error("Get staff profile error:",e),{profile:null,error:e}}},D4=async()=>{try{const r=tr(Ot,"users"),e=mi(r),t=await gi(e),n=[];return t.forEach(s=>{n.push({id:s.id,...s.data()})}),{patients:n,error:null}}catch(r){return console.error("Get all patients error:",r),{patients:[],error:r}}},A4=async(r,e)=>{try{const t=wi(Ot,"users",r);return await cy(t,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(t){return console.error("Update patient data error:",t),{error:t}}},N4=async r=>{try{const e=wi(Ot,"users",r),t=await oy(e);return t.exists()?{patient:{id:t.id,...t.data()},error:null}:{patient:null,error:new Error("Patient not found")}}catch(e){return console.error("Get patient error:",e),{patient:null,error:e}}},R4=async(r,e)=>{try{const t={userId:r,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdAt:Je.now(),updatedAt:Je.now()};return{appointmentId:(await Kx(tr(Ot,"appointments"),t)).id,error:null}}catch(t){return console.error("Error creating appointment:",t),{appointmentId:null,error:t}}},k4=async r=>{try{const e=mi(tr(Ot,"appointments"),Jn("userId","==",r),Jn("status","==","programada"));return{count:(await gi(e)).size,error:null}}catch(e){return console.error("Error counting scheduled appointments:",e),{count:0,error:e}}},I4=async(r,e,t=null)=>{try{const n=mi(tr(Ot,"appointments"),Jn("userId","==",r),Jn("date","==",e),Jn("status","==","programada")),s=await gi(n);if(t){const o=[];return s.forEach(c=>{c.id!==t&&o.push(c)}),{hasAppointment:o.length>0,error:null}}return{hasAppointment:s.size>0,error:null}}catch(n){return console.error("Error checking appointment on date:",n),{hasAppointment:!1,error:n}}},nT=(r,e)=>{const t=mi(tr(Ot,"appointments"),Jn("userId","==",r));return FM(t,n=>{const s=[];n.forEach(o=>{s.push({id:o.id,...o.data()})}),s.sort((o,c)=>{const h=new Date(`${o.date} ${o.time}`),m=new Date(`${c.date} ${c.time}`);return h-m}),e(s)},n=>{console.error("Error in appointments subscription:",n),e([])})},rT=async(r,e)=>{try{const t=wi(Ot,"appointments",r);return await cy(t,{...e,updatedAt:Je.now()}),{error:null}}catch(t){return console.error("Error updating appointment:",t),{error:t}}},ap=async(r,e)=>rT(r,{status:e}),M4=async()=>{try{const r=mi(tr(Ot,"appointments"),Jn("status","==","programada")),e=await gi(r),t=new Date;let n=0;const s=[];return e.forEach(o=>{const c=o.data(),h=new Date(`${c.date}T${c.time}`),m=new Date(h.getTime()+7200*1e3);t>m&&(s.push(ap(o.id,"perdida")),n++)}),await Promise.all(s),{updatedCount:n,error:null}}catch(r){return console.error("Error marking overdue appointments:",r),{updatedCount:0,error:r}}},aT=async(r,e,t=null)=>{try{const n=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM"],s=mi(tr(Ot,"appointments"),Jn("date","==",r),Jn("clinica","==",e),Jn("status","==","programada")),o=await gi(s),c={};return o.forEach(m=>{const y=m.data().time;c[y]=(c[y]||0)+1}),{availableSlots:n.filter(m=>(c[m]||0)<2||m===t),error:null}}catch(n){return console.error("Error getting available time slots:",n),{availableSlots:[],error:n}}},j4=async(r,e,t)=>{try{const n={userId:r,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdBy:t,createdByStaff:!0,createdAt:Je.now(),updatedAt:Je.now()};return{appointmentId:(await Kx(tr(Ot,"appointments"),n)).id,error:null}}catch(n){return console.error("Error creating appointment for patient:",n),{appointmentId:null,error:n}}},O4=async(r=null)=>{try{let e;r?e=mi(tr(Ot,"appointments"),Jn("date","==",r)):e=mi(tr(Ot,"appointments"));const t=await gi(e),n=[];return t.forEach(s=>{n.push({id:s.id,...s.data()})}),n.sort((s,o)=>{const c=new Date(`${s.date} ${s.time}`);return new Date(`${o.date} ${o.time}`)-c}),{appointments:n,error:null}}catch(e){return console.error("Error getting all appointments:",e),{appointments:[],error:e}}},P4=async()=>{try{const r=tr(Ot,"appointments"),e=tr(Ot,"users"),t=await gi(r),n=await gi(e),s=new Date().toISOString().split("T")[0];let o=0,c=0,h=0,m=0,v=0;return t.forEach(w=>{const E=w.data();o++,E.status==="programada"&&c++,E.status==="terminada"&&h++,E.status==="cancelada"&&m++,E.date===s&&v++}),{stats:{totalPatients:n.size,totalAppointments:o,scheduledAppointments:c,completedAppointments:h,cancelledAppointments:m,todayAppointments:v},error:null}}catch(r){return console.error("Error getting dashboard stats:",r),{stats:null,error:r}}},L4=async()=>{try{const r=new Date().toISOString().split("T")[0],e=mi(tr(Ot,"appointments"),Jn("date","==",r),Jn("status","==","programada")),t=await gi(e),n=[];return t.forEach(s=>{n.push({id:s.id,...s.data()})}),n.sort((s,o)=>{const c=new Date(`1970-01-01 ${s.time}`),h=new Date(`1970-01-01 ${o.time}`);return c-h}),{appointments:n,error:null}}catch(r){return console.error("Error getting today appointments:",r),{appointments:[],error:r}}};function V4({onLogout:r,userData:e,userType:t}){const[n,s]=z.useState(!1),[o,c]=z.useState(!1),h=z.useRef(null),m=z.useRef(null),v=e&&(e.nombres||e.nombre)||"Usuario",y=t==="admin"||t==="doctor";return z.useEffect(()=>{const w=E=>{h.current&&!h.current.contains(E.target)&&c(!1)};return o&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[o]),z.useEffect(()=>{const w=E=>{m.current&&!m.current.contains(E.target)&&s(!1)};return n&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[n]),d.jsx("header",{className:"header",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"header-content",children:[d.jsx(Mr,{to:y?"/staff/dashboard":"/",className:"logo",children:d.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),d.jsxs("div",{className:"header-actions",children:[d.jsxs("div",{ref:m,children:[d.jsx("button",{className:"mobile-menu-btn",onClick:()=>s(!n),"aria-label":"Men",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),d.jsxs("nav",{className:`nav-menu ${n?"active":""}`,children:[!y&&d.jsxs(d.Fragment,{children:[d.jsx(Mr,{to:"/",className:"nav-button",onClick:()=>s(!1),children:"Inicio"}),d.jsx(Mr,{to:"/cita",className:"nav-button",onClick:()=>s(!1),children:"Cita"}),d.jsx(Mr,{to:"/contacto",className:"nav-button",onClick:()=>s(!1),children:"Contacto"})]}),y&&d.jsx(Mr,{to:"/staff/dashboard",className:"nav-button",onClick:()=>s(!1),children:"Dashboard"})]})]}),d.jsxs("div",{className:"profile-container",ref:h,children:[d.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>c(!o),children:[e?.photoURL?d.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),d.jsx("span",{className:"user-name",children:v})]}),o&&d.jsxs("div",{className:"profile-dropdown",children:[!y&&d.jsxs(d.Fragment,{children:[d.jsx(Mr,{to:"/perfil",className:"dropdown-item",onClick:()=>c(!1),children:"Perfil"}),d.jsx(Mr,{to:"/notificaciones",className:"dropdown-item",onClick:()=>c(!1),children:"Notificaciones"})]}),d.jsx("button",{className:"dropdown-item logout",onClick:r,children:"Cerrar sesin"})]})]})]})]})})})}function U4(){return d.jsx("footer",{className:"footer",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"footer-content",children:[d.jsxs("div",{className:"footer-section",children:[d.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),d.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),d.jsxs("div",{className:"footer-section",children:[d.jsx("h3",{children:"Contacto Principal"}),d.jsxs("div",{className:"contact-info",children:[d.jsxs("div",{className:"contact-item",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),d.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),d.jsxs("div",{className:"contact-item",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),d.jsx("polyline",{points:"22,6 12,13 2,6"})]}),d.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),d.jsxs("div",{className:"contact-item",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),d.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),d.jsxs("div",{className:"social-links",children:[d.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),d.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),d.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),d.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),d.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),d.jsxs("div",{className:"footer-section",children:[d.jsx("h3",{children:"Horarios"}),d.jsxs("div",{className:"schedule",children:[d.jsxs("div",{className:"schedule-item",children:[d.jsx("span",{className:"day",children:"Lunes - Sbado"}),d.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),d.jsxs("div",{className:"schedule-item",children:[d.jsx("span",{className:"day"}),d.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),d.jsxs("div",{className:"schedule-item",children:[d.jsx("span",{className:"day",children:"Domingo"}),d.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),d.jsx("div",{className:"footer-bottom",children:d.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const iT=({isOpen:r,onClose:e,onConfirm:t,title:n,message:s})=>r?d.jsx("div",{className:"modal-overlay",onClick:e,children:d.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[d.jsx("h3",{className:"modal-title",children:n}),d.jsx("p",{className:"modal-message",children:s}),d.jsxs("div",{className:"modal-actions",children:[d.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),d.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:t,children:"S, cancelar cita"})]})]})}):null;function F4({userData:r}){const e=Nu(),[t,n]=z.useState([]),[s,o]=z.useState(!1),[c,h]=z.useState(null),[m,v]=z.useState(!0);z.useEffect(()=>{const T=Sn.currentUser;if(!T){v(!1);return}const R=nT(T.uid,q=>{const B=q.sort((X,Q)=>{const ae=new Date(`${X.date} ${X.time} `),O=new Date(`${Q.date} ${Q.time} `);return ae-O});n(B),v(!1)});return()=>R()},[]);const y=T=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[T]||T,w=T=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[T]||T,E=T=>{h(T),o(!0)},S=async()=>{if(c)try{const{error:T}=await ap(c,"cancelada");T&&(console.error("Error cancelling appointment:",T),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),o(!1),h(null)}catch(T){console.error("Unexpected error:",T),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),o(!1),h(null)}},k=async T=>{try{const R=new EE({orientation:"portrait",unit:"mm",format:"a4"}),q=210,B=20,X=q-B*2;let Q=B;try{const fe=await fetch("/COI/logo.png");if(fe.ok){const U=await fe.blob(),$=await new Promise(le=>{const be=new FileReader;be.onload=()=>le(be.result),be.readAsDataURL(U)}),Z=new Image;await new Promise(le=>{Z.onload=le,Z.src=$});const ce=40,ye=Z.height*ce/Z.width,Ie=(q-ce)/2;R.addImage($,"PNG",Ie,Q,ce,ye),Q+=ye+15}}catch(de){console.warn("No se pudo cargar el logo:",de)}R.setFontSize(20),R.setFont("helvetica","bold");const ae="COMPROBANTE DE CITA",O=R.getTextWidth(ae);if(R.text(ae,(q-O)/2,Q),Q+=10,R.setDrawColor(200,200,200),R.line(B,Q,q-B,Q),Q+=10,R.setFontSize(14),R.setFont("helvetica","bold"),R.text("Detalles de la Cita",B,Q),Q+=8,R.setFontSize(11),R.setFont("helvetica","normal"),R.setFont("helvetica","bold"),R.text("Paciente:",B,Q),R.setFont("helvetica","normal"),R.text(T.patientName||"Usuario",B+30,Q),Q+=7,R.setFont("helvetica","bold"),R.text("Motivo:",B,Q),R.setFont("helvetica","normal"),R.text(T.reason||"No especificado",B+30,Q),Q+=7,R.setFont("helvetica","bold"),R.text("Clnica:",B,Q),R.setFont("helvetica","normal"),R.text(w(T.clinica),B+30,Q),Q+=7,R.setFont("helvetica","bold"),R.text("Fecha:",B,Q),R.setFont("helvetica","normal"),R.text(T.date,B+30,Q),Q+=7,R.setFont("helvetica","bold"),R.text("Hora:",B,Q),R.setFont("helvetica","normal"),R.text(T.time,B+30,Q),Q+=7,R.setFont("helvetica","bold"),R.text("Estado:",B,Q),R.setFont("helvetica","normal"),R.text(y(T.status),B+30,Q),Q+=10,T.notas&&T.notas.trim()){R.setFont("helvetica","bold"),R.text("Notas adicionales:",B,Q),Q+=6,R.setFont("helvetica","normal");const de=R.splitTextToSize(T.notas,X);R.text(de,B,Q),Q+=de.length*6+10}R.setDrawColor(200,200,200),R.line(B,Q,q-B,Q),Q+=10,R.setFontSize(10),R.setFont("helvetica","italic"),R.setTextColor(100,100,100);const C=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});R.text(`Comprobante generado el: ${C}`,B,Q);const N=R.output("arraybuffer"),M=new Blob([N],{type:"application/pdf"}),j=URL.createObjectURL(M),P=document.createElement("a"),I=`comprobante-cita-${T.date}.pdf`;P.href=j,P.download=I,P.style.display="none",document.body.appendChild(P),P.click(),setTimeout(()=>{document.body.removeChild(P),URL.revokeObjectURL(j)},1500)}catch(R){console.error("Error generating PDF:",R),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}},L=T=>{e("/cita",{state:{editingAppointment:T}})};return d.jsxs("div",{className:"home-page",children:[d.jsxs("div",{className:"container",children:[d.jsxs("section",{className:"my-appointments-section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:"Mis Citas"}),t.length>3&&d.jsxs(Mr,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),d.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),m?d.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:[d.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),d.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Cargando citas..."})]}):t.length>0?d.jsx(d.Fragment,{children:d.jsx("div",{className:"appointments-grid",children:t.slice(0,3).map(T=>d.jsxs("div",{className:"appointment-card",children:[d.jsxs("div",{className:"appointment-header",children:[d.jsxs("div",{className:"appointment-header-left",children:[d.jsx("div",{className:"appointment-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsx("button",{className:"download-receipt-btn",onClick:()=>k(T),title:"Descargar comprobante",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17"})})})]}),d.jsx("span",{className:`appointment-status status-${T.status}`,children:y(T.status)})]}),d.jsxs("div",{className:"appointment-details",children:[d.jsxs("h3",{children:["Paciente: ",T.patientName||"Usuario"]}),d.jsxs("div",{className:"appointment-info",children:[d.jsxs("div",{className:"info-item",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),d.jsx("span",{children:T.date})]}),d.jsxs("div",{className:"info-item",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("polyline",{points:"12 6 12 12 16 14"})]}),d.jsx("span",{children:T.time})]})]}),T.reason&&d.jsxs("p",{className:"appointment-reason",children:[d.jsx("strong",{children:"Motivo:"})," ",T.reason]}),T.clinica&&d.jsxs("p",{className:"appointment-reason",children:[d.jsx("strong",{children:"Clnica:"})," ",w(T.clinica)]}),T.notas&&T.notas.trim()&&d.jsxs("p",{className:"appointment-reason appointment-notes",children:[d.jsx("strong",{children:"Notas:"})," ",T.notas]})]}),T.status==="programada"&&d.jsxs("div",{className:"appointment-actions",children:[d.jsxs("button",{className:"btn-action btn-edit",onClick:()=>L(T),title:"Editar cita",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),d.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),d.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>E(T.id),title:"Cancelar cita",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),d.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},T.id))})}):d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsx("h3",{children:"No tienes citas programadas"}),d.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),d.jsx(Mr,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),d.jsxs("section",{className:"medical-history-section",children:[d.jsx("h2",{className:"section-title",children:"Historial Clnico"}),d.jsxs("div",{className:"content-card",children:[d.jsx("div",{className:"card-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d.jsx("polyline",{points:"14 2 14 8 20 8"}),d.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),d.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),d.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{children:"Tu Historial Mdico"}),d.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),d.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),d.jsxs("section",{className:"prescriptions-section",children:[d.jsx("h2",{className:"section-title",children:"Recetas"}),d.jsxs("div",{className:"content-card",children:[d.jsx("div",{className:"card-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d.jsx("polyline",{points:"14 2 14 8 20 8"}),d.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),d.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),d.jsxs("div",{className:"card-content",children:[d.jsx("h3",{children:"Tus Recetas Mdicas"}),d.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),d.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),d.jsx(iT,{isOpen:s,onClose:()=>{o(!1),h(null)},onConfirm:S,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function z4(){const r=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return d.jsx("div",{className:"contact-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"contact-header",children:[d.jsx("h1",{children:"Nuestras Ubicaciones"}),d.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),d.jsx("div",{className:"clinics-grid",children:r.map(e=>d.jsxs("div",{className:"clinic-card",children:[d.jsxs("div",{className:"clinic-header",children:[d.jsx("h2",{children:e.name}),d.jsx("span",{className:"location-tag",children:e.location})]}),d.jsxs("div",{className:"clinic-info",children:[d.jsxs("div",{className:"info-section",children:[d.jsxs("h3",{children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((t,n)=>d.jsxs("div",{className:"info-item",children:[d.jsxs("span",{className:"label",children:[t.type,":"]}),t.whatsapp?d.jsxs("a",{href:`https://wa.me/${t.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[t.number,d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):d.jsx("span",{className:"value",children:t.number})]},n))]}),d.jsxs("div",{className:"info-section",children:[d.jsxs("h3",{children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),d.jsx("div",{className:"info-item",children:d.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function B4({userData:r}){const[e,t]=z.useState(null),[n,s]=z.useState(!1),[o,c]=z.useState("");z.useEffect(()=>{if(r)t(r);else{const w=localStorage.getItem("userData");w&&t(JSON.parse(w))}},[r]);const h=w=>new Promise((E,S)=>{const k=new FileReader;k.onload=L=>{const T=new Image;T.onload=()=>{const R=document.createElement("canvas"),q=R.getContext("2d");let B=T.width,X=T.height;const Q=800;B>X?B>Q&&(X=X*Q/B,B=Q):X>Q&&(B=B*Q/X,X=Q),R.width=B,R.height=X,q.drawImage(T,0,0,B,X),R.toBlob(ae=>{ae?E(ae):S(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},T.onerror=()=>S(new Error("Error al cargar la imagen")),T.src=L.target.result},k.onerror=()=>S(new Error("Error al leer el archivo")),k.readAsDataURL(w)}),m=w=>{if(!w)return"No especificado";const[E,S,k]=w.split("-");return new Date(E,S-1,k).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},v=w=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[w]||w,y=async w=>{const E=w.target.files[0];if(!E)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(E.type)){c("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const k=5*1024*1024;if(E.size>k){c("La imagen debe ser menor a 5MB");return}s(!0),c("");const L=Sn.currentUser;if(!L){c("Debes estar autenticado para subir una foto"),s(!1);return}try{const T=await h(E),R=new File([T],E.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:q,error:B}=await T4(L.uid,R);if(B){console.error("Upload error:",B);let X="Error al subir la foto. Por favor, intenta de nuevo.";B.code==="storage/unauthorized"?X="No tienes permisos para subir fotos. Contacta al administrador.":B.code==="storage/canceled"?X="La subida fue cancelada.":B.code==="storage/unknown"&&(X="Error desconocido. Verifica tu conexin a internet."),c(X),s(!1);return}t(X=>({...X,photoURL:q})),s(!1)}catch(T){console.error("Unexpected error:",T),c(T.message||"Error inesperado. Por favor, intenta de nuevo."),s(!1)}};return e?d.jsx("div",{className:"profile-page",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"profile-header",children:[d.jsxs("div",{className:"profile-avatar-container",children:[d.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:y,style:{display:"none"}}),d.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:n?d.jsx("div",{className:"upload-spinner"}):e.photoURL?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),d.jsx("div",{className:"photo-overlay",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),d.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),d.jsx("div",{className:"photo-overlay",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),d.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),d.jsxs("div",{className:"profile-header-info",children:[d.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),d.jsx("p",{className:"profile-email",children:e.email}),o&&d.jsx("p",{className:"upload-error",children:o})]})]}),d.jsxs("div",{className:"profile-sections",children:[d.jsxs("section",{className:"profile-section",children:[d.jsxs("h2",{className:"section-title",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),d.jsxs("div",{className:"info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Nombres"}),d.jsx("p",{children:e.nombres||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Apellidos"}),d.jsx("p",{children:e.apellidos||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Fecha de Nacimiento"}),d.jsx("p",{children:m(e.fechaNacimiento)})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"DUI"}),d.jsx("p",{children:e.dui||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Gnero"}),d.jsx("p",{children:v(e.genero)})]})]})]}),d.jsxs("section",{className:"profile-section",children:[d.jsxs("h2",{className:"section-title",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),d.jsxs("div",{className:"info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Correo Electrnico"}),d.jsx("p",{children:e.email||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Telfono"}),d.jsx("p",{children:e.telefono||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Direccin"}),d.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),d.jsxs("section",{className:"profile-section",children:[d.jsxs("h2",{className:"section-title",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),d.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),d.jsxs("div",{className:"info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Nombre"}),d.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Telfono"}),d.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:"Parentesco"}),d.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):d.jsx("div",{className:"profile-page",children:d.jsx("div",{className:"container",children:d.jsx("div",{className:"loading-state",children:d.jsx("p",{children:"Cargando perfil..."})})})})}function H4(){const r=Nu(),[e,t]=z.useState([]),[n,s]=z.useState(null),[o,c]=z.useState(!1),[h,m]=z.useState(null),[v,y]=z.useState(!0);z.useEffect(()=>{const R=Sn.currentUser;if(!R){y(!1);return}const q=nT(R.uid,B=>{const X=B.sort((Q,ae)=>{const O=new Date(`${Q.date} ${Q.time}`);return new Date(`${ae.date} ${ae.time}`)-O});t(X),y(!1)});return()=>q()},[]);const w=R=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[R]||R,E=R=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[R]||R,S=R=>{s(n===R?null:R)},k=R=>{m(R),c(!0)},L=async()=>{if(h)try{const{error:R}=await ap(h,"cancelada");R&&(console.error("Error cancelling appointment:",R),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),c(!1),m(null)}catch(R){console.error("Unexpected error:",R),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),c(!1),m(null)}},T=R=>{r("/cita",{state:{editingAppointment:R}})};return d.jsxs("div",{className:"appointments-list-page",children:[d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"page-header",children:[d.jsxs("button",{className:"back-button",onClick:()=>r("/"),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),d.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),d.jsx("h1",{className:"page-title",children:"Mis Citas"}),d.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?d.jsx("div",{className:"appointments-list",children:e.map(R=>d.jsxs("div",{className:`appointment-list-item ${n===R.id?"expanded":""}`,children:[d.jsxs("div",{className:"appointment-summary",onClick:()=>S(R.id),children:[d.jsxs("div",{className:"summary-content",children:[d.jsxs("div",{className:"summary-date",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),d.jsx("span",{children:R.date})]}),d.jsx("div",{className:"summary-reason",children:R.reason||"Sin motivo especificado"}),d.jsx("span",{className:`summary-status status-${R.status}`,children:w(R.status)})]}),d.jsx("div",{className:"expand-icon",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),n===R.id&&d.jsxs("div",{className:"appointment-details",children:[d.jsxs("div",{className:"details-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Paciente"}),d.jsx("p",{children:R.patientName||"Usuario"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Hora"}),d.jsx("p",{children:R.time})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Clnica"}),d.jsx("p",{children:E(R.clinica)})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Motivo"}),d.jsx("p",{children:R.reason||"No especificado"})]}),R.notas&&R.notas.trim()&&d.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[d.jsx("label",{children:"Notas"}),d.jsx("p",{children:R.notas})]})]}),R.status==="programada"&&d.jsxs("div",{className:"appointment-actions",children:[d.jsxs("button",{className:"btn-action btn-edit",onClick:()=>T(R),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),d.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),d.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>k(R.id),children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),d.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},R.id))}):d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsx("h3",{children:"No tienes citas programadas"}),d.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),d.jsx("button",{className:"cta-button",onClick:()=>r("/cita"),children:"Agendar Cita"})]})]}),d.jsx(iT,{isOpen:o,onClose:()=>{c(!1),m(null)},onConfirm:L,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function q4(){const r=Ru(),{appointment:e}=r.state||{},t={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},n={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return d.jsx("div",{className:"confirmation-page",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"confirmation-card error",children:[d.jsx("h2",{children:"No se encontr informacin de la cita"}),d.jsx("p",{children:"Parece que has llegado aqu por error."}),d.jsx(Mr,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const s=async()=>{const h=await fetch("/COI/logo.png");if(!h.ok)throw new Error("No se pudo obtener el logo");const m=await h.blob();return await new Promise((v,y)=>{const w=new FileReader;w.onload=()=>v(w.result),w.onerror=y,w.readAsDataURL(m)})},o=async()=>{try{const c=new EE({orientation:"portrait",unit:"mm",format:"a4"}),h=210,m=20,v=h-m*2;let y=m;try{const ae=await s(),O=new Image;await new Promise((j,P)=>{O.onload=j,O.onerror=P,O.src=ae});const C=40,N=O.height*C/O.width,M=(h-C)/2;c.addImage(ae,"PNG",M,y,C,N),y+=N+15}catch(ae){console.warn("No se pudo cargar el logo:",ae)}c.setFontSize(20),c.setFont("helvetica","bold"),c.setTextColor(0,0,0);const w="COMPROBANTE DE CITA",E=c.getTextWidth(w);c.text(w,(h-E)/2,y),y+=10,c.setDrawColor(200,200,200),c.line(m,y,h-m,y),y+=10;const S=n[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Informacin de la Clnica",m,y),y+=8,c.setFontSize(11),c.setFont("helvetica","normal"),c.text(S.name||"Clnica Dental Dr. Csar Vsquez",m,y),y+=6,S.location&&(c.setFont("helvetica","italic"),c.text(`Ubicacin: ${S.location}`,m,y),y+=6),S.phones&&S.phones.length>0&&(c.setFont("helvetica","normal"),c.text(`Telfono: ${S.phones.join(" / ")}`,m,y),y+=6),S.address){c.setFont("helvetica","normal");const ae=c.splitTextToSize(`Direccin: ${S.address}`,v);c.text(ae,m,y),y+=ae.length*6}y+=5,c.setDrawColor(200,200,200),c.line(m,y,h-m,y),y+=10,c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Detalles de la Cita",m,y),y+=8,c.setFontSize(11),c.setFont("helvetica","normal");const k=t[e.motivo]||e.motivo;c.setFont("helvetica","bold"),c.text("Motivo:",m,y),c.setFont("helvetica","normal"),c.text(k,m+30,y),y+=7,c.setFont("helvetica","bold"),c.text("Clnica:",m,y),c.setFont("helvetica","normal"),c.text(S.name||e.clinica,m+30,y),y+=7,c.setFont("helvetica","bold"),c.text("Fecha:",m,y),c.setFont("helvetica","normal");const L=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(c.text(L,m+30,y),y+=7,c.setFont("helvetica","bold"),c.text("Hora:",m,y),c.setFont("helvetica","normal"),c.text(e.hora,m+30,y),y+=7,e.notas&&e.notas.trim()){y+=3,c.setFont("helvetica","bold"),c.text("Notas adicionales:",m,y),y+=6,c.setFont("helvetica","normal");const ae=c.splitTextToSize(e.notas,v);c.text(ae,m,y),y+=ae.length*6}y+=10,c.setDrawColor(200,200,200),c.line(m,y,h-m,y),y+=10,c.setFontSize(10),c.setFont("helvetica","italic"),c.setTextColor(100,100,100);const T=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});c.text(`Comprobante generado el: ${T}`,m,y),y+=6,c.text("Este comprobante es una confirmacin de tu solicitud de cita.",m,y),y+=6,c.text("Te contactaremos pronto para confirmar los detalles.",m,y);const R=c.output("arraybuffer"),q=new Blob([R],{type:"application/pdf"}),B=URL.createObjectURL(q),X=document.createElement("a"),Q=`comprobante-cita-${e.fecha}.pdf`;X.href=B,X.setAttribute("href",B),X.download=Q,X.setAttribute("download",Q),X.style.display="none",document.body.appendChild(X),X.click(),setTimeout(()=>{document.body.removeChild(X),URL.revokeObjectURL(B)},1500)}catch(c){console.error("Error generating PDF:",c),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return d.jsx("div",{className:"confirmation-page",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"confirmation-card",children:[d.jsx("div",{className:"success-icon",children:d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),d.jsx("h1",{children:"Cita Agendada Exitosamente!"}),d.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),d.jsxs("div",{className:"appointment-details",children:[d.jsx("h3",{children:"Detalles de la Cita"}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Motivo:"}),d.jsx("span",{className:"value",children:t[e.motivo]||e.motivo})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Clnica:"}),d.jsx("span",{className:"value",children:n[e.clinica]?.name||e.clinica})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Fecha:"}),d.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Hora:"}),d.jsx("span",{className:"value",children:e.hora})]}),e.notas&&d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Notas:"}),d.jsx("span",{className:"value",children:e.notas})]})]}),d.jsxs("div",{className:"actions",children:[d.jsx(Mr,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),d.jsxs("button",{onClick:o,className:"btn-primary",children:[d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:d.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function sT(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=sT(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function un(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=sT(r))&&(n&&(n+=" "),n+=e);return n}const oT=6048e5,Y4=864e5,ip=6e4,sp=36e5,G4=1e3,Lb=Symbol.for("constructDateFrom");function it(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&Lb in r?r[Lb](e):r instanceof Date?new r.constructor(e):new Date(e)}function we(r,e){return it(e||r,r)}function Ur(r,e,t){const n=we(r,t?.in);return isNaN(e)?it(t?.in||r,NaN):(e&&n.setDate(n.getDate()+e),n)}function Br(r,e,t){const n=we(r,t?.in);if(isNaN(e))return it(r,NaN);if(!e)return n;const s=n.getDate(),o=it(r,n.getTime());o.setMonth(n.getMonth()+e+1,0);const c=o.getDate();return s>=c?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function lT(r,e,t){return it(r,+we(r)+e)}function W4(r,e,t){return lT(r,e*sp)}let Q4={};function Ro(){return Q4}function vi(r,e){const t=Ro(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=we(r,e?.in),o=s.getDay(),c=(o<n?7:0)+o-n;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function Fl(r,e){return vi(r,{...e,weekStartsOn:1})}function cT(r,e){const t=we(r,e?.in),n=t.getFullYear(),s=it(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=Fl(s),c=it(t,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const h=Fl(c);return t.getTime()>=o.getTime()?n+1:t.getTime()>=h.getTime()?n:n-1}function wf(r){const e=we(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function bi(r,...e){const t=it.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function xo(r,e){const t=we(r,e?.in);return t.setHours(0,0,0,0),t}function zl(r,e,t){const[n,s]=bi(t?.in,r,e),o=xo(n),c=xo(s),h=+o-wf(o),m=+c-wf(c);return Math.round((h-m)/Y4)}function K4(r,e){const t=cT(r,e),n=it(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Fl(n)}function Cu(r,e,t){const n=we(r,t?.in);return n.setTime(n.getTime()+e*ip),n}function hy(r,e,t){return Br(r,e*3,t)}function X4(r,e,t){return lT(r,e*1e3)}function bf(r,e,t){return Ur(r,e*7,t)}function li(r,e,t){return Br(r,e*12,t)}function Vb(r,e){let t,n=e?.in;return r.forEach(s=>{!n&&typeof s=="object"&&(n=it.bind(null,s));const o=we(s,n);(!t||t<o||isNaN(+o))&&(t=o)}),it(n,t||NaN)}function Ub(r,e){let t,n=e?.in;return r.forEach(s=>{!n&&typeof s=="object"&&(n=it.bind(null,s));const o=we(s,n);(!t||t>o||isNaN(+o))&&(t=o)}),it(n,t||NaN)}function $4(r,e,t){const[n,s]=bi(t?.in,r,e);return+xo(n)==+xo(s)}function ci(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Ef(r){return!(!ci(r)&&typeof r!="number"||isNaN(+we(r)))}function xf(r,e,t){const[n,s]=bi(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=n.getMonth()-s.getMonth();return o*12+c}function ls(r,e){const t=we(r,e?.in);return Math.trunc(t.getMonth()/3)+1}function Tf(r,e,t){const[n,s]=bi(t?.in,r,e),o=n.getFullYear()-s.getFullYear(),c=ls(n)-ls(s);return o*4+c}function Sf(r,e,t){const[n,s]=bi(t?.in,r,e);return n.getFullYear()-s.getFullYear()}function Z4(r,e,t){const[n,s]=bi(t?.in,r,e),o=Fb(n,s),c=Math.abs(zl(n,s));n.setDate(n.getDate()-o*c);const h=+(Fb(n,s)===-o),m=o*(c-h);return m===0?0:m}function Fb(r,e){const t=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function uT(r,e){const t=we(r,e?.in);return t.setHours(23,59,59,999),t}function dT(r,e){const t=we(r,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function ov(r,e){const t=we(r,e?.in),n=t.getMonth(),s=n-n%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t}function hT(r,e){const t=we(r,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function fT(r,e){const t=we(r,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function op(r,e){const t=we(r,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function J4(r,e){const t=Ro(),n=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=we(r,e?.in),o=s.getDay(),c=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}const ej={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tj=(r,e,t)=>{let n;const s=ej[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function kl(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const nj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ij={date:kl({formats:nj,defaultWidth:"full"}),time:kl({formats:rj,defaultWidth:"full"}),dateTime:kl({formats:aj,defaultWidth:"full"})},sj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oj=(r,e,t,n)=>sj[r];function ga(r){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const c=r.defaultFormattingWidth||r.defaultWidth,h=t?.width?String(t.width):c;s=r.formattingValues[h]||r.formattingValues[c]}else{const c=r.defaultWidth,h=t?.width?String(t.width):r.defaultWidth;s=r.values[h]||r.values[c]}const o=r.argumentCallback?r.argumentCallback(e):e;return s[o]}}const lj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pj=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},mj={ordinalNumber:pj,era:ga({values:lj,defaultWidth:"wide"}),quarter:ga({values:cj,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ga({values:uj,defaultWidth:"wide"}),day:ga({values:dj,defaultWidth:"wide"}),dayPeriod:ga({values:hj,defaultWidth:"wide",formattingValues:fj,defaultFormattingWidth:"wide"})};function va(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],o=e.match(s);if(!o)return null;const c=o[0],h=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],m=Array.isArray(h)?vj(h,w=>w.test(c)):gj(h,w=>w.test(c));let v;v=r.valueCallback?r.valueCallback(m):m,v=t.valueCallback?t.valueCallback(v):v;const y=e.slice(c.length);return{value:v,rest:y}}}function gj(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function vj(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function pT(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],o=e.match(r.parsePattern);if(!o)return null;let c=r.valueCallback?r.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(s.length);return{value:c,rest:h}}}const yj=/^(\d+)(th|st|nd|rd)?/i,_j=/\d+/i,wj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bj={any:[/^b/i,/^(a|c)/i]},Ej={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xj={any:[/1/i,/2/i,/3/i,/4/i]},Tj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Sj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Dj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Aj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rj={ordinalNumber:pT({matchPattern:yj,parsePattern:_j,valueCallback:r=>parseInt(r,10)}),era:va({matchPatterns:wj,defaultMatchWidth:"wide",parsePatterns:bj,defaultParseWidth:"any"}),quarter:va({matchPatterns:Ej,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any",valueCallback:r=>r+1}),month:va({matchPatterns:Tj,defaultMatchWidth:"wide",parsePatterns:Sj,defaultParseWidth:"any"}),day:va({matchPatterns:Cj,defaultMatchWidth:"wide",parsePatterns:Dj,defaultParseWidth:"any"}),dayPeriod:va({matchPatterns:Aj,defaultMatchWidth:"any",parsePatterns:Nj,defaultParseWidth:"any"})},mT={code:"en-US",formatDistance:tj,formatLong:ij,formatRelative:oj,localize:mj,match:Rj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kj(r,e){const t=we(r,e?.in);return zl(t,op(t))+1}function fy(r,e){const t=we(r,e?.in),n=+Fl(t)-+K4(t);return Math.round(n/oT)+1}function py(r,e){const t=we(r,e?.in),n=t.getFullYear(),s=Ro(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=it(e?.in||r,0);c.setFullYear(n+1,0,o),c.setHours(0,0,0,0);const h=vi(c,e),m=it(e?.in||r,0);m.setFullYear(n,0,o),m.setHours(0,0,0,0);const v=vi(m,e);return+t>=+h?n+1:+t>=+v?n:n-1}function Ij(r,e){const t=Ro(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=py(r,e),o=it(e?.in||r,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),vi(o,e)}function gT(r,e){const t=we(r,e?.in),n=+vi(t,e)-+Ij(t,e);return Math.round(n/oT)+1}function at(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const ns={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return at(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):at(t+1,2)},d(r,e){return at(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return at(r.getHours()%12||12,e.length)},H(r,e){return at(r.getHours(),e.length)},m(r,e){return at(r.getMinutes(),e.length)},s(r,e){return at(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return at(s,e.length)}},_l={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zb={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return ns.y(r,e)},Y:function(r,e,t,n){const s=py(r,n),o=s>0?s:1-s;if(e==="YY"){const c=o%100;return at(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):at(o,e.length)},R:function(r,e){const t=cT(r);return at(t,e.length)},u:function(r,e){const t=r.getFullYear();return at(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return at(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return at(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return ns.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return at(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=gT(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):at(s,e.length)},I:function(r,e,t){const n=fy(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):at(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):ns.d(r,e)},D:function(r,e,t){const n=kj(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):at(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return at(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return at(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return at(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=_l.noon:n===0?s=_l.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=_l.evening:n>=12?s=_l.afternoon:n>=4?s=_l.morning:s=_l.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return ns.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):ns.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):at(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):at(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):ns.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):ns.s(r,e)},S:function(r,e){return ns.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Hb(n);case"XXXX":case"XX":return oo(n);case"XXXXX":case"XXX":default:return oo(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Hb(n);case"xxxx":case"xx":return oo(n);case"xxxxx":case"xxx":default:return oo(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bb(n,":");case"OOOO":default:return"GMT"+oo(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bb(n,":");case"zzzz":default:return"GMT"+oo(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return at(n,e.length)},T:function(r,e,t){return at(+r,e.length)}};function Bb(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),o=n%60;return o===0?t+String(s):t+String(s)+e+at(o,2)}function Hb(r,e){return r%60===0?(r>0?"-":"+")+at(Math.abs(r)/60,2):oo(r,e)}function oo(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=at(Math.trunc(n/60),2),o=at(n%60,2);return t+s+e+o}const qb=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vT=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Mj=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return qb(r,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",qb(n,e)).replace("{{time}}",vT(s,e))},lv={p:vT,P:Mj},jj=/^D+$/,Oj=/^Y+$/,Pj=["D","DD","YY","YYYY"];function Lj(r){return jj.test(r)}function Vj(r){return Oj.test(r)}function Uj(r,e,t){const n=Fj(r,e,t);if(console.warn(n),Pj.includes(r))throw new RangeError(n)}function Fj(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hj=/^'([^]*?)'?$/,qj=/''/g,Yj=/[a-zA-Z]/;function Yb(r,e,t){const n=Ro(),s=t?.locale??n.locale??mT,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,c=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,h=we(r,t?.in);if(!Ef(h))throw new RangeError("Invalid time value");let m=e.match(Bj).map(y=>{const w=y[0];if(w==="p"||w==="P"){const E=lv[w];return E(y,s.formatLong)}return y}).join("").match(zj).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:Gj(y)};if(zb[w])return{isToken:!0,value:y};if(w.match(Yj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(m=s.localize.preprocessor(h,m));const v={firstWeekContainsDate:o,weekStartsOn:c,locale:s};return m.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!t?.useAdditionalWeekYearTokens&&Vj(w)||!t?.useAdditionalDayOfYearTokens&&Lj(w))&&Uj(w,e,String(r));const E=zb[w[0]];return E(h,w,s.localize,v)}).join("")}function Gj(r){const e=r.match(Hj);return e?e[1].replace(qj,"'"):r}function Gb(r,e){return we(r,e?.in).getDate()}function Wj(r,e){return we(r,e?.in).getDay()}function Qj(r,e){const t=we(r,e?.in),n=t.getFullYear(),s=t.getMonth(),o=it(t,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function Kj(){return Object.assign({},Ro())}function Pr(r,e){return we(r,e?.in).getHours()}function Xj(r,e){const t=we(r,e?.in).getDay();return t===0?7:t}function Lr(r,e){return we(r,e?.in).getMinutes()}function Pn(r,e){return we(r,e?.in).getMonth()}function fs(r){return we(r).getSeconds()}function cv(r){return+we(r)}function Le(r,e){return we(r,e?.in).getFullYear()}function xs(r,e){return+we(r)>+we(e)}function wa(r,e){return+we(r)<+we(e)}function $j(r,e){return+we(r)==+we(e)}function Zj(r,e){const t=Jj(e)?new e(0):it(e,0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}function Jj(r){return typeof r=="function"&&r.prototype?.constructor===r}const eO=10;class yT{subPriority=0;validate(e,t){return!0}}class tO extends yT{constructor(e,t,n,s,o){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class nO extends yT{priority=eO;subPriority=-1;constructor(e,t){super(),this.context=e||(n=>it(t,n))}set(e,t){return t.timestampIsSet?e:it(e,Zj(e,this.context))}}class Ze{run(e,t,n,s){const o=this.parse(e,t,n,s);return o?{setter:new tO(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,n){return!0}}class rO extends Ze{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const It={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ya={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Mt(r,e){return r&&{value:e(r.value),rest:r.rest}}function yt(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function _a(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,c=t[5]?parseInt(t[5],10):0;return{value:n*(s*sp+o*ip+c*G4),rest:e.slice(t[0].length)}}function _T(r){return yt(It.anyDigitsSigned,r)}function Tt(r,e){switch(r){case 1:return yt(It.singleDigit,e);case 2:return yt(It.twoDigits,e);case 3:return yt(It.threeDigits,e);case 4:return yt(It.fourDigits,e);default:return yt(new RegExp("^\\d{1,"+r+"}"),e)}}function Cf(r,e){switch(r){case 1:return yt(It.singleDigitSigned,e);case 2:return yt(It.twoDigitsSigned,e);case 3:return yt(It.threeDigitsSigned,e);case 4:return yt(It.fourDigitsSigned,e);default:return yt(new RegExp("^-?\\d{1,"+r+"}"),e)}}function my(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wT(r,e){const t=e>0,n=t?e:1-e;let s;if(n<=50)s=r||100;else{const o=n+50,c=Math.trunc(o/100)*100,h=r>=o%100;s=r+c-(h?100:0)}return t?s:1-s}function bT(r){return r%400===0||r%4===0&&r%100!==0}class aO extends Ze{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const s=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return Mt(Tt(4,e),s);case"yo":return Mt(n.ordinalNumber(e,{unit:"year"}),s);default:return Mt(Tt(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const s=e.getFullYear();if(n.isTwoDigitYear){const c=wT(n.year,s);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class iO extends Ze{priority=130;parse(e,t,n){const s=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Mt(Tt(4,e),s);case"Yo":return Mt(n.ordinalNumber(e,{unit:"year"}),s);default:return Mt(Tt(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,s){const o=py(e,s);if(n.isTwoDigitYear){const h=wT(n.year,o);return e.setFullYear(h,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),vi(e,s)}const c=!("era"in t)||t.era===1?n.year:1-n.year;return e.setFullYear(c,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),vi(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class sO extends Ze{priority=130;parse(e,t){return Cf(t==="R"?4:t.length,e)}set(e,t,n){const s=it(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Fl(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class oO extends Ze{priority=130;parse(e,t){return Cf(t==="u"?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class lO extends Ze{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return Tt(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class cO extends Ze{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return Tt(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class uO extends Ze{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const s=o=>o-1;switch(t){case"M":return Mt(yt(It.month,e),s);case"MM":return Mt(Tt(2,e),s);case"Mo":return Mt(n.ordinalNumber(e,{unit:"month"}),s);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class dO extends Ze{priority=110;parse(e,t,n){const s=o=>o-1;switch(t){case"L":return Mt(yt(It.month,e),s);case"LL":return Mt(Tt(2,e),s);case"Lo":return Mt(n.ordinalNumber(e,{unit:"month"}),s);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function hO(r,e,t){const n=we(r,t?.in),s=gT(n,t)-e;return n.setDate(n.getDate()-s*7),we(n,t?.in)}class fO extends Ze{priority=100;parse(e,t,n){switch(t){case"w":return yt(It.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Tt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,s){return vi(hO(e,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function pO(r,e,t){const n=we(r,t?.in),s=fy(n,t)-e;return n.setDate(n.getDate()-s*7),n}class mO extends Ze{priority=100;parse(e,t,n){switch(t){case"I":return yt(It.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Tt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Fl(pO(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const gO=[31,28,31,30,31,30,31,31,30,31,30,31],vO=[31,29,31,30,31,30,31,31,30,31,30,31];class yO extends Ze{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return yt(It.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Tt(t.length,e)}}validate(e,t){const n=e.getFullYear(),s=bT(n),o=e.getMonth();return s?t>=1&&t<=vO[o]:t>=1&&t<=gO[o]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class _O extends Ze{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return yt(It.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Tt(t.length,e)}}validate(e,t){const n=e.getFullYear();return bT(n)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function gy(r,e,t){const n=Ro(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=we(r,t?.in),c=o.getDay(),m=(e%7+7)%7,v=7-s,y=e<0||e>6?e-(c+v)%7:(m+v)%7-(c+v)%7;return Ur(o,y,t)}class wO extends Ze{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,s){return e=gy(e,n,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class bO extends Ze{priority=90;parse(e,t,n,s){const o=c=>{const h=Math.floor((c-1)/7)*7;return(c+s.weekStartsOn+6)%7+h};switch(t){case"e":case"ee":return Mt(Tt(t.length,e),o);case"eo":return Mt(n.ordinalNumber(e,{unit:"day"}),o);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,s){return e=gy(e,n,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class EO extends Ze{priority=90;parse(e,t,n,s){const o=c=>{const h=Math.floor((c-1)/7)*7;return(c+s.weekStartsOn+6)%7+h};switch(t){case"c":case"cc":return Mt(Tt(t.length,e),o);case"co":return Mt(n.ordinalNumber(e,{unit:"day"}),o);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,s){return e=gy(e,n,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function xO(r,e,t){const n=we(r,t?.in),s=Xj(n,t),o=e-s;return Ur(n,o,t)}class TO extends Ze{priority=90;parse(e,t,n){const s=o=>o===0?7:o;switch(t){case"i":case"ii":return Tt(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Mt(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Mt(n.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Mt(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Mt(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return e=xO(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class SO extends Ze{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(my(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class CO extends Ze{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(my(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class DO extends Ze{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(my(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class AO extends Ze{priority=70;parse(e,t,n){switch(t){case"h":return yt(It.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Tt(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const s=e.getHours()>=12;return s&&n<12?e.setHours(n+12,0,0,0):!s&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class NO extends Ze{priority=70;parse(e,t,n){switch(t){case"H":return yt(It.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Tt(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class RO extends Ze{priority=70;parse(e,t,n){switch(t){case"K":return yt(It.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Tt(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class kO extends Ze{priority=70;parse(e,t,n){switch(t){case"k":return yt(It.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Tt(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const s=n<=24?n%24:n;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class IO extends Ze{priority=60;parse(e,t,n){switch(t){case"m":return yt(It.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Tt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class MO extends Ze{priority=50;parse(e,t,n){switch(t){case"s":return yt(It.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Tt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class jO extends Ze{priority=30;parse(e,t){const n=s=>Math.trunc(s*Math.pow(10,-t.length+3));return Mt(Tt(t.length,e),n)}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class OO extends Ze{priority=10;parse(e,t){switch(t){case"X":return _a(ya.basicOptionalMinutes,e);case"XX":return _a(ya.basic,e);case"XXXX":return _a(ya.basicOptionalSeconds,e);case"XXXXX":return _a(ya.extendedOptionalSeconds,e);case"XXX":default:return _a(ya.extended,e)}}set(e,t,n){return t.timestampIsSet?e:it(e,e.getTime()-wf(e)-n)}incompatibleTokens=["t","T","x"]}class PO extends Ze{priority=10;parse(e,t){switch(t){case"x":return _a(ya.basicOptionalMinutes,e);case"xx":return _a(ya.basic,e);case"xxxx":return _a(ya.basicOptionalSeconds,e);case"xxxxx":return _a(ya.extendedOptionalSeconds,e);case"xxx":default:return _a(ya.extended,e)}}set(e,t,n){return t.timestampIsSet?e:it(e,e.getTime()-wf(e)-n)}incompatibleTokens=["t","T","X"]}class LO extends Ze{priority=40;parse(e){return _T(e)}set(e,t,n){return[it(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class VO extends Ze{priority=20;parse(e){return _T(e)}set(e,t,n){return[it(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const UO={G:new rO,y:new aO,Y:new iO,R:new sO,u:new oO,Q:new lO,q:new cO,M:new uO,L:new dO,w:new fO,I:new mO,d:new yO,D:new _O,E:new wO,e:new bO,c:new EO,i:new TO,a:new SO,b:new CO,B:new DO,h:new AO,H:new NO,K:new RO,k:new kO,m:new IO,s:new MO,S:new jO,X:new OO,x:new PO,t:new LO,T:new VO},FO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,BO=/^'([^]*?)'?$/,HO=/''/g,qO=/\S/,YO=/[a-zA-Z]/;function GO(r,e,t,n){const s=()=>it(n?.in||t,NaN),o=Kj(),c=n?.locale??o.locale??mT,h=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,m=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!e)return r?s():we(t,n?.in);const v={firstWeekContainsDate:h,weekStartsOn:m,locale:c},y=[new nO(n?.in,t)],w=e.match(zO).map(T=>{const R=T[0];if(R in lv){const q=lv[R];return q(T,c.formatLong)}return T}).join("").match(FO),E=[];for(let T of w){const R=T[0],q=UO[R];if(q){const{incompatibleTokens:B}=q;if(Array.isArray(B)){const Q=E.find(ae=>B.includes(ae.token)||ae.token===R);if(Q)throw new RangeError(`The format string mustn't contain \`${Q.fullToken}\` and \`${T}\` at the same time`)}else if(q.incompatibleTokens==="*"&&E.length>0)throw new RangeError(`The format string mustn't contain \`${T}\` and any other token at the same time`);E.push({token:R,fullToken:T});const X=q.run(r,T,c.match,v);if(!X)return s();y.push(X.setter),r=X.rest}else{if(R.match(YO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(T==="''"?T="'":R==="'"&&(T=WO(T)),r.indexOf(T)===0)r=r.slice(T.length);else return s()}}if(r.length>0&&qO.test(r))return s();const S=y.map(T=>T.priority).sort((T,R)=>R-T).filter((T,R,q)=>q.indexOf(T)===R).map(T=>y.filter(R=>R.priority===T).sort((R,q)=>q.subPriority-R.subPriority)).map(T=>T[0]);let k=we(t,n?.in);if(isNaN(+k))return s();const L={};for(const T of S){if(!T.validate(k,v))return s();const R=T.set(k,L,v);Array.isArray(R)?(k=R[0],Object.assign(L,R[1])):k=R}return k}function WO(r){return r.match(BO)[1].replace(HO,"'")}function QO(r,e,t){const[n,s]=bi(t?.in,r,e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function KO(r,e,t){const[n,s]=bi(t?.in,r,e);return+ov(n)==+ov(s)}function XO(r,e,t){const[n,s]=bi(t?.in,r,e);return n.getFullYear()===s.getFullYear()}function Du(r,e,t){const n=+we(r,t?.in),[s,o]=[+we(e.start,t?.in),+we(e.end,t?.in)].sort((c,h)=>c-h);return n>=s&&n<=o}function $O(r,e,t){return Ur(r,-1,t)}function ZO(r,e){const t=()=>it(e?.in,NaN),s=n3(r);let o;if(s.date){const v=r3(s.date,2);o=a3(v.restDateString,v.year)}if(!o||isNaN(+o))return t();const c=+o;let h=0,m;if(s.time&&(h=i3(s.time),isNaN(h)))return t();if(s.timezone){if(m=s3(s.timezone),isNaN(m))return t()}else{const v=new Date(c+h),y=we(0,e?.in);return y.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),y.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),y}return we(c+h+m,e?.in)}const Ch={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},JO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,e3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,t3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function n3(r){const e={},t=r.split(Ch.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],Ch.timeZoneDelimiter.test(e.date)&&(e.date=r.split(Ch.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const s=Ch.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function r3(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:r.slice((n[1]||n[2]).length)}}function a3(r,e){if(e===null)return new Date(NaN);const t=r.match(JO);if(!t)return new Date(NaN);const n=!!t[4],s=tu(t[1]),o=tu(t[2])-1,c=tu(t[3]),h=tu(t[4]),m=tu(t[5])-1;if(n)return d3(e,h,m)?o3(e,h,m):new Date(NaN);{const v=new Date(0);return!c3(e,o,c)||!u3(e,s)?new Date(NaN):(v.setUTCFullYear(e,o,Math.max(s,c)),v)}}function tu(r){return r?parseInt(r):1}function i3(r){const e=r.match(e3);if(!e)return NaN;const t=Dg(e[1]),n=Dg(e[2]),s=Dg(e[3]);return h3(t,n,s)?t*sp+n*ip+s*1e3:NaN}function Dg(r){return r&&parseFloat(r.replace(",","."))||0}function s3(r){if(r==="Z")return 0;const e=r.match(t3);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return f3(n,s)?t*(n*sp+s*ip):NaN}function o3(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const s=n.getUTCDay()||7,o=(e-1)*7+t+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const l3=[31,null,31,30,31,30,31,31,30,31,30,31];function ET(r){return r%400===0||r%4===0&&r%100!==0}function c3(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(l3[e]||(ET(r)?29:28))}function u3(r,e){return e>=1&&e<=(ET(r)?366:365)}function d3(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function h3(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function f3(r,e){return e>=0&&e<=59}function Qn(r,e,t){const n=we(r,t?.in),s=n.getFullYear(),o=n.getDate(),c=it(r,0);c.setFullYear(s,e,15),c.setHours(0,0,0,0);const h=Qj(c);return n.setMonth(e,Math.min(o,h)),n}function qh(r,e,t){const n=we(r,t?.in);return n.setHours(e),n}function Yh(r,e,t){const n=we(r,t?.in);return n.setMinutes(e),n}function Sl(r,e,t){const n=we(r,t?.in),s=Math.trunc(n.getMonth()/3)+1,o=e-s;return Qn(n,n.getMonth()+o*3)}function Gh(r,e,t){const n=we(r,t?.in);return n.setSeconds(e),n}function pa(r,e,t){const n=we(r,t?.in);return isNaN(+n)?it(r,NaN):(n.setFullYear(e),n)}function mo(r,e,t){return Br(r,-e,t)}function xT(r,e,t){return hy(r,-1,t)}function Wb(r,e,t){return bf(r,-1,t)}function Bl(r,e,t){return li(r,-e,t)}function lp(){return typeof window<"u"}function Zl(r){return TT(r)?(r.nodeName||"").toLowerCase():"#document"}function er(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Oa(r){var e;return(e=(TT(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function TT(r){return lp()?r instanceof Node||r instanceof er(r).Node:!1}function Tn(r){return lp()?r instanceof Element||r instanceof er(r).Element:!1}function Ia(r){return lp()?r instanceof HTMLElement||r instanceof er(r).HTMLElement:!1}function Qb(r){return!lp()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof er(r).ShadowRoot}const p3=new Set(["inline","contents"]);function qu(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=vr(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!p3.has(s)}const m3=new Set(["table","td","th"]);function g3(r){return m3.has(Zl(r))}const v3=[":popover-open",":modal"];function cp(r){return v3.some(e=>{try{return r.matches(e)}catch{return!1}})}const y3=["transform","translate","scale","rotate","perspective"],_3=["transform","translate","scale","rotate","perspective","filter"],w3=["paint","layout","strict","content"];function vy(r){const e=yy(),t=Tn(r)?vr(r):r;return y3.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||_3.some(n=>(t.willChange||"").includes(n))||w3.some(n=>(t.contain||"").includes(n))}function b3(r){let e=Ts(r);for(;Ia(e)&&!Hl(e);){if(vy(e))return e;if(cp(e))return null;e=Ts(e)}return null}function yy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const E3=new Set(["html","body","#document"]);function Hl(r){return E3.has(Zl(r))}function vr(r){return er(r).getComputedStyle(r)}function up(r){return Tn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Ts(r){if(Zl(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Qb(r)&&r.host||Oa(r);return Qb(e)?e.host:e}function ST(r){const e=Ts(r);return Hl(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ia(e)&&qu(e)?e:ST(e)}function Au(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=ST(r),o=s===((n=r.ownerDocument)==null?void 0:n.body),c=er(s);if(o){const h=uv(c);return e.concat(c,c.visualViewport||[],qu(s)?s:[],h&&t?Au(h):[])}return e.concat(s,Au(s,[],t))}function uv(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}const ql=Math.min,go=Math.max,Df=Math.round,Dh=Math.floor,Na=r=>({x:r,y:r}),x3={left:"right",right:"left",bottom:"top",top:"bottom"},T3={start:"end",end:"start"};function S3(r,e,t){return go(r,ql(e,t))}function dp(r,e){return typeof r=="function"?r(e):r}function Yl(r){return r.split("-")[0]}function Yu(r){return r.split("-")[1]}function C3(r){return r==="x"?"y":"x"}function _y(r){return r==="y"?"height":"width"}const D3=new Set(["top","bottom"]);function uo(r){return D3.has(Yl(r))?"y":"x"}function wy(r){return C3(uo(r))}function A3(r,e,t){t===void 0&&(t=!1);const n=Yu(r),s=wy(r),o=_y(s);let c=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Af(c)),[c,Af(c)]}function N3(r){const e=Af(r);return[dv(r),e,dv(e)]}function dv(r){return r.replace(/start|end/g,e=>T3[e])}const Kb=["left","right"],Xb=["right","left"],R3=["top","bottom"],k3=["bottom","top"];function I3(r,e,t){switch(r){case"top":case"bottom":return t?e?Xb:Kb:e?Kb:Xb;case"left":case"right":return e?R3:k3;default:return[]}}function M3(r,e,t,n){const s=Yu(r);let o=I3(Yl(r),t==="start",n);return s&&(o=o.map(c=>c+"-"+s),e&&(o=o.concat(o.map(dv)))),o}function Af(r){return r.replace(/left|right|bottom|top/g,e=>x3[e])}function j3(r){return{top:0,right:0,bottom:0,left:0,...r}}function CT(r){return typeof r!="number"?j3(r):{top:r,right:r,bottom:r,left:r}}function Nf(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}var O3=typeof document<"u",P3=function(){},Rf=O3?z.useLayoutEffect:P3;const L3={...bE},V3=L3.useInsertionEffect,U3=V3||(r=>r());function F3(r){const e=z.useRef(()=>{});return U3(()=>{e.current=r}),z.useCallback(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}function $b(r,e,t){let{reference:n,floating:s}=r;const o=uo(e),c=wy(e),h=_y(c),m=Yl(e),v=o==="y",y=n.x+n.width/2-s.width/2,w=n.y+n.height/2-s.height/2,E=n[h]/2-s[h]/2;let S;switch(m){case"top":S={x:y,y:n.y-s.height};break;case"bottom":S={x:y,y:n.y+n.height};break;case"right":S={x:n.x+n.width,y:w};break;case"left":S={x:n.x-s.width,y:w};break;default:S={x:n.x,y:n.y}}switch(Yu(e)){case"start":S[c]-=E*(t&&v?-1:1);break;case"end":S[c]+=E*(t&&v?-1:1);break}return S}const z3=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:c}=t,h=o.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let v=await c.getElementRects({reference:r,floating:e,strategy:s}),{x:y,y:w}=$b(v,n,m),E=n,S={},k=0;for(let L=0;L<h.length;L++){const{name:T,fn:R}=h[L],{x:q,y:B,data:X,reset:Q}=await R({x:y,y:w,initialPlacement:n,placement:E,strategy:s,middlewareData:S,rects:v,platform:c,elements:{reference:r,floating:e}});y=q??y,w=B??w,S={...S,[T]:{...S[T],...X}},Q&&k<=50&&(k++,typeof Q=="object"&&(Q.placement&&(E=Q.placement),Q.rects&&(v=Q.rects===!0?await c.getElementRects({reference:r,floating:e,strategy:s}):Q.rects),{x:y,y:w}=$b(v,E,m)),L=-1)}return{x:y,y:w,placement:E,strategy:s,middlewareData:S}};async function B3(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:c,elements:h,strategy:m}=r,{boundary:v="clippingAncestors",rootBoundary:y="viewport",elementContext:w="floating",altBoundary:E=!1,padding:S=0}=dp(e,r),k=CT(S),T=h[E?w==="floating"?"reference":"floating":w],R=Nf(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(T)))==null||t?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:v,rootBoundary:y,strategy:m})),q=w==="floating"?{x:n,y:s,width:c.floating.width,height:c.floating.height}:c.reference,B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),X=await(o.isElement==null?void 0:o.isElement(B))?await(o.getScale==null?void 0:o.getScale(B))||{x:1,y:1}:{x:1,y:1},Q=Nf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:q,offsetParent:B,strategy:m}):q);return{top:(R.top-Q.top+k.top)/X.y,bottom:(Q.bottom-R.bottom+k.bottom)/X.y,left:(R.left-Q.left+k.left)/X.x,right:(Q.right-R.right+k.right)/X.x}}const H3=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:o,platform:c,elements:h,middlewareData:m}=e,{element:v,padding:y=0}=dp(r,e)||{};if(v==null)return{};const w=CT(y),E={x:t,y:n},S=wy(s),k=_y(S),L=await c.getDimensions(v),T=S==="y",R=T?"top":"left",q=T?"bottom":"right",B=T?"clientHeight":"clientWidth",X=o.reference[k]+o.reference[S]-E[S]-o.floating[k],Q=E[S]-o.reference[S],ae=await(c.getOffsetParent==null?void 0:c.getOffsetParent(v));let O=ae?ae[B]:0;(!O||!await(c.isElement==null?void 0:c.isElement(ae)))&&(O=h.floating[B]||o.floating[k]);const C=X/2-Q/2,N=O/2-L[k]/2-1,M=ql(w[R],N),j=ql(w[q],N),P=M,I=O-L[k]-j,de=O/2-L[k]/2+C,fe=S3(P,de,I),U=!m.arrow&&Yu(s)!=null&&de!==fe&&o.reference[k]/2-(de<P?M:j)-L[k]/2<0,$=U?de<P?de-P:de-I:0;return{[S]:E[S]+$,data:{[S]:fe,centerOffset:de-fe-$,...U&&{alignmentOffset:$}},reset:U}}}),q3=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:o,rects:c,initialPlacement:h,platform:m,elements:v}=e,{mainAxis:y=!0,crossAxis:w=!0,fallbackPlacements:E,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:L=!0,...T}=dp(r,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const R=Yl(s),q=uo(h),B=Yl(h)===h,X=await(m.isRTL==null?void 0:m.isRTL(v.floating)),Q=E||(B||!L?[Af(h)]:N3(h)),ae=k!=="none";!E&&ae&&Q.push(...M3(h,L,k,X));const O=[h,...Q],C=await B3(e,T),N=[];let M=((n=o.flip)==null?void 0:n.overflows)||[];if(y&&N.push(C[R]),w){const de=A3(s,c,X);N.push(C[de[0]],C[de[1]])}if(M=[...M,{placement:s,overflows:N}],!N.every(de=>de<=0)){var j,P;const de=(((j=o.flip)==null?void 0:j.index)||0)+1,fe=O[de];if(fe&&(!(w==="alignment"?q!==uo(fe):!1)||M.every(Z=>uo(Z.placement)===q?Z.overflows[0]>0:!0)))return{data:{index:de,overflows:M},reset:{placement:fe}};let U=(P=M.filter($=>$.overflows[0]<=0).sort(($,Z)=>$.overflows[1]-Z.overflows[1])[0])==null?void 0:P.placement;if(!U)switch(S){case"bestFit":{var I;const $=(I=M.filter(Z=>{if(ae){const ce=uo(Z.placement);return ce===q||ce==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ce=>ce>0).reduce((ce,ye)=>ce+ye,0)]).sort((Z,ce)=>Z[1]-ce[1])[0])==null?void 0:I[0];$&&(U=$);break}case"initialPlacement":U=h;break}if(s!==U)return{reset:{placement:U}}}return{}}}},Y3=new Set(["left","top"]);async function G3(r,e){const{placement:t,platform:n,elements:s}=r,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=Yl(t),h=Yu(t),m=uo(t)==="y",v=Y3.has(c)?-1:1,y=o&&m?-1:1,w=dp(e,r);let{mainAxis:E,crossAxis:S,alignmentAxis:k}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return h&&typeof k=="number"&&(S=h==="end"?k*-1:k),m?{x:S*y,y:E*v}:{x:E*v,y:S*y}}const W3=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:o,placement:c,middlewareData:h}=e,m=await G3(e,r);return c===((t=h.offset)==null?void 0:t.placement)&&(n=h.arrow)!=null&&n.alignmentOffset?{}:{x:s+m.x,y:o+m.y,data:{...m,placement:c}}}}};function DT(r){const e=vr(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Ia(r),o=s?r.offsetWidth:t,c=s?r.offsetHeight:n,h=Df(t)!==o||Df(n)!==c;return h&&(t=o,n=c),{width:t,height:n,$:h}}function by(r){return Tn(r)?r:r.contextElement}function Il(r){const e=by(r);if(!Ia(e))return Na(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:o}=DT(e);let c=(o?Df(t.width):t.width)/n,h=(o?Df(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const Q3=Na(0);function AT(r){const e=er(r);return!yy()||!e.visualViewport?Q3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function K3(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==er(r)?!1:e}function To(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),o=by(r);let c=Na(1);e&&(n?Tn(n)&&(c=Il(n)):c=Il(r));const h=K3(o,t,n)?AT(o):Na(0);let m=(s.left+h.x)/c.x,v=(s.top+h.y)/c.y,y=s.width/c.x,w=s.height/c.y;if(o){const E=er(o),S=n&&Tn(n)?er(n):n;let k=E,L=uv(k);for(;L&&n&&S!==k;){const T=Il(L),R=L.getBoundingClientRect(),q=vr(L),B=R.left+(L.clientLeft+parseFloat(q.paddingLeft))*T.x,X=R.top+(L.clientTop+parseFloat(q.paddingTop))*T.y;m*=T.x,v*=T.y,y*=T.x,w*=T.y,m+=B,v+=X,k=er(L),L=uv(k)}}return Nf({width:y,height:w,x:m,y:v})}function hp(r,e){const t=up(r).scrollLeft;return e?e.left+t:To(Oa(r)).left+t}function NT(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-hp(r,t),s=t.top+e.scrollTop;return{x:n,y:s}}function X3(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const o=s==="fixed",c=Oa(n),h=e?cp(e.floating):!1;if(n===c||h&&o)return t;let m={scrollLeft:0,scrollTop:0},v=Na(1);const y=Na(0),w=Ia(n);if((w||!w&&!o)&&((Zl(n)!=="body"||qu(c))&&(m=up(n)),Ia(n))){const S=To(n);v=Il(n),y.x=S.x+n.clientLeft,y.y=S.y+n.clientTop}const E=c&&!w&&!o?NT(c,m):Na(0);return{width:t.width*v.x,height:t.height*v.y,x:t.x*v.x-m.scrollLeft*v.x+y.x+E.x,y:t.y*v.y-m.scrollTop*v.y+y.y+E.y}}function $3(r){return Array.from(r.getClientRects())}function Z3(r){const e=Oa(r),t=up(r),n=r.ownerDocument.body,s=go(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=go(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+hp(r);const h=-t.scrollTop;return vr(n).direction==="rtl"&&(c+=go(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:c,y:h}}const Zb=25;function J3(r,e){const t=er(r),n=Oa(r),s=t.visualViewport;let o=n.clientWidth,c=n.clientHeight,h=0,m=0;if(s){o=s.width,c=s.height;const y=yy();(!y||y&&e==="fixed")&&(h=s.offsetLeft,m=s.offsetTop)}const v=hp(n);if(v<=0){const y=n.ownerDocument,w=y.body,E=getComputedStyle(w),S=y.compatMode==="CSS1Compat"&&parseFloat(E.marginLeft)+parseFloat(E.marginRight)||0,k=Math.abs(n.clientWidth-w.clientWidth-S);k<=Zb&&(o-=k)}else v<=Zb&&(o+=v);return{width:o,height:c,x:h,y:m}}const eP=new Set(["absolute","fixed"]);function tP(r,e){const t=To(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,o=Ia(r)?Il(r):Na(1),c=r.clientWidth*o.x,h=r.clientHeight*o.y,m=s*o.x,v=n*o.y;return{width:c,height:h,x:m,y:v}}function Jb(r,e,t){let n;if(e==="viewport")n=J3(r,t);else if(e==="document")n=Z3(Oa(r));else if(Tn(e))n=tP(e,t);else{const s=AT(r);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Nf(n)}function RT(r,e){const t=Ts(r);return t===e||!Tn(t)||Hl(t)?!1:vr(t).position==="fixed"||RT(t,e)}function nP(r,e){const t=e.get(r);if(t)return t;let n=Au(r,[],!1).filter(h=>Tn(h)&&Zl(h)!=="body"),s=null;const o=vr(r).position==="fixed";let c=o?Ts(r):r;for(;Tn(c)&&!Hl(c);){const h=vr(c),m=vy(c);!m&&h.position==="fixed"&&(s=null),(o?!m&&!s:!m&&h.position==="static"&&!!s&&eP.has(s.position)||qu(c)&&!m&&RT(r,c))?n=n.filter(y=>y!==c):s=h,c=Ts(c)}return e.set(r,n),n}function rP(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const c=[...t==="clippingAncestors"?cp(e)?[]:nP(e,this._c):[].concat(t),n],h=c[0],m=c.reduce((v,y)=>{const w=Jb(e,y,s);return v.top=go(w.top,v.top),v.right=ql(w.right,v.right),v.bottom=ql(w.bottom,v.bottom),v.left=go(w.left,v.left),v},Jb(e,h,s));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function aP(r){const{width:e,height:t}=DT(r);return{width:e,height:t}}function iP(r,e,t){const n=Ia(e),s=Oa(e),o=t==="fixed",c=To(r,!0,o,e);let h={scrollLeft:0,scrollTop:0};const m=Na(0);function v(){m.x=hp(s)}if(n||!n&&!o)if((Zl(e)!=="body"||qu(s))&&(h=up(e)),n){const S=To(e,!0,o,e);m.x=S.x+e.clientLeft,m.y=S.y+e.clientTop}else s&&v();o&&!n&&s&&v();const y=s&&!n&&!o?NT(s,h):Na(0),w=c.left+h.scrollLeft-m.x-y.x,E=c.top+h.scrollTop-m.y-y.y;return{x:w,y:E,width:c.width,height:c.height}}function Ag(r){return vr(r).position==="static"}function eE(r,e){if(!Ia(r)||vr(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Oa(r)===t&&(t=t.ownerDocument.body),t}function kT(r,e){const t=er(r);if(cp(r))return t;if(!Ia(r)){let s=Ts(r);for(;s&&!Hl(s);){if(Tn(s)&&!Ag(s))return s;s=Ts(s)}return t}let n=eE(r,e);for(;n&&g3(n)&&Ag(n);)n=eE(n,e);return n&&Hl(n)&&Ag(n)&&!vy(n)?t:n||b3(r)||t}const sP=async function(r){const e=this.getOffsetParent||kT,t=this.getDimensions,n=await t(r.floating);return{reference:iP(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function oP(r){return vr(r).direction==="rtl"}const lP={convertOffsetParentRelativeRectToViewportRelativeRect:X3,getDocumentElement:Oa,getClippingRect:rP,getOffsetParent:kT,getElementRects:sP,getClientRects:$3,getDimensions:aP,getScale:Il,isElement:Tn,isRTL:oP};function IT(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function cP(r,e){let t=null,n;const s=Oa(r);function o(){var h;clearTimeout(n),(h=t)==null||h.disconnect(),t=null}function c(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),o();const v=r.getBoundingClientRect(),{left:y,top:w,width:E,height:S}=v;if(h||e(),!E||!S)return;const k=Dh(w),L=Dh(s.clientWidth-(y+E)),T=Dh(s.clientHeight-(w+S)),R=Dh(y),B={rootMargin:-k+"px "+-L+"px "+-T+"px "+-R+"px",threshold:go(0,ql(1,m))||1};let X=!0;function Q(ae){const O=ae[0].intersectionRatio;if(O!==m){if(!X)return c();O?c(!1,O):n=setTimeout(()=>{c(!1,1e-7)},1e3)}O===1&&!IT(v,r.getBoundingClientRect())&&c(),X=!1}try{t=new IntersectionObserver(Q,{...B,root:s.ownerDocument})}catch{t=new IntersectionObserver(Q,B)}t.observe(r)}return c(!0),o}function uP(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,v=by(r),y=s||o?[...v?Au(v):[],...Au(e)]:[];y.forEach(R=>{s&&R.addEventListener("scroll",t,{passive:!0}),o&&R.addEventListener("resize",t)});const w=v&&h?cP(v,t):null;let E=-1,S=null;c&&(S=new ResizeObserver(R=>{let[q]=R;q&&q.target===v&&S&&(S.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var B;(B=S)==null||B.observe(e)})),t()}),v&&!m&&S.observe(v),S.observe(e));let k,L=m?To(r):null;m&&T();function T(){const R=To(r);L&&!IT(L,R)&&t(),L=R,k=requestAnimationFrame(T)}return t(),()=>{var R;y.forEach(q=>{s&&q.removeEventListener("scroll",t),o&&q.removeEventListener("resize",t)}),w?.(),(R=S)==null||R.disconnect(),S=null,m&&cancelAnimationFrame(k)}}const dP=W3,hP=q3,tE=H3,fP=(r,e,t)=>{const n=new Map,s={platform:lP,...t},o={...s.platform,_c:n};return z3(r,e,{...s,platform:o})};var pP=typeof document<"u",mP=function(){},Wh=pP?z.useLayoutEffect:mP;function kf(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!kf(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const o=s[n];if(!(o==="_owner"&&r.$$typeof)&&!kf(r[o],e[o]))return!1}return!0}return r!==r&&e!==e}function MT(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function nE(r,e){const t=MT(r);return Math.round(e*t)/t}function Ng(r){const e=z.useRef(r);return Wh(()=>{e.current=r}),e}function gP(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:m,open:v}=r,[y,w]=z.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[E,S]=z.useState(n);kf(E,n)||S(n);const[k,L]=z.useState(null),[T,R]=z.useState(null),q=z.useCallback(Z=>{Z!==ae.current&&(ae.current=Z,L(Z))},[]),B=z.useCallback(Z=>{Z!==O.current&&(O.current=Z,R(Z))},[]),X=o||k,Q=c||T,ae=z.useRef(null),O=z.useRef(null),C=z.useRef(y),N=m!=null,M=Ng(m),j=Ng(s),P=Ng(v),I=z.useCallback(()=>{if(!ae.current||!O.current)return;const Z={placement:e,strategy:t,middleware:E};j.current&&(Z.platform=j.current),fP(ae.current,O.current,Z).then(ce=>{const ye={...ce,isPositioned:P.current!==!1};de.current&&!kf(C.current,ye)&&(C.current=ye,xC.flushSync(()=>{w(ye)}))})},[E,e,t,j,P]);Wh(()=>{v===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,w(Z=>({...Z,isPositioned:!1})))},[v]);const de=z.useRef(!1);Wh(()=>(de.current=!0,()=>{de.current=!1}),[]),Wh(()=>{if(X&&(ae.current=X),Q&&(O.current=Q),X&&Q){if(M.current)return M.current(X,Q,I);I()}},[X,Q,I,M,N]);const fe=z.useMemo(()=>({reference:ae,floating:O,setReference:q,setFloating:B}),[q,B]),U=z.useMemo(()=>({reference:X,floating:Q}),[X,Q]),$=z.useMemo(()=>{const Z={position:t,left:0,top:0};if(!U.floating)return Z;const ce=nE(U.floating,y.x),ye=nE(U.floating,y.y);return h?{...Z,transform:"translate("+ce+"px, "+ye+"px)",...MT(U.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:ye}},[t,h,U.floating,y.x,y.y]);return z.useMemo(()=>({...y,update:I,refs:fe,elements:U,floatingStyles:$}),[y,I,fe,U,$])}const vP=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?tE({element:n.current,padding:s}).fn(t):{}:n?tE({element:n,padding:s}).fn(t):{}}}},yP=(r,e)=>({...dP(r),options:[r,e]}),_P=(r,e)=>({...hP(r),options:[r,e]}),wP=(r,e)=>({...vP(r),options:[r,e]}),bP={...bE};let rE=!1,EP=0;const aE=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+EP++;function xP(){const[r,e]=z.useState(()=>rE?aE():void 0);return Rf(()=>{r==null&&e(aE())},[]),z.useEffect(()=>{rE=!0},[]),r}const TP=bP.useId,jT=TP||xP,SP=z.forwardRef(function(e,t){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:c}},width:h=14,height:m=7,tipRadius:v=0,strokeWidth:y=0,staticOffset:w,stroke:E,d:S,style:{transform:k,...L}={},...T}=e,R=jT(),[q,B]=z.useState(!1);if(Rf(()=>{if(!s)return;vr(s).direction==="rtl"&&B(!0)},[s]),!s)return null;const[X,Q]=n.split("-"),ae=X==="top"||X==="bottom";let O=w;(ae&&c!=null&&c.x||!ae&&c!=null&&c.y)&&(O=null);const C=y*2,N=C/2,M=h/2*(v/-8+1),j=m/2*v/4,P=!!S,I=O&&Q==="end"?"bottom":"top";let de=O&&Q==="end"?"right":"left";O&&q&&(de=Q==="end"?"left":"right");const fe=o?.x!=null?O||o.x:"",U=o?.y!=null?O||o.y:"",$=S||"M0,0"+(" H"+h)+(" L"+(h-M)+","+(m-j))+(" Q"+h/2+","+m+" "+M+","+(m-j))+" Z",Z={top:P?"rotate(180deg)":"",left:P?"rotate(90deg)":"rotate(-90deg)",bottom:P?"":"rotate(180deg)",right:P?"rotate(-90deg)":"rotate(90deg)"}[X];return d.jsxs("svg",{...T,"aria-hidden":!0,ref:t,width:P?h:h+C,height:h,viewBox:"0 0 "+h+" "+(m>h?m:h),style:{position:"absolute",pointerEvents:"none",[de]:fe,[I]:U,[X]:ae||P?"100%":"calc(100% - "+C/2+"px)",transform:[Z,k].filter(ce=>!!ce).join(" "),...L},children:[C>0&&d.jsx("path",{clipPath:"url(#"+R+")",fill:"none",stroke:E,strokeWidth:C+(S?0:1),d:$}),d.jsx("path",{stroke:C&&!S?T.fill:"none",d:$}),d.jsx("clipPath",{id:R,children:d.jsx("rect",{x:-N,y:N*(P?-1:1),width:h+C,height:h})})]})});function CP(){const r=new Map;return{emit(e,t){var n;(n=r.get(e))==null||n.forEach(s=>s(t))},on(e,t){r.has(e)||r.set(e,new Set),r.get(e).add(t)},off(e,t){var n;(n=r.get(e))==null||n.delete(t)}}}const DP=z.createContext(null),AP=z.createContext(null),NP=()=>{var r;return((r=z.useContext(DP))==null?void 0:r.id)||null},RP=()=>z.useContext(AP);function kP(r){const{open:e=!1,onOpenChange:t,elements:n}=r,s=jT(),o=z.useRef({}),[c]=z.useState(()=>CP()),h=NP()!=null,[m,v]=z.useState(n.reference),y=F3((S,k,L)=>{o.current.openEvent=S?k:void 0,c.emit("openchange",{open:S,event:k,reason:L,nested:h}),t?.(S,k,L)}),w=z.useMemo(()=>({setPositionReference:v}),[]),E=z.useMemo(()=>({reference:m||n.reference||null,floating:n.floating||null,domReference:n.reference}),[m,n.reference,n.floating]);return z.useMemo(()=>({dataRef:o,open:e,onOpenChange:y,elements:E,events:c,floatingId:s,refs:w}),[e,y,E,c,s,w])}function IP(r){r===void 0&&(r={});const{nodeId:e}=r,t=kP({...r,elements:{reference:null,floating:null,...r.elements}}),n=r.rootContext||t,s=n.elements,[o,c]=z.useState(null),[h,m]=z.useState(null),y=s?.domReference||o,w=z.useRef(null),E=RP();Rf(()=>{y&&(w.current=y)},[y]);const S=gP({...r,elements:{...s,...h&&{reference:h}}}),k=z.useCallback(B=>{const X=Tn(B)?{getBoundingClientRect:()=>B.getBoundingClientRect(),getClientRects:()=>B.getClientRects(),contextElement:B}:B;m(X),S.refs.setReference(X)},[S.refs]),L=z.useCallback(B=>{(Tn(B)||B===null)&&(w.current=B,c(B)),(Tn(S.refs.reference.current)||S.refs.reference.current===null||B!==null&&!Tn(B))&&S.refs.setReference(B)},[S.refs]),T=z.useMemo(()=>({...S.refs,setReference:L,setPositionReference:k,domReference:w}),[S.refs,L,k]),R=z.useMemo(()=>({...S.elements,domReference:y}),[S.elements,y]),q=z.useMemo(()=>({...S,...n,refs:T,elements:R,nodeId:e}),[S,T,R,e,n]);return Rf(()=>{n.dataRef.current.floatingContext=q;const B=E?.nodesRef.current.find(X=>X.id===e);B&&(B.context=q)}),z.useMemo(()=>({...S,context:q,refs:T,elements:R}),[S,T,R,q])}var hv=function(e,t){return hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},hv(e,t)};function hn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hv(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Pe=function(){return Pe=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Pe.apply(this,arguments)};function ba(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}var MP=function(r){var e=r.showTimeSelectOnly,t=e===void 0?!1:e,n=r.showTime,s=n===void 0?!1:n,o=r.className,c=r.children,h=r.inline,m=t?"Choose Time":"Choose Date".concat(s?" and Time":"");return te.createElement("div",{className:o,"aria-label":m,role:h?void 0:"dialog","aria-modal":h?void 0:"true"},c)},jP=function(r,e){var t=z.useRef(null),n=z.useRef(r);z.useEffect(function(){n.current=r},[r]);var s=z.useCallback(function(o){var c,h=o.composed&&o.composedPath&&o.composedPath().find(function(m){return m instanceof Node})||o.target;t.current&&!t.current.contains(h)&&(e&&h instanceof HTMLElement&&h.classList.contains(e)||(c=n.current)===null||c===void 0||c.call(n,o))},[e]);return z.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),t},fp=function(r){var e=r.children,t=r.onClickOutside,n=r.className,s=r.containerRef,o=r.style,c=r.ignoreClass,h=jP(t,c);return te.createElement("div",{className:n,style:o,ref:function(m){h.current=m,s&&(s.current=m)}},e)},he;(function(r){r.ArrowUp="ArrowUp",r.ArrowDown="ArrowDown",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.PageUp="PageUp",r.PageDown="PageDown",r.Home="Home",r.End="End",r.Enter="Enter",r.Space=" ",r.Tab="Tab",r.Escape="Escape",r.Backspace="Backspace",r.X="x"})(he||(he={}));function Ey(){var r=typeof window<"u"?window:globalThis;return r}var Gu=12;function Ke(r){if(r==null)return new Date;var e=typeof r=="string"?ZO(r):we(r);return Xn(e)?e:new Date}function wl(r,e,t,n,s){s===void 0&&(s=Ke());for(var o=Gl(t)||Gl(Ty()),c=Array.isArray(e)?e:[e],h=0,m=c;h<m.length;h++){var v=m[h],y=GO(r,v,s,{locale:o});if(Xn(y)&&(!n||r===pt(y,v,t)))return y}return null}function Xn(r,e){return Ef(r)&&!wa(r,new Date("1/1/1800"))}function pt(r,e,t){if(t==="en")return Yb(r,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=t?Gl(t):void 0;return t&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),n=n||Gl(Ty()),Yb(r,e,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Wn(r,e){var t=e.dateFormat,n=e.locale,s=Array.isArray(t)&&t.length>0?t[0]:t;return r&&pt(r,s,n)||""}var OT=" - ";function OP(r,e,t){if(!r&&!e)return"";var n=r?Wn(r,t):"",s=e?Wn(e,t):"",o=t.rangeSeparator||OT;return"".concat(n).concat(o).concat(s)}function PP(r,e){if(!r?.length)return"";var t=r[0]?Wn(r[0],e):"";if(r.length===1)return t;if(r.length===2&&r[1]){var n=Wn(r[1],e);return"".concat(t,", ").concat(n)}var s=r.length-1;return"".concat(t," (+").concat(s,")")}function Ah(r,e){var t=e.hour,n=t===void 0?0:t,s=e.minute,o=s===void 0?0:s,c=e.second,h=c===void 0?0:c;return qh(Yh(Gh(r,h),o),n)}function LP(r){return fy(r)}function VP(r,e){return pt(r,"ddd",e)}function cu(r){return xo(r)}function ps(r,e,t){var n=Gl(e||Ty());return vi(r,{locale:n,weekStartsOn:t})}function ui(r){return hT(r)}function uu(r){return op(r)}function iE(r){return ov(r)}function sE(){return xo(Ke())}function oE(r){return uT(r)}function UP(r){return J4(r)}function FP(r){return dT(r)}function ma(r,e){return r&&e?XO(r,e):!r&&!e}function xn(r,e){return r&&e?QO(r,e):!r&&!e}function If(r,e){return r&&e?KO(r,e):!r&&!e}function Fe(r,e){return r&&e?$4(r,e):!r&&!e}function ho(r,e){return r&&e?$j(r,e):!r&&!e}function lo(r,e,t){var n,s=xo(e),o=uT(t);try{n=Du(r,{start:s,end:o})}catch{n=!1}return n}function xy(r,e){var t=Ey();t.__localeData__||(t.__localeData__={}),t.__localeData__[r]=e}function Ty(){var r=Ey();return r.__localeId__}function Gl(r){if(typeof r=="string"){var e=Ey();return e.__localeData__?e.__localeData__[r]:void 0}else return r}function zP(r,e,t){return e(pt(r,"EEEE",t))}function BP(r,e){return pt(r,"EEEEEE",e)}function HP(r,e){return pt(r,"EEE",e)}function Sy(r,e){return pt(Qn(Ke(),r),"LLLL",e)}function PT(r,e){return pt(Qn(Ke(),r),"LLL",e)}function qP(r,e){return pt(Sl(Ke(),r),"QQQ",e)}function mr(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.maxDate,o=t.excludeDates,c=t.excludeDateIntervals,h=t.includeDates,m=t.includeDateIntervals,v=t.filterDate,y=t.disabled;return y?!0:Wu(r,{minDate:n,maxDate:s})||o&&o.some(function(w){return w instanceof Date?Fe(r,w):Fe(r,w.date)})||c&&c.some(function(w){var E=w.start,S=w.end;return Du(r,{start:E,end:S})})||h&&!h.some(function(w){return Fe(r,w)})||m&&!m.some(function(w){var E=w.start,S=w.end;return Du(r,{start:E,end:S})})||v&&!v(Ke(r))||!1}function Cy(r,e){var t=e===void 0?{}:e,n=t.excludeDates,s=t.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var c=o.start,h=o.end;return Du(r,{start:c,end:h})}):n&&n.some(function(o){var c;return o instanceof Date?Fe(r,o):Fe(r,(c=o.date)!==null&&c!==void 0?c:new Date)})||!1}function LT(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.maxDate,o=t.excludeDates,c=t.includeDates,h=t.filterDate;return Wu(r,{minDate:n?hT(n):void 0,maxDate:s?dT(s):void 0})||o?.some(function(m){return xn(r,m instanceof Date?m:m.date)})||c&&!c.some(function(m){return xn(r,m)})||h&&!h(Ke(r))||!1}function Nh(r,e,t,n){var s=Le(r),o=Pn(r),c=Le(e),h=Pn(e),m=Le(n);return s===c&&s===m?o<=t&&t<=h:s<c?m===s&&o<=t||m===c&&h>=t||m<c&&m>s:!1}function YP(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.maxDate,o=t.excludeDates,c=t.includeDates;return Wu(r,{minDate:n,maxDate:s})||o&&o.some(function(h){return xn(h instanceof Date?h:h.date,r)})||c&&!c.some(function(h){return xn(h,r)})||!1}function Rh(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.maxDate,o=t.excludeDates,c=t.includeDates,h=t.filterDate,m=t.disabled;return m?!0:Wu(r,{minDate:n,maxDate:s})||o?.some(function(v){return If(r,v instanceof Date?v:v.date)})||c&&!c.some(function(v){return If(r,v)})||h&&!h(Ke(r))||!1}function kh(r,e,t){if(!e||!t||!Ef(e)||!Ef(t))return!1;var n=Le(e),s=Le(t);return n<=r&&s>=r}function Qh(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.maxDate,o=t.excludeDates,c=t.includeDates,h=t.filterDate,m=t.disabled;if(m)return!0;var v=new Date(r,0,1);return Wu(v,{minDate:n?op(n):void 0,maxDate:s?fT(s):void 0})||o?.some(function(y){return ma(v,y instanceof Date?y:y.date)})||c&&!c.some(function(y){return ma(v,y)})||h&&!h(Ke(v))||!1}function Ih(r,e,t,n){var s=Le(r),o=ls(r),c=Le(e),h=ls(e),m=Le(n);return s===c&&s===m?o<=t&&t<=h:s<c?m===s&&o<=t||m===c&&h>=t||m<c&&m>s:!1}function Wu(r,e){var t,n=e===void 0?{}:e,s=n.minDate,o=n.maxDate;return(t=s&&zl(r,s)<0||o&&zl(r,o)>0)!==null&&t!==void 0?t:!1}function lE(r,e){return e.some(function(t){return Pr(t)===Pr(r)&&Lr(t)===Lr(r)&&fs(t)===fs(r)})}function cE(r,e){var t=e===void 0?{}:e,n=t.excludeTimes,s=t.includeTimes,o=t.filterTime;return n&&lE(r,n)||s&&!lE(r,s)||o&&!o(r)||!1}function uE(r,e){var t=e.minTime,n=e.maxTime;if(!t||!n)throw new Error("Both minTime and maxTime props required");var s=Ke();s=qh(s,Pr(r)),s=Yh(s,Lr(r)),s=Gh(s,fs(r));var o=Ke();o=qh(o,Pr(t)),o=Yh(o,Lr(t)),o=Gh(o,fs(t));var c=Ke();c=qh(c,Pr(n)),c=Yh(c,Lr(n)),c=Gh(c,fs(n));var h;try{h=!Du(s,{start:o,end:c})}catch{h=!1}return h}function dE(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.includeDates,o=mo(r,1);return n&&xf(n,o)>0||s&&s.every(function(c){return xf(c,o)>0})||!1}function hE(r,e){var t=e===void 0?{}:e,n=t.maxDate,s=t.includeDates,o=Br(r,1);return n&&xf(o,n)>0||s&&s.every(function(c){return xf(o,c)>0})||!1}function GP(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.includeDates,o=op(r),c=xT(o);return n&&Tf(n,c)>0||s&&s.every(function(h){return Tf(h,c)>0})||!1}function WP(r,e){var t=e===void 0?{}:e,n=t.maxDate,s=t.includeDates,o=fT(r),c=hy(o,1);return n&&Tf(c,n)>0||s&&s.every(function(h){return Tf(c,h)>0})||!1}function fE(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.includeDates,o=Bl(r,1);return n&&Sf(n,o)>0||s&&s.every(function(c){return Sf(c,o)>0})||!1}function QP(r,e){var t=e===void 0?{}:e,n=t.minDate,s=t.yearItemNumber,o=s===void 0?Gu:s,c=uu(Bl(r,o)),h=ii(c,o).endPeriod,m=n&&Le(n);return m&&m>h||!1}function pE(r,e){var t=e===void 0?{}:e,n=t.maxDate,s=t.includeDates,o=li(r,1);return n&&Sf(o,n)>0||s&&s.every(function(c){return Sf(o,c)>0})||!1}function KP(r,e){var t=e===void 0?{}:e,n=t.maxDate,s=t.yearItemNumber,o=s===void 0?Gu:s,c=li(r,o),h=ii(c,o).startPeriod,m=n&&Le(n);return m&&m<h||!1}function VT(r){var e=r.minDate,t=r.includeDates;if(t&&e){var n=t.filter(function(s){return zl(s,e)>=0});return Ub(n)}else return t?Ub(t):e}function UT(r){var e=r.maxDate,t=r.includeDates;if(t&&e){var n=t.filter(function(s){return zl(s,e)<=0});return Vb(n)}else return t?Vb(t):e}function mE(r,e){var t;r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=r.length;s<o;s++){var c=r[s];if(ci(c)){var h=pt(c,"MM.dd.yyyy"),m=n.get(h)||[];m.includes(e)||(m.push(e),n.set(h,m))}else if(typeof c=="object"){var v=Object.keys(c),y=(t=v[0])!==null&&t!==void 0?t:"",w=c[y];if(typeof y=="string"&&Array.isArray(w))for(var E=0,S=w.length;E<S;E++){var k=w[E];if(k){var h=pt(k,"MM.dd.yyyy"),m=n.get(h)||[];m.includes(y)||(m.push(y),n.set(h,m))}}}}return n}function XP(r,e){return r.length!==e.length?!1:r.every(function(t,n){return t===e[n]})}function $P(r,e){r===void 0&&(r=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return r.forEach(function(n){var s=n.date,o=n.holidayName;if(ci(s)){var c=pt(s,"MM.dd.yyyy"),h=t.get(c)||{className:"",holidayNames:[]};if(!("className"in h&&h.className===e&&XP(h.holidayNames,[o]))){h.className=e;var m=h.holidayNames;h.holidayNames=m?ba(ba([],m,!0),[o],!1):[o],t.set(c,h)}}}),t}function ZP(r,e,t,n,s){for(var o=s.length,c=[],h=0;h<o;h++){var m=r,v=s[h];v&&(m=W4(m,Pr(v)),m=Cu(m,Lr(v)),m=X4(m,fs(v)));var y=Cu(r,(t+1)*n);xs(m,e)&&wa(m,y)&&v!=null&&c.push(v)}return c}function gE(r){return r<10?"0".concat(r):"".concat(r)}function ii(r,e){e===void 0&&(e=Gu);var t=Math.ceil(Le(r)/e)*e,n=t-(e-1);return{startPeriod:n,endPeriod:t}}function JP(r){var e=new Date(r.getFullYear(),r.getMonth(),r.getDate()),t=new Date(r.getFullYear(),r.getMonth(),r.getDate(),24);return Math.round((+t-+e)/36e5)}function vE(r){var e=r.getSeconds(),t=r.getMilliseconds();return we(r.getTime()-e*1e3-t)}function FT(r,e){return vE(r).getTime()===vE(e).getTime()}function yE(r){if(!ci(r))throw new Error("Invalid date");var e=new Date(r);return e.setHours(0,0,0,0),e}function Rg(r,e){if(!ci(r)||!ci(e))throw new Error("Invalid date received");var t=yE(r),n=yE(e);return wa(t,n)}function zT(r){return r.key===he.Space}var eL=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.inputRef=te.createRef(),n.onTimeChange=function(s){var o,c;n.setState({time:s});var h=n.props.date,m=h instanceof Date&&!isNaN(+h),v=m?h:new Date;if(s?.includes(":")){var y=s.split(":"),w=y[0],E=y[1];v.setHours(Number(w)),v.setMinutes(Number(E))}(c=(o=n.props).onChange)===null||c===void 0||c.call(o,v)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,c=o.date,h=o.timeString,m=o.customTimeInput;return m?z.cloneElement(m,{date:c,value:s,onChange:n.onTimeChange}):te.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var v;(v=n.inputRef.current)===null||v===void 0||v.focus()},required:!0,value:s,onChange:function(v){n.onTimeChange(v.target.value||h)}})},n.state={time:n.props.timeString},n}return e.getDerivedStateFromProps=function(t,n){return t.timeString!==n.time?{time:t.timeString}:null},e.prototype.render=function(){return te.createElement("div",{className:"react-datepicker__input-time-container"},te.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),te.createElement("div",{className:"react-datepicker-time__input-container"},te.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(z.Component),tL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.dayEl=z.createRef(),t.handleClick=function(n){!t.isDisabled()&&t.props.onClick&&t.props.onClick(n)},t.handleMouseEnter=function(n){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(n)},t.handleOnKeyDown=function(n){var s,o,c=n.key;c===he.Space&&(n.preventDefault(),n.key=he.Enter),(o=(s=t.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},t.isSameDay=function(n){return Fe(t.props.day,n)},t.isKeyboardSelected=function(){var n;if(t.props.disabledKeyboardNavigation)return!1;var s=t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(c){return t.isSameDayOrWeek(c)}):t.isSameDayOrWeek(t.props.selected),o=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!s&&t.isSameDayOrWeek(t.props.preSelection)&&!o},t.isDisabled=function(n){return n===void 0&&(n=t.props.day),mr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(){return Cy(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return Fe(t.props.day,ps(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(n){return t.props.showWeekPicker&&Fe(n,ps(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(n){return t.isSameDay(n)||t.isSameWeek(n)},t.getHighLightedClass=function(){var n=t.props,s=n.day,o=n.highlightDates;if(!o)return!1;var c=pt(s,"MM.dd.yyyy");return o.get(c)},t.getHolidaysClass=function(){var n,s=t.props,o=s.day,c=s.holidays;if(!c)return[void 0];var h=pt(o,"MM.dd.yyyy");return c.has(h)?[(n=c.get(h))===null||n===void 0?void 0:n.className]:[void 0]},t.isInRange=function(){var n=t.props,s=n.day,o=n.startDate,c=n.endDate;return!o||!c?!1:lo(s,o,c)},t.isInSelectingRange=function(){var n,s=t.props,o=s.day,c=s.selectsStart,h=s.selectsEnd,m=s.selectsRange,v=s.selectsDisabledDaysInRange,y=s.startDate,w=s.swapRange,E=s.endDate,S=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;if(!(c||h||m)||!S||!v&&t.isDisabled())return!1;if(c&&E&&(wa(S,E)||ho(S,E)))return lo(o,S,E);if(h&&y&&(xs(S,y)||ho(S,y)))return lo(o,y,S);if(m&&y&&!E){if(ho(S,y)||xs(S,y))return lo(o,y,S);if(w&&wa(S,y))return lo(o,S,y)}return!1},t.isSelectingRangeStart=function(){var n;if(!t.isInSelectingRange())return!1;var s=t.props,o=s.day,c=s.startDate,h=s.selectsStart,m=s.swapRange,v=s.selectsRange,y=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return h?Fe(o,y):v&&m&&c&&y?Fe(o,wa(y,c)?y:c):Fe(o,c)},t.isSelectingRangeEnd=function(){var n;if(!t.isInSelectingRange())return!1;var s=t.props,o=s.day,c=s.endDate,h=s.selectsEnd,m=s.selectsRange,v=s.swapRange,y=s.startDate,w=(n=t.props.selectingDate)!==null&&n!==void 0?n:t.props.preSelection;return h?Fe(o,w):m&&v&&y&&w?Fe(o,wa(w,y)?y:w):m?Fe(o,w):Fe(o,c)},t.isRangeStart=function(){var n=t.props,s=n.day,o=n.startDate,c=n.endDate;return!o||!c?!1:Fe(o,s)},t.isRangeEnd=function(){var n=t.props,s=n.day,o=n.startDate,c=n.endDate;return!o||!c?!1:Fe(c,s)},t.isWeekend=function(){var n=Wj(t.props.day);return n===0||n===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===Pn(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(Pn(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Ke())},t.isSelected=function(){var n;return t.props.selectsMultiple?(n=t.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return t.isSameDayOrWeek(s)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(n){var s=t.props.dayClassName?t.props.dayClassName(n):void 0;return un("react-datepicker__day",s,"react-datepicker__day--"+VP(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var n=t.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,c=o===void 0?"Choose":o,h=n.ariaLabelPrefixWhenDisabled,m=h===void 0?"Not available":h,v=t.isDisabled()||t.isExcluded()?m:c;return"".concat(v," ").concat(pt(s,"PPPP",t.props.locale))},t.getTitle=function(){var n=t.props,s=n.day,o=n.holidays,c=o===void 0?new Map:o,h=n.excludeDates,m=pt(s,"MM.dd.yyyy"),v=[];return c.has(m)&&v.push.apply(v,c.get(m).holidayNames),t.isExcluded()&&v.push(h?.filter(function(y){return y instanceof Date?Fe(y,s):Fe(y?.date,s)}).map(function(y){if(!(y instanceof Date))return y?.message})),v.join(", ")},t.getTabIndex=function(){var n=t.props.selected,s=t.props.preSelection,o=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(n)&&Fe(s,n))?0:-1;return o},t.handleFocusDay=function(){var n;t.shouldFocusDay()&&((n=t.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(Gb(t.props.day),t.props.day):Gb(t.props.day)},t.render=function(){return te.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&te.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,n,s;return((n=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(z.Component),nL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.weekNumberEl=z.createRef(),t.handleClick=function(n){t.props.onClick&&t.props.onClick(n)},t.handleOnKeyDown=function(n){var s,o,c=n.key;c===he.Space&&(n.preventDefault(),n.key=he.Enter),(o=(s=t.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Fe(t.props.date,t.props.selected)&&Fe(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||Fe(t.props.date,t.props.selected)&&Fe(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(n){var s=!1;t.getTabIndex()===0&&!n?.isInputFocused&&Fe(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(s=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,n=t.weekNumber,s=t.isWeekDisabled,o=t.ariaLabelPrefix,c=o===void 0?e.defaultProps.ariaLabelPrefix:o,h=t.onClick,m={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!h&&!s,"react-datepicker__week-number--selected":!!h&&Fe(this.props.date,this.props.selected)};return te.createElement("div",{ref:this.weekNumberEl,className:un(m),"aria-label":"".concat(c," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},e})(z.Component),rL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isDisabled=function(n){return mr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(n,s){t.props.onDayClick&&t.props.onDayClick(n,s)},t.handleDayMouseEnter=function(n){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(n)},t.handleWeekClick=function(n,s,o){for(var c,h,m,v=new Date(n),y=0;y<7;y++){var w=new Date(n);w.setDate(w.getDate()+y);var E=!t.isDisabled(w);if(E){v=w;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(v,s,o),t.props.showWeekPicker&&t.handleDayClick(v,o),((c=t.props.shouldCloseOnSelect)!==null&&c!==void 0?c:e.defaultProps.shouldCloseOnSelect)&&((m=(h=t.props).setOpen)===null||m===void 0||m.call(h,!1))},t.formatWeekNumber=function(n){return t.props.formatWeekNumber?t.props.formatWeekNumber(n):LP(n)},t.isWeekDisabled=function(){for(var n=t.startOfWeek(),s=Ur(n,6),o=new Date(n);o<=s;){if(!t.isDisabled(o))return!1;o=Ur(o,1)}return!0},t.renderDays=function(){var n=t.startOfWeek(),s=[],o=t.formatWeekNumber(n);if(t.props.showWeekNumber){var c=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,n,o):void 0;s.push(te.createElement(nL,Pe({key:"W"},e.defaultProps,t.props,{weekNumber:o,isWeekDisabled:t.isWeekDisabled(),date:n,onClick:c})))}return s.concat([0,1,2,3,4,5,6].map(function(h){var m=Ur(n,h);return te.createElement(tL,Pe({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:m.valueOf(),day:m,onClick:t.handleDayClick.bind(t,m),onMouseEnter:t.handleDayMouseEnter.bind(t,m)}))}))},t.startOfWeek=function(){return ps(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!Fe(t.startOfWeek(),t.props.selected)&&Fe(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":Fe(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return te.createElement("div",{className:un(t,n),role:"row"},this.renderDays())},e})(z.Component),nu,aL=6,Ml={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},kg=(nu={},nu[Ml.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},nu[Ml.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},nu[Ml.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},nu),Mh=1;function _E(r,e){return r?Ml.FOUR_COLUMNS:e?Ml.TWO_COLUMNS:Ml.THREE_COLUMNS}var iL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.MONTH_REFS=ba([],Array(12),!0).map(function(){return z.createRef()}),t.QUARTER_REFS=ba([],Array(4),!0).map(function(){return z.createRef()}),t.isDisabled=function(n){return mr(n,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate,disabled:t.props.disabled})},t.isExcluded=function(n){return Cy(n,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(n,s){var o,c;(c=(o=t.props).onDayClick)===null||c===void 0||c.call(o,n,s,t.props.orderInDisplay)},t.handleDayMouseEnter=function(n){var s,o;(o=(s=t.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},t.handleMouseLeave=function(){var n,s;(s=(n=t.props).onMouseLeave)===null||s===void 0||s.call(n)},t.isRangeStartMonth=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate;return!c||!h?!1:xn(Qn(o,n),c)},t.isRangeStartQuarter=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate;return!c||!h?!1:If(Sl(o,n),c)},t.isRangeEndMonth=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate;return!c||!h?!1:xn(Qn(o,n),h)},t.isRangeEndQuarter=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate;return!c||!h?!1:If(Sl(o,n),h)},t.isInSelectingRangeMonth=function(n){var s,o=t.props,c=o.day,h=o.selectsStart,m=o.selectsEnd,v=o.selectsRange,y=o.startDate,w=o.endDate,E=(s=t.props.selectingDate)!==null&&s!==void 0?s:t.props.preSelection;return!(h||m||v)||!E?!1:h&&w?Nh(E,w,n,c):m&&y||v&&y&&!w?Nh(y,E,n,c):!1},t.isSelectingMonthRangeStart=function(n){var s;if(!t.isInSelectingRangeMonth(n))return!1;var o=t.props,c=o.day,h=o.startDate,m=o.selectsStart,v=Qn(c,n),y=(s=t.props.selectingDate)!==null&&s!==void 0?s:t.props.preSelection;return m?xn(v,y):xn(v,h)},t.isSelectingMonthRangeEnd=function(n){var s;if(!t.isInSelectingRangeMonth(n))return!1;var o=t.props,c=o.day,h=o.endDate,m=o.selectsEnd,v=o.selectsRange,y=Qn(c,n),w=(s=t.props.selectingDate)!==null&&s!==void 0?s:t.props.preSelection;return m||v?xn(y,w):xn(y,h)},t.isInSelectingRangeQuarter=function(n){var s,o=t.props,c=o.day,h=o.selectsStart,m=o.selectsEnd,v=o.selectsRange,y=o.startDate,w=o.endDate,E=(s=t.props.selectingDate)!==null&&s!==void 0?s:t.props.preSelection;return!(h||m||v)||!E?!1:h&&w?Ih(E,w,n,c):m&&y||v&&y&&!w?Ih(y,E,n,c):!1},t.isWeekInMonth=function(n){var s=t.props.day,o=Ur(n,6);return xn(n,s)||xn(o,s)},t.isCurrentMonth=function(n,s){return Le(n)===Le(Ke())&&s===Pn(Ke())},t.isCurrentQuarter=function(n,s){return Le(n)===Le(Ke())&&s===ls(Ke())},t.isSelectedMonth=function(n,s,o){return Pn(o)===s&&Le(n)===Le(o)},t.isSelectMonthInList=function(n,s,o){return o.some(function(c){return t.isSelectedMonth(n,s,c)})},t.isSelectedQuarter=function(n,s,o){return ls(o)===s&&Le(n)===Le(o)},t.isSelectQuarterInList=function(n,s,o){return o.some(function(c){return t.isSelectedQuarter(n,s,c)})},t.isMonthSelected=function(){var n=t.props,s=n.day,o=n.selected,c=n.selectedDates,h=n.selectsMultiple,m=Pn(s);return h?c?.some(function(v){return t.isSelectedMonth(s,m,v)}):!!o&&t.isSelectedMonth(s,m,o)},t.isQuarterSelected=function(){var n=t.props,s=n.day,o=n.selected,c=n.selectedDates,h=n.selectsMultiple,m=ls(s);return h?c?.some(function(v){return t.isSelectedQuarter(s,m,v)}):!!o&&t.isSelectedQuarter(s,m,o)},t.renderWeeks=function(){if(!Xn(t.props.day))return[];for(var n=[],s=t.props.fixedHeight,o=0,c=!1,h=ps(ui(t.props.day),t.props.locale,t.props.calendarStartDay),m=function(k){return t.props.showWeekPicker?ps(k,t.props.locale,t.props.calendarStartDay):t.props.preSelection},v=function(k){return t.props.showWeekPicker?ps(k,t.props.locale,t.props.calendarStartDay):t.props.selected},y=t.props.selected?v(t.props.selected):void 0,w=t.props.preSelection?m(t.props.preSelection):void 0;n.push(te.createElement(rL,Pe({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:o,day:h,month:Pn(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:y,preSelection:w,showWeekNumber:t.props.showWeekNumbers}))),!c;){o++,h=bf(h,1);var E=s&&o>=aL,S=!s&&!t.isWeekInMonth(h);if(E||S)if(t.props.peekNextMonth)c=!0;else break}return n},t.onMonthClick=function(n,s){var o=t.isMonthDisabledForLabelDate(s),c=o.isDisabled,h=o.labelDate;c||t.handleDayClick(ui(h),n)},t.onMonthMouseEnter=function(n){var s=t.isMonthDisabledForLabelDate(n),o=s.isDisabled,c=s.labelDate;o||t.handleDayMouseEnter(ui(c))},t.handleMonthNavigation=function(n,s){var o,c,h,m;(c=(o=t.props).setPreSelection)===null||c===void 0||c.call(o,s),(m=(h=t.MONTH_REFS[n])===null||h===void 0?void 0:h.current)===null||m===void 0||m.focus()},t.handleKeyboardNavigation=function(n,s,o){var c,h=t.props,m=h.selected,v=h.preSelection,y=h.setPreSelection,w=h.minDate,E=h.maxDate,S=h.showFourColumnMonthYearPicker,k=h.showTwoColumnMonthYearPicker;if(v){var L=_E(S,k),T=t.getVerticalOffset(L),R=(c=kg[L])===null||c===void 0?void 0:c.grid,q=function(O,C,N){var M,j,P=C,I=N;switch(O){case he.ArrowRight:P=Br(C,Mh),I=N===11?0:N+Mh;break;case he.ArrowLeft:P=mo(C,Mh),I=N===0?11:N-Mh;break;case he.ArrowUp:P=mo(C,T),I=!((M=R?.[0])===null||M===void 0)&&M.includes(N)?N+12-T:N-T;break;case he.ArrowDown:P=Br(C,T),I=!((j=R?.[R.length-1])===null||j===void 0)&&j.includes(N)?N-12+T:N+T;break}return{newCalculatedDate:P,newCalculatedMonth:I}},B=function(O,C,N){for(var M=40,j=O,P=!1,I=0,de=q(j,C,N),fe=de.newCalculatedDate,U=de.newCalculatedMonth;!P;){if(I>=M){fe=C,U=N;break}if(w&&fe<w){j=he.ArrowRight;var $=q(j,fe,U);fe=$.newCalculatedDate,U=$.newCalculatedMonth}if(E&&fe>E){j=he.ArrowLeft;var $=q(j,fe,U);fe=$.newCalculatedDate,U=$.newCalculatedMonth}if(YP(fe,t.props)){var $=q(j,fe,U);fe=$.newCalculatedDate,U=$.newCalculatedMonth}else P=!0;I++}return{newCalculatedDate:fe,newCalculatedMonth:U}};if(s===he.Enter){t.isMonthDisabled(o)||(t.onMonthClick(n,o),y?.(m));return}var X=B(s,v,o),Q=X.newCalculatedDate,ae=X.newCalculatedMonth;switch(s){case he.ArrowRight:case he.ArrowLeft:case he.ArrowUp:case he.ArrowDown:t.handleMonthNavigation(ae,Q);break}}},t.getVerticalOffset=function(n){var s,o;return(o=(s=kg[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},t.onMonthKeyDown=function(n,s){var o=t.props,c=o.disabledKeyboardNavigation,h=o.handleOnMonthKeyDown,m=n.key;m!==he.Tab&&n.preventDefault(),c||t.handleKeyboardNavigation(n,m,s),h&&h(n)},t.onQuarterClick=function(n,s){var o=Sl(t.props.day,s);Rh(o,t.props)||t.handleDayClick(iE(o),n)},t.onQuarterMouseEnter=function(n){var s=Sl(t.props.day,n);Rh(s,t.props)||t.handleDayMouseEnter(iE(s))},t.handleQuarterNavigation=function(n,s){var o,c,h,m;t.isDisabled(s)||t.isExcluded(s)||((c=(o=t.props).setPreSelection)===null||c===void 0||c.call(o,s),(m=(h=t.QUARTER_REFS[n-1])===null||h===void 0?void 0:h.current)===null||m===void 0||m.focus())},t.onQuarterKeyDown=function(n,s){var o,c,h=n.key;if(!t.props.disabledKeyboardNavigation)switch(h){case he.Enter:t.onQuarterClick(n,s),(c=(o=t.props).setPreSelection)===null||c===void 0||c.call(o,t.props.selected);break;case he.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(s===4?1:s+1,hy(t.props.preSelection,1));break;case he.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(s===1?4:s-1,xT(t.props.preSelection));break}},t.isMonthDisabledForLabelDate=function(n){var s,o=t.props,c=o.day,h=o.disabled,m=o.minDate,v=o.maxDate,y=o.excludeDates,w=o.includeDates,E=Qn(c,n);return h?{isDisabled:!0,labelDate:Qn(c,n)}:{isDisabled:(s=(m||v||y||w)&&LT(E,t.props))!==null&&s!==void 0?s:!1,labelDate:E}},t.isMonthDisabled=function(n){var s=t.isMonthDisabledForLabelDate(n).isDisabled;return s},t.getMonthClassNames=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate,m=s.preSelection,v=s.monthClassName,y=v?v(Qn(o,n)):void 0,w=t.getSelection();return un("react-datepicker__month-text","react-datepicker__month-".concat(n),y,{"react-datepicker__month-text--disabled":t.isMonthDisabled(n),"react-datepicker__month-text--selected":w?t.isSelectMonthInList(o,n,w):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&m&&t.isSelectedMonth(o,n,m)&&!t.isMonthSelected()&&!t.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":c&&h?Nh(c,h,n,o):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(n),"react-datepicker__month-text--range-end":t.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":t.isCurrentMonth(o,n)})},t.getTabIndex=function(n){if(t.props.preSelection==null)return"-1";var s=Pn(t.props.preSelection),o=t.isMonthDisabledForLabelDate(s).isDisabled,c=n===s&&!(o||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getQuarterTabIndex=function(n){if(t.props.preSelection==null)return"-1";var s=ls(t.props.preSelection),o=Rh(t.props.day,t.props),c=n===s&&!(o||t.props.disabledKeyboardNavigation)?"0":"-1";return c},t.getAriaLabel=function(n){var s=t.props,o=s.chooseDayAriaLabelPrefix,c=o===void 0?"Choose":o,h=s.disabledDayAriaLabelPrefix,m=h===void 0?"Not available":h,v=s.day,y=s.locale,w=Qn(v,n),E=t.isDisabled(w)||t.isExcluded(w)?m:c;return"".concat(E," ").concat(pt(w,"MMMM yyyy",y))},t.getQuarterClassNames=function(n){var s=t.props,o=s.day,c=s.startDate,h=s.endDate,m=s.minDate,v=s.maxDate,y=s.excludeDates,w=s.includeDates,E=s.filterDate,S=s.preSelection,k=s.disabledKeyboardNavigation,L=s.disabled,T=(m||v||y||w||E||L)&&Rh(Sl(o,n),t.props),R=t.getSelection();return un("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":T,"react-datepicker__quarter-text--selected":R?t.isSelectQuarterInList(o,n,R):void 0,"react-datepicker__quarter-text--keyboard-selected":!k&&S&&t.isSelectedQuarter(o,n,S)&&!t.isQuarterSelected()&&!T,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":c&&h?Ih(c,h,n,o):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":t.isCurrentQuarter(o,n)})},t.getMonthContent=function(n){var s=t.props,o=s.showFullMonthYearPicker,c=s.renderMonthContent,h=s.locale,m=s.day,v=PT(n,h),y=Sy(n,h);return c?c(n,v,y,m):o?y:v},t.getQuarterContent=function(n){var s,o=t.props,c=o.renderQuarterContent,h=o.locale,m=qP(n,h);return(s=c?.(n,m))!==null&&s!==void 0?s:m},t.renderMonths=function(){var n,s=t.props,o=s.showTwoColumnMonthYearPicker,c=s.showFourColumnMonthYearPicker,h=s.day,m=s.selected,v=(n=kg[_E(c,o)])===null||n===void 0?void 0:n.grid;return v?.map(function(y,w){return te.createElement("div",{className:"react-datepicker__month-wrapper",key:w},y.map(function(E,S){return te.createElement("div",{ref:t.MONTH_REFS[E],key:S,onClick:function(k){t.onMonthClick(k,E)},onKeyDown:function(k){zT(k)&&(k.preventDefault(),k.key=he.Enter),t.onMonthKeyDown(k,E)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(E)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(E)}:void 0,tabIndex:Number(t.getTabIndex(E)),className:t.getMonthClassNames(E),"aria-disabled":t.isMonthDisabled(E),role:"option","aria-label":t.getAriaLabel(E),"aria-current":t.isCurrentMonth(h,E)?"date":void 0,"aria-selected":m?t.isSelectedMonth(h,E,m):void 0},t.getMonthContent(E))}))})},t.renderQuarters=function(){var n=t.props,s=n.day,o=n.selected,c=[1,2,3,4];return te.createElement("div",{className:"react-datepicker__quarter-wrapper"},c.map(function(h,m){return te.createElement("div",{key:m,ref:t.QUARTER_REFS[m],role:"option",onClick:function(v){t.onQuarterClick(v,h)},onKeyDown:function(v){t.onQuarterKeyDown(v,h)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(h)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(h)}:void 0,className:t.getQuarterClassNames(h),"aria-selected":o?t.isSelectedQuarter(s,h,o):void 0,tabIndex:Number(t.getQuarterTabIndex(h)),"aria-current":t.isCurrentQuarter(s,h)?"date":void 0},t.getQuarterContent(h))}))},t.getClassNames=function(){var n=t.props,s=n.selectingDate,o=n.selectsStart,c=n.selectsEnd,h=n.showMonthYearPicker,m=n.showQuarterYearPicker,v=n.showWeekPicker;return un("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||c)},{"react-datepicker__monthPicker":h},{"react-datepicker__quarterPicker":m},{"react-datepicker__weekPicker":v})},t}return e.prototype.getSelection=function(){var t=this.props,n=t.selected,s=t.selectedDates,o=t.selectsMultiple;if(o)return s;if(n)return[n]},e.prototype.render=function(){var t=this.props,n=t.showMonthYearPicker,s=t.showQuarterYearPicker,o=t.day,c=t.ariaLabelPrefix,h=c===void 0?"Month ":c,m=h?h.trim()+" ":"",v=Xn(o)?"".concat(m).concat(pt(o,"MMMM, yyyy",this.props.locale)):"",y=n||s;return y?te.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":v,role:"listbox"},n?this.renderMonths():this.renderQuarters()):te.createElement("div",{role:"table"},this.props.dayNamesHeader&&te.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),te.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":v,role:"rowgroup"},this.renderWeeks()))},e})(z.Component),sL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(n){return t.props.month===n},t.handleOptionKeyDown=function(n,s){var o;switch(s.key){case"Enter":s.preventDefault(),t.onChange(n);break;case"Escape":s.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var c=(n+(s.key==="ArrowUp"?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;(o=t.monthOptionButtonsRef[c])===null||o===void 0||o.focus();break}}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(n,s){return te.createElement("div",{ref:function(o){t.monthOptionButtonsRef[s]=o,t.isSelectedMonth(s)&&o?.focus()},role:"button",tabIndex:0,className:t.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:t.onChange.bind(t,s),onKeyDown:t.handleOptionKeyDown.bind(t,s),"aria-selected":t.isSelectedMonth(s)?"true":void 0},t.isSelectedMonth(s)?te.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},t.onChange=function(n){return t.props.onChange(n)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return te.createElement(fp,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(z.Component),oL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(n){return n.map(function(s,o){return te.createElement("option",{key:s,value:o},s)})},t.renderSelectMode=function(n){return te.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(s){return t.onChange(parseInt(s.target.value))}},t.renderSelectOptions(n))},t.renderReadView=function(n,s){return te.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[t.props.month]))},t.renderDropdown=function(n){return te.createElement(sL,Pe({key:"dropdown"},t.props,{monthNames:n,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(n){var s=t.state.dropdownVisible,o=[t.renderReadView(!s,n)];return s&&o.unshift(t.renderDropdown(n)),o},t.onChange=function(n){t.toggleDropdown(),n!==t.props.month&&t.props.onChange(n)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return PT(o,t.props.locale)}:function(o){return Sy(o,t.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return te.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(z.Component);function lL(r,e){for(var t=[],n=ui(r),s=ui(e);!xs(n,s);)t.push(Ke(n)),n=Br(n,1);return t}var cL=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=cv(s),c=ma(n.props.date,s)&&xn(n.props.date,s);return te.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":c?"true":void 0},c?te.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",pt(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:lL(n.props.minDate,n.props.maxDate)},n}return e.prototype.render=function(){var t=un({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return te.createElement(fp,{className:t,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(z.Component),uL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=ui(t.props.minDate),s=ui(t.props.maxDate),o=[];!xs(n,s);){var c=cv(n);o.push(te.createElement("option",{key:c,value:c},pt(n,t.props.dateFormat,t.props.locale))),n=Br(n,1)}return o},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return te.createElement("select",{value:cv(ui(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){var s=pt(t.props.date,t.props.dateFormat,t.props.locale);return te.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},t.renderDropdown=function(){return te.createElement(cL,Pe({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,s=[t.renderReadView(!n)];return n&&s.unshift(t.renderDropdown()),s},t.onChange=function(n){t.toggleDropdown();var s=Ke(n);ma(t.props.date,s)&&xn(t.props.date,s)||t.props.onChange(s)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return te.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(z.Component),dL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;t.list&&(t.list.scrollTop=(o=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((s=(n=t.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):t.list.clientHeight,t.centerLi))!==null&&o!==void 0?o:0)})},t.handleClick=function(n){var s,o;(t.props.minTime||t.props.maxTime)&&uE(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&cE(n,t.props)||(o=(s=t.props).onChange)===null||o===void 0||o.call(s,n)},t.isSelectedTime=function(n){return t.props.selected&&FT(t.props.selected,n)},t.isDisabledTime=function(n){return(t.props.minTime||t.props.maxTime)&&uE(n,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&cE(n,t.props)},t.liClasses=function(n){var s,o=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(n):void 0];return t.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(Pr(n)*3600+Lr(n)*60+fs(n))%(((s=t.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},t.handleOnKeyDown=function(n,s){var o,c;n.key===he.Space&&(n.preventDefault(),n.key=he.Enter),(n.key===he.ArrowUp||n.key===he.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===he.ArrowDown||n.key===he.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===he.Enter&&t.handleClick(s),(c=(o=t.props).handleOnKeyDown)===null||c===void 0||c.call(o,n)},t.renderTimes=function(){for(var n,s=[],o=typeof t.props.format=="string"?t.props.format:"p",c=(n=t.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals,h=t.props.selected||t.props.openToDate||Ke(),m=cu(h),v=t.props.injectTimes&&t.props.injectTimes.sort(function(T,R){return T.getTime()-R.getTime()}),y=60*JP(h),w=y/c,E=0;E<w;E++){var S=Cu(m,E*c);if(s.push(S),v){var k=ZP(m,S,E,c,v);s=s.concat(k)}}var L=s.reduce(function(T,R){return R.getTime()<=h.getTime()?R:T},s[0]);return s.map(function(T){return te.createElement("li",{key:T.valueOf(),onClick:t.handleClick.bind(t,T),className:t.liClasses(T),ref:function(R){T===L&&(t.centerLi=R)},onKeyDown:function(R){t.handleOnKeyDown(R,T)},tabIndex:T===L?0:-1,role:"option","aria-selected":t.isSelectedTime(T)?"true":void 0,"aria-disabled":t.isDisabledTime(T)?"true":void 0},pt(T,o,t.props.locale))})},t.renderTimeCaption=function(){return t.props.showTimeCaption===!1?te.createElement(te.Fragment,null):te.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(t.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){t.header=n}},te.createElement("div",{className:"react-datepicker-time__header"},t.props.timeCaption))},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var t=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){t.updateContainerHeight()}),this.resizeObserver.observe(n))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var t=this,n,s=this.state.height;return te.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),te.createElement("div",{className:"react-datepicker__time"},te.createElement("div",{className:"react-datepicker__time-box"},te.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){t.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,n){return n.offsetTop-(t/2-n.clientHeight/2)},e})(z.Component),wE=3,hL=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.YEAR_REFS=ba([],Array(n.props.yearItemNumber),!0).map(function(){return z.createRef()}),n.isDisabled=function(s){return mr(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Cy(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var c,h;(h=(c=n.YEAR_REFS[s])===null||c===void 0?void 0:c.current)===null||h===void 0||h.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var c,h,m,v,y=n.props,w=y.date,E=y.yearItemNumber;if(!(w===void 0||E===void 0)){var S=ii(w,E).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((h=(c=n.props).setPreSelection)===null||h===void 0||h.call(c,o),s-S<0?n.updateFocusOnPaginate(E-(S-s)):s-S>=E?n.updateFocusOnPaginate(Math.abs(E-(s-S))):(v=(m=n.YEAR_REFS[s-S])===null||m===void 0?void 0:m.current)===null||v===void 0||v.focus())}},n.isSameDay=function(s,o){return Fe(s,o)},n.isCurrentYear=function(s){return s===Le(Ke())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&ma(pa(Ke(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&ma(pa(Ke(),s),n.props.endDate)},n.isInRange=function(s){return kh(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,c=o.selectsStart,h=o.selectsEnd,m=o.selectsRange,v=o.startDate,y=o.endDate;return!(c||h||m)||!n.selectingDate()?!1:c&&y?kh(s,n.selectingDate(),y):h&&v||m&&v&&!y?kh(s,v,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var c=n.props,h=c.startDate,m=c.selectsStart,v=pa(Ke(),s);return m?ma(v,(o=n.selectingDate())!==null&&o!==void 0?o:null):ma(v,h??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var c=n.props,h=c.endDate,m=c.selectsEnd,v=c.selectsRange,y=pa(Ke(),s);return m||v?ma(y,(o=n.selectingDate())!==null&&o!==void 0?o:null):ma(y,h??null)},n.isKeyboardSelected=function(s){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var o=n.props,c=o.minDate,h=o.maxDate,m=o.excludeDates,v=o.includeDates,y=o.filterDate,w=o.selected,E=uu(pa(n.props.date,s)),S=(c||h||m||v||y)&&Qh(s,n.props),k=!!w&&Fe(E,uu(w)),L=Fe(E,uu(n.props.preSelection));return!n.props.inline&&!k&&L&&!S}},n.isSelectedYear=function(s){var o=n.props,c=o.selectsMultiple,h=o.selected,m=o.selectedDates;return c?m?.some(function(v){return s===Le(v)}):!!h&&s===Le(h)},n.onYearClick=function(s,o){var c=n.props.date;c!==void 0&&n.handleYearClick(uu(pa(c,o)),s)},n.onYearKeyDown=function(s,o){var c,h,m=s.key,v=n.props,y=v.date,w=v.yearItemNumber,E=v.handleOnKeyDown;if(m!==he.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(m){case he.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(h=(c=n.props).setPreSelection)===null||h===void 0||h.call(c,n.props.selected);break;case he.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,li(n.props.preSelection,1));break;case he.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,Bl(n.props.preSelection,1));break;case he.ArrowUp:{if(y===void 0||w===void 0||n.props.preSelection==null)break;var S=ii(y,w).startPeriod,k=wE,L=o-k;if(L<S){var T=w%k;o>=S&&o<S+T?k=T:k+=T,L=o-k}n.handleYearNavigation(L,Bl(n.props.preSelection,k));break}case he.ArrowDown:{if(y===void 0||w===void 0||n.props.preSelection==null)break;var R=ii(y,w).endPeriod,k=wE,L=o+k;if(L>R){var T=w%k;o<=R&&o>R-T?k=T:k+=T,L=o+k}n.handleYearNavigation(L,li(n.props.preSelection,k));break}}E&&E(s)},n.getYearClassNames=function(s){var o=n.props,c=o.date,h=o.disabled,m=o.minDate,v=o.maxDate,y=o.excludeDates,w=o.includeDates,E=o.filterDate,S=o.yearClassName;return un("react-datepicker__year-text","react-datepicker__year-".concat(s),c?S?.(pa(c,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(m||v||y||w||E||h)&&Qh(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=Le(n.props.preSelection),c=Qh(s,n.props);return s===o&&!c?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return e.prototype.render=function(){var t=this,n=[],s=this.props,o=s.date,c=s.yearItemNumber,h=s.onYearMouseEnter,m=s.onYearMouseLeave;if(o===void 0)return null;for(var v=ii(o,c),y=v.startPeriod,w=v.endPeriod,E=function(L){n.push(te.createElement("div",{ref:S.YEAR_REFS[L-y],onClick:function(T){t.onYearClick(T,L)},onKeyDown:function(T){zT(T)&&(T.preventDefault(),T.key=he.Enter),t.onYearKeyDown(T,L)},tabIndex:Number(S.getYearTabIndex(L)),className:S.getYearClassNames(L),onMouseEnter:S.props.usePointerEvent?void 0:function(T){return h(T,L)},onPointerEnter:S.props.usePointerEvent?function(T){return h(T,L)}:void 0,onMouseLeave:S.props.usePointerEvent?void 0:function(T){return m(T,L)},onPointerLeave:S.props.usePointerEvent?function(T){return m(T,L)}:void 0,key:L,"aria-current":S.isCurrentYear(L)?"date":void 0},S.getYearContent(L)))},S=this,k=y;k<=w;k++)E(k);return te.createElement("div",{className:"react-datepicker__year"},te.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},e})(z.Component);function fL(r,e,t,n){for(var s=[],o=0;o<2*e+1;o++){var c=r+e-o,h=!0;t&&(h=Le(t)<=c),n&&h&&(h=Le(n)>=c),h&&s.push(c)}return s}var pL=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(h,m){var v;switch(m.key){case"Enter":m.preventDefault(),n.onChange(h);break;case"Escape":m.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{m.preventDefault();var y=h+(m.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[y]&&((v=n.yearOptionButtonsRef[y])===null||v===void 0||v.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var h=n.props.year,m=n.state.yearsList.map(function(w){return te.createElement("div",{ref:function(E){n.yearOptionButtonsRef[w]=E,w===h&&E?.focus()},role:"button",tabIndex:0,className:h===w?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:w,onClick:n.onChange.bind(n,w),onKeyDown:n.handleOptionKeyDown.bind(n,w),"aria-selected":h===w?"true":void 0},h===w?te.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",w)}),v=n.props.minDate?Le(n.props.minDate):null,y=n.props.maxDate?Le(n.props.maxDate):null;return(!y||!n.state.yearsList.find(function(w){return w===y}))&&m.unshift(te.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},te.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!v||!n.state.yearsList.find(function(w){return w===v}))&&m.push(te.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},te.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),m},n.onChange=function(h){n.props.onChange(h)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(h){var m=n.state.yearsList.map(function(v){return v+h});n.setState({yearsList:m})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=t.yearDropdownItemNumber,o=t.scrollableYearDropdown,c=s||(o?10:5);return n.state={yearsList:fL(n.props.year,c,n.props.minDate,n.props.maxDate)},n.dropdownRef=z.createRef(),n}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var n=t.children?Array.from(t.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;t.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=un({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return te.createElement(fp,{className:t,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(z.Component),mL=(function(r){hn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var n=t.props.minDate?Le(t.props.minDate):1900,s=t.props.maxDate?Le(t.props.maxDate):2100,o=[],c=n;c<=s;c++)o.push(te.createElement("option",{key:c,value:c},c));return o},t.onSelectChange=function(n){t.onChange(parseInt(n.target.value))},t.renderSelectMode=function(){return te.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(n){return te.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},te.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),te.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return te.createElement(pL,Pe({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var n=t.state.dropdownVisible,s=[t.renderReadView(!n)];return n&&s.unshift(t.renderDropdown()),s},t.onChange=function(n){t.toggleDropdown(),n!==t.props.year&&t.props.onChange(n)},t.toggleDropdown=function(n){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,n)})},t.handleYearChange=function(n,s){var o;(o=t.onSelect)===null||o===void 0||o.call(t,n,s),t.setOpen()},t.onSelect=function(n,s){var o,c;(c=(o=t.props).onSelect)===null||c===void 0||c.call(o,n,s)},t.setOpen=function(){var n,s;(s=(n=t.props).setOpen)===null||s===void 0||s.call(n,!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return te.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e})(z.Component),gL=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],BT="react-datepicker-ignore-onclickoutside",vL=function(r){var e=(r.className||"").split(/\s+/);return gL.some(function(t){return e.indexOf(t)>=0})},yL=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,c;vL(s.target)&&((c=(o=n.props).onDropdownFocus)===null||c===void 0||c.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,c=s.selected,h=s.openToDate,m=VT(n.props),v=UT(n.props),y=Ke(),w=h||c||o;return w||(m&&wa(y,m)?m:v&&xs(y,v)?v:y)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Br(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:mo(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,c){n.props.onSelect(s,o,c),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:pa(Ke(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,c,h,m;(c=(o=n.props).onYearChange)===null||c===void 0||c.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(m=(h=n.props).setOpen)===null||m===void 0||m.call(h,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!mr(s,n.props))return s;for(var o=ui(s),c=FP(s),h=Z4(c,o),m=null,v=0;v<=h;v++){var y=Ur(o,v);if(!mr(y,n.props)){m=y;break}}return m},n.handleMonthChange=function(s){var o,c,h,m=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(m),n.props.adjustDateOnChange&&(n.props.onSelect(m),(h=(c=n.props).setOpen)===null||h===void 0||h.call(c,!0)),n.props.setPreSelection&&n.props.setPreSelection(m)},n.handleCustomMonthChange=function(s){var o,c;(c=(o=n.props).onMonthChange)===null||c===void 0||c.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var c=o.date;return{date:pa(c,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var c=o.date;return{date:Qn(c,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var c=o.date;return{date:pa(Qn(c,Pn(s)),Le(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){if(s===void 0&&(s=n.state.date),!Xn(s))return[];var o=n.props.disabled,c=ps(s,n.props.locale,n.props.calendarStartDay),h=[];return n.props.showWeekNumbers&&h.push(te.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(o?"react-datepicker__day-name--disabled":""),role:"columnheader"},te.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),te.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),h.concat([0,1,2,3,4,5,6].map(function(m){var v=Ur(c,m),y=n.formatWeekday(v,n.props.locale),w=n.props.weekDayClassName?n.props.weekDayClassName(v):void 0;return te.createElement("div",{key:m,role:"columnheader",className:un("react-datepicker__day-name",w,o?"react-datepicker__day-name--disabled":"")},te.createElement("span",{className:"react-datepicker__sr-only"},pt(v,"EEEE",n.props.locale)),te.createElement("span",{"aria-hidden":"true"},y))}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?zP(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?HP(s,o):BP(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,c=s.date;return{date:Bl(c,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,c;if(!n.props.renderCustomHeader){var h=(s=n.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,m=n.props.showPreviousMonths?h-1:0,v=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:m,y=mo(n.state.date,v),w;switch(!0){case n.props.disabled:w=!0;break;case n.props.showMonthYearPicker:w=fE(n.state.date,n.props);break;case n.props.showYearPicker:w=QP(n.state.date,n.props);break;case n.props.showQuarterYearPicker:w=GP(n.state.date,n.props);break;default:w=dE(y,n.props);break}if(!(!((c=n.props.forceShowMonthNavigation)!==null&&c!==void 0?c:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&w||n.props.showTimeSelectOnly)){var E=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],S=["react-datepicker__navigation","react-datepicker__navigation--previous"],k=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(k=n.decreaseYear),w&&n.props.showDisabledMonthNavigation&&(S.push("react-datepicker__navigation--previous--disabled"),k=void 0);var L=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,T=n.props,R=T.previousMonthButtonLabel,q=R===void 0?e.defaultProps.previousMonthButtonLabel:R,B=T.previousYearButtonLabel,X=B===void 0?e.defaultProps.previousYearButtonLabel:B,Q=n.props,ae=Q.previousMonthAriaLabel,O=ae===void 0?typeof q=="string"?q:"Previous Month":ae,C=Q.previousYearAriaLabel,N=C===void 0?typeof X=="string"?X:"Previous Year":C;return te.createElement("button",{type:"button",className:S.join(" "),onClick:k,onKeyDown:n.props.handleOnKeyDown,"aria-label":L?N:O},te.createElement("span",{className:E.join(" ")},L?X:q))}}},n.increaseYear=function(){n.setState(function(s){var o,c=s.date;return{date:li(c,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:e.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.disabled:o=!0;break;case n.props.showMonthYearPicker:o=pE(n.state.date,n.props);break;case n.props.showYearPicker:o=KP(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=WP(n.state.date,n.props);break;default:o=hE(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var c=["react-datepicker__navigation","react-datepicker__navigation--next"],h=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&c.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&c.push("react-datepicker__navigation--next--with-today-button");var m=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(m=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(c.push("react-datepicker__navigation--next--disabled"),m=void 0);var v=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,y=n.props,w=y.nextMonthButtonLabel,E=w===void 0?e.defaultProps.nextMonthButtonLabel:w,S=y.nextYearButtonLabel,k=S===void 0?e.defaultProps.nextYearButtonLabel:S,L=n.props,T=L.nextMonthAriaLabel,R=T===void 0?typeof E=="string"?E:"Next Month":T,q=L.nextYearAriaLabel,B=q===void 0?typeof k=="string"?k:"Next Year":q;return te.createElement("button",{type:"button",className:c.join(" "),onClick:m,onKeyDown:n.props.handleOnKeyDown,"aria-label":v?B:R},te.createElement("span",{className:h.join(" ")},v?k:E))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),te.createElement("h2",{className:o.join(" ")},Xn(s)?pt(s,n.props.dateFormat,n.props.locale):"")},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return te.createElement(mL,Pe({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Le(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return te.createElement(oL,Pe({},e.defaultProps,n.props,{month:Pn(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return te.createElement(uL,Pe({},e.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(sE(),s),n.props.setPreSelection&&n.props.setPreSelection(sE())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return te.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(s){return te.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(s))},n.renderDefaultHeader=function(s){var o=s.monthDate,c=s.i;return te.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),te.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(c!==0),n.renderMonthYearDropdown(c!==0),n.renderYearDropdown(c!==0)))},n.renderCustomHeader=function(s){var o,c,h=s.monthDate,m=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var v=n.props,y=v.showYearPicker,w=v.yearItemNumber,E;if(y){var S=ii(h,w),k=S.startPeriod,L=S.endPeriod;E={startYear:k,endYear:L}}var T=dE(n.state.date,n.props),R=hE(n.state.date,n.props),q=fE(n.state.date,n.props),B=pE(n.state.date,n.props);return te.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(c=(o=n.props).renderCustomHeader)===null||c===void 0?void 0:c.call(o,Pe(Pe(Pe({},n.state),y&&{visibleYearsRange:E}),{customHeaderCount:m,monthDate:h,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:T,nextMonthButtonDisabled:R,prevYearButtonDisabled:q,nextYearButtonDisabled:B})))},n.renderYearHeader=function(s){var o=s.monthDate,c=n.props,h=c.showYearPicker,m=c.yearItemNumber,v=m===void 0?e.defaultProps.yearItemNumber:m,y=ii(o,v),w=y.startPeriod,E=y.endPeriod;return te.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},h?"".concat(w," - ").concat(E):Le(o))},n.renderHeader=function(s){var o=s.monthDate,c=s.i,h=c===void 0?0:c,m={monthDate:o,i:h};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(m);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(m);default:return n.renderDefaultHeader(m)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var c=[],h=(s=n.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,m=n.props.showPreviousMonths?h-1:0,v=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?li(n.state.date,m):mo(n.state.date,m),y=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:m,w=0;w<h;++w){var E=w-y+m,S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?li(v,E):Br(v,E),k="month-".concat(w),L=w<h-1,T=w>0;c.push(te.createElement("div",{key:k,ref:function(R){n.monthContainer=R??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:S,i:w}),te.createElement(iL,Pe({},e.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:S,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:w,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:L,monthShowsDuplicateDaysStart:T,dayNamesHeader:n.renderDayNamesHeader(S)}))))}return c}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return te.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),te.createElement(hL,Pe({},e.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return te.createElement(dL,Pe({},e.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&Xn(s)&&!!n.props.selected,c=o?"".concat(gE(s.getHours()),":").concat(gE(s.getMinutes())):"";if(n.props.showTimeInput)return te.createElement(eL,Pe({},e.defaultProps,n.props,{date:s,timeString:c,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s;if(!Xn(n.state.date))return te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var o=ii(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber),c=o.startPeriod,h=o.endPeriod,m;return n.props.showYearPicker?m="".concat(c," - ").concat(h):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?m=Le(n.state.date):m="".concat(Sy(Pn(n.state.date),n.props.locale)," ").concat(Le(n.state.date)),te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&m)},n.renderChildren=function(){if(n.props.children)return te.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=z.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:BT,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Gu}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){t.setState({monthContainer:t.monthContainer})})())},e.prototype.componentDidUpdate=function(t){var n=this;if(this.props.preSelection&&Xn(this.props.preSelection)&&(!Fe(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var s=!xn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Fe(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||MP;return te.createElement(fp,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},te.createElement("div",{style:{display:"contents"},ref:this.containerRef},te.createElement(t,{className:un("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(z.Component),_L=function(r){var e=r.icon,t=r.className,n=t===void 0?"":t,s=r.onClick,o="react-datepicker__calendar-icon";if(typeof e=="string")return te.createElement("i",{className:"".concat(o," ").concat(e," ").concat(n),"aria-hidden":"true",onClick:s});if(te.isValidElement(e)){var c=e;return te.cloneElement(c,{className:"".concat(c.props.className||""," ").concat(o," ").concat(n),onClick:function(h){typeof c.props.onClick=="function"&&c.props.onClick(h),typeof s=="function"&&s(h)}})}return te.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},te.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},HT=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return TC.createPortal(this.props.children,this.el)},e})(z.Component),wL="[tabindex], a, button, input, select, textarea",bL=function(r){return(r instanceof HTMLAnchorElement||!r.disabled)&&r.tabIndex!==-1},qT=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(wL),1,-1).filter(bL)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=z.createRef(),n}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?te.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},te.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,te.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(z.Component);function EL(r){function e(t){var n,s=typeof t.hidePopper=="boolean"?t.hidePopper:!0,o=z.useRef(null),c=IP(Pe({open:!s,whileElementsMounted:uP,placement:t.popperPlacement,middleware:ba([_P({padding:15}),yP(10),wP({element:o})],(n=t.popperModifiers)!==null&&n!==void 0?n:[],!0)},t.popperProps)),h=Pe(Pe({},t),{hidePopper:s,popperProps:Pe(Pe({},c),{arrowRef:o})});return te.createElement(r,Pe({},h))}return e.displayName="withFloating(".concat(r.displayName||r.name||"Component",")"),e}var xL=function(r){var e=r.className,t=r.wrapperClassName,n=r.hidePopper,s=n===void 0?!0:n,o=r.popperComponent,c=r.targetComponent,h=r.enableTabLoop,m=r.popperOnKeyDown,v=r.portalId,y=r.portalHost,w=r.popperProps,E=r.showArrow,S=void 0;if(!s){var k=un("react-datepicker-popper",e);S=te.createElement(qT,{enableTabLoop:h},te.createElement("div",{ref:w.refs.setFloating,style:w.floatingStyles,className:k,"data-placement":w.placement,onKeyDown:m},o,E&&te.createElement(SP,{ref:w.arrowRef,context:w.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}r.popperContainer&&(S=z.createElement(r.popperContainer,{},S)),v&&!s&&(S=te.createElement(HT,{portalId:v,portalHost:y},S));var L=un("react-datepicker-wrapper",t);return te.createElement(te.Fragment,null,te.createElement("div",{ref:w.refs.setReference,className:L},c),S)},TL=EL(xL);function SL(r,e){return r&&e?Pn(r)!==Pn(e)||Le(r)!==Le(e):r!==e}var Ig="Date input not valid.",Dy=(function(r){hn(e,r);function e(t){var n=r.call(this,t)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Ke()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,c){var h=new Date(c.date);return Xn(h)?ba(ba([],o,!0),[Pe(Pe({},c),{date:h})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),c=VT(n.props),h=UT(n.props),m=c&&wa(o,cu(c))?c:h&&xs(o,oE(h))?h:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:m,highlightDates:mE(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var s,o=n.props,c=o.locale,h=o.startDate,m=o.endDate,v=o.rangeSeparator,y=o.selected,w=o.selectedDates,E=o.selectsMultiple,S=o.selectsRange,k=o.value,L=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,T=n.state.inputValue;return typeof k=="string"?k:typeof T=="string"?T:S?OP(h,m,{dateFormat:L,locale:c,rangeSeparator:v}):E?PP(w??[],{dateFormat:L,locale:c}):Wn(y,{dateFormat:L,locale:c})},n.resetHiddenStatus=function(){n.setState(Pe(Pe({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Pe(Pe({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Mg},function(){s||n.setState(function(c){return{focused:o?c.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return ci(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,c,h=n.state.wasHidden,m=h?n.state.open:!0;h&&n.resetHiddenStatus(),n.state.preventFocus||((c=(o=n.props).onFocus)===null||c===void 0||c.call(o,s),m&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(Pe(Pe({},n.state),{inputValue:null}))},n.handleBlur=function(s){var o,c;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((c=(o=n.props).onBlur)===null||c===void 0||c.call(o,s)),n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,c;n.props.inline||n.setOpen(!1),(c=(o=n.props).onClickOutside)===null||c===void 0||c.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,c,h,m,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];var w=v[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,v),!w||typeof w.isDefaultPrevented!="function"||w.isDefaultPrevented()))){n.setState({inputValue:w?.target instanceof HTMLInputElement?w.target.value:null,lastPreSelectChange:CL});var E=n.props,S=E.selectsRange,k=E.startDate,L=E.endDate,T=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,R=(o=n.props.strictParsing)!==null&&o!==void 0?o:e.defaultProps.strictParsing,q=w?.target instanceof HTMLInputElement?w.target.value:"";if(S){var B=n.props.rangeSeparator,X=B.trim(),Q=q.split(T.includes(X)?B:X,2).map(function(I){return I.trim()}),ae=Q[0],O=Q[1],C=wl(ae??"",T,n.props.locale,R),N=C?wl(O??"",T,n.props.locale,R):null,M=k?.getTime()!==C?.getTime(),j=L?.getTime()!==N?.getTime();if(!M&&!j||C&&mr(C,n.props)||N&&mr(N,n.props))return;(h=(c=n.props).onChange)===null||h===void 0||h.call(c,[C,N],w)}else{var P=wl(q,T,n.props.locale,R,(m=n.props.selected)!==null&&m!==void 0?m:void 0);(P||!q)&&n.setSelected(P,w,!0)}}},n.handleSelect=function(s,o,c){var h;if(!n.props.readOnly){var m=n.props,v=m.selectsRange,y=m.startDate,w=m.endDate,E=m.locale,S=m.swapRange,k=(h=n.props.dateFormat)!==null&&h!==void 0?h:e.defaultProps.dateFormat,L=!v||y&&!w&&(S||!Rg(s,y));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&L&&n.sendFocusBackToInput(),n.props.onChangeRaw){var T=Wn(s,{dateFormat:k,locale:E});n.props.onChangeRaw(o,{date:s,formattedDate:T})}n.setSelected(s,o,!1,c),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(s):L&&n.setOpen(!1)}},n.setSelected=function(s,o,c,h){var m,v,y=s;if(n.props.showYearPicker){if(y!==null&&Qh(Le(y),n.props))return}else if(n.props.showMonthYearPicker){if(y!==null&&LT(y,n.props))return}else if(y!==null&&mr(y,n.props))return;var w=n.props,E=w.onChange,S=w.selectsRange,k=w.startDate,L=w.endDate,T=w.selectsMultiple,R=w.selectedDates,q=w.minTime,B=w.swapRange;if(!ho(n.props.selected,y)||n.props.allowSameDay||S||T)if(y!==null&&(n.props.selected&&(!c||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(y=Ah(y,{hour:Pr(n.props.selected),minute:Lr(n.props.selected),second:fs(n.props.selected)})),!c&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&q&&(y=Ah(y,{hour:q.getHours(),minute:q.getMinutes(),second:q.getSeconds()})),n.props.inline||n.setState({preSelection:y}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:h})),S){var X=!k&&!L,Q=k&&!L,ae=!k&&!!L,O=k&&L;X?E?.([y,null],o):Q?y===null?E?.([null,null],o):Rg(y,k)?E?.(B?[y,k]:[y,null],o):E?.([k,y],o):ae&&(y&&Rg(y,L)?E?.([y,L],o):E?.([y,null],o)),O&&E?.([y,null],o)}else if(T){if(y!==null)if(!R?.length)E?.([y],o);else{var C=R.some(function(M){return Fe(M,y)});if(C){var N=R.filter(function(M){return!Fe(M,y)});E?.(N,o)}else E?.(ba(ba([],R,!0),[y],!1),o)}}else E?.(y,o);c||((v=(m=n.props).onSelect)===null||v===void 0||v.call(m,y,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=ci(n.props.minDate),c=ci(n.props.maxDate),h=!0;if(s){var m=cu(s);if(o&&c)h=lo(s,n.props.minDate,n.props.maxDate);else if(o){var v=cu(n.props.minDate);h=xs(s,v)||ho(m,v)}else if(c){var y=oE(n.props.maxDate);h=wa(s,y)||ho(m,y)}}h&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,c;if(!(n.props.selectsRange||n.props.selectsMultiple)){var h=n.props.selected?n.props.selected:n.getPreSelection(),m=n.props.selected?s:Ah(h,{hour:Pr(s),minute:Lr(s)});n.setState({preSelection:m}),(c=(o=n.props).onChange)===null||c===void 0||c.call(o,m),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.handleTimeOnlyArrowKey=function(s){var o,c,h,m,v=n.props.selected||n.state.preSelection||Ke(),y=(o=n.props.timeIntervals)!==null&&o!==void 0?o:30,w=(c=n.props.dateFormat)!==null&&c!==void 0?c:e.defaultProps.dateFormat,E=Array.isArray(w)?w[0]:w,S=cu(v),k=Pr(v)*60+Lr(v),L=1440-y,T;if(s===he.ArrowUp){var R=Math.max(0,k-y);T=Cu(S,R)}else{var R=Math.min(L,k+y);T=Cu(S,R)}var q=pt(T,E||e.defaultProps.dateFormat,n.props.locale);if(n.setState({preSelection:T,inputValue:q}),!(n.props.selectsRange||n.props.selectsMultiple)){var B=n.props.selected?n.props.selected:n.getPreSelection(),X=n.props.selected?T:Ah(B,{hour:Pr(T),minute:Lr(T)});(m=(h=n.props).onChange)===null||m===void 0||m.call(h,X),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){n.scrollToTimeOption(T)})}},n.handleTimeOnlyEnterKey=function(s){var o,c,h,m,v=s.target,y=v.value,w=(o=n.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,E=n.props.timeFormat||"p",S=n.state.preSelection||n.props.selected||Ke(),k=wl(y,w,n.props.locale,(c=n.props.strictParsing)!==null&&c!==void 0?c:!1,S),L=S;if(k&&Xn(k))L=k;else{var T=((h=n.calendar)===null||h===void 0?void 0:h.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(T instanceof HTMLElement){var R=(m=T.textContent)===null||m===void 0?void 0:m.trim();if(R){var q=wl(R,E,n.props.locale,!1,S);q&&Xn(q)&&(L=q)}}}n.handleTimeChange(L),n.setOpen(!1),n.sendFocusBackToInput()},n.scrollToTimeOption=function(s){var o,c;if(!((o=n.calendar)===null||o===void 0)&&o.containerRef.current){for(var h=n.calendar.containerRef.current,m=Array.from(h.querySelectorAll(".react-datepicker__time-list-item")),v=null,y=1/0,w=n.props.timeFormat||"p",E=0,S=m;E<S.length;E++){var k=S[E],L=(c=k.textContent)===null||c===void 0?void 0:c.trim();if(L){var T=wl(L,w,n.props.locale,!1,s);if(T&&Xn(T)){if(FT(T,s)){v=k;break}var R=Math.abs(T.getTime()-s.getTime());R<y&&(y=R,v=k)}}}v&&(m.forEach(function(q){q.setAttribute("tabindex","-1")}),v.setAttribute("tabindex","0"),v.scrollIntoView({behavior:"smooth",block:"center"}))}},n.onInputKeyDown=function(s){var o,c,h,m,v,y;(c=(o=n.props).onKeyDown)===null||c===void 0||c.call(o,s);var w=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(w===he.ArrowDown||w===he.ArrowUp||w===he.Enter)&&((h=n.onInputClick)===null||h===void 0||h.call(n));return}if(n.state.open&&n.props.showTimeSelectOnly){if(w===he.ArrowDown||w===he.ArrowUp){s.preventDefault(),n.handleTimeOnlyArrowKey(w);return}if(w===he.Enter){s.preventDefault(),n.handleTimeOnlyEnterKey(s);return}}if(n.state.open){if(w===he.ArrowDown||w===he.ArrowUp){s.preventDefault();var E=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',S=((m=n.calendar)===null||m===void 0?void 0:m.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(E);S instanceof HTMLElement&&S.focus({preventScroll:!0});return}var k=Ke(n.state.preSelection);w===he.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Mg?(n.handleSelect(k,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(k)):n.setOpen(!1)):w===he.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):w===he.Tab&&n.setOpen(!1),n.inputOk()||(y=(v=n.props).onInputError)===null||y===void 0||y.call(v,{code:1,msg:Ig})}},n.onPortalKeyDown=function(s){var o=s.key;o===he.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,c,h,m,v,y,w=n.props,E=w.minDate,S=w.maxDate,k=w.disabledKeyboardNavigation,L=w.showWeekPicker,T=w.shouldCloseOnSelect,R=w.locale,q=w.calendarStartDay,B=w.adjustDateOnChange,X=w.inline;if((c=(o=n.props).onKeyDown)===null||c===void 0||c.call(o,s),!k){var Q=s.key,ae=s.shiftKey,O=Ke(n.state.preSelection),C=function(j,P){var I=P;switch(j){case he.ArrowRight:I=L?bf(P,1):Ur(P,1);break;case he.ArrowLeft:I=L?Wb(P):$O(P);break;case he.ArrowUp:I=Wb(P);break;case he.ArrowDown:I=bf(P,1);break;case he.PageUp:I=ae?Bl(P,1):mo(P,1);break;case he.PageDown:I=ae?li(P,1):Br(P,1);break;case he.Home:I=ps(P,R,q);break;case he.End:I=UP(P);break}return I},N=function(j,P){for(var I=40,de=j,fe=!1,U=0,$=C(j,P);!fe;){if(U>=I){$=P;break}E&&$<E&&(de=he.ArrowRight,$=mr(E,n.props)?C(de,$):E),S&&$>S&&(de=he.ArrowLeft,$=mr(S,n.props)?C(de,$):S),mr($,n.props)?((de===he.PageUp||de===he.Home)&&(de=he.ArrowRight),(de===he.PageDown||de===he.End)&&(de=he.ArrowLeft),$=C(de,$)):fe=!0,U++}return $};if(Q===he.Enter){s.preventDefault(),n.handleSelect(O,s),!T&&n.setPreSelection(O);return}else if(Q===he.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(m=(h=n.props).onInputError)===null||m===void 0||m.call(h,{code:1,msg:Ig});return}var M=null;switch(Q){case he.ArrowLeft:case he.ArrowRight:case he.ArrowUp:case he.ArrowDown:case he.PageUp:case he.PageDown:case he.Home:case he.End:M=N(Q,O);break}if(!M){(y=(v=n.props).onInputError)===null||y===void 0||y.call(v,{code:1,msg:Ig});return}s.preventDefault(),n.setState({lastPreSelectChange:Mg}),B&&n.setSelected(M),n.setPreSelection(M),X&&n.setState({shouldFocusDayInline:!0})}},n.onPopperKeyDown=function(s){var o=s.key;o===he.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,c=o.selectsRange,h=o.onChange;h?.(c?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:te.createElement(yL,Pe({showMonthYearDropdown:void 0,ref:function(c){n.calendar=c}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:e.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:$P(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:e.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s,o=n.props.locale,c=(s=n.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,h=n.props.showTimeInput||n.props.showTimeSelect,m=h?"PPPPp":"PPPP",v;return n.props.selectsRange?v="Selected start date: ".concat(Wn(n.props.startDate,{dateFormat:m,locale:o}),". ").concat(n.props.endDate?"End date: "+Wn(n.props.endDate,{dateFormat:m,locale:o}):""):n.props.showTimeSelectOnly?v="Selected time: ".concat(Wn(n.props.selected,{dateFormat:c,locale:o})):n.props.showYearPicker?v="Selected year: ".concat(Wn(n.props.selected,{dateFormat:"yyyy",locale:o})):n.props.showMonthYearPicker?v="Selected month: ".concat(Wn(n.props.selected,{dateFormat:"MMMM yyyy",locale:o})):n.props.showQuarterYearPicker?v="Selected quarter: ".concat(Wn(n.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):v="Selected date: ".concat(Wn(n.props.selected,{dateFormat:m,locale:o})),te.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},v)},n.renderDateInput=function(){var s,o,c,h,m,v,y=un(n.props.className,(s={},s[n.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=n.state.open,s)),w=n.props.customInput||te.createElement("input",{type:"text"}),E=n.props.customInputRef||"ref",S={},k=(c=n.props["aria-describedby"])!==null&&c!==void 0?c:n.props.ariaDescribedBy,L=(h=n.props["aria-invalid"])!==null&&h!==void 0?h:n.props.ariaInvalid,T=(m=n.props["aria-labelledby"])!==null&&m!==void 0?m:n.props.ariaLabelledBy,R=(v=n.props["aria-required"])!==null&&v!==void 0?v:n.props.ariaRequired;return k!=null&&(S["aria-describedby"]=k),L!=null&&(S["aria-invalid"]=L),T!=null&&(S["aria-labelledby"]=T),R!=null&&(S["aria-required"]=R),z.cloneElement(w,Pe((o={},o[E]=function(q){n.input=q},o.value=n.getInputValue(),o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=un(w.props.className,y),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o),S))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,c=s.disabled,h=s.selected,m=s.startDate,v=s.endDate,y=s.clearButtonTitle,w=s.clearButtonClassName,E=w===void 0?"":w,S=s.ariaLabelClose,k=S===void 0?"Close":S,L=s.selectedDates,T=s.readOnly;return o&&!T&&(h!=null||m!=null||v!=null||L?.length)?te.createElement("button",{type:"button",className:un("react-datepicker__close-icon",E,{"react-datepicker__close-icon--disabled":c}),disabled:c,"aria-label":k,onClick:n.onClearClick,title:y,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:BT,readOnly:!1,rangeSeparator:OT,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Gu,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,n){var s,o,c,h;t.inline&&SL(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:mE(this.props.highlightDates)}),!n.focused&&!ho(t.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((h=(c=this.props).onCalendarClose)===null||h===void 0||h.call(c)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,n=t.showIcon,s=t.icon,o=t.calendarIconClassname,c=t.calendarIconClassName,h=t.toggleCalendarOnIconClick,m=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),te.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&te.createElement(_L,Pe({icon:s,className:un(c,!c&&o,m&&"react-datepicker-ignore-onclickoutside")},h?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var n=this.state.open?te.createElement(qT,{enableTabLoop:this.props.enableTabLoop},te.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(n=te.createElement(HT,Pe({portalId:this.props.portalId},this.props),n)),te.createElement("div",null,this.renderInputContainer(),n)}return te.createElement(TL,Pe({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(z.Component),CL="input",Mg="navigate";const DL={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},AL=(r,e,t)=>{let n;const s=DL[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"en "+n:"hace "+n:n},NL={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},RL={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},kL={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},IL={date:kl({formats:NL,defaultWidth:"full"}),time:kl({formats:RL,defaultWidth:"full"}),dateTime:kl({formats:kL,defaultWidth:"full"})},ML={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},jL={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},OL=(r,e,t,n)=>e.getHours()!==1?jL[r]:ML[r],PL={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},LL={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},VL={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},UL={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},FL={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},zL={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},BL=(r,e)=>Number(r)+"",HL={ordinalNumber:BL,era:ga({values:PL,defaultWidth:"wide"}),quarter:ga({values:LL,defaultWidth:"wide",argumentCallback:r=>Number(r)-1}),month:ga({values:VL,defaultWidth:"wide"}),day:ga({values:UL,defaultWidth:"wide"}),dayPeriod:ga({values:FL,defaultWidth:"wide",formattingValues:zL,defaultFormattingWidth:"wide"})},qL=/^(\d+)()?/i,YL=/\d+/i,GL={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},WL={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},QL={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},KL={any:[/1/i,/2/i,/3/i,/4/i]},XL={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},$L={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},ZL={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},JL={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},e9={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},t9={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},n9={ordinalNumber:pT({matchPattern:qL,parsePattern:YL,valueCallback:function(r){return parseInt(r,10)}}),era:va({matchPatterns:GL,defaultMatchWidth:"wide",parsePatterns:WL,defaultParseWidth:"any"}),quarter:va({matchPatterns:QL,defaultMatchWidth:"wide",parsePatterns:KL,defaultParseWidth:"any",valueCallback:r=>r+1}),month:va({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:$L,defaultParseWidth:"any"}),day:va({matchPatterns:ZL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any"}),dayPeriod:va({matchPatterns:e9,defaultMatchWidth:"any",parsePatterns:t9,defaultParseWidth:"any"})},Ay={code:"es",formatDistance:AL,formatLong:IL,formatRelative:OL,localize:HL,match:n9,options:{weekStartsOn:1,firstWeekContainsDate:1}};xy("es",Ay);function r9({userData:r}){const e=Nu(),n=Ru().state?.editingAppointment,s=!!n,[o,c]=z.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[h,m]=z.useState({}),[v,y]=z.useState(!1),[w,E]=z.useState([]),[S,k]=z.useState(!1),[L,T]=z.useState(!1),[R,q]=z.useState("");z.useEffect(()=>{if(n){const j=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(P=>P.label===n.reason)?.value||"";c({motivo:j,clinica:n.clinica||"",fecha:n.date||"",hora:n.time||"",notas:n.notas||""})}},[n]),z.useEffect(()=>{(async()=>{if(o.fecha&&o.clinica){k(!0);const j=s?n?.time:null,{availableSlots:P,error:I}=await aT(o.fecha,o.clinica,j);I?(console.error("Error loading available hours:",I),E(Q)):(E(P),o.hora&&!P.includes(o.hora)&&!s&&c(de=>({...de,hora:""}))),k(!1)}else E(Q)})()},[o.fecha,o.clinica,s,n?.time]);const B=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],X=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],Q=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM"],ae=M=>{const{name:j,value:P}=M.target;if(j==="fecha"&&P&&new Date(P+"T00:00:00").getDay()===0){q("No se pueden agendar citas los domingos. Por favor, selecciona otro da."),T(!0);return}c(I=>({...I,[j]:P})),h[j]&&m(I=>({...I,[j]:""}))},O=()=>{const M={};if(o.motivo||(M.motivo="Por favor selecciona el motivo de la cita"),o.clinica||(M.clinica="Por favor selecciona una clnica"),!o.fecha)M.fecha="Por favor selecciona una fecha";else{const j=new Date(o.fecha+"T00:00:00"),P=new Date;P.setHours(0,0,0,0),j<P?M.fecha="La fecha no puede ser en el pasado":j.getTime()===P.getTime()&&(M.fecha="No se pueden agendar citas para el da de hoy"),j.getDay()===0&&(M.fecha="No se pueden agendar citas los domingos")}return o.hora||(M.hora="Por favor selecciona una hora"),M},C=async M=>{M.preventDefault();const j=O();if(Object.keys(j).length>0){m(j);return}y(!0);try{const P=Sn.currentUser;if(!P){m({general:"Debes iniciar sesin para agendar una cita"}),y(!1);return}const I=r?`${r.nombres||""} ${r.apellidos||""}`.trim():"Paciente",de=B.find(Z=>Z.value===o.motivo)?.label||o.motivo;if(!s){const{count:Z,error:ce}=await k4(P.uid);if(ce){console.error("Error checking appointment limit:",ce),m({general:"Error al verificar tus citas. Por favor, intenta de nuevo."}),y(!1);return}if(Z>=2){m({general:"Ya tienes 2 citas programadas. Debes cancelar o completar una cita existente antes de agendar una nueva."}),y(!1);return}}const fe=s?n.id:null,{hasAppointment:U,error:$}=await I4(P.uid,o.fecha,fe);if($){console.error("Error checking appointment on date:",$),m({general:"Error al verificar disponibilidad. Por favor, intenta de nuevo."}),y(!1);return}if(U){m({general:"Ya tienes una cita programada para este da. No puedes agendar ms de una cita por da."}),y(!1);return}if(s){const Z={date:o.fecha,time:o.hora,reason:de,clinica:o.clinica,notas:o.notas},{error:ce}=await rT(n.id,Z);if(ce){console.error("Error updating appointment:",ce),m({general:"Error al actualizar la cita. Por favor, intenta de nuevo."}),y(!1);return}e("/",{state:{message:"Cita actualizada exitosamente"}})}else{const Z={patientName:I,date:o.fecha,time:o.hora,reason:de,clinica:o.clinica,notas:o.notas,status:"programada"},{appointmentId:ce,error:ye}=await R4(P.uid,Z);if(ye){console.error("Error creating appointment:",ye),m({general:"Error al crear la cita. Por favor, intenta de nuevo."}),y(!1);return}e("/cita-confirmada",{state:{appointment:o}})}}catch(P){console.error("Unexpected error:",P),m({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),y(!1)}},N=new Date;return N.setDate(N.getDate()+1),N.toISOString().split("T")[0],d.jsxs("div",{className:"appointment-form-container",children:[d.jsxs("div",{className:"form-header",children:[d.jsx("h2",{children:s?"Editar Cita":"Agenda tu Cita"}),d.jsx("p",{children:s?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),d.jsxs("form",{onSubmit:C,className:"appointment-form",noValidate:!0,children:[d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Informacin de la Cita"}),d.jsx("div",{className:"form-row",children:d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("select",{id:"motivo",name:"motivo",value:o.motivo,onChange:ae,className:`${h.motivo?"error":""} ${o.motivo?"":"placeholder"}`,children:B.map(M=>d.jsx("option",{value:M.value,children:M.label},M.value))}),h.motivo&&d.jsxs("span",{className:"error-message",children:[" ",h.motivo]})]})}),d.jsx("div",{className:"form-row",children:d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("select",{id:"clinica",name:"clinica",value:o.clinica,onChange:ae,className:`${h.clinica?"error":""} ${o.clinica?"":"placeholder"}`,children:X.map(M=>d.jsx("option",{value:M.value,children:M.label},M.value))}),h.clinica&&d.jsxs("span",{className:"error-message",children:[" ",h.clinica]})]})}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx(Dy,{selected:o.fecha?new Date(o.fecha+"T00:00:00"):null,onChange:M=>{if(M){if(M.getDay()===0){q("No se pueden agendar citas los domingos. Por favor, selecciona otro da."),T(!0);return}const j=M.getFullYear(),P=String(M.getMonth()+1).padStart(2,"0"),I=String(M.getDate()).padStart(2,"0"),de=`${j}-${P}-${I}`;c(fe=>({...fe,fecha:de})),h.fecha&&m(fe=>({...fe,fecha:""}))}else c(j=>({...j,fecha:""}))},minDate:N,filterDate:M=>M.getDay()!==0,dateFormat:"dd/MM/yyyy",locale:"es",placeholderText:"Selecciona una fecha",className:`date-picker-input ${h.fecha?"error":""}`,calendarClassName:"custom-calendar",autoComplete:"off",onChangeRaw:M=>M.preventDefault()}),!o.fecha&&!h.fecha&&d.jsx("span",{className:"field-hint",children:"Haz clic para seleccionar una fecha"}),h.fecha&&d.jsxs("span",{className:"error-message",children:[" ",h.fecha]})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsxs("select",{id:"hora",name:"hora",value:o.hora,onChange:ae,className:`${h.hora?"error":""} ${o.hora?"":"placeholder"}`,disabled:S,onMouseDown:M=>{(!o.fecha||!o.clinica)&&(M.preventDefault(),q("Por favor, selecciona una clnica y una fecha antes de elegir la hora."),T(!0))},children:[d.jsx("option",{value:"",children:S?"Cargando horas disponibles...":!o.fecha||!o.clinica?"Selecciona una hora":w.length===0?"No hay horas disponibles":"Selecciona una hora"}),w.map(M=>d.jsx("option",{value:M,children:M},M))]}),h.hora&&d.jsxs("span",{className:"error-message",children:[" ",h.hora]}),o.fecha&&o.clinica&&!S&&w.length===0&&d.jsx("span",{className:"info-message",style:{color:"#0066cc",fontSize:"0.9rem",marginTop:"0.25rem",display:"block"},children:" Todas las horas estn ocupadas para esta fecha. Por favor, selecciona otro da."})]})]})]}),d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Notas Adicionales"}),d.jsx("div",{className:"form-row",children:d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),d.jsx("textarea",{id:"notas",name:"notas",value:o.notas,onChange:ae,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),h.general&&d.jsxs("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:[" ",h.general]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:v,children:v?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner"}),"Agendando..."]}):s?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]}),L&&d.jsx("div",{className:"modal-overlay",onClick:()=>T(!1),children:d.jsxs("div",{className:"modal-content error-modal",onClick:M=>M.stopPropagation(),children:[d.jsx("h3",{className:"modal-title",children:"Atencin"}),d.jsx("p",{className:"modal-message",children:R}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>T(!1),children:"Entendido"})})]})})]})}function a9(){return d.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}xy("es",Ay);const i9=({onLogin:r})=>{const[e,t]=z.useState(!0),[n,s]=z.useState(1),[o,c]=z.useState(""),[h,m]=z.useState({}),[v,y]=z.useState(!1),[w,E]=z.useState(!1),[S,k]=z.useState(""),[L,T]=z.useState(""),[R,q]=z.useState(!1),[B,X]=z.useState(!1),[Q,ae]=z.useState(""),[O,C]=z.useState(""),[N,M]=z.useState(""),[j,P]=z.useState(""),[I,de]=z.useState(""),[fe,U]=z.useState(""),[$,Z]=z.useState(""),[ce,ye]=z.useState(""),[Ie,le]=z.useState(""),[be,Ye]=z.useState(""),[wt,fn]=z.useState(""),[Cn,nr]=z.useState(""),[yn,As]=z.useState(""),[yr,Ei]=z.useState(""),[Hr,Ln]=z.useState("primera-vez"),[qr,Pa]=z.useState(!1),[Yr,Ns]=z.useState(!1),[St,Pt]=z.useState(!1),Ct=(me,Se)=>{Se&&m(Qt=>({...Qt,[me]:""}))},Jl=async me=>{me.preventDefault(),c(""),m({}),y(!0);try{if(e){if(!O||!N){c("Por favor, completa todos los campos."),y(!1);return}const{user:Se,error:Qt}=await w4(O,N);if(Qt){Qt.code==="auth/email-not-verified"?c("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):Qt.code==="auth/user-not-found"?c("No existe una cuenta con este correo."):Qt.code==="auth/wrong-password"?c("Contrasea incorrecta."):Qt.code==="auth/invalid-credential"?c("Correo o contrasea incorrectos."):c(Qt.message||"Error al iniciar sesin."),y(!1);return}Se&&r(Se)}else if(n===1){const Se={};if(O||(Se.email="Ingresa tu correo electrnico"),N||(Se.password="Crea una contrasea"),j||(Se.confirmPassword="Confirma tu contrasea"),Object.keys(Se).length>0){m(Se),ae("Por favor, revisa los campos marcados en rojo."),X(!0),y(!1);return}if(N.length<6){m({password:"La contrasea debe tener al menos 6 caracteres"}),ae("Por favor, revisa los campos marcados en rojo."),X(!0),y(!1);return}if(N!==j){m({confirmPassword:"Las contraseas no coinciden"}),ae("Por favor, revisa los campos marcados en rojo."),X(!0),y(!1);return}s(2),y(!1)}else{const Se={};if(I||(Se.nombres="Ingresa tus nombres"),fe||(Se.apellidos="Ingresa tus apellidos"),$||(Se.fechaNacimiento="Selecciona tu fecha de nacimiento"),ce||(Se.dui="Ingresa tu nmero de DUI"),Ie||(Se.genero="Selecciona tu gnero"),be||(Se.direccion="Ingresa tu direccin completa"),wt||(Se.telefono="Ingresa tu nmero de telfono"),Cn||(Se.emergenciaNombre="Ingresa el nombre del contacto"),yn||(Se.emergenciaTelefono="Ingresa el telfono del contacto"),yr||(Se.emergenciaParentesco="Selecciona el parentesco"),$){const _n=new Date($),Dt=new Date;let wn=Dt.getFullYear()-_n.getFullYear();const mt=Dt.getMonth()-_n.getMonth();(mt<0||mt===0&&Dt.getDate()<_n.getDate())&&wn--,wn<18&&(Se.fechaNacimiento="Debes tener al menos 18 aos para registrarte")}if(wt&&wt.length!==8&&(Se.telefono="El telfono debe tener exactamente 8 dgitos"),yn&&yn.length!==8&&(Se.emergenciaTelefono="El telfono debe tener exactamente 8 dgitos"),ce&&ce.length!==10&&(Se.dui="El DUI debe tener el formato completo (########-#)"),Object.keys(Se).length>0){m(Se),ae("Por favor, revisa los campos marcados en rojo."),X(!0),y(!1);return}const Qt={nombres:I,apellidos:fe,fechaNacimiento:$,dui:ce,genero:Ie,direccion:be,telefono:wt,emergenciaNombre:Cn,emergenciaTelefono:yn,emergenciaParentesco:yr,tipoPaciente:Hr};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:_r,error:wr}=await _4(O,N,Qt);if(wr){sessionStorage.removeItem("justRegistered"),wr.code==="auth/email-already-in-use"?c("Este correo ya est registrado."):c(wr.message||"Error al registrar usuario."),y(!1);return}c(""),q(!0)}}catch(Se){console.error("Error:",Se),c("Ocurri un error inesperado. Por favor, intenta de nuevo."),y(!1)}},Rs=async()=>{q(!1),sessionStorage.removeItem("justRegistered"),await eT(),t(!0),s(1),C(""),M(""),P(""),window.scrollTo(0,0)},$t=me=>{t(me),c(""),m({}),s(1)},La=async me=>{if(me.preventDefault(),T(""),!S){T("Por favor, ingresa tu correo electrnico.");return}y(!0);const{error:Se}=await b4(S);y(!1),Se?T("Error al enviar el correo de recuperacin."):(T("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{E(!1),k(""),T("")},3e3))},ks=me=>{let Se=me.target.value.replace(/\D/g,"");Se.length>9&&(Se=Se.slice(0,9)),Se.length>8&&(Se=Se.slice(0,8)+"-"+Se.slice(8,9)),ye(Se),Ct("dui",Se)},xi=(me,Se)=>Qt=>{const _r=Qt.target.value.replace(/\D/g,"");_r.length<=8&&(me(_r),Ct(Se,_r))};return d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:`login-card ${!e&&n===2?"wide":""}`,children:[d.jsx("div",{className:"login-header",children:d.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),n===1&&d.jsxs("div",{className:"auth-tabs",children:[d.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>$t(!0),children:"INICIAR SESIN"}),d.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>$t(!1),children:"REGISTRARSE"})]}),d.jsxs("form",{onSubmit:Jl,className:"login-form",noValidate:!0,children:[(e||n===1)&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),d.jsx("input",{type:"email",id:"email",value:O,onChange:me=>{C(me.target.value),Ct("email",me.target.value)},placeholder:"ejemplo@correo.com",className:h.email?"input-error":"",required:!0}),h.email&&d.jsx("span",{className:"field-error-message",children:h.email})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Contrasea"}),d.jsxs("div",{className:"password-input-wrapper",children:[d.jsx("input",{type:qr?"text":"password",id:"password",value:N,onChange:me=>{M(me.target.value),Ct("password",me.target.value)},placeholder:"",className:h.password?"input-error":"",required:!0}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Pa(!qr),"aria-label":qr?"Ocultar contrasea":"Mostrar contrasea",children:qr?d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),d.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),d.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),h.password&&d.jsx("span",{className:"field-error-message",children:h.password})]}),!e&&d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),d.jsxs("div",{className:"password-input-wrapper",children:[d.jsx("input",{type:Yr?"text":"password",id:"confirmPassword",value:j,onChange:me=>{P(me.target.value),Ct("confirmPassword",me.target.value)},placeholder:"",className:h.confirmPassword?"input-error":"",required:!0}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Ns(!Yr),"aria-label":Yr?"Ocultar contrasea":"Mostrar contrasea",children:Yr?d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),d.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),d.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),h.confirmPassword&&d.jsx("span",{className:"field-error-message",children:h.confirmPassword})]})]}),!e&&n===2&&d.jsxs("div",{className:"registration-step-2",children:[d.jsx("h3",{children:"Datos Personales"}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Nombres"}),d.jsx("input",{type:"text",value:I,onChange:me=>{de(me.target.value),Ct("nombres",me.target.value)},placeholder:"Ingresa tus nombres",className:h.nombres?"input-error":"",required:!0}),h.nombres&&d.jsx("span",{className:"field-error-message",children:h.nombres})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Apellidos"}),d.jsx("input",{type:"text",value:fe,onChange:me=>{U(me.target.value),Ct("apellidos",me.target.value)},placeholder:"Ingresa tus apellidos",className:h.apellidos?"input-error":"",required:!0}),h.apellidos&&d.jsx("span",{className:"field-error-message",children:h.apellidos})]})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Fecha de Nacimiento"}),d.jsx(Dy,{selected:$?new Date($+"T00:00:00"):null,onChange:me=>{if(me){const Se=me.getFullYear(),Qt=String(me.getMonth()+1).padStart(2,"0"),_r=String(me.getDate()).padStart(2,"0"),wr=`${Se}-${Qt}-${_r}`;Z(wr),Ct("fechaNacimiento",wr)}else Z("")},maxDate:new Date,dateFormat:"dd/MM/yyyy",locale:"es",placeholderText:"Fecha de nacimiento",className:`date-picker-input ${h.fechaNacimiento?"input-error":""}`,showYearDropdown:!0,scrollableYearDropdown:!0,yearDropdownItemNumber:100,autoComplete:"off",onChangeRaw:me=>me.preventDefault()}),!$&&!h.fechaNacimiento&&d.jsx("span",{className:"field-hint",children:"Haz clic para seleccionar tu fecha de nacimiento"}),h.fechaNacimiento&&d.jsx("span",{className:"field-error-message",children:h.fechaNacimiento})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"DUI"}),d.jsxs("div",{className:"input-with-icon",children:[d.jsx("input",{type:"text",value:ce,onChange:ks,placeholder:"00000000-0",maxLength:"10",className:h.dui?"input-error":"",required:!0}),d.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("circle",{cx:"8",cy:"10",r:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M5 16C5 14.8954 5.89543 14 7 14H9C10.1046 14 11 14.8954 11 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("line",{x1:"14",y1:"9",x2:"19",y2:"9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("line",{x1:"14",y1:"13",x2:"19",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),h.dui&&d.jsx("span",{className:"field-error-message",children:h.dui})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Gnero"}),d.jsxs("select",{value:Ie,onChange:me=>{le(me.target.value),Ct("genero",me.target.value)},required:!0,className:`${Ie?"":"placeholder-selected"} ${h.genero?"input-error":""}`,children:[d.jsx("option",{value:"",children:"Seleccione una opcin"}),d.jsx("option",{value:"Masculino",children:"Masculino"}),d.jsx("option",{value:"Femenino",children:"Femenino"})]}),h.genero&&d.jsx("span",{className:"field-error-message",children:h.genero})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Direccin"}),d.jsxs("div",{className:"input-with-icon",children:[d.jsx("input",{type:"text",value:be,onChange:me=>{Ye(me.target.value),Ct("direccion",me.target.value)},placeholder:"Calle, colonia, ciudad",className:h.direccion?"input-error":"",required:!0}),d.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),h.direccion&&d.jsx("span",{className:"field-error-message",children:h.direccion})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Telfono"}),d.jsxs("div",{className:"input-with-icon",children:[d.jsx("input",{type:"tel",value:wt,onChange:xi(fn,"telefono"),placeholder:"00000000",maxLength:"8",className:h.telefono?"input-error":"",required:!0}),d.jsx("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.5953 1.99522 8.06579 2.16708 8.43376 2.48353C8.80173 2.79999 9.04207 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.8939 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5864 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.telefono&&d.jsx("span",{className:"field-error-message",children:h.telefono})]}),d.jsx("div",{className:"divider"}),d.jsx("h3",{children:"Contacto de Emergencia"}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Nombre Completo"}),d.jsx("input",{type:"text",value:Cn,onChange:me=>{nr(me.target.value),Ct("emergenciaNombre",me.target.value)},placeholder:"Nombre completo del contacto",className:h.emergenciaNombre?"input-error":"",required:!0}),h.emergenciaNombre&&d.jsx("span",{className:"field-error-message",children:h.emergenciaNombre})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Telfono"}),d.jsxs("div",{className:"input-with-icon",children:[d.jsx("input",{type:"tel",value:yn,onChange:xi(As,"emergenciaTelefono"),placeholder:"00000000",maxLength:"8",className:h.emergenciaTelefono?"input-error":"",required:!0}),d.jsx("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.5953 1.99522 8.06579 2.16708 8.43376 2.48353C8.80173 2.79999 9.04207 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.8939 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5864 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),h.emergenciaTelefono&&d.jsx("span",{className:"field-error-message",children:h.emergenciaTelefono})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Parentesco"}),d.jsxs("select",{value:yr,onChange:me=>{Ei(me.target.value),Ct("emergenciaParentesco",me.target.value)},required:!0,className:`${yr?"":"placeholder-selected"} ${h.emergenciaParentesco?"input-error":""}`,children:[d.jsx("option",{value:"",children:"Seleccione una opcin"}),d.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),d.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),d.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),d.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),d.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),d.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),d.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),d.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),d.jsx("option",{value:"To / Ta",children:"To / Ta"}),d.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),d.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),d.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),h.emergenciaParentesco&&d.jsx("span",{className:"field-error-message",children:h.emergenciaParentesco})]}),d.jsx("div",{className:"divider"}),d.jsxs("div",{className:"form-group radio-group",children:[d.jsx("label",{children:"Es primera vez o paciente recurrente?"}),d.jsxs("div",{className:"radio-options",children:[d.jsxs("label",{className:"radio-label",children:[d.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:Hr==="primera-vez",onChange:me=>Ln(me.target.value)}),"Primera vez"]}),d.jsxs("label",{className:"radio-label",children:[d.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:Hr==="recurrente",onChange:me=>Ln(me.target.value)}),"Recurrente"]})]})]})]}),o&&d.jsx("p",{className:"error-message",children:o}),d.jsxs("div",{className:"button-group",children:[!e&&n===2&&d.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>s(1),children:"Atrs"}),d.jsx("button",{type:"submit",className:"login-button",disabled:v,children:v?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner"}),"Cargando..."]}):e?"Ingresar":n===1?"Siguiente":"Finalizar Registro"})]}),e&&d.jsx("div",{className:"forgot-password",children:d.jsx("a",{href:"#",onClick:me=>{me.preventDefault(),E(!0)},children:"Olvidaste tu contrasea?"})})]}),w&&d.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:d.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),children:[d.jsx("h3",{children:"Recuperar Contrasea"}),d.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),d.jsxs("form",{onSubmit:La,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),d.jsx("input",{type:"email",id:"resetEmail",value:S,onChange:me=>k(me.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),L&&d.jsx("p",{className:L.includes("Error")?"error-message":"success-message",children:L}),d.jsxs("div",{className:"button-group",children:[d.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>E(!1),children:"Cancelar"}),d.jsx("button",{type:"submit",className:"login-button",disabled:v,children:v?"Enviando...":"Enviar"})]})]})]})}),R&&d.jsx("div",{className:"modal-overlay",onClick:Rs,children:d.jsxs("div",{className:"modal-content success-modal",onClick:me=>me.stopPropagation(),children:[d.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),d.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Rs,children:"Aceptar"})})]})}),B&&d.jsx("div",{className:"modal-overlay",onClick:()=>X(!1),children:d.jsxs("div",{className:"modal-content error-modal",onClick:me=>me.stopPropagation(),children:[d.jsx("h3",{className:"modal-title",children:"Error en el formulario"}),d.jsx("p",{className:"modal-message",children:Q}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>X(!1),children:"Aceptar"})})]})})]})})},s9=({onLogin:r})=>{const[e,t]=z.useState("login"),[n,s]=z.useState(!1),[o,c]=z.useState(""),[h,m]=z.useState(""),[v,y]=z.useState({}),[w,E]=z.useState(""),[S,k]=z.useState(""),[L,T]=z.useState(""),[R,q]=z.useState(""),[B,X]=z.useState(""),[Q,ae]=z.useState(""),[O,C]=z.useState(""),[N,M]=z.useState(""),[j,P]=z.useState("doctor"),[I,de]=z.useState(""),fe=(Z,ce)=>{ce&&y(ye=>({...ye,[Z]:""}))},U=async Z=>{Z.preventDefault(),c(""),y({}),s(!0);const ce={};if(w||(ce.email="Ingresa tu correo electrnico"),S||(ce.password="Ingresa tu contrasea"),Object.keys(ce).length>0){y(ce),s(!1);return}try{const{user:ye,staffProfile:Ie,error:le}=await C4(w,S);if(le){le.code==="auth/not-staff"?c("Esta cuenta no tiene permisos de personal."):le.code==="auth/invalid-credential"||le.code==="auth/wrong-password"||le.code==="auth/user-not-found"?c("Credenciales incorrectas. Verifica tu correo y contrasea."):le.code==="auth/too-many-requests"?c("Demasiados intentos fallidos. Por favor, intenta ms tarde."):c("Error al iniciar sesin. Por favor, intenta de nuevo."),s(!1);return}ye&&Ie&&r(ye,Ie)}catch(ye){console.error("Login error:",ye),c("Error inesperado. Por favor, intenta de nuevo.")}finally{s(!1)}},$=async Z=>{Z.preventDefault(),c(""),y({}),m(""),s(!0);const ce={};if(L||(ce.regEmail="Ingresa el correo electrnico"),R||(ce.regPassword="Ingresa la contrasea"),B||(ce.confirmPassword="Confirma la contrasea"),R&&B&&R!==B&&(ce.confirmPassword="Las contraseas no coinciden"),R&&R.length<6&&(ce.regPassword="La contrasea debe tener al menos 6 caracteres"),Q||(ce.nombres="Ingresa los nombres"),O||(ce.apellidos="Ingresa los apellidos"),N||(ce.cargo="Ingresa el cargo"),I||(ce.telefono="Ingresa el telfono"),Object.keys(ce).length>0){y(ce),s(!1);return}try{const{success:ye,error:Ie}=await S4(L,R,{nombres:Q,apellidos:O,cargo:N,role:j,telefono:I});if(Ie){Ie.code==="auth/email-already-in-use"?c("Este correo electrnico ya est registrado."):Ie.code==="auth/invalid-email"?c("El correo electrnico no es vlido."):Ie.code==="auth/weak-password"?c("La contrasea es demasiado dbil."):c("Error al crear la cuenta. Por favor, intenta de nuevo."),s(!1);return}ye&&(m("Cuenta creada exitosamente! Ahora puedes iniciar sesin."),T(""),q(""),X(""),ae(""),C(""),M(""),P("doctor"),de(""),setTimeout(()=>{t("login"),m("")},2e3))}catch(ye){console.error("Registration error:",ye),c("Error inesperado. Por favor, intenta de nuevo.")}finally{s(!1)}};return d.jsx("div",{className:"staff-login-container",children:d.jsxs("div",{className:"staff-login-card",children:[d.jsx("div",{className:"staff-login-header",children:d.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),d.jsxs("div",{className:"mode-toggle",children:[d.jsx("button",{type:"button",className:`mode-button ${e==="login"?"active":""}`,onClick:()=>{t("login"),c(""),m(""),y({})},children:"Iniciar Sesin"}),d.jsx("button",{type:"button",className:`mode-button ${e==="register"?"active":""}`,onClick:()=>{t("register"),c(""),m(""),y({})},children:"Registrar Personal"})]}),h&&d.jsxs("div",{className:"success-message-banner",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),d.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),h]}),e==="login"&&d.jsxs("form",{onSubmit:U,className:"staff-login-form",noValidate:!0,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),d.jsx("input",{type:"email",id:"email",value:w,onChange:Z=>{E(Z.target.value),fe("email",Z.target.value)},placeholder:"ejemplo@correo.com",className:v.email?"input-error":"",disabled:n,required:!0}),v.email&&d.jsx("span",{className:"field-error-message",children:v.email})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",children:"Contrasea"}),d.jsx("input",{type:"password",id:"password",value:S,onChange:Z=>{k(Z.target.value),fe("password",Z.target.value)},placeholder:"",className:v.password?"input-error":"",disabled:n,required:!0}),v.password&&d.jsx("span",{className:"field-error-message",children:v.password})]}),o&&d.jsx("p",{className:"error-message",children:o}),d.jsx("button",{type:"submit",className:"staff-login-button",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner"}),"Cargando..."]}):"Ingresar"})]}),e==="register"&&d.jsxs("form",{onSubmit:$,className:"staff-login-form staff-register-form",noValidate:!0,children:[d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"nombres",children:"Nombres"}),d.jsx("input",{type:"text",id:"nombres",value:Q,onChange:Z=>{ae(Z.target.value),fe("nombres",Z.target.value)},placeholder:"Juan Carlos",className:v.nombres?"input-error":"",disabled:n,required:!0}),v.nombres&&d.jsx("span",{className:"field-error-message",children:v.nombres})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"apellidos",children:"Apellidos"}),d.jsx("input",{type:"text",id:"apellidos",value:O,onChange:Z=>{C(Z.target.value),fe("apellidos",Z.target.value)},placeholder:"Garca Lpez",className:v.apellidos?"input-error":"",disabled:n,required:!0}),v.apellidos&&d.jsx("span",{className:"field-error-message",children:v.apellidos})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"regEmail",children:"Correo Electrnico"}),d.jsx("input",{type:"email",id:"regEmail",value:L,onChange:Z=>{T(Z.target.value),fe("regEmail",Z.target.value)},placeholder:"ejemplo@correo.com",className:v.regEmail?"input-error":"",disabled:n,required:!0}),v.regEmail&&d.jsx("span",{className:"field-error-message",children:v.regEmail})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"regPassword",children:"Contrasea"}),d.jsx("input",{type:"password",id:"regPassword",value:R,onChange:Z=>{q(Z.target.value),fe("regPassword",Z.target.value)},placeholder:"",className:v.regPassword?"input-error":"",disabled:n,required:!0}),v.regPassword&&d.jsx("span",{className:"field-error-message",children:v.regPassword})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),d.jsx("input",{type:"password",id:"confirmPassword",value:B,onChange:Z=>{X(Z.target.value),fe("confirmPassword",Z.target.value)},placeholder:"",className:v.confirmPassword?"input-error":"",disabled:n,required:!0}),v.confirmPassword&&d.jsx("span",{className:"field-error-message",children:v.confirmPassword})]})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"cargo",children:"Cargo"}),d.jsx("input",{type:"text",id:"cargo",value:N,onChange:Z=>{M(Z.target.value),fe("cargo",Z.target.value)},placeholder:"Ej: Odontlogo, Asistente",className:v.cargo?"input-error":"",disabled:n,required:!0}),v.cargo&&d.jsx("span",{className:"field-error-message",children:v.cargo})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"telefono",children:"Telfono"}),d.jsx("input",{type:"tel",id:"telefono",value:I,onChange:Z=>{de(Z.target.value),fe("telefono",Z.target.value)},placeholder:"7777-7777",className:v.telefono?"input-error":"",disabled:n,required:!0}),v.telefono&&d.jsx("span",{className:"field-error-message",children:v.telefono})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"role",children:"Rol"}),d.jsxs("select",{id:"role",value:j,onChange:Z=>P(Z.target.value),className:"form-select",disabled:n,children:[d.jsx("option",{value:"doctor",children:"Doctor"}),d.jsx("option",{value:"admin",children:"Administrador"})]})]}),o&&d.jsx("p",{className:"error-message",children:o}),d.jsx("button",{type:"submit",className:"staff-login-button",disabled:n,children:n?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner"}),"Creando cuenta..."]}):"Crear Cuenta"})]})]})})},jg=({userType:r,userData:e,onLogout:t,children:n})=>{const s=Nu(),o=Ru(),c=r==="admin",v=c?[{id:"dashboard",label:"Dashboard",path:"/staff/dashboard",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),d.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})},{id:"appointments",label:"Gestin de Citas",path:"/staff/appointments",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},{id:"patients",label:"Pacientes",path:"/staff/patients",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},{id:"reports",label:"Reportes",path:"/staff/reports",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),d.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),d.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})},{id:"settings",label:"Configuracin",path:"/staff/settings",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),d.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}]:[{id:"dashboard",label:"Dashboard",path:"/staff/dashboard",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),d.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})},{id:"appointments",label:"Citas del Da",path:"/staff/appointments",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),d.jsx("polyline",{points:"14 2 14 8 20 8"}),d.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),d.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),d.jsx("polyline",{points:"10 9 9 9 8 9"})]})},{id:"patients",label:"Pacientes",path:"/staff/patients",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},{id:"history",label:"Historial Clnico",path:"/staff/history",icon:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})},{id:"notes",label:"Notas Mdicas",path:"/staff/notes",icon:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),d.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}];return d.jsxs("div",{className:"staff-layout",children:[d.jsx("div",{className:"mobile-header",children:d.jsxs("div",{className:"mobile-header-content",children:[d.jsxs("div",{className:"mobile-title",children:[d.jsx("h2",{children:"Clnica Dental Dr. Csar Vsquez"}),d.jsxs("p",{className:"mobile-user-info",children:[d.jsx("span",{className:"mobile-user-role",children:c?"Administrador":"Doctor"}),d.jsxs("span",{className:"mobile-user-name",children:["   ",e?.nombres," ",e?.apellidos]})]})]}),d.jsx("button",{className:"mobile-logout-button",onClick:t,title:"Cerrar sesin",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})}),d.jsxs("aside",{className:"staff-sidebar",children:[d.jsxs("div",{className:"sidebar-header",children:[d.jsx("div",{className:"logo",children:d.jsx("span",{children:"Clnica Dental Dr. Csar Vsquez"})}),d.jsxs("div",{className:"user-info",children:[d.jsx("p",{className:"user-role",children:c?"Administrador":"Doctor"}),d.jsxs("p",{className:"user-name",children:[e?.nombres," ",e?.apellidos]})]})]}),d.jsx("nav",{className:"sidebar-nav",children:v.map(y=>d.jsxs("button",{className:`nav-item ${o.pathname===y.path?"active":""}`,onClick:()=>s(y.path),children:[d.jsx("span",{className:"nav-icon",children:y.icon}),d.jsx("span",{className:"nav-label",children:y.label})]},y.id))}),d.jsx("div",{className:"sidebar-footer",children:d.jsxs("button",{className:"logout-button",onClick:t,children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.jsx("polyline",{points:"16 17 21 12 16 7"}),d.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),d.jsx("span",{children:"Cerrar sesin"})]})})]}),d.jsx("main",{className:"staff-content",children:n})]})},o9=({userType:r,userData:e})=>{const t=Nu(),n=r==="admin",s=r==="doctor",[o,c]=z.useState(null),[h,m]=z.useState([]),[v,y]=z.useState(!0);z.useEffect(()=>{w()},[]);const w=async()=>{y(!0);const{stats:S,error:k}=await P4();!k&&S&&c(S);const{appointments:L,error:T}=await L4();T||m(L),y(!1)},E=S=>S;return d.jsxs("div",{className:"staff-dashboard",children:[d.jsxs("div",{className:"dashboard-header",children:[d.jsxs("h1",{children:[n&&d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"header-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Panel Administrativo"]}),s&&d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"header-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),"Panel Mdico"]})]}),d.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",d.jsxs("strong",{children:[e?.nombres," ",e?.apellidos]})]})]}),v?d.jsxs("div",{className:"dashboard-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Cargando estadsticas..."})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"kpi-section",children:[d.jsx("h2",{className:"section-title",children:"Resumen General"}),d.jsxs("div",{className:"kpi-grid",children:[d.jsxs("div",{className:"kpi-card kpi-patients",children:[d.jsx("div",{className:"kpi-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d.jsxs("div",{className:"kpi-content",children:[d.jsx("p",{className:"kpi-label",children:"Total Pacientes"}),d.jsx("p",{className:"kpi-value",children:o?.totalPatients||0})]})]}),d.jsxs("div",{className:"kpi-card kpi-active",children:[d.jsx("div",{className:"kpi-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsxs("div",{className:"kpi-content",children:[d.jsx("p",{className:"kpi-label",children:"Citas Programadas"}),d.jsx("p",{className:"kpi-value",children:o?.scheduledAppointments||0})]})]}),d.jsxs("div",{className:"kpi-card kpi-today",children:[d.jsx("div",{className:"kpi-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),d.jsxs("div",{className:"kpi-content",children:[d.jsx("p",{className:"kpi-label",children:"Citas de Hoy"}),d.jsx("p",{className:"kpi-value",children:o?.todayAppointments||0})]})]}),d.jsxs("div",{className:"kpi-card kpi-completed",children:[d.jsx("div",{className:"kpi-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),d.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),d.jsxs("div",{className:"kpi-content",children:[d.jsx("p",{className:"kpi-label",children:"Citas Completadas"}),d.jsx("p",{className:"kpi-value",children:o?.completedAppointments||0})]})]})]})]}),d.jsxs("div",{className:"quick-access-section",children:[d.jsx("h2",{className:"section-title",children:"Accesos Rpidos"}),d.jsxs("div",{className:"quick-access-grid",children:[d.jsxs("button",{className:"quick-access-card",onClick:()=>t("/staff/appointments"),children:[d.jsx("div",{className:"quick-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsx("h3",{children:"Ver Todas las Citas"}),d.jsx("p",{children:"Gestionar y revisar todas las citas programadas"})]}),d.jsxs("button",{className:"quick-access-card",onClick:()=>t("/staff/patients"),children:[d.jsx("div",{className:"quick-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d.jsx("h3",{children:"Gestin de Pacientes"}),d.jsx("p",{children:"Ver y administrar informacin de pacientes"})]}),d.jsxs("button",{className:"quick-access-card",onClick:()=>t("/staff/appointments"),children:[d.jsx("div",{className:"quick-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),d.jsx("h3",{children:"Nueva Cita"}),d.jsx("p",{children:"Programar una nueva cita para un paciente"})]})]})]}),h.length>0&&d.jsxs("div",{className:"today-appointments-section",children:[d.jsx("h2",{className:"section-title",children:"Citas de Hoy"}),d.jsx("div",{className:"appointments-list",children:h.map(S=>d.jsxs("div",{className:"appointment-card",children:[d.jsxs("div",{className:"appointment-time",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("polyline",{points:"12 6 12 12 16 14"})]}),d.jsx("span",{children:E(S.time)})]}),d.jsxs("div",{className:"appointment-details",children:[d.jsx("h4",{children:S.patientName}),d.jsx("p",{className:"appointment-reason",children:S.reason}),d.jsxs("p",{className:"appointment-clinic",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),S.clinica]})]}),d.jsx("div",{className:"appointment-status",children:d.jsx("span",{className:"status-badge status-programada",children:"Programada"})})]},S.id))})]})]})]})};xy("es",Ay);function l9({patientData:r,onSuccess:e,onCancel:t}){const[n,s]=z.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[o,c]=z.useState({}),[h,m]=z.useState(!1),[v,y]=z.useState([]),[w,E]=z.useState(!1),[S,k]=z.useState(!1),[L,T]=z.useState("");z.useEffect(()=>{(async()=>{if(n.fecha&&n.clinica){E(!0);const{availableSlots:N,error:M}=await aT(n.fecha,n.clinica,null);M?(console.error("Error loading available hours:",M),y(B)):(y(N),n.hora&&!N.includes(n.hora)&&s(j=>({...j,hora:""}))),E(!1)}else y(B)})()},[n.fecha,n.clinica]);const R=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],q=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],B=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM"],X=C=>{const{name:N,value:M}=C.target;if(N==="fecha"&&M&&new Date(M+"T00:00:00").getDay()===0){T("No se pueden agendar citas los domingos. Por favor, selecciona otro da."),k(!0);return}s(j=>({...j,[N]:M})),o[N]&&c(j=>({...j,[N]:""}))},Q=()=>{const C={};if(n.motivo||(C.motivo="Por favor selecciona el motivo de la cita"),n.clinica||(C.clinica="Por favor selecciona una clnica"),!n.fecha)C.fecha="Por favor selecciona una fecha";else{const N=new Date(n.fecha+"T00:00:00"),M=new Date;M.setHours(0,0,0,0),N<M?C.fecha="La fecha no puede ser en el pasado":N.getTime()===M.getTime()&&(C.fecha="No se pueden agendar citas para el da de hoy"),N.getDay()===0&&(C.fecha="No se pueden agendar citas los domingos")}return n.hora||(C.hora="Por favor selecciona una hora"),C},ae=async C=>{C.preventDefault();const N=Q();if(Object.keys(N).length>0){c(N);return}m(!0);try{const M=Sn.currentUser;if(!M){c({general:"Debes iniciar sesin como personal para agendar citas"}),m(!1);return}const j=`${r.nombres||""} ${r.apellidos||""}`.trim(),P=R.find(U=>U.value===n.motivo)?.label||n.motivo,I={patientName:j,date:n.fecha,time:n.hora,reason:P,clinica:n.clinica,notas:n.notas,status:"programada"},{appointmentId:de,error:fe}=await j4(r.id,I,M.uid);if(fe){console.error("Error creating appointment:",fe),c({general:"Error al crear la cita. Por favor, intenta de nuevo."}),m(!1);return}e&&e()}catch(M){console.error("Unexpected error:",M),c({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),m(!1)}},O=new Date;return O.setDate(O.getDate()+1),O.toISOString().split("T")[0],d.jsxs("div",{className:"appointment-form-container",children:[d.jsxs("div",{className:"form-header",children:[d.jsx("h2",{children:"Programar Cita para Paciente"}),d.jsxs("p",{className:"patient-info",children:[d.jsx("strong",{children:"Paciente:"})," ",r.nombres," ",r.apellidos]})]}),d.jsxs("form",{onSubmit:ae,className:"appointment-form",noValidate:!0,children:[d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Informacin de la Cita"}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("select",{id:"motivo",name:"motivo",value:n.motivo,onChange:X,className:`${o.motivo?"error":""} ${n.motivo?"":"placeholder"}`,children:R.map(C=>d.jsx("option",{value:C.value,children:C.label},C.value))}),o.motivo&&d.jsx("span",{className:"error-message",children:o.motivo})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx("select",{id:"clinica",name:"clinica",value:n.clinica,onChange:X,className:`${o.clinica?"error":""} ${n.clinica?"":"placeholder"}`,children:q.map(C=>d.jsx("option",{value:C.value,children:C.label},C.value))}),o.clinica&&d.jsx("span",{className:"error-message",children:o.clinica})]})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsx(Dy,{selected:n.fecha?new Date(n.fecha+"T00:00:00"):null,onChange:C=>{if(C){if(C.getDay()===0){T("No se pueden agendar citas los domingos. Por favor, selecciona otro da."),k(!0);return}const N=C.getFullYear(),M=String(C.getMonth()+1).padStart(2,"0"),j=String(C.getDate()).padStart(2,"0"),P=`${N}-${M}-${j}`;s(I=>({...I,fecha:P})),o.fecha&&c(I=>({...I,fecha:""}))}else s(N=>({...N,fecha:""}))},minDate:O,filterDate:C=>C.getDay()!==0,dateFormat:"dd/MM/yyyy",locale:"es",placeholderText:"Selecciona una fecha",className:`date-picker-input ${o.fecha?"error":""}`,calendarClassName:"custom-calendar",autoComplete:"off",onChangeRaw:C=>C.preventDefault()}),!n.fecha&&!o.fecha&&d.jsx("span",{className:"field-hint",children:"Haz clic para seleccionar una fecha"}),o.fecha&&d.jsx("span",{className:"error-message",children:o.fecha})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",d.jsx("span",{className:"required",children:"*"})]}),d.jsxs("select",{id:"hora",name:"hora",value:n.hora,onChange:X,className:`${o.hora?"error":""} ${n.hora?"":"placeholder"}`,disabled:w,onMouseDown:C=>{(!n.fecha||!n.clinica)&&(C.preventDefault(),T("Por favor, selecciona una clnica y una fecha antes de elegir la hora."),k(!0))},children:[d.jsx("option",{value:"",children:w?"Cargando horas disponibles...":!n.fecha||!n.clinica?"Selecciona una hora":v.length===0?"No hay horas disponibles":"Selecciona una hora"}),v.map(C=>d.jsx("option",{value:C,children:C},C))]}),o.hora&&d.jsx("span",{className:"error-message",children:o.hora}),n.fecha&&n.clinica&&!w&&v.length===0&&d.jsx("span",{className:"info-message",style:{color:"#0066cc",fontSize:"0.9rem",marginTop:"0.25rem",display:"block"},children:" Todas las horas estn ocupadas para esta fecha. Por favor, selecciona otro da."})]})]})]}),d.jsxs("div",{className:"form-section",children:[d.jsx("h3",{children:"Notas Adicionales"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),d.jsx("textarea",{id:"notas",name:"notas",value:n.notas,onChange:X,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})]}),o.general&&d.jsx("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:o.general}),d.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:h,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:h,children:h?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner"}),"Agendando..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]})]}),S&&d.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:d.jsxs("div",{className:"modal-content error-modal",onClick:C=>C.stopPropagation(),children:[d.jsx("h3",{className:"modal-title",children:"Atencin"}),d.jsx("p",{className:"modal-message",children:L}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>k(!1),children:"Entendido"})})]})})]})}const c9=()=>{const[r,e]=z.useState([]),[t,n]=z.useState([]),[s,o]=z.useState(""),[c,h]=z.useState(!0),[m,v]=z.useState(""),[y,w]=z.useState(null),[E,S]=z.useState(!1),[k,L]=z.useState(!1),[T,R]=z.useState(null),[q,B]=z.useState(!1),[X,Q]=z.useState(""),[ae,O]=z.useState(!1),[C,N]=z.useState(null),[M,j]=z.useState(!1);z.useEffect(()=>{P()},[]),z.useEffect(()=>{if(s.trim()==="")n(r);else{const le=r.filter(be=>{const Ye=s.toLowerCase(),wt=`${be.nombres||""} ${be.apellidos||""}`.toLowerCase(),fn=(be.email||"").toLowerCase(),Cn=(be.dui||"").toLowerCase(),nr=(be.telefono||"").toLowerCase();return wt.includes(Ye)||fn.includes(Ye)||Cn.includes(Ye)||nr.includes(Ye)});n(le)}},[s,r]),z.useEffect(()=>(E||ae||M?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[E,ae,M]);const P=async()=>{h(!0),v("");const{patients:le,error:be}=await D4();be?(v("Error al cargar los pacientes. Verifica los permisos de Firestore."),console.error("Error loading patients:",be)):(e(le),n(le)),h(!1)},I=le=>{w(le),R(le),L(!1),Q(""),S(!0)},de=()=>{L(!0),Q("")},fe=()=>{R(y),L(!1),Q("")},U=(le,be)=>{R({...T,[le]:be})},$=async()=>{B(!0),Q("");const{error:le}=await A4(y.id,{nombres:T.nombres,apellidos:T.apellidos,fechaNacimiento:T.fechaNacimiento,genero:T.genero,dui:T.dui,email:T.email,telefono:T.telefono,direccion:T.direccion,emergenciaNombre:T.emergenciaNombre,emergenciaTelefono:T.emergenciaTelefono,emergenciaParentesco:T.emergenciaParentesco,tipoPaciente:T.tipoPaciente});if(le)Q("Error al guardar los cambios. Intenta nuevamente."),console.error("Error updating patient:",le);else{const be=r.map(Ye=>Ye.id===y.id?{...Ye,...T}:Ye);e(be),w(T),L(!1)}B(!1)},Z=le=>{N(le),O(!0)},ce=()=>{O(!1),N(null),j(!0)},ye=()=>{O(!1),N(null)},Ie=le=>{if(!le)return"N/A";try{return new Date(le).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})}catch{return le}};return d.jsxs("div",{className:"patients-management",children:[d.jsxs("div",{className:"patients-header",children:[d.jsxs("h1",{children:[d.jsxs("svg",{className:"header-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"}),d.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Gestin de Pacientes"]}),d.jsx("p",{className:"subtitle",children:"Administra la base de datos de pacientes"})]}),d.jsxs("div",{className:"patients-controls",children:[d.jsxs("div",{className:"search-box",children:[d.jsx("input",{type:"text",placeholder:"Buscar por nombre, email, DUI o telfono...",value:s,onChange:le=>o(le.target.value),className:"search-input"}),d.jsxs("svg",{className:"search-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.35-4.35"})]})]}),d.jsxs("div",{className:"patients-count",children:[t.length," paciente",t.length!==1?"s":""]})]}),c?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Cargando pacientes..."})]}):m?d.jsxs("div",{className:"error-container",children:[d.jsx("p",{className:"error-message",children:m}),d.jsx("button",{onClick:P,className:"retry-button",children:"Reintentar"})]}):t.length===0?d.jsxs("div",{className:"empty-state",children:[d.jsx("p",{children:"No se encontraron pacientes"}),s&&d.jsx("button",{onClick:()=>o(""),className:"clear-search-button",children:"Limpiar bsqueda"})]}):d.jsx("div",{className:"patients-table-container",children:d.jsxs("table",{className:"patients-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Nombre Completo"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Telfono"}),d.jsx("th",{children:"DUI"}),d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:t.map(le=>d.jsxs("tr",{children:[d.jsxs("td",{className:"patient-name",children:[le.nombres," ",le.apellidos]}),d.jsx("td",{children:le.email}),d.jsx("td",{children:le.telefono||"N/A"}),d.jsx("td",{children:le.dui||"N/A"}),d.jsx("td",{children:d.jsx("button",{onClick:()=>I(le),className:"view-button",children:"Ver detalles"})})]},le.id))})]})}),E&&y&&T&&d.jsx("div",{className:"modal-overlay",onClick:()=>!k&&S(!1),children:d.jsxs("div",{className:"modal-content patient-detail-modal",onClick:le=>le.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:k?"Editar Paciente":"Detalles del Paciente"}),d.jsx("button",{className:"modal-close",onClick:()=>{k||S(!1)},disabled:k,children:""})]}),d.jsxs("div",{className:"patient-detail-content",children:[X&&d.jsx("div",{className:"save-error-message",children:X}),d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Informacin Personal"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Nombres:"}),k?d.jsx("input",{type:"text",value:T.nombres||"",onChange:le=>U("nombres",le.target.value),className:"edit-input"}):d.jsx("span",{children:y.nombres})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Apellidos:"}),k?d.jsx("input",{type:"text",value:T.apellidos||"",onChange:le=>U("apellidos",le.target.value),className:"edit-input"}):d.jsx("span",{children:y.apellidos})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Fecha de Nacimiento:"}),k?d.jsx("input",{type:"date",value:T.fechaNacimiento||"",onChange:le=>U("fechaNacimiento",le.target.value),className:"edit-input"}):d.jsx("span",{children:Ie(y.fechaNacimiento)})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Gnero:"}),k?d.jsxs("select",{value:T.genero||"",onChange:le=>U("genero",le.target.value),className:"edit-input",children:[d.jsx("option",{value:"",children:"Seleccionar"}),d.jsx("option",{value:"Masculino",children:"Masculino"}),d.jsx("option",{value:"Femenino",children:"Femenino"}),d.jsx("option",{value:"Otro",children:"Otro"})]}):d.jsx("span",{children:y.genero||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"DUI:"}),k?d.jsx("input",{type:"text",value:T.dui||"",onChange:le=>U("dui",le.target.value),className:"edit-input",placeholder:"########-#"}):d.jsx("span",{children:y.dui||"N/A"})]})]})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Informacin de Contacto"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Email:"}),k?d.jsx("input",{type:"email",value:T.email||"",onChange:le=>U("email",le.target.value),className:"edit-input",placeholder:"ejemplo@email.com"}):d.jsx("span",{children:y.email})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Telfono:"}),k?d.jsx("input",{type:"text",value:T.telefono||"",onChange:le=>U("telefono",le.target.value),className:"edit-input",placeholder:"12345678"}):d.jsx("span",{children:y.telefono||"N/A"})]}),d.jsxs("div",{className:"detail-item full-width",children:[d.jsx("label",{children:"Direccin:"}),k?d.jsx("input",{type:"text",value:T.direccion||"",onChange:le=>U("direccion",le.target.value),className:"edit-input",placeholder:"Direccin completa"}):d.jsx("span",{children:y.direccion||"N/A"})]})]})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Contacto de Emergencia"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Nombre:"}),k?d.jsx("input",{type:"text",value:T.emergenciaNombre||"",onChange:le=>U("emergenciaNombre",le.target.value),className:"edit-input",placeholder:"Nombre completo"}):d.jsx("span",{children:y.emergenciaNombre||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Telfono:"}),k?d.jsx("input",{type:"text",value:T.emergenciaTelefono||"",onChange:le=>U("emergenciaTelefono",le.target.value),className:"edit-input",placeholder:"12345678"}):d.jsx("span",{children:y.emergenciaTelefono||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Parentesco:"}),k?d.jsx("input",{type:"text",value:T.emergenciaParentesco||"",onChange:le=>U("emergenciaParentesco",le.target.value),className:"edit-input",placeholder:"Ej: Madre, Hermano"}):d.jsx("span",{children:y.emergenciaParentesco||"N/A"})]})]})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Informacin Adicional"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Tipo de Paciente:"}),k?d.jsxs("select",{value:T.tipoPaciente||"",onChange:le=>U("tipoPaciente",le.target.value),className:"edit-input",children:[d.jsx("option",{value:"primera-vez",children:"Primera vez"}),d.jsx("option",{value:"subsecuente",children:"Subsecuente"})]}):d.jsx("span",{className:`patient-type ${y.tipoPaciente}`,children:y.tipoPaciente==="primera-vez"?"Primera vez":"Subsecuente"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Fecha de Registro:"}),d.jsx("span",{children:Ie(y.createdAt)})]})]})]})]}),d.jsx("div",{className:"modal-actions",children:k?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"cancel-button",onClick:fe,disabled:q,children:"Cancelar"}),d.jsx("button",{className:"save-button",onClick:$,disabled:q,children:q?"Guardando...":"Guardar Cambios"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"schedule-appointment-button",onClick:()=>Z(y),children:[d.jsxs("svg",{className:"calendar-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Programar Cita"]}),d.jsxs("button",{className:"edit-button",onClick:de,children:[d.jsx("svg",{className:"edit-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),"Editar"]}),d.jsx("button",{className:"close-button",onClick:()=>S(!1),children:"Cerrar"})]})})]})}),ae&&C&&d.jsx("div",{className:"modal-overlay",onClick:ye,children:d.jsxs("div",{className:"modal-content appointment-modal",onClick:le=>le.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Programar Cita"}),d.jsx("button",{className:"modal-close",onClick:ye,children:""})]}),d.jsx(l9,{patientData:C,onSuccess:ce,onCancel:ye})]})}),M&&d.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:d.jsxs("div",{className:"modal-content success-modal",onClick:le=>le.stopPropagation(),children:[d.jsx("div",{className:"success-icon",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),d.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),d.jsx("h3",{children:"Cita programada exitosamente"}),d.jsx("p",{children:"La cita ha sido creada y el paciente ser notificado."}),d.jsx("button",{className:"success-button",onClick:()=>j(!1),children:"Aceptar"})]})})]})},u9=()=>{const[r,e]=z.useState([]),[t,n]=z.useState([]),[s,o]=z.useState(!0),[c,h]=z.useState(""),[m,v]=z.useState(""),[y,w]=z.useState("all"),[E,S]=z.useState("all"),[k,L]=z.useState("all"),[T,R]=z.useState(null),[q,B]=z.useState(null),[X,Q]=z.useState(!1),[ae,O]=z.useState(!1);z.useEffect(()=>{C()},[]),z.useEffect(()=>{N()},[r,m,y,E,k]),z.useEffect(()=>(X?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[X]);const C=async()=>{o(!0),h("");const{appointments:U,error:$}=await O4();$?(h("Error al cargar las citas. Verifica los permisos de Firestore."),console.error("Error loading appointments:",$)):e(U),o(!1)},N=()=>{let U=[...r];const $=new Date;$.setHours(0,0,0,0);const Z=$.toISOString().split("T")[0];if(y==="today")U=U.filter(ce=>ce.date===Z);else if(y==="week"){const ce=new Date($);ce.setDate(ce.getDate()+7),U=U.filter(ye=>{const Ie=new Date(ye.date);return Ie>=$&&Ie<=ce})}if(E!=="all"&&(U=U.filter(ce=>ce.status===E)),k!=="all"&&(U=U.filter(ce=>ce.clinica===k)),m.trim()!==""){const ce=m.toLowerCase();U=U.filter(ye=>{const Ie=(ye.patientName||"").toLowerCase(),le=(ye.reason||"").toLowerCase();return Ie.includes(ce)||le.includes(ce)})}n(U)},M=async U=>{R(U),Q(!0);const{patient:$,error:Z}=await N4(U.userId);!Z&&$&&B($)},j=async(U,$)=>{O(!0);const{error:Z}=await ap(U,$);Z?(console.error("Error updating status:",Z),alert("Error al actualizar el estado de la cita")):(await C(),Q(!1)),O(!1)},P=U=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[U]||U,I=U=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[U]||U,de=U=>{const $=new Date;$.setHours(0,0,0,0);const Z=$.toISOString().split("T")[0];return U===Z},fe=U=>new Date(U).toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return d.jsxs("div",{className:"staff-appointments",children:[d.jsxs("div",{className:"appointments-header",children:[d.jsxs("h1",{children:[d.jsxs("svg",{className:"header-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Gestin de Citas"]}),d.jsx("p",{className:"subtitle",children:"Administra todas las citas del sistema"})]}),d.jsxs("div",{className:"appointments-filters",children:[d.jsxs("div",{className:"filter-row",children:[d.jsxs("div",{className:"search-box",children:[d.jsx("input",{type:"text",placeholder:"Buscar por paciente o motivo...",value:m,onChange:U=>v(U.target.value),className:"search-input"}),d.jsxs("svg",{className:"search-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("path",{d:"m21 21-4.35-4.35"})]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsxs("select",{value:y,onChange:U=>w(U.target.value),className:"filter-select",children:[d.jsx("option",{value:"all",children:"Todas las fechas"}),d.jsx("option",{value:"today",children:"Hoy"}),d.jsx("option",{value:"week",children:"Esta semana"})]}),d.jsxs("select",{value:E,onChange:U=>S(U.target.value),className:"filter-select",children:[d.jsx("option",{value:"all",children:"Todos los estados"}),d.jsx("option",{value:"programada",children:"Programada"}),d.jsx("option",{value:"terminada",children:"Terminada"}),d.jsx("option",{value:"cancelada",children:"Cancelada"}),d.jsx("option",{value:"perdida",children:"Perdida"})]}),d.jsxs("select",{value:k,onChange:U=>L(U.target.value),className:"filter-select",children:[d.jsx("option",{value:"all",children:"Todas las clnicas"}),d.jsx("option",{value:"santa-tecla",children:"Santa Tecla"}),d.jsx("option",{value:"soyapango",children:"Soyapango"}),d.jsx("option",{value:"san-martin",children:"San Martn"}),d.jsx("option",{value:"escalon",children:"Escaln"}),d.jsx("option",{value:"usulutan",children:"Usulutn"})]})]})]}),d.jsxs("div",{className:"appointments-count",children:[t.length," cita",t.length!==1?"s":""]})]}),s?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Cargando citas..."})]}):c?d.jsxs("div",{className:"error-container",children:[d.jsx("p",{className:"error-message",children:c}),d.jsx("button",{onClick:C,className:"retry-button",children:"Reintentar"})]}):t.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:"No se encontraron citas"})}):d.jsx("div",{className:"appointments-table-container",children:d.jsxs("table",{className:"appointments-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Fecha"}),d.jsx("th",{children:"Hora"}),d.jsx("th",{children:"Paciente"}),d.jsx("th",{children:"Clnica"}),d.jsx("th",{children:"Motivo"}),d.jsx("th",{children:"Estado"}),d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:t.map(U=>d.jsxs("tr",{className:de(U.date)?"today-appointment":"",children:[d.jsxs("td",{className:"appointment-date",children:[de(U.date)&&d.jsx("span",{className:"today-badge",children:"HOY"}),U.date]}),d.jsx("td",{children:U.time}),d.jsx("td",{className:"patient-name",children:U.patientName||"N/A"}),d.jsx("td",{children:I(U.clinica)}),d.jsx("td",{children:U.reason||"N/A"}),d.jsx("td",{children:d.jsx("span",{className:`status-badge status-${U.status}`,children:P(U.status)})}),d.jsx("td",{children:d.jsx("button",{onClick:()=>M(U),className:"view-button",children:"Ver detalles"})})]},U.id))})]})}),X&&T&&d.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:d.jsxs("div",{className:"modal-content appointment-detail-modal",onClick:U=>U.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Detalles de la Cita"}),d.jsx("button",{className:"modal-close",onClick:()=>Q(!1),children:""})]}),d.jsxs("div",{className:"appointment-detail-content",children:[d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Informacin de la Cita"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Fecha:"}),d.jsx("span",{children:fe(T.date)})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Hora:"}),d.jsx("span",{children:T.time})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Clnica:"}),d.jsx("span",{children:I(T.clinica)})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Estado:"}),d.jsx("span",{className:`status-badge status-${T.status}`,children:P(T.status)})]}),d.jsxs("div",{className:"detail-item full-width",children:[d.jsx("label",{children:"Motivo:"}),d.jsx("span",{children:T.reason||"No especificado"})]}),T.notas&&d.jsxs("div",{className:"detail-item full-width",children:[d.jsx("label",{children:"Notas:"}),d.jsx("span",{children:T.notas})]})]})]}),q&&d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Informacin del Paciente"}),d.jsxs("div",{className:"detail-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Nombre:"}),d.jsxs("span",{children:[q.nombres," ",q.apellidos]})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Email:"}),d.jsx("span",{children:q.email})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"Telfono:"}),d.jsx("span",{children:q.telefono||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("label",{children:"DUI:"}),d.jsx("span",{children:q.dui||"N/A"})]})]})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("h3",{children:"Actualizar Estado"}),d.jsxs("div",{className:"status-buttons",children:[d.jsx("button",{onClick:()=>j(T.id,"programada"),className:`status-update-btn status-programada ${T.status==="programada"?"active":""}`,disabled:ae,children:"Programada"}),d.jsx("button",{onClick:()=>j(T.id,"terminada"),className:`status-update-btn status-terminada ${T.status==="terminada"?"active":""}`,disabled:ae,children:"Terminada"}),d.jsx("button",{onClick:()=>j(T.id,"cancelada"),className:`status-update-btn status-cancelada ${T.status==="cancelada"?"active":""}`,disabled:ae,children:"Cancelada"}),d.jsx("button",{onClick:()=>j(T.id,"perdida"),className:`status-update-btn status-perdida ${T.status==="perdida"?"active":""}`,disabled:ae,children:"Perdida"})]})]})]}),d.jsx("div",{className:"modal-actions",children:d.jsx("button",{className:"close-button",onClick:()=>Q(!1),children:"Cerrar"})})]})})]})};function d9(){const{pathname:r}=Ru();return z.useEffect(()=>{window.scrollTo(0,0)},[r]),null}function h9({isAuthenticated:r,userType:e,userData:t,handleLogin:n,handleLogout:s,isStaff:o,isLoading:c}){const m=Ru().pathname.startsWith("/staff");return c?d.jsx("div",{className:"loading-container",children:d.jsx("div",{className:"loading-spinner"})}):d.jsxs(d.Fragment,{children:[r&&e==="patient"&&d.jsx(V4,{onLogout:s,userData:t,userType:e}),d.jsx("main",{className:"main-content",children:d.jsxs(CC,{children:[d.jsx(Ir,{path:"/staff/login",element:r?d.jsx(yl,{to:o?"/staff/dashboard":"/",replace:!0}):d.jsx(s9,{onLogin:n})}),d.jsx(Ir,{path:"/",element:r?e==="patient"?d.jsx(F4,{userData:t}):d.jsx(yl,{to:"/staff/dashboard",replace:!0}):d.jsx(i9,{onLogin:n})}),d.jsx(Ir,{path:"/staff/dashboard",element:r&&o?d.jsx(jg,{userType:e,userData:t,onLogout:s,children:d.jsx(o9,{userType:e,userData:t})}):d.jsx(yl,{to:r?"/":"/staff/login",replace:!0})}),d.jsx(Ir,{path:"/staff/patients",element:r&&o?d.jsx(jg,{userType:e,userData:t,onLogout:s,children:d.jsx(c9,{})}):d.jsx(yl,{to:r?"/":"/staff/login",replace:!0})}),d.jsx(Ir,{path:"/staff/appointments",element:r&&o?d.jsx(jg,{userType:e,userData:t,onLogout:s,children:d.jsx(u9,{})}):d.jsx(yl,{to:r?"/":"/staff/login",replace:!0})}),r&&e==="patient"&&d.jsxs(d.Fragment,{children:[d.jsx(Ir,{path:"/cita",element:d.jsx("div",{className:"container",children:d.jsx(r9,{userData:t})})}),d.jsx(Ir,{path:"/contacto",element:d.jsx(z4,{})}),d.jsx(Ir,{path:"/perfil",element:d.jsx(B4,{userData:t})}),d.jsx(Ir,{path:"/mis-citas",element:d.jsx(H4,{})}),d.jsx(Ir,{path:"/cita-confirmada",element:d.jsx(q4,{})})]}),d.jsx(Ir,{path:"*",element:d.jsx(yl,{to:r&&o?"/staff/dashboard":"/",replace:!0})})]})}),r&&e==="patient"&&d.jsx(a9,{}),!m&&d.jsx(U4,{})]})}function f9(){const[r,e]=z.useState(!1),[t,n]=z.useState(null),[s,o]=z.useState(null),[c,h]=z.useState(!0);z.useEffect(()=>{const w=x4(async k=>{if(console.log("Auth state changed, user:",k?.email),k){const L=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",L),L==="true"){console.log("User just registered, skipping auto-login"),h(!1);return}let T=await tT(k.uid);if(T.profile){console.log("Staff profile loaded:",T.profile),n(T.profile),o(T.profile.role),e(!0),h(!1);return}let R=3,q=null,B=null;for(;R>0&&!q;){const X=await Pb(k.uid);q=X.profile,B=X.error,!q&&R>1&&(console.log(`Failed to load profile, retrying... (${R-1} attempts left)`),await new Promise(Q=>setTimeout(Q,1e3))),R--}q?(console.log("Patient profile loaded:",q),n(q),o("patient"),e(!0),h(!1)):(console.error("Failed to load profile after retries:",B),e(!1),n(null),o(null),h(!1))}else e(!1),n(null),o(null),h(!1)}),E=async()=>{await M4()};E();const S=setInterval(E,6e4);return()=>{w(),clearInterval(S)}},[]);const m=async(w,E=null)=>{if(E){n(E),o(E.role),e(!0);return}const{profile:S,error:k}=await Pb(w.uid);S?(n(S),o("patient"),e(!0)):console.error("Failed to load profile:",k)},v=async()=>{await eT(),e(!1),n(null),o(null)},y=s==="admin"||s==="doctor";return d.jsxs(SC,{basename:"/COI/",children:[d.jsx(d9,{}),d.jsx("div",{className:"app",children:d.jsx(h9,{isAuthenticated:r,userType:s,userData:t,handleLogin:m,handleLogout:v,isStaff:y,isLoading:c})})]})}MC.createRoot(document.getElementById("root")).render(d.jsx(z.StrictMode,{children:d.jsx(f9,{})}));
