import{r as JT,a as ew,b as ae,L as Jn,u as km,c as Ah,B as tw,R as nw,d as fs,N as ku}from"./vendor-BIRSGIdg.js";import{E as H0}from"./pdf-utils-Bs4fDNQ7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Kf={exports:{}},xl={};var tv;function iw(){if(tv)return xl;tv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return xl.Fragment=e,xl.jsx=n,xl.jsxs=n,xl}var nv;function sw(){return nv||(nv=1,Kf.exports=iw()),Kf.exports}var m=sw(),Yf={exports:{}},Rl={},Xf={exports:{}},$f={};var iv;function rw(){return iv||(iv=1,(function(s){function e(Q,ne){var he=Q.length;Q.push(ne);e:for(;0<he;){var _e=he-1>>>1,Ce=Q[_e];if(0<l(Ce,ne))Q[_e]=ne,Q[he]=Ce,he=_e;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ne=Q[0],he=Q.pop();if(he!==ne){Q[0]=he;e:for(var _e=0,Ce=Q.length,Ke=Ce>>>1;_e<Ke;){var Le=2*(_e+1)-1,Ae=Q[Le],tt=Le+1,vt=Q[tt];if(0>l(Ae,he))tt<Ce&&0>l(vt,Ae)?(Q[_e]=vt,Q[tt]=he,_e=tt):(Q[_e]=Ae,Q[Le]=he,_e=Le);else if(tt<Ce&&0>l(vt,he))Q[_e]=vt,Q[tt]=he,_e=tt;else break e}}return ne}function l(Q,ne){var he=Q.sortIndex-ne.sortIndex;return he!==0?he:Q.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var y=[],E=[],T=1,A=null,x=3,P=!1,K=!1,J=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ie(Q){for(var ne=n(E);ne!==null;){if(ne.callback===null)r(E);else if(ne.startTime<=Q)r(E),ne.sortIndex=ne.expirationTime,e(y,ne);else break;ne=n(E)}}function ee(Q){if(J=!1,ie(Q),!K)if(n(y)!==null)K=!0,ce||(ce=!0,j());else{var ne=n(E);ne!==null&&He(ee,ne.startTime-Q)}}var ce=!1,D=-1,S=5,N=-1;function M(){return k?!0:!(s.unstable_now()-N<S)}function R(){if(k=!1,ce){var Q=s.unstable_now();N=Q;var ne=!0;try{e:{K=!1,J&&(J=!1,oe(D),D=-1),P=!0;var he=x;try{t:{for(ie(Q),A=n(y);A!==null&&!(A.expirationTime>Q&&M());){var _e=A.callback;if(typeof _e=="function"){A.callback=null,x=A.priorityLevel;var Ce=_e(A.expirationTime<=Q);if(Q=s.unstable_now(),typeof Ce=="function"){A.callback=Ce,ie(Q),ne=!0;break t}A===n(y)&&r(y),ie(Q)}else r(y);A=n(y)}if(A!==null)ne=!0;else{var Ke=n(E);Ke!==null&&He(ee,Ke.startTime-Q),ne=!1}}break e}finally{A=null,x=he,P=!1}ne=void 0}}finally{ne?j():ce=!1}}}var j;if(typeof Z=="function")j=function(){Z(R)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,xe=C.port2;C.port1.onmessage=R,j=function(){xe.postMessage(null)}}else j=function(){U(R,0)};function He(Q,ne){D=U(function(){Q(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var he=x;x=ne;try{return Q()}finally{x=he}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(Q,ne){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=x;x=Q;try{return ne()}finally{x=he}},s.unstable_scheduleCallback=function(Q,ne,he){var _e=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?_e+he:_e):he=_e,Q){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=he+Ce,Q={id:T++,callback:ne,priorityLevel:Q,startTime:he,expirationTime:Ce,sortIndex:-1},he>_e?(Q.sortIndex=he,e(E,Q),n(y)===null&&Q===n(E)&&(J?(oe(D),D=-1):J=!0,He(ee,he-_e))):(Q.sortIndex=Ce,e(y,Q),K||P||(K=!0,ce||(ce=!0,j()))),Q},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(Q){var ne=x;return function(){var he=x;x=ne;try{return Q.apply(this,arguments)}finally{x=he}}}})($f)),$f}var sv;function aw(){return sv||(sv=1,Xf.exports=rw()),Xf.exports}var rv;function ow(){if(rv)return Rl;rv=1;var s=aw(),e=JT(),n=ew();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function E(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return y(h),t;if(f===o)return y(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var _=!1,w=h.child;w;){if(w===a){_=!0,a=h,o=f;break}if(w===o){_=!0,o=h,a=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===a){_=!0,a=f,o=h;break}if(w===o){_=!0,o=f,a=h;break}w=w.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,x=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case ce:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case Z:return t.displayName||"Context";case oe:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:xe(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return xe(t(i))}catch{}}return null}var He=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},_e=[],Ce=-1;function Ke(t){return{current:t}}function Le(t){0>Ce||(t.current=_e[Ce],_e[Ce]=null,Ce--)}function Ae(t,i){Ce++,_e[Ce]=t.current,t.current=i}var tt=Ke(null),vt=Ke(null),sn=Ke(null),xn=Ke(null);function ri(t,i){switch(Ae(sn,i),Ae(vt,t),Ae(tt,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?A_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=A_(i),t=S_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Le(tt),Ae(tt,t)}function Zt(){Le(tt),Le(vt),Le(sn)}function Sr(t){t.memoizedState!==null&&Ae(xn,t);var i=tt.current,a=S_(i,t.type);i!==a&&(Ae(vt,t),Ae(tt,a))}function Bn(t){vt.current===t&&(Le(tt),Le(vt)),xn.current===t&&(Le(xn),bl._currentValue=he)}var As,ai;function mn(t){if(As===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);As=i&&i[1]||"",ai=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+t+ai}var oi=!1;function Gi(t,i){if(!t||oi)return"";oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(F){var q=F}Reflect.construct(t,[],X)}else{try{X.call()}catch(F){q=F}t.call(X.prototype)}}else{try{throw Error()}catch(F){q=F}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var I=_.split(`
`),B=w.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===B.length)for(o=I.length-1,h=B.length-1;1<=o&&0<=h&&I[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==B[h]){var G=`
`+I[o].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=o&&0<=h);break}}}finally{oi=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mn(a):""}function li(t,i){switch(t.tag){case 26:case 27:case 5:return mn(t.type);case 16:return mn("Lazy");case 13:return t.child!==i&&i!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return Gi(t.type,!1);case 11:return Gi(t.type.render,!1);case 1:return Gi(t.type,!0);case 31:return mn("Activity");default:return""}}function Cr(t){try{var i="",a=null;do i+=li(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ht=Object.prototype.hasOwnProperty,Et=s.unstable_scheduleCallback,dt=s.unstable_cancelCallback,xo=s.unstable_shouldYield,xr=s.unstable_requestPaint,Mt=s.unstable_now,Qi=s.unstable_getCurrentPriorityLevel,Rr=s.unstable_ImmediatePriority,Ss=s.unstable_UserBlockingPriority,se=s.unstable_NormalPriority,ve=s.unstable_LowPriority,Ut=s.unstable_IdlePriority,Ki=s.log,Cs=s.unstable_setDisableYieldValue,Jt=null,ft=null;function en(t){if(typeof Ki=="function"&&Cs(t),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(Jt,t)}catch{}}var st=Math.clz32?Math.clz32:dc,hc=Math.log,_a=Math.LN2;function dc(t){return t>>>=0,t===0?32:31-(hc(t)/_a|0)|0}var ci=256,Nr=262144,Tt=4194304;function ui(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?h=ui(o):(_&=w,_!==0?h=ui(_):a||(a=w&~t,a!==0&&(h=ui(a))))):(w=o&~f,w!==0?h=ui(w):_!==0?h=ui(_):a||(a=o&~t,a!==0&&(h=ui(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function qn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $h(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fc(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function di(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ir(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wh(t,i,a,o,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var G=31-st(a),X=1<<G;w[G]=0,I[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var F=q[G];F!==null&&(F.lane&=-536870913)}a&=~X}o!==0&&Dr(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function Dr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-st(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Ro(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-st(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function No(t,i){var a=i&-i;return a=(a&42)!==0?1:Or(a),(a&(t.suspendedLanes|i))!==0?0:a}function Or(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mc(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:Y_(t.type))}function Hn(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Fn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Fn,Vt="__reactProps$"+Fn,fi="__reactContainer$"+Fn,va="__reactEvents$"+Fn,Zh="__reactListeners$"+Fn,pc="__reactHandles$"+Fn,gc="__reactResources$"+Fn,mi="__reactMarker$"+Fn;function Ea(t){delete t[wt],delete t[Vt],delete t[va],delete t[Zh],delete t[pc]}function pi(t){var i=t[wt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[fi]||a[wt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[wt])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function Rn(t){if(t=t[wt]||t[fi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function pn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function gi(t){var i=t[gc];return i||(i=t[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bt(t){t[mi]=!0}var Io=new Set,Do={};function yi(t,i){_i(t,i),_i(t+"Capture",i)}function _i(t,i){for(Do[t]=i,t=0;t<i.length;t++)Io.add(i[t])}var Oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jo={},Mo={};function yc(t){return ht.call(Mo,t)?!0:ht.call(jo,t)?!1:Oo.test(t)?Mo[t]=!0:(jo[t]=!0,!1)}function Ta(t,i,a){if(yc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function gn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function At(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xs(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vo(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fe(t){if(!t._valueTracker){var i=xs(t)?"checked":"value";t._valueTracker=Vo(t,i,""+t[i])}}function jr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=xs(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Mr=/[\n"\\]/g;function rn(t){return t.replace(Mr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wa(t,i,a,o,h,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+kt(i)):t.value!==""+kt(i)&&(t.value=""+kt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?ko(t,_,kt(i)):a!=null?ko(t,_,kt(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+kt(w):t.removeAttribute("name")}function _c(t,i,a,o,h,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){Fe(t);return}a=a!=null?""+kt(a):"",i=i!=null?""+kt(i):a,w||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Fe(t)}function ko(t,i,a){i==="number"&&vi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Rs(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+kt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function vc(t,i,a){if(i!=null&&(i=""+kt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+kt(a):""}function Ns(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(He(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=kt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),Fe(t)}function an(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Ec.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Po(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Lo(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&Lo(t,f,i[f])}function ba(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(t){return Is.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gn(){}var Uo=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ds=null,Ei=null;function Vr(t){var i=Rn(t);if(i&&(t=i.stateNode)){var a=t[Vt]||null;e:switch(t=i.stateNode,i.type){case"input":if(wa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Vt]||null;if(!h)throw Error(r(90));wa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&jr(o)}break e;case"textarea":vc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Rs(t,!!a.multiple,i,!1)}}}var Sa=!1;function Os(t,i,a){if(Sa)return t(i,a);Sa=!0;try{var o=t(i);return o}finally{if(Sa=!1,(Ds!==null||Ei!==null)&&(mu(),Ds&&(i=Ds,t=Ei,Ei=Ds=null,Vr(i),t)))for(i=0;i<t.length;i++)Vr(t[i])}}function Qn(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Vt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(In)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){kr=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{kr=!1}var Ti=null,zo=null,Lr=null;function Bo(){if(Lr)return Lr;var t,i=zo,a=i.length,o,h="value"in Ti?Ti.value:Ti.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[f-o];o++);return Lr=h.slice(t,1<o?1-o:void 0)}function Pr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Xi(){return!0}function Kn(){return!1}function zt(t){function i(a,o,h,f,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xi:Kn,this.isPropagationStopped=Kn,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=zt($i),js=A({},$i,{view:0,detail:0}),qo=zt(js),Ms,Ca,bi,xa=A({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(Ms=t.screenX-bi.screenX,Ca=t.screenY-bi.screenY):Ca=Ms=0,bi=t),Ms)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),Ho=zt(xa),Ur=A({},xa,{dataTransfer:0}),wc=zt(Ur),bc=A({},js,{relatedTarget:0}),zr=zt(bc),Fo=A({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Ac=zt(Fo),Ra=A({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sc=zt(Ra),Cc=A({},$i,{data:0}),Ai=zt(Cc),xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ic(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Nc[t])?!!i[t]:!1}function Vs(){return Ic}var tn=A({},js,{key:function(t){if(t.key){var i=xc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Pr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?Pr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dc=zt(tn),Oc=A({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wi=zt(Oc),u=A({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),g=zt(u),v=A({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=zt(v),L=A({},xa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=zt(L),te=A({},$i,{newState:0,oldState:0}),we=zt(te),mt=[9,13,27,32],ze=In&&"CompositionEvent"in window,rt=null;In&&"documentMode"in document&&(rt=document.documentMode);var Dn=In&&"TextEvent"in window&&!rt,Si=In&&(!ze||rt&&8<rt&&11>=rt),Yn=" ",Xn=!1;function Br(t,i){switch(t){case"keyup":return mt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Na(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function b2(t,i){switch(t){case"compositionend":return Na(i);case"keypress":return i.which!==32?null:(Xn=!0,Yn);case"textInput":return t=i.data,t===Yn&&Xn?null:t;default:return null}}function A2(t,i){if(Ia)return t==="compositionend"||!ze&&Br(t,i)?(t=Bo(),Lr=zo=Ti=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Si&&i.locale!=="ko"?null:i.data;default:return null}}var S2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!S2[t.type]:i==="textarea"}function kp(t,i,a,o){Ds?Ei?Ei.push(o):Ei=[o]:Ds=o,i=Tu(i,"onChange"),0<i.length&&(a=new wi("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Go=null,Qo=null;function C2(t){__(t,0)}function jc(t){var i=pn(t);if(jr(i))return t}function Lp(t,i){if(t==="change")return i}var Pp=!1;if(In){var Jh;if(In){var ed="oninput"in document;if(!ed){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),ed=typeof Up.oninput=="function"}Jh=ed}else Jh=!1;Pp=Jh&&(!document.documentMode||9<document.documentMode)}function zp(){Go&&(Go.detachEvent("onpropertychange",Bp),Qo=Go=null)}function Bp(t){if(t.propertyName==="value"&&jc(Qo)){var i=[];kp(i,Qo,t,Nn(t)),Os(C2,i)}}function x2(t,i,a){t==="focusin"?(zp(),Go=i,Qo=a,Go.attachEvent("onpropertychange",Bp)):t==="focusout"&&zp()}function R2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(Qo)}function N2(t,i){if(t==="click")return jc(i)}function I2(t,i){if(t==="input"||t==="change")return jc(i)}function D2(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var yn=typeof Object.is=="function"?Object.is:D2;function Ko(t,i){if(yn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ht.call(i,h)||!yn(t[h],i[h]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,i){var a=qp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qp(a)}}function Fp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Fp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=vi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=vi(t.document)}return i}function td(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var O2=In&&"documentMode"in document&&11>=document.documentMode,Da=null,nd=null,Yo=null,id=!1;function Qp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||Da==null||Da!==vi(o)||(o=Da,"selectionStart"in o&&td(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Yo&&Ko(Yo,o)||(Yo=o,o=Tu(nd,"onSelect"),0<o.length&&(i=new wi("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Da)))}function qr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},sd={},Kp={};In&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Hr(t){if(sd[t])return sd[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Kp)return sd[t]=i[a];return t}var Yp=Hr("animationend"),Xp=Hr("animationiteration"),$p=Hr("animationstart"),j2=Hr("transitionrun"),M2=Hr("transitionstart"),V2=Hr("transitioncancel"),Wp=Hr("transitionend"),Zp=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function $n(t,i){Zp.set(t,i),yi(i,[t])}var Mc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],ja=0,ad=0;function Vc(){for(var t=ja,i=ad=ja=0;i<t;){var a=On[i];On[i++]=null;var o=On[i];On[i++]=null;var h=On[i];On[i++]=null;var f=On[i];if(On[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&Jp(a,h,f)}}function kc(t,i,a,o){On[ja++]=t,On[ja++]=i,On[ja++]=a,On[ja++]=o,ad|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function od(t,i,a,o){return kc(t,i,a,o),Lc(t)}function Fr(t,i){return kc(t,null,null,i),Lc(t)}function Jp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-st(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Lc(t){if(50<gl)throw gl=0,yf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ma={};function k2(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,i,a,o){return new k2(t,i,a,o)}function ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zi(t,i){var a=t.alternate;return a===null?(a=_n(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Pc(t,i,a,o,h,f){var _=0;if(o=t,typeof t=="function")ld(t)&&(_=1);else if(typeof t=="string")_=BT(t,a,tt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=_n(31,a,i,h),t.elementType=N,t.lanes=f,t;case J:return Gr(a.children,h,f,i);case k:_=8,h|=24;break;case U:return t=_n(12,a,i,h|2),t.elementType=U,t.lanes=f,t;case ee:return t=_n(13,a,i,h),t.elementType=ee,t.lanes=f,t;case ce:return t=_n(19,a,i,h),t.elementType=ce,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:_=10;break e;case oe:_=9;break e;case ie:_=11;break e;case D:_=14;break e;case S:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=_n(_,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function Gr(t,i,a,o){return t=_n(7,t,o,i),t.lanes=a,t}function cd(t,i,a){return t=_n(6,t,null,i),t.lanes=a,t}function tg(t){var i=_n(18,null,null,0);return i.stateNode=t,i}function ud(t,i,a){return i=_n(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ng=new WeakMap;function jn(t,i){if(typeof t=="object"&&t!==null){var a=ng.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Cr(i)},ng.set(t,i),i)}return{value:t,source:i,stack:Cr(i)}}var Va=[],ka=0,Uc=null,Xo=0,Mn=[],Vn=0,ks=null,Ci=1,xi="";function Ji(t,i){Va[ka++]=Xo,Va[ka++]=Uc,Uc=t,Xo=i}function ig(t,i,a){Mn[Vn++]=Ci,Mn[Vn++]=xi,Mn[Vn++]=ks,ks=t;var o=Ci;t=xi;var h=32-st(o)-1;o&=~(1<<h),a+=1;var f=32-st(i)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ci=1<<32-st(i)+h|a<<h|o,xi=f+t}else Ci=1<<f|a<<h|o,xi=t}function hd(t){t.return!==null&&(Ji(t,1),ig(t,1,0))}function dd(t){for(;t===Uc;)Uc=Va[--ka],Va[ka]=null,Xo=Va[--ka],Va[ka]=null;for(;t===ks;)ks=Mn[--Vn],Mn[Vn]=null,xi=Mn[--Vn],Mn[Vn]=null,Ci=Mn[--Vn],Mn[Vn]=null}function sg(t,i){Mn[Vn++]=Ci,Mn[Vn++]=xi,Mn[Vn++]=ks,Ci=i.id,xi=i.overflow,ks=t}var Bt=null,nt=null,Ve=!1,Ls=null,kn=!1,fd=Error(r(519));function Ps(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(jn(i,t)),fd}function rg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[wt]=t,i[Vt]=o,a){case"dialog":Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":case"embed":Ne("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)Ne(_l[a],i);break;case"source":Ne("error",i);break;case"img":case"image":case"link":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"input":Ne("invalid",i),_c(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ne("invalid",i);break;case"textarea":Ne("invalid",i),Ns(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||w_(i.textContent,a)?(o.popover!=null&&(Ne("beforetoggle",i),Ne("toggle",i)),o.onScroll!=null&&Ne("scroll",i),o.onScrollEnd!=null&&Ne("scrollend",i),o.onClick!=null&&(i.onclick=Gn),i=!0):i=!1,i||Ps(t,!0)}function ag(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Bt=Bt.return}}function La(t){if(t!==Bt)return!1;if(!Ve)return ag(t),Ve=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Of(t.type,t.memoizedProps)),a=!a),a&&nt&&Ps(t),ag(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=D_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=D_(t)}else i===27?(i=nt,Zs(t.type)?(t=Lf,Lf=null,nt=t):nt=i):nt=Bt?Pn(t.stateNode.nextSibling):null;return!0}function Qr(){nt=Bt=null,Ve=!1}function md(){var t=Ls;return t!==null&&(un===null?un=t:un.push.apply(un,t),Ls=null),t}function $o(t){Ls===null?Ls=[t]:Ls.push(t)}var pd=Ke(null),Kr=null,es=null;function Us(t,i,a){Ae(pd,i._currentValue),i._currentValue=a}function ts(t){t._currentValue=pd.current,Le(pd)}function gd(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function yd(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var I=0;I<i.length;I++)if(w.context===i[I]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),gd(f.return,a,t),o||(_=null);break e}f=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),gd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Pa(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var w=h.type;yn(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===xn.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(bl):t=[bl])}h=h.return}t!==null&&yd(i,t,a,o),i.flags|=262144}function zc(t){for(t=t.firstContext;t!==null;){if(!yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Yr(t){Kr=t,es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qt(t){return og(Kr,t)}function Bc(t,i){return Kr===null&&Yr(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},es===null){if(t===null)throw Error(r(308));es=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else es=es.next=i;return a}var L2=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},P2=s.unstable_scheduleCallback,U2=s.unstable_NormalPriority,St={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new L2,data:new Map,refCount:0}}function Wo(t){t.refCount--,t.refCount===0&&P2(U2,function(){t.controller.abort()})}var Zo=null,vd=0,Ua=0,za=null;function z2(t,i){if(Zo===null){var a=Zo=[];vd=0,Ua=bf(),za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return vd++,i.then(lg,lg),i}function lg(){if(--vd===0&&Zo!==null){za!==null&&(za.status="fulfilled");var t=Zo;Zo=null,Ua=0,za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function B2(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var cg=Q.S;Q.S=function(t,i){Qy=Mt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&z2(t,i),cg!==null&&cg(t,i)};var Xr=Ke(null);function Ed(){var t=Xr.current;return t!==null?t:Je.pooledCache}function qc(t,i){i===null?Ae(Xr,Xr.current):Ae(Xr,i.pool)}function ug(){var t=Ed();return t===null?null:{parent:St._currentValue,pool:t}}var Ba=Error(r(460)),Td=Error(r(474)),Hc=Error(r(542)),Fc={then:function(){}};function hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Gn,Gn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t;default:if(typeof i.status=="string")i.then(Gn,Gn);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t}throw Wr=i,Ba}}function $r(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Wr=a,Ba):a}}var Wr=null;function fg(){if(Wr===null)throw Error(r(459));var t=Wr;return Wr=null,t}function mg(t){if(t===Ba||t===Hc)throw Error(r(483))}var qa=null,Jo=0;function Gc(t){var i=Jo;return Jo+=1,qa===null&&(qa=[]),dg(qa,t,i)}function el(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Qc(t,i){throw i.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function pg(t){function i(V,O){if(t){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function a(V,O){if(!t)return null;for(;O!==null;)i(V,O),O=O.sibling;return null}function o(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function h(V,O){return V=Zi(V,O),V.index=0,V.sibling=null,V}function f(V,O,z){return V.index=z,t?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=67108866,O):z):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function w(V,O,z,Y){return O===null||O.tag!==6?(O=cd(z,V.mode,Y),O.return=V,O):(O=h(O,z),O.return=V,O)}function I(V,O,z,Y){var fe=z.type;return fe===J?G(V,O,z.props.children,Y,z.key):O!==null&&(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===S&&$r(fe)===O.type)?(O=h(O,z.props),el(O,z),O.return=V,O):(O=Pc(z.type,z.key,z.props,null,V.mode,Y),el(O,z),O.return=V,O)}function B(V,O,z,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ud(z,V.mode,Y),O.return=V,O):(O=h(O,z.children||[]),O.return=V,O)}function G(V,O,z,Y,fe){return O===null||O.tag!==7?(O=Gr(z,V.mode,Y,fe),O.return=V,O):(O=h(O,z),O.return=V,O)}function X(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=cd(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return z=Pc(O.type,O.key,O.props,null,V.mode,z),el(z,O),z.return=V,z;case K:return O=ud(O,V.mode,z),O.return=V,O;case S:return O=$r(O),X(V,O,z)}if(He(O)||j(O))return O=Gr(O,V.mode,z,null),O.return=V,O;if(typeof O.then=="function")return X(V,Gc(O),z);if(O.$$typeof===Z)return X(V,Bc(V,O),z);Qc(V,O)}return null}function q(V,O,z,Y){var fe=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:w(V,O,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return z.key===fe?I(V,O,z,Y):null;case K:return z.key===fe?B(V,O,z,Y):null;case S:return z=$r(z),q(V,O,z,Y)}if(He(z)||j(z))return fe!==null?null:G(V,O,z,Y,null);if(typeof z.then=="function")return q(V,O,Gc(z),Y);if(z.$$typeof===Z)return q(V,O,Bc(V,z),Y);Qc(V,z)}return null}function F(V,O,z,Y,fe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(z)||null,w(O,V,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return V=V.get(Y.key===null?z:Y.key)||null,I(O,V,Y,fe);case K:return V=V.get(Y.key===null?z:Y.key)||null,B(O,V,Y,fe);case S:return Y=$r(Y),F(V,O,z,Y,fe)}if(He(Y)||j(Y))return V=V.get(z)||null,G(O,V,Y,fe,null);if(typeof Y.then=="function")return F(V,O,z,Gc(Y),fe);if(Y.$$typeof===Z)return F(V,O,z,Bc(O,Y),fe);Qc(O,Y)}return null}function ue(V,O,z,Y){for(var fe=null,Pe=null,de=O,Se=O=0,De=null;de!==null&&Se<z.length;Se++){de.index>Se?(De=de,de=null):De=de.sibling;var Ue=q(V,de,z[Se],Y);if(Ue===null){de===null&&(de=De);break}t&&de&&Ue.alternate===null&&i(V,de),O=f(Ue,O,Se),Pe===null?fe=Ue:Pe.sibling=Ue,Pe=Ue,de=De}if(Se===z.length)return a(V,de),Ve&&Ji(V,Se),fe;if(de===null){for(;Se<z.length;Se++)de=X(V,z[Se],Y),de!==null&&(O=f(de,O,Se),Pe===null?fe=de:Pe.sibling=de,Pe=de);return Ve&&Ji(V,Se),fe}for(de=o(de);Se<z.length;Se++)De=F(de,V,Se,z[Se],Y),De!==null&&(t&&De.alternate!==null&&de.delete(De.key===null?Se:De.key),O=f(De,O,Se),Pe===null?fe=De:Pe.sibling=De,Pe=De);return t&&de.forEach(function(ir){return i(V,ir)}),Ve&&Ji(V,Se),fe}function pe(V,O,z,Y){if(z==null)throw Error(r(151));for(var fe=null,Pe=null,de=O,Se=O=0,De=null,Ue=z.next();de!==null&&!Ue.done;Se++,Ue=z.next()){de.index>Se?(De=de,de=null):De=de.sibling;var ir=q(V,de,Ue.value,Y);if(ir===null){de===null&&(de=De);break}t&&de&&ir.alternate===null&&i(V,de),O=f(ir,O,Se),Pe===null?fe=ir:Pe.sibling=ir,Pe=ir,de=De}if(Ue.done)return a(V,de),Ve&&Ji(V,Se),fe;if(de===null){for(;!Ue.done;Se++,Ue=z.next())Ue=X(V,Ue.value,Y),Ue!==null&&(O=f(Ue,O,Se),Pe===null?fe=Ue:Pe.sibling=Ue,Pe=Ue);return Ve&&Ji(V,Se),fe}for(de=o(de);!Ue.done;Se++,Ue=z.next())Ue=F(de,V,Se,Ue.value,Y),Ue!==null&&(t&&Ue.alternate!==null&&de.delete(Ue.key===null?Se:Ue.key),O=f(Ue,O,Se),Pe===null?fe=Ue:Pe.sibling=Ue,Pe=Ue);return t&&de.forEach(function(ZT){return i(V,ZT)}),Ve&&Ji(V,Se),fe}function We(V,O,z,Y){if(typeof z=="object"&&z!==null&&z.type===J&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case P:e:{for(var fe=z.key;O!==null;){if(O.key===fe){if(fe=z.type,fe===J){if(O.tag===7){a(V,O.sibling),Y=h(O,z.props.children),Y.return=V,V=Y;break e}}else if(O.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===S&&$r(fe)===O.type){a(V,O.sibling),Y=h(O,z.props),el(Y,z),Y.return=V,V=Y;break e}a(V,O);break}else i(V,O);O=O.sibling}z.type===J?(Y=Gr(z.props.children,V.mode,Y,z.key),Y.return=V,V=Y):(Y=Pc(z.type,z.key,z.props,null,V.mode,Y),el(Y,z),Y.return=V,V=Y)}return _(V);case K:e:{for(fe=z.key;O!==null;){if(O.key===fe)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(V,O.sibling),Y=h(O,z.children||[]),Y.return=V,V=Y;break e}else{a(V,O);break}else i(V,O);O=O.sibling}Y=ud(z,V.mode,Y),Y.return=V,V=Y}return _(V);case S:return z=$r(z),We(V,O,z,Y)}if(He(z))return ue(V,O,z,Y);if(j(z)){if(fe=j(z),typeof fe!="function")throw Error(r(150));return z=fe.call(z),pe(V,O,z,Y)}if(typeof z.then=="function")return We(V,O,Gc(z),Y);if(z.$$typeof===Z)return We(V,O,Bc(V,z),Y);Qc(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(V,O.sibling),Y=h(O,z),Y.return=V,V=Y):(a(V,O),Y=cd(z,V.mode,Y),Y.return=V,V=Y),_(V)):a(V,O)}return function(V,O,z,Y){try{Jo=0;var fe=We(V,O,z,Y);return qa=null,fe}catch(de){if(de===Ba||de===Hc)throw de;var Pe=_n(29,de,null,V.mode);return Pe.lanes=Y,Pe.return=V,Pe}finally{}}}var Zr=pg(!0),gg=pg(!1),zs=!1;function wd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Bs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qs(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Be&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Lc(t),Jp(t,null,a),i}return kc(t,o,i,a),Lc(t)}function tl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Ro(t,a)}}function Ad(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Sd=!1;function nl(){if(Sd){var t=za;if(t!==null)throw t}}function il(t,i,a,o){Sd=!1;var h=t.updateQueue;zs=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var I=w,B=I.next;I.next=null,_===null?f=B:_.next=B,_=I;var G=t.alternate;G!==null&&(G=G.updateQueue,w=G.lastBaseUpdate,w!==_&&(w===null?G.firstBaseUpdate=B:w.next=B,G.lastBaseUpdate=I))}if(f!==null){var X=h.baseState;_=0,G=B=I=null,w=f;do{var q=w.lane&-536870913,F=q!==w.lane;if(F?(Ie&q)===q:(o&q)===q){q!==0&&q===Ua&&(Sd=!0),G!==null&&(G=G.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ue=t,pe=w;q=i;var We=a;switch(pe.tag){case 1:if(ue=pe.payload,typeof ue=="function"){X=ue.call(We,X,q);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=pe.payload,q=typeof ue=="function"?ue.call(We,X,q):ue,q==null)break e;X=A({},X,q);break e;case 2:zs=!0}}q=w.callback,q!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[q]:F.push(q))}else F={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},G===null?(B=G=F,I=X):G=G.next=F,_|=q;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;F=w,w=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);G===null&&(I=X),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),Ks|=_,t.lanes=_,t.memoizedState=X}}function yg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function _g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yg(a[t],i)}var Ha=Ke(null),Kc=Ke(0);function vg(t,i){t=us,Ae(Kc,t),Ae(Ha,i),us=t|i.baseLanes}function Cd(){Ae(Kc,us),Ae(Ha,Ha.current)}function xd(){us=Kc.current,Le(Ha),Le(Kc)}var vn=Ke(null),Ln=null;function Hs(t){var i=t.alternate;Ae(pt,pt.current&1),Ae(vn,t),Ln===null&&(i===null||Ha.current!==null||i.memoizedState!==null)&&(Ln=t)}function Rd(t){Ae(pt,pt.current),Ae(vn,t),Ln===null&&(Ln=t)}function Eg(t){t.tag===22?(Ae(pt,pt.current),Ae(vn,t),Ln===null&&(Ln=t)):Fs()}function Fs(){Ae(pt,pt.current),Ae(vn,vn.current)}function En(t){Le(vn),Ln===t&&(Ln=null),Le(pt)}var pt=Ke(0);function Yc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vf(a)||kf(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ns=0,be=null,Xe=null,Ct=null,Xc=!1,Fa=!1,Jr=!1,$c=0,sl=0,Ga=null,q2=0;function lt(){throw Error(r(321))}function Nd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!yn(t[a],i[a]))return!1;return!0}function Id(t,i,a,o,h,f){return ns=f,be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?iy:Gd,Jr=!1,f=a(o,h),Jr=!1,Fa&&(f=wg(i,a,o,h)),Tg(t),f}function Tg(t){Q.H=ol;var i=Xe!==null&&Xe.next!==null;if(ns=0,Ct=Xe=be=null,Xc=!1,sl=0,Ga=null,i)throw Error(r(300));t===null||xt||(t=t.dependencies,t!==null&&zc(t)&&(xt=!0))}function wg(t,i,a,o){be=t;var h=0;do{if(Fa&&(Ga=null),sl=0,Fa=!1,25<=h)throw Error(r(301));if(h+=1,Ct=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=sy,f=i(a,o)}while(Fa);return f}function H2(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?rl(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(be.flags|=1024),i}function Dd(){var t=$c!==0;return $c=0,t}function Od(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function jd(t){if(Xc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Xc=!1}ns=0,Ct=Xe=be=null,Fa=!1,sl=$c=0,Ga=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?be.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function gt(){if(Xe===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=Ct===null?be.memoizedState:Ct.next;if(i!==null)Ct=i,Xe=t;else{if(t===null)throw be.alternate===null?Error(r(467)):Error(r(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ct===null?be.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(t){var i=sl;return sl+=1,Ga===null&&(Ga=[]),t=dg(Ga,t,i),i=be,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?iy:Gd),t}function Zc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rl(t);if(t.$$typeof===Z)return qt(t)}throw Error(r(438,String(t)))}function Md(t){var i=null,a=be.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=be.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wc(),be.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=M;return i.index++,a}function is(t,i){return typeof i=="function"?i(t):i}function Jc(t){var i=gt();return Vd(i,Xe,t)}function Vd(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var w=_=null,I=null,B=i,G=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(Ie&X)===X:(ns&X)===X){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===Ua&&(G=!0);else if((ns&q)===q){B=B.next,q===Ua&&(G=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(w=I=X,_=f):I=I.next=X,be.lanes|=q,Ks|=q;X=B.action,Jr&&a(f,X),f=B.hasEagerState?B.eagerState:a(f,X)}else q={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(w=I=q,_=f):I=I.next=q,be.lanes|=X,Ks|=X;B=B.next}while(B!==null&&B!==i);if(I===null?_=f:I.next=w,!yn(f,t.memoizedState)&&(xt=!0,G&&(a=za,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=I,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function kd(t){var i=gt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);yn(f,i.memoizedState)||(xt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function bg(t,i,a){var o=be,h=gt(),f=Ve;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!yn((Xe||h).memoizedState,a);if(_&&(h.memoizedState=a,xt=!0),h=h.queue,Ud(Cg.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||Ct!==null&&Ct.memoizedState.tag&1){if(o.flags|=2048,Qa(9,{destroy:void 0},Sg.bind(null,o,h,a,i),null),Je===null)throw Error(r(349));f||(ns&127)!==0||Ag(o,i,a)}return a}function Ag(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=be.updateQueue,i===null?(i=Wc(),be.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Sg(t,i,a,o){i.value=a,i.getSnapshot=o,xg(i)&&Rg(t)}function Cg(t,i,a){return a(function(){xg(i)&&Rg(t)})}function xg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!yn(t,a)}catch{return!0}}function Rg(t){var i=Fr(t,2);i!==null&&hn(i,t,2)}function Ld(t){var i=nn();if(typeof t=="function"){var a=t;if(t=a(),Jr){en(!0);try{a()}finally{en(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:t},i}function Ng(t,i,a,o){return t.baseState=a,Vd(t,Xe,typeof o=="function"?o:is)}function F2(t,i,a,o,h){if(nu(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};Q.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Ig(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Ig(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=Q.T,_={};Q.T=_;try{var w=a(h,o),I=Q.S;I!==null&&I(_,w),Dg(t,i,w)}catch(B){Pd(t,i,B)}finally{f!==null&&_.types!==null&&(f.types=_.types),Q.T=f}}else try{f=a(h,o),Dg(t,i,f)}catch(B){Pd(t,i,B)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Og(t,i,o)},function(o){return Pd(t,i,o)}):Og(t,i,a)}function Og(t,i,a){i.status="fulfilled",i.value=a,jg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ig(t,a)))}function Pd(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,jg(i),i=i.next;while(i!==o)}t.action=null}function jg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Mg(t,i){return i}function Vg(t,i){if(Ve){var a=Je.formState;if(a!==null){e:{var o=be;if(Ve){if(nt){t:{for(var h=nt,f=kn;h.nodeType!==8;){if(!f){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){nt=Pn(h.nextSibling),o=h.data==="F!";break e}}Ps(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:i},a.queue=o,a=ey.bind(null,be,o),o.dispatch=a,o=Ld(!1),f=Fd.bind(null,be,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=F2.bind(null,be,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function kg(t){var i=gt();return Lg(i,Xe,t)}function Lg(t,i,a){if(i=Vd(t,i,Mg)[0],t=Jc(is)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=rl(i)}catch(_){throw _===Ba?Hc:_}else o=i;i=gt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(be.flags|=2048,Qa(9,{destroy:void 0},G2.bind(null,h,a),null)),[o,f,t]}function G2(t,i){t.action=i}function Pg(t){var i=gt(),a=Xe;if(a!==null)return Lg(i,a,t);gt(),i=i.memoizedState,a=gt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Qa(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=be.updateQueue,i===null&&(i=Wc(),be.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Ug(){return gt().memoizedState}function eu(t,i,a,o){var h=nn();be.flags|=t,h.memoizedState=Qa(1|i,{destroy:void 0},a,o===void 0?null:o)}function tu(t,i,a,o){var h=gt();o=o===void 0?null:o;var f=h.memoizedState.inst;Xe!==null&&o!==null&&Nd(o,Xe.memoizedState.deps)?h.memoizedState=Qa(i,f,a,o):(be.flags|=t,h.memoizedState=Qa(1|i,f,a,o))}function zg(t,i){eu(8390656,8,t,i)}function Ud(t,i){tu(2048,8,t,i)}function Q2(t){be.flags|=4;var i=be.updateQueue;if(i===null)i=Wc(),be.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Bg(t){var i=gt().memoizedState;return Q2({ref:i,nextImpl:t}),function(){if((Be&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function qg(t,i){return tu(4,2,t,i)}function Hg(t,i){return tu(4,4,t,i)}function Fg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,a){a=a!=null?a.concat([t]):null,tu(4,4,Fg.bind(null,i,t),a)}function zd(){}function Qg(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Nd(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Kg(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Nd(i,o[1]))return o[0];if(o=t(),Jr){en(!0);try{t()}finally{en(!1)}}return a.memoizedState=[o,i],o}function Bd(t,i,a){return a===void 0||(ns&1073741824)!==0&&(Ie&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Yy(),be.lanes|=t,Ks|=t,a)}function Yg(t,i,a,o){return yn(a,i)?a:Ha.current!==null?(t=Bd(t,a,o),yn(t,i)||(xt=!0),t):(ns&42)===0||(ns&1073741824)!==0&&(Ie&261930)===0?(xt=!0,t.memoizedState=a):(t=Yy(),be.lanes|=t,Ks|=t,i)}function Xg(t,i,a,o,h){var f=ne.p;ne.p=f!==0&&8>f?f:8;var _=Q.T,w={};Q.T=w,Fd(t,!1,i,a);try{var I=h(),B=Q.S;if(B!==null&&B(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var G=B2(I,o);al(t,i,G,bn(t))}else al(t,i,o,bn(t))}catch(X){al(t,i,{then:function(){},status:"rejected",reason:X},bn())}finally{ne.p=f,_!==null&&w.types!==null&&(_.types=w.types),Q.T=_}}function K2(){}function qd(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=$g(t).queue;Xg(t,h,i,he,a===null?K2:function(){return Wg(t),a(o)})}function $g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Wg(t){var i=$g(t);i.next===null&&(i=t.alternate.memoizedState),al(t,i.next.queue,{},bn())}function Hd(){return qt(bl)}function Zg(){return gt().memoizedState}function Jg(){return gt().memoizedState}function Y2(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=bn();t=Bs(a);var o=qs(i,t,a);o!==null&&(hn(o,i,a),tl(o,i,a)),i={cache:_d()},t.payload=i;return}i=i.return}}function X2(t,i,a){var o=bn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},nu(t)?ty(i,a):(a=od(t,i,a,o),a!==null&&(hn(a,t,o),ny(a,i,o)))}function ey(t,i,a){var o=bn();al(t,i,a,o)}function al(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(t))ty(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,w=f(_,a);if(h.hasEagerState=!0,h.eagerState=w,yn(w,_))return kc(t,i,h,0),Je===null&&Vc(),!1}catch{}finally{}if(a=od(t,i,h,o),a!==null)return hn(a,t,o),ny(a,i,o),!0}return!1}function Fd(t,i,a,o){if(o={lane:2,revertLane:bf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(i)throw Error(r(479))}else i=od(t,a,o,2),i!==null&&hn(i,t,2)}function nu(t){var i=t.alternate;return t===be||i!==null&&i===be}function ty(t,i){Fa=Xc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ny(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Ro(t,a)}}var ol={readContext:qt,use:Zc,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};ol.useEffectEvent=lt;var iy={readContext:qt,use:Zc,useCallback:function(t,i){return nn().memoizedState=[t,i===void 0?null:i],t},useContext:qt,useEffect:zg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,eu(4194308,4,Fg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return eu(4194308,4,t,i)},useInsertionEffect:function(t,i){eu(4,2,t,i)},useMemo:function(t,i){var a=nn();i=i===void 0?null:i;var o=t();if(Jr){en(!0);try{t()}finally{en(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=nn();if(a!==void 0){var h=a(i);if(Jr){en(!0);try{a(i)}finally{en(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=X2.bind(null,be,t),[o.memoizedState,t]},useRef:function(t){var i=nn();return t={current:t},i.memoizedState=t},useState:function(t){t=Ld(t);var i=t.queue,a=ey.bind(null,be,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:zd,useDeferredValue:function(t,i){var a=nn();return Bd(a,t,i)},useTransition:function(){var t=Ld(!1);return t=Xg.bind(null,be,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=be,h=nn();if(Ve){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Je===null)throw Error(r(349));(Ie&127)!==0||Ag(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,zg(Cg.bind(null,o,f,t),[t]),o.flags|=2048,Qa(9,{destroy:void 0},Sg.bind(null,o,f,a,i),null),a},useId:function(){var t=nn(),i=Je.identifierPrefix;if(Ve){var a=xi,o=Ci;a=(o&~(1<<32-st(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=$c++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=q2++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Hd,useFormState:Vg,useActionState:Vg,useOptimistic:function(t){var i=nn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Fd.bind(null,be,!0,a),a.dispatch=i,[t,i]},useMemoCache:Md,useCacheRefresh:function(){return nn().memoizedState=Y2.bind(null,be)},useEffectEvent:function(t){var i=nn(),a={impl:t};return i.memoizedState=a,function(){if((Be&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Gd={readContext:qt,use:Zc,useCallback:Qg,useContext:qt,useEffect:Ud,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:Jc,useRef:Ug,useState:function(){return Jc(is)},useDebugValue:zd,useDeferredValue:function(t,i){var a=gt();return Yg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Jc(is)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:bg,useId:Zg,useHostTransitionStatus:Hd,useFormState:kg,useActionState:kg,useOptimistic:function(t,i){var a=gt();return Ng(a,Xe,t,i)},useMemoCache:Md,useCacheRefresh:Jg};Gd.useEffectEvent=Bg;var sy={readContext:qt,use:Zc,useCallback:Qg,useContext:qt,useEffect:Ud,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Hg,useMemo:Kg,useReducer:kd,useRef:Ug,useState:function(){return kd(is)},useDebugValue:zd,useDeferredValue:function(t,i){var a=gt();return Xe===null?Bd(a,t,i):Yg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=kd(is)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:bg,useId:Zg,useHostTransitionStatus:Hd,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=gt();return Xe!==null?Ng(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Md,useCacheRefresh:Jg};sy.useEffectEvent=Bg;function Qd(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Kd={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=bn(),h=Bs(o);h.payload=i,a!=null&&(h.callback=a),i=qs(t,h,o),i!==null&&(hn(i,t,o),tl(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=bn(),h=Bs(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=qs(t,h,o),i!==null&&(hn(i,t,o),tl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=bn(),o=Bs(a);o.tag=2,i!=null&&(o.callback=i),i=qs(t,o,a),i!==null&&(hn(i,t,a),tl(i,t,a))}};function ry(t,i,a,o,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,_):i.prototype&&i.prototype.isPureReactComponent?!Ko(a,o)||!Ko(h,f):!0}function ay(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Kd.enqueueReplaceState(i,i.state,null)}function ea(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function oy(t){Mc(t)}function ly(t){console.error(t)}function cy(t){Mc(t)}function iu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function uy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Yd(t,i,a){return a=Bs(a),a.tag=3,a.payload={element:null},a.callback=function(){iu(t,i)},a}function hy(t){return t=Bs(t),t.tag=3,t}function dy(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){uy(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){uy(i,a,o),typeof h!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function $2(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Pa(i,a,h,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return Ln===null?pu():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Fc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Ef(t,o,h)),!1;case 22:return a.flags|=65536,o===Fc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Ef(t,o,h)),!1}throw Error(r(435,a.tag))}return Ef(t,o,h),pu(),!1}if(Ve)return i=vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==fd&&(t=Error(r(422),{cause:o}),$o(jn(t,a)))):(o!==fd&&(i=Error(r(423),{cause:o}),$o(jn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=jn(o,a),h=Yd(t.stateNode,o,h),Ad(t,h),ct!==4&&(ct=2)),!1;var f=Error(r(520),{cause:o});if(f=jn(f,a),pl===null?pl=[f]:pl.push(f),ct!==4&&(ct=2),i===null)return!0;o=jn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Yd(a.stateNode,o,t),Ad(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ys===null||!Ys.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),dy(h,t,a,o),Ad(a,h),!1}a=a.return}while(a!==null);return!1}var Xd=Error(r(461)),xt=!1;function Ht(t,i,a,o){i.child=t===null?gg(i,null,a,o):Zr(i,t.child,a,o)}function fy(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var _={};for(var w in o)w!=="ref"&&(_[w]=o[w])}else _=o;return Yr(i),o=Id(t,i,a,_,f,h),w=Dd(),t!==null&&!xt?(Od(t,i,h),ss(t,i,h)):(Ve&&w&&hd(i),i.flags|=1,Ht(t,i,o,h),i.child)}function my(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!ld(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,py(t,i,f,o,h)):(t=Pc(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!sf(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:Ko,a(_,o)&&t.ref===i.ref)return ss(t,i,h)}return i.flags|=1,t=Zi(f,o),t.ref=i.ref,t.return=i,i.child=t}function py(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(Ko(f,o)&&t.ref===i.ref)if(xt=!1,i.pendingProps=o=f,sf(t,h))(t.flags&131072)!==0&&(xt=!0);else return i.lanes=t.lanes,ss(t,i,h)}return $d(t,i,a,o,h)}function gy(t,i,a,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,i.child=null;return yy(t,i,f,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&qc(i,f!==null?f.cachePool:null),f!==null?vg(i,f):Cd(),Eg(i);else return o=i.lanes=536870912,yy(t,i,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(qc(i,f.cachePool),vg(i,f),Fs(),i.memoizedState=null):(t!==null&&qc(i,null),Cd(),Fs());return Ht(t,i,h,a),i.child}function ll(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yy(t,i,a,o,h){var f=Ed();return f=f===null?null:{parent:St._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&qc(i,null),Cd(),Eg(i),t!==null&&Pa(t,i,o,!0),i.childLanes=h,null}function su(t,i){return i=au({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function _y(t,i,a){return Zr(i,t.child,null,a),t=su(i,i.pendingProps),t.flags|=2,En(i),i.memoizedState=null,t}function W2(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ve){if(o.mode==="hidden")return t=su(i,o),i.lanes=536870912,ll(null,t);if(Rd(i),(t=nt)?(t=I_(t,kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Bt=i,nt=null)):t=null,t===null)throw Ps(i);return i.lanes=536870912,null}return su(i,o)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Rd(i),h)if(i.flags&256)i.flags&=-257,i=_y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(xt||Pa(t,i,a,!1),h=(a&t.childLanes)!==0,xt||h){if(o=Je,o!==null&&(_=No(o,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Fr(t,_),hn(o,t,_),Xd;pu(),i=_y(t,i,a)}else t=f.treeContext,nt=Pn(_.nextSibling),Bt=i,Ve=!0,Ls=null,kn=!1,t!==null&&sg(i,t),i=su(i,o),i.flags|=4096;return i}return t=Zi(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ru(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function $d(t,i,a,o,h){return Yr(i),a=Id(t,i,a,o,void 0,h),o=Dd(),t!==null&&!xt?(Od(t,i,h),ss(t,i,h)):(Ve&&o&&hd(i),i.flags|=1,Ht(t,i,a,h),i.child)}function vy(t,i,a,o,h,f){return Yr(i),i.updateQueue=null,a=wg(i,o,a,h),Tg(t),o=Dd(),t!==null&&!xt?(Od(t,i,f),ss(t,i,f)):(Ve&&o&&hd(i),i.flags|=1,Ht(t,i,a,f),i.child)}function Ey(t,i,a,o,h){if(Yr(i),i.stateNode===null){var f=Ma,_=a.contextType;typeof _=="object"&&_!==null&&(f=qt(_)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Kd,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},wd(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?qt(_):Ma,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Qd(i,a,_,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Kd.enqueueReplaceState(f,f.state,null),il(i,o,f,h),nl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var w=i.memoizedProps,I=ea(a,w);f.props=I;var B=f.context,G=a.contextType;_=Ma,typeof G=="object"&&G!==null&&(_=qt(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||B!==_)&&ay(i,f,o,_),zs=!1;var q=i.memoizedState;f.state=q,il(i,o,f,h),nl(),B=i.memoizedState,w||q!==B||zs?(typeof X=="function"&&(Qd(i,a,X,o),B=i.memoizedState),(I=zs||ry(i,a,I,o,q,B,_))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=_,o=I):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,bd(t,i),_=i.memoizedProps,G=ea(a,_),f.props=G,X=i.pendingProps,q=f.context,B=a.contextType,I=Ma,typeof B=="object"&&B!==null&&(I=qt(B)),w=a.getDerivedStateFromProps,(B=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==X||q!==I)&&ay(i,f,o,I),zs=!1,q=i.memoizedState,f.state=q,il(i,o,f,h),nl();var F=i.memoizedState;_!==X||q!==F||zs||t!==null&&t.dependencies!==null&&zc(t.dependencies)?(typeof w=="function"&&(Qd(i,a,w,o),F=i.memoizedState),(G=zs||ry(i,a,G,o,q,F,I)||t!==null&&t.dependencies!==null&&zc(t.dependencies))?(B||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,F,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,F,I)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=F),f.props=o,f.state=F,f.context=I,o=G):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,ru(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Zr(i,t.child,null,h),i.child=Zr(i,null,a,h)):Ht(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ss(t,i,h),t}function Ty(t,i,a,o){return Qr(),i.flags|=256,Ht(t,i,a,o),i.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(t){return{baseLanes:t,cachePool:ug()}}function Jd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=wn),t}function wy(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ve){if(h?Hs(i):Fs(),(t=nt)?(t=I_(t,kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Ci,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,Bt=i,nt=null)):t=null,t===null)throw Ps(i);return kf(t)?i.lanes=32:i.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(Fs(),h=i.mode,w=au({mode:"hidden",children:w},h),o=Gr(o,h,a,null),w.return=i,o.return=i,w.sibling=o,i.child=w,o=i.child,o.memoizedState=Zd(a),o.childLanes=Jd(t,_,a),i.memoizedState=Wd,ll(null,o)):(Hs(i),ef(i,w))}var I=t.memoizedState;if(I!==null&&(w=I.dehydrated,w!==null)){if(f)i.flags&256?(Hs(i),i.flags&=-257,i=tf(t,i,a)):i.memoizedState!==null?(Fs(),i.child=t.child,i.flags|=128,i=null):(Fs(),w=o.fallback,h=i.mode,o=au({mode:"visible",children:o.children},h),w=Gr(w,h,a,null),w.flags|=2,o.return=i,w.return=i,o.sibling=w,i.child=o,Zr(i,t.child,null,a),o=i.child,o.memoizedState=Zd(a),o.childLanes=Jd(t,_,a),i.memoizedState=Wd,i=ll(null,o));else if(Hs(i),kf(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(r(419)),o.stack="",o.digest=_,$o({value:o,source:null,stack:null}),i=tf(t,i,a)}else if(xt||Pa(t,i,a,!1),_=(a&t.childLanes)!==0,xt||_){if(_=Je,_!==null&&(o=No(_,a),o!==0&&o!==I.retryLane))throw I.retryLane=o,Fr(t,o),hn(_,t,o),Xd;Vf(w)||pu(),i=tf(t,i,a)}else Vf(w)?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,nt=Pn(w.nextSibling),Bt=i,Ve=!0,Ls=null,kn=!1,t!==null&&sg(i,t),i=ef(i,o.children),i.flags|=4096);return i}return h?(Fs(),w=o.fallback,h=i.mode,I=t.child,B=I.sibling,o=Zi(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,B!==null?w=Zi(B,w):(w=Gr(w,h,a,null),w.flags|=2),w.return=i,o.return=i,o.sibling=w,i.child=o,ll(null,o),o=i.child,w=t.child.memoizedState,w===null?w=Zd(a):(h=w.cachePool,h!==null?(I=St._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=ug(),w={baseLanes:w.baseLanes|a,cachePool:h}),o.memoizedState=w,o.childLanes=Jd(t,_,a),i.memoizedState=Wd,ll(t.child,o)):(Hs(i),a=t.child,t=a.sibling,a=Zi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function ef(t,i){return i=au({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function au(t,i){return t=_n(22,t,null,i),t.lanes=0,t}function tf(t,i,a){return Zr(i,t.child,null,a),t=ef(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function by(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),gd(t.return,i,a)}function nf(t,i,a,o,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function Ay(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var _=pt.current,w=(_&2)!==0;if(w?(_=_&1|2,i.flags|=128):_&=1,Ae(pt,_),Ht(t,i,o,a),o=Ve?Xo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&by(t,a,i);else if(t.tag===19)by(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Yc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),nf(i,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Yc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}nf(i,!0,a,null,f,o);break;case"together":nf(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function ss(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ks|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Pa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Zi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Zi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function sf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&zc(t)))}function Z2(t,i,a){switch(i.tag){case 3:ri(i,i.stateNode.containerInfo),Us(i,St,t.memoizedState.cache),Qr();break;case 27:case 5:Sr(i);break;case 4:ri(i,i.stateNode.containerInfo);break;case 10:Us(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Rd(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Hs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?wy(t,i,a):(Hs(i),t=ss(t,i,a),t!==null?t.sibling:null);Hs(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Pa(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Ay(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ae(pt,pt.current),o)break;return null;case 22:return i.lanes=0,gy(t,i,a,i.pendingProps);case 24:Us(i,St,t.memoizedState.cache)}return ss(t,i,a)}function Sy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)xt=!0;else{if(!sf(t,a)&&(i.flags&128)===0)return xt=!1,Z2(t,i,a);xt=(t.flags&131072)!==0}else xt=!1,Ve&&(i.flags&1048576)!==0&&ig(i,Xo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=$r(i.elementType),i.type=t,typeof t=="function")ld(t)?(o=ea(t,o),i.tag=1,i=Ey(null,i,t,o,a)):(i.tag=0,i=$d(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ie){i.tag=11,i=fy(null,i,t,o,a);break e}else if(h===D){i.tag=14,i=my(null,i,t,o,a);break e}}throw i=xe(t)||t,Error(r(306,i,""))}}return i;case 0:return $d(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ea(o,i.pendingProps),Ey(t,i,o,h,a);case 3:e:{if(ri(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,bd(t,i),il(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Us(i,St,o),o!==f.cache&&yd(i,[St],a,!0),nl(),o=_.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Ty(t,i,o,a);break e}else if(o!==h){h=jn(Error(r(424)),i),$o(h),i=Ty(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Pn(t.firstChild),Bt=i,Ve=!0,Ls=null,kn=!0,a=gg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qr(),o===h){i=ss(t,i,a);break e}Ht(t,i,o,a)}i=i.child}return i;case 26:return ru(t,i),t===null?(a=k_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ve||(a=i.type,t=i.pendingProps,o=wu(sn.current).createElement(a),o[wt]=i,o[Vt]=t,Ft(o,a,t),bt(o),i.stateNode=o):i.memoizedState=k_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Sr(i),t===null&&Ve&&(o=i.stateNode=j_(i.type,i.pendingProps,sn.current),Bt=i,kn=!0,h=nt,Zs(i.type)?(Lf=h,nt=Pn(o.firstChild)):nt=h),Ht(t,i,i.pendingProps.children,a),ru(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ve&&((h=o=nt)&&(o=RT(o,i.type,i.pendingProps,kn),o!==null?(i.stateNode=o,Bt=i,nt=Pn(o.firstChild),kn=!1,h=!0):h=!1),h||Ps(i)),Sr(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,o=f.children,Of(h,f)?o=null:_!==null&&Of(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Id(t,i,H2,null,null,a),bl._currentValue=h),ru(t,i),Ht(t,i,o,a),i.child;case 6:return t===null&&Ve&&((t=a=nt)&&(a=NT(a,i.pendingProps,kn),a!==null?(i.stateNode=a,Bt=i,nt=null,t=!0):t=!1),t||Ps(i)),null;case 13:return wy(t,i,a);case 4:return ri(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Zr(i,null,o,a):Ht(t,i,o,a),i.child;case 11:return fy(t,i,i.type,i.pendingProps,a);case 7:return Ht(t,i,i.pendingProps,a),i.child;case 8:return Ht(t,i,i.pendingProps.children,a),i.child;case 12:return Ht(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Us(i,i.type,o.value),Ht(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Yr(i),h=qt(h),o=o(h),i.flags|=1,Ht(t,i,o,a),i.child;case 14:return my(t,i,i.type,i.pendingProps,a);case 15:return py(t,i,i.type,i.pendingProps,a);case 19:return Ay(t,i,a);case 31:return W2(t,i,a);case 22:return gy(t,i,a,i.pendingProps);case 24:return Yr(i),o=qt(St),t===null?(h=Ed(),h===null&&(h=Je,f=_d(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},wd(i),Us(i,St,h)):((t.lanes&a)!==0&&(bd(t,i),il(i,null,null,a),nl()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Us(i,St,o)):(o=f.cache,Us(i,St,o),o!==h.cache&&yd(i,[St],a,!0))),Ht(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function rs(t){t.flags|=4}function rf(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Zy())t.flags|=8192;else throw Wr=Fc,Td}else t.flags&=-16777217}function Cy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B_(i))if(Zy())t.flags|=8192;else throw Wr=Fc,Td}function ou(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?fc():536870912,t.lanes|=i,$a|=i)}function cl(t,i){if(!Ve)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function J2(t,i,a){var o=i.pendingProps;switch(dd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ts(St),Zt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(i)?rs(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,md())),it(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(rs(i),f!==null?(it(i),Cy(i,f)):(it(i),rf(i,h,null,o,a))):f?f!==t.memoizedState?(rs(i),it(i),Cy(i,f)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&rs(i),it(i),rf(i,h,t,o,a)),null;case 27:if(Bn(i),a=sn.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}t=tt.current,La(i)?rg(i):(t=j_(h,o,a),i.stateNode=t,rs(i))}return it(i),null;case 5:if(Bn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}if(f=tt.current,La(i))rg(i);else{var _=wu(sn.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}f[wt]=i,f[Vt]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Ft(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&rs(i)}}return it(i),rf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=sn.current,La(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Bt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[wt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||w_(t.nodeValue,a)),t||Ps(i,!0)}else t=wu(t).createTextNode(o),t[wt]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=La(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[wt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(En(i),i):(En(i),null);if((i.flags&128)!==0)throw Error(r(558))}return it(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=La(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[wt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),h=!1}else h=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(En(i),i):(En(i),null)}return En(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),ou(i,i.updateQueue),it(i),null);case 4:return Zt(),t===null&&xf(i.stateNode.containerInfo),it(i),null;case 10:return ts(i.type),it(i),null;case 19:if(Le(pt),o=i.memoizedState,o===null)return it(i),null;if(h=(i.flags&128)!==0,f=o.rendering,f===null)if(h)cl(o,!1);else{if(ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Yc(t),f!==null){for(i.flags|=128,cl(o,!1),t=f.updateQueue,i.updateQueue=t,ou(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)eg(a,t),a=a.sibling;return Ae(pt,pt.current&1|2),Ve&&Ji(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Mt()>du&&(i.flags|=128,h=!0,cl(o,!1),i.lanes=4194304)}else{if(!h)if(t=Yc(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,ou(i,t),cl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Ve)return it(i),null}else 2*Mt()-o.renderingStartTime>du&&a!==536870912&&(i.flags|=128,h=!0,cl(o,!1),i.lanes=4194304);o.isBackwards?(f.sibling=i.child,i.child=f):(t=o.last,t!==null?t.sibling=f:i.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Mt(),t.sibling=null,a=pt.current,Ae(pt,h?a&1|2:a&1),Ve&&Ji(i,o.treeForkCount),t):(it(i),null);case 22:case 23:return En(i),xd(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&ou(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&Le(Xr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ts(St),it(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function eT(t,i){switch(dd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ts(St),Zt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Bn(i),null;case 31:if(i.memoizedState!==null){if(En(i),i.alternate===null)throw Error(r(340));Qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(En(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Le(pt),null;case 4:return Zt(),null;case 10:return ts(i.type),null;case 22:case 23:return En(i),xd(),t!==null&&Le(Xr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ts(St),null;case 25:return null;default:return null}}function xy(t,i){switch(dd(i),i.tag){case 3:ts(St),Zt();break;case 26:case 27:case 5:Bn(i);break;case 4:Zt();break;case 31:i.memoizedState!==null&&En(i);break;case 13:En(i);break;case 19:Le(pt);break;case 10:ts(i.type);break;case 22:case 23:En(i),xd(),t!==null&&Le(Xr);break;case 24:ts(St)}}function ul(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,_=a.inst;o=f(),_.destroy=o}a=a.next}while(a!==h)}}catch(w){Qe(i,i.return,w)}}function Gs(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var _=o.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=i;var I=a,B=w;try{B()}catch(G){Qe(h,I,G)}}}o=o.next}while(o!==f)}}catch(G){Qe(i,i.return,G)}}function Ry(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{_g(i,a)}catch(o){Qe(t,t.return,o)}}}function Ny(t,i,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Qe(t,i,o)}}function hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Qe(t,i,h)}}function Ri(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Qe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Qe(t,i,h)}else a.current=null}function Iy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Qe(t,t.return,h)}}function af(t,i,a){try{var o=t.stateNode;wT(o,t.type,a,i),o[Vt]=i}catch(h){Qe(t,t.return,h)}}function Dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zs(t.type)||t.tag===4}function of(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Gn));else if(o!==4&&(o===27&&Zs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(lf(t,i,a),t=t.sibling;t!==null;)lf(t,i,a),t=t.sibling}function lu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Zs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lu(t,i,a),t=t.sibling;t!==null;)lu(t,i,a),t=t.sibling}function Oy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,o,a),i[wt]=t,i[Vt]=a}catch(f){Qe(t,t.return,f)}}var as=!1,Rt=!1,cf=!1,jy=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function tT(t,i){if(t=t.containerInfo,If=Nu,t=Gp(t),td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,w=-1,I=-1,B=0,G=0,X=t,q=null;t:for(;;){for(var F;X!==a||h!==0&&X.nodeType!==3||(w=_+h),X!==f||o!==0&&X.nodeType!==3||(I=_+o),X.nodeType===3&&(_+=X.nodeValue.length),(F=X.firstChild)!==null;)q=X,X=F;for(;;){if(X===t)break t;if(q===a&&++B===h&&(w=_),q===f&&++G===o&&(I=_),(F=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=F}a=w===-1||I===-1?null:{start:w,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df={focusedElem:t,selectionRange:a},Nu=!1,Lt=i;Lt!==null;)if(i=Lt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Lt=t;else for(;Lt!==null;){switch(i=Lt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ue=ea(a.type,h);t=o.getSnapshotBeforeUpdate(ue,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Qe(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Mf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Lt=t;break}Lt=i.return}}function My(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ls(t,a),o&4&&ul(5,a);break;case 1:if(ls(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Qe(a,a.return,_)}else{var h=ea(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Qe(a,a.return,_)}}o&64&&Ry(a),o&512&&hl(a,a.return);break;case 3:if(ls(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{_g(t,i)}catch(_){Qe(a,a.return,_)}}break;case 27:i===null&&o&4&&Oy(a);case 26:case 5:ls(t,a),i===null&&o&4&&Iy(a),o&512&&hl(a,a.return);break;case 12:ls(t,a);break;case 31:ls(t,a),o&4&&Ly(t,a);break;case 13:ls(t,a),o&4&&Py(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=uT.bind(null,a),IT(t,a))));break;case 22:if(o=a.memoizedState!==null||as,!o){i=i!==null&&i.memoizedState!==null||Rt,h=as;var f=Rt;as=o,(Rt=i)&&!f?cs(t,a,(a.subtreeFlags&8772)!==0):ls(t,a),as=h,Rt=f}break;case 30:break;default:ls(t,a)}}function Vy(t){var i=t.alternate;i!==null&&(t.alternate=null,Vy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,on=!1;function os(t,i,a){for(a=a.child;a!==null;)ky(t,i,a),a=a.sibling}function ky(t,i,a){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Jt,a)}catch{}switch(a.tag){case 26:Rt||Ri(a,i),os(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Ri(a,i);var o=at,h=on;Zs(a.type)&&(at=a.stateNode,on=!1),os(t,i,a),El(a.stateNode),at=o,on=h;break;case 5:Rt||Ri(a,i);case 6:if(o=at,h=on,at=null,os(t,i,a),at=o,on=h,at!==null)if(on)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(f){Qe(a,i,f)}else try{at.removeChild(a.stateNode)}catch(f){Qe(a,i,f)}break;case 18:at!==null&&(on?(t=at,R_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),so(t)):R_(at,a.stateNode));break;case 4:o=at,h=on,at=a.stateNode.containerInfo,on=!0,os(t,i,a),at=o,on=h;break;case 0:case 11:case 14:case 15:Gs(2,a,i),Rt||Gs(4,a,i),os(t,i,a);break;case 1:Rt||(Ri(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Ny(a,i,o)),os(t,i,a);break;case 21:os(t,i,a);break;case 22:Rt=(o=Rt)||a.memoizedState!==null,os(t,i,a),Rt=o;break;default:os(t,i,a)}}function Ly(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{so(t)}catch(a){Qe(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{so(t)}catch(a){Qe(i,i.return,a)}}function nT(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new jy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new jy),i;default:throw Error(r(435,t.tag))}}function cu(t,i){var a=nT(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=hT.bind(null,t,o);o.then(h,h)}})}function ln(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,_=i,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(Zs(w.type)){at=w.stateNode,on=!1;break e}break;case 5:at=w.stateNode,on=!1;break e;case 3:case 4:at=w.stateNode.containerInfo,on=!0;break e}w=w.return}if(at===null)throw Error(r(160));ky(f,_,h),at=null,on=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Uy(i,t),i=i.sibling}var Wn=null;function Uy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(i,t),cn(t),o&4&&(Gs(3,t,t.return),ul(3,t),Gs(5,t,t.return));break;case 1:ln(i,t),cn(t),o&512&&(Rt||a===null||Ri(a,a.return)),o&64&&as&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Wn;if(ln(i,t),cn(t),o&512&&(Rt||a===null||Ri(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[mi]||f[wt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ft(f,o,a),f[wt]=t,bt(f),o=f;break e;case"link":var _=U_("link","href",h).get(o+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}f=h.createElement(o),Ft(f,o,a),h.head.appendChild(f);break;case"meta":if(_=U_("meta","content",h).get(o+(a.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}f=h.createElement(o),Ft(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[wt]=t,bt(f),o=f}t.stateNode=o}else z_(h,t.type,t.stateNode);else t.stateNode=P_(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?z_(h,t.type,t.stateNode):P_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&af(t,t.memoizedProps,a.memoizedProps)}break;case 27:ln(i,t),cn(t),o&512&&(Rt||a===null||Ri(a,a.return)),a!==null&&o&4&&af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ln(i,t),cn(t),o&512&&(Rt||a===null||Ri(a,a.return)),t.flags&32){h=t.stateNode;try{an(h,"")}catch(ue){Qe(t,t.return,ue)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,af(t,h,a!==null?a.memoizedProps:h)),o&1024&&(cf=!0);break;case 6:if(ln(i,t),cn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ue){Qe(t,t.return,ue)}}break;case 3:if(Su=null,h=Wn,Wn=bu(i.containerInfo),ln(i,t),Wn=h,cn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{so(i.containerInfo)}catch(ue){Qe(t,t.return,ue)}cf&&(cf=!1,zy(t));break;case 4:o=Wn,Wn=bu(t.stateNode.containerInfo),ln(i,t),cn(t),Wn=o;break;case 12:ln(i,t),cn(t);break;case 31:ln(i,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 13:ln(i,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hu=Mt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=as,G=Rt;if(as=B||h,Rt=G||I,ln(i,t),Rt=G,as=B,cn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||as||Rt||ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(f=I.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=I.stateNode;var X=I.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ue){Qe(I,I.return,ue)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(ue){Qe(I,I.return,ue)}}}else if(i.tag===18){if(a===null){I=i;try{var F=I.stateNode;h?N_(F,!0):N_(I.stateNode,!1)}catch(ue){Qe(I,I.return,ue)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,cu(t,a))));break;case 19:ln(i,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 30:break;case 21:break;default:ln(i,t),cn(t)}}function cn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Dy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=of(t);lu(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(an(_,""),a.flags&=-33);var w=of(t);lu(t,w,_);break;case 3:case 4:var I=a.stateNode.containerInfo,B=of(t);lf(t,B,I);break;default:throw Error(r(161))}}catch(G){Qe(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ls(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)My(t,i.alternate,i),i=i.sibling}function ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Gs(4,i,i.return),ta(i);break;case 1:Ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ny(i,i.return,a),ta(i);break;case 27:El(i.stateNode);case 26:case 5:Ri(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}t=t.sibling}}function cs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:cs(h,f,a),ul(4,f);break;case 1:if(cs(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Qe(o,o.return,B)}if(o=f,h=o.updateQueue,h!==null){var w=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)yg(I[h],w)}catch(B){Qe(o,o.return,B)}}a&&_&64&&Ry(f),hl(f,f.return);break;case 27:Oy(f);case 26:case 5:cs(h,f,a),a&&o===null&&_&4&&Iy(f),hl(f,f.return);break;case 12:cs(h,f,a);break;case 31:cs(h,f,a),a&&_&4&&Ly(h,f);break;case 13:cs(h,f,a),a&&_&4&&Py(h,f);break;case 22:f.memoizedState===null&&cs(h,f,a),hl(f,f.return);break;case 30:break;default:cs(h,f,a)}i=i.sibling}}function uf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Wo(a))}function hf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wo(t))}function Zn(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)By(t,i,a,o),i=i.sibling}function By(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Zn(t,i,a,o),h&2048&&ul(9,i);break;case 1:Zn(t,i,a,o);break;case 3:Zn(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wo(t)));break;case 12:if(h&2048){Zn(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Qe(i,i.return,I)}}else Zn(t,i,a,o);break;case 31:Zn(t,i,a,o);break;case 13:Zn(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?Zn(t,i,a,o):dl(t,i):f._visibility&2?Zn(t,i,a,o):(f._visibility|=2,Ka(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&uf(_,i);break;case 24:Zn(t,i,a,o),h&2048&&hf(i.alternate,i);break;default:Zn(t,i,a,o)}}function Ka(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,w=a,I=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:Ka(f,_,w,I,h),ul(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?Ka(f,_,w,I,h):dl(f,_):(G._visibility|=2,Ka(f,_,w,I,h)),h&&B&2048&&uf(_.alternate,_);break;case 24:Ka(f,_,w,I,h),h&&B&2048&&hf(_.alternate,_);break;default:Ka(f,_,w,I,h)}i=i.sibling}}function dl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:dl(a,o),h&2048&&uf(o.alternate,o);break;case 24:dl(a,o),h&2048&&hf(o.alternate,o);break;default:dl(a,o)}i=i.sibling}}var fl=8192;function Ya(t,i,a){if(t.subtreeFlags&fl)for(t=t.child;t!==null;)qy(t,i,a),t=t.sibling}function qy(t,i,a){switch(t.tag){case 26:Ya(t,i,a),t.flags&fl&&t.memoizedState!==null&&qT(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,i,a);break;case 3:case 4:var o=Wn;Wn=bu(t.stateNode.containerInfo),Ya(t,i,a),Wn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=fl,fl=16777216,Ya(t,i,a),fl=o):Ya(t,i,a));break;default:Ya(t,i,a)}}function Hy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Gy(o,t)}Hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fy(t),t=t.sibling}function Fy(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&Gs(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,uu(t)):ml(t);break;default:ml(t)}}function uu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Gy(o,t)}Hy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Gs(8,i,i.return),uu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,uu(i));break;default:uu(i)}t=t.sibling}}function Gy(t,i){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Gs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Wo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Lt=o;else e:for(a=t;Lt!==null;){o=Lt;var h=o.sibling,f=o.return;if(Vy(o),o===a){Lt=null;break e}if(h!==null){h.return=f,Lt=h;break e}Lt=f}}}var iT={getCacheForType:function(t){var i=qt(St),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return qt(St).controller.signal}},sT=typeof WeakMap=="function"?WeakMap:Map,Be=0,Je=null,Re=null,Ie=0,Ge=0,Tn=null,Qs=!1,Xa=!1,df=!1,us=0,ct=0,Ks=0,na=0,ff=0,wn=0,$a=0,pl=null,un=null,mf=!1,hu=0,Qy=0,du=1/0,fu=null,Ys=null,Ot=0,Xs=null,Wa=null,hs=0,pf=0,gf=null,Ky=null,gl=0,yf=null;function bn(){return(Be&2)!==0&&Ie!==0?Ie&-Ie:Q.T!==null?bf():mc()}function Yy(){if(wn===0)if((Ie&536870912)===0||Ve){var t=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),wn=t}else wn=536870912;return t=vn.current,t!==null&&(t.flags|=32),wn}function hn(t,i,a){(t===Je&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)&&(Za(t,0),$s(t,Ie,wn,!1)),Ir(t,a),((Be&2)===0||t!==Je)&&(t===Je&&((Be&2)===0&&(na|=a),ct===4&&$s(t,Ie,wn,!1)),Ni(t))}function Xy(t,i,a){if((Be&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||qn(t,i),h=o?oT(t,i):vf(t,i,!0),f=o;do{if(h===0){Xa&&!o&&$s(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!rT(a)){h=vf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var w=t;h=pl;var I=w.current.memoizedState.isDehydrated;if(I&&(Za(w,_).flags|=256),_=vf(w,_,!1),_!==2){if(df&&!I){w.errorRecoveryDisabledLanes|=f,na|=f,h=4;break e}f=un,un=h,f!==null&&(un===null?un=f:un.push.apply(un,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){Za(t,0),$s(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$s(o,i,wn,!Qs);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=hu+300-Mt(),10<h)){if($s(o,i,wn,!Qs),hi(o,0,!0)!==0)break e;hs=i,o.timeoutHandle=C_($y.bind(null,o,a,un,fu,mf,i,wn,na,$a,Qs,f,"Throttled",-0,0),h);break e}$y(o,a,un,fu,mf,i,wn,na,$a,Qs,f,null,-0,0)}}break}while(!0);Ni(t)}function $y(t,i,a,o,h,f,_,w,I,B,G,X,q,F){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},qy(i,f,X);var ue=(f&62914560)===f?hu-Mt():(f&4194048)===f?Qy-Mt():0;if(ue=HT(X,ue),ue!==null){hs=f,t.cancelPendingCommit=ue(s_.bind(null,t,i,f,a,o,h,_,w,I,G,X,null,q,F)),$s(t,f,_,!B);return}}s_(t,i,f,a,o,h,_,w,I)}function rT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!yn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $s(t,i,a,o){i&=~ff,i&=~na,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-st(h),_=1<<f;o[f]=-1,h&=~_}a!==0&&Dr(t,a,i)}function mu(){return(Be&6)===0?(yl(0),!1):!0}function _f(){if(Re!==null){if(Ge===0)var t=Re.return;else t=Re,es=Kr=null,jd(t),qa=null,Jo=0,t=Re;for(;t!==null;)xy(t.alternate,t),t=t.return;Re=null}}function Za(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,ST(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),hs=0,_f(),Je=t,Re=a=Zi(t.current,null),Ie=i,Ge=0,Tn=null,Qs=!1,Xa=qn(t,i),df=!1,$a=wn=ff=na=Ks=ct=0,un=pl=null,mf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-st(o),f=1<<h;i|=t[h],o&=~f}return us=i,Vc(),a}function Wy(t,i){be=null,Q.H=ol,i===Ba||i===Hc?(i=fg(),Ge=3):i===Td?(i=fg(),Ge=4):Ge=i===Xd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Tn=i,Re===null&&(ct=1,iu(t,jn(i,t.current)))}function Zy(){var t=vn.current;return t===null?!0:(Ie&4194048)===Ie?Ln===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?t===Ln:!1}function Jy(){var t=Q.H;return Q.H=ol,t===null?ol:t}function e_(){var t=Q.A;return Q.A=iT,t}function pu(){ct=4,Qs||(Ie&4194048)!==Ie&&vn.current!==null||(Xa=!0),(Ks&134217727)===0&&(na&134217727)===0||Je===null||$s(Je,Ie,wn,!1)}function vf(t,i,a){var o=Be;Be|=2;var h=Jy(),f=e_();(Je!==t||Ie!==i)&&(fu=null,Za(t,i)),i=!1;var _=ct;e:do try{if(Ge!==0&&Re!==null){var w=Re,I=Tn;switch(Ge){case 8:_f(),_=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(i=!0);var B=Ge;if(Ge=0,Tn=null,Ja(t,w,I,B),a&&Xa){_=0;break e}break;default:B=Ge,Ge=0,Tn=null,Ja(t,w,I,B)}}aT(),_=ct;break}catch(G){Wy(t,G)}while(!0);return i&&t.shellSuspendCounter++,es=Kr=null,Be=o,Q.H=h,Q.A=f,Re===null&&(Je=null,Ie=0,Vc()),_}function aT(){for(;Re!==null;)t_(Re)}function oT(t,i){var a=Be;Be|=2;var o=Jy(),h=e_();Je!==t||Ie!==i?(fu=null,du=Mt()+500,Za(t,i)):Xa=qn(t,i);e:do try{if(Ge!==0&&Re!==null){i=Re;var f=Tn;t:switch(Ge){case 1:Ge=0,Tn=null,Ja(t,i,f,1);break;case 2:case 9:if(hg(f)){Ge=0,Tn=null,n_(i);break}i=function(){Ge!==2&&Ge!==9||Je!==t||(Ge=7),Ni(t)},f.then(i,i);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:hg(f)?(Ge=0,Tn=null,n_(i)):(Ge=0,Tn=null,Ja(t,i,f,7));break;case 5:var _=null;switch(Re.tag){case 26:_=Re.memoizedState;case 5:case 27:var w=Re;if(_?B_(_):w.stateNode.complete){Ge=0,Tn=null;var I=w.sibling;if(I!==null)Re=I;else{var B=w.return;B!==null?(Re=B,gu(B)):Re=null}break t}}Ge=0,Tn=null,Ja(t,i,f,5);break;case 6:Ge=0,Tn=null,Ja(t,i,f,6);break;case 8:_f(),ct=6;break e;default:throw Error(r(462))}}lT();break}catch(G){Wy(t,G)}while(!0);return es=Kr=null,Q.H=o,Q.A=h,Be=a,Re!==null?0:(Je=null,Ie=0,Vc(),ct)}function lT(){for(;Re!==null&&!xo();)t_(Re)}function t_(t){var i=Sy(t.alternate,t,us);t.memoizedProps=t.pendingProps,i===null?gu(t):Re=i}function n_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=vy(a,i,i.pendingProps,i.type,void 0,Ie);break;case 11:i=vy(a,i,i.pendingProps,i.type.render,i.ref,Ie);break;case 5:jd(i);default:xy(a,i),i=Re=eg(i,us),i=Sy(a,i,us)}t.memoizedProps=t.pendingProps,i===null?gu(t):Re=i}function Ja(t,i,a,o){es=Kr=null,jd(i),qa=null,Jo=0;var h=i.return;try{if($2(t,h,i,a,Ie)){ct=1,iu(t,jn(a,t.current)),Re=null;return}}catch(f){if(h!==null)throw Re=h,f;ct=1,iu(t,jn(a,t.current)),Re=null;return}i.flags&32768?(Ve||o===1?t=!0:Xa||(Ie&536870912)!==0?t=!1:(Qs=t=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(i,t)):gu(i)}function gu(t){var i=t;do{if((i.flags&32768)!==0){i_(i,Qs);return}t=i.return;var a=J2(i.alternate,i,us);if(a!==null){Re=a;return}if(i=i.sibling,i!==null){Re=i;return}Re=i=t}while(i!==null);ct===0&&(ct=5)}function i_(t,i){do{var a=eT(t.alternate,t);if(a!==null){a.flags&=32767,Re=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Re=t;return}Re=t=a}while(t!==null);ct=6,Re=null}function s_(t,i,a,o,h,f,_,w,I){t.cancelPendingCommit=null;do yu();while(Ot!==0);if((Be&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=ad,Wh(t,a,f,_,w,I),t===Je&&(Re=Je=null,Ie=0),Wa=i,Xs=t,hs=a,pf=f,gf=h,Ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dT(se,function(){return c_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,h=ne.p,ne.p=2,_=Be,Be|=4;try{tT(t,i,a)}finally{Be=_,ne.p=h,Q.T=o}}Ot=1,r_(),a_(),o_()}}function r_(){if(Ot===1){Ot=0;var t=Xs,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var o=ne.p;ne.p=2;var h=Be;Be|=4;try{Uy(i,t);var f=Df,_=Gp(t.containerInfo),w=f.focusedElem,I=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&Fp(w.ownerDocument.documentElement,w)){if(I!==null&&td(w)){var B=I.start,G=I.end;if(G===void 0&&(G=B),"selectionStart"in w)w.selectionStart=B,w.selectionEnd=Math.min(G,w.value.length);else{var X=w.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var F=q.getSelection(),ue=w.textContent.length,pe=Math.min(I.start,ue),We=I.end===void 0?pe:Math.min(I.end,ue);!F.extend&&pe>We&&(_=We,We=pe,pe=_);var V=Hp(w,pe),O=Hp(w,We);if(V&&O&&(F.rangeCount!==1||F.anchorNode!==V.node||F.anchorOffset!==V.offset||F.focusNode!==O.node||F.focusOffset!==O.offset)){var z=X.createRange();z.setStart(V.node,V.offset),F.removeAllRanges(),pe>We?(F.addRange(z),F.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),F.addRange(z))}}}}for(X=[],F=w;F=F.parentNode;)F.nodeType===1&&X.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<X.length;w++){var Y=X[w];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Nu=!!If,Df=If=null}finally{Be=h,ne.p=o,Q.T=a}}t.current=i,Ot=2}}function a_(){if(Ot===2){Ot=0;var t=Xs,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var o=ne.p;ne.p=2;var h=Be;Be|=4;try{My(t,i.alternate,i)}finally{Be=h,ne.p=o,Q.T=a}}Ot=3}}function o_(){if(Ot===4||Ot===3){Ot=0,xr();var t=Xs,i=Wa,a=hs,o=Ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ot=5:(Ot=0,Wa=Xs=null,l_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ys=null),Yi(a),i=i.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Jt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Q.T,h=ne.p,ne.p=2,Q.T=null;try{for(var f=t.onRecoverableError,_=0;_<o.length;_++){var w=o[_];f(w.value,{componentStack:w.stack})}}finally{Q.T=i,ne.p=h}}(hs&3)!==0&&yu(),Ni(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===yf?gl++:(gl=0,yf=t):gl=0,yl(0)}}function l_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Wo(i)))}function yu(){return r_(),a_(),o_(),c_()}function c_(){if(Ot!==5)return!1;var t=Xs,i=pf;pf=0;var a=Yi(hs),o=Q.T,h=ne.p;try{ne.p=32>a?32:a,Q.T=null,a=gf,gf=null;var f=Xs,_=hs;if(Ot=0,Wa=Xs=null,hs=0,(Be&6)!==0)throw Error(r(331));var w=Be;if(Be|=4,Fy(f.current),By(f,f.current,_,a),Be=w,yl(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Jt,f)}catch{}return!0}finally{ne.p=h,Q.T=o,l_(t,i)}}function u_(t,i,a){i=jn(a,i),i=Yd(t.stateNode,i,2),t=qs(t,i,2),t!==null&&(Ir(t,2),Ni(t))}function Qe(t,i,a){if(t.tag===3)u_(t,t,a);else for(;i!==null;){if(i.tag===3){u_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ys===null||!Ys.has(o))){t=jn(a,t),a=hy(2),o=qs(i,a,2),o!==null&&(dy(a,o,i,t),Ir(o,2),Ni(o));break}}i=i.return}}function Ef(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new sT;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(df=!0,h.add(a),t=cT.bind(null,t,i,a),i.then(t,t))}function cT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Ie&a)===a&&(ct===4||ct===3&&(Ie&62914560)===Ie&&300>Mt()-hu?(Be&2)===0&&Za(t,0):ff|=a,$a===Ie&&($a=0)),Ni(t)}function h_(t,i){i===0&&(i=fc()),t=Fr(t,i),t!==null&&(Ir(t,i),Ni(t))}function uT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),h_(t,a)}function hT(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),h_(t,a)}function dT(t,i){return Et(t,i)}var _u=null,eo=null,Tf=!1,vu=!1,wf=!1,Ws=0;function Ni(t){t!==eo&&t.next===null&&(eo===null?_u=eo=t:eo=eo.next=t),vu=!0,Tf||(Tf=!0,mT())}function yl(t,i){if(!wf&&vu){wf=!0;do for(var a=!1,o=_u;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-st(42|t)+1)-1,f&=h&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,p_(o,f))}else f=Ie,f=hi(o,o===Je?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||qn(o,f)||(a=!0,p_(o,f));o=o.next}while(a);wf=!1}}function fT(){d_()}function d_(){vu=Tf=!1;var t=0;Ws!==0&&AT()&&(t=Ws);for(var i=Mt(),a=null,o=_u;o!==null;){var h=o.next,f=f_(o,i);f===0?(o.next=null,a===null?_u=h:a.next=h,h===null&&(eo=a)):(a=o,(t!==0||(f&3)!==0)&&(vu=!0)),o=h}Ot!==0&&Ot!==5||yl(t),Ws!==0&&(Ws=0)}function f_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-st(f),w=1<<_,I=h[_];I===-1?((w&a)===0||(w&o)!==0)&&(h[_]=$h(w,i)):I<=i&&(t.expiredLanes|=w),f&=~w}if(i=Je,a=Ie,a=hi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&dt(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||qn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&dt(o),Yi(a)){case 2:case 8:a=Ss;break;case 32:a=se;break;case 268435456:a=Ut;break;default:a=se}return o=m_.bind(null,t),a=Et(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&dt(o),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,i){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(yu()&&t.callbackNode!==a)return null;var o=Ie;return o=hi(t,t===Je?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xy(t,o,i),f_(t,Mt()),t.callbackNode!=null&&t.callbackNode===a?m_.bind(null,t):null)}function p_(t,i){if(yu())return null;Xy(t,i,!0)}function mT(){CT(function(){(Be&6)!==0?Et(Rr,fT):d_()})}function bf(){if(Ws===0){var t=Ua;t===0&&(t=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ws=t}return Ws}function g_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Aa(""+t)}function y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function pT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=g_((h[Vt]||null).action),_=o.submitter;_&&(i=(i=_[Vt]||null)?g_(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var w=new wi("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ws!==0){var I=_?y_(h,_):new FormData(h);qd(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(w.preventDefault(),I=_?y_(h,_):new FormData(h),qd(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var Af=0;Af<rd.length;Af++){var Sf=rd[Af],gT=Sf.toLowerCase(),yT=Sf[0].toUpperCase()+Sf.slice(1);$n(gT,"on"+yT)}$n(Yp,"onAnimationEnd"),$n(Xp,"onAnimationIteration"),$n($p,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(j2,"onTransitionRun"),$n(M2,"onTransitionStart"),$n(V2,"onTransitionCancel"),$n(Wp,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function __(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var _=o.length-1;0<=_;_--){var w=o[_],I=w.instance,B=w.currentTarget;if(w=w.listener,I!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(G){Mc(G)}h.currentTarget=null,f=I}else for(_=0;_<o.length;_++){if(w=o[_],I=w.instance,B=w.currentTarget,w=w.listener,I!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=B;try{f(h)}catch(G){Mc(G)}h.currentTarget=null,f=I}}}}function Ne(t,i){var a=i[va];a===void 0&&(a=i[va]=new Set);var o=t+"__bubble";a.has(o)||(v_(i,t,2,!1),a.add(o))}function Cf(t,i,a){var o=0;i&&(o|=4),v_(a,t,o,i)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function xf(t){if(!t[Eu]){t[Eu]=!0,Io.forEach(function(a){a!=="selectionchange"&&(_T.has(a)||Cf(a,!1,t),Cf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Eu]||(i[Eu]=!0,Cf("selectionchange",!1,i))}}function v_(t,i,a,o){switch(Y_(i)){case 2:var h=QT;break;case 8:h=KT;break;default:h=qf}a=h.bind(null,i,a,t),h=void 0,!kr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Rf(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var w=o.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=o.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=pi(w),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){o=f=_;continue e}w=w.parentNode}}o=o.return}Os(function(){var B=f,G=Nn(a),X=[];e:{var q=Zp.get(t);if(q!==void 0){var F=wi,ue=t;switch(t){case"keypress":if(Pr(a)===0)break e;case"keydown":case"keyup":F=Dc;break;case"focusin":ue="focus",F=zr;break;case"focusout":ue="blur",F=zr;break;case"beforeblur":case"afterblur":F=zr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=g;break;case Yp:case Xp:case $p:F=Ac;break;case Wp:F=b;break;case"scroll":case"scrollend":F=qo;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Wi;break;case"toggle":case"beforetoggle":F=we}var pe=(i&4)!==0,We=!pe&&(t==="scroll"||t==="scrollend"),V=pe?q!==null?q+"Capture":null:q;pe=[];for(var O=B,z;O!==null;){var Y=O;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||V===null||(Y=Qn(O,V),Y!=null&&pe.push(vl(O,Y,z))),We)break;O=O.return}0<pe.length&&(q=new F(q,ue,null,a,G),X.push({event:q,listeners:pe}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",q&&a!==Uo&&(ue=a.relatedTarget||a.fromElement)&&(pi(ue)||ue[fi]))break e;if((F||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,F?(ue=a.relatedTarget||a.toElement,F=B,ue=ue?pi(ue):null,ue!==null&&(We=c(ue),pe=ue.tag,ue!==We||pe!==5&&pe!==27&&pe!==6)&&(ue=null)):(F=null,ue=B),F!==ue)){if(pe=Ho,Y="onMouseLeave",V="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Wi,Y="onPointerLeave",V="onPointerEnter",O="pointer"),We=F==null?q:pn(F),z=ue==null?q:pn(ue),q=new pe(Y,O+"leave",F,a,G),q.target=We,q.relatedTarget=z,Y=null,pi(G)===B&&(pe=new pe(V,O+"enter",ue,a,G),pe.target=z,pe.relatedTarget=We,Y=pe),We=Y,F&&ue)t:{for(pe=vT,V=F,O=ue,z=0,Y=V;Y;Y=pe(Y))z++;Y=0;for(var fe=O;fe;fe=pe(fe))Y++;for(;0<z-Y;)V=pe(V),z--;for(;0<Y-z;)O=pe(O),Y--;for(;z--;){if(V===O||O!==null&&V===O.alternate){pe=V;break t}V=pe(V),O=pe(O)}pe=null}else pe=null;F!==null&&E_(X,q,F,pe,!1),ue!==null&&We!==null&&E_(X,We,ue,pe,!0)}}e:{if(q=B?pn(B):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var Pe=Lp;else if(Vp(q))if(Pp)Pe=I2;else{Pe=R2;var de=x2}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ba(B.elementType)&&(Pe=Lp):Pe=N2;if(Pe&&(Pe=Pe(t,B))){kp(X,Pe,a,G);break e}de&&de(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&ko(q,"number",q.value)}switch(de=B?pn(B):window,t){case"focusin":(Vp(de)||de.contentEditable==="true")&&(Da=de,nd=B,Yo=null);break;case"focusout":Yo=nd=Da=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Qp(X,a,G);break;case"selectionchange":if(O2)break;case"keydown":case"keyup":Qp(X,a,G)}var Se;if(ze)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ia?Br(t,a)&&(De="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Si&&a.locale!=="ko"&&(Ia||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ia&&(Se=Bo()):(Ti=G,zo="value"in Ti?Ti.value:Ti.textContent,Ia=!0)),de=Tu(B,De),0<de.length&&(De=new Ai(De,t,null,a,G),X.push({event:De,listeners:de}),Se?De.data=Se:(Se=Na(a),Se!==null&&(De.data=Se)))),(Se=Dn?b2(t,a):A2(t,a))&&(De=Tu(B,"onBeforeInput"),0<De.length&&(de=new Ai("onBeforeInput","beforeinput",null,a,G),X.push({event:de,listeners:De}),de.data=Se)),pT(X,t,B,a,G)}__(X,i)})}function vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Tu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Qn(t,a),h!=null&&o.unshift(vl(t,h,f)),h=Qn(t,i),h!=null&&o.push(vl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function vT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,i,a,o,h){for(var f=i._reactName,_=[];a!==null&&a!==o;){var w=a,I=w.alternate,B=w.stateNode;if(w=w.tag,I!==null&&I===o)break;w!==5&&w!==26&&w!==27||B===null||(I=B,h?(B=Qn(a,f),B!=null&&_.unshift(vl(a,B,I))):h||(B=Qn(a,f),B!=null&&_.push(vl(a,B,I)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var ET=/\r\n?/g,TT=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(ET,`
`).replace(TT,"")}function w_(t,i){return i=T_(i),T_(t)===i}function $e(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||an(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&an(t,""+o);break;case"className":gn(t,"class",o);break;case"tabIndex":gn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(t,a,o);break;case"style":Po(t,o,f);break;case"data":if(i!=="object"){gn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Aa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&$e(t,i,"name",h.name,h,null),$e(t,i,"formEncType",h.formEncType,h,null),$e(t,i,"formMethod",h.formMethod,h,null),$e(t,i,"formTarget",h.formTarget,h,null)):($e(t,i,"encType",h.encType,h,null),$e(t,i,"method",h.method,h,null),$e(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Aa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Gn);break;case"onScroll":o!=null&&Ne("scroll",t);break;case"onScrollEnd":o!=null&&Ne("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Aa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ne("beforetoggle",t),Ne("toggle",t),Ta(t,"popover",o);break;case"xlinkActuate":At(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":At(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":At(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":At(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":At(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":At(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":At(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":At(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":At(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Tc.get(a)||a,Ta(t,a,o))}}function Nf(t,i,a,o,h,f){switch(a){case"style":Po(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?an(t,o):(typeof o=="number"||typeof o=="bigint")&&an(t,""+o);break;case"onScroll":o!=null&&Ne("scroll",t);break;case"onScrollEnd":o!=null&&Ne("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Vt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ta(t,a,o)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",t),Ne("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,f,_,a,null)}}h&&$e(t,i,"srcSet",a.srcSet,a,null),o&&$e(t,i,"src",a.src,a,null);return;case"input":Ne("invalid",t);var w=f=_=h=null,I=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":_=G;break;case"checked":I=G;break;case"defaultChecked":B=G;break;case"value":f=G;break;case"defaultValue":w=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:$e(t,i,o,G,a,null)}}_c(t,f,w,I,B,_,h,!1);return;case"select":Ne("invalid",t),o=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":o=w;default:$e(t,i,h,w,a,null)}i=f,a=_,t.multiple=!!o,i!=null?Rs(t,!!o,i,!1):a!=null&&Rs(t,!!o,a,!0);return;case"textarea":Ne("invalid",t),f=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":o=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:$e(t,i,_,w,a,null)}Ns(t,o,h,f);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$e(t,i,I,o,a,null)}return;case"dialog":Ne("beforetoggle",t),Ne("toggle",t),Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":Ne("load",t);break;case"video":case"audio":for(o=0;o<_l.length;o++)Ne(_l[o],t);break;case"image":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"embed":case"source":case"link":Ne("error",t),Ne("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,B,o,a,null)}return;default:if(ba(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Nf(t,i,G,o,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(o=a[w],o!=null&&$e(t,i,w,o,a,null))}function wT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,w=null,I=null,B=null,G=null;for(F in a){var X=a[F];if(a.hasOwnProperty(F)&&X!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=X;default:o.hasOwnProperty(F)||$e(t,i,F,null,o,X)}}for(var q in o){var F=o[q];if(X=a[q],o.hasOwnProperty(q)&&(F!=null||X!=null))switch(q){case"type":f=F;break;case"name":h=F;break;case"checked":B=F;break;case"defaultChecked":G=F;break;case"value":_=F;break;case"defaultValue":w=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==X&&$e(t,i,q,F,o,X)}}wa(t,_,w,I,B,G,f,h);return;case"select":F=_=w=q=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":F=I;default:o.hasOwnProperty(f)||$e(t,i,f,null,o,I)}for(h in o)if(f=o[h],I=a[h],o.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":q=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==I&&$e(t,i,h,f,o,I)}i=w,a=_,o=F,q!=null?Rs(t,!!a,q,!1):!!o!=!!a&&(i!=null?Rs(t,!!a,i,!0):Rs(t,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:$e(t,i,w,null,o,h)}for(_ in o)if(h=o[_],f=a[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":q=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&$e(t,i,_,h,o,f)}vc(t,q,F);return;case"option":for(var ue in a)if(q=a[ue],a.hasOwnProperty(ue)&&q!=null&&!o.hasOwnProperty(ue))switch(ue){case"selected":t.selected=!1;break;default:$e(t,i,ue,null,o,q)}for(I in o)if(q=o[I],F=a[I],o.hasOwnProperty(I)&&q!==F&&(q!=null||F!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:$e(t,i,I,q,o,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)q=a[pe],a.hasOwnProperty(pe)&&q!=null&&!o.hasOwnProperty(pe)&&$e(t,i,pe,null,o,q);for(B in o)if(q=o[B],F=a[B],o.hasOwnProperty(B)&&q!==F&&(q!=null||F!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:$e(t,i,B,q,o,F)}return;default:if(ba(i)){for(var We in a)q=a[We],a.hasOwnProperty(We)&&q!==void 0&&!o.hasOwnProperty(We)&&Nf(t,i,We,void 0,o,q);for(G in o)q=o[G],F=a[G],!o.hasOwnProperty(G)||q===F||q===void 0&&F===void 0||Nf(t,i,G,q,o,F);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!o.hasOwnProperty(V)&&$e(t,i,V,null,o,q);for(X in o)q=o[X],F=a[X],!o.hasOwnProperty(X)||q===F||q==null&&F==null||$e(t,i,X,q,o,F)}function b_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,_=h.initiatorType,w=h.duration;if(f&&w&&b_(_)){for(_=0,w=h.responseEnd,o+=1;o<a.length;o++){var I=a[o],B=I.startTime;if(B>w)break;var G=I.transferSize,X=I.initiatorType;G&&b_(X)&&(I=I.responseEnd,_+=G*(I<w?1:(w-B)/(I-B)))}if(--o,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var If=null,Df=null;function wu(t){return t.nodeType===9?t:t.ownerDocument}function A_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Of(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jf=null;function AT(){var t=window.event;return t&&t.type==="popstate"?t===jf?!1:(jf=t,!0):(jf=null,!1)}var C_=typeof setTimeout=="function"?setTimeout:void 0,ST=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,CT=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(t){return x_.resolve(null).then(t).catch(xT)}:C_;function xT(t){setTimeout(function(){throw t})}function Zs(t){return t==="head"}function R_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),so(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")El(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,El(a);for(var f=a.firstChild;f;){var _=f.nextSibling,w=f.nodeName;f[mi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&El(t.ownerDocument.body);a=h}while(a);so(i)}function N_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Mf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mf(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function RT(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[mi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Pn(t.nextSibling),t===null)break}return null}function NT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pn(t.nextSibling),t===null))return null;return t}function I_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Pn(t.nextSibling),t===null))return null;return t}function Vf(t){return t.data==="$?"||t.data==="$~"}function kf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function IT(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Pn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Lf=null;function D_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Pn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function j_(t,i,a){switch(i=wu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function El(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var Un=new Map,M_=new Set;function bu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ds=ne.d;ne.d={f:DT,r:OT,D:jT,C:MT,L:VT,m:kT,X:PT,S:LT,M:UT};function DT(){var t=ds.f(),i=mu();return t||i}function OT(t){var i=Rn(t);i!==null&&i.tag===5&&i.type==="form"?Wg(i):ds.r(t)}var to=typeof document>"u"?null:document;function V_(t,i,a){var o=to;if(o&&typeof i=="string"&&i){var h=rn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),M_.has(h)||(M_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ft(i,"link",t),bt(i),o.head.appendChild(i)))}}function jT(t){ds.D(t),V_("dns-prefetch",t,null)}function MT(t,i){ds.C(t,i),V_("preconnect",t,i)}function VT(t,i,a){ds.L(t,i,a);var o=to;if(o&&t&&i){var h='link[rel="preload"][as="'+rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+rn(a.imageSizes)+'"]')):h+='[href="'+rn(t)+'"]';var f=h;switch(i){case"style":f=no(t);break;case"script":f=io(t)}Un.has(f)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Un.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(Tl(f))||i==="script"&&o.querySelector(wl(f))||(i=o.createElement("link"),Ft(i,"link",t),bt(i),o.head.appendChild(i)))}}function kT(t,i){ds.m(t,i);var a=to;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+rn(o)+'"][href="'+rn(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=io(t)}if(!Un.has(f)&&(t=A({rel:"modulepreload",href:t},i),Un.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(wl(f)))return}o=a.createElement("link"),Ft(o,"link",t),bt(o),a.head.appendChild(o)}}}function LT(t,i,a){ds.S(t,i,a);var o=to;if(o&&t){var h=gi(o).hoistableStyles,f=no(t);i=i||"default";var _=h.get(f);if(!_){var w={loading:0,preload:null};if(_=o.querySelector(Tl(f)))w.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Un.get(f))&&Pf(t,a);var I=_=o.createElement("link");bt(I),Ft(I,"link",t),I._p=new Promise(function(B,G){I.onload=B,I.onerror=G}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Au(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(f,_)}}}function PT(t,i){ds.X(t,i);var a=to;if(a&&t){var o=gi(a).hoistableScripts,h=io(t),f=o.get(h);f||(f=a.querySelector(wl(h)),f||(t=A({src:t,async:!0},i),(i=Un.get(h))&&Uf(t,i),f=a.createElement("script"),bt(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function UT(t,i){ds.M(t,i);var a=to;if(a&&t){var o=gi(a).hoistableScripts,h=io(t),f=o.get(h);f||(f=a.querySelector(wl(h)),f||(t=A({src:t,async:!0,type:"module"},i),(i=Un.get(h))&&Uf(t,i),f=a.createElement("script"),bt(f),Ft(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function k_(t,i,a,o){var h=(h=sn.current)?bu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=no(a.href),a=gi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var f=gi(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Tl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),f||zT(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=gi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function no(t){return'href="'+rn(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function L_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function zT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ft(i,"link",a),bt(i),t.head.appendChild(i))}function io(t){return'[src="'+rn(t)+'"]'}function wl(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+rn(a.href)+'"]');if(o)return i.instance=o,bt(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),bt(o),Ft(o,"style",h),Au(o,a.precedence,t),i.instance=o;case"stylesheet":h=no(a.href);var f=t.querySelector(Tl(h));if(f)return i.state.loading|=4,i.instance=f,bt(f),f;o=L_(a),(h=Un.get(h))&&Pf(o,h),f=(t.ownerDocument||t).createElement("link"),bt(f);var _=f;return _._p=new Promise(function(w,I){_.onload=w,_.onerror=I}),Ft(f,"link",o),i.state.loading|=4,Au(f,a.precedence,t),i.instance=f;case"script":return f=io(a.src),(h=t.querySelector(wl(f)))?(i.instance=h,bt(h),h):(o=a,(h=Un.get(f))&&(o=A({},a),Uf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),Ft(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Au(o,a.precedence,t));return i.instance}function Au(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var w=o[_];if(w.dataset.precedence===i)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Pf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Uf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Su=null;function U_(t,i,a){if(Su===null){var o=new Map,h=Su=new Map;h.set(a,o)}else h=Su,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[mi]||f[wt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var w=o.get(_);w?w.push(f):o.set(_,[f])}}return o}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function BT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function B_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function qT(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(o.href),f=i.querySelector(Tl(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Cu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,bt(f);return}f=i.ownerDocument||i,o=L_(o),(h=Un.get(h))&&Pf(o,h),f=f.createElement("link"),bt(f);var _=f;_._p=new Promise(function(w,I){_.onload=w,_.onerror=I}),Ft(f,"link",o),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Cu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var zf=0;function HT(t,i){return t.stylesheets&&t.count===0&&Ru(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&zf===0&&(zf=62500*bT());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>zf?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Cu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xu=null;function Ru(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xu=new Map,i.forEach(FT,t),xu=null,Cu.call(t))}function FT(t,i){if(!(i.state.loading&4)){var a=xu.get(t);if(a)var o=a.get(null);else{a=new Map,xu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||o,f===o&&a.set(null,h),a.set(_,h),this.count++,o=Cu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var bl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function GT(t,i,a,o,h,f,_,w,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function q_(t,i,a,o,h,f,_,w,I,B,G,X){return t=new GT(t,i,a,_,I,B,G,X,w),i=1,f===!0&&(i|=24),f=_n(3,null,null,i),t.current=f,f.stateNode=t,i=_d(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},wd(f),t}function H_(t){return t?(t=Ma,t):Ma}function F_(t,i,a,o,h,f){h=H_(h),o.context===null?o.context=h:o.pendingContext=h,o=Bs(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=qs(t,o,i),a!==null&&(hn(a,t,i),tl(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Bf(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=Fr(t,67108864);i!==null&&hn(i,t,67108864),Bf(t,67108864)}}function K_(t){if(t.tag===13||t.tag===31){var i=bn();i=Or(i);var a=Fr(t,i);a!==null&&hn(a,t,i),Bf(t,i)}}var Nu=!0;function QT(t,i,a,o){var h=Q.T;Q.T=null;var f=ne.p;try{ne.p=2,qf(t,i,a,o)}finally{ne.p=f,Q.T=h}}function KT(t,i,a,o){var h=Q.T;Q.T=null;var f=ne.p;try{ne.p=8,qf(t,i,a,o)}finally{ne.p=f,Q.T=h}}function qf(t,i,a,o){if(Nu){var h=Hf(o);if(h===null)Rf(t,i,o,Iu,a),X_(t,o);else if(XT(h,t,i,a,o))o.stopPropagation();else if(X_(t,o),i&4&&-1<YT.indexOf(t)){for(;h!==null;){var f=Rn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=ui(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var I=1<<31-st(_);w.entanglements[1]|=I,_&=~I}Ni(f),(Be&6)===0&&(du=Mt()+500,yl(0))}}break;case 31:case 13:w=Fr(f,2),w!==null&&hn(w,f,2),mu(),Bf(f,2)}if(f=Hf(o),f===null&&Rf(t,i,o,Iu,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Rf(t,i,o,null,a)}}function Hf(t){return t=Nn(t),Ff(t)}var Iu=null;function Ff(t){if(Iu=null,t=pi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Iu=t,null}function Y_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qi()){case Rr:return 2;case Ss:return 8;case se:case ve:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var Gf=!1,Js=null,er=null,tr=null,Al=new Map,Sl=new Map,nr=[],YT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(t,i){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Al.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(i.pointerId)}}function Cl(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Rn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function XT(t,i,a,o,h){switch(i){case"focusin":return Js=Cl(Js,t,i,a,o,h),!0;case"dragenter":return er=Cl(er,t,i,a,o,h),!0;case"mouseover":return tr=Cl(tr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return Al.set(f,Cl(Al.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Sl.set(f,Cl(Sl.get(f)||null,t,i,a,o,h)),!0}return!1}function $_(t){var i=pi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Hn(t.priority,function(){K_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Hn(t.priority,function(){K_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Uo=o,a.target.dispatchEvent(o),Uo=null}else return i=Rn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function W_(t,i,a){Du(t)&&a.delete(i)}function $T(){Gf=!1,Js!==null&&Du(Js)&&(Js=null),er!==null&&Du(er)&&(er=null),tr!==null&&Du(tr)&&(tr=null),Al.forEach(W_),Sl.forEach(W_)}function Ou(t,i){t.blockedOn===i&&(t.blockedOn=null,Gf||(Gf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$T)))}var ju=null;function Z_(t){ju!==t&&(ju=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ju===t&&(ju=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Ff(o||a)===null)continue;break}var f=Rn(a);f!==null&&(t.splice(i,3),i-=3,qd(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function so(t){function i(I){return Ou(I,t)}Js!==null&&Ou(Js,t),er!==null&&Ou(er,t),tr!==null&&Ou(tr,t),Al.forEach(i),Sl.forEach(i);for(var a=0;a<nr.length;a++){var o=nr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&nr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],_=h[Vt]||null;if(typeof f=="function")_||Z_(a);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Vt]||null)w=_.formAction;else if(Ff(h)!==null)continue}else w=_.action;typeof w=="function"?a[o+1]=w:(a.splice(o,3),o-=3),Z_(a)}}}function J_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Qf(t){this._internalRoot=t}Mu.prototype.render=Qf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=bn();F_(a,o,t,i,null,null)},Mu.prototype.unmount=Qf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;F_(t.current,2,null,t,null,null),mu(),i[fi]=null}};function Mu(t){this._internalRoot=t}Mu.prototype.unstable_scheduleHydration=function(t){if(t){var i=mc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<nr.length&&i!==0&&i<nr[a].priority;a++);nr.splice(a,0,t),a===0&&$_(t)}};var ev=e.version;if(ev!=="19.2.0")throw Error(r(527,ev,"19.2.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=E(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var WT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{Jt=Vu.inject(WT),ft=Vu}catch{}}return Rl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=oy,f=ly,_=cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=q_(t,1,!1,null,null,a,o,null,h,f,_,J_),t[fi]=i.current,xf(t),new Qf(i)},Rl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=oy,_=ly,w=cy,I=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=q_(t,1,!0,i,a??null,o,h,I,f,_,w,J_),i.context=H_(null),a=i.current,o=bn(),o=Or(o),h=Bs(o),h.callback=null,qs(a,h,o),a=o,i.current.lanes=a,Ir(i,a),Ni(i),t[fi]=i.current,xf(t),new Mu(i)},Rl.version="19.2.0",Rl}var av;function lw(){if(av)return Yf.exports;av=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Yf.exports=ow(),Yf.exports}var cw=lw();const uw=()=>{};var ov={};const F0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},hw=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],d=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],d=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,p=d?s[l+1]:0,y=l+2<s.length,E=y?s[l+2]:0,T=c>>2,A=(c&3)<<4|p>>4;let x=(p&15)<<2|E>>6,P=E&63;y||(P=64,d||(x=64)),r.push(n[T],n[A],n[x],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(F0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):hw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const E=l<s.length?n[s.charAt(l)]:64;++l;const A=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||E==null||A==null)throw new dw;const x=c<<2|p>>4;if(r.push(x),E!==64){const P=p<<4&240|E>>2;if(r.push(P),A!==64){const K=E<<6&192|A;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fw=function(s){const e=F0(s);return G0.encodeByteArray(e,!0)},eh=function(s){return fw(s).replace(/\./g,"")},Q0=function(s){try{return G0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pw=()=>mw().__FIREBASE_DEFAULTS__,gw=()=>{if(typeof process>"u"||typeof ov>"u")return;const s=ov.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Q0(s[1]);return e&&JSON.parse(e)},Sh=()=>{try{return uw()||pw()||gw()||yw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},K0=s=>Sh()?.emulatorHosts?.[s],Y0=s=>{const e=K0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X0=()=>Sh()?.config,$0=s=>Sh()?.[`_${s}`];class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function fa(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lm(s){return(await fetch(s,{credentials:"include"})).ok}function W0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[eh(JSON.stringify(n)),eh(JSON.stringify(d)),""].join(".")}const Vl={};function vw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?s.emulator.push(e):s.prod.push(e);return s}function Ew(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let lv=!1;function Pm(s,e){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||Vl[s]===e||Vl[s]||lv)return;Vl[s]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",c=vw().prod.length>0;function d(){const x=document.getElementById(r);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,P){x.setAttribute("width","24"),x.setAttribute("id",P),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function E(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{lv=!0,d()},x}function T(x,P){x.setAttribute("id",P),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function A(){const x=Ew(r),P=n("text"),K=document.getElementById(P)||document.createElement("span"),J=n("learnmore"),k=document.getElementById(J)||document.createElement("a"),U=n("preprendIcon"),oe=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const Z=x.element;p(Z),T(k,J);const ie=E();y(oe,U),Z.append(oe,K,k,ie),document.body.appendChild(Z)}c?(K.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function ww(){const s=Sh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Sw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cw(){const s=Wt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function xw(){return!ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rw(){try{return typeof indexedDB=="object"}catch{return!1}}function Nw(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const Iw="FirebaseError";class qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Iw,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?Dw(c,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new qi(l,p,r)}}function Dw(s,e){return s.replace(Ow,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const Ow=/\{\$([^}]+)}/g;function jw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function oa(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],d=e[l];if(cv(c)&&cv(d)){if(!oa(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function cv(s){return s!==null&&typeof s=="object"}function Wl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Il(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Mw(s,e){const n=new Vw(s,e);return n.subscribe.bind(n)}class Vw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kw(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Wf),l.error===void 0&&(l.error=Wf),l.complete===void 0&&(l.complete=Wf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Wf(){}function _t(s){return s&&s._delegate?s._delegate:s}class mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class Lw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _w;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uw(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&d.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pw(s){return s===ia?void 0:s}function Uw(s){return s.instantiationMode==="EAGER"}class zw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Oe||(Oe={}));const Bw={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},qw=Oe.INFO,Hw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Fw=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=Hw[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=qw,this._logHandler=Fw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Gw=(s,e)=>e.some(n=>s instanceof n);let uv,hv;function Qw(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kw(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z0=new WeakMap,um=new WeakMap,J0=new WeakMap,Zf=new WeakMap,zm=new WeakMap;function Yw(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(ur(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Z0.set(n,s)}).catch(()=>{}),zm.set(e,s),e}function Xw(s){if(um.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});um.set(s,e)}let hm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return um.get(s);if(e==="objectStoreNames")return s.objectStoreNames||J0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function $w(s){hm=s(hm)}function Ww(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Jf(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),ur(r)}:Kw().includes(s)?function(...e){return s.apply(Jf(this),e),ur(Z0.get(this))}:function(...e){return ur(s.apply(Jf(this),e))}}function Zw(s){return typeof s=="function"?Ww(s):(s instanceof IDBTransaction&&Xw(s),Gw(s,Qw())?new Proxy(s,hm):s)}function ur(s){if(s instanceof IDBRequest)return Yw(s);if(Zf.has(s))return Zf.get(s);const e=Zw(s);return e!==s&&(Zf.set(s,e),zm.set(e,s)),e}const Jf=s=>zm.get(s);function Jw(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,e),p=ur(d);return r&&d.addEventListener("upgradeneeded",y=>{r(ur(d.result),y.oldVersion,y.newVersion,ur(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),p}const eb=["get","getKey","getAll","getAllKeys","count"],tb=["put","add","delete","clear"],em=new Map;function dv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(em.get(e))return em.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=tb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||eb.includes(n)))return;const c=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(p.shift())),(await Promise.all([E[n](...p),l&&y.done]))[0]};return em.set(e,c),c}$w(s=>({...s,get:(e,n,r)=>dv(e,n)||s.get(e,n,r),has:(e,n)=>!!dv(e,n)||s.has(e,n)}));class nb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ib(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ib(s){return s.getComponent()?.type==="VERSION"}const dm="@firebase/app",fv="0.14.6";const _s=new Um("@firebase/app"),sb="@firebase/app-compat",rb="@firebase/analytics-compat",ab="@firebase/analytics",ob="@firebase/app-check-compat",lb="@firebase/app-check",cb="@firebase/auth",ub="@firebase/auth-compat",hb="@firebase/database",db="@firebase/data-connect",fb="@firebase/database-compat",mb="@firebase/functions",pb="@firebase/functions-compat",gb="@firebase/installations",yb="@firebase/installations-compat",_b="@firebase/messaging",vb="@firebase/messaging-compat",Eb="@firebase/performance",Tb="@firebase/performance-compat",wb="@firebase/remote-config",bb="@firebase/remote-config-compat",Ab="@firebase/storage",Sb="@firebase/storage-compat",Cb="@firebase/firestore",xb="@firebase/ai",Rb="@firebase/firestore-compat",Nb="firebase",Ib="12.6.0";const fm="[DEFAULT]",Db={[dm]:"fire-core",[sb]:"fire-core-compat",[ab]:"fire-analytics",[rb]:"fire-analytics-compat",[lb]:"fire-app-check",[ob]:"fire-app-check-compat",[cb]:"fire-auth",[ub]:"fire-auth-compat",[hb]:"fire-rtdb",[db]:"fire-data-connect",[fb]:"fire-rtdb-compat",[mb]:"fire-fn",[pb]:"fire-fn-compat",[gb]:"fire-iid",[yb]:"fire-iid-compat",[_b]:"fire-fcm",[vb]:"fire-fcm-compat",[Eb]:"fire-perf",[Tb]:"fire-perf-compat",[wb]:"fire-rc",[bb]:"fire-rc-compat",[Ab]:"fire-gcs",[Sb]:"fire-gcs-compat",[Cb]:"fire-fst",[Rb]:"fire-fst-compat",[xb]:"fire-vertex","fire-js":"fire-js",[Nb]:"fire-js-all"};const th=new Map,Ob=new Map,mm=new Map;function mv(s,e){try{s.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function la(s){const e=s.name;if(mm.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,s);for(const n of th.values())mv(n,s);for(const n of Ob.values())mv(n,s);return!0}function Ch(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function An(s){return s==null?!1:s.settings!==void 0}const jb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new $l("app","Firebase",jb);class Mb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const ma=Ib;function e1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:fm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw hr.create("bad-app-name",{appName:String(l)});if(n||(n=X0()),!n)throw hr.create("no-options");const c=th.get(l);if(c){if(oa(n,c.options)&&oa(r,c.config))return c;throw hr.create("duplicate-app",{appName:l})}const d=new zw(l);for(const y of mm.values())d.addComponent(y);const p=new Mb(n,r,d);return th.set(l,p),p}function Bm(s=fm){const e=th.get(s);if(!e&&s===fm&&X0())return e1();if(!e)throw hr.create("no-app",{appName:s});return e}function Di(s,e,n){let r=Db[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(d.join(" "));return}la(new mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Vb="firebase-heartbeat-database",kb=1,Bl="firebase-heartbeat-store";let tm=null;function t1(){return tm||(tm=Jw(Vb,kb,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(s=>{throw hr.create("idb-open",{originalErrorMessage:s.message})})),tm}async function Lb(s){try{const n=(await t1()).transaction(Bl),r=await n.objectStore(Bl).get(n1(s));return await n.done,r}catch(e){if(e instanceof qi)_s.warn(e.message);else{const n=hr.create("idb-get",{originalErrorMessage:e?.message});_s.warn(n.message)}}}async function pv(s,e){try{const r=(await t1()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,n1(s)),await r.done}catch(n){if(n instanceof qi)_s.warn(n.message);else{const r=hr.create("idb-set",{originalErrorMessage:n?.message});_s.warn(r.message)}}}function n1(s){return`${s.name}!${s.options.appId}`}const Pb=1024,Ub=30;class zb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Ub){const l=Hb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gv(),{heartbeatsToSend:n,unsentEntries:r}=Bb(this._heartbeatsCache.heartbeats),l=eh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return _s.warn(e),""}}}function gv(){return new Date().toISOString().substring(0,10)}function Bb(s,e=Pb){const n=[];let r=s.slice();for(const l of s){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),yv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),yv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rw()?Nw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yv(s){return eh(JSON.stringify({version:2,heartbeats:s})).length}function Hb(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function Fb(s){la(new mr("platform-logger",e=>new nb(e),"PRIVATE")),la(new mr("heartbeat",e=>new zb(e),"PRIVATE")),Di(dm,fv,s),Di(dm,fv,"esm2020"),Di("fire-js","")}Fb("");function i1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gb=i1,s1=new $l("auth","Firebase",i1());const nh=new Um("@firebase/auth");function Qb(s,...e){nh.logLevel<=Oe.WARN&&nh.warn(`Auth (${ma}): ${s}`,...e)}function Fu(s,...e){nh.logLevel<=Oe.ERROR&&nh.error(`Auth (${ma}): ${s}`,...e)}function ii(s,...e){throw qm(s,...e)}function Oi(s,...e){return qm(s,...e)}function r1(s,e,n){const r={...Gb(),[e]:n};return new $l("auth","Firebase",r).create(e,{appName:s.name})}function gs(s){return r1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return s1.create(s,...e)}function ge(s,e,...n){if(!s)throw qm(e,...n)}function ms(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fu(e),new Error(e)}function vs(s,e){s||ms(e)}function pm(){return typeof self<"u"&&self.location?.href||""}function Kb(){return _v()==="http:"||_v()==="https:"}function _v(){return typeof self<"u"&&self.location?.protocol||null}function Yb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kb()||Aw()||"connection"in navigator)?navigator.onLine:!0}function Xb(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,vs(n>e,"Short delay should be less than long delay!"),this.isMobile=Tw()||Sw()}get(){return Yb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hm(s,e){vs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class a1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $b={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Wb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zb=new Zl(3e4,6e4);function ws(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function bs(s,e,n,r,l={}){return o1(s,l,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const p=Wl({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const E={method:e,headers:y,...c};return bw()||(E.referrerPolicy="no-referrer"),s.emulatorConfig&&fa(s.emulatorConfig.host)&&(E.credentials="include"),a1.fetch()(await l1(s,s.config.apiHost,n,p),E)})}async function o1(s,e,n){s._canInitEmulator=!1;const r={...$b,...e};try{const l=new eA(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Lu(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[y,E]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lu(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Lu(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw Lu(s,"user-disabled",d);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw r1(s,T,E);ii(s,T)}}catch(l){if(l instanceof qi)throw l;ii(s,"network-request-failed",{message:String(l)})}}async function Jl(s,e,n,r,l={}){const c=await bs(s,e,n,r,l);return"mfaPendingCredential"in c&&ii(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function l1(s,e,n,r){const l=`${e}${n}?${r}`,c=s,d=c.config.emulator?Hm(s.config,l):`${s.config.apiScheme}://${l}`;return Wb.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Jb(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),Zb.get())})}}function Lu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Oi(s,e,r);return l.customData._tokenResponse=n,l}function vv(s){return s!==void 0&&s.enterprise!==void 0}class tA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Jb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nA(s,e){return bs(s,"GET","/v2/recaptchaConfig",ws(s,e))}async function iA(s,e){return bs(s,"POST","/v1/accounts:delete",e)}async function ih(s,e){return bs(s,"POST","/v1/accounts:lookup",e)}function kl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sA(s,e=!1){const n=_t(s),r=await n.getIdToken(e),l=Fm(r);ge(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:r,authTime:kl(nm(l.auth_time)),issuedAtTime:kl(nm(l.iat)),expirationTime:kl(nm(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function nm(s){return Number(s)*1e3}function Fm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const l=Q0(n);return l?JSON.parse(l):(Fu("Failed to decode base64 JWT payload"),null)}catch(l){return Fu("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Ev(s){const e=Fm(s);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ql(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qi&&rA(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function rA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class aA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sh(s){const e=s.auth,n=await s.getIdToken(),r=await ql(s,ih(e,{idToken:n}));ge(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?c1(l.providerUserInfo):[],d=lA(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!d?.length,E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,T)}async function oA(s){const e=_t(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lA(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function c1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function cA(s,e){const n=await o1(s,{},async()=>{const r=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await l1(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&fa(s.emulatorConfig.host)&&(y.credentials="include"),a1.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uA(s,e){return bs(s,"POST","/v2/accounts:revokeToken",ws(s,e))}class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await cA(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,d=new uo;return r&&(ge(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(ge(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(ge(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return ms("not implemented")}}function sr(s,e){ge(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new aA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ql(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sA(this,e)}reload(){return oA(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await ql(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,E=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:x,isAnonymous:P,providerData:K,stsTokenManager:J}=n;ge(A&&J,e,"internal-error");const k=uo.fromJSON(this.name,J);ge(typeof A=="string",e,"internal-error"),sr(r,e.name),sr(l,e.name),ge(typeof x=="boolean",e,"internal-error"),ge(typeof P=="boolean",e,"internal-error"),sr(c,e.name),sr(d,e.name),sr(p,e.name),sr(y,e.name),sr(E,e.name),sr(T,e.name);const U=new ei({uid:A,auth:e,email:l,emailVerified:x,displayName:r,isAnonymous:P,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:k,createdAt:E,lastLoginAt:T});return K&&Array.isArray(K)&&(U.providerData=K.map(oe=>({...oe}))),y&&(U._redirectEventId=y),U}static async _fromIdTokenResponse(e,n,r=!1){const l=new uo;l.updateFromServerResponse(n);const c=new ei({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await sh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];ge(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?c1(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new uo;p.updateFromIdToken(r);const y=new ei({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,E),y}}const Tv=new Map;function ps(s){vs(s instanceof Function,"Expected a class definition");let e=Tv.get(s);return e?(vs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Tv.set(s,e),e)}class u1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u1.type="NONE";const wv=u1;function Gu(s,e,n){return`firebase:${s}:${e}:${n}`}class ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Gu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Gu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ih(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ho(ps(wv),e,r);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=l[0]||ps(wv);const d=Gu(r,e.config.apiKey,e.name);let p=null;for(const E of n)try{const T=await E._get(d);if(T){let A;if(typeof T=="string"){const x=await ih(e,{idToken:T}).catch(()=>{});if(!x)break;A=await ei._fromGetAccountInfoResponse(e,x,T)}else A=ei._fromJSON(e,T);E!==c&&(p=A),c=E;break}}catch{}const y=l.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new ho(c,e,r):(c=y[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async E=>{if(E!==c)try{await E._remove(d)}catch{}})),new ho(c,e,r))}}function bv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g1(e))return"Blackberry";if(y1(e))return"Webos";if(d1(e))return"Safari";if((e.includes("chrome/")||f1(e))&&!e.includes("edge/"))return"Chrome";if(p1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function h1(s=Wt()){return/firefox\//i.test(s)}function d1(s=Wt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f1(s=Wt()){return/crios\//i.test(s)}function m1(s=Wt()){return/iemobile/i.test(s)}function p1(s=Wt()){return/android/i.test(s)}function g1(s=Wt()){return/blackberry/i.test(s)}function y1(s=Wt()){return/webos/i.test(s)}function Gm(s=Wt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hA(s=Wt()){return Gm(s)&&!!window.navigator?.standalone}function dA(){return Cw()&&document.documentMode===10}function _1(s=Wt()){return Gm(s)||p1(s)||y1(s)||g1(s)||/windows phone/i.test(s)||m1(s)}function v1(s,e=[]){let n;switch(s){case"Browser":n=bv(Wt());break;case"Worker":n=`${bv(Wt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ma}/${r}`}class fA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,p)=>{try{const y=e(c);d(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function mA(s,e={}){return bs(s,"GET","/v2/passwordPolicy",ws(s,e))}const pA=6;class gA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class yA{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Av(this),this.idTokenSubscription=new Av(this),this.beforeStateQueue=new fA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ih(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(An(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(gs(this));const n=e?_t(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mA(this),n=new gA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Qb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wr(s){return _t(s)}class Av{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mw(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _A(s){xh=s}function E1(s){return xh.loadJS(s)}function vA(){return xh.recaptchaEnterpriseScript}function EA(){return xh.gapiScript}function TA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class wA{constructor(){this.enterprise=new bA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",T1="NO_RECAPTCHA";class SA{constructor(e){this.type=AA,this.auth=wr(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{nA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const E=new tA(y);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,d(E.siteKey)}}).catch(y=>{p(y)})})}function l(c,d,p){const y=window.grecaptcha;vv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(E=>{d(E)}).catch(()=>{d(T1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wA().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(p=>{if(!n&&vv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=vA();y.length!==0&&(y+=p),E1(y).then(()=>{l(p,c,d)}).catch(E=>{d(E)})}}).catch(p=>{d(p)})})}}async function Sv(s,e,n,r=!1,l=!1){const c=new SA(s);let d;if(l)d=T1;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,E=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function rh(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Sv(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Sv(s,e,n,n==="getOobCode");return r(s,d)}else return Promise.reject(c)})}function CA(s,e){const n=Ch(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(oa(c,e??{}))return l;ii(l,"already-initialized")}return n.initialize({options:e})}function xA(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function RA(s,e,n){const r=wr(s);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=w1(e),{host:d,port:p}=NA(e),y=p===null?"":`:${p}`,E={url:`${c}//${d}${y}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(oa(E,r.config.emulator)&&oa(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=E,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,fa(d)?(Lm(`${c}//${d}${y}`),Pm("Auth",!0)):IA()}function w1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function NA(s){const e=w1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:Cv(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:Cv(d)}}}function Cv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function IA(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function DA(s,e){return bs(s,"POST","/v1/accounts:signUp",e)}async function OA(s,e){return Jl(s,"POST","/v1/accounts:signInWithPassword",ws(s,e))}async function b1(s,e){return bs(s,"POST","/v1/accounts:sendOobCode",ws(s,e))}async function jA(s,e){return b1(s,e)}async function MA(s,e){return b1(s,e)}async function VA(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",ws(s,e))}async function kA(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",ws(s,e))}class Hl extends Qm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,n,"signInWithPassword",OA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,r,"signUpPassword",DA);case"emailLink":return kA(e,{idToken:n,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fo(s,e){return Jl(s,"POST","/v1/accounts:signInWithIdp",ws(s,e))}const LA="http://localhost";class ca extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const d=new ca(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:LA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wl(n)}return e}}function PA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UA(s){const e=Nl(Il(s)).link,n=e?Nl(Il(e)).deep_link_id:null,r=Nl(Il(s)).deep_link_id;return(r?Nl(Il(r)).link:null)||r||n||e||s}class Km{constructor(e){const n=Nl(Il(e)),r=n.apiKey??null,l=n.oobCode??null,c=PA(n.mode??null);ge(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UA(e);try{return new Km(n)}catch{return null}}}class To{constructor(){this.providerId=To.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Km.parseLink(n);return ge(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}To.PROVIDER_ID="password";To.EMAIL_PASSWORD_SIGN_IN_METHOD="password";To.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class A1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ec extends A1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rr extends ec{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";class ar extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ca._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";class or extends ec{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";class lr extends ec{constructor(){super("twitter.com")}static credential(e,n){return ca._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";async function zA(s,e){return Jl(s,"POST","/v1/accounts:signUp",ws(s,e))}class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await ei._fromIdTokenResponse(e,r,l),d=xv(r);return new ua({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=xv(r);return new ua({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function xv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class ah extends qi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new ah(e,n,r,l)}}function S1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(s,c,e,r):c})}async function BA(s,e,n=!1){const r=await ql(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ua._forOperation(s,"link",r)}async function qA(s,e,n=!1){const{auth:r}=s;if(An(r.app))return Promise.reject(gs(r));const l="reauthenticate";try{const c=await ql(s,S1(r,l,e,s),n);ge(c.idToken,r,"internal-error");const d=Fm(c.idToken);ge(d,r,"internal-error");const{sub:p}=d;return ge(s.uid===p,r,"user-mismatch"),ua._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),c}}async function C1(s,e,n=!1){if(An(s.app))return Promise.reject(gs(s));const r="signIn",l=await S1(s,r,e),c=await ua._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function HA(s,e){return C1(wr(s),e)}async function x1(s){const e=wr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FA(s,e,n){const r=wr(s);await rh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MA)}async function GA(s,e,n){if(An(s.app))return Promise.reject(gs(s));const r=wr(s),d=await rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zA).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&x1(s),y}),p=await ua._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function QA(s,e,n){return An(s.app)?Promise.reject(gs(s)):HA(_t(s),To.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x1(s),r})}async function KA(s,e){const n=_t(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await jA(n.auth,l);c!==s.email&&await s.reload()}function YA(s,e,n,r){return _t(s).onIdTokenChanged(e,n,r)}function XA(s,e,n){return _t(s).beforeAuthStateChanged(e,n)}function $A(s,e,n,r){return _t(s).onAuthStateChanged(e,n,r)}function R1(s){return _t(s).signOut()}const oh="__sak";class N1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const WA=1e3,ZA=10;class I1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);dA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,ZA):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I1.type="LOCAL";const JA=I1;class D1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D1.type="SESSION";const O1=D1;function eS(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async E=>E(n.origin,c)),y=await eS(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];function Ym(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class tS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,y)=>{const E=Ym("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(A){const x=A;if(x.data.eventId===E)switch(x.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:E,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ji(){return window}function nS(s){ji().location.href=s}function j1(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function iS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sS(){return navigator?.serviceWorker?.controller||null}function rS(){return j1()?self:null}const M1="firebaseLocalStorageDb",aS=1,lh="firebaseLocalStorage",V1="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(s,e){return s.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function oS(){const s=indexedDB.deleteDatabase(M1);return new tc(s).toPromise()}function ym(){const s=indexedDB.open(M1,aS);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(lh,{keyPath:V1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await oS(),e(await ym()))})})}async function Rv(s,e,n){const r=Nh(s,!0).put({[V1]:e,value:n});return new tc(r).toPromise()}async function lS(s,e){const n=Nh(s,!1).get(e),r=await new tc(n).toPromise();return r===void 0?null:r.value}function Nv(s,e){const n=Nh(s,!0).delete(e);return new tc(n).toPromise()}const cS=800,uS=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(rS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iS(),!this.activeServiceWorker)return;this.sender=new tS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ym();return await Rv(e,oh,"1"),await Nv(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Nh(l,!1).getAll();return new tc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const hS=k1;new Zl(3e4,6e4);function dS(s,e){return e?ps(e):(ge(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Xm extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fS(s){return C1(s.auth,new Xm(s),s.bypassAuthState)}function mS(s){const{auth:e,user:n}=s;return ge(n,e,"internal-error"),qA(n,new Xm(s),s.bypassAuthState)}async function pS(s){const{auth:e,user:n}=s;return ge(n,e,"internal-error"),BA(n,new Xm(s),s.bypassAuthState)}class L1{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fS;case"linkViaPopup":case"linkViaRedirect":return pS;case"reauthViaPopup":case"reauthViaRedirect":return mS;default:ii(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gS=new Zl(2e3,1e4);class co extends L1{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gS.get())};e()}}co.currentPopupAction=null;const yS="pendingRedirect",Qu=new Map;class _S extends L1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await vS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vS(s,e){const n=wS(e),r=TS(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function ES(s,e){Qu.set(s._key(),e)}function TS(s){return ps(s._redirectPersistence)}function wS(s){return Gu(yS,s.config.apiKey,s.name)}async function bS(s,e,n=!1){if(An(s.app))return Promise.reject(gs(s));const r=wr(s),l=dS(r,e),d=await new _S(r,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const AS=600*1e3;class SS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!P1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Oi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}}function Iv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function P1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function CS(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P1(s);default:return!1}}async function xS(s,e={}){return bs(s,"GET","/v1/projects",e)}const RS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NS=/^https?/;async function IS(s){if(s.config.emulator)return;const{authorizedDomains:e}=await xS(s);for(const n of e)try{if(DS(n))return}catch{}ii(s,"unauthorized-domain")}function DS(s){const e=pm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!NS.test(n))return!1;if(RS.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const OS=new Zl(3e4,6e4);function Dv(){const s=ji().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function jS(s){return new Promise((e,n)=>{function r(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Oi(s,"network-request-failed"))},timeout:OS.get()})}if(ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ji().gapi?.load)r();else{const l=TA("iframefcb");return ji()[l]=()=>{gapi.load?r():n(Oi(s,"network-request-failed"))},E1(`${EA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ku=null,e})}let Ku=null;function MS(s){return Ku=Ku||jS(s),Ku}const VS=new Zl(5e3,15e3),kS="__/auth/iframe",LS="emulator/auth/iframe",PS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},US=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zS(s){const e=s.config;ge(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Hm(e,LS):`https://${s.config.authDomain}/${kS}`,r={apiKey:e.apiKey,appName:s.name,v:ma},l=US.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Wl(r).slice(1)}`}async function BS(s){const e=await MS(s),n=ji().gapi;return ge(n,s,"internal-error"),e.open({where:document.body,url:zS(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PS,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=Oi(s,"network-request-failed"),p=ji().setTimeout(()=>{c(d)},VS.get());function y(){ji().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(d)})}))}const qS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HS=500,FS=600,GS="_blank",QS="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KS(s,e,n,r=HS,l=FS){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...qS,width:r.toString(),height:l.toString(),top:c,left:d},E=Wt().toLowerCase();n&&(p=f1(E)?GS:n),h1(E)&&(e=e||QS,y.scrollbars="yes");const T=Object.entries(y).reduce((x,[P,K])=>`${x}${P}=${K},`,"");if(hA(E)&&p!=="_self")return YS(e||"",p),new Ov(null);const A=window.open(e||"",p,T);ge(A,s,"popup-blocked");try{A.focus()}catch{}return new Ov(A)}function YS(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const XS="__/auth/handler",$S="emulator/auth/handler",WS=encodeURIComponent("fac");async function jv(s,e,n,r,l,c){ge(s.config.authDomain,s,"auth-domain-config-required"),ge(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ma,eventId:l};if(e instanceof A1){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",jw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof ec){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),E=y?`#${WS}=${encodeURIComponent(y)}`:"";return`${ZS(s)}?${Wl(p).slice(1)}${E}`}function ZS({config:s}){return s.emulator?Hm(s,$S):`https://${s.authDomain}/${XS}`}const im="webStorageSupport";class JS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=bS,this._overrideRedirectResult=ES}async _openPopup(e,n,r,l){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await jv(e,n,r,pm(),l);return KS(e,c,Ym())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await jv(e,n,r,pm(),l);return nS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(vs(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BS(e),r=new SS(e);return n.register("authEvent",l=>(ge(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(im,{type:im},l=>{const c=l?.[0]?.[im];c!==void 0&&n(!!c),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _1()||d1()||Gm()}}const eC=JS;var Mv="@firebase/auth",Vv="1.11.1";class tC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iC(s){la(new mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;ge(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v1(s)},E=new yA(r,l,c,y);return xA(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),la(new mr("auth-internal",e=>{const n=wr(e.getProvider("auth").getImmediate());return(r=>new tC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(Mv,Vv,nC(s)),Di(Mv,Vv,"esm2020")}const sC=300,rC=$0("authIdTokenMaxAge")||sC;let kv=null;const aC=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rC)return;const l=n?.token;kv!==l&&(kv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function oC(s=Bm()){const e=Ch(s,"auth");if(e.isInitialized())return e.getImmediate();const n=CA(s,{popupRedirectResolver:eC,persistence:[hS,JA,O1]}),r=$0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=aC(c.toString());XA(n,d,()=>d(n.currentUser)),YA(n,p=>d(p))}}const l=K0("auth");return l&&RA(n,`http://${l}`),n}function lC(){return document.getElementsByTagName("head")?.[0]??document}_A({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=Oi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",lC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iC("Browser");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dr,U1;(function(){var s;function e(D,S){function N(){}N.prototype=S.prototype,D.F=S.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(M,R,j){for(var C=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)C[xe-2]=arguments[xe];return S.prototype[R].apply(M,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,S,N){N||(N=0);const M=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)M[R]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(R=0;R<16;++R)M[R]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=D.g[0],N=D.g[1],R=D.g[2];let j=D.g[3],C;C=S+(j^N&(R^j))+M[0]+3614090360&4294967295,S=N+(C<<7&4294967295|C>>>25),C=j+(R^S&(N^R))+M[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=R+(N^j&(S^N))+M[2]+606105819&4294967295,R=j+(C<<17&4294967295|C>>>15),C=N+(S^R&(j^S))+M[3]+3250441966&4294967295,N=R+(C<<22&4294967295|C>>>10),C=S+(j^N&(R^j))+M[4]+4118548399&4294967295,S=N+(C<<7&4294967295|C>>>25),C=j+(R^S&(N^R))+M[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=R+(N^j&(S^N))+M[6]+2821735955&4294967295,R=j+(C<<17&4294967295|C>>>15),C=N+(S^R&(j^S))+M[7]+4249261313&4294967295,N=R+(C<<22&4294967295|C>>>10),C=S+(j^N&(R^j))+M[8]+1770035416&4294967295,S=N+(C<<7&4294967295|C>>>25),C=j+(R^S&(N^R))+M[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=R+(N^j&(S^N))+M[10]+4294925233&4294967295,R=j+(C<<17&4294967295|C>>>15),C=N+(S^R&(j^S))+M[11]+2304563134&4294967295,N=R+(C<<22&4294967295|C>>>10),C=S+(j^N&(R^j))+M[12]+1804603682&4294967295,S=N+(C<<7&4294967295|C>>>25),C=j+(R^S&(N^R))+M[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=R+(N^j&(S^N))+M[14]+2792965006&4294967295,R=j+(C<<17&4294967295|C>>>15),C=N+(S^R&(j^S))+M[15]+1236535329&4294967295,N=R+(C<<22&4294967295|C>>>10),C=S+(R^j&(N^R))+M[1]+4129170786&4294967295,S=N+(C<<5&4294967295|C>>>27),C=j+(N^R&(S^N))+M[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=R+(S^N&(j^S))+M[11]+643717713&4294967295,R=j+(C<<14&4294967295|C>>>18),C=N+(j^S&(R^j))+M[0]+3921069994&4294967295,N=R+(C<<20&4294967295|C>>>12),C=S+(R^j&(N^R))+M[5]+3593408605&4294967295,S=N+(C<<5&4294967295|C>>>27),C=j+(N^R&(S^N))+M[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=R+(S^N&(j^S))+M[15]+3634488961&4294967295,R=j+(C<<14&4294967295|C>>>18),C=N+(j^S&(R^j))+M[4]+3889429448&4294967295,N=R+(C<<20&4294967295|C>>>12),C=S+(R^j&(N^R))+M[9]+568446438&4294967295,S=N+(C<<5&4294967295|C>>>27),C=j+(N^R&(S^N))+M[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=R+(S^N&(j^S))+M[3]+4107603335&4294967295,R=j+(C<<14&4294967295|C>>>18),C=N+(j^S&(R^j))+M[8]+1163531501&4294967295,N=R+(C<<20&4294967295|C>>>12),C=S+(R^j&(N^R))+M[13]+2850285829&4294967295,S=N+(C<<5&4294967295|C>>>27),C=j+(N^R&(S^N))+M[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=R+(S^N&(j^S))+M[7]+1735328473&4294967295,R=j+(C<<14&4294967295|C>>>18),C=N+(j^S&(R^j))+M[12]+2368359562&4294967295,N=R+(C<<20&4294967295|C>>>12),C=S+(N^R^j)+M[5]+4294588738&4294967295,S=N+(C<<4&4294967295|C>>>28),C=j+(S^N^R)+M[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=R+(j^S^N)+M[11]+1839030562&4294967295,R=j+(C<<16&4294967295|C>>>16),C=N+(R^j^S)+M[14]+4259657740&4294967295,N=R+(C<<23&4294967295|C>>>9),C=S+(N^R^j)+M[1]+2763975236&4294967295,S=N+(C<<4&4294967295|C>>>28),C=j+(S^N^R)+M[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=R+(j^S^N)+M[7]+4139469664&4294967295,R=j+(C<<16&4294967295|C>>>16),C=N+(R^j^S)+M[10]+3200236656&4294967295,N=R+(C<<23&4294967295|C>>>9),C=S+(N^R^j)+M[13]+681279174&4294967295,S=N+(C<<4&4294967295|C>>>28),C=j+(S^N^R)+M[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=R+(j^S^N)+M[3]+3572445317&4294967295,R=j+(C<<16&4294967295|C>>>16),C=N+(R^j^S)+M[6]+76029189&4294967295,N=R+(C<<23&4294967295|C>>>9),C=S+(N^R^j)+M[9]+3654602809&4294967295,S=N+(C<<4&4294967295|C>>>28),C=j+(S^N^R)+M[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=R+(j^S^N)+M[15]+530742520&4294967295,R=j+(C<<16&4294967295|C>>>16),C=N+(R^j^S)+M[2]+3299628645&4294967295,N=R+(C<<23&4294967295|C>>>9),C=S+(R^(N|~j))+M[0]+4096336452&4294967295,S=N+(C<<6&4294967295|C>>>26),C=j+(N^(S|~R))+M[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=R+(S^(j|~N))+M[14]+2878612391&4294967295,R=j+(C<<15&4294967295|C>>>17),C=N+(j^(R|~S))+M[5]+4237533241&4294967295,N=R+(C<<21&4294967295|C>>>11),C=S+(R^(N|~j))+M[12]+1700485571&4294967295,S=N+(C<<6&4294967295|C>>>26),C=j+(N^(S|~R))+M[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=R+(S^(j|~N))+M[10]+4293915773&4294967295,R=j+(C<<15&4294967295|C>>>17),C=N+(j^(R|~S))+M[1]+2240044497&4294967295,N=R+(C<<21&4294967295|C>>>11),C=S+(R^(N|~j))+M[8]+1873313359&4294967295,S=N+(C<<6&4294967295|C>>>26),C=j+(N^(S|~R))+M[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=R+(S^(j|~N))+M[6]+2734768916&4294967295,R=j+(C<<15&4294967295|C>>>17),C=N+(j^(R|~S))+M[13]+1309151649&4294967295,N=R+(C<<21&4294967295|C>>>11),C=S+(R^(N|~j))+M[4]+4149444226&4294967295,S=N+(C<<6&4294967295|C>>>26),C=j+(N^(S|~R))+M[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=R+(S^(j|~N))+M[2]+718787259&4294967295,R=j+(C<<15&4294967295|C>>>17),C=N+(j^(R|~S))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+R&4294967295,D.g[3]=D.g[3]+j&4294967295}r.prototype.v=function(D,S){S===void 0&&(S=D.length);const N=S-this.blockSize,M=this.C;let R=this.h,j=0;for(;j<S;){if(R==0)for(;j<=N;)l(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<S;)if(M[R++]=D.charCodeAt(j++),R==this.blockSize){l(this,M),R=0;break}}else for(;j<S;)if(M[R++]=D[j++],R==this.blockSize){l(this,M),R=0;break}}this.h=R,this.o+=S},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)D[S++]=this.g[N]>>>M&255;return D};function c(D,S){var N=p;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=S(D)}function d(D,S){this.h=S;const N=[];let M=!0;for(let R=D.length-1;R>=0;R--){const j=D[R]|0;M&&j==S||(N[R]=j,M=!1)}this.g=N}var p={};function y(D){return-128<=D&&D<128?c(D,function(S){return new d([S|0],S<0?-1:0)}):new d([D|0],D<0?-1:0)}function E(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return k(E(-D));const S=[];let N=1;for(let M=0;D>=N;M++)S[M]=D/N|0,N*=4294967296;return new d(S,0)}function T(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return k(T(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=E(Math.pow(S,8));let M=A;for(let j=0;j<D.length;j+=8){var R=Math.min(8,D.length-j);const C=parseInt(D.substring(j,j+R),S);R<8?(R=E(Math.pow(S,R)),M=M.j(R).add(E(C))):(M=M.j(N),M=M.add(E(C)))}return M}var A=y(0),x=y(1),P=y(16777216);s=d.prototype,s.m=function(){if(J(this))return-k(this).m();let D=0,S=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);D+=(M>=0?M:4294967296+M)*S,S*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(J(this))return"-"+k(this).toString(D);const S=E(Math.pow(D,6));var N=this;let M="";for(;;){const R=ie(N,S).g;N=U(N,R.j(S));let j=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=R,K(N))return j+M;for(;j.length<6;)j="0"+j;M=j+M}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function J(D){return D.h==-1}s.l=function(D){return D=U(this,D),J(D)?-1:K(D)?0:1};function k(D){const S=D.g.length,N=[];for(let M=0;M<S;M++)N[M]=~D.g[M];return new d(N,~D.h).add(x)}s.abs=function(){return J(this)?k(this):this},s.add=function(D){const S=Math.max(this.g.length,D.g.length),N=[];let M=0;for(let R=0;R<=S;R++){let j=M+(this.i(R)&65535)+(D.i(R)&65535),C=(j>>>16)+(this.i(R)>>>16)+(D.i(R)>>>16);M=C>>>16,j&=65535,C&=65535,N[R]=C<<16|j}return new d(N,N[N.length-1]&-2147483648?-1:0)};function U(D,S){return D.add(k(S))}s.j=function(D){if(K(this)||K(D))return A;if(J(this))return J(D)?k(this).j(k(D)):k(k(this).j(D));if(J(D))return k(this.j(k(D)));if(this.l(P)<0&&D.l(P)<0)return E(this.m()*D.m());const S=this.g.length+D.g.length,N=[];for(var M=0;M<2*S;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let R=0;R<D.g.length;R++){const j=this.i(M)>>>16,C=this.i(M)&65535,xe=D.i(R)>>>16,He=D.i(R)&65535;N[2*M+2*R]+=C*He,oe(N,2*M+2*R),N[2*M+2*R+1]+=j*He,oe(N,2*M+2*R+1),N[2*M+2*R+1]+=C*xe,oe(N,2*M+2*R+1),N[2*M+2*R+2]+=j*xe,oe(N,2*M+2*R+2)}for(D=0;D<S;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=S;D<2*S;D++)N[D]=0;return new d(N,0)};function oe(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function Z(D,S){this.g=D,this.h=S}function ie(D,S){if(K(S))throw Error("division by zero");if(K(D))return new Z(A,A);if(J(D))return S=ie(k(D),S),new Z(k(S.g),k(S.h));if(J(S))return S=ie(D,k(S)),new Z(k(S.g),S.h);if(D.g.length>30){if(J(D)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var N=x,M=S;M.l(D)<=0;)N=ee(N),M=ee(M);var R=ce(N,1),j=ce(M,1);for(M=ce(M,2),N=ce(N,2);!K(M);){var C=j.add(M);C.l(D)<=0&&(R=R.add(N),j=C),M=ce(M,1),N=ce(N,1)}return S=U(D,R.j(S)),new Z(R,S)}for(R=A;D.l(S)>=0;){for(N=Math.max(1,Math.floor(D.m()/S.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),j=E(N),C=j.j(S);J(C)||C.l(D)>0;)N-=M,j=E(N),C=j.j(S);K(j)&&(j=x),R=R.add(j),D=U(D,C)}return new Z(R,D)}s.B=function(D){return ie(this,D).h},s.and=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<S;M++)N[M]=this.i(M)&D.i(M);return new d(N,this.h&D.h)},s.or=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<S;M++)N[M]=this.i(M)|D.i(M);return new d(N,this.h|D.h)},s.xor=function(D){const S=Math.max(this.g.length,D.g.length),N=[];for(let M=0;M<S;M++)N[M]=this.i(M)^D.i(M);return new d(N,this.h^D.h)};function ee(D){const S=D.g.length+1,N=[];for(let M=0;M<S;M++)N[M]=D.i(M)<<1|D.i(M-1)>>>31;return new d(N,D.h)}function ce(D,S){const N=S>>5;S%=32;const M=D.g.length-N,R=[];for(let j=0;j<M;j++)R[j]=S>0?D.i(j+N)>>>S|D.i(j+N+1)<<32-S:D.i(j+N);return new d(R,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,U1=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=E,d.fromString=T,dr=d}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var z1,Dl,B1,Yu,_m,q1,H1,F1;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(u,g){if(g)e:{var v=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var L=u[b];if(!(L in v))break e;v=v[L]}u=u[u.length-1],b=v[u],g=g(b),g!=b&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],b;for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&v.push([b,g[b]]);return v}});var c=c||{},d=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,v){return u.call.apply(u.bind,arguments)}function E(u,g,v){return E=y,E.apply(null,arguments)}function T(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function A(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(b,L,H){for(var te=Array(arguments.length-2),we=2;we<arguments.length;we++)te[we-2]=arguments[we];return g.prototype[L].apply(b,te)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const g=u.length;if(g>0){const v=Array(g);for(let b=0;b<g;b++)v[b]=u[b];return v}return[]}function K(u,g){for(let b=1;b<arguments.length;b++){const L=arguments[b];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=u.length||0;const H=L.length||0;u.length=v+H;for(let te=0;te<H;te++)u[v+te]=L[te]}else u.push(L)}}class J{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(u){d.setTimeout(()=>{throw u},0)}function U(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,v){const b=Z.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var Z=new J(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ce=!1,D=new oe,S=()=>{const u=Promise.resolve(void 0);ee=()=>{u.then(N)}};function N(){for(var u;u=U();){try{u.h.call(u.g)}catch(v){k(v)}var g=Z;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ce=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,g),d.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function xe(u,g){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A(xe,R),xe.prototype.init=function(u,g){const v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ne(u,g,v,b,L){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=L,this.key=++Q,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _e(u,g,v){for(const b in u)g.call(v,u[b],b,u)}function Ce(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function Ke(u){const g={};for(const v in u)g[v]=u[v];return g}const Le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,g){let v,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(v in b)u[v]=b[v];for(let H=0;H<Le.length;H++)v=Le[H],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function tt(u){this.src=u,this.g={},this.h=0}tt.prototype.add=function(u,g,v,b,L){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const te=sn(u,g,b,L);return te>-1?(g=u[te],v||(g.fa=!1)):(g=new ne(g,this.src,H,!!b,L),g.fa=v,u.push(g)),g};function vt(u,g){const v=g.type;if(v in u.g){var b=u.g[v],L=Array.prototype.indexOf.call(b,g,void 0),H;(H=L>=0)&&Array.prototype.splice.call(b,L,1),H&&(he(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function sn(u,g,v,b){for(let L=0;L<u.length;++L){const H=u[L];if(!H.da&&H.listener==g&&H.capture==!!v&&H.ha==b)return L}return-1}var xn="closure_lm_"+(Math.random()*1e6|0),ri={};function Zt(u,g,v,b,L){if(Array.isArray(g)){for(let H=0;H<g.length;H++)Zt(u,g[H],v,b,L);return null}return v=Cr(v),u&&u[He]?u.J(g,v,p(b)?!!b.capture:!1,L):Sr(u,g,v,!1,b,L)}function Sr(u,g,v,b,L,H){if(!g)throw Error("Invalid event type");const te=p(L)?!!L.capture:!!L;let we=Gi(u);if(we||(u[xn]=we=new tt(u)),v=we.add(g,v,b,te,H),v.proxy)return v;if(b=Bn(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)j||(L=te),L===void 0&&(L=!1),u.addEventListener(g.toString(),b,L);else if(u.attachEvent)u.attachEvent(mn(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function u(v){return g.call(u.src,u.listener,v)}const g=oi;return u}function As(u,g,v,b,L){if(Array.isArray(g))for(var H=0;H<g.length;H++)As(u,g[H],v,b,L);else b=p(b)?!!b.capture:!!b,v=Cr(v),u&&u[He]?(u=u.i,H=String(g).toString(),H in u.g&&(g=u.g[H],v=sn(g,v,b,L),v>-1&&(he(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[H],u.h--)))):u&&(u=Gi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=sn(g,v,b,L)),(v=u>-1?g[u]:null)&&ai(v))}function ai(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[He])vt(g.i,u);else{var v=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(v,b,u.capture):g.detachEvent?g.detachEvent(mn(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=Gi(g))?(vt(v,u),v.h==0&&(v.src=null,g[xn]=null)):he(u)}}}function mn(u){return u in ri?ri[u]:ri[u]="on"+u}function oi(u,g){if(u.da)u=!0;else{g=new xe(g,this);const v=u.listener,b=u.ha||u.src;u.fa&&ai(u),u=v.call(b,g)}return u}function Gi(u){return u=u[xn],u instanceof tt?u:null}var li="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cr(u){return typeof u=="function"?u:(u[li]||(u[li]=function(g){return u.handleEvent(g)}),u[li])}function ht(){M.call(this),this.i=new tt(this),this.M=this,this.G=null}A(ht,M),ht.prototype[He]=!0,ht.prototype.removeEventListener=function(u,g,v,b){As(this,u,g,v,b)};function Et(u,g){var v,b=u.G;if(b)for(v=[];b;b=b.G)v.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new R(g,u);else if(g instanceof R)g.target=g.target||u;else{var L=g;g=new R(b,u),Ae(g,L)}L=!0;let H,te;if(v)for(te=v.length-1;te>=0;te--)H=g.g=v[te],L=dt(H,b,!0,g)&&L;if(H=g.g=u,L=dt(H,b,!0,g)&&L,L=dt(H,b,!1,g)&&L,v)for(te=0;te<v.length;te++)H=g.g=v[te],L=dt(H,b,!1,g)&&L}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let b=0;b<v.length;b++)he(v[b]);delete u.g[g],u.h--}}this.G=null},ht.prototype.J=function(u,g,v,b){return this.i.add(String(u),g,!1,v,b)},ht.prototype.K=function(u,g,v,b){return this.i.add(String(u),g,!0,v,b)};function dt(u,g,v,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let H=0;H<g.length;++H){const te=g[H];if(te&&!te.da&&te.capture==v){const we=te.listener,mt=te.ha||te.src;te.fa&&vt(u.i,te),L=we.call(mt,b)!==!1&&L}}return L&&!b.defaultPrevented}function xo(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:d.setTimeout(u,g||0)}function xr(u){u.g=xo(()=>{u.g=null,u.i&&(u.i=!1,xr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Mt extends M{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(u){M.call(this),this.h=u,this.g={}}A(Qi,M);var Rr=[];function Ss(u){_e(u.g,function(g,v){this.g.hasOwnProperty(v)&&ai(g)},u),u.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),Ss(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=d.JSON.stringify,ve=d.JSON.parse,Ut=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ki(){}function Cs(){}var Jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ft(){R.call(this,"d")}A(ft,R);function en(){R.call(this,"c")}A(en,R);var st={},hc=null;function _a(){return hc=hc||new ht}st.Ia="serverreachability";function dc(u){R.call(this,st.Ia,u)}A(dc,R);function ci(u){const g=_a();Et(g,new dc(g))}st.STAT_EVENT="statevent";function Nr(u,g){R.call(this,st.STAT_EVENT,u),this.stat=g}A(Nr,R);function Tt(u){const g=_a();Et(g,new Nr(g,u))}st.Ja="timingevent";function ui(u,g){R.call(this,st.Ja,u),this.size=g}A(ui,R);function hi(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},g)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function $h(u,g,v,b,L,H){u.info(function(){if(u.g)if(H){var te="",we=H.split("&");for(let ze=0;ze<we.length;ze++){var mt=we[ze].split("=");if(mt.length>1){const rt=mt[0];mt=mt[1];const Dn=rt.split("_");te=Dn.length>=2&&Dn[1]=="type"?te+(rt+"="+mt+"&"):te+(rt+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+g+`
`+v+`
`+te})}function fc(u,g,v,b,L,H,te){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+g+`
`+v+`
`+H+" "+te})}function di(u,g,v,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wh(u,v)+(b?" "+b:"")})}function Ir(u,g){u.info(function(){return"TIMEOUT: "+g})}qn.prototype.info=function(){};function Wh(u,g){if(!u.g)return g;if(!g)return null;try{const H=JSON.parse(g);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var v=H[u];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let te=1;te<b.length;te++)b[te]=""}}}}return se(H)}catch{return g}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},No;function Or(){}A(Or,Ki),Or.prototype.g=function(){return new XMLHttpRequest},No=new Or;function Yi(u){return encodeURIComponent(String(u))}function mc(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Hn(u,g,v,b){this.j=u,this.i=g,this.l=v,this.S=b||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fn}function Fn(){this.i=null,this.g="",this.h=!1}var wt={},Vt={};function fi(u,g,v){u.M=1,u.A=jr(At(g)),u.u=v,u.R=!0,va(u,null)}function va(u,g){u.F=Date.now(),mi(u),u.B=At(u.A);var v=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),ba(v.i,"t",b),u.C=0,v=u.j.L,u.h=new Fn,u.g=Nc(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Mt(E(u.Y,u,u.g),u.P)),g=u.V,v=u.g,b=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Rr[0]=L.toString()),L=Rr);for(let H=0;H<L.length;H++){const te=Zt(v,L[H],b||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=u.J?Ke(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ci(),$h(u.i,u.v,u.B,u.l,u.S,u.u)}Hn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Kn(u)==3?g.j():this.Y(u)},Hn.prototype.Y=function(u){try{if(u==this.g)e:{const we=Kn(this.g),mt=this.g.ya(),ze=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||we!=4||mt==7||(mt==8||ze<=0?ci(3):ci(2)),pi(this);var g=this.g.ca();this.X=g;var v=Zh(this);if(this.o=g==200,fc(this.i,this.v,this.B,this.l,this.S,we,g),this.o){if(this.U&&!this.L){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(b)){var H=b;break t}}H=null}if(u=H)di(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,u);else{this.o=!1,this.m=3,Tt(12),pn(this),Rn(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<v.length;)if(rt=gc(this,v),rt==Vt){we==4&&(this.m=4,Tt(14),u=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==wt){this.m=4,Tt(15),di(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else di(this.i,this.l,rt,null),gi(this,rt);if(pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||v.length!=0||this.h.h||(this.m=1,Tt(16),u=!1),this.o=this.o&&u,!u)di(this.i,this.l,v,"[Invalid Chunked Response]"),pn(this),Rn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Fo(te),te.P=!0,Tt(11))}}else di(this.i,this.l,v,null),gi(this,v);we==4&&pn(this),this.o&&!this.K&&(we==4?Sc(this.j,this):(this.o=!1,mi(this)))}else $i(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),pn(this),Rn(this)}}}catch{}finally{}};function Zh(u){if(!pc(u))return u.g.la();const g=zt(u.g);if(g==="")return"";let v="";const b=g.length,L=Kn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return pn(u),Rn(u),"";u.h.i=new d.TextDecoder}for(let H=0;H<b;H++)u.h.h=!0,v+=u.h.i.decode(g[H],{stream:!(L&&H==b-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function pc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function gc(u,g){var v=u.C,b=g.indexOf(`
`,v);return b==-1?Vt:(v=Number(g.substring(v,b)),isNaN(v)?wt:(b+=1,b+v>g.length?Vt:(g=g.slice(b,b+v),u.C=b+v,g)))}Hn.prototype.cancel=function(){this.K=!0,pn(this)};function mi(u){u.T=Date.now()+u.H,Ea(u,u.H)}function Ea(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=hi(E(u.aa,u),g)}function pi(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ir(this.i,this.B),this.M!=2&&(ci(),Tt(17)),pn(this),this.m=2,Rn(this)):Ea(this,this.T-u)};function Rn(u){u.j.I==0||u.K||Sc(u.j,u)}function pn(u){pi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ss(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function gi(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||_i(v.h,u))){if(!u.L&&_i(v.h,u)&&v.I==3){try{var b=v.Ba.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ra(v),Ms(v);else break e;zr(v),Tt(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=hi(E(v.Va,v),6e3));yi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ai(v,11)}else if((u.L||v.g==u)&&Ra(v),!C(g))for(L=v.Ba.g.parse(g),g=0;g<L.length;g++){let ze=L[g];const rt=ze[0];if(!(rt<=v.K))if(v.K=rt,ze=ze[1],v.I==2)if(ze[0]=="c"){v.M=ze[1],v.ba=ze[2];const Dn=ze[3];Dn!=null&&(v.ka=Dn,v.j.info("VER="+v.ka));const Si=ze[4];Si!=null&&(v.za=Si,v.j.info("SVER="+v.za));const Yn=ze[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(b=1.5*Yn,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Xn=u.g;if(Xn){const Br=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var H=b.h;H.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Oo(H,H.h),H.h=null))}if(b.G){const Na=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(b.wa=Na,Fe(b.J,b.G,Na))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var te=u;if(b.na=Rc(b,b.L?b.ba:null,b.W),te.L){jo(b.h,te);var we=te,mt=b.O;mt&&(we.H=mt),we.D&&(pi(we),mi(we)),b.g=te}else bc(b);v.i.length>0&&bi(v)}else ze[0]!="stop"&&ze[0]!="close"||Ai(v,7);else v.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Ai(v,7):qo(v):ze[0]!="noop"&&v.l&&v.l.qa(ze),v.A=0)}}ci(4)}catch{}}var bt=class{constructor(u,g){this.g=u,this.map=g}};function Io(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Do(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yi(u){return u.h?1:u.g?u.g.size:0}function _i(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Oo(u,g){u.g?u.g.add(g):u.h=g}function jo(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Io.prototype.cancel=function(){if(this.i=Mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Mo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return P(u.i)}var yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const b=u[v].indexOf("=");let L,H=null;b>=0?(L=u[v].substring(0,b),H=u[v].substring(b+1)):L=u[v],g(L,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function gn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof gn?(this.l=u.l,kt(this,u.j),this.o=u.o,this.g=u.g,xs(this,u.u),this.h=u.h,Vo(this,Tc(u.i)),this.m=u.m):u&&(g=String(u).match(yc))?(this.l=!1,kt(this,g[1]||"",!0),this.o=vi(g[2]||""),this.g=vi(g[3]||"",!0),xs(this,g[4]),this.h=vi(g[5]||"",!0),Vo(this,g[6]||"",!0),this.m=vi(g[7]||"")):(this.l=!1,this.i=new Ns(null,this.l))}gn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Mr(g,wa,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Mr(g,wa,!0),"@"),u.push(Yi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Mr(v,v.charAt(0)=="/"?ko:_c,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Mr(v,vc)),u.join("")},gn.prototype.resolve=function(u){const g=At(this);let v=!!u.j;v?kt(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var b=u.h;if(v)xs(g,u.u);else if(v=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=g.h.lastIndexOf("/");L!=-1&&(b=g.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const H=[];for(let te=0;te<L.length;){const we=L[te++];we=="."?b&&te==L.length&&H.push(""):we==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),b&&te==L.length&&H.push("")):(H.push(we),b=!0)}b=H.join("/")}else b=L}return v?g.h=b:v=u.i.toString()!=="",v?Vo(g,Tc(u.i)):v=!!u.m,v&&(g.m=u.m),g};function At(u){return new gn(u)}function kt(u,g,v){u.j=v?vi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function xs(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Vo(u,g,v){g instanceof Ns?(u.i=g,Aa(u.i,u.l)):(v||(g=Mr(g,Rs)),u.i=new Ns(g,u.l))}function Fe(u,g,v){u.i.set(g,v)}function jr(u){return Fe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Mr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,rn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wa=/[#\/\?@]/g,_c=/[#\?:]/g,ko=/[#\?]/g,Rs=/[#\?@]/g,vc=/#/g;function Ns(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=Ns.prototype,s.add=function(u,g){an(this),this.i=null,u=Is(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Ec(u,g){an(u),g=Is(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Lo(u,g){return an(u),g=Is(u,g),u.g.has(g)}s.forEach=function(u,g){an(this),this.g.forEach(function(v,b){v.forEach(function(L){u.call(g,L,b,this)},this)},this)};function Po(u,g){an(u);let v=[];if(typeof g=="string")Lo(u,g)&&(v=v.concat(u.g.get(Is(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}s.set=function(u,g){return an(this),this.i=null,u=Is(this,u),Lo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=Po(this,u),u.length>0?String(u[0]):g):g};function ba(u,g,v){Ec(u,g),v.length>0&&(u.i=null,u.g.set(Is(u,g),P(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let b=0;b<g.length;b++){var v=g[b];const L=Yi(v);v=Po(this,v);for(let H=0;H<v.length;H++){let te=L;v[H]!==""&&(te+="="+Yi(v[H])),u.push(te)}}return this.i=u.join("&")};function Tc(u){const g=new Ns;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Is(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Aa(u,g){g&&!u.j&&(an(u),u.i=null,u.g.forEach(function(v,b){const L=b.toLowerCase();b!=L&&(Ec(this,b),ba(this,L,v))},u)),u.j=g}function Gn(u,g){const v=new qn;if(d.Image){const b=new Image;b.onload=T(Nn,v,"TestLoadImage: loaded",!0,g,b),b.onerror=T(Nn,v,"TestLoadImage: error",!1,g,b),b.onabort=T(Nn,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=T(Nn,v,"TestLoadImage: timeout",!1,g,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function Uo(u,g){const v=new qn,b=new AbortController,L=setTimeout(()=>{b.abort(),Nn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(H=>{clearTimeout(L),H.ok?Nn(v,"TestPingServer: ok",!0,g):Nn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Nn(v,"TestPingServer: error",!1,g)})}function Nn(u,g,v,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(v)}catch{}}function Ds(){this.g=new Ut}function Ei(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ei,Ki),Ei.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(u,g){ht.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Vr,ht),s=Vr.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Qn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||d).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Os(this):Qn(this),this.readyState==3&&Sa(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Os(this))},s.Na=function(u){this.g&&(this.response=u,Os(this))},s.ga=function(){this.g&&Os(this)};function Os(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Qn(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function In(u){let g="";return _e(u,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function kr(u,g,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=In(v),typeof u=="string"?v!=null&&Yi(v):Fe(u,g,v))}function Ye(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Ye,ht);var Ti=/^https?$/i,zo=["POST","PUT"];s=Ye.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():No.g(),this.g.onreadystatechange=x(E(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(H){Lr(this,H);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)v.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())v.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),L=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(zo,g,void 0)>=0)||b||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of v)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Lr(this,H)}};function Lr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Bo(u),Xi(u)}function Bo(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Et(this,"complete"),Et(this,"abort"),Xi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Ye.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Pr(this):this.Xa())},s.Xa=function(){Pr(this)};function Pr(u){if(u.h&&typeof c<"u"){if(u.v&&Kn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Et(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var b;if(b=H===0){let te=String(u.D).match(yc)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),b=!Ti.test(te?te.toLowerCase():"")}v=b}if(v)Et(u,"complete"),Et(u,"success");else{u.o=6;try{var L=Kn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Bo(u)}}finally{Xi(u)}}}}function Xi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Et(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ve(g)}};function zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(u){const g={};u=(u.g&&Kn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(C(u[b]))continue;var v=mc(u[b]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=g[L]||[];g[L]=H,H.push(v)}Ce(g,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function js(u){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,u),this.Za=wi("retryDelaySeedMs",1e4,u),this.Ta=wi("forwardChannelMaxRetries",2,u),this.va=wi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Io(u&&u.concurrentRequestLimit),this.Ba=new Ds,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=js.prototype,s.ka=8,s.I=1,s.connect=function(u,g,v,b){Tt(0),this.W=u,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=Rc(this,null,this.W),bi(this)};function qo(u){if(Ca(u),u.I==3){var g=u.V++,v=At(u.J);if(Fe(v,"SID",u.M),Fe(v,"RID",g),Fe(v,"TYPE","terminate"),Ur(u,v),g=new Hn(u,u.j,g),g.M=2,g.A=jr(At(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=g.A,v=!0),v||(g.g=Nc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mi(g)}xc(u)}function Ms(u){u.g&&(Fo(u),u.g.cancel(),u.g=null)}function Ca(u){Ms(u),u.v&&(d.clearTimeout(u.v),u.v=null),Ra(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function bi(u){if(!Do(u.h)&&!u.m){u.m=!0;var g=u.Ea;ee||S(),ce||(ee(),ce=!0),D.add(g,u),u.D=0}}function xa(u,g){return yi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=hi(E(u.Ea,u,g),Cc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Hn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=Ke(H),Ae(H,this.U)):H=this.U),this.u!==null||this.R||(L.J=H,H=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=wc(this,L,g),v=At(this.J),Fe(v,"RID",u),Fe(v,"CVER",22),this.G&&Fe(v,"X-HTTP-Session-Id",this.G),Ur(this,v),H&&(this.R?g="headers="+Yi(In(H))+"&"+g:this.u&&kr(v,this.u,H)),Oo(this.h,L),this.Ra&&Fe(v,"TYPE","init"),this.S?(Fe(v,"$req",g),Fe(v,"SID","null"),L.U=!0,fi(L,v,null)):fi(L,v,g),this.I=2}}else this.I==3&&(u?Ho(this,u):this.i.length==0||Do(this.h)||Ho(this))};function Ho(u,g){var v;g?v=g.l:v=u.V++;const b=At(u.J);Fe(b,"SID",u.M),Fe(b,"RID",v),Fe(b,"AID",u.K),Ur(u,b),u.u&&u.o&&kr(b,u.u,u.o),v=new Hn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=wc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Oo(u.h,v),fi(v,b,g)}function Ur(u,g){u.H&&_e(u.H,function(v,b){Fe(g,b,v)}),u.l&&_e({},function(v,b){Fe(g,b,v)})}function wc(u,g,v){v=Math.min(u.i.length,v);const b=u.l?E(u.l.Ka,u.l,u):null;e:{var L=u.i;let we=-1;for(;;){const mt=["count="+v];we==-1?v>0?(we=L[0].g,mt.push("ofs="+we)):we=0:mt.push("ofs="+we);let ze=!0;for(let rt=0;rt<v;rt++){var H=L[rt].g;const Dn=L[rt].map;if(H-=we,H<0)we=Math.max(0,L[rt].g-100),ze=!1;else try{H="req"+H+"_"||"";try{var te=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Si,Yn]of te){let Xn=Yn;p(Yn)&&(Xn=se(Yn)),mt.push(H+Si+"="+encodeURIComponent(Xn))}}catch(Si){throw mt.push(H+"type="+encodeURIComponent("_badmap")),Si}}catch{b&&b(Dn)}}if(ze){te=mt.join("&");break e}}te=void 0}return u=u.i.splice(0,v),g.G=u,te}function bc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ee||S(),ce||(ee(),ce=!0),D.add(g,u),u.A=0}}function zr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=hi(E(u.Da,u),Cc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=hi(E(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Ms(this),Ac(this))};function Fo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Ac(u){u.g=new Hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=At(u.na);Fe(g,"RID","rpc"),Fe(g,"SID",u.M),Fe(g,"AID",u.K),Fe(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Fe(g,"TO",u.ia),Fe(g,"TYPE","xmlhttp"),Ur(u,g),u.u&&u.o&&kr(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=jr(At(g)),v.u=null,v.R=!0,va(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Ms(this),zr(this),Tt(19))};function Ra(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Sc(u,g){var v=null;if(u.g==g){Ra(u),Fo(u),u.g=null;var b=2}else if(_i(u.h,g))v=g.G,jo(u.h,g),b=1;else return;if(u.I!=0){if(g.o)if(b==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;b=_a(),Et(b,new ui(b,v)),bi(u)}else bc(u);else if(L=g.m,L==3||L==0&&g.X>0||!(b==1&&xa(u,g)||b==2&&zr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),L){case 1:Ai(u,5);break;case 4:Ai(u,10);break;case 3:Ai(u,6);break;default:Ai(u,2)}}}function Cc(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Ai(u,g){if(u.j.info("Error code "+g),g==2){var v=E(u.bb,u),b=u.Ua;const L=!b;b=new gn(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||kt(b,"https"),jr(b),L?Gn(b.toString(),v):Uo(b.toString(),v)}else Tt(2);u.I=0,u.l&&u.l.pa(g),xc(u),Ca(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function xc(u){if(u.I=0,u.ja=[],u.l){const g=Mo(u.h);(g.length!=0||u.i.length!=0)&&(K(u.ja,g),K(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Rc(u,g,v){var b=v instanceof gn?At(v):new gn(v);if(b.g!="")g&&(b.g=g+"."+b.g),xs(b,b.u);else{var L=d.location;b=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const H=new gn(null);b&&kt(H,b),g&&(H.g=g),L&&xs(H,L),v&&(H.h=v),b=H}return v=u.G,g=u.wa,v&&g&&Fe(b,v,g),Fe(b,"VER",u.ka),Ur(u,b),b}function Nc(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ye(new Ei({ab:v})):new Ye(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ic(){}s=Ic.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Vs(){}Vs.prototype.g=function(u,g){return new tn(u,g)};function tn(u,g){ht.call(this),this.g=new js(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Wi(this)}A(tn,ht),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){qo(this.g)},tn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=se(u),u=v);g.i.push(new bt(g.Ya++,u)),g.I==3&&bi(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,tn.Z.N.call(this)};function Dc(u){ft.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(Dc,ft);function Oc(){en.call(this),this.status=1}A(Oc,en);function Wi(u){this.g=u}A(Wi,Ic),Wi.prototype.ra=function(){Et(this.g,"a")},Wi.prototype.qa=function(u){Et(this.g,new Dc(u))},Wi.prototype.pa=function(u){Et(this.g,new Oc)},Wi.prototype.oa=function(){Et(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,F1=function(){return new Vs},H1=function(){return _a()},q1=st,_m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,Yu=Dr,Ro.COMPLETE="complete",B1=Ro,Cs.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Dl=Cs,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,z1=Ye}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",Uv="4.9.2";class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");let wo="12.3.0";const ha=new Um("@firebase/firestore");function ro(){return ha.logLevel}function le(s,...e){if(ha.logLevel<=Oe.DEBUG){const n=e.map($m);ha.debug(`Firestore (${wo}): ${s}`,...n)}}function Es(s,...e){if(ha.logLevel<=Oe.ERROR){const n=e.map($m);ha.error(`Firestore (${wo}): ${s}`,...n)}}function po(s,...e){if(ha.logLevel<=Oe.WARN){const n=e.map($m);ha.warn(`Firestore (${wo}): ${s}`,...n)}}function $m(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function ye(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,G1(s,r,n)}function G1(s,e,n){let r=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Es(r),new Error(r)}function qe(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||G1(e,l,r)}function Te(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ys{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Q1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class uC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class hC{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ys,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ys)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new Q1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class dC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new dC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const r=c=>{c.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,le("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Wm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=pC(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function je(s,e){return s<e?-1:s>e?1:0}function vm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return sm(l)===sm(c)?je(l,c):sm(l)?1:-1}return je(s.length,e.length)}const gC=55296,yC=57343;function sm(s){const e=s.charCodeAt(0);return e>=gC&&e<=yC}function go(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const Bv="__name__";class Ii{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Ii.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return je(e.length,n.length)}static compareSegments(e,n){const r=Ii.isNumericId(e),l=Ii.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ii.extractNumericId(e).compare(Ii.extractNumericId(n)):vm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class et extends Ii{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new et(n)}static emptyPath(){return new et([])}}const _C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ii{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return _C.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bv}static keyField(){return new Qt([Bv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(c(),l++)}if(c(),d)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(et.fromString(e))}static fromName(e){return new me(et.fromString(e).popFirst(5))}static empty(){return new me(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new et(e.slice()))}}function K1(s,e,n){if(!n)throw new re($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function vC(s,e,n,r){if(e===!0&&r===!0)throw new re($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function qv(s){if(!me.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hv(s){if(me.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Y1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ih(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye(12329,{type:typeof s})}function Cn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ih(s);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Dt(s,e){const n={typeString:s};return e&&(n.value=e),n}function nc(s,e){if(!Y1(s))throw new re($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new re($.INVALID_ARGUMENT,n);return!0}const Fv=-62135596800,Gv=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Gv);return new Ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fv)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Dt("string",Ze._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fl=-1;function EC(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ee.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new pr(l,me.empty(),e)}function TC(s){return new pr(s.readTime,s.key,Fl)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(Ee.min(),me.empty(),Fl)}static max(){return new pr(Ee.max(),me.empty(),Fl)}}function wC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:je(s.largestBatchId,e.largestBatchId))}const bC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bo(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==bC)throw s;le("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(y=>r(y)))})),d=!0,c===l&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((l=>l?W.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,l)=>{const c=e.length,d=new Array(c);let p=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next((T=>{d[E]=T,++p,p===c&&r(d)}),(T=>l(T)))}}))}static doWhile(e,n){return new W(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function SC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(s){return s.name==="IndexedDbTransactionError"}class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;const Zm=-1;function Oh(s){return s==null}function ch(s){return s===0&&1/s==-1/0}function CC(s){return typeof s=="number"&&Number.isInteger(s)&&!ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const X1="";function xC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Qv(e)),e=RC(s.get(n),e);return Qv(e)}function RC(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case X1:n+="";break;default:n+=c}}return n}function Qv(s){return s+X1+""}function Kv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function br(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function $1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ot{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=l??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new Gt(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Gt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new jt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class W1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new W1("Invalid base64 string: "+c):c}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const NC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(s){if(qe(!!s,39018),typeof s=="string"){let e=0;const n=NC.exec(s);if(qe(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?Kt.fromBase64String(s):Kt.fromUint8Array(s)}const Z1="server_timestamp",J1="__type__",eE="__previous_value__",tE="__local_write_time__";function Jm(s){return(s?.mapValue?.fields||{})[J1]?.stringValue===Z1}function jh(s){const e=s.mapValue.fields[eE];return Jm(e)?jh(e):e}function Gl(s){const e=gr(s.mapValue.fields[tE].timestampValue);return new Ze(e.seconds,e.nanos)}class IC{constructor(e,n,r,l,c,d,p,y,E,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=E,this.isUsingEmulator=T}}const uh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}const nE="__type__",DC="__max__",zu={mapValue:{}},iE="__vector__",hh="value";function _r(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jm(s)?4:jC(s)?9007199254740991:OC(s)?10:11:ye(28295,{value:s})}function Ui(s,e){if(s===e)return!0;const n=_r(s);if(n!==_r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Gl(s).isEqual(Gl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=gr(l.timestampValue),p=gr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return yr(l.bytesValue).isEqual(yr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return yt(l.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return yt(l.integerValue)===yt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=yt(l.doubleValue),p=yt(c.doubleValue);return d===p?ch(d)===ch(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return go(s.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Kv(d)!==Kv(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Ui(d[y],p[y])))return!1;return!0})(s,e);default:return ye(52216,{left:s})}}function Kl(s,e){return(s.values||[]).find((n=>Ui(n,e)))!==void 0}function yo(s,e){if(s===e)return 0;const n=_r(s),r=_r(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=yt(c.integerValue||c.doubleValue),y=yt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return Xv(s.timestampValue,e.timestampValue);case 4:return Xv(Gl(s),Gl(e));case 5:return vm(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=yr(c),y=yr(d);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),y=d.split("/");for(let E=0;E<p.length&&E<y.length;E++){const T=je(p[E],y[E]);if(T!==0)return T}return je(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=je(yt(c.latitude),yt(d.latitude));return p!==0?p:je(yt(c.longitude),yt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return $v(s.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},y=d.fields||{},E=p[hh]?.arrayValue,T=y[hh]?.arrayValue,A=je(E?.values?.length||0,T?.values?.length||0);return A!==0?A:$v(E,T)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===zu.mapValue&&d===zu.mapValue)return 0;if(c===zu.mapValue)return 1;if(d===zu.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),E=d.fields||{},T=Object.keys(E);y.sort(),T.sort();for(let A=0;A<y.length&&A<T.length;++A){const x=vm(y[A],T[A]);if(x!==0)return x;const P=yo(p[y[A]],E[T[A]]);if(P!==0)return P}return je(y.length,T.length)})(s.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function Xv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return je(s,e);const n=gr(s),r=gr(e),l=je(n.seconds,r.seconds);return l!==0?l:je(n.nanos,r.nanos)}function $v(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=yo(n[l],r[l]);if(c)return c}return je(n.length,r.length)}function _o(s){return Em(s)}function Em(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=Em(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${Em(n.fields[d])}`;return l+"}"})(s.mapValue):ye(61005,{value:s})}function Xu(s){switch(_r(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(s);return e?16+Xu(e):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Xu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return br(r.fields,((c,d)=>{l+=c.length+Xu(d)})),l})(s.mapValue);default:throw ye(13486,{value:s})}}function Wv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Tm(s){return!!s&&"integerValue"in s}function ep(s){return!!s&&"arrayValue"in s}function Zv(s){return!!s&&"nullValue"in s}function Jv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $u(s){return!!s&&"mapValue"in s}function OC(s){return(s?.mapValue?.fields||{})[nE]?.stringValue===iE}function Ll(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return br(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ll(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(s.arrayValue.values[n]);return e}return{...s}}function jC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===DC}class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=Qt.emptyPath(),r={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}d?r[p.lastSegment()]=Ll(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];$u(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){br(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new fn(Ll(this.value))}}function sE(s){const e=[];return br(s.fields,((n,r)=>{const l=new Qt([n]);if($u(r)){const c=sE(r.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new Sn(e)}class $t{constructor(e,n,r,l,c,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new $t(e,0,Ee.min(),Ee.min(),Ee.min(),fn.empty(),0)}static newFoundDocument(e,n,r,l){return new $t(e,1,n,Ee.min(),r,l,0)}static newNoDocument(e,n){return new $t(e,2,n,Ee.min(),Ee.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ee.min(),Ee.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dh{constructor(e,n){this.position=e,this.inclusive=n}}function e0(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],d=s.position[l];if(c.field.isKeyField()?r=me.comparator(me.fromName(d.referenceValue),n.key):r=yo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ui(s.position[n],e.position[n]))return!1;return!0}class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function MC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class rE{}class It extends rE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kC(e,n,r):n==="array-contains"?new UC(e,r):n==="in"?new zC(e,r):n==="not-in"?new BC(e,r):n==="array-contains-any"?new qC(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LC(e,r):new PC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yo(n,this.value)):n!==null&&_r(this.value)===_r(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends rE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new si(e,n)}matches(e){return aE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aE(s){return s.op==="and"}function oE(s){return VC(s)&&aE(s)}function VC(s){for(const e of s.filters)if(e instanceof si)return!1;return!0}function wm(s){if(s instanceof It)return s.field.canonicalString()+s.op.toString()+_o(s.value);if(oE(s))return s.filters.map((e=>wm(e))).join(",");{const e=s.filters.map((n=>wm(n))).join(",");return`${s.op}(${e})`}}function lE(s,e){return s instanceof It?(function(r,l){return l instanceof It&&r.op===l.op&&r.field.isEqual(l.field)&&Ui(r.value,l.value)})(s,e):s instanceof si?(function(r,l){return l instanceof si&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,p)=>c&&lE(d,l.filters[p])),!0):!1})(s,e):void ye(19439)}function cE(s){return s instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`})(s):s instanceof si?(function(n){return n.op.toString()+" {"+n.getFilters().map(cE).join(" ,")+"}"})(s):"Filter"}class kC extends It{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class LC extends It{constructor(e,n){super(e,"in",n),this.keys=uE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class PC extends It{constructor(e,n){super(e,"not-in",n),this.keys=uE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uE(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class UC extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&Kl(n.arrayValue,this.value)}}class zC extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class BC extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kl(this.value.arrayValue,n)}}class qC extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Kl(this.value.arrayValue,r)))}}class HC{constructor(e,n=null,r=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function n0(s,e=null,n=[],r=[],l=null,c=null,d=null){return new HC(s,e,n,r,l,c,d)}function tp(s){const e=Te(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>wm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>_o(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>_o(r))).join(",")),e.Te=n}return e.Te}function np(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!MC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!lE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!t0(s.startAt,e.startAt)&&t0(s.endAt,e.endAt)}function bm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ic{constructor(e,n=null,r=[],l=[],c=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function FC(s,e,n,r,l,c,d,p){return new ic(s,e,n,r,l,c,d,p)}function Mh(s){return new ic(s)}function i0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hE(s){return s.collectionGroup!==null}function Pl(s){const e=Te(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new jt(Qt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((E=>{E.isInequality()&&(p=p.add(E.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new fh(c,r))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new fh(Qt.keyField(),r))}return e.Ie}function Mi(s){const e=Te(s);return e.Ee||(e.Ee=GC(e,Pl(s))),e.Ee}function GC(s,e){if(s.limitType==="F")return n0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new fh(l.field,c)}));const n=s.endAt?new dh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new dh(s.startAt.position,s.startAt.inclusive):null;return n0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Am(s,e){const n=s.filters.concat([e]);return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Sm(s,e,n){return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vh(s,e){return np(Mi(s),Mi(e))&&s.limitType===e.limitType}function dE(s){return`${tp(Mi(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>cE(l))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>_o(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>_o(l))).join(",")),`Target(${r})`})(Mi(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Pl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,p,y){const E=e0(d,p,y);return d.inclusive?E<=0:E<0})(r.startAt,Pl(r),l)||r.endAt&&!(function(d,p,y){const E=e0(d,p,y);return d.inclusive?E>=0:E>0})(r.endAt,Pl(r),l))})(s,e)}function QC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function fE(s){return(e,n)=>{let r=!1;for(const l of Pl(s)){const c=KC(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function KC(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,d,p){const y=d.data.field(c),E=p.data.field(c);return y!==null&&E!==null?yo(y,E):ye(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:s.dir})}}class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return $1(this.inner)}size(){return this.innerSize}}const YC=new ot(me.comparator);function Ts(){return YC}const mE=new ot(me.comparator);function Ol(...s){let e=mE;for(const n of s)e=e.insert(n.key,n);return e}function pE(s){let e=mE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function sa(){return Ul()}function gE(){return Ul()}function Ul(){return new pa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const XC=new ot(me.comparator),$C=new jt(me.comparator);function Me(...s){let e=$C;for(const n of s)e=e.add(n);return e}const WC=new jt(je);function ZC(){return WC}function ip(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function yE(s){return{integerValue:""+s}}function JC(s,e){return CC(e)?yE(e):ip(s,e)}class Lh{constructor(){this._=void 0}}function ex(s,e,n){return s instanceof mh?(function(l,c){const d={fields:{[J1]:{stringValue:Z1},[tE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Jm(c)&&(c=jh(c)),c&&(d.fields[eE]=c),{mapValue:d}})(n,e):s instanceof Yl?vE(s,e):s instanceof Xl?EE(s,e):(function(l,c){const d=_E(l,c),p=s0(d)+s0(l.Ae);return Tm(d)&&Tm(l.Ae)?yE(p):ip(l.serializer,p)})(s,e)}function tx(s,e,n){return s instanceof Yl?vE(s,e):s instanceof Xl?EE(s,e):n}function _E(s,e){return s instanceof ph?(function(r){return Tm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class mh extends Lh{}class Yl extends Lh{constructor(e){super(),this.elements=e}}function vE(s,e){const n=TE(e);for(const r of s.elements)n.some((l=>Ui(l,r)))||n.push(r);return{arrayValue:{values:n}}}class Xl extends Lh{constructor(e){super(),this.elements=e}}function EE(s,e){let n=TE(e);for(const r of s.elements)n=n.filter((l=>!Ui(l,r)));return{arrayValue:{values:n}}}class ph extends Lh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s0(s){return yt(s.integerValue||s.doubleValue)}function TE(s){return ep(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function nx(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Yl&&l instanceof Yl||r instanceof Xl&&l instanceof Xl?go(r.elements,l.elements,Ui):r instanceof ph&&l instanceof ph?Ui(r.Ae,l.Ae):r instanceof mh&&l instanceof mh})(s.transform,e.transform)}class ix{constructor(e,n){this.version=e,this.transformResults=n}}class ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ph{}function wE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new AE(s.key,ni.none()):new sc(s.key,s.data,ni.none());{const n=s.data,r=fn.empty();let l=new jt(Qt.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new Ar(s.key,r,new Sn(l.toArray()),ni.none())}}function sx(s,e,n){s instanceof sc?(function(l,c,d){const p=l.value.clone(),y=a0(l.fieldTransforms,c,d.transformResults);p.setAll(y),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Ar?(function(l,c,d){if(!Wu(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=a0(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(bE(l)),y.setAll(p),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function zl(s,e,n,r){return s instanceof sc?(function(c,d,p,y){if(!Wu(c.precondition,d))return p;const E=c.value.clone(),T=o0(c.fieldTransforms,y,d);return E.setAll(T),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),null})(s,e,n,r):s instanceof Ar?(function(c,d,p,y){if(!Wu(c.precondition,d))return p;const E=o0(c.fieldTransforms,y,d),T=d.data;return T.setAll(bE(c)),T.setAll(E),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(s,e,n,r):(function(c,d,p){return Wu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function rx(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=_E(r.transform,l||null);c!=null&&(n===null&&(n=fn.empty()),n.set(r.field,c))}return n||null}function r0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&go(r,l,((c,d)=>nx(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class sc extends Ph{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ar extends Ph{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function bE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function a0(s,e,n){const r=new Map;qe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],d=c.transform,p=e.data.field(c.field);r.set(c.field,tx(d,p,n[l]))}return r}function o0(s,e,n){const r=new Map;for(const l of s){const c=l.transform,d=n.data.field(l.field);r.set(l.field,ex(c,d,e))}return r}class AE extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ax extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ox{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&sx(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const y=wE(d,p);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Me())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((n,r)=>r0(n,r)))&&go(this.baseMutations,e.baseMutations,((n,r)=>r0(n,r)))}}class sp{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return XC})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new sp(e,n,r,l)}}class lx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cx{constructor(e,n){this.count=e,this.unchangedNames=n}}var Nt,ke;function ux(s){switch(s){case $.OK:return ye(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ye(15467,{code:s})}}function SE(s){if(s===void 0)return Es("GRPC error has no .code"),$.UNKNOWN;switch(s){case Nt.OK:return $.OK;case Nt.CANCELLED:return $.CANCELLED;case Nt.UNKNOWN:return $.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return $.INTERNAL;case Nt.UNAVAILABLE:return $.UNAVAILABLE;case Nt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Nt.NOT_FOUND:return $.NOT_FOUND;case Nt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Nt.ABORTED:return $.ABORTED;case Nt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Nt.DATA_LOSS:return $.DATA_LOSS;default:return ye(39323,{code:s})}}(ke=Nt||(Nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function hx(){return new TextEncoder}const dx=new dr([4294967295,4294967295],0);function l0(s){const e=hx().encode(s),n=new U1;return n.update(e),new Uint8Array(n.digest())}function c0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new dr([n,r],0),new dr([l,c],0)]}class rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jl(`Invalid padding: ${n}`);if(r<0)throw new jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=dr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(dr.fromNumber(r)));return l.compare(dx)===1&&(l=new dr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new rp(c,l,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uh{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uh(Ee.min(),l,new ot(je),Ts(),Me())}}class rc{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rc(r,n,Me(),Me(),Me())}}class Zu{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class CE{constructor(e,n){this.targetId=e,this.Ce=n}}class xE{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class u0{constructor(){this.ve=0,this.Fe=h0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),r=Me();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:ye(38017,{changeType:c})}})),new rc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=h0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Bu(),this.He=Bu(),this.Ye=new ot(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(bm(c))if(r===0){const d=new me(c.path);this.et(n,d,$t.newNoDocument(d,Ee.min()))}else qe(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=yr(r).toUint8Array()}catch(y){if(y instanceof W1)return po("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new rp(d,l,c)}catch(y){return po(y instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&bm(p.target)){const y=new me(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,$t.newNoDocument(y,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let r=Me();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((y=>{const E=this.ot(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Uh(e,n,this.Ye,this.je,r);return this.je=Ts(),this.Je=Bu(),this.He=Bu(),this.Ye=new ot(je),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bu(){return new ot(me.comparator)}function h0(){return new ot(me.comparator)}const mx={asc:"ASCENDING",desc:"DESCENDING"},px={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gx={and:"AND",or:"OR"};class yx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function _x(s,e){return gh(s,e.toTimestamp())}function Vi(s){return qe(!!s,49232),Ee.fromTimestamp((function(n){const r=gr(n);return new Ze(r.seconds,r.nanos)})(s))}function ap(s,e){return xm(s,e).canonicalString()}function xm(s,e){const n=(function(l){return new et(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function NE(s){const e=et.fromString(s);return qe(ME(e),10190,{key:e.toString()}),e}function Rm(s,e){return ap(s.databaseId,e.path)}function rm(s,e){const n=NE(e);if(n.get(1)!==s.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(DE(n))}function IE(s,e){return ap(s.databaseId,e)}function vx(s){const e=NE(s);return e.length===4?et.emptyPath():DE(e)}function Nm(s){return new et(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function DE(s){return qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function d0(s,e,n){return{name:Rm(s,e),fields:n.value.mapValue.fields}}function Ex(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ye(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(E,T){return E.useProto3Json?(qe(T===void 0||typeof T=="string",58123),Kt.fromBase64String(T||"")):(qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Kt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(E){const T=E.code===void 0?$.UNKNOWN:SE(E.code);return new re(T,E.message||"")})(d);n=new xE(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=rm(s,r.document.name),c=Vi(r.document.updateTime),d=r.document.createTime?Vi(r.document.createTime):Ee.min(),p=new fn({mapValue:{fields:r.document.fields}}),y=$t.newFoundDocument(l,c,d,p),E=r.targetIds||[],T=r.removedTargetIds||[];n=new Zu(E,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=rm(s,r.document),c=r.readTime?Vi(r.readTime):Ee.min(),d=$t.newNoDocument(l,c),p=r.removedTargetIds||[];n=new Zu([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=rm(s,r.document),c=r.removedTargetIds||[];n=new Zu([],c,l,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new cx(l,c),p=r.targetId;n=new CE(p,d)}}return n}function Tx(s,e){let n;if(e instanceof sc)n={update:d0(s,e.key,e.value)};else if(e instanceof AE)n={delete:Rm(s,e.key)};else if(e instanceof Ar)n={update:d0(s,e.key,e.data),updateMask:Ix(e.fieldMask)};else{if(!(e instanceof ax))return ye(16599,{Vt:e.type});n={verify:Rm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const p=d.transform;if(p instanceof mh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Yl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ph)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw ye(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:_x(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ye(27497)})(s,e.precondition)),n}function wx(s,e){return s&&s.length>0?(qe(e!==void 0,14353),s.map((n=>(function(l,c){let d=l.updateTime?Vi(l.updateTime):Vi(c);return d.isEqual(Ee.min())&&(d=Vi(c)),new ix(d,l.transformResults||[])})(n,e)))):[]}function bx(s,e){return{documents:[IE(s,e.path)]}}function Ax(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IE(s,l);const c=(function(E){if(E.length!==0)return jE(si.create(E,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(E){if(E.length!==0)return E.map((T=>(function(x){return{field:oo(x.field),direction:xx(x.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Cm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:l}}function Sx(s){let e=vx(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){qe(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(A){const x=OE(A);return x instanceof si&&oE(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(A){return A.map((x=>(function(K){return new fh(lo(K.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(x)))})(n.orderBy));let p=null;n.limit&&(p=(function(A){let x;return x=typeof A=="object"?A.value:A,Oh(x)?null:x})(n.limit));let y=null;n.startAt&&(y=(function(A){const x=!!A.before,P=A.values||[];return new dh(P,x)})(n.startAt));let E=null;return n.endAt&&(E=(function(A){const x=!A.before,P=A.values||[];return new dh(P,x)})(n.endAt)),FC(e,l,d,c,p,"F",y,E)}function Cx(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lo(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=lo(n.unaryFilter.field);return It.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=lo(n.unaryFilter.field);return It.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=lo(n.unaryFilter.field);return It.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(s):s.fieldFilter!==void 0?(function(n){return It.create(lo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return si.create(n.compositeFilter.filters.map((r=>OE(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(n.compositeFilter.op))})(s):ye(30097,{filter:s})}function xx(s){return mx[s]}function Rx(s){return px[s]}function Nx(s){return gx[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return Qt.fromServerFormat(s.fieldPath)}function jE(s){return s instanceof It?(function(n){if(n.op==="=="){if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:Rx(n.op),value:n.value}}})(s):s instanceof si?(function(n){const r=n.getFilters().map((l=>jE(l)));return r.length===1?r[0]:{compositeFilter:{op:Nx(n.op),filters:r}}})(s):ye(54877,{filter:s})}function Ix(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ME(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class cr{constructor(e,n,r,l,c=Ee.min(),d=Ee.min(),p=Kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Dx{constructor(e){this.yt=e}}function Ox(s){const e=Sx({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sm(e,e.limit,"L"):e}class jx{constructor(){this.Cn=new Mx}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(pr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class Mx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new jt(et.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new jt(et.comparator)).toArray()}}const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VE=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(VE,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);class vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vo(0)}static cr(){return new vo(-1)}}const m0="LruGarbageCollector",Vx=1048576;function p0([s,e],[n,r]){const l=je(s,n);return l===0?je(e,r):l}class kx{constructor(e){this.Ir=e,this.buffer=new jt(p0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Lx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(m0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?le(m0,"Ignoring IndexedDB error during garbage collection: ",n):await bo(n)}await this.Vr(3e5)}))}}class Px{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Dh.ce);const r=new kx(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(f0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,d,p,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,d=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(r=A,p=Date.now(),this.removeTargets(e,r,n)))).next((A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(E=Date.now(),ro()<=Oe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${A} documents in `+(E-y)+`ms
Total Duration: ${E-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:A}))))}}function Ux(s,e){return new Px(s,e)}class zx{constructor(){this.changes=new pa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class qx{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&zl(r.mutation,l,Sn.empty(),Ze.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Me()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Me()){const l=sa();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let d=Ol();return c.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=sa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Me())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,l){let c=Ts();const d=Ul(),p=(function(){return Ul()})();return n.forEach(((y,E)=>{const T=r.get(E.key);l.has(E.key)&&(T===void 0||T.mutation instanceof Ar)?c=c.insert(E.key,E):T!==void 0?(d.set(E.key,T.mutation.getFieldMask()),zl(T.mutation,E,T.mutation.getFieldMask(),Ze.now())):d.set(E.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((E,T)=>d.set(E,T))),n.forEach(((E,T)=>p.set(E,new Bx(T,d.get(E)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Ul();let l=new ot(((d,p)=>d-p)),c=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const E=n.get(y);if(E===null)return;let T=r.get(y)||Sn.empty();T=p.applyToLocalView(E,T),r.set(y,T);const A=(l.get(p.batchId)||Me()).add(y);l=l.insert(p.batchId,A)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),E=y.key,T=y.value,A=gE();T.forEach((x=>{if(!c.has(x)){const P=wE(n.get(x),r.get(x));P!==null&&A.set(x,P),c=c.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,E,A))}return W.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(d){return me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):W.resolve(sa());let p=Fl,y=c;return d.next((E=>W.forEach(E,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{y=y.insert(T,x)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,y,E,Me()))).next((T=>({batchId:p,changes:pE(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let l=Ol();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let d=Ol();return this.indexManager.getCollectionParents(e,c).next((p=>W.forEach(p,(y=>{const E=(function(A,x){return new ic(x,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,r,l).next((T=>{T.forEach(((A,x)=>{d=d.insert(A,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((d=>{c.forEach(((y,E)=>{const T=E.getKey();d.get(T)===null&&(d=d.insert(T,$t.newInvalidDocument(T)))}));let p=Ol();return d.forEach(((y,E)=>{const T=c.get(y);T!==void 0&&zl(T.mutation,E,Sn.empty(),Ze.now()),kh(n,E)&&(p=p.insert(y,E))})),p}))}}class Hx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Vi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:Ox(l.bundledQuery),readTime:Vi(l.readTime)}})(n)),W.resolve()}}class Fx{constructor(){this.overlays=new ot(me.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sa();return W.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const l=sa(),c=n.length+1,d=new me(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new ot(((E,T)=>E-T));const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>r){let T=c.get(E.largestBatchId);T===null&&(T=sa(),c=c.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=sa(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((E,T)=>p.set(E,T))),!(p.size()>=l)););return W.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new lx(n,r));let c=this.qr.get(n);c===void 0&&(c=Me(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}class Gx{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class op{constructor(){this.Qr=new jt(Pt.$r),this.Ur=new jt(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new et([])),r=new Pt(n,e),l=new Pt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new et([])),r=new Pt(n,e),l=new Pt(n,e+1);let c=Me();return this.Ur.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}class Qx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Pt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new ox(c,n,r,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Pt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(d)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),l=new Pt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(je);return n.forEach((l=>{const c=new Pt(l,0),d=new Pt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const d=new Pt(new me(c),0);let p=new jt(je);return this.Zr.forEachWhile((y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===l&&(p=p.add(y.Yr)),!0)}),d),W.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,(l=>{const c=new Pt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Pt(n,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Kx{constructor(e){this.ri=e,this.docs=(function(){return new ot(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():$t.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=Ts();const d=n.path,p=new me(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:E,value:{document:T}}=y.getNext();if(!d.isPrefixOf(E.path))break;E.path.length>d.length+1||wC(TC(T),r)<=0||(l.has(T.key)||kh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,r,l){ye(9500)}ii(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Yx(this)}getSize(e){return W.resolve(this.size)}}class Yx extends zx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Xx{constructor(e){this.persistence=e,this.si=new pa((n=>tp(n)),np),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new op,this.targetCount=0,this.ai=vo.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(c).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class kE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new Gx,this.referenceDelegate=e(this),this.Pi=new Xx(this),this.indexManager=new jx,this.remoteDocumentCache=(function(l){return new Kx(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Dx(n),this.Ii=new Hx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Qx(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const l=new $x(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class $x extends AC{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.Ri=new op,this.Vi=null}static mi(e){return new lp(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ee.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new pa((r=>xC(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=Ux(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?W.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(r++,c.removeEntry(d,Ee.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xu(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cp{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Me(),l=Me();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new cp(e,n.fromCache,r,l)}}class Wx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Zx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xw()?8:SC(Wt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new Wx;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(ro()<=Oe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(ro()<=Oe.DEBUG&&le("QueryEngine","Query:",ao(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(ro()<=Oe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):W.resolve())}ys(e,n){if(i0(n))return W.resolve(null);let r=Mi(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Sm(n,null,"F"),r=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Me(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const E=this.Ds(n,p);return this.Cs(n,E,d,y.readTime)?this.ys(e,Sm(n,null,"F")):this.vs(e,E,n,y)}))))})))))}ws(e,n,r,l){return i0(n)||l.isEqual(Ee.min())?W.resolve(null):this.ps.getDocuments(e,r).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,r,l)?W.resolve(null):(ro()<=Oe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ao(n)),this.vs(e,d,n,EC(l,Fl)).next((p=>p)))}))}Ds(e,n){let r=new jt(fE(e));return n.forEach(((l,c)=>{kh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return ro()<=Oe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ao(n)),this.ps.getDocumentsMatchingQuery(e,n,pr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const up="LocalStore",Jx=3e8;class eR{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ot(je),this.xs=new pa((c=>tp(c)),np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function tR(s,e,n,r){return new eR(s,e,n,r)}async function LE(s,e){const n=Te(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],p=[];let y=Me();for(const E of l){d.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of c){p.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((E=>({Ls:E,removedBatchIds:d,addedBatchIds:p})))}))}))}function nR(s,e){const n=Te(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,E,T){const A=E.batch,x=A.keys();let P=W.resolve();return x.forEach((K=>{P=P.next((()=>T.getEntry(y,K))).next((J=>{const k=E.docVersions.get(K);qe(k!==null,48541),J.version.compareTo(k)<0&&(A.applyToRemoteDocument(J,E),J.isValidDocument()&&(J.setReadTime(E.commitVersion),T.addEntry(J)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(y,A)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Me();for(let E=0;E<p.mutationResults.length;++E)p.mutationResults[E].transformResults.length>0&&(y=y.add(p.batch.mutations[E].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function PE(s){const e=Te(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function iR(s,e){const n=Te(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const x=l.get(A);if(!x)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,A))));let P=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?P=P.withResumeToken(Kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),l=l.insert(A,P),(function(J,k,U){return J.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=Jx?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,P,T)&&p.push(n.Pi.updateTargetData(c,P))}));let y=Ts(),E=Me();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(sR(c,d,e.documentUpdates).next((T=>{y=T.ks,E=T.qs}))),!r.isEqual(Ee.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,E))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function sR(s,e,n){let r=Me(),l=Me();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=Ts();return n.forEach(((p,y)=>{const E=c.get(p);y.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ee.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):le(up,"Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function rR(s,e){const n=Te(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function aR(s,e){const n=Te(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,W.resolve(l)):n.Pi.allocateTargetId(r).next((d=>(l=new cr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Im(s,e,n){const r=Te(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Ao(d))throw d;le(up,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function g0(s,e,n){const r=Te(s);let l=Ee.min(),c=Me();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,E,T){const A=Te(y),x=A.xs.get(T);return x!==void 0?W.resolve(A.Ms.get(x)):A.Pi.getTargetData(E,T)})(r,d,Mi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,n?l:Ee.min(),n?c:Me()))).next((p=>(oR(r,QC(e),p),{documents:p,Qs:c})))))}function oR(s,e,n){let r=s.Os.get(e)||Ee.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class y0{constructor(){this.activeTargetIds=ZC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lR{constructor(){this.Mo=new y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cR{Oo(e){}shutdown(){}}const _0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(_0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(_0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qu=null;function Dm(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}const am="RestConnection",uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===uh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const d=Dm(),p=this.zo(e,n.toUriEncodedString());le(am,`Sending RPC '${e}' ${d}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:E}=new URL(p),T=fa(E);return this.Jo(e,p,y,r,T).then((A=>(le(am,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw po(am,`RPC '${e}' ${d} failed with error: `,A,"url: ",p,"request:",r),A}))}Ho(e,n,r,l,c,d){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=uR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class dR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Yt="WebChannelConnection";class fR extends hR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const d=Dm();return new Promise(((p,y)=>{const E=new z1;E.setWithCredentials(!0),E.listenOnce(B1.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Yu.NO_ERROR:const A=E.getResponseJson();le(Yt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),p(A);break;case Yu.TIMEOUT:le(Yt,`RPC '${e}' ${d} timed out`),y(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const x=E.getStatus();if(le(Yt,`RPC '${e}' ${d} failed with status:`,x,"response text:",E.getResponseText()),x>0){let P=E.getResponseJson();Array.isArray(P)&&(P=P[0]);const K=P?.error;if(K&&K.status&&K.message){const J=(function(U){const oe=U.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(oe)>=0?oe:$.UNKNOWN})(K.status);y(new re(J,K.message))}else y(new re($.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new re($.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:d,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{le(Yt,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(l);le(Yt,`RPC '${e}' ${d} sending request:`,l),E.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=Dm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=F1(),p=H1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");le(Yt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const A=d.createWebChannel(T,y);this.I_(A);let x=!1,P=!1;const K=new dR({Yo:k=>{P?le(Yt,`Not sending because RPC '${e}' stream ${l} is closed:`,k):(x||(le(Yt,`Opening RPC '${e}' stream ${l} transport.`),A.open(),x=!0),le(Yt,`RPC '${e}' stream ${l} sending:`,k),A.send(k))},Zo:()=>A.close()}),J=(k,U,oe)=>{k.listen(U,(Z=>{try{oe(Z)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return J(A,Dl.EventType.OPEN,(()=>{P||(le(Yt,`RPC '${e}' stream ${l} transport opened.`),K.o_())})),J(A,Dl.EventType.CLOSE,(()=>{P||(P=!0,le(Yt,`RPC '${e}' stream ${l} transport closed`),K.a_(),this.E_(A))})),J(A,Dl.EventType.ERROR,(k=>{P||(P=!0,po(Yt,`RPC '${e}' stream ${l} transport errored. Name:`,k.name,"Message:",k.message),K.a_(new re($.UNAVAILABLE,"The operation could not be completed")))})),J(A,Dl.EventType.MESSAGE,(k=>{if(!P){const U=k.data[0];qe(!!U,16349);const oe=U,Z=oe?.error||oe[0]?.error;if(Z){le(Yt,`RPC '${e}' stream ${l} received error:`,Z);const ie=Z.status;let ee=(function(S){const N=Nt[S];if(N!==void 0)return SE(N)})(ie),ce=Z.message;ee===void 0&&(ee=$.INTERNAL,ce="Unknown error status: "+ie+" with message "+Z.message),P=!0,K.a_(new re(ee,ce)),A.close()}else le(Yt,`RPC '${e}' stream ${l} received:`,U),K.u_(U)}})),J(p,q1.STAT_EVENT,(k=>{k.stat===_m.PROXY?le(Yt,`RPC '${e}' stream ${l} detected buffering proxy`):k.stat===_m.NOPROXY&&le(Yt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function om(){return typeof document<"u"?document:null}function zh(s){return new yx(s,!0)}class UE{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&le("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const E0="PersistentStream";class zE{constructor(e,n,r,l,c,d,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new re($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(E0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(le(E0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mR extends zE{constructor(e,n,r,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ex(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ee.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ee.min():d.readTime?Vi(d.readTime):Ee.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nm(this.serializer),n.addTarget=(function(c,d){let p;const y=d.target;if(p=bm(y)?{documents:bx(c,y)}:{query:Ax(c,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=RE(c,d.resumeToken);const E=Cm(c,d.expectedCount);E!==null&&(p.expectedCount=E)}else if(d.snapshotVersion.compareTo(Ee.min())>0){p.readTime=gh(c,d.snapshotVersion.toTimestamp());const E=Cm(c,d.expectedCount);E!==null&&(p.expectedCount=E)}return p})(this.serializer,e);const r=Cx(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.q_(n)}}class pR extends zE{constructor(e,n,r,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wx(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Tx(this.serializer,r)))};this.q_(n)}}class gR{}class yR extends gR{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,xm(n,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re($.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,xm(n,r),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new re($.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _R{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const da="RemoteStore";class vR{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{ga(this)&&(le(da,"Restarting streams for network reachability change."),await(async function(y){const E=Te(y);E.Ea.add(4),await ac(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Bh(E)})(this))}))})),this.Ra=new _R(r,l)}}async function Bh(s){if(ga(s))for(const e of s.da)await e(!0)}async function ac(s){for(const e of s.da)await e(!1)}function BE(s,e){const n=Te(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mp(n)?fp(n):So(n).O_()&&dp(n,e))}function hp(s,e){const n=Te(s),r=So(n);n.Ia.delete(e),r.O_()&&qE(n,e),n.Ia.size===0&&(r.O_()?r.L_():ga(n)&&n.Ra.set("Unknown"))}function dp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(s).Y_(e)}function qE(s,e){s.Va.Ue(e),So(s).Z_(e)}function fp(s){s.Va=new fx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),So(s).start(),s.Ra.ua()}function mp(s){return ga(s)&&!So(s).x_()&&s.Ia.size>0}function ga(s){return Te(s).Ea.size===0}function HE(s){s.Va=void 0}async function ER(s){s.Ra.set("Online")}async function TR(s){s.Ia.forEach(((e,n)=>{dp(s,e)}))}async function wR(s,e){HE(s),mp(s)?(s.Ra.ha(e),fp(s)):s.Ra.set("Unknown")}async function bR(s,e,n){if(s.Ra.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){le(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(s,r)}else if(e instanceof Zu?s.Va.Ze(e):e instanceof CE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ee.min()))try{const r=await PE(s.localStore);n.compareTo(r)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(E);T&&c.Ia.set(E,T.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,E)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Kt.EMPTY_BYTE_STRING,T.snapshotVersion)),qE(c,y);const A=new cr(T.target,y,E,T.sequenceNumber);dp(c,A)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){le(da,"Failed to raise snapshot:",r),await _h(s,r)}}async function _h(s,e,n){if(!Ao(e))throw e;s.Ea.add(1),await ac(s),s.Ra.set("Offline"),n||(n=()=>PE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{le(da,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Bh(s)}))}function FE(s,e){return e().catch((n=>_h(s,n,e)))}async function qh(s){const e=Te(s),n=vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;AR(e);)try{const l=await rR(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,SR(e,l)}catch(l){await _h(e,l)}GE(e)&&QE(e)}function AR(s){return ga(s)&&s.Ta.length<10}function SR(s,e){s.Ta.push(e);const n=vr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function GE(s){return ga(s)&&!vr(s).x_()&&s.Ta.length>0}function QE(s){vr(s).start()}async function CR(s){vr(s).ra()}async function xR(s){const e=vr(s);for(const n of s.Ta)e.ea(n.mutations)}async function RR(s,e,n){const r=s.Ta.shift(),l=sp.from(r,e,n);await FE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await qh(s)}async function NR(s,e){e&&vr(s).X_&&await(async function(r,l){if((function(d){return ux(d)&&d!==$.ABORTED})(l.code)){const c=r.Ta.shift();vr(r).B_(),await FE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await qh(r)}})(s,e),GE(s)&&QE(s)}async function T0(s,e){const n=Te(s);n.asyncQueue.verifyOperationInProgress(),le(da,"RemoteStore received new credentials");const r=ga(n);n.Ea.add(3),await ac(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function IR(s,e){const n=Te(s);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await ac(n),n.Ra.set("Unknown"))}function So(s){return s.ma||(s.ma=(function(n,r,l){const c=Te(n);return c.sa(),new mR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:ER.bind(null,s),t_:TR.bind(null,s),r_:wR.bind(null,s),H_:bR.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),mp(s)?fp(s):s.Ra.set("Unknown")):(await s.ma.stop(),HE(s))}))),s.ma}function vr(s){return s.fa||(s.fa=(function(n,r,l){const c=Te(n);return c.sa(),new pR(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:CR.bind(null,s),r_:NR.bind(null,s),ta:xR.bind(null,s),na:RR.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await qh(s)):(await s.fa.stop(),s.Ta.length>0&&(le(da,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class pp{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const d=Date.now()+r,p=new pp(e,n,d,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(s,e){if(Es("AsyncQueue",`${e}: ${s}`),Ao(s))return new re($.UNAVAILABLE,`${e}: ${s}`);throw s}class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Ol(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class w0{constructor(){this.ga=new ot(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Eo{constructor(e,n,r,l,c,d,p,y,E){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,r,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Eo(e,n,mo.emptySet(n),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class DR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class OR{constructor(){this.queries=b0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Te(n),c=l.queries;l.queries=b0(),c.forEach(((d,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new re($.ABORTED,"Firestore shutting down"))}}function b0(){return new pa((s=>dE(s)),Vh)}async function yp(s,e){const n=Te(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new DR,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=gp(d,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&vp(n)}async function _p(s,e){const n=Te(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jR(s,e){const n=Te(s);let r=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(r=!0);d.wa=l}}r&&vp(n)}function MR(s,e,n){const r=Te(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function vp(s){s.Ca.forEach((e=>{e.next()}))}var Om,A0;(A0=Om||(Om={})).Ma="default",A0.Cache="cache";class Ep{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Om.Cache}}class KE{constructor(e){this.key=e}}class YE{constructor(e){this.key=e}}class VR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=fE(e),this.tu=new mo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new w0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,A)=>{const x=l.get(T),P=kh(this.query,A)?A:null,K=!!x&&this.mutatedKeys.has(x.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let k=!1;x&&P?x.data.isEqual(P.data)?K!==J&&(r.track({type:3,doc:P}),k=!0):this.su(x,P)||(r.track({type:2,doc:P}),k=!0,(y&&this.eu(P,y)>0||E&&this.eu(P,E)<0)&&(p=!0)):!x&&P?(r.track({type:0,doc:P}),k=!0):x&&!P&&(r.track({type:1,doc:x}),k=!0,(y||E)&&(p=!0)),k&&(P?(d=d.add(P),c=J?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:d,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(P,K){const J=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:k})}};return J(P)-J(K)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,E=y!==this.Za;return this.Za=y,d.length!==0||E?{snapshot:new Eo(this.query,e.tu,c,d,e.mutatedKeys,y===0,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new YE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new KE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tp="SyncEngine";class kR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LR{constructor(e){this.key=e,this.hu=!1}}class PR{constructor(e,n,r,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new pa((p=>dE(p)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(me.comparator),this.Au=new Map,this.Ru=new op,this.Vu={},this.mu=new Map,this.fu=vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UR(s,e,n=!0){const r=e2(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await XE(r,e,n,!0),l}async function zR(s,e){const n=e2(s);await XE(n,e,!0,!1)}async function XE(s,e,n,r){const l=await aR(s.localStore,Mi(e)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await BR(s,e,c,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&BE(s.remoteStore,l),p}async function BR(s,e,n,r,l){s.pu=(A,x,P)=>(async function(J,k,U,oe){let Z=k.view.ru(U);Z.Cs&&(Z=await g0(J.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,Z))));const ie=oe&&oe.targetChanges.get(k.targetId),ee=oe&&oe.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(Z,J.isPrimaryClient,ie,ee);return C0(J,k.targetId,ce.au),ce.snapshot})(s,A,x,P);const c=await g0(s.localStore,e,!0),d=new VR(e,c.Qs),p=d.ru(c.documents),y=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),E=d.applyChanges(p,s.isPrimaryClient,y);C0(s,n,E.au);const T=new kR(e,n,d);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),E.snapshot}async function qR(s,e,n){const r=Te(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!Vh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Im(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&hp(r.remoteStore,l.targetId),jm(r,l.targetId)})).catch(bo)):(jm(r,l.targetId),await Im(r.localStore,l.targetId,!0))}async function HR(s,e){const n=Te(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hp(n.remoteStore,r.targetId))}async function FR(s,e,n){const r=WR(s);try{const l=await(function(d,p){const y=Te(d),E=Ze.now(),T=p.reduce(((P,K)=>P.add(K.key)),Me());let A,x;return y.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let K=Ts(),J=Me();return y.Ns.getEntries(P,T).next((k=>{K=k,K.forEach(((U,oe)=>{oe.isValidDocument()||(J=J.add(U))}))})).next((()=>y.localDocuments.getOverlayedDocuments(P,K))).next((k=>{A=k;const U=[];for(const oe of p){const Z=rx(oe,A.get(oe.key).overlayedDocument);Z!=null&&U.push(new Ar(oe.key,Z,sE(Z.value.mapValue),ni.exists(!0)))}return y.mutationQueue.addMutationBatch(P,E,U,p)})).next((k=>{x=k;const U=k.applyToLocalDocumentSet(A,J);return y.documentOverlayCache.saveOverlays(P,k.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:pE(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let E=d.Vu[d.currentUser.toKey()];E||(E=new ot(je)),E=E.insert(p,y),d.Vu[d.currentUser.toKey()]=E})(r,l.batchId,n),await oc(r,l.changes),await qh(r.remoteStore)}catch(l){const c=gp(l,"Failed to persist write");n.reject(c)}}async function $E(s,e){const n=Te(s);try{const r=await iR(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(qe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?qe(d.hu,14607):l.removedDocuments.size>0&&(qe(d.hu,42227),d.hu=!1))})),await oc(n,r,e)}catch(r){await bo(r)}}function S0(s,e,n){const r=Te(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=Te(d);y.onlineState=p;let E=!1;y.queries.forEach(((T,A)=>{for(const x of A.Sa)x.va(p)&&(E=!0)})),E&&vp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GR(s,e,n){const r=Te(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let d=new ot(me.comparator);d=d.insert(c,$t.newNoDocument(c,Ee.min()));const p=Me().add(c),y=new Uh(Ee.min(),new Map,new ot(je),d,p);await $E(r,y),r.du=r.du.remove(c),r.Au.delete(e),wp(r)}else await Im(r.localStore,e,!1).then((()=>jm(r,e,n))).catch(bo)}async function QR(s,e){const n=Te(s),r=e.batch.batchId;try{const l=await nR(n.localStore,e);ZE(n,r,null),WE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oc(n,l)}catch(l){await bo(l)}}async function KR(s,e,n){const r=Te(s);try{const l=await(function(d,p){const y=Te(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let T;return y.mutationQueue.lookupMutationBatch(E,p).next((A=>(qe(A!==null,37113),T=A.keys(),y.mutationQueue.removeMutationBatch(E,A)))).next((()=>y.mutationQueue.performConsistencyCheck(E))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(E,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,T))).next((()=>y.localDocuments.getDocuments(E,T)))}))})(r.localStore,e);ZE(r,e,n),WE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oc(r,l)}catch(l){await bo(l)}}function WE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function ZE(s,e,n){const r=Te(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function jm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||JE(s,r)}))}function JE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(hp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),wp(s))}function C0(s,e,n){for(const r of n)r instanceof KE?(s.Ru.addReference(r.key,e),YR(s,r)):r instanceof YE?(le(Tp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||JE(s,r.key)):ye(19791,{wu:r})}function YR(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(le(Tp,"New document in limbo: "+n),s.Eu.add(r),wp(s))}function wp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(et.fromString(e)),r=s.fu.next();s.Au.set(r,new LR(n)),s.du=s.du.insert(n,r),BE(s.remoteStore,new cr(Mi(Mh(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function oc(s,e,n){const r=Te(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{d.push(r.pu(y,e,n).then((E=>{if((E||n)&&r.isPrimaryClient){const T=E?!E.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(E){l.push(E);const T=cp.As(y.targetId,E);c.push(T)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(y,E){const T=Te(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>W.forEach(E,(x=>W.forEach(x.Es,(P=>T.persistence.referenceDelegate.addReference(A,x.targetId,P))).next((()=>W.forEach(x.ds,(P=>T.persistence.referenceDelegate.removeReference(A,x.targetId,P)))))))))}catch(A){if(!Ao(A))throw A;le(up,"Failed to update sequence numbers: "+A)}for(const A of E){const x=A.targetId;if(!A.fromCache){const P=T.Ms.get(x),K=P.snapshotVersion,J=P.withLastLimboFreeSnapshotVersion(K);T.Ms=T.Ms.insert(x,J)}}})(r.localStore,c))}async function XR(s,e){const n=Te(s);if(!n.currentUser.isEqual(e)){le(Tp,"User change. New user:",e.toKey());const r=await LE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new re($.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oc(n,r.Ls)}}function $R(s,e){const n=Te(s),r=n.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let l=Me();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function e2(s){const e=Te(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GR.bind(null,e),e.Pu.H_=jR.bind(null,e.eventManager),e.Pu.yu=MR.bind(null,e.eventManager),e}function WR(s){const e=Te(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KR.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tR(this.persistence,new Zx,e.initialUser,this.serializer)}Cu(e){return new kE(lp.mi,this.serializer)}Du(e){return new lR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class ZR extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lx(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new kE((r=>yh.mi(r,n)),this.serializer)}}class Mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XR.bind(null,this.syncEngine),await IR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OR})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=(function(c){return new fR(c)})(e.databaseInfo);return(function(c,d,p,y){return new yR(c,d,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,d,p){return new vR(r,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>S0(this.syncEngine,n,0)),(function(){return v0.v()?new v0:new cR})())}createSyncEngine(e,n){return(function(l,c,d,p,y,E,T){const A=new PR(l,c,d,p,y,E);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Te(n);le(da,"RemoteStore shutting down."),r.Ea.add(5),await ac(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};class bp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Er="FirestoreClient";class JR{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Xt.UNAUTHENTICATED,this.clientId=Wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{le(Er,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(le(Er,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function lm(s,e){s.asyncQueue.verifyOperationInProgress(),le(Er,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await LE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function x0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await eN(s);le(Er,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>T0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>T0(e.remoteStore,l))),s._onlineComponents=e}async function eN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){le(Er,"Using user provided OfflineComponentProvider");try{await lm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await lm(s,new vh)}}else le(Er,"Using default OfflineComponentProvider"),await lm(s,new ZR(void 0));return s._offlineComponents}async function t2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(le(Er,"Using user provided OnlineComponentProvider"),await x0(s,s._uninitializedComponentsProvider._online)):(le(Er,"Using default OnlineComponentProvider"),await x0(s,new Mm))),s._onlineComponents}function tN(s){return t2(s).then((e=>e.syncEngine))}async function Eh(s){const e=await t2(s),n=e.eventManager;return n.onListen=UR.bind(null,e.syncEngine),n.onUnlisten=qR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HR.bind(null,e.syncEngine),n}function nN(s,e,n={}){const r=new ys;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,E){const T=new bp({next:x=>{T.Nu(),d.enqueueAndForget((()=>_p(c,A)));const P=x.docs.has(p);!P&&x.fromCache?E.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&y&&y.source==="server"?E.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(x)},error:x=>E.reject(x)}),A=new Ep(Mh(p.path),T,{includeMetadataChanges:!0,qa:!0});return yp(c,A)})(await Eh(s),s.asyncQueue,e,n,r))),r.promise}function iN(s,e,n={}){const r=new ys;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,E){const T=new bp({next:x=>{T.Nu(),d.enqueueAndForget((()=>_p(c,A))),x.fromCache&&y.source==="server"?E.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(x)},error:x=>E.reject(x)}),A=new Ep(p,T,{includeMetadataChanges:!0,qa:!0});return yp(c,A)})(await Eh(s),s.asyncQueue,e,n,r))),r.promise}function n2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const R0=new Map;const i2="firestore.googleapis.com",N0=!0;class I0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i2,this.ssl=N0}else this.host=e.host,this.ssl=e.ssl??N0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vx)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new cC;switch(r.type){case"firstParty":return new fC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=R0.get(n);r&&(le("ComponentProvider","Removing Datastore"),R0.delete(n),r.terminate())})(this),Promise.resolve()}}function sN(s,e,n,r={}){s=Cn(s,Hh);const l=fa(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Lm(`https://${p}`),Pm("Firestore",!0)),c.host!==i2&&c.host!==p&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!oa(y,d)&&(s._setSettings(y),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=Xt.MOCK_USER;else{E=W0(r.mockUserToken,s._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(A)}s._authCredentials=new uC(new Q1(E,T))}}class ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nc(n,ut._jsonSchema))return new ut(e,r||null,new me(et.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:Dt("string",ut._jsonSchemaVersion),referencePath:Dt("string")};class fr extends ya{constructor(e,n,r){super(e,n,Mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new me(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function Co(s,e,...n){if(s=_t(s),K1("collection","path",e),s instanceof Hh){const r=et.fromString(e,...n);return Hv(r),new fr(s,null,r)}{if(!(s instanceof ut||s instanceof fr))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(et.fromString(e,...n));return Hv(r),new fr(s.firestore,null,r)}}function lc(s,e,...n){if(s=_t(s),arguments.length===1&&(e=Wm.newId()),K1("doc","path",e),s instanceof Hh){const r=et.fromString(e,...n);return qv(r),new ut(s,null,new me(r))}{if(!(s instanceof ut||s instanceof fr))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(et.fromString(e,...n));return qv(r),new ut(s.firestore,s instanceof fr?s.converter:null,new me(r))}}const D0="AsyncQueue";class O0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UE(this,"async_queue_retry"),this._c=()=>{const r=om();r&&le(D0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ys;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ao(e))throw e;le(D0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",j0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=pp.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&ye(47125,{Pc:j0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function j0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function M0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Tr extends Hh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new O0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O0(e),this._firestoreClient=void 0,await e}}}function rN(s,e){const n=typeof s=="object"?s:Bm(),r=typeof s=="string"?s:uh,l=Ch(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=Y0("firestore");c&&sN(l,...c)}return l}function Fh(s){if(s._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||aN(s),s._firestoreClient}function aN(s){const e=s._freezeSettings(),n=(function(l,c,d,p){return new IC(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,n2(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new JR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Kt.fromBase64String(e))}catch(n){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Dt("string",zn._jsonSchemaVersion),bytes:Dt("string")};class Gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._methodName=e}}class ki{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(nc(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:Dt("string",ki._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};class Li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Li(e.vectorValues);throw new re($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Dt("string",Li._jsonSchemaVersion),vectorValues:Dt("object")};const oN=/^__.*__$/;class lN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new sc(e,this.data,n,this.fieldTransforms)}}class s2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function r2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:s})}}class Sp{constructor(e,n,r,l,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(r2(this.Ac)&&oN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Cc(e,n,r,l=!1){return new Sp({Ac:e,methodName:n,Dc:r,path:Qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qh(s){const e=s._freezeSettings(),n=zh(s._databaseId);return new cN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function a2(s,e,n,r,l,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);Cp("Data must be an object, but it was:",d,r);const p=o2(r,d);let y,E;if(c.merge)y=new Sn(d.fieldMask),E=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const x=Vm(e,A,n);if(!d.contains(x))throw new re($.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);c2(T,x)||T.push(x)}y=new Sn(T),E=d.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,E=d.fieldTransforms;return new lN(new fn(p),y,E)}class Kh extends Ap{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function uN(s,e,n,r){const l=s.Cc(1,e,n);Cp("Data must be an object, but it was:",l,r);const c=[],d=fn.empty();br(r,((y,E)=>{const T=xp(e,y,n);E=_t(E);const A=l.yc(T);if(E instanceof Kh)c.push(T);else{const x=cc(E,A);x!=null&&(c.push(T),d.set(T,x))}}));const p=new Sn(c);return new s2(d,p,l.fieldTransforms)}function hN(s,e,n,r,l,c){const d=s.Cc(1,e,n),p=[Vm(e,r,n)],y=[l];if(c.length%2!=0)throw new re($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)p.push(Vm(e,c[x])),y.push(c[x+1]);const E=[],T=fn.empty();for(let x=p.length-1;x>=0;--x)if(!c2(E,p[x])){const P=p[x];let K=y[x];K=_t(K);const J=d.yc(P);if(K instanceof Kh)E.push(P);else{const k=cc(K,J);k!=null&&(E.push(P),T.set(P,k))}}const A=new Sn(E);return new s2(T,A,d.fieldTransforms)}function dN(s,e,n,r=!1){return cc(n,s.Cc(r?4:3,e))}function cc(s,e){if(l2(s=_t(s)))return Cp("Unsupported field value:",e,s),o2(s,e);if(s instanceof Ap)return(function(r,l){if(!r2(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const p of r){let y=cc(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ze.fromDate(r);return{timestampValue:gh(l.serializer,c)}}if(r instanceof Ze){const c=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(l.serializer,c)}}if(r instanceof ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:RE(l.serializer,r._byteString)};if(r instanceof ut){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ap(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Li)return(function(d,p){return{mapValue:{fields:{[nE]:{stringValue:iE},[hh]:{arrayValue:{values:d.toArray().map((E=>{if(typeof E!="number")throw p.Sc("VectorValues must only contain numeric values.");return ip(p.serializer,E)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ih(r)}`)})(s,e)}function o2(s,e){const n={};return $1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):br(s,((r,l)=>{const c=cc(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function l2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ze||s instanceof ki||s instanceof zn||s instanceof ut||s instanceof Ap||s instanceof Li)}function Cp(s,e,n){if(!l2(n)||!Y1(n)){const r=Ih(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Vm(s,e,n){if((e=_t(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return xp(s,e);throw Th("Field path arguments must be of type string or ",s,!1,void 0,n)}const fN=new RegExp("[~\\*/\\[\\]]");function xp(s,e,n){if(e.search(fN)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Gh(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Th(s,e,n,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new re($.INVALID_ARGUMENT,p+s+y)}function c2(s,e){return s.some((n=>n.isEqual(e)))}class u2{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mN extends u2{data(){return super.data()}}function Rp(s,e){return typeof e=="string"?xp(s,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}function h2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Np{}class pN extends Np{}function uc(s,e,...n){let r=[];e instanceof Np&&r.push(e),r=r.concat(n),(function(c){const d=c.filter((y=>y instanceof Ip)).length,p=c.filter((y=>y instanceof Yh)).length;if(d>1||d>0&&p>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Yh extends pN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yh(e,n,r)}_apply(e){const n=this._parse(e);return d2(e._query,n),new ya(e.firestore,e.converter,Am(e._query,n))}_parse(e){const n=Qh(e.firestore);return(function(c,d,p,y,E,T,A){let x;if(E.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){k0(A,T);const K=[];for(const J of A)K.push(V0(y,c,J));x={arrayValue:{values:K}}}else x=V0(y,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||k0(A,T),x=dN(p,d,A,T==="in"||T==="not-in");return It.create(E,T,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pi(s,e,n){const r=e,l=Rp("where",s);return Yh._create(l,r,n)}class Ip extends Np{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ip(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const y of p)d2(d,y),d=Am(d,y)})(e._query,n),new ya(e.firestore,e.converter,Am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function V0(s,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&n.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(et.fromString(n));if(!me.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(s,new me(r))}if(n instanceof ut)return Wv(s,n._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function k0(s,e){if(!Array.isArray(s)||s.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d2(s,e){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gN{convertValue(e,n="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return br(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[hh].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Li(n)}convertGeoPoint(e){return new ki(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);qe(ME(r),9688,{name:e});const l=new Ql(r.get(1),r.get(3)),c=new me(r.popFirst(5));return l.isEqual(n)||Es(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function f2(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ra extends u2{constructor(e,n,r,l,c,d){super(e,n,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ra._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:Dt("string",ra._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Ju extends ra{data(e={}){return super.data(e)}}class aa{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Ml(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ju(this._firestore,this._userDataWriter,r.key,r,new Ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new Ju(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ml(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Ju(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ml(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,T=-1;return p.type!==0&&(E=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:yN(p.type),doc:y,oldIndex:E,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:s})}}function _N(s){s=Cn(s,ut);const e=Cn(s.firestore,Tr);return nN(Fh(e),s._key).then((n=>p2(e,s,n)))}aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:Dt("string",aa._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Dp extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function Xh(s){s=Cn(s,ya);const e=Cn(s.firestore,Tr),n=Fh(e),r=new Dp(e);return h2(s._query),iN(n,s._query).then((l=>new aa(e,r,s,l)))}function vN(s,e,n){s=Cn(s,ut);const r=Cn(s.firestore,Tr),l=f2(s.converter,e);return Op(r,[a2(Qh(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,ni.none())])}function m2(s,e,n,...r){s=Cn(s,ut);const l=Cn(s.firestore,Tr),c=Qh(l);let d;return d=typeof(e=_t(e))=="string"||e instanceof Gh?hN(c,"updateDoc",s._key,e,n,r):uN(c,"updateDoc",s._key,e),Op(l,[d.toMutation(s._key,ni.exists(!0))])}function EN(s,e){const n=Cn(s.firestore,Tr),r=lc(s),l=f2(s.converter,e);return Op(n,[a2(Qh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,ni.exists(!1))]).then((()=>r))}function TN(s,...e){s=_t(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||M0(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(M0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,d,p;if(s instanceof ut)d=Cn(s.firestore,Tr),p=Mh(s._key.path),c={next:y=>{e[r]&&e[r](p2(d,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Cn(s,ya);d=Cn(y.firestore,Tr),p=y._query;const E=new Dp(d);c={next:T=>{e[r]&&e[r](new aa(d,E,y,T))},error:e[r+1],complete:e[r+2]},h2(s._query)}return(function(E,T,A,x){const P=new bp(x),K=new Ep(T,P,A);return E.asyncQueue.enqueueAndForget((async()=>yp(await Eh(E),K))),()=>{P.Nu(),E.asyncQueue.enqueueAndForget((async()=>_p(await Eh(E),K)))}})(Fh(d),p,l,c)}function Op(s,e){return(function(r,l){const c=new ys;return r.asyncQueue.enqueueAndForget((async()=>FR(await tN(r),l,c))),c.promise})(Fh(s),e)}function p2(s,e,n){const r=n.docs.get(e._key),l=new Dp(s);return new ra(s,l,e._key,r,new Ml(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){wo=l})(ma),la(new mr("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),p=new Tr(new hC(r.getProvider("auth-internal")),new mC(d,r.getProvider("app-check-internal")),(function(E,T){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(E.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Di(Pv,Uv,e),Di(Pv,Uv,"esm2020")})();var wN="firebase",bN="12.6.0";Di(wN,bN,"app");const g2="firebasestorage.googleapis.com",AN="storageBucket",SN=120*1e3,CN=600*1e3;class Hi extends qi{constructor(e,n,r=0){super(cm(e),`Firebase Storage: ${n} (${cm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function cm(s){return"storage/"+s}function xN(){const s="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,s)}function RN(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NN(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function IN(s){return new Hi(zi.INVALID_URL,"Invalid URL '"+s+"'.")}function DN(s){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function L0(s){return new Hi(zi.INVALID_ARGUMENT,s)}function y2(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function ON(s){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ti{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ti.makeFromUrl(e,n)}catch{return new ti(e,"")}if(r.path==="")return r;throw DN(e)}static makeFromUrl(e,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function c(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),y={bucket:1,path:3};function E(ie){ie.path_=decodeURIComponent(ie.path)}const T="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",P=new RegExp(`^https?://${A}/${T}/b/${l}/o${x}`,"i"),K={bucket:1,path:3},J=n===g2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",U=new RegExp(`^https?://${J}/${l}/${k}`,"i"),Z=[{regex:p,indices:y,postModify:c},{regex:P,indices:K,postModify:E},{regex:U,indices:{bucket:1,path:2},postModify:E}];for(let ie=0;ie<Z.length;ie++){const ee=Z[ie],ce=ee.regex.exec(e);if(ce){const D=ce[ee.indices.bucket];let S=ce[ee.indices.path];S||(S=""),r=new ti(D,S),ee.postModify(r);break}}if(r==null)throw IN(e);return r}}class jN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MN(s,e,n){let r=1,l=null,c=null,d=!1,p=0;function y(){return p===2}let E=!1;function T(...k){E||(E=!0,e.apply(null,k))}function A(k){l=setTimeout(()=>{l=null,s(P,y())},k)}function x(){c&&clearTimeout(c)}function P(k,...U){if(E){x();return}if(k){x(),T.call(null,k,...U);return}if(y()||d){x(),T.call(null,k,...U);return}r<64&&(r*=2);let Z;p===1?(p=2,Z=0):Z=(r+Math.random())*1e3,A(Z)}let K=!1;function J(k){K||(K=!0,x(),!E&&(l!==null?(k||(p=2),clearTimeout(l),A(0)):k||(p=1)))}return A(0),c=setTimeout(()=>{d=!0,J(!0)},n),J}function VN(s){s(!1)}function kN(s){return s!==void 0}function P0(s,e,n,r){if(r<e)throw L0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw L0(`Invalid value for '${s}'. Expected ${n} or less.`)}function LN(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const l=e(r)+"="+e(s[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var wh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(wh||(wh={}));function PN(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||l||c}class UN{constructor(e,n,r,l,c,d,p,y,E,T,A,x=!0,P=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=A,this.retry=x,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,J)=>{this.resolve_=K,this.reject_=J,this.start_()})}start_(){const e=(r,l)=>{if(l){r(!1,new Hu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const y=p.loaded,E=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,E)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===wh.NO_ERROR,y=c.getStatus();if(!p||PN(y,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===wh.ABORT;r(!1,new Hu(!1,null,T));return}const E=this.successCodes_.indexOf(y)!==-1;r(!0,new Hu(E,c))})},n=(r,l)=>{const c=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());kN(y)?c(y):c()}catch(y){d(y)}else if(p!==null){const y=xN();y.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,y)):d(y)}else if(l.canceled){const y=this.appDelete_?y2():NN();d(y)}else{const y=RN();d(y)}};this.canceled_?n(!1,new Hu(!1,null,!0)):this.backoffId_=MN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zN(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function BN(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qN(s,e){e&&(s["X-Firebase-GMPID"]=e)}function HN(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function FN(s,e,n,r,l,c,d=!0,p=!1){const y=LN(s.urlParams),E=s.url+y,T=Object.assign({},s.headers);return qN(T,e),zN(T,n),BN(T,c),HN(T,r),new UN(E,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function GN(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function QN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}class bh{constructor(e,n){this._service=e,n instanceof ti?this._location=n:this._location=ti.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bh(e,n)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QN(this._location.path)}get storage(){return this._service}get parent(){const e=GN(this._location.path);if(e===null)return null;const n=new ti(this._location.bucket,e);return new bh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ON(e)}}function U0(s,e){const n=e?.[AN];return n==null?null:ti.makeFromBucketSpec(n,s)}function KN(s,e,n,r={}){s.host=`${e}:${n}`;const l=fa(e);l&&(Lm(`https://${s.host}/b`),Pm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:W0(c,s.app.options.projectId))}class YN{constructor(e,n,r,l,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=g2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SN,this._maxUploadRetryTime=CN,this._requests=new Set,l!=null?this._bucket=ti.makeFromBucketSpec(l,this._host):this._bucket=U0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=U0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bh(this,e)}_makeRequest(e,n,r,l,c=!0){if(this._deleted)return new jN(y2());{const d=FN(e,this._appId,r,l,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,l).getPromise()}}const z0="@firebase/storage",B0="0.14.0";const _2="storage";function XN(s=Bm(),e){s=_t(s);const r=Ch(s,_2).getImmediate({identifier:e}),l=Y0("storage");return l&&$N(r,...l),r}function $N(s,e,n,r={}){KN(s,e,n,r)}function WN(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new YN(n,r,l,e,ma)}function ZN(){la(new mr(_2,WN,"PUBLIC").setMultipleInstances(!0)),Di(z0,B0,""),Di(z0,B0,"esm2020")}ZN();const JN={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},jp=e1(JN),Bi=oC(jp),Fi=rN(jp);XN(jp);const eI=async(s,e,n={})=>{try{const l=(await GA(Bi,s,e)).user;return await vN(lc(Fi,"users",l.uid),{email:s,nombres:n.nombres||"",apellidos:n.apellidos||"",fechaNacimiento:n.fechaNacimiento||null,dui:n.dui||"",genero:n.genero||"",direccion:n.direccion||"",telefono:n.telefono||"",emergenciaNombre:n.emergenciaNombre||"",emergenciaTelefono:n.emergenciaTelefono||"",emergenciaParentesco:n.emergenciaParentesco||"",tipoPaciente:n.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",l.email),await KA(l),console.log("Email verification sent successfully"),{user:l,error:null}}catch(r){return console.error("Sign up error:",r),{user:null,error:r}}},tI=async(s,e)=>{try{const n=await QA(Bi,s,e);return n.user.emailVerified?{user:n.user,error:null}:(await R1(Bi),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(n){return console.error("Sign in error:",n),{user:null,error:n}}},v2=async()=>{try{return await R1(Bi),{error:null}}catch(s){return console.error("Sign out error:",s),{error:s}}},nI=async s=>{try{return await FA(Bi,s),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},q0=async s=>{try{const e=lc(Fi,"users",s),n=await _N(e);return n.exists()?{profile:n.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},iI=async(s,e)=>{try{const n=lc(Fi,"users",s);return await m2(n,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(n){return console.error("Update user profile error:",n),{error:n}}},sI=s=>$A(Bi,s),rI=async(s,e)=>{try{const n=await new Promise((r,l)=>{const c=new FileReader;c.onload=()=>r(c.result),c.onerror=l,c.readAsDataURL(e)});return await iI(s,{photoURL:n}),{photoURL:n,error:null}}catch(n){return console.error("Upload profile photo error:",n),{photoURL:null,error:n}}},aI=async(s,e)=>{try{const n={userId:s,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdAt:Ze.now(),updatedAt:Ze.now()};return{appointmentId:(await EN(Co(Fi,"appointments"),n)).id,error:null}}catch(n){return console.error("Error creating appointment:",n),{appointmentId:null,error:n}}},oI=async s=>{try{const e=uc(Co(Fi,"appointments"),Pi("userId","==",s),Pi("status","==","programada"));return{count:(await Xh(e)).size,error:null}}catch(e){return console.error("Error counting scheduled appointments:",e),{count:0,error:e}}},lI=async(s,e,n=null)=>{try{const r=uc(Co(Fi,"appointments"),Pi("userId","==",s),Pi("date","==",e),Pi("status","==","programada")),l=await Xh(r);if(n){const c=[];return l.forEach(d=>{d.id!==n&&c.push(d)}),{hasAppointment:c.length>0,error:null}}return{hasAppointment:l.size>0,error:null}}catch(r){return console.error("Error checking appointment on date:",r),{hasAppointment:!1,error:r}}},E2=(s,e)=>{const n=uc(Co(Fi,"appointments"),Pi("userId","==",s));return TN(n,r=>{const l=[];r.forEach(c=>{l.push({id:c.id,...c.data()})}),l.sort((c,d)=>{const p=new Date(`${c.date} ${c.time}`),y=new Date(`${d.date} ${d.time}`);return p-y}),e(l)},r=>{console.error("Error in appointments subscription:",r),e([])})},T2=async(s,e)=>{try{const n=lc(Fi,"appointments",s);return await m2(n,{...e,updatedAt:Ze.now()}),{error:null}}catch(n){return console.error("Error updating appointment:",n),{error:n}}},Mp=async(s,e)=>T2(s,{status:e}),cI=async()=>{try{const s=uc(Co(Fi,"appointments"),Pi("status","==","programada")),e=await Xh(s),n=new Date;let r=0;const l=[];return e.forEach(c=>{const d=c.data(),p=new Date(`${d.date}T${d.time}`),y=new Date(p.getTime()+7200*1e3);n>y&&(l.push(Mp(c.id,"perdida")),r++)}),await Promise.all(l),{updatedCount:r,error:null}}catch(s){return console.error("Error marking overdue appointments:",s),{updatedCount:0,error:s}}},uI=async(s,e,n=null)=>{try{const r=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM"],l=uc(Co(Fi,"appointments"),Pi("date","==",s),Pi("clinica","==",e),Pi("status","==","programada")),c=await Xh(l),d={};return c.forEach(y=>{const T=y.data().time;d[T]=(d[T]||0)+1}),{availableSlots:r.filter(y=>(d[y]||0)<2||y===n),error:null}}catch(r){return console.error("Error getting available time slots:",r),{availableSlots:[],error:r}}};function hI({onLogout:s,userData:e,userType:n}){const[r,l]=ae.useState(!1),[c,d]=ae.useState(!1),p=ae.useRef(null),y=ae.useRef(null),E=e&&(e.nombres||e.nombre)||"Usuario",T=n==="admin"||n==="doctor";return ae.useEffect(()=>{const A=x=>{p.current&&!p.current.contains(x.target)&&d(!1)};return c&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[c]),ae.useEffect(()=>{const A=x=>{y.current&&!y.current.contains(x.target)&&l(!1)};return r&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[r]),m.jsx("header",{className:"header",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"header-content",children:[m.jsx(Jn,{to:T?"/staff/dashboard":"/",className:"logo",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),m.jsxs("div",{className:"header-actions",children:[m.jsxs("div",{ref:y,children:[m.jsx("button",{className:"mobile-menu-btn",onClick:()=>l(!r),"aria-label":"Men",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),m.jsxs("nav",{className:`nav-menu ${r?"active":""}`,children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(Jn,{to:"/",className:"nav-button",onClick:()=>l(!1),children:"Inicio"}),m.jsx(Jn,{to:"/cita",className:"nav-button",onClick:()=>l(!1),children:"Cita"}),m.jsx(Jn,{to:"/contacto",className:"nav-button",onClick:()=>l(!1),children:"Contacto"})]}),T&&m.jsx(Jn,{to:"/staff/dashboard",className:"nav-button",onClick:()=>l(!1),children:"Dashboard"})]})]}),m.jsxs("div",{className:"profile-container",ref:p,children:[m.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>d(!c),children:[e?.photoURL?m.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("span",{className:"user-name",children:E})]}),c&&m.jsxs("div",{className:"profile-dropdown",children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(Jn,{to:"/perfil",className:"dropdown-item",onClick:()=>d(!1),children:"Perfil"}),m.jsx(Jn,{to:"/notificaciones",className:"dropdown-item",onClick:()=>d(!1),children:"Notificaciones"})]}),m.jsx("button",{className:"dropdown-item logout",onClick:s,children:"Cerrar sesin"})]})]})]})]})})})}function dI(){return m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),m.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Contacto Principal"}),m.jsxs("div",{className:"contact-info",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),m.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),m.jsx("polyline",{points:"22,6 12,13 2,6"})]}),m.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),m.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),m.jsxs("div",{className:"social-links",children:[m.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),m.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),m.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),m.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),m.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Horarios"}),m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Lunes - Sbado"}),m.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day"}),m.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Domingo"}),m.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const w2=({isOpen:s,onClose:e,onConfirm:n,title:r,message:l})=>s?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:r}),m.jsx("p",{className:"modal-message",children:l}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:n,children:"S, cancelar cita"})]})]})}):null;function fI({userData:s}){const e=km(),[n,r]=ae.useState([]),[l,c]=ae.useState(!1),[d,p]=ae.useState(null),[y,E]=ae.useState(!0);ae.useEffect(()=>{const k=Bi.currentUser;if(!k){E(!1);return}const U=E2(k.uid,oe=>{const Z=oe.sort((ie,ee)=>{const ce=new Date(`${ie.date} ${ie.time} `),D=new Date(`${ee.date} ${ee.time} `);return ce-D});r(Z),E(!1)});return()=>U()},[]);const T=k=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[k]||k,A=k=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[k]||k,x=k=>{p(k),c(!0)},P=async()=>{if(d)try{const{error:k}=await Mp(d,"cancelada");k&&(console.error("Error cancelling appointment:",k),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),c(!1),p(null)}catch(k){console.error("Unexpected error:",k),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),c(!1),p(null)}},K=async k=>{try{const U=new H0({orientation:"portrait",unit:"mm",format:"a4"}),oe=210,Z=20,ie=oe-Z*2;let ee=Z;try{const He=await fetch("/COI/logo.png");if(He.ok){const Q=await He.blob(),ne=await new Promise(Le=>{const Ae=new FileReader;Ae.onload=()=>Le(Ae.result),Ae.readAsDataURL(Q)}),he=new Image;await new Promise(Le=>{he.onload=Le,he.src=ne});const _e=40,Ce=he.height*_e/he.width,Ke=(oe-_e)/2;U.addImage(ne,"PNG",Ke,ee,_e,Ce),ee+=Ce+15}}catch(xe){console.warn("No se pudo cargar el logo:",xe)}U.setFontSize(20),U.setFont("helvetica","bold");const ce="COMPROBANTE DE CITA",D=U.getTextWidth(ce);if(U.text(ce,(oe-D)/2,ee),ee+=10,U.setDrawColor(200,200,200),U.line(Z,ee,oe-Z,ee),ee+=10,U.setFontSize(14),U.setFont("helvetica","bold"),U.text("Detalles de la Cita",Z,ee),ee+=8,U.setFontSize(11),U.setFont("helvetica","normal"),U.setFont("helvetica","bold"),U.text("Paciente:",Z,ee),U.setFont("helvetica","normal"),U.text(k.patientName||"Usuario",Z+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Motivo:",Z,ee),U.setFont("helvetica","normal"),U.text(k.reason||"No especificado",Z+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Clnica:",Z,ee),U.setFont("helvetica","normal"),U.text(A(k.clinica),Z+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Fecha:",Z,ee),U.setFont("helvetica","normal"),U.text(k.date,Z+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Hora:",Z,ee),U.setFont("helvetica","normal"),U.text(k.time,Z+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Estado:",Z,ee),U.setFont("helvetica","normal"),U.text(T(k.status),Z+30,ee),ee+=10,k.notas&&k.notas.trim()){U.setFont("helvetica","bold"),U.text("Notas adicionales:",Z,ee),ee+=6,U.setFont("helvetica","normal");const xe=U.splitTextToSize(k.notas,ie);U.text(xe,Z,ee),ee+=xe.length*6+10}U.setDrawColor(200,200,200),U.line(Z,ee,oe-Z,ee),ee+=10,U.setFontSize(10),U.setFont("helvetica","italic"),U.setTextColor(100,100,100);const S=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});U.text(`Comprobante generado el: ${S}`,Z,ee);const N=U.output("arraybuffer"),M=new Blob([N],{type:"application/pdf"}),R=URL.createObjectURL(M),j=document.createElement("a"),C=`comprobante-cita-${k.date}.pdf`;j.href=R,j.download=C,j.style.display="none",document.body.appendChild(j),j.click(),setTimeout(()=>{document.body.removeChild(j),URL.revokeObjectURL(R)},1500)}catch(U){console.error("Error generating PDF:",U),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}},J=k=>{e("/cita",{state:{editingAppointment:k}})};return m.jsxs("div",{className:"home-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("section",{className:"my-appointments-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx("h2",{className:"section-title",children:"Mis Citas"}),n.length>3&&m.jsxs(Jn,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),y?m.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:[m.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),m.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Cargando citas..."})]}):n.length>0?m.jsx(m.Fragment,{children:m.jsx("div",{className:"appointments-grid",children:n.slice(0,3).map(k=>m.jsxs("div",{className:"appointment-card",children:[m.jsxs("div",{className:"appointment-header",children:[m.jsxs("div",{className:"appointment-header-left",children:[m.jsx("div",{className:"appointment-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("button",{className:"download-receipt-btn",onClick:()=>K(k),title:"Descargar comprobante",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17"})})})]}),m.jsx("span",{className:`appointment-status status-${k.status}`,children:T(k.status)})]}),m.jsxs("div",{className:"appointment-details",children:[m.jsxs("h3",{children:["Paciente: ",k.patientName||"Usuario"]}),m.jsxs("div",{className:"appointment-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:k.date})]}),m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m.jsx("span",{children:k.time})]})]}),k.reason&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Motivo:"})," ",k.reason]}),k.clinica&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Clnica:"})," ",A(k.clinica)]}),k.notas&&k.notas.trim()&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Notas:"})," ",k.notas]})]}),k.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>J(k),title:"Editar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>x(k.id),title:"Cancelar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},k.id))})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx(Jn,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),m.jsxs("section",{className:"medical-history-section",children:[m.jsx("h2",{className:"section-title",children:"Historial Clnico"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tu Historial Mdico"}),m.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),m.jsxs("section",{className:"prescriptions-section",children:[m.jsx("h2",{className:"section-title",children:"Recetas"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),m.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tus Recetas Mdicas"}),m.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),m.jsx(w2,{isOpen:l,onClose:()=>{c(!1),p(null)},onConfirm:P,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function mI(){const s=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return m.jsx("div",{className:"contact-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"contact-header",children:[m.jsx("h1",{children:"Nuestras Ubicaciones"}),m.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),m.jsx("div",{className:"clinics-grid",children:s.map(e=>m.jsxs("div",{className:"clinic-card",children:[m.jsxs("div",{className:"clinic-header",children:[m.jsx("h2",{children:e.name}),m.jsx("span",{className:"location-tag",children:e.location})]}),m.jsxs("div",{className:"clinic-info",children:[m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((n,r)=>m.jsxs("div",{className:"info-item",children:[m.jsxs("span",{className:"label",children:[n.type,":"]}),n.whatsapp?m.jsxs("a",{href:`https://wa.me/${n.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[n.number,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):m.jsx("span",{className:"value",children:n.number})]},r))]}),m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),m.jsx("div",{className:"info-item",children:m.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function pI({userData:s}){const[e,n]=ae.useState(null),[r,l]=ae.useState(!1),[c,d]=ae.useState("");ae.useEffect(()=>{if(s)n(s);else{const A=localStorage.getItem("userData");A&&n(JSON.parse(A))}},[s]);const p=A=>new Promise((x,P)=>{const K=new FileReader;K.onload=J=>{const k=new Image;k.onload=()=>{const U=document.createElement("canvas"),oe=U.getContext("2d");let Z=k.width,ie=k.height;const ee=800;Z>ie?Z>ee&&(ie=ie*ee/Z,Z=ee):ie>ee&&(Z=Z*ee/ie,ie=ee),U.width=Z,U.height=ie,oe.drawImage(k,0,0,Z,ie),U.toBlob(ce=>{ce?x(ce):P(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},k.onerror=()=>P(new Error("Error al cargar la imagen")),k.src=J.target.result},K.onerror=()=>P(new Error("Error al leer el archivo")),K.readAsDataURL(A)}),y=A=>{if(!A)return"No especificado";const[x,P,K]=A.split("-");return new Date(x,P-1,K).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},E=A=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[A]||A,T=async A=>{const x=A.target.files[0];if(!x)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(x.type)){d("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const K=5*1024*1024;if(x.size>K){d("La imagen debe ser menor a 5MB");return}l(!0),d("");const J=Bi.currentUser;if(!J){d("Debes estar autenticado para subir una foto"),l(!1);return}try{const k=await p(x),U=new File([k],x.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:oe,error:Z}=await rI(J.uid,U);if(Z){console.error("Upload error:",Z);let ie="Error al subir la foto. Por favor, intenta de nuevo.";Z.code==="storage/unauthorized"?ie="No tienes permisos para subir fotos. Contacta al administrador.":Z.code==="storage/canceled"?ie="La subida fue cancelada.":Z.code==="storage/unknown"&&(ie="Error desconocido. Verifica tu conexin a internet."),d(ie),l(!1);return}n(ie=>({...ie,photoURL:oe})),l(!1)}catch(k){console.error("Unexpected error:",k),d(k.message||"Error inesperado. Por favor, intenta de nuevo."),l(!1)}};return e?m.jsx("div",{className:"profile-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"profile-header",children:[m.jsxs("div",{className:"profile-avatar-container",children:[m.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:T,style:{display:"none"}}),m.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:r?m.jsx("div",{className:"upload-spinner"}):e.photoURL?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),m.jsxs("div",{className:"profile-header-info",children:[m.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),m.jsx("p",{className:"profile-email",children:e.email}),c&&m.jsx("p",{className:"upload-error",children:c})]})]}),m.jsxs("div",{className:"profile-sections",children:[m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombres"}),m.jsx("p",{children:e.nombres||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("p",{children:e.apellidos||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("p",{children:y(e.fechaNacimiento)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"DUI"}),m.jsx("p",{children:e.dui||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Gnero"}),m.jsx("p",{children:E(e.genero)})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Correo Electrnico"}),m.jsx("p",{children:e.email||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.telefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Direccin"}),m.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombre"}),m.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Parentesco"}),m.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):m.jsx("div",{className:"profile-page",children:m.jsx("div",{className:"container",children:m.jsx("div",{className:"loading-state",children:m.jsx("p",{children:"Cargando perfil..."})})})})}function gI(){const s=km(),[e,n]=ae.useState([]),[r,l]=ae.useState(null),[c,d]=ae.useState(!1),[p,y]=ae.useState(null),[E,T]=ae.useState(!0);ae.useEffect(()=>{const U=Bi.currentUser;if(!U){T(!1);return}const oe=E2(U.uid,Z=>{const ie=Z.sort((ee,ce)=>{const D=new Date(`${ee.date} ${ee.time}`);return new Date(`${ce.date} ${ce.time}`)-D});n(ie),T(!1)});return()=>oe()},[]);const A=U=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[U]||U,x=U=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[U]||U,P=U=>{l(r===U?null:U)},K=U=>{y(U),d(!0)},J=async()=>{if(p)try{const{error:U}=await Mp(p,"cancelada");U&&(console.error("Error cancelling appointment:",U),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),d(!1),y(null)}catch(U){console.error("Unexpected error:",U),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),d(!1),y(null)}},k=U=>{s("/cita",{state:{editingAppointment:U}})};return m.jsxs("div",{className:"appointments-list-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"page-header",children:[m.jsxs("button",{className:"back-button",onClick:()=>s("/"),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),m.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),m.jsx("h1",{className:"page-title",children:"Mis Citas"}),m.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?m.jsx("div",{className:"appointments-list",children:e.map(U=>m.jsxs("div",{className:`appointment-list-item ${r===U.id?"expanded":""}`,children:[m.jsxs("div",{className:"appointment-summary",onClick:()=>P(U.id),children:[m.jsxs("div",{className:"summary-content",children:[m.jsxs("div",{className:"summary-date",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:U.date})]}),m.jsx("div",{className:"summary-reason",children:U.reason||"Sin motivo especificado"}),m.jsx("span",{className:`summary-status status-${U.status}`,children:A(U.status)})]}),m.jsx("div",{className:"expand-icon",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),r===U.id&&m.jsxs("div",{className:"appointment-details",children:[m.jsxs("div",{className:"details-grid",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Paciente"}),m.jsx("p",{children:U.patientName||"Usuario"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Hora"}),m.jsx("p",{children:U.time})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Clnica"}),m.jsx("p",{children:x(U.clinica)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Motivo"}),m.jsx("p",{children:U.reason||"No especificado"})]}),U.notas&&U.notas.trim()&&m.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[m.jsx("label",{children:"Notas"}),m.jsx("p",{children:U.notas})]})]}),U.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>k(U),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>K(U.id),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},U.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx("button",{className:"cta-button",onClick:()=>s("/cita"),children:"Agendar Cita"})]})]}),m.jsx(w2,{isOpen:c,onClose:()=>{d(!1),y(null)},onConfirm:J,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function yI(){const s=Ah(),{appointment:e}=s.state||{},n={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},r={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card error",children:[m.jsx("h2",{children:"No se encontr informacin de la cita"}),m.jsx("p",{children:"Parece que has llegado aqu por error."}),m.jsx(Jn,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const l=async()=>{const p=await fetch("/COI/logo.png");if(!p.ok)throw new Error("No se pudo obtener el logo");const y=await p.blob();return await new Promise((E,T)=>{const A=new FileReader;A.onload=()=>E(A.result),A.onerror=T,A.readAsDataURL(y)})},c=async()=>{try{const d=new H0({orientation:"portrait",unit:"mm",format:"a4"}),p=210,y=20,E=p-y*2;let T=y;try{const ce=await l(),D=new Image;await new Promise((R,j)=>{D.onload=R,D.onerror=j,D.src=ce});const S=40,N=D.height*S/D.width,M=(p-S)/2;d.addImage(ce,"PNG",M,T,S,N),T+=N+15}catch(ce){console.warn("No se pudo cargar el logo:",ce)}d.setFontSize(20),d.setFont("helvetica","bold"),d.setTextColor(0,0,0);const A="COMPROBANTE DE CITA",x=d.getTextWidth(A);d.text(A,(p-x)/2,T),T+=10,d.setDrawColor(200,200,200),d.line(y,T,p-y,T),T+=10;const P=r[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(d.setFontSize(14),d.setFont("helvetica","bold"),d.text("Informacin de la Clnica",y,T),T+=8,d.setFontSize(11),d.setFont("helvetica","normal"),d.text(P.name||"Clnica Dental Dr. Csar Vsquez",y,T),T+=6,P.location&&(d.setFont("helvetica","italic"),d.text(`Ubicacin: ${P.location}`,y,T),T+=6),P.phones&&P.phones.length>0&&(d.setFont("helvetica","normal"),d.text(`Telfono: ${P.phones.join(" / ")}`,y,T),T+=6),P.address){d.setFont("helvetica","normal");const ce=d.splitTextToSize(`Direccin: ${P.address}`,E);d.text(ce,y,T),T+=ce.length*6}T+=5,d.setDrawColor(200,200,200),d.line(y,T,p-y,T),T+=10,d.setFontSize(14),d.setFont("helvetica","bold"),d.text("Detalles de la Cita",y,T),T+=8,d.setFontSize(11),d.setFont("helvetica","normal");const K=n[e.motivo]||e.motivo;d.setFont("helvetica","bold"),d.text("Motivo:",y,T),d.setFont("helvetica","normal"),d.text(K,y+30,T),T+=7,d.setFont("helvetica","bold"),d.text("Clnica:",y,T),d.setFont("helvetica","normal"),d.text(P.name||e.clinica,y+30,T),T+=7,d.setFont("helvetica","bold"),d.text("Fecha:",y,T),d.setFont("helvetica","normal");const J=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(d.text(J,y+30,T),T+=7,d.setFont("helvetica","bold"),d.text("Hora:",y,T),d.setFont("helvetica","normal"),d.text(e.hora,y+30,T),T+=7,e.notas&&e.notas.trim()){T+=3,d.setFont("helvetica","bold"),d.text("Notas adicionales:",y,T),T+=6,d.setFont("helvetica","normal");const ce=d.splitTextToSize(e.notas,E);d.text(ce,y,T),T+=ce.length*6}T+=10,d.setDrawColor(200,200,200),d.line(y,T,p-y,T),T+=10,d.setFontSize(10),d.setFont("helvetica","italic"),d.setTextColor(100,100,100);const k=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});d.text(`Comprobante generado el: ${k}`,y,T),T+=6,d.text("Este comprobante es una confirmacin de tu solicitud de cita.",y,T),T+=6,d.text("Te contactaremos pronto para confirmar los detalles.",y,T);const U=d.output("arraybuffer"),oe=new Blob([U],{type:"application/pdf"}),Z=URL.createObjectURL(oe),ie=document.createElement("a"),ee=`comprobante-cita-${e.fecha}.pdf`;ie.href=Z,ie.setAttribute("href",Z),ie.download=ee,ie.setAttribute("download",ee),ie.style.display="none",document.body.appendChild(ie),ie.click(),setTimeout(()=>{document.body.removeChild(ie),URL.revokeObjectURL(Z)},1500)}catch(d){console.error("Error generating PDF:",d),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card",children:[m.jsx("div",{className:"success-icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("h1",{children:"Cita Agendada Exitosamente!"}),m.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("h3",{children:"Detalles de la Cita"}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Motivo:"}),m.jsx("span",{className:"value",children:n[e.motivo]||e.motivo})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Clnica:"}),m.jsx("span",{className:"value",children:r[e.clinica]?.name||e.clinica})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Fecha:"}),m.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Hora:"}),m.jsx("span",{className:"value",children:e.hora})]}),e.notas&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Notas:"}),m.jsx("span",{className:"value",children:e.notas})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx(Jn,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),m.jsxs("button",{onClick:c,className:"btn-primary",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function _I({userData:s}){const e=km(),r=Ah().state?.editingAppointment,l=!!r,[c,d]=ae.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[p,y]=ae.useState({}),[E,T]=ae.useState(!1),[A,x]=ae.useState([]),[P,K]=ae.useState(!1),[J,k]=ae.useState(!1),[U,oe]=ae.useState("");ae.useEffect(()=>{if(r){const j=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(C=>C.label===r.reason)?.value||"";d({motivo:j,clinica:r.clinica||"",fecha:r.date||"",hora:r.time||"",notas:r.notas||""})}},[r]),ae.useEffect(()=>{(async()=>{if(c.fecha&&c.clinica){K(!0);const j=l?r?.time:null,{availableSlots:C,error:xe}=await uI(c.fecha,c.clinica,j);xe?(console.error("Error loading available hours:",xe),x(ee)):(x(C),c.hora&&!C.includes(c.hora)&&!l&&d(He=>({...He,hora:""}))),K(!1)}else x(ee)})()},[c.fecha,c.clinica,l,r?.time]);const Z=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],ie=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],ee=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM"],ce=R=>{const{name:j,value:C}=R.target;if(j==="fecha"&&C&&new Date(C+"T00:00:00").getDay()===0){oe("No se pueden agendar citas los domingos. Por favor, selecciona otro da."),k(!0);return}d(xe=>({...xe,[j]:C})),p[j]&&y(xe=>({...xe,[j]:""}))},D=()=>{const R={};if(c.motivo||(R.motivo="Por favor selecciona el motivo de la cita"),c.clinica||(R.clinica="Por favor selecciona una clnica"),!c.fecha)R.fecha="Por favor selecciona una fecha";else{const j=new Date(c.fecha+"T00:00:00"),C=new Date;C.setHours(0,0,0,0),j<C?R.fecha="La fecha no puede ser en el pasado":j.getTime()===C.getTime()&&(R.fecha="No se pueden agendar citas para el da de hoy"),j.getDay()===0&&(R.fecha="No se pueden agendar citas los domingos")}return c.hora||(R.hora="Por favor selecciona una hora"),R},S=async R=>{R.preventDefault();const j=D();if(Object.keys(j).length>0){y(j);return}T(!0);try{const C=Bi.currentUser;if(!C){y({general:"Debes iniciar sesin para agendar una cita"}),T(!1);return}const xe=s?`${s.nombres||""} ${s.apellidos||""}`.trim():"Paciente",He=Z.find(_e=>_e.value===c.motivo)?.label||c.motivo;if(!l){const{count:_e,error:Ce}=await oI(C.uid);if(Ce){console.error("Error checking appointment limit:",Ce),y({general:"Error al verificar tus citas. Por favor, intenta de nuevo."}),T(!1);return}if(_e>=2){y({general:"Ya tienes 2 citas programadas. Debes cancelar o completar una cita existente antes de agendar una nueva."}),T(!1);return}}const Q=l?r.id:null,{hasAppointment:ne,error:he}=await lI(C.uid,c.fecha,Q);if(he){console.error("Error checking appointment on date:",he),y({general:"Error al verificar disponibilidad. Por favor, intenta de nuevo."}),T(!1);return}if(ne){y({general:"Ya tienes una cita programada para este da. No puedes agendar ms de una cita por da."}),T(!1);return}if(l){const _e={date:c.fecha,time:c.hora,reason:He,clinica:c.clinica,notas:c.notas},{error:Ce}=await T2(r.id,_e);if(Ce){console.error("Error updating appointment:",Ce),y({general:"Error al actualizar la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/",{state:{message:"Cita actualizada exitosamente"}})}else{const _e={patientName:xe,date:c.fecha,time:c.hora,reason:He,clinica:c.clinica,notas:c.notas,status:"programada"},{appointmentId:Ce,error:Ke}=await aI(C.uid,_e);if(Ke){console.error("Error creating appointment:",Ke),y({general:"Error al crear la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/cita-confirmada",{state:{appointment:c}})}}catch(C){console.error("Unexpected error:",C),y({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),T(!1)}},N=new Date;N.setDate(N.getDate()+1);const M=N.toISOString().split("T")[0];return m.jsxs("div",{className:"appointment-form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:l?"Editar Cita":"Agenda tu Cita"}),m.jsx("p",{children:l?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),m.jsxs("form",{onSubmit:S,className:"appointment-form",noValidate:!0,children:[m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Informacin de la Cita"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"motivo",name:"motivo",value:c.motivo,onChange:ce,className:`${p.motivo?"error":""} ${c.motivo?"":"placeholder"}`,children:Z.map(R=>m.jsx("option",{value:R.value,children:R.label},R.value))}),p.motivo&&m.jsxs("span",{className:"error-message",children:[" ",p.motivo]})]})}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"clinica",name:"clinica",value:c.clinica,onChange:ce,className:`${p.clinica?"error":""} ${c.clinica?"":"placeholder"}`,children:ie.map(R=>m.jsx("option",{value:R.value,children:R.label},R.value))}),p.clinica&&m.jsxs("span",{className:"error-message",children:[" ",p.clinica]})]})}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("div",{className:"date-input-wrapper",children:[m.jsx("input",{type:"text",id:"fecha",name:"fecha",value:c.fecha,onChange:ce,onClick:R=>{R.target.type="date",setTimeout(()=>{R.target.showPicker&&R.target.showPicker()},0)},onKeyDown:R=>{R.preventDefault()},onBlur:R=>{R.target.value||(R.target.type="text")},placeholder:"Selecciona una fecha",min:M,className:p.fecha?"error":"",autoComplete:"off"}),m.jsx("svg",{className:"calendar-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),p.fecha&&m.jsxs("span",{className:"error-message",children:[" ",p.fecha]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("select",{id:"hora",name:"hora",value:c.hora,onChange:ce,className:`${p.hora?"error":""} ${c.hora?"":"placeholder"}`,disabled:P,onMouseDown:R=>{(!c.fecha||!c.clinica)&&(R.preventDefault(),oe("Por favor, selecciona una clnica y una fecha antes de elegir la hora."),k(!0))},children:[m.jsx("option",{value:"",children:P?"Cargando horas disponibles...":!c.fecha||!c.clinica?"Selecciona una hora":A.length===0?"No hay horas disponibles":"Selecciona una hora"}),A.map(R=>m.jsx("option",{value:R,children:R},R))]}),p.hora&&m.jsxs("span",{className:"error-message",children:[" ",p.hora]}),c.fecha&&c.clinica&&!P&&A.length===0&&m.jsx("span",{className:"info-message",style:{color:"#0066cc",fontSize:"0.9rem",marginTop:"0.25rem",display:"block"},children:" Todas las horas estn ocupadas para esta fecha. Por favor, selecciona otro da."})]})]})]}),m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Notas Adicionales"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),m.jsx("textarea",{id:"notas",name:"notas",value:c.notas,onChange:ce,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),p.general&&m.jsxs("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:[" ",p.general]}),m.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:E,children:E?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner"}),"Procesando..."]}):l?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]}),J&&m.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:m.jsxs("div",{className:"modal-content error-modal",onClick:R=>R.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Atencin"}),m.jsx("p",{className:"modal-message",children:U}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>k(!1),children:"Entendido"})})]})})]})}function vI(){return m.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}const EI=({onLogin:s})=>{const[e,n]=ae.useState(!0),[r,l]=ae.useState(1),[c,d]=ae.useState(""),[p,y]=ae.useState({}),[E,T]=ae.useState(!1),[A,x]=ae.useState(!1),[P,K]=ae.useState(""),[J,k]=ae.useState(""),[U,oe]=ae.useState(!1),[Z,ie]=ae.useState(!1),[ee,ce]=ae.useState(""),[D,S]=ae.useState(""),[N,M]=ae.useState(""),[R,j]=ae.useState(""),[C,xe]=ae.useState(""),[He,Q]=ae.useState(""),[ne,he]=ae.useState(""),[_e,Ce]=ae.useState(""),[Ke,Le]=ae.useState(""),[Ae,tt]=ae.useState(""),[vt,sn]=ae.useState(""),[xn,ri]=ae.useState(""),[Zt,Sr]=ae.useState(""),[Bn,As]=ae.useState(""),[ai,mn]=ae.useState("primera-vez"),[oi,Gi]=ae.useState(!1),[li,Cr]=ae.useState(!1),[ht,Et]=ae.useState(!1),dt=(se,ve)=>{ve&&y(Ut=>({...Ut,[se]:""}))},xo=async se=>{se.preventDefault(),d(""),y({}),T(!0);try{if(e){if(!D||!N){d("Por favor, completa todos los campos."),T(!1);return}const{user:ve,error:Ut}=await tI(D,N);if(Ut){Ut.code==="auth/email-not-verified"?d("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):Ut.code==="auth/user-not-found"?d("No existe una cuenta con este correo."):Ut.code==="auth/wrong-password"?d("Contrasea incorrecta."):Ut.code==="auth/invalid-credential"?d("Correo o contrasea incorrectos."):d(Ut.message||"Error al iniciar sesin."),T(!1);return}ve&&s(ve)}else if(r===1){const ve={};if(D||(ve.email="Ingresa tu correo electrnico"),N||(ve.password="Crea una contrasea"),R||(ve.confirmPassword="Confirma tu contrasea"),Object.keys(ve).length>0){y(ve),ce("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}if(N.length<6){y({password:"La contrasea debe tener al menos 6 caracteres"}),ce("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}if(N!==R){y({confirmPassword:"Las contraseas no coinciden"}),ce("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}l(2),T(!1)}else{const ve={};if(C||(ve.nombres="Ingresa tus nombres"),He||(ve.apellidos="Ingresa tus apellidos"),ne||(ve.fechaNacimiento="Selecciona tu fecha de nacimiento"),_e||(ve.dui="Ingresa tu nmero de DUI"),Ke||(ve.genero="Selecciona tu gnero"),Ae||(ve.direccion="Ingresa tu direccin completa"),vt||(ve.telefono="Ingresa tu nmero de telfono"),xn||(ve.emergenciaNombre="Ingresa el nombre del contacto"),Zt||(ve.emergenciaTelefono="Ingresa el telfono del contacto"),Bn||(ve.emergenciaParentesco="Selecciona el parentesco"),ne){const Jt=new Date(ne),ft=new Date;let en=ft.getFullYear()-Jt.getFullYear();const st=ft.getMonth()-Jt.getMonth();(st<0||st===0&&ft.getDate()<Jt.getDate())&&en--,en<18&&(ve.fechaNacimiento="Debes tener al menos 18 aos para registrarte")}if(vt&&vt.length!==8&&(ve.telefono="El telfono debe tener exactamente 8 dgitos"),Zt&&Zt.length!==8&&(ve.emergenciaTelefono="El telfono debe tener exactamente 8 dgitos"),_e&&_e.length!==10&&(ve.dui="El DUI debe tener el formato completo (########-#)"),Object.keys(ve).length>0){y(ve),ce("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}const Ut={nombres:C,apellidos:He,fechaNacimiento:ne,dui:_e,genero:Ke,direccion:Ae,telefono:vt,emergenciaNombre:xn,emergenciaTelefono:Zt,emergenciaParentesco:Bn,tipoPaciente:ai};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:Ki,error:Cs}=await eI(D,N,Ut);if(Cs){sessionStorage.removeItem("justRegistered"),Cs.code==="auth/email-already-in-use"?d("Este correo ya est registrado."):d(Cs.message||"Error al registrar usuario."),T(!1);return}d(""),oe(!0)}}catch(ve){console.error("Error:",ve),d("Ocurri un error inesperado. Por favor, intenta de nuevo."),T(!1)}},xr=async()=>{oe(!1),sessionStorage.removeItem("justRegistered"),await v2(),n(!0),l(1),S(""),M(""),j(""),window.scrollTo(0,0)},Mt=se=>{n(se),d(""),y({}),l(1)},Qi=async se=>{if(se.preventDefault(),k(""),!P){k("Por favor, ingresa tu correo electrnico.");return}T(!0);const{error:ve}=await nI(P);T(!1),ve?k("Error al enviar el correo de recuperacin."):(k("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{x(!1),K(""),k("")},3e3))},Rr=se=>{let ve=se.target.value.replace(/\D/g,"");ve.length>9&&(ve=ve.slice(0,9)),ve.length>8&&(ve=ve.slice(0,8)+"-"+ve.slice(8,9)),Ce(ve),dt("dui",ve)},Ss=(se,ve)=>Ut=>{const Ki=Ut.target.value.replace(/\D/g,"");Ki.length<=8&&(se(Ki),dt(ve,Ki))};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:`login-card ${!e&&r===2?"wide":""}`,children:[m.jsx("div",{className:"login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),r===1&&m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>Mt(!0),children:"INICIAR SESIN"}),m.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>Mt(!1),children:"REGISTRARSE"})]}),m.jsxs("form",{onSubmit:xo,className:"login-form",noValidate:!0,children:[(e||r===1)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:D,onChange:se=>{S(se.target.value),dt("email",se.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsxs("div",{className:"password-input-wrapper",children:[m.jsx("input",{type:oi?"text":"password",id:"password",value:N,onChange:se=>{M(se.target.value),dt("password",se.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),m.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Gi(!oi),"aria-label":oi?"Ocultar contrasea":"Mostrar contrasea",children:oi?m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),m.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),!e&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),m.jsxs("div",{className:"password-input-wrapper",children:[m.jsx("input",{type:li?"text":"password",id:"confirmPassword",value:R,onChange:se=>{j(se.target.value),dt("confirmPassword",se.target.value)},placeholder:"",className:p.confirmPassword?"input-error":"",required:!0}),m.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Cr(!li),"aria-label":li?"Ocultar contrasea":"Mostrar contrasea",children:li?m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),m.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),p.confirmPassword&&m.jsx("span",{className:"field-error-message",children:p.confirmPassword})]})]}),!e&&r===2&&m.jsxs("div",{className:"registration-step-2",children:[m.jsx("h3",{children:"Datos Personales"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombres"}),m.jsx("input",{type:"text",value:C,onChange:se=>{xe(se.target.value),dt("nombres",se.target.value)},placeholder:"Ingresa tus nombres",className:p.nombres?"input-error":"",required:!0}),p.nombres&&m.jsx("span",{className:"field-error-message",children:p.nombres})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("input",{type:"text",value:He,onChange:se=>{Q(se.target.value),dt("apellidos",se.target.value)},placeholder:"Ingresa tus apellidos",className:p.apellidos?"input-error":"",required:!0}),p.apellidos&&m.jsx("span",{className:"field-error-message",children:p.apellidos})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsxs("div",{className:"date-input-wrapper",children:[m.jsx("input",{type:"text",value:ne,onChange:se=>{he(se.target.value),dt("fechaNacimiento",se.target.value)},onClick:se=>{se.target.type="date",setTimeout(()=>{se.target.showPicker&&se.target.showPicker()},0)},onKeyDown:se=>{se.preventDefault()},onBlur:se=>{se.target.value||(se.target.type="text")},placeholder:"Fecha de nacimiento",max:new Date().toISOString().split("T")[0],className:p.fechaNacimiento?"input-error":"",autoComplete:"off",required:!0}),m.jsx("svg",{className:"calendar-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),p.fechaNacimiento&&m.jsx("span",{className:"field-error-message",children:p.fechaNacimiento})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"DUI"}),m.jsxs("div",{className:"input-with-icon",children:[m.jsx("input",{type:"text",value:_e,onChange:Rr,placeholder:"00000000-0",maxLength:"10",className:p.dui?"input-error":"",required:!0}),m.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("circle",{cx:"8",cy:"10",r:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M5 16C5 14.8954 5.89543 14 7 14H9C10.1046 14 11 14.8954 11 16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("line",{x1:"14",y1:"9",x2:"19",y2:"9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("line",{x1:"14",y1:"13",x2:"19",y2:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),p.dui&&m.jsx("span",{className:"field-error-message",children:p.dui})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gnero"}),m.jsxs("select",{value:Ke,onChange:se=>{Le(se.target.value),dt("genero",se.target.value)},required:!0,className:`${Ke?"":"placeholder-selected"} ${p.genero?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Masculino",children:"Masculino"}),m.jsx("option",{value:"Femenino",children:"Femenino"})]}),p.genero&&m.jsx("span",{className:"field-error-message",children:p.genero})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Direccin"}),m.jsxs("div",{className:"input-with-icon",children:[m.jsx("input",{type:"text",value:Ae,onChange:se=>{tt(se.target.value),dt("direccion",se.target.value)},placeholder:"Calle, colonia, ciudad",className:p.direccion?"input-error":"",required:!0}),m.jsxs("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),p.direccion&&m.jsx("span",{className:"field-error-message",children:p.direccion})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsxs("div",{className:"input-with-icon",children:[m.jsx("input",{type:"tel",value:vt,onChange:Ss(sn,"telefono"),placeholder:"00000000",maxLength:"8",className:p.telefono?"input-error":"",required:!0}),m.jsx("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.5953 1.99522 8.06579 2.16708 8.43376 2.48353C8.80173 2.79999 9.04207 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.8939 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5864 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),p.telefono&&m.jsx("span",{className:"field-error-message",children:p.telefono})]}),m.jsx("div",{className:"divider"}),m.jsx("h3",{children:"Contacto de Emergencia"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombre Completo"}),m.jsx("input",{type:"text",value:xn,onChange:se=>{ri(se.target.value),dt("emergenciaNombre",se.target.value)},placeholder:"Nombre completo del contacto",className:p.emergenciaNombre?"input-error":"",required:!0}),p.emergenciaNombre&&m.jsx("span",{className:"field-error-message",children:p.emergenciaNombre})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsxs("div",{className:"input-with-icon",children:[m.jsx("input",{type:"tel",value:Zt,onChange:Ss(Sr,"emergenciaTelefono"),placeholder:"00000000",maxLength:"8",className:p.emergenciaTelefono?"input-error":"",required:!0}),m.jsx("svg",{className:"input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.5953 1.99522 8.06579 2.16708 8.43376 2.48353C8.80173 2.79999 9.04207 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97366 7.27691 9.8939 7.65088C9.81415 8.02485 9.62886 8.36811 9.35999 8.64L8.08999 9.91C9.51355 12.4135 11.5864 14.4864 14.09 15.91L15.36 14.64C15.6319 14.3711 15.9751 14.1858 16.3491 14.1061C16.7231 14.0263 17.1121 14.0555 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5775C21.8437 15.9518 22.0122 16.4296 22 16.92Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),p.emergenciaTelefono&&m.jsx("span",{className:"field-error-message",children:p.emergenciaTelefono})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Parentesco"}),m.jsxs("select",{value:Bn,onChange:se=>{As(se.target.value),dt("emergenciaParentesco",se.target.value)},required:!0,className:`${Bn?"":"placeholder-selected"} ${p.emergenciaParentesco?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),m.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),m.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),m.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),m.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),m.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),m.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),m.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),m.jsx("option",{value:"To / Ta",children:"To / Ta"}),m.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),m.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),m.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),p.emergenciaParentesco&&m.jsx("span",{className:"field-error-message",children:p.emergenciaParentesco})]}),m.jsx("div",{className:"divider"}),m.jsxs("div",{className:"form-group radio-group",children:[m.jsx("label",{children:"Es primera vez o paciente recurrente?"}),m.jsxs("div",{className:"radio-options",children:[m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:ai==="primera-vez",onChange:se=>mn(se.target.value)}),"Primera vez"]}),m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:ai==="recurrente",onChange:se=>mn(se.target.value)}),"Recurrente"]})]})]})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsxs("div",{className:"button-group",children:[!e&&r===2&&m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>l(1),children:"Atrs"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Cargando...":e?"Ingresar":r===1?"Siguiente":"Finalizar Registro"})]}),e&&m.jsx("div",{className:"forgot-password",children:m.jsx("a",{href:"#",onClick:se=>{se.preventDefault(),x(!0)},children:"Olvidaste tu contrasea?"})})]}),A&&m.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:m.jsxs("div",{className:"modal-content",onClick:se=>se.stopPropagation(),children:[m.jsx("h3",{children:"Recuperar Contrasea"}),m.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),m.jsxs("form",{onSubmit:Qi,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"resetEmail",value:P,onChange:se=>K(se.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),J&&m.jsx("p",{className:J.includes("Error")?"error-message":"success-message",children:J}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>x(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Enviando...":"Enviar"})]})]})]})}),U&&m.jsx("div",{className:"modal-overlay",onClick:xr,children:m.jsxs("div",{className:"modal-content success-modal",onClick:se=>se.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),m.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:xr,children:"Aceptar"})})]})}),Z&&m.jsx("div",{className:"modal-overlay",onClick:()=>ie(!1),children:m.jsxs("div",{className:"modal-content error-modal",onClick:se=>se.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Error en el formulario"}),m.jsx("p",{className:"modal-message",children:ee}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>ie(!1),children:"Aceptar"})})]})})]})})},TI=({onLogin:s})=>{const[e,n]=ae.useState(""),[r,l]=ae.useState(""),[c,d]=ae.useState(""),[p,y]=ae.useState({}),E=[{email:"admin@clinica.com",password:"admin123",type:"admin",nombre:"Mara Gonzlez",cargo:"Administradora"},{email:"doctor@clinica.com",password:"doctor123",type:"doctor",nombre:"Dr. Csar Vsquez",cargo:"Odontlogo"}],T=(x,P)=>{P&&y(K=>({...K,[x]:""}))},A=x=>{x.preventDefault(),d(""),y({});const P={};if(e||(P.email="Ingresa tu correo electrnico"),r||(P.password="Ingresa tu contrasea"),Object.keys(P).length>0){y(P);return}const K=E.find(J=>J.email===e&&J.password===r);K?s(e,r,null,K.type,{nombre:K.nombre,cargo:K.cargo}):d("Credenciales incorrectas. Verifica tu correo y contrasea.")};return m.jsx("div",{className:"staff-login-container",children:m.jsxs("div",{className:"staff-login-card",children:[m.jsx("div",{className:"staff-login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),m.jsxs("form",{onSubmit:A,className:"staff-login-form",noValidate:!0,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:x=>{n(x.target.value),T("email",x.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:r,onChange:x=>{l(x.target.value),T("password",x.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsx("button",{type:"submit",className:"staff-login-button",children:"Ingresar"}),m.jsx("div",{className:"staff-login-info",children:m.jsxs("p",{className:"info-text",children:[m.jsx("strong",{children:"Usuarios de prueba:"}),m.jsx("br",{}),"Admin: admin@clinica.com / admin123",m.jsx("br",{}),"Doctor: doctor@clinica.com / doctor123"]})})]})]})})},wI=({userType:s,userData:e})=>{const n=s==="admin",r=s==="doctor";return m.jsxs("div",{className:"staff-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[n&&" Panel Administrativo",r&&" Panel Mdico"]}),m.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",m.jsx("strong",{children:e?.nombre||"Usuario"})]})]}),m.jsxs("div",{className:"dashboard-content",children:[n&&m.jsxs("div",{className:"admin-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Gestin de Citas"}),m.jsx("p",{children:"Administra todas las citas programadas"}),m.jsx("button",{className:"card-button",children:"Ver Citas"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Pacientes"}),m.jsx("p",{children:"Gestiona la base de datos de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Pacientes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Reportes"}),m.jsx("p",{children:"Consulta estadsticas y reportes"}),m.jsx("button",{className:"card-button",children:"Ver Reportes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Configuracin"}),m.jsx("p",{children:"Ajustes del sistema y usuarios"}),m.jsx("button",{className:"card-button",children:"Configurar"})]})]}),m.jsxs("div",{className:"recent-activity",children:[m.jsx("h2",{children:"Actividad Reciente"}),m.jsxs("div",{className:"activity-list",children:[m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 5 min"}),m.jsx("span",{className:"activity-text",children:"Nueva cita programada - Juan Prez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 15 min"}),m.jsx("span",{className:"activity-text",children:"Cita cancelada - Mara Lpez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 1 hora"}),m.jsx("span",{className:"activity-text",children:"Nuevo paciente registrado - Carlos Gmez"})]})]})]})]}),r&&m.jsxs("div",{className:"doctor-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Citas del Da"}),m.jsx("p",{children:"Revisa tu agenda de hoy"}),m.jsx("button",{className:"card-button",children:"Ver Agenda"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Historial Clnico"}),m.jsx("p",{children:"Consulta historiales de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Historiales"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Notas Mdicas"}),m.jsx("p",{children:"Registra diagnsticos y tratamientos"}),m.jsx("button",{className:"card-button",children:"Nueva Nota"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Recetas"}),m.jsx("p",{children:"Gestiona prescripciones mdicas"}),m.jsx("button",{className:"card-button",children:"Ver Recetas"})]})]}),m.jsxs("div",{className:"today-appointments",children:[m.jsx("h2",{children:"Citas de Hoy"}),m.jsxs("div",{className:"appointments-list",children:[m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"09:00 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Ana Martnez"}),m.jsx("span",{children:"Limpieza dental"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"10:30 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Roberto Silva"}),m.jsx("span",{children:"Extraccin de muela"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"02:00 PM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Laura Hernndez"}),m.jsx("span",{children:"Consulta general"})]})]})]})]})]})]})]})};function bI(){const{pathname:s}=Ah();return ae.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function AI({isAuthenticated:s,userType:e,userData:n,handleLogin:r,handleLogout:l,isStaff:c,isLoading:d}){const p=Ah(),y=p.pathname==="/staff/login"||p.pathname==="/staff/dashboard";return d?m.jsx("div",{className:"loading-container",children:m.jsx("div",{className:"loading-spinner"})}):m.jsxs(m.Fragment,{children:[s&&m.jsx(hI,{onLogout:l,userData:n,userType:e}),m.jsx("main",{className:"main-content",children:m.jsxs(nw,{children:[m.jsx(fs,{path:"/staff/login",element:s?m.jsx(ku,{to:c?"/staff/dashboard":"/",replace:!0}):m.jsx(TI,{onLogin:r})}),m.jsx(fs,{path:"/",element:s?e==="patient"?m.jsx(fI,{userData:n}):m.jsx(ku,{to:"/staff/dashboard",replace:!0}):m.jsx(EI,{onLogin:r})}),m.jsx(fs,{path:"/staff/dashboard",element:s&&c?m.jsx(wI,{userType:e,userData:n}):m.jsx(ku,{to:s?"/":"/staff/login",replace:!0})}),s&&e==="patient"&&m.jsxs(m.Fragment,{children:[m.jsx(fs,{path:"/cita",element:m.jsx("div",{className:"container",children:m.jsx(_I,{userData:n})})}),m.jsx(fs,{path:"/contacto",element:m.jsx(mI,{})}),m.jsx(fs,{path:"/perfil",element:m.jsx(pI,{userData:n})}),m.jsx(fs,{path:"/mis-citas",element:m.jsx(gI,{})}),m.jsx(fs,{path:"/cita-confirmada",element:m.jsx(yI,{})})]}),m.jsx(fs,{path:"*",element:m.jsx(ku,{to:s&&c?"/staff/dashboard":"/",replace:!0})})]})}),s&&e==="patient"&&m.jsx(vI,{}),!y&&m.jsx(dI,{})]})}function SI(){const[s,e]=ae.useState(!1),[n,r]=ae.useState(null),[l,c]=ae.useState(null),[d,p]=ae.useState(!0);ae.useEffect(()=>{const A=sI(async K=>{if(console.log("Auth state changed, user:",K?.email),K){const J=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",J),J==="true"){console.log("User just registered, skipping auto-login"),p(!1);return}let k=3,U=null,oe=null;for(;k>0&&!U;){const Z=await q0(K.uid);U=Z.profile,oe=Z.error,!U&&k>1&&(console.log(`Failed to load profile, retrying... (${k-1} attempts left)`),await new Promise(ie=>setTimeout(ie,1e3))),k--}U?(r(U),c("patient"),e(!0),p(!1)):(console.error("Failed to load profile after retries:",oe),e(!1),r(null),c(null),p(!1))}else e(!1),r(null),c(null),p(!1)}),x=async()=>{await cI()};x();const P=setInterval(x,6e4);return()=>{A(),clearInterval(P)}},[]);const y=async A=>{const{profile:x,error:P}=await q0(A.uid);x?(r(x),c("patient"),e(!0)):console.error("Failed to load profile:",P)},E=async()=>{await v2(),e(!1),r(null),c(null)},T=l==="admin"||l==="doctor";return m.jsxs(tw,{basename:"/COI/",children:[m.jsx(bI,{}),m.jsx("div",{className:"app",children:m.jsx(AI,{isAuthenticated:s,userType:l,userData:n,handleLogin:y,handleLogout:E,isStaff:T,isLoading:d})})]})}cw.createRoot(document.getElementById("root")).render(m.jsx(ae.StrictMode,{children:m.jsx(SI,{})}));
