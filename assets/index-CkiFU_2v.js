import{r as ab,a as ob,b as he,L as ti,u as jm,c as Th,B as lb,R as cb,d as hs,N as Mu}from"./vendor-BIRSGIdg.js";import{E as q0,_ as F0}from"./pdf-utils-C-nx5KvR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Hd={exports:{}},Al={};var tv;function ub(){if(tv)return Al;tv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return Al.Fragment=e,Al.jsx=n,Al.jsxs=n,Al}var nv;function hb(){return nv||(nv=1,Hd.exports=ub()),Hd.exports}var m=hb(),Gd={exports:{}},Sl={},Qd={exports:{}},Kd={};var iv;function fb(){return iv||(iv=1,(function(s){function e(K,se){var fe=K.length;K.push(se);e:for(;0<fe;){var we=fe-1>>>1,Ve=K[we];if(0<l(Ve,se))K[we]=se,K[fe]=Ve,fe=we;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var se=K[0],fe=K.pop();if(fe!==se){K[0]=fe;e:for(var we=0,Ve=K.length,et=Ve>>>1;we<et;){var ke=2*(we+1)-1,Ae=K[ke],tt=ke+1,vt=K[tt];if(0>l(Ae,fe))tt<Ve&&0>l(vt,Ae)?(K[we]=vt,K[tt]=fe,we=tt):(K[we]=Ae,K[ke]=fe,we=ke);else if(tt<Ve&&0>l(vt,fe))K[we]=vt,K[tt]=fe,we=tt;else break e}}return se}function l(K,se){var fe=K.sortIndex-se.sortIndex;return fe!==0?fe:K.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],E=[],T=1,S=null,R=3,U=!1,Q=!1,J=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function te(K){for(var se=n(E);se!==null;){if(se.callback===null)r(E);else if(se.startTime<=K)r(E),se.sortIndex=se.expirationTime,e(y,se);else break;se=n(E)}}function ne(K){if(J=!1,te(K),!Q)if(n(y)!==null)Q=!0,le||(le=!0,j());else{var se=n(E);se!==null&&st(ne,se.startTime-K)}}var le=!1,N=-1,w=5,C=-1;function M(){return k?!0:!(s.unstable_now()-C<w)}function D(){if(k=!1,le){var K=s.unstable_now();C=K;var se=!0;try{e:{Q=!1,J&&(J=!1,ee(N),N=-1),U=!0;var fe=R;try{t:{for(te(K),S=n(y);S!==null&&!(S.expirationTime>K&&M());){var we=S.callback;if(typeof we=="function"){S.callback=null,R=S.priorityLevel;var Ve=we(S.expirationTime<=K);if(K=s.unstable_now(),typeof Ve=="function"){S.callback=Ve,te(K),se=!0;break t}S===n(y)&&r(y),te(K)}else r(y);S=n(y)}if(S!==null)se=!0;else{var et=n(E);et!==null&&st(ne,et.startTime-K),se=!1}}break e}finally{S=null,R=fe,U=!1}se=void 0}}finally{se?j():le=!1}}}var j;if(typeof W=="function")j=function(){W(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ge=x.port2;x.port1.onmessage=D,j=function(){Ge.postMessage(null)}}else j=function(){P(D,0)};function st(K,se){N=P(function(){K(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(K){switch(R){case 1:case 2:case 3:var se=3;break;default:se=R}var fe=R;R=se;try{return K()}finally{R=fe}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(K,se){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var fe=R;R=K;try{return se()}finally{R=fe}},s.unstable_scheduleCallback=function(K,se,fe){var we=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?we+fe:we):fe=we,K){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=fe+Ve,K={id:T++,callback:se,priorityLevel:K,startTime:fe,expirationTime:Ve,sortIndex:-1},fe>we?(K.sortIndex=fe,e(E,K),n(y)===null&&K===n(E)&&(J?(ee(N),N=-1):J=!0,st(ne,fe-we))):(K.sortIndex=Ve,e(y,K),Q||U||(Q=!0,le||(le=!0,j()))),K},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(K){var se=R;return function(){var fe=R;R=se;try{return K.apply(this,arguments)}finally{R=fe}}}})(Kd)),Kd}var sv;function db(){return sv||(sv=1,Qd.exports=fb()),Qd.exports}var rv;function mb(){if(rv)return Sl;rv=1;var s=db(),e=ab(),n=ob();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function E(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=d;break}if(b===o){_=!0,o=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,o=h;break}if(b===o){_=!0,o=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),W=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function Ge(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case P:return"Profiler";case k:return"StrictMode";case ne:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case W:return t.displayName||"Context";case ee:return(t._context.displayName||"Context")+".Consumer";case te:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:Ge(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Ge(t(i))}catch{}}return null}var st=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},we=[],Ve=-1;function et(t){return{current:t}}function ke(t){0>Ve||(t.current=we[Ve],we[Ve]=null,Ve--)}function Ae(t,i){Ve++,we[Ve]=t.current,t.current=i}var tt=et(null),vt=et(null),en=et(null),Sn=et(null);function oi(t,i){switch(Ae(en,i),Ae(vt,t),Ae(tt,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?S_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=S_(i),t=w_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ke(tt),Ae(tt,t)}function Wt(){ke(tt),ke(vt),ke(en)}function Ar(t){t.memoizedState!==null&&Ae(Sn,t);var i=tt.current,a=w_(i,t.type);i!==a&&(Ae(vt,t),Ae(tt,a))}function Bn(t){vt.current===t&&(ke(tt),ke(vt)),Sn.current===t&&(ke(Sn),vl._currentValue=fe)}var bs,li;function hn(t){if(bs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);bs=i&&i[1]||"",li=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+t+li}var Mt=!1;function Fi(t,i){if(!t||Mt)return"";Mt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var q=H}Reflect.construct(t,[],X)}else{try{X.call()}catch(H){q=H}t.call(X.prototype)}}else{try{throw Error()}catch(H){q=H}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var I=_.split(`
`),B=b.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===B.length)for(o=I.length-1,h=B.length-1;1<=o&&0<=h&&I[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==B[h]){var G=`
`+I[o].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=o&&0<=h);break}}}finally{Mt=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?hn(a):""}function As(t,i){switch(t.tag){case 26:case 27:case 5:return hn(t.type);case 16:return hn("Lazy");case 13:return t.child!==i&&i!==null?hn("Suspense Fallback"):hn("Suspense");case 19:return hn("SuspenseList");case 0:case 15:return Fi(t.type,!1);case 11:return Fi(t.type.render,!1);case 1:return Fi(t.type,!0);case 31:return hn("Activity");default:return""}}function Ss(t){try{var i="",a=null;do i+=As(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var lt=Object.prototype.hasOwnProperty,ft=s.unstable_scheduleCallback,qn=s.unstable_cancelCallback,ce=s.unstable_shouldYield,ge=s.unstable_requestPaint,Qe=s.unstable_now,wn=s.unstable_getCurrentPriorityLevel,Hi=s.unstable_ImmediatePriority,Gi=s.unstable_UserBlockingPriority,Rn=s.unstable_NormalPriority,pa=s.unstable_LowPriority,Sr=s.unstable_IdlePriority,ac=s.log,oc=s.unstable_setDisableYieldValue,Fn=null,Pt=null;function Cn(t){if(typeof ac=="function"&&oc(t),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Fn,t)}catch{}}var dt=Math.clz32?Math.clz32:cc,lc=Math.log,ga=Math.LN2;function cc(t){return t>>>=0,t===0?32:31-(lc(t)/ga|0)|0}var ci=256,wr=262144,Et=4194304;function ui(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~d,o!==0?h=ui(o):(_&=b,_!==0?h=ui(_):a||(a=b&~t,a!==0&&(h=ui(a))))):(b=o&~d,b!==0?h=ui(b):_!==0?h=ui(_):a||(a=o&~t,a!==0&&(h=ui(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Hn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Kh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(){var t=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),t}function fi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Rr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yh(t,i,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var G=31-dt(a),X=1<<G;b[G]=0,I[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~X}o!==0&&Cr(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Cr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-dt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function So(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-dt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function wo(t,i){var a=i&-i;return a=(a&42)!==0?1:xr(a),(a&(t.suspendedLanes|i))!==0?0:a}function xr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Qi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hc(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:Y_(t.type))}function Gn(t,i){var a=se.p;try{return se.p=t,i()}finally{se.p=a}}var Qn=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Qn,jt="__reactProps$"+Qn,di="__reactContainer$"+Qn,ya="__reactEvents$"+Qn,Xh="__reactListeners$"+Qn,fc="__reactHandles$"+Qn,dc="__reactResources$"+Qn,mi="__reactMarker$"+Qn;function _a(t){delete t[Tt],delete t[jt],delete t[ya],delete t[Xh],delete t[fc]}function pi(t){var i=t[Tt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[di]||a[Tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=O_(t);t!==null;){if(a=t[Tt])return a;t=O_(t)}return i}t=a,a=t.parentNode}return null}function xn(t){if(t=t[Tt]||t[di]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function fn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function gi(t){var i=t[dc];return i||(i=t[dc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bt(t){t[mi]=!0}var Ro=new Set,Co={};function yi(t,i){_i(t,i),_i(t+"Capture",i)}function _i(t,i){for(Co[t]=i,t=0;t<i.length;t++)Ro.add(i[t])}var xo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Io={},No={};function mc(t){return lt.call(No,t)?!0:lt.call(Io,t)?!1:xo.test(t)?No[t]=!0:(Io[t]=!0,!1)}function va(t,i,a){if(mc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function dn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function At(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Vt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ws(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Do(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function qe(t){if(!t._valueTracker){var i=ws(t)?"checked":"value";t._valueTracker=Do(t,i,""+t[i])}}function Ir(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=ws(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Nr=/[\n"\\]/g;function tn(t){return t.replace(Nr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ea(t,i,a,o,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Vt(i)):t.value!==""+Vt(i)&&(t.value=""+Vt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Oo(t,_,Vt(i)):a!=null?Oo(t,_,Vt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Vt(b):t.removeAttribute("name")}function pc(t,i,a,o,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){qe(t);return}a=a!=null?""+Vt(a):"",i=i!=null?""+Vt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),qe(t)}function Oo(t,i,a){i==="number"&&vi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Rs(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Vt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function gc(t,i,a){if(i!=null&&(i=""+Vt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Vt(a):""}function Cs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(st(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Vt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),qe(t)}function nn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||yc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function jo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Mo(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Mo(t,d,i[d])}function Ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _c=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(t){return xs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Kn(){}var Vo=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Is=null,Ei=null;function Dr(t){var i=xn(t);if(i&&(t=i.stateNode)){var a=t[jt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ea(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[jt]||null;if(!h)throw Error(r(90));Ea(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Ir(o)}break e;case"textarea":gc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Rs(t,!!a.multiple,i,!1)}}}var Aa=!1;function Ns(t,i,a){if(Aa)return t(i,a);Aa=!0;try{var o=t(i);return o}finally{if(Aa=!1,(Is!==null||Ei!==null)&&(hu(),Is&&(i=Is,t=Ei,Ei=Is=null,Dr(i),t)))for(i=0;i<t.length;i++)Dr(t[i])}}function Yn(t,i){var a=t.stateNode;if(a===null)return null;var o=a[jt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(Nn)try{var Ke={};Object.defineProperty(Ke,"passive",{get:function(){Or=!0}}),window.addEventListener("test",Ke,Ke),window.removeEventListener("test",Ke,Ke)}catch{Or=!1}var Ti=null,ko=null,Mr=null;function Lo(){if(Mr)return Mr;var t,i=ko,a=i.length,o,h="value"in Ti?Ti.value:Ti.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[d-o];o++);return Mr=h.slice(t,1<o?1-o:void 0)}function jr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ki(){return!0}function Xn(){return!1}function Ut(t){function i(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ki:Xn,this.isPropagationStopped=Xn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),i}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Ut(Yi),Ds=S({},Yi,{view:0,detail:0}),Po=Ut(Ds),Os,Sa,Ai,wa=S({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(Os=t.screenX-Ai.screenX,Sa=t.screenY-Ai.screenY):Sa=Os=0,Ai=t),Os)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Uo=Ut(wa),Vr=S({},wa,{dataTransfer:0}),vc=Ut(Vr),Ec=S({},Ds,{relatedTarget:0}),kr=Ut(Ec),zo=S({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Tc=Ut(zo),Ra=S({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bc=Ut(Ra),Ac=S({},Yi,{data:0}),Si=Ut(Ac),Sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Rc[t])?!!i[t]:!1}function Ms(){return Cc}var Zt=S({},Ds,{key:function(t){if(t.key){var i=Sc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(t){return t.type==="keypress"?jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xc=Ut(Zt),Ic=S({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Ut(Ic),u=S({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),g=Ut(u),v=S({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ut(v),L=S({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Ut(L),ie=S({},Yi,{newState:0,oldState:0}),Te=Ut(ie),mt=[9,13,27,32],Ue=Nn&&"CompositionEvent"in window,rt=null;Nn&&"documentMode"in document&&(rt=document.documentMode);var Dn=Nn&&"TextEvent"in window&&!rt,wi=Nn&&(!Ue||rt&&8<rt&&11>=rt),$n=" ",Wn=!1;function Lr(t,i){switch(t){case"keyup":return mt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function NT(t,i){switch(t){case"compositionend":return Ca(i);case"keypress":return i.which!==32?null:(Wn=!0,$n);case"textInput":return t=i.data,t===$n&&Wn?null:t;default:return null}}function DT(t,i){if(xa)return t==="compositionend"||!Ue&&Lr(t,i)?(t=Lo(),Mr=ko=Ti=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wi&&i.locale!=="ko"?null:i.data;default:return null}}var OT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!OT[t.type]:i==="textarea"}function kp(t,i,a,o){Is?Ei?Ei.push(o):Ei=[o]:Is=o,i=_u(i,"onChange"),0<i.length&&(a=new bi("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Bo=null,qo=null;function MT(t){__(t,0)}function Nc(t){var i=fn(t);if(Ir(i))return t}function Lp(t,i){if(t==="change")return i}var Pp=!1;if(Nn){var $h;if(Nn){var Wh="oninput"in document;if(!Wh){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),Wh=typeof Up.oninput=="function"}$h=Wh}else $h=!1;Pp=$h&&(!document.documentMode||9<document.documentMode)}function zp(){Bo&&(Bo.detachEvent("onpropertychange",Bp),qo=Bo=null)}function Bp(t){if(t.propertyName==="value"&&Nc(qo)){var i=[];kp(i,qo,t,In(t)),Ns(MT,i)}}function jT(t,i,a){t==="focusin"?(zp(),Bo=i,qo=a,Bo.attachEvent("onpropertychange",Bp)):t==="focusout"&&zp()}function VT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(qo)}function kT(t,i){if(t==="click")return Nc(i)}function LT(t,i){if(t==="input"||t==="change")return Nc(i)}function PT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var mn=typeof Object.is=="function"?Object.is:PT;function Fo(t,i){if(mn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!lt.call(i,h)||!mn(t[h],i[h]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,i){var a=qp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qp(a)}}function Hp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Hp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Gp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=vi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=vi(t.document)}return i}function Zh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var UT=Nn&&"documentMode"in document&&11>=document.documentMode,Ia=null,Jh=null,Ho=null,ef=!1;function Qp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ef||Ia==null||Ia!==vi(o)||(o=Ia,"selectionStart"in o&&Zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ho&&Fo(Ho,o)||(Ho=o,o=_u(Jh,"onSelect"),0<o.length&&(i=new bi("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Ia)))}function Pr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Na={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionrun:Pr("Transition","TransitionRun"),transitionstart:Pr("Transition","TransitionStart"),transitioncancel:Pr("Transition","TransitionCancel"),transitionend:Pr("Transition","TransitionEnd")},tf={},Kp={};Nn&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Ur(t){if(tf[t])return tf[t];if(!Na[t])return t;var i=Na[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Kp)return tf[t]=i[a];return t}var Yp=Ur("animationend"),Xp=Ur("animationiteration"),$p=Ur("animationstart"),zT=Ur("transitionrun"),BT=Ur("transitionstart"),qT=Ur("transitioncancel"),Wp=Ur("transitionend"),Zp=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function Zn(t,i){Zp.set(t,i),yi(i,[t])}var Dc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],Da=0,sf=0;function Oc(){for(var t=Da,i=sf=Da=0;i<t;){var a=On[i];On[i++]=null;var o=On[i];On[i++]=null;var h=On[i];On[i++]=null;var d=On[i];if(On[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&Jp(a,h,d)}}function Mc(t,i,a,o){On[Da++]=t,On[Da++]=i,On[Da++]=a,On[Da++]=o,sf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function rf(t,i,a,o){return Mc(t,i,a,o),jc(t)}function zr(t,i){return Mc(t,null,null,i),jc(t)}function Jp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-dt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function jc(t){if(50<fl)throw fl=0,md=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oa={};function FT(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,i,a,o){return new FT(t,i,a,o)}function af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $i(t,i){var a=t.alternate;return a===null?(a=pn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Vc(t,i,a,o,h,d){var _=0;if(o=t,typeof t=="function")af(t)&&(_=1);else if(typeof t=="string")_=Y2(t,a,tt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=pn(31,a,i,h),t.elementType=C,t.lanes=d,t;case J:return Br(a.children,h,d,i);case k:_=8,h|=24;break;case P:return t=pn(12,a,i,h|2),t.elementType=P,t.lanes=d,t;case ne:return t=pn(13,a,i,h),t.elementType=ne,t.lanes=d,t;case le:return t=pn(19,a,i,h),t.elementType=le,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:_=10;break e;case ee:_=9;break e;case te:_=11;break e;case N:_=14;break e;case w:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=pn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Br(t,i,a,o){return t=pn(7,t,o,i),t.lanes=a,t}function of(t,i,a){return t=pn(6,t,null,i),t.lanes=a,t}function tg(t){var i=pn(18,null,null,0);return i.stateNode=t,i}function lf(t,i,a){return i=pn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ng=new WeakMap;function Mn(t,i){if(typeof t=="object"&&t!==null){var a=ng.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ss(i)},ng.set(t,i),i)}return{value:t,source:i,stack:Ss(i)}}var Ma=[],ja=0,kc=null,Go=0,jn=[],Vn=0,js=null,Ri=1,Ci="";function Wi(t,i){Ma[ja++]=Go,Ma[ja++]=kc,kc=t,Go=i}function ig(t,i,a){jn[Vn++]=Ri,jn[Vn++]=Ci,jn[Vn++]=js,js=t;var o=Ri;t=Ci;var h=32-dt(o)-1;o&=~(1<<h),a+=1;var d=32-dt(i)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ri=1<<32-dt(i)+h|a<<h|o,Ci=d+t}else Ri=1<<d|a<<h|o,Ci=t}function cf(t){t.return!==null&&(Wi(t,1),ig(t,1,0))}function uf(t){for(;t===kc;)kc=Ma[--ja],Ma[ja]=null,Go=Ma[--ja],Ma[ja]=null;for(;t===js;)js=jn[--Vn],jn[Vn]=null,Ci=jn[--Vn],jn[Vn]=null,Ri=jn[--Vn],jn[Vn]=null}function sg(t,i){jn[Vn++]=Ri,jn[Vn++]=Ci,jn[Vn++]=js,Ri=i.id,Ci=i.overflow,js=t}var zt=null,nt=null,Me=!1,Vs=null,kn=!1,hf=Error(r(519));function ks(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qo(Mn(i,t)),hf}function rg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[Tt]=t,i[jt]=o,a){case"dialog":Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":case"embed":Ce("load",i);break;case"video":case"audio":for(a=0;a<ml.length;a++)Ce(ml[a],i);break;case"source":Ce("error",i);break;case"img":case"image":case"link":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"input":Ce("invalid",i),pc(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ce("invalid",i);break;case"textarea":Ce("invalid",i),Cs(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||b_(i.textContent,a)?(o.popover!=null&&(Ce("beforetoggle",i),Ce("toggle",i)),o.onScroll!=null&&Ce("scroll",i),o.onScrollEnd!=null&&Ce("scrollend",i),o.onClick!=null&&(i.onclick=Kn),i=!0):i=!1,i||ks(t,!0)}function ag(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:zt=zt.return}}function Va(t){if(t!==zt)return!1;if(!Me)return ag(t),Me=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Id(t.type,t.memoizedProps)),a=!a),a&&nt&&ks(t),ag(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=D_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=D_(t)}else i===27?(i=nt,$s(t.type)?(t=jd,jd=null,nt=t):nt=i):nt=zt?Pn(t.stateNode.nextSibling):null;return!0}function qr(){nt=zt=null,Me=!1}function ff(){var t=Vs;return t!==null&&(on===null?on=t:on.push.apply(on,t),Vs=null),t}function Qo(t){Vs===null?Vs=[t]:Vs.push(t)}var df=et(null),Fr=null,Zi=null;function Ls(t,i,a){Ae(df,i._currentValue),i._currentValue=a}function Ji(t){t._currentValue=df.current,ke(df)}function mf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function pf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var I=0;I<i.length;I++)if(b.context===i[I]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),mf(d.return,a,t),o||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),mf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ka(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;mn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Sn.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(vl):t=[vl])}h=h.return}t!==null&&pf(i,t,a,o),i.flags|=262144}function Lc(t){for(t=t.firstContext;t!==null;){if(!mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hr(t){Fr=t,Zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return og(Fr,t)}function Pc(t,i){return Fr===null&&Hr(t),og(t,i)}function og(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Zi===null){if(t===null)throw Error(r(308));Zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Zi=Zi.next=i;return a}var HT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},GT=s.unstable_scheduleCallback,QT=s.unstable_NormalPriority,St={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new HT,data:new Map,refCount:0}}function Ko(t){t.refCount--,t.refCount===0&&GT(QT,function(){t.controller.abort()})}var Yo=null,yf=0,La=0,Pa=null;function KT(t,i){if(Yo===null){var a=Yo=[];yf=0,La=Ed(),Pa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return yf++,i.then(lg,lg),i}function lg(){if(--yf===0&&Yo!==null){Pa!==null&&(Pa.status="fulfilled");var t=Yo;Yo=null,La=0,Pa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function YT(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var cg=K.S;K.S=function(t,i){Qy=Qe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&KT(t,i),cg!==null&&cg(t,i)};var Gr=et(null);function _f(){var t=Gr.current;return t!==null?t:Ze.pooledCache}function Uc(t,i){i===null?Ae(Gr,Gr.current):Ae(Gr,i.pool)}function ug(){var t=_f();return t===null?null:{parent:St._currentValue,pool:t}}var Ua=Error(r(460)),vf=Error(r(474)),zc=Error(r(542)),Bc={then:function(){}};function hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Kn,Kn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t;default:if(typeof i.status=="string")i.then(Kn,Kn);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,mg(t),t}throw Kr=i,Ua}}function Qr(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Kr=a,Ua):a}}var Kr=null;function dg(){if(Kr===null)throw Error(r(459));var t=Kr;return Kr=null,t}function mg(t){if(t===Ua||t===zc)throw Error(r(483))}var za=null,Xo=0;function qc(t){var i=Xo;return Xo+=1,za===null&&(za=[]),fg(za,t,i)}function $o(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Fc(t,i){throw i.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function pg(t){function i(V,O){if(t){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function a(V,O){if(!t)return null;for(;O!==null;)i(V,O),O=O.sibling;return null}function o(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function h(V,O){return V=$i(V,O),V.index=0,V.sibling=null,V}function d(V,O,z){return V.index=z,t?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=67108866,O):z):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function b(V,O,z,Y){return O===null||O.tag!==6?(O=of(z,V.mode,Y),O.return=V,O):(O=h(O,z),O.return=V,O)}function I(V,O,z,Y){var de=z.type;return de===J?G(V,O,z.props.children,Y,z.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Qr(de)===O.type)?(O=h(O,z.props),$o(O,z),O.return=V,O):(O=Vc(z.type,z.key,z.props,null,V.mode,Y),$o(O,z),O.return=V,O)}function B(V,O,z,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=lf(z,V.mode,Y),O.return=V,O):(O=h(O,z.children||[]),O.return=V,O)}function G(V,O,z,Y,de){return O===null||O.tag!==7?(O=Br(z,V.mode,Y,de),O.return=V,O):(O=h(O,z),O.return=V,O)}function X(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=of(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case U:return z=Vc(O.type,O.key,O.props,null,V.mode,z),$o(z,O),z.return=V,z;case Q:return O=lf(O,V.mode,z),O.return=V,O;case w:return O=Qr(O),X(V,O,z)}if(st(O)||j(O))return O=Br(O,V.mode,z,null),O.return=V,O;if(typeof O.then=="function")return X(V,qc(O),z);if(O.$$typeof===W)return X(V,Pc(V,O),z);Fc(V,O)}return null}function q(V,O,z,Y){var de=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:b(V,O,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case U:return z.key===de?I(V,O,z,Y):null;case Q:return z.key===de?B(V,O,z,Y):null;case w:return z=Qr(z),q(V,O,z,Y)}if(st(z)||j(z))return de!==null?null:G(V,O,z,Y,null);if(typeof z.then=="function")return q(V,O,qc(z),Y);if(z.$$typeof===W)return q(V,O,Pc(V,z),Y);Fc(V,z)}return null}function H(V,O,z,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(z)||null,b(O,V,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case U:return V=V.get(Y.key===null?z:Y.key)||null,I(O,V,Y,de);case Q:return V=V.get(Y.key===null?z:Y.key)||null,B(O,V,Y,de);case w:return Y=Qr(Y),H(V,O,z,Y,de)}if(st(Y)||j(Y))return V=V.get(z)||null,G(O,V,Y,de,null);if(typeof Y.then=="function")return H(V,O,z,qc(Y),de);if(Y.$$typeof===W)return H(V,O,z,Pc(O,Y),de);Fc(O,Y)}return null}function oe(V,O,z,Y){for(var de=null,Le=null,ue=O,Se=O=0,Ie=null;ue!==null&&Se<z.length;Se++){ue.index>Se?(Ie=ue,ue=null):Ie=ue.sibling;var Pe=q(V,ue,z[Se],Y);if(Pe===null){ue===null&&(ue=Ie);break}t&&ue&&Pe.alternate===null&&i(V,ue),O=d(Pe,O,Se),Le===null?de=Pe:Le.sibling=Pe,Le=Pe,ue=Ie}if(Se===z.length)return a(V,ue),Me&&Wi(V,Se),de;if(ue===null){for(;Se<z.length;Se++)ue=X(V,z[Se],Y),ue!==null&&(O=d(ue,O,Se),Le===null?de=ue:Le.sibling=ue,Le=ue);return Me&&Wi(V,Se),de}for(ue=o(ue);Se<z.length;Se++)Ie=H(ue,V,Se,z[Se],Y),Ie!==null&&(t&&Ie.alternate!==null&&ue.delete(Ie.key===null?Se:Ie.key),O=d(Ie,O,Se),Le===null?de=Ie:Le.sibling=Ie,Le=Ie);return t&&ue.forEach(function(tr){return i(V,tr)}),Me&&Wi(V,Se),de}function pe(V,O,z,Y){if(z==null)throw Error(r(151));for(var de=null,Le=null,ue=O,Se=O=0,Ie=null,Pe=z.next();ue!==null&&!Pe.done;Se++,Pe=z.next()){ue.index>Se?(Ie=ue,ue=null):Ie=ue.sibling;var tr=q(V,ue,Pe.value,Y);if(tr===null){ue===null&&(ue=Ie);break}t&&ue&&tr.alternate===null&&i(V,ue),O=d(tr,O,Se),Le===null?de=tr:Le.sibling=tr,Le=tr,ue=Ie}if(Pe.done)return a(V,ue),Me&&Wi(V,Se),de;if(ue===null){for(;!Pe.done;Se++,Pe=z.next())Pe=X(V,Pe.value,Y),Pe!==null&&(O=d(Pe,O,Se),Le===null?de=Pe:Le.sibling=Pe,Le=Pe);return Me&&Wi(V,Se),de}for(ue=o(ue);!Pe.done;Se++,Pe=z.next())Pe=H(ue,V,Se,Pe.value,Y),Pe!==null&&(t&&Pe.alternate!==null&&ue.delete(Pe.key===null?Se:Pe.key),O=d(Pe,O,Se),Le===null?de=Pe:Le.sibling=Pe,Le=Pe);return t&&ue.forEach(function(rb){return i(V,rb)}),Me&&Wi(V,Se),de}function $e(V,O,z,Y){if(typeof z=="object"&&z!==null&&z.type===J&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case U:e:{for(var de=z.key;O!==null;){if(O.key===de){if(de=z.type,de===J){if(O.tag===7){a(V,O.sibling),Y=h(O,z.props.children),Y.return=V,V=Y;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===w&&Qr(de)===O.type){a(V,O.sibling),Y=h(O,z.props),$o(Y,z),Y.return=V,V=Y;break e}a(V,O);break}else i(V,O);O=O.sibling}z.type===J?(Y=Br(z.props.children,V.mode,Y,z.key),Y.return=V,V=Y):(Y=Vc(z.type,z.key,z.props,null,V.mode,Y),$o(Y,z),Y.return=V,V=Y)}return _(V);case Q:e:{for(de=z.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(V,O.sibling),Y=h(O,z.children||[]),Y.return=V,V=Y;break e}else{a(V,O);break}else i(V,O);O=O.sibling}Y=lf(z,V.mode,Y),Y.return=V,V=Y}return _(V);case w:return z=Qr(z),$e(V,O,z,Y)}if(st(z))return oe(V,O,z,Y);if(j(z)){if(de=j(z),typeof de!="function")throw Error(r(150));return z=de.call(z),pe(V,O,z,Y)}if(typeof z.then=="function")return $e(V,O,qc(z),Y);if(z.$$typeof===W)return $e(V,O,Pc(V,z),Y);Fc(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(V,O.sibling),Y=h(O,z),Y.return=V,V=Y):(a(V,O),Y=of(z,V.mode,Y),Y.return=V,V=Y),_(V)):a(V,O)}return function(V,O,z,Y){try{Xo=0;var de=$e(V,O,z,Y);return za=null,de}catch(ue){if(ue===Ua||ue===zc)throw ue;var Le=pn(29,ue,null,V.mode);return Le.lanes=Y,Le.return=V,Le}finally{}}}var Yr=pg(!0),gg=pg(!1),Ps=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zs(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ze&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=jc(t),Jp(t,null,a),i}return Mc(t,o,i,a),jc(t)}function Wo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,So(t,a)}}function bf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Af=!1;function Zo(){if(Af){var t=Pa;if(t!==null)throw t}}function Jo(t,i,a,o){Af=!1;var h=t.updateQueue;Ps=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var I=b,B=I.next;I.next=null,_===null?d=B:_.next=B,_=I;var G=t.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==_&&(b===null?G.firstBaseUpdate=B:b.next=B,G.lastBaseUpdate=I))}if(d!==null){var X=h.baseState;_=0,G=B=I=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(xe&q)===q:(o&q)===q){q!==0&&q===La&&(Af=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var oe=t,pe=b;q=i;var $e=a;switch(pe.tag){case 1:if(oe=pe.payload,typeof oe=="function"){X=oe.call($e,X,q);break e}X=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=pe.payload,q=typeof oe=="function"?oe.call($e,X,q):oe,q==null)break e;X=S({},X,q);break e;case 2:Ps=!0}}q=b.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(B=G=H,I=X):G=G.next=H,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;H=b,b=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(I=X),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Gs|=_,t.lanes=_,t.memoizedState=X}}function yg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function _g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)yg(a[t],i)}var Ba=et(null),Hc=et(0);function vg(t,i){t=ls,Ae(Hc,t),Ae(Ba,i),ls=t|i.baseLanes}function Sf(){Ae(Hc,ls),Ae(Ba,Ba.current)}function wf(){ls=Hc.current,ke(Ba),ke(Hc)}var gn=et(null),Ln=null;function Bs(t){var i=t.alternate;Ae(pt,pt.current&1),Ae(gn,t),Ln===null&&(i===null||Ba.current!==null||i.memoizedState!==null)&&(Ln=t)}function Rf(t){Ae(pt,pt.current),Ae(gn,t),Ln===null&&(Ln=t)}function Eg(t){t.tag===22?(Ae(pt,pt.current),Ae(gn,t),Ln===null&&(Ln=t)):qs()}function qs(){Ae(pt,pt.current),Ae(gn,gn.current)}function yn(t){ke(gn),Ln===t&&(Ln=null),ke(pt)}var pt=et(0);function Gc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Od(a)||Md(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var es=0,be=null,Ye=null,wt=null,Qc=!1,qa=!1,Xr=!1,Kc=0,el=0,Fa=null,XT=0;function ct(){throw Error(r(321))}function Cf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!mn(t[a],i[a]))return!1;return!0}function xf(t,i,a,o,h,d){return es=d,be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?iy:Ff,Xr=!1,d=a(o,h),Xr=!1,qa&&(d=bg(i,a,o,h)),Tg(t),d}function Tg(t){K.H=il;var i=Ye!==null&&Ye.next!==null;if(es=0,wt=Ye=be=null,Qc=!1,el=0,Fa=null,i)throw Error(r(300));t===null||Rt||(t=t.dependencies,t!==null&&Lc(t)&&(Rt=!0))}function bg(t,i,a,o){be=t;var h=0;do{if(qa&&(Fa=null),el=0,qa=!1,25<=h)throw Error(r(301));if(h+=1,wt=Ye=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=sy,d=i(a,o)}while(qa);return d}function $T(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?tl(i):i,t=t.useState()[0],(Ye!==null?Ye.memoizedState:null)!==t&&(be.flags|=1024),i}function If(){var t=Kc!==0;return Kc=0,t}function Nf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Df(t){if(Qc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Qc=!1}es=0,wt=Ye=be=null,qa=!1,el=Kc=0,Fa=null}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?be.memoizedState=wt=t:wt=wt.next=t,wt}function gt(){if(Ye===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var i=wt===null?be.memoizedState:wt.next;if(i!==null)wt=i,Ye=t;else{if(t===null)throw be.alternate===null?Error(r(467)):Error(r(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},wt===null?be.memoizedState=wt=t:wt=wt.next=t}return wt}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(t){var i=el;return el+=1,Fa===null&&(Fa=[]),t=fg(Fa,t,i),i=be,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?iy:Ff),t}function Xc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tl(t);if(t.$$typeof===W)return Bt(t)}throw Error(r(438,String(t)))}function Of(t){var i=null,a=be.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=be.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Yc(),be.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=M;return i.index++,a}function ts(t,i){return typeof i=="function"?i(t):i}function $c(t){var i=gt();return Mf(i,Ye,t)}function Mf(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,I=null,B=i,G=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(xe&X)===X:(es&X)===X){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===La&&(G=!0);else if((es&q)===q){B=B.next,q===La&&(G=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(b=I=X,_=d):I=I.next=X,be.lanes|=q,Gs|=q;X=B.action,Xr&&a(d,X),d=B.hasEagerState?B.eagerState:a(d,X)}else q={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(b=I=q,_=d):I=I.next=q,be.lanes|=X,Gs|=X;B=B.next}while(B!==null&&B!==i);if(I===null?_=d:I.next=b,!mn(d,t.memoizedState)&&(Rt=!0,G&&(a=Pa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=I,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function jf(t){var i=gt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);mn(d,i.memoizedState)||(Rt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Ag(t,i,a){var o=be,h=gt(),d=Me;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!mn((Ye||h).memoizedState,a);if(_&&(h.memoizedState=a,Rt=!0),h=h.queue,Lf(Rg.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||wt!==null&&wt.memoizedState.tag&1){if(o.flags|=2048,Ha(9,{destroy:void 0},wg.bind(null,o,h,a,i),null),Ze===null)throw Error(r(349));d||(es&127)!==0||Sg(o,i,a)}return a}function Sg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=be.updateQueue,i===null?(i=Yc(),be.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function wg(t,i,a,o){i.value=a,i.getSnapshot=o,Cg(i)&&xg(t)}function Rg(t,i,a){return a(function(){Cg(i)&&xg(t)})}function Cg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!mn(t,a)}catch{return!0}}function xg(t){var i=zr(t,2);i!==null&&ln(i,t,2)}function Vf(t){var i=Jt();if(typeof t=="function"){var a=t;if(t=a(),Xr){Cn(!0);try{a()}finally{Cn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:t},i}function Ig(t,i,a,o){return t.baseState=a,Mf(t,Ye,typeof o=="function"?o:ts)}function WT(t,i,a,o,h){if(Jc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Ng(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Ng(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=K.T,_={};K.T=_;try{var b=a(h,o),I=K.S;I!==null&&I(_,b),Dg(t,i,b)}catch(B){kf(t,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(h,o),Dg(t,i,d)}catch(B){kf(t,i,B)}}function Dg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Og(t,i,o)},function(o){return kf(t,i,o)}):Og(t,i,a)}function Og(t,i,a){i.status="fulfilled",i.value=a,Mg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ng(t,a)))}function kf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Mg(i),i=i.next;while(i!==o)}t.action=null}function Mg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function jg(t,i){return i}function Vg(t,i){if(Me){var a=Ze.formState;if(a!==null){e:{var o=be;if(Me){if(nt){t:{for(var h=nt,d=kn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){nt=Pn(h.nextSibling),o=h.data==="F!";break e}}ks(o)}o=!1}o&&(i=a[0])}}return a=Jt(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:i},a.queue=o,a=ey.bind(null,be,o),o.dispatch=a,o=Vf(!1),d=qf.bind(null,be,!1,o.queue),o=Jt(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=WT.bind(null,be,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function kg(t){var i=gt();return Lg(i,Ye,t)}function Lg(t,i,a){if(i=Mf(t,i,jg)[0],t=$c(ts)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=tl(i)}catch(_){throw _===Ua?zc:_}else o=i;i=gt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(be.flags|=2048,Ha(9,{destroy:void 0},ZT.bind(null,h,a),null)),[o,d,t]}function ZT(t,i){t.action=i}function Pg(t){var i=gt(),a=Ye;if(a!==null)return Lg(i,a,t);gt(),i=i.memoizedState,a=gt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ha(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=be.updateQueue,i===null&&(i=Yc(),be.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Ug(){return gt().memoizedState}function Wc(t,i,a,o){var h=Jt();be.flags|=t,h.memoizedState=Ha(1|i,{destroy:void 0},a,o===void 0?null:o)}function Zc(t,i,a,o){var h=gt();o=o===void 0?null:o;var d=h.memoizedState.inst;Ye!==null&&o!==null&&Cf(o,Ye.memoizedState.deps)?h.memoizedState=Ha(i,d,a,o):(be.flags|=t,h.memoizedState=Ha(1|i,d,a,o))}function zg(t,i){Wc(8390656,8,t,i)}function Lf(t,i){Zc(2048,8,t,i)}function JT(t){be.flags|=4;var i=be.updateQueue;if(i===null)i=Yc(),be.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Bg(t){var i=gt().memoizedState;return JT({ref:i,nextImpl:t}),function(){if((ze&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function qg(t,i){return Zc(4,2,t,i)}function Fg(t,i){return Zc(4,4,t,i)}function Hg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,a){a=a!=null?a.concat([t]):null,Zc(4,4,Hg.bind(null,i,t),a)}function Pf(){}function Qg(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Cf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Kg(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Cf(i,o[1]))return o[0];if(o=t(),Xr){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[o,i],o}function Uf(t,i,a){return a===void 0||(es&1073741824)!==0&&(xe&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Yy(),be.lanes|=t,Gs|=t,a)}function Yg(t,i,a,o){return mn(a,i)?a:Ba.current!==null?(t=Uf(t,a,o),mn(t,i)||(Rt=!0),t):(es&42)===0||(es&1073741824)!==0&&(xe&261930)===0?(Rt=!0,t.memoizedState=a):(t=Yy(),be.lanes|=t,Gs|=t,i)}function Xg(t,i,a,o,h){var d=se.p;se.p=d!==0&&8>d?d:8;var _=K.T,b={};K.T=b,qf(t,!1,i,a);try{var I=h(),B=K.S;if(B!==null&&B(b,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var G=YT(I,o);nl(t,i,G,En(t))}else nl(t,i,o,En(t))}catch(X){nl(t,i,{then:function(){},status:"rejected",reason:X},En())}finally{se.p=d,_!==null&&b.types!==null&&(_.types=b.types),K.T=_}}function e2(){}function zf(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=$g(t).queue;Xg(t,h,i,fe,a===null?e2:function(){return Wg(t),a(o)})}function $g(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:fe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Wg(t){var i=$g(t);i.next===null&&(i=t.alternate.memoizedState),nl(t,i.next.queue,{},En())}function Bf(){return Bt(vl)}function Zg(){return gt().memoizedState}function Jg(){return gt().memoizedState}function t2(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();t=Us(a);var o=zs(i,t,a);o!==null&&(ln(o,i,a),Wo(o,i,a)),i={cache:gf()},t.payload=i;return}i=i.return}}function n2(t,i,a){var o=En();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jc(t)?ty(i,a):(a=rf(t,i,a,o),a!==null&&(ln(a,t,o),ny(a,i,o)))}function ey(t,i,a){var o=En();nl(t,i,a,o)}function nl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jc(t))ty(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,mn(b,_))return Mc(t,i,h,0),Ze===null&&Oc(),!1}catch{}finally{}if(a=rf(t,i,h,o),a!==null)return ln(a,t,o),ny(a,i,o),!0}return!1}function qf(t,i,a,o){if(o={lane:2,revertLane:Ed(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(t)){if(i)throw Error(r(479))}else i=rf(t,a,o,2),i!==null&&ln(i,t,2)}function Jc(t){var i=t.alternate;return t===be||i!==null&&i===be}function ty(t,i){qa=Qc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ny(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,So(t,a)}}var il={readContext:Bt,use:Xc,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};il.useEffectEvent=ct;var iy={readContext:Bt,use:Xc,useCallback:function(t,i){return Jt().memoizedState=[t,i===void 0?null:i],t},useContext:Bt,useEffect:zg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Wc(4194308,4,Hg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Wc(4194308,4,t,i)},useInsertionEffect:function(t,i){Wc(4,2,t,i)},useMemo:function(t,i){var a=Jt();i=i===void 0?null:i;var o=t();if(Xr){Cn(!0);try{t()}finally{Cn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Jt();if(a!==void 0){var h=a(i);if(Xr){Cn(!0);try{a(i)}finally{Cn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=n2.bind(null,be,t),[o.memoizedState,t]},useRef:function(t){var i=Jt();return t={current:t},i.memoizedState=t},useState:function(t){t=Vf(t);var i=t.queue,a=ey.bind(null,be,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Pf,useDeferredValue:function(t,i){var a=Jt();return Uf(a,t,i)},useTransition:function(){var t=Vf(!1);return t=Xg.bind(null,be,t.queue,!0,!1),Jt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=be,h=Jt();if(Me){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Ze===null)throw Error(r(349));(xe&127)!==0||Sg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,zg(Rg.bind(null,o,d,t),[t]),o.flags|=2048,Ha(9,{destroy:void 0},wg.bind(null,o,d,a,i),null),a},useId:function(){var t=Jt(),i=Ze.identifierPrefix;if(Me){var a=Ci,o=Ri;a=(o&~(1<<32-dt(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Kc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=XT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Bf,useFormState:Vg,useActionState:Vg,useOptimistic:function(t){var i=Jt();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=qf.bind(null,be,!0,a),a.dispatch=i,[t,i]},useMemoCache:Of,useCacheRefresh:function(){return Jt().memoizedState=t2.bind(null,be)},useEffectEvent:function(t){var i=Jt(),a={impl:t};return i.memoizedState=a,function(){if((ze&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ff={readContext:Bt,use:Xc,useCallback:Qg,useContext:Bt,useEffect:Lf,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Fg,useMemo:Kg,useReducer:$c,useRef:Ug,useState:function(){return $c(ts)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=gt();return Yg(a,Ye.memoizedState,t,i)},useTransition:function(){var t=$c(ts)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:Bf,useFormState:kg,useActionState:kg,useOptimistic:function(t,i){var a=gt();return Ig(a,Ye,t,i)},useMemoCache:Of,useCacheRefresh:Jg};Ff.useEffectEvent=Bg;var sy={readContext:Bt,use:Xc,useCallback:Qg,useContext:Bt,useEffect:Lf,useImperativeHandle:Gg,useInsertionEffect:qg,useLayoutEffect:Fg,useMemo:Kg,useReducer:jf,useRef:Ug,useState:function(){return jf(ts)},useDebugValue:Pf,useDeferredValue:function(t,i){var a=gt();return Ye===null?Uf(a,t,i):Yg(a,Ye.memoizedState,t,i)},useTransition:function(){var t=jf(ts)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:tl(t),i]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:Bf,useFormState:Pg,useActionState:Pg,useOptimistic:function(t,i){var a=gt();return Ye!==null?Ig(a,Ye,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Of,useCacheRefresh:Jg};sy.useEffectEvent=Bg;function Hf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Gf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=En(),h=Us(o);h.payload=i,a!=null&&(h.callback=a),i=zs(t,h,o),i!==null&&(ln(i,t,o),Wo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=En(),h=Us(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=zs(t,h,o),i!==null&&(ln(i,t,o),Wo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=En(),o=Us(a);o.tag=2,i!=null&&(o.callback=i),i=zs(t,o,a),i!==null&&(ln(i,t,a),Wo(i,t,a))}};function ry(t,i,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):i.prototype&&i.prototype.isPureReactComponent?!Fo(a,o)||!Fo(h,d):!0}function ay(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Gf.enqueueReplaceState(i,i.state,null)}function $r(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function oy(t){Dc(t)}function ly(t){console.error(t)}function cy(t){Dc(t)}function eu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function uy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Qf(t,i,a){return a=Us(a),a.tag=3,a.payload={element:null},a.callback=function(){eu(t,i)},a}function hy(t){return t=Us(t),t.tag=3,t}function fy(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){uy(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){uy(i,a,o),typeof h!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function i2(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&ka(i,a,h,!0),a=gn.current,a!==null){switch(a.tag){case 31:case 13:return Ln===null?fu():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Bc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),yd(t,o,h)),!1;case 22:return a.flags|=65536,o===Bc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),yd(t,o,h)),!1}throw Error(r(435,a.tag))}return yd(t,o,h),fu(),!1}if(Me)return i=gn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==hf&&(t=Error(r(422),{cause:o}),Qo(Mn(t,a)))):(o!==hf&&(i=Error(r(423),{cause:o}),Qo(Mn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Mn(o,a),h=Qf(t.stateNode,o,h),bf(t,h),ut!==4&&(ut=2)),!1;var d=Error(r(520),{cause:o});if(d=Mn(d,a),hl===null?hl=[d]:hl.push(d),ut!==4&&(ut=2),i===null)return!0;o=Mn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Qf(a.stateNode,o,t),bf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Qs===null||!Qs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hy(h),fy(h,t,a,o),bf(a,h),!1}a=a.return}while(a!==null);return!1}var Kf=Error(r(461)),Rt=!1;function qt(t,i,a,o){i.child=t===null?gg(i,null,a,o):Yr(i,t.child,a,o)}function dy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return Hr(i),o=xf(t,i,a,_,d,h),b=If(),t!==null&&!Rt?(Nf(t,i,h),ns(t,i,h)):(Me&&b&&cf(i),i.flags|=1,qt(t,i,o,h),i.child)}function my(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!af(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,py(t,i,d,o,h)):(t=Vc(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!td(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(_,o)&&t.ref===i.ref)return ns(t,i,h)}return i.flags|=1,t=$i(d,o),t.ref=i.ref,t.return=i,i.child=t}function py(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Fo(d,o)&&t.ref===i.ref)if(Rt=!1,i.pendingProps=o=d,td(t,h))(t.flags&131072)!==0&&(Rt=!0);else return i.lanes=t.lanes,ns(t,i,h)}return Yf(t,i,a,o,h)}function gy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return yy(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uc(i,d!==null?d.cachePool:null),d!==null?vg(i,d):Sf(),Eg(i);else return o=i.lanes=536870912,yy(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(Uc(i,d.cachePool),vg(i,d),qs(),i.memoizedState=null):(t!==null&&Uc(i,null),Sf(),qs());return qt(t,i,h,a),i.child}function sl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function yy(t,i,a,o,h){var d=_f();return d=d===null?null:{parent:St._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Uc(i,null),Sf(),Eg(i),t!==null&&ka(t,i,o,!0),i.childLanes=h,null}function tu(t,i){return i=iu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function _y(t,i,a){return Yr(i,t.child,null,a),t=tu(i,i.pendingProps),t.flags|=2,yn(i),i.memoizedState=null,t}function s2(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Me){if(o.mode==="hidden")return t=tu(i,o),i.lanes=536870912,sl(null,t);if(Rf(i),(t=nt)?(t=N_(t,kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:js!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,zt=i,nt=null)):t=null,t===null)throw ks(i);return i.lanes=536870912,null}return tu(i,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Rf(i),h)if(i.flags&256)i.flags&=-257,i=_y(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Rt||ka(t,i,a,!1),h=(a&t.childLanes)!==0,Rt||h){if(o=Ze,o!==null&&(_=wo(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,zr(t,_),ln(o,t,_),Kf;fu(),i=_y(t,i,a)}else t=d.treeContext,nt=Pn(_.nextSibling),zt=i,Me=!0,Vs=null,kn=!1,t!==null&&sg(i,t),i=tu(i,o),i.flags|=4096;return i}return t=$i(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function nu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Yf(t,i,a,o,h){return Hr(i),a=xf(t,i,a,o,void 0,h),o=If(),t!==null&&!Rt?(Nf(t,i,h),ns(t,i,h)):(Me&&o&&cf(i),i.flags|=1,qt(t,i,a,h),i.child)}function vy(t,i,a,o,h,d){return Hr(i),i.updateQueue=null,a=bg(i,o,a,h),Tg(t),o=If(),t!==null&&!Rt?(Nf(t,i,d),ns(t,i,d)):(Me&&o&&cf(i),i.flags|=1,qt(t,i,a,d),i.child)}function Ey(t,i,a,o,h){if(Hr(i),i.stateNode===null){var d=Oa,_=a.contextType;typeof _=="object"&&_!==null&&(d=Bt(_)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Gf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Ef(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Bt(_):Oa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hf(i,a,_,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Gf.enqueueReplaceState(d,d.state,null),Jo(i,o,d,h),Zo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,I=$r(a,b);d.props=I;var B=d.context,G=a.contextType;_=Oa,typeof G=="object"&&G!==null&&(_=Bt(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&ay(i,d,o,_),Ps=!1;var q=i.memoizedState;d.state=q,Jo(i,o,d,h),Zo(),B=i.memoizedState,b||q!==B||Ps?(typeof X=="function"&&(Hf(i,a,X,o),B=i.memoizedState),(I=Ps||ry(i,a,I,o,q,B,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=_,o=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Tf(t,i),_=i.memoizedProps,G=$r(a,_),d.props=G,X=i.pendingProps,q=d.context,B=a.contextType,I=Oa,typeof B=="object"&&B!==null&&(I=Bt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||q!==I)&&ay(i,d,o,I),Ps=!1,q=i.memoizedState,d.state=q,Jo(i,o,d,h),Zo();var H=i.memoizedState;_!==X||q!==H||Ps||t!==null&&t.dependencies!==null&&Lc(t.dependencies)?(typeof b=="function"&&(Hf(i,a,b,o),H=i.memoizedState),(G=Ps||ry(i,a,G,o,q,H,I)||t!==null&&t.dependencies!==null&&Lc(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=I,o=G):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,nu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Yr(i,t.child,null,h),i.child=Yr(i,null,a,h)):qt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ns(t,i,h),t}function Ty(t,i,a,o){return qr(),i.flags|=256,qt(t,i,a,o),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(t){return{baseLanes:t,cachePool:ug()}}function Wf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=vn),t}function by(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Me){if(h?Bs(i):qs(),(t=nt)?(t=N_(t,kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:js!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=tg(t),a.return=i,i.child=a,zt=i,nt=null)):t=null,t===null)throw ks(i);return Md(t)?i.lanes=32:i.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(qs(),h=i.mode,b=iu({mode:"hidden",children:b},h),o=Br(o,h,a,null),b.return=i,o.return=i,b.sibling=o,i.child=b,o=i.child,o.memoizedState=$f(a),o.childLanes=Wf(t,_,a),i.memoizedState=Xf,sl(null,o)):(Bs(i),Zf(i,b))}var I=t.memoizedState;if(I!==null&&(b=I.dehydrated,b!==null)){if(d)i.flags&256?(Bs(i),i.flags&=-257,i=Jf(t,i,a)):i.memoizedState!==null?(qs(),i.child=t.child,i.flags|=128,i=null):(qs(),b=o.fallback,h=i.mode,o=iu({mode:"visible",children:o.children},h),b=Br(b,h,a,null),b.flags|=2,o.return=i,b.return=i,o.sibling=b,i.child=o,Yr(i,t.child,null,a),o=i.child,o.memoizedState=$f(a),o.childLanes=Wf(t,_,a),i.memoizedState=Xf,i=sl(null,o));else if(Bs(i),Md(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(r(419)),o.stack="",o.digest=_,Qo({value:o,source:null,stack:null}),i=Jf(t,i,a)}else if(Rt||ka(t,i,a,!1),_=(a&t.childLanes)!==0,Rt||_){if(_=Ze,_!==null&&(o=wo(_,a),o!==0&&o!==I.retryLane))throw I.retryLane=o,zr(t,o),ln(_,t,o),Kf;Od(b)||fu(),i=Jf(t,i,a)}else Od(b)?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,nt=Pn(b.nextSibling),zt=i,Me=!0,Vs=null,kn=!1,t!==null&&sg(i,t),i=Zf(i,o.children),i.flags|=4096);return i}return h?(qs(),b=o.fallback,h=i.mode,I=t.child,B=I.sibling,o=$i(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,B!==null?b=$i(B,b):(b=Br(b,h,a,null),b.flags|=2),b.return=i,o.return=i,o.sibling=b,i.child=o,sl(null,o),o=i.child,b=t.child.memoizedState,b===null?b=$f(a):(h=b.cachePool,h!==null?(I=St._currentValue,h=h.parent!==I?{parent:I,pool:I}:h):h=ug(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=Wf(t,_,a),i.memoizedState=Xf,sl(t.child,o)):(Bs(i),a=t.child,t=a.sibling,a=$i(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Zf(t,i){return i=iu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function iu(t,i){return t=pn(22,t,null,i),t.lanes=0,t}function Jf(t,i,a){return Yr(i,t.child,null,a),t=Zf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ay(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),mf(t.return,i,a)}function ed(t,i,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Sy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=pt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,Ae(pt,_),qt(t,i,o,a),o=Me?Go:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ay(t,a,i);else if(t.tag===19)Ay(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Gc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),ed(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Gc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ed(i,!0,a,null,d,o);break;case"together":ed(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function ns(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Gs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ka(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=$i(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=$i(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function td(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Lc(t)))}function r2(t,i,a){switch(i.tag){case 3:oi(i,i.stateNode.containerInfo),Ls(i,St,t.memoizedState.cache),qr();break;case 27:case 5:Ar(i);break;case 4:oi(i,i.stateNode.containerInfo);break;case 10:Ls(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Rf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Bs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?by(t,i,a):(Bs(i),t=ns(t,i,a),t!==null?t.sibling:null);Bs(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(ka(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Sy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ae(pt,pt.current),o)break;return null;case 22:return i.lanes=0,gy(t,i,a,i.pendingProps);case 24:Ls(i,St,t.memoizedState.cache)}return ns(t,i,a)}function wy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Rt=!0;else{if(!td(t,a)&&(i.flags&128)===0)return Rt=!1,r2(t,i,a);Rt=(t.flags&131072)!==0}else Rt=!1,Me&&(i.flags&1048576)!==0&&ig(i,Go,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=Qr(i.elementType),i.type=t,typeof t=="function")af(t)?(o=$r(t,o),i.tag=1,i=Ey(null,i,t,o,a)):(i.tag=0,i=Yf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===te){i.tag=11,i=dy(null,i,t,o,a);break e}else if(h===N){i.tag=14,i=my(null,i,t,o,a);break e}}throw i=Ge(t)||t,Error(r(306,i,""))}}return i;case 0:return Yf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=$r(o,i.pendingProps),Ey(t,i,o,h,a);case 3:e:{if(oi(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Tf(t,i),Jo(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Ls(i,St,o),o!==d.cache&&pf(i,[St],a,!0),Zo(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ty(t,i,o,a);break e}else if(o!==h){h=Mn(Error(r(424)),i),Qo(h),i=Ty(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Pn(t.firstChild),zt=i,Me=!0,Vs=null,kn=!0,a=gg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qr(),o===h){i=ns(t,i,a);break e}qt(t,i,o,a)}i=i.child}return i;case 26:return nu(t,i),t===null?(a=k_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Me||(a=i.type,t=i.pendingProps,o=vu(en.current).createElement(a),o[Tt]=i,o[jt]=t,Ft(o,a,t),bt(o),i.stateNode=o):i.memoizedState=k_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ar(i),t===null&&Me&&(o=i.stateNode=M_(i.type,i.pendingProps,en.current),zt=i,kn=!0,h=nt,$s(i.type)?(jd=h,nt=Pn(o.firstChild)):nt=h),qt(t,i,i.pendingProps.children,a),nu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Me&&((h=o=nt)&&(o=V2(o,i.type,i.pendingProps,kn),o!==null?(i.stateNode=o,zt=i,nt=Pn(o.firstChild),kn=!1,h=!0):h=!1),h||ks(i)),Ar(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,Id(h,d)?o=null:_!==null&&Id(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=xf(t,i,$T,null,null,a),vl._currentValue=h),nu(t,i),qt(t,i,o,a),i.child;case 6:return t===null&&Me&&((t=a=nt)&&(a=k2(a,i.pendingProps,kn),a!==null?(i.stateNode=a,zt=i,nt=null,t=!0):t=!1),t||ks(i)),null;case 13:return by(t,i,a);case 4:return oi(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Yr(i,null,o,a):qt(t,i,o,a),i.child;case 11:return dy(t,i,i.type,i.pendingProps,a);case 7:return qt(t,i,i.pendingProps,a),i.child;case 8:return qt(t,i,i.pendingProps.children,a),i.child;case 12:return qt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Ls(i,i.type,o.value),qt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Hr(i),h=Bt(h),o=o(h),i.flags|=1,qt(t,i,o,a),i.child;case 14:return my(t,i,i.type,i.pendingProps,a);case 15:return py(t,i,i.type,i.pendingProps,a);case 19:return Sy(t,i,a);case 31:return s2(t,i,a);case 22:return gy(t,i,a,i.pendingProps);case 24:return Hr(i),o=Bt(St),t===null?(h=_f(),h===null&&(h=Ze,d=gf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Ef(i),Ls(i,St,h)):((t.lanes&a)!==0&&(Tf(t,i),Jo(i,null,null,a),Zo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ls(i,St,o)):(o=d.cache,Ls(i,St,o),o!==h.cache&&pf(i,[St],a,!0))),qt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function is(t){t.flags|=4}function nd(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Zy())t.flags|=8192;else throw Kr=Bc,vf}else t.flags&=-16777217}function Ry(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B_(i))if(Zy())t.flags|=8192;else throw Kr=Bc,vf}function su(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?uc():536870912,t.lanes|=i,Ya|=i)}function rl(t,i){if(!Me)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function a2(t,i,a){var o=i.pendingProps;switch(uf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ji(St),Wt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Va(i)?is(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ff())),it(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(is(i),d!==null?(it(i),Ry(i,d)):(it(i),nd(i,h,null,o,a))):d?d!==t.memoizedState?(is(i),it(i),Ry(i,d)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&is(i),it(i),nd(i,h,t,o,a)),null;case 27:if(Bn(i),a=en.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&is(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}t=tt.current,Va(i)?rg(i):(t=M_(h,o,a),i.stateNode=t,is(i))}return it(i),null;case 5:if(Bn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&is(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}if(d=tt.current,Va(i))rg(i);else{var _=vu(en.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[Tt]=i,d[jt]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Ft(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&is(i)}}return it(i),nd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&is(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=en.current,Va(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=zt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Tt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||b_(t.nodeValue,a)),t||ks(i,!0)}else t=vu(t).createTextNode(o),t[Tt]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=Va(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Tt]=i}else qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(yn(i),i):(yn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return it(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Va(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Tt]=i}else qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),h=!1}else h=ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(yn(i),i):(yn(i),null)}return yn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),su(i,i.updateQueue),it(i),null);case 4:return Wt(),t===null&&Sd(i.stateNode.containerInfo),it(i),null;case 10:return Ji(i.type),it(i),null;case 19:if(ke(pt),o=i.memoizedState,o===null)return it(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)rl(o,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Gc(t),d!==null){for(i.flags|=128,rl(o,!1),t=d.updateQueue,i.updateQueue=t,su(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)eg(a,t),a=a.sibling;return Ae(pt,pt.current&1|2),Me&&Wi(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Qe()>cu&&(i.flags|=128,h=!0,rl(o,!1),i.lanes=4194304)}else{if(!h)if(t=Gc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,su(i,t),rl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Me)return it(i),null}else 2*Qe()-o.renderingStartTime>cu&&a!==536870912&&(i.flags|=128,h=!0,rl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,a=pt.current,Ae(pt,h?a&1|2:a&1),Me&&Wi(i,o.treeForkCount),t):(it(i),null);case 22:case 23:return yn(i),wf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&su(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&ke(Gr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(St),it(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function o2(t,i){switch(uf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ji(St),Wt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Bn(i),null;case 31:if(i.memoizedState!==null){if(yn(i),i.alternate===null)throw Error(r(340));qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(yn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ke(pt),null;case 4:return Wt(),null;case 10:return Ji(i.type),null;case 22:case 23:return yn(i),wf(),t!==null&&ke(Gr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ji(St),null;case 25:return null;default:return null}}function Cy(t,i){switch(uf(i),i.tag){case 3:Ji(St),Wt();break;case 26:case 27:case 5:Bn(i);break;case 4:Wt();break;case 31:i.memoizedState!==null&&yn(i);break;case 13:yn(i);break;case 19:ke(pt);break;case 10:Ji(i.type);break;case 22:case 23:yn(i),wf(),t!==null&&ke(Gr);break;case 24:Ji(St)}}function al(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){He(i,i.return,b)}}function Fs(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var I=a,B=b;try{B()}catch(G){He(h,I,G)}}}o=o.next}while(o!==d)}}catch(G){He(i,i.return,G)}}function xy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{_g(i,a)}catch(o){He(t,t.return,o)}}}function Iy(t,i,a){a.props=$r(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){He(t,i,o)}}function ol(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){He(t,i,h)}}function xi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){He(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){He(t,i,h)}else a.current=null}function Ny(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){He(t,t.return,h)}}function id(t,i,a){try{var o=t.stateNode;I2(o,t.type,a,i),o[jt]=i}catch(h){He(t,t.return,h)}}function Dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$s(t.type)||t.tag===4}function sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kn));else if(o!==4&&(o===27&&$s(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(rd(t,i,a),t=t.sibling;t!==null;)rd(t,i,a),t=t.sibling}function ru(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&$s(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ru(t,i,a),t=t.sibling;t!==null;)ru(t,i,a),t=t.sibling}function Oy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ft(i,o,a),i[Tt]=t,i[jt]=a}catch(d){He(t,t.return,d)}}var ss=!1,Ct=!1,ad=!1,My=typeof WeakSet=="function"?WeakSet:Set,kt=null;function l2(t,i){if(t=t.containerInfo,Cd=Ru,t=Gp(t),Zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,I=-1,B=0,G=0,X=t,q=null;t:for(;;){for(var H;X!==a||h!==0&&X.nodeType!==3||(b=_+h),X!==d||o!==0&&X.nodeType!==3||(I=_+o),X.nodeType===3&&(_+=X.nodeValue.length),(H=X.firstChild)!==null;)q=X,X=H;for(;;){if(X===t)break t;if(q===a&&++B===h&&(b=_),q===d&&++G===o&&(I=_),(H=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=H}a=b===-1||I===-1?null:{start:b,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(xd={focusedElem:t,selectionRange:a},Ru=!1,kt=i;kt!==null;)if(i=kt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,kt=t;else for(;kt!==null;){switch(i=kt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var oe=$r(a.type,h);t=o.getSnapshotBeforeUpdate(oe,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(pe){He(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Dd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,kt=t;break}kt=i.return}}function jy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:as(t,a),o&4&&al(5,a);break;case 1:if(as(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){He(a,a.return,_)}else{var h=$r(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){He(a,a.return,_)}}o&64&&xy(a),o&512&&ol(a,a.return);break;case 3:if(as(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{_g(t,i)}catch(_){He(a,a.return,_)}}break;case 27:i===null&&o&4&&Oy(a);case 26:case 5:as(t,a),i===null&&o&4&&Ny(a),o&512&&ol(a,a.return);break;case 12:as(t,a);break;case 31:as(t,a),o&4&&Ly(t,a);break;case 13:as(t,a),o&4&&Py(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=y2.bind(null,a),L2(t,a))));break;case 22:if(o=a.memoizedState!==null||ss,!o){i=i!==null&&i.memoizedState!==null||Ct,h=ss;var d=Ct;ss=o,(Ct=i)&&!d?os(t,a,(a.subtreeFlags&8772)!==0):as(t,a),ss=h,Ct=d}break;case 30:break;default:as(t,a)}}function Vy(t){var i=t.alternate;i!==null&&(t.alternate=null,Vy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&_a(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,sn=!1;function rs(t,i,a){for(a=a.child;a!==null;)ky(t,i,a),a=a.sibling}function ky(t,i,a){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Fn,a)}catch{}switch(a.tag){case 26:Ct||xi(a,i),rs(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||xi(a,i);var o=at,h=sn;$s(a.type)&&(at=a.stateNode,sn=!1),rs(t,i,a),gl(a.stateNode),at=o,sn=h;break;case 5:Ct||xi(a,i);case 6:if(o=at,h=sn,at=null,rs(t,i,a),at=o,sn=h,at!==null)if(sn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(d){He(a,i,d)}else try{at.removeChild(a.stateNode)}catch(d){He(a,i,d)}break;case 18:at!==null&&(sn?(t=at,x_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),no(t)):x_(at,a.stateNode));break;case 4:o=at,h=sn,at=a.stateNode.containerInfo,sn=!0,rs(t,i,a),at=o,sn=h;break;case 0:case 11:case 14:case 15:Fs(2,a,i),Ct||Fs(4,a,i),rs(t,i,a);break;case 1:Ct||(xi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Iy(a,i,o)),rs(t,i,a);break;case 21:rs(t,i,a);break;case 22:Ct=(o=Ct)||a.memoizedState!==null,rs(t,i,a),Ct=o;break;default:rs(t,i,a)}}function Ly(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{no(t)}catch(a){He(i,i.return,a)}}}function Py(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{no(t)}catch(a){He(i,i.return,a)}}function c2(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new My),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new My),i;default:throw Error(r(435,t.tag))}}function au(t,i){var a=c2(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=_2.bind(null,t,o);o.then(h,h)}})}function rn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if($s(b.type)){at=b.stateNode,sn=!1;break e}break;case 5:at=b.stateNode,sn=!1;break e;case 3:case 4:at=b.stateNode.containerInfo,sn=!0;break e}b=b.return}if(at===null)throw Error(r(160));ky(d,_,h),at=null,sn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Uy(i,t),i=i.sibling}var Jn=null;function Uy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:rn(i,t),an(t),o&4&&(Fs(3,t,t.return),al(3,t),Fs(5,t,t.return));break;case 1:rn(i,t),an(t),o&512&&(Ct||a===null||xi(a,a.return)),o&64&&ss&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Jn;if(rn(i,t),an(t),o&512&&(Ct||a===null||xi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[mi]||d[Tt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Ft(d,o,a),d[Tt]=t,bt(d),o=d;break e;case"link":var _=U_("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(o),Ft(d,o,a),h.head.appendChild(d);break;case"meta":if(_=U_("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(o),Ft(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[Tt]=t,bt(d),o=d}t.stateNode=o}else z_(h,t.type,t.stateNode);else t.stateNode=P_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?z_(h,t.type,t.stateNode):P_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&id(t,t.memoizedProps,a.memoizedProps)}break;case 27:rn(i,t),an(t),o&512&&(Ct||a===null||xi(a,a.return)),a!==null&&o&4&&id(t,t.memoizedProps,a.memoizedProps);break;case 5:if(rn(i,t),an(t),o&512&&(Ct||a===null||xi(a,a.return)),t.flags&32){h=t.stateNode;try{nn(h,"")}catch(oe){He(t,t.return,oe)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,id(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ad=!0);break;case 6:if(rn(i,t),an(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(oe){He(t,t.return,oe)}}break;case 3:if(bu=null,h=Jn,Jn=Eu(i.containerInfo),rn(i,t),Jn=h,an(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{no(i.containerInfo)}catch(oe){He(t,t.return,oe)}ad&&(ad=!1,zy(t));break;case 4:o=Jn,Jn=Eu(t.stateNode.containerInfo),rn(i,t),an(t),Jn=o;break;case 12:rn(i,t),an(t);break;case 31:rn(i,t),an(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,au(t,o)));break;case 13:rn(i,t),an(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lu=Qe()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,au(t,o)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=ss,G=Ct;if(ss=B||h,Ct=G||I,rn(i,t),Ct=G,ss=B,an(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||ss||Ct||Wr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=I.stateNode;var X=I.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(oe){He(I,I.return,oe)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(oe){He(I,I.return,oe)}}}else if(i.tag===18){if(a===null){I=i;try{var H=I.stateNode;h?I_(H,!0):I_(I.stateNode,!1)}catch(oe){He(I,I.return,oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,au(t,a))));break;case 19:rn(i,t),an(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,au(t,o)));break;case 30:break;case 21:break;default:rn(i,t),an(t)}}function an(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Dy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=sd(t);ru(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(nn(_,""),a.flags&=-33);var b=sd(t);ru(t,b,_);break;case 3:case 4:var I=a.stateNode.containerInfo,B=sd(t);rd(t,B,I);break;default:throw Error(r(161))}}catch(G){He(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function zy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function as(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)jy(t,i.alternate,i),i=i.sibling}function Wr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Fs(4,i,i.return),Wr(i);break;case 1:xi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Iy(i,i.return,a),Wr(i);break;case 27:gl(i.stateNode);case 26:case 5:xi(i,i.return),Wr(i);break;case 22:i.memoizedState===null&&Wr(i);break;case 30:Wr(i);break;default:Wr(i)}t=t.sibling}}function os(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:os(h,d,a),al(4,d);break;case 1:if(os(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){He(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var b=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)yg(I[h],b)}catch(B){He(o,o.return,B)}}a&&_&64&&xy(d),ol(d,d.return);break;case 27:Oy(d);case 26:case 5:os(h,d,a),a&&o===null&&_&4&&Ny(d),ol(d,d.return);break;case 12:os(h,d,a);break;case 31:os(h,d,a),a&&_&4&&Ly(h,d);break;case 13:os(h,d,a),a&&_&4&&Py(h,d);break;case 22:d.memoizedState===null&&os(h,d,a),ol(d,d.return);break;case 30:break;default:os(h,d,a)}i=i.sibling}}function od(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ko(a))}function ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t))}function ei(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)By(t,i,a,o),i=i.sibling}function By(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ei(t,i,a,o),h&2048&&al(9,i);break;case 1:ei(t,i,a,o);break;case 3:ei(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Ko(t)));break;case 12:if(h&2048){ei(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){He(i,i.return,I)}}else ei(t,i,a,o);break;case 31:ei(t,i,a,o);break;case 13:ei(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ei(t,i,a,o):ll(t,i):d._visibility&2?ei(t,i,a,o):(d._visibility|=2,Ga(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&od(_,i);break;case 24:ei(t,i,a,o),h&2048&&ld(i.alternate,i);break;default:ei(t,i,a,o)}}function Ga(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,I=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:Ga(d,_,b,I,h),al(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?Ga(d,_,b,I,h):ll(d,_):(G._visibility|=2,Ga(d,_,b,I,h)),h&&B&2048&&od(_.alternate,_);break;case 24:Ga(d,_,b,I,h),h&&B&2048&&ld(_.alternate,_);break;default:Ga(d,_,b,I,h)}i=i.sibling}}function ll(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:ll(a,o),h&2048&&od(o.alternate,o);break;case 24:ll(a,o),h&2048&&ld(o.alternate,o);break;default:ll(a,o)}i=i.sibling}}var cl=8192;function Qa(t,i,a){if(t.subtreeFlags&cl)for(t=t.child;t!==null;)qy(t,i,a),t=t.sibling}function qy(t,i,a){switch(t.tag){case 26:Qa(t,i,a),t.flags&cl&&t.memoizedState!==null&&X2(a,Jn,t.memoizedState,t.memoizedProps);break;case 5:Qa(t,i,a);break;case 3:case 4:var o=Jn;Jn=Eu(t.stateNode.containerInfo),Qa(t,i,a),Jn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=cl,cl=16777216,Qa(t,i,a),cl=o):Qa(t,i,a));break;default:Qa(t,i,a)}}function Fy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ul(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];kt=o,Gy(o,t)}Fy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hy(t),t=t.sibling}function Hy(t){switch(t.tag){case 0:case 11:case 15:ul(t),t.flags&2048&&Fs(9,t,t.return);break;case 3:ul(t);break;case 12:ul(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,ou(t)):ul(t);break;default:ul(t)}}function ou(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];kt=o,Gy(o,t)}Fy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Fs(8,i,i.return),ou(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ou(i));break;default:ou(i)}t=t.sibling}}function Gy(t,i){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:Fs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,kt=o;else e:for(a=t;kt!==null;){o=kt;var h=o.sibling,d=o.return;if(Vy(o),o===a){kt=null;break e}if(h!==null){h.return=d,kt=h;break e}kt=d}}}var u2={getCacheForType:function(t){var i=Bt(St),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Bt(St).controller.signal}},h2=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ze=null,Re=null,xe=0,Fe=0,_n=null,Hs=!1,Ka=!1,cd=!1,ls=0,ut=0,Gs=0,Zr=0,ud=0,vn=0,Ya=0,hl=null,on=null,hd=!1,lu=0,Qy=0,cu=1/0,uu=null,Qs=null,Dt=0,Ks=null,Xa=null,cs=0,fd=0,dd=null,Ky=null,fl=0,md=null;function En(){return(ze&2)!==0&&xe!==0?xe&-xe:K.T!==null?Ed():hc()}function Yy(){if(vn===0)if((xe&536870912)===0||Me){var t=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),vn=t}else vn=536870912;return t=gn.current,t!==null&&(t.flags|=32),vn}function ln(t,i,a){(t===Ze&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)&&($a(t,0),Ys(t,xe,vn,!1)),Rr(t,a),((ze&2)===0||t!==Ze)&&(t===Ze&&((ze&2)===0&&(Zr|=a),ut===4&&Ys(t,xe,vn,!1)),Ii(t))}function Xy(t,i,a){if((ze&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Hn(t,i),h=o?m2(t,i):gd(t,i,!0),d=o;do{if(h===0){Ka&&!o&&Ys(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!f2(a)){h=gd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=hl;var I=b.current.memoizedState.isDehydrated;if(I&&($a(b,_).flags|=256),_=gd(b,_,!1),_!==2){if(cd&&!I){b.errorRecoveryDisabledLanes|=d,Zr|=d,h=4;break e}d=on,on=h,d!==null&&(on===null?on=d:on.push.apply(on,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){$a(t,0),Ys(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ys(o,i,vn,!Hs);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=lu+300-Qe(),10<h)){if(Ys(o,i,vn,!Hs),hi(o,0,!0)!==0)break e;cs=i,o.timeoutHandle=R_($y.bind(null,o,a,on,uu,hd,i,vn,Zr,Ya,Hs,d,"Throttled",-0,0),h);break e}$y(o,a,on,uu,hd,i,vn,Zr,Ya,Hs,d,null,-0,0)}}break}while(!0);Ii(t)}function $y(t,i,a,o,h,d,_,b,I,B,G,X,q,H){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},qy(i,d,X);var oe=(d&62914560)===d?lu-Qe():(d&4194048)===d?Qy-Qe():0;if(oe=$2(X,oe),oe!==null){cs=d,t.cancelPendingCommit=oe(s_.bind(null,t,i,d,a,o,h,_,b,I,G,X,null,q,H)),Ys(t,d,_,!B);return}}s_(t,i,d,a,o,h,_,b,I)}function f2(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!mn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ys(t,i,a,o){i&=~ud,i&=~Zr,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-dt(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&Cr(t,a,i)}function hu(){return(ze&6)===0?(dl(0),!1):!0}function pd(){if(Re!==null){if(Fe===0)var t=Re.return;else t=Re,Zi=Fr=null,Df(t),za=null,Xo=0,t=Re;for(;t!==null;)Cy(t.alternate,t),t=t.return;Re=null}}function $a(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,O2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),cs=0,pd(),Ze=t,Re=a=$i(t.current,null),xe=i,Fe=0,_n=null,Hs=!1,Ka=Hn(t,i),cd=!1,Ya=vn=ud=Zr=Gs=ut=0,on=hl=null,hd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-dt(o),d=1<<h;i|=t[h],o&=~d}return ls=i,Oc(),a}function Wy(t,i){be=null,K.H=il,i===Ua||i===zc?(i=dg(),Fe=3):i===vf?(i=dg(),Fe=4):Fe=i===Kf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_n=i,Re===null&&(ut=1,eu(t,Mn(i,t.current)))}function Zy(){var t=gn.current;return t===null?!0:(xe&4194048)===xe?Ln===null:(xe&62914560)===xe||(xe&536870912)!==0?t===Ln:!1}function Jy(){var t=K.H;return K.H=il,t===null?il:t}function e_(){var t=K.A;return K.A=u2,t}function fu(){ut=4,Hs||(xe&4194048)!==xe&&gn.current!==null||(Ka=!0),(Gs&134217727)===0&&(Zr&134217727)===0||Ze===null||Ys(Ze,xe,vn,!1)}function gd(t,i,a){var o=ze;ze|=2;var h=Jy(),d=e_();(Ze!==t||xe!==i)&&(uu=null,$a(t,i)),i=!1;var _=ut;e:do try{if(Fe!==0&&Re!==null){var b=Re,I=_n;switch(Fe){case 8:pd(),_=6;break e;case 3:case 2:case 9:case 6:gn.current===null&&(i=!0);var B=Fe;if(Fe=0,_n=null,Wa(t,b,I,B),a&&Ka){_=0;break e}break;default:B=Fe,Fe=0,_n=null,Wa(t,b,I,B)}}d2(),_=ut;break}catch(G){Wy(t,G)}while(!0);return i&&t.shellSuspendCounter++,Zi=Fr=null,ze=o,K.H=h,K.A=d,Re===null&&(Ze=null,xe=0,Oc()),_}function d2(){for(;Re!==null;)t_(Re)}function m2(t,i){var a=ze;ze|=2;var o=Jy(),h=e_();Ze!==t||xe!==i?(uu=null,cu=Qe()+500,$a(t,i)):Ka=Hn(t,i);e:do try{if(Fe!==0&&Re!==null){i=Re;var d=_n;t:switch(Fe){case 1:Fe=0,_n=null,Wa(t,i,d,1);break;case 2:case 9:if(hg(d)){Fe=0,_n=null,n_(i);break}i=function(){Fe!==2&&Fe!==9||Ze!==t||(Fe=7),Ii(t)},d.then(i,i);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:hg(d)?(Fe=0,_n=null,n_(i)):(Fe=0,_n=null,Wa(t,i,d,7));break;case 5:var _=null;switch(Re.tag){case 26:_=Re.memoizedState;case 5:case 27:var b=Re;if(_?B_(_):b.stateNode.complete){Fe=0,_n=null;var I=b.sibling;if(I!==null)Re=I;else{var B=b.return;B!==null?(Re=B,du(B)):Re=null}break t}}Fe=0,_n=null,Wa(t,i,d,5);break;case 6:Fe=0,_n=null,Wa(t,i,d,6);break;case 8:pd(),ut=6;break e;default:throw Error(r(462))}}p2();break}catch(G){Wy(t,G)}while(!0);return Zi=Fr=null,K.H=o,K.A=h,ze=a,Re!==null?0:(Ze=null,xe=0,Oc(),ut)}function p2(){for(;Re!==null&&!ce();)t_(Re)}function t_(t){var i=wy(t.alternate,t,ls);t.memoizedProps=t.pendingProps,i===null?du(t):Re=i}function n_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=vy(a,i,i.pendingProps,i.type,void 0,xe);break;case 11:i=vy(a,i,i.pendingProps,i.type.render,i.ref,xe);break;case 5:Df(i);default:Cy(a,i),i=Re=eg(i,ls),i=wy(a,i,ls)}t.memoizedProps=t.pendingProps,i===null?du(t):Re=i}function Wa(t,i,a,o){Zi=Fr=null,Df(i),za=null,Xo=0;var h=i.return;try{if(i2(t,h,i,a,xe)){ut=1,eu(t,Mn(a,t.current)),Re=null;return}}catch(d){if(h!==null)throw Re=h,d;ut=1,eu(t,Mn(a,t.current)),Re=null;return}i.flags&32768?(Me||o===1?t=!0:Ka||(xe&536870912)!==0?t=!1:(Hs=t=!0,(o===2||o===9||o===3||o===6)&&(o=gn.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(i,t)):du(i)}function du(t){var i=t;do{if((i.flags&32768)!==0){i_(i,Hs);return}t=i.return;var a=a2(i.alternate,i,ls);if(a!==null){Re=a;return}if(i=i.sibling,i!==null){Re=i;return}Re=i=t}while(i!==null);ut===0&&(ut=5)}function i_(t,i){do{var a=o2(t.alternate,t);if(a!==null){a.flags&=32767,Re=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Re=t;return}Re=t=a}while(t!==null);ut=6,Re=null}function s_(t,i,a,o,h,d,_,b,I){t.cancelPendingCommit=null;do mu();while(Dt!==0);if((ze&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=sf,Yh(t,a,d,_,b,I),t===Ze&&(Re=Ze=null,xe=0),Xa=i,Ks=t,cs=a,fd=d,dd=h,Ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,v2(Rn,function(){return c_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=se.p,se.p=2,_=ze,ze|=4;try{l2(t,i,a)}finally{ze=_,se.p=h,K.T=o}}Dt=1,r_(),a_(),o_()}}function r_(){if(Dt===1){Dt=0;var t=Ks,i=Xa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=se.p;se.p=2;var h=ze;ze|=4;try{Uy(i,t);var d=xd,_=Gp(t.containerInfo),b=d.focusedElem,I=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Hp(b.ownerDocument.documentElement,b)){if(I!==null&&Zh(b)){var B=I.start,G=I.end;if(G===void 0&&(G=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(G,b.value.length);else{var X=b.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var H=q.getSelection(),oe=b.textContent.length,pe=Math.min(I.start,oe),$e=I.end===void 0?pe:Math.min(I.end,oe);!H.extend&&pe>$e&&(_=$e,$e=pe,pe=_);var V=Fp(b,pe),O=Fp(b,$e);if(V&&O&&(H.rangeCount!==1||H.anchorNode!==V.node||H.anchorOffset!==V.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var z=X.createRange();z.setStart(V.node,V.offset),H.removeAllRanges(),pe>$e?(H.addRange(z),H.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),H.addRange(z))}}}}for(X=[],H=b;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Y=X[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ru=!!Cd,xd=Cd=null}finally{ze=h,se.p=o,K.T=a}}t.current=i,Dt=2}}function a_(){if(Dt===2){Dt=0;var t=Ks,i=Xa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=se.p;se.p=2;var h=ze;ze|=4;try{jy(t,i.alternate,i)}finally{ze=h,se.p=o,K.T=a}}Dt=3}}function o_(){if(Dt===4||Dt===3){Dt=0,ge();var t=Ks,i=Xa,a=cs,o=Ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Dt=5:(Dt=0,Xa=Ks=null,l_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Qs=null),Qi(a),i=i.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Fn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=K.T,h=se.p,se.p=2,K.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];d(b.value,{componentStack:b.stack})}}finally{K.T=i,se.p=h}}(cs&3)!==0&&mu(),Ii(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===md?fl++:(fl=0,md=t):fl=0,dl(0)}}function l_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Ko(i)))}function mu(){return r_(),a_(),o_(),c_()}function c_(){if(Dt!==5)return!1;var t=Ks,i=fd;fd=0;var a=Qi(cs),o=K.T,h=se.p;try{se.p=32>a?32:a,K.T=null,a=dd,dd=null;var d=Ks,_=cs;if(Dt=0,Xa=Ks=null,cs=0,(ze&6)!==0)throw Error(r(331));var b=ze;if(ze|=4,Hy(d.current),By(d,d.current,_,a),ze=b,dl(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Fn,d)}catch{}return!0}finally{se.p=h,K.T=o,l_(t,i)}}function u_(t,i,a){i=Mn(a,i),i=Qf(t.stateNode,i,2),t=zs(t,i,2),t!==null&&(Rr(t,2),Ii(t))}function He(t,i,a){if(t.tag===3)u_(t,t,a);else for(;i!==null;){if(i.tag===3){u_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qs===null||!Qs.has(o))){t=Mn(a,t),a=hy(2),o=zs(i,a,2),o!==null&&(fy(a,o,i,t),Rr(o,2),Ii(o));break}}i=i.return}}function yd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new h2;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(cd=!0,h.add(a),t=g2.bind(null,t,i,a),i.then(t,t))}function g2(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ze===t&&(xe&a)===a&&(ut===4||ut===3&&(xe&62914560)===xe&&300>Qe()-lu?(ze&2)===0&&$a(t,0):ud|=a,Ya===xe&&(Ya=0)),Ii(t)}function h_(t,i){i===0&&(i=uc()),t=zr(t,i),t!==null&&(Rr(t,i),Ii(t))}function y2(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),h_(t,a)}function _2(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),h_(t,a)}function v2(t,i){return ft(t,i)}var pu=null,Za=null,_d=!1,gu=!1,vd=!1,Xs=0;function Ii(t){t!==Za&&t.next===null&&(Za===null?pu=Za=t:Za=Za.next=t),gu=!0,_d||(_d=!0,T2())}function dl(t,i){if(!vd&&gu){vd=!0;do for(var a=!1,o=pu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,b=o.pingedLanes;d=(1<<31-dt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,p_(o,d))}else d=xe,d=hi(o,o===Ze?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Hn(o,d)||(a=!0,p_(o,d));o=o.next}while(a);vd=!1}}function E2(){f_()}function f_(){gu=_d=!1;var t=0;Xs!==0&&D2()&&(t=Xs);for(var i=Qe(),a=null,o=pu;o!==null;){var h=o.next,d=d_(o,i);d===0?(o.next=null,a===null?pu=h:a.next=h,h===null&&(Za=a)):(a=o,(t!==0||(d&3)!==0)&&(gu=!0)),o=h}Dt!==0&&Dt!==5||dl(t),Xs!==0&&(Xs=0)}function d_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-dt(d),b=1<<_,I=h[_];I===-1?((b&a)===0||(b&o)!==0)&&(h[_]=Kh(b,i)):I<=i&&(t.expiredLanes|=b),d&=~b}if(i=Ze,a=xe,a=hi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&qn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Hn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&qn(o),Qi(a)){case 2:case 8:a=Gi;break;case 32:a=Rn;break;case 268435456:a=Sr;break;default:a=Rn}return o=m_.bind(null,t),a=ft(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&qn(o),t.callbackPriority=2,t.callbackNode=null,2}function m_(t,i){if(Dt!==0&&Dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(mu()&&t.callbackNode!==a)return null;var o=xe;return o=hi(t,t===Ze?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Xy(t,o,i),d_(t,Qe()),t.callbackNode!=null&&t.callbackNode===a?m_.bind(null,t):null)}function p_(t,i){if(mu())return null;Xy(t,i,!0)}function T2(){M2(function(){(ze&6)!==0?ft(Hi,E2):f_()})}function Ed(){if(Xs===0){var t=La;t===0&&(t=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Xs=t}return Xs}function g_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ba(""+t)}function y_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function b2(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=g_((h[jt]||null).action),_=o.submitter;_&&(i=(i=_[jt]||null)?g_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new bi("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Xs!==0){var I=_?y_(h,_):new FormData(h);zf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(b.preventDefault(),I=_?y_(h,_):new FormData(h),zf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var Td=0;Td<nf.length;Td++){var bd=nf[Td],A2=bd.toLowerCase(),S2=bd[0].toUpperCase()+bd.slice(1);Zn(A2,"on"+S2)}Zn(Yp,"onAnimationEnd"),Zn(Xp,"onAnimationIteration"),Zn($p,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(zT,"onTransitionRun"),Zn(BT,"onTransitionStart"),Zn(qT,"onTransitionCancel"),Zn(Wp,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function __(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var _=o.length-1;0<=_;_--){var b=o[_],I=b.instance,B=b.currentTarget;if(b=b.listener,I!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(G){Dc(G)}h.currentTarget=null,d=I}else for(_=0;_<o.length;_++){if(b=o[_],I=b.instance,B=b.currentTarget,b=b.listener,I!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(G){Dc(G)}h.currentTarget=null,d=I}}}}function Ce(t,i){var a=i[ya];a===void 0&&(a=i[ya]=new Set);var o=t+"__bubble";a.has(o)||(v_(i,t,2,!1),a.add(o))}function Ad(t,i,a){var o=0;i&&(o|=4),v_(a,t,o,i)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Sd(t){if(!t[yu]){t[yu]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(w2.has(a)||Ad(a,!1,t),Ad(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[yu]||(i[yu]=!0,Ad("selectionchange",!1,i))}}function v_(t,i,a,o){switch(Y_(i)){case 2:var h=J2;break;case 8:h=eb;break;default:h=Ud}a=h.bind(null,i,a,t),h=void 0,!Or||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function wd(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=pi(b),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){o=d=_;continue e}b=b.parentNode}}o=o.return}Ns(function(){var B=d,G=In(a),X=[];e:{var q=Zp.get(t);if(q!==void 0){var H=bi,oe=t;switch(t){case"keypress":if(jr(a)===0)break e;case"keydown":case"keyup":H=xc;break;case"focusin":oe="focus",H=kr;break;case"focusout":oe="blur",H=kr;break;case"beforeblur":case"afterblur":H=kr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=g;break;case Yp:case Xp:case $p:H=Tc;break;case Wp:H=A;break;case"scroll":case"scrollend":H=Po;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Xi;break;case"toggle":case"beforetoggle":H=Te}var pe=(i&4)!==0,$e=!pe&&(t==="scroll"||t==="scrollend"),V=pe?q!==null?q+"Capture":null:q;pe=[];for(var O=B,z;O!==null;){var Y=O;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||V===null||(Y=Yn(O,V),Y!=null&&pe.push(pl(O,Y,z))),$e)break;O=O.return}0<pe.length&&(q=new H(q,oe,null,a,G),X.push({event:q,listeners:pe}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Vo&&(oe=a.relatedTarget||a.fromElement)&&(pi(oe)||oe[di]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(oe=a.relatedTarget||a.toElement,H=B,oe=oe?pi(oe):null,oe!==null&&($e=c(oe),pe=oe.tag,oe!==$e||pe!==5&&pe!==27&&pe!==6)&&(oe=null)):(H=null,oe=B),H!==oe)){if(pe=Uo,Y="onMouseLeave",V="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Xi,Y="onPointerLeave",V="onPointerEnter",O="pointer"),$e=H==null?q:fn(H),z=oe==null?q:fn(oe),q=new pe(Y,O+"leave",H,a,G),q.target=$e,q.relatedTarget=z,Y=null,pi(G)===B&&(pe=new pe(V,O+"enter",oe,a,G),pe.target=z,pe.relatedTarget=$e,Y=pe),$e=Y,H&&oe)t:{for(pe=R2,V=H,O=oe,z=0,Y=V;Y;Y=pe(Y))z++;Y=0;for(var de=O;de;de=pe(de))Y++;for(;0<z-Y;)V=pe(V),z--;for(;0<Y-z;)O=pe(O),Y--;for(;z--;){if(V===O||O!==null&&V===O.alternate){pe=V;break t}V=pe(V),O=pe(O)}pe=null}else pe=null;H!==null&&E_(X,q,H,pe,!1),oe!==null&&$e!==null&&E_(X,$e,oe,pe,!0)}}e:{if(q=B?fn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var Le=Lp;else if(Vp(q))if(Pp)Le=LT;else{Le=VT;var ue=jT}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Ta(B.elementType)&&(Le=Lp):Le=kT;if(Le&&(Le=Le(t,B))){kp(X,Le,a,G);break e}ue&&ue(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Oo(q,"number",q.value)}switch(ue=B?fn(B):window,t){case"focusin":(Vp(ue)||ue.contentEditable==="true")&&(Ia=ue,Jh=B,Ho=null);break;case"focusout":Ho=Jh=Ia=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,Qp(X,a,G);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":Qp(X,a,G)}var Se;if(Ue)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else xa?Lr(t,a)&&(Ie="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(wi&&a.locale!=="ko"&&(xa||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&xa&&(Se=Lo()):(Ti=G,ko="value"in Ti?Ti.value:Ti.textContent,xa=!0)),ue=_u(B,Ie),0<ue.length&&(Ie=new Si(Ie,t,null,a,G),X.push({event:Ie,listeners:ue}),Se?Ie.data=Se:(Se=Ca(a),Se!==null&&(Ie.data=Se)))),(Se=Dn?NT(t,a):DT(t,a))&&(Ie=_u(B,"onBeforeInput"),0<Ie.length&&(ue=new Si("onBeforeInput","beforeinput",null,a,G),X.push({event:ue,listeners:Ie}),ue.data=Se)),b2(X,t,B,a,G)}__(X,i)})}function pl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function _u(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Yn(t,a),h!=null&&o.unshift(pl(t,h,d)),h=Yn(t,i),h!=null&&o.push(pl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function R2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function E_(t,i,a,o,h){for(var d=i._reactName,_=[];a!==null&&a!==o;){var b=a,I=b.alternate,B=b.stateNode;if(b=b.tag,I!==null&&I===o)break;b!==5&&b!==26&&b!==27||B===null||(I=B,h?(B=Yn(a,d),B!=null&&_.unshift(pl(a,B,I))):h||(B=Yn(a,d),B!=null&&_.push(pl(a,B,I)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var C2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function T_(t){return(typeof t=="string"?t:""+t).replace(C2,`
`).replace(x2,"")}function b_(t,i){return i=T_(i),T_(t)===i}function Xe(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||nn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&nn(t,""+o);break;case"className":dn(t,"class",o);break;case"tabIndex":dn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(t,a,o);break;case"style":jo(t,o,d);break;case"data":if(i!=="object"){dn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ba(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ba(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Kn);break;case"onScroll":o!=null&&Ce("scroll",t);break;case"onScrollEnd":o!=null&&Ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ba(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ce("beforetoggle",t),Ce("toggle",t),va(t,"popover",o);break;case"xlinkActuate":At(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":At(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":At(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":At(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":At(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":At(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":At(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":At(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":At(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":va(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_c.get(a)||a,va(t,a,o))}}function Rd(t,i,a,o,h,d){switch(a){case"style":jo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?nn(t,o):(typeof o=="number"||typeof o=="bigint")&&nn(t,""+o);break;case"onScroll":o!=null&&Ce("scroll",t);break;case"onScrollEnd":o!=null&&Ce("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[jt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):va(t,a,o)}}}function Ft(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",t),Ce("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,d,_,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),o&&Xe(t,i,"src",a.src,a,null);return;case"input":Ce("invalid",t);var b=d=_=h=null,I=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":_=G;break;case"checked":I=G;break;case"defaultChecked":B=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Xe(t,i,o,G,a,null)}}pc(t,d,b,I,B,_,h,!1);return;case"select":Ce("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:Xe(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!o,i!=null?Rs(t,!!o,i,!1):a!=null&&Rs(t,!!o,a,!0);return;case"textarea":Ce("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Xe(t,i,_,b,a,null)}Cs(t,o,h,d);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Xe(t,i,I,o,a,null)}return;case"dialog":Ce("beforetoggle",t),Ce("toggle",t),Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":Ce("load",t);break;case"video":case"audio":for(o=0;o<ml.length;o++)Ce(ml[o],t);break;case"image":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"embed":case"source":case"link":Ce("error",t),Ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Xe(t,i,B,o,a,null)}return;default:if(Ta(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Rd(t,i,G,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&Xe(t,i,b,o,a,null))}function I2(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,I=null,B=null,G=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=X;default:o.hasOwnProperty(H)||Xe(t,i,H,null,o,X)}}for(var q in o){var H=o[q];if(X=a[q],o.hasOwnProperty(q)&&(H!=null||X!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==X&&Xe(t,i,q,H,o,X)}}Ea(t,_,b,I,B,G,d,h);return;case"select":H=_=b=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":H=I;default:o.hasOwnProperty(d)||Xe(t,i,d,null,o,I)}for(h in o)if(d=o[h],I=a[h],o.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==I&&Xe(t,i,h,d,o,I)}i=b,a=_,o=H,q!=null?Rs(t,!!a,q,!1):!!o!=!!a&&(i!=null?Rs(t,!!a,i,!0):Rs(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Xe(t,i,b,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Xe(t,i,_,h,o,d)}gc(t,q,H);return;case"option":for(var oe in a)if(q=a[oe],a.hasOwnProperty(oe)&&q!=null&&!o.hasOwnProperty(oe))switch(oe){case"selected":t.selected=!1;break;default:Xe(t,i,oe,null,o,q)}for(I in o)if(q=o[I],H=a[I],o.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Xe(t,i,I,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)q=a[pe],a.hasOwnProperty(pe)&&q!=null&&!o.hasOwnProperty(pe)&&Xe(t,i,pe,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Xe(t,i,B,q,o,H)}return;default:if(Ta(i)){for(var $e in a)q=a[$e],a.hasOwnProperty($e)&&q!==void 0&&!o.hasOwnProperty($e)&&Rd(t,i,$e,void 0,o,q);for(G in o)q=o[G],H=a[G],!o.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Rd(t,i,G,q,o,H);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!o.hasOwnProperty(V)&&Xe(t,i,V,null,o,q);for(X in o)q=o[X],H=a[X],!o.hasOwnProperty(X)||q===H||q==null&&H==null||Xe(t,i,X,q,o,H)}function A_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function N2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&A_(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var I=a[o],B=I.startTime;if(B>b)break;var G=I.transferSize,X=I.initiatorType;G&&A_(X)&&(I=I.responseEnd,_+=G*(I<b?1:(b-B)/(I-B)))}if(--o,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cd=null,xd=null;function vu(t){return t.nodeType===9?t:t.ownerDocument}function S_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Id(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nd=null;function D2(){var t=window.event;return t&&t.type==="popstate"?t===Nd?!1:(Nd=t,!0):(Nd=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(t){return C_.resolve(null).then(t).catch(j2)}:R_;function j2(t){setTimeout(function(){throw t})}function $s(t){return t==="head"}function x_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),no(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")gl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,gl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[mi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&gl(t.ownerDocument.body);a=h}while(a);no(i)}function I_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Dd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dd(a),_a(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function V2(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[mi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Pn(t.nextSibling),t===null)break}return null}function k2(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pn(t.nextSibling),t===null))return null;return t}function N_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Pn(t.nextSibling),t===null))return null;return t}function Od(t){return t.data==="$?"||t.data==="$~"}function Md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function L2(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Pn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var jd=null;function D_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Pn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function O_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function M_(t,i,a){switch(i=vu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function gl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);_a(t)}var Un=new Map,j_=new Set;function Eu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var us=se.d;se.d={f:P2,r:U2,D:z2,C:B2,L:q2,m:F2,X:G2,S:H2,M:Q2};function P2(){var t=us.f(),i=hu();return t||i}function U2(t){var i=xn(t);i!==null&&i.tag===5&&i.type==="form"?Wg(i):us.r(t)}var Ja=typeof document>"u"?null:document;function V_(t,i,a){var o=Ja;if(o&&typeof i=="string"&&i){var h=tn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),j_.has(h)||(j_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ft(i,"link",t),bt(i),o.head.appendChild(i)))}}function z2(t){us.D(t),V_("dns-prefetch",t,null)}function B2(t,i){us.C(t,i),V_("preconnect",t,i)}function q2(t,i,a){us.L(t,i,a);var o=Ja;if(o&&t&&i){var h='link[rel="preload"][as="'+tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+tn(a.imageSizes)+'"]')):h+='[href="'+tn(t)+'"]';var d=h;switch(i){case"style":d=eo(t);break;case"script":d=to(t)}Un.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Un.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(yl(d))||i==="script"&&o.querySelector(_l(d))||(i=o.createElement("link"),Ft(i,"link",t),bt(i),o.head.appendChild(i)))}}function F2(t,i){us.m(t,i);var a=Ja;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+tn(o)+'"][href="'+tn(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=to(t)}if(!Un.has(d)&&(t=S({rel:"modulepreload",href:t},i),Un.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(_l(d)))return}o=a.createElement("link"),Ft(o,"link",t),bt(o),a.head.appendChild(o)}}}function H2(t,i,a){us.S(t,i,a);var o=Ja;if(o&&t){var h=gi(o).hoistableStyles,d=eo(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(yl(d)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Un.get(d))&&Vd(t,a);var I=_=o.createElement("link");bt(I),Ft(I,"link",t),I._p=new Promise(function(B,G){I.onload=B,I.onerror=G}),I.addEventListener("load",function(){b.loading|=1}),I.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Tu(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function G2(t,i){us.X(t,i);var a=Ja;if(a&&t){var o=gi(a).hoistableScripts,h=to(t),d=o.get(h);d||(d=a.querySelector(_l(h)),d||(t=S({src:t,async:!0},i),(i=Un.get(h))&&kd(t,i),d=a.createElement("script"),bt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Q2(t,i){us.M(t,i);var a=Ja;if(a&&t){var o=gi(a).hoistableScripts,h=to(t),d=o.get(h);d||(d=a.querySelector(_l(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Un.get(h))&&kd(t,i),d=a.createElement("script"),bt(d),Ft(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function k_(t,i,a,o){var h=(h=en.current)?Eu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=eo(a.href),a=gi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var d=gi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(yl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||K2(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(a),a=gi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function eo(t){return'href="'+tn(t)+'"'}function yl(t){return'link[rel="stylesheet"]['+t+"]"}function L_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function K2(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ft(i,"link",a),bt(i),t.head.appendChild(i))}function to(t){return'[src="'+tn(t)+'"]'}function _l(t){return"script[async]"+t}function P_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+tn(a.href)+'"]');if(o)return i.instance=o,bt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),bt(o),Ft(o,"style",h),Tu(o,a.precedence,t),i.instance=o;case"stylesheet":h=eo(a.href);var d=t.querySelector(yl(h));if(d)return i.state.loading|=4,i.instance=d,bt(d),d;o=L_(a),(h=Un.get(h))&&Vd(o,h),d=(t.ownerDocument||t).createElement("link"),bt(d);var _=d;return _._p=new Promise(function(b,I){_.onload=b,_.onerror=I}),Ft(d,"link",o),i.state.loading|=4,Tu(d,a.precedence,t),i.instance=d;case"script":return d=to(a.src),(h=t.querySelector(_l(d)))?(i.instance=h,bt(h),h):(o=a,(h=Un.get(d))&&(o=S({},a),kd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),Ft(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Tu(o,a.precedence,t));return i.instance}function Tu(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Vd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function kd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var bu=null;function U_(t,i,a){if(bu===null){var o=new Map,h=bu=new Map;h.set(a,o)}else h=bu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[mi]||d[Tt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=o.get(_);b?b.push(d):o.set(_,[d])}}return o}function z_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Y2(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function B_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function X2(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=eo(o.href),d=i.querySelector(yl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Au.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,bt(d);return}d=i.ownerDocument||i,o=L_(o),(h=Un.get(h))&&Vd(o,h),d=d.createElement("link"),bt(d);var _=d;_._p=new Promise(function(b,I){_.onload=b,_.onerror=I}),Ft(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Au.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Ld=0;function $2(t,i){return t.stylesheets&&t.count===0&&wu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&wu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Ld===0&&(Ld=62500*N2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&wu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Ld?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Au(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Su=null;function wu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Su=new Map,i.forEach(W2,t),Su=null,Au.call(t))}function W2(t,i){if(!(i.state.loading&4)){var a=Su.get(t);if(a)var o=a.get(null);else{a=new Map,Su.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Au.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var vl={$$typeof:W,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Z2(t,i,a,o,h,d,_,b,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function q_(t,i,a,o,h,d,_,b,I,B,G,X){return t=new Z2(t,i,a,_,I,B,G,X,b),i=1,d===!0&&(i|=24),d=pn(3,null,null,i),t.current=d,d.stateNode=t,i=gf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Ef(d),t}function F_(t){return t?(t=Oa,t):Oa}function H_(t,i,a,o,h,d){h=F_(h),o.context===null?o.context=h:o.pendingContext=h,o=Us(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=zs(t,o,i),a!==null&&(ln(a,t,i),Wo(a,t,i))}function G_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Pd(t,i){G_(t,i),(t=t.alternate)&&G_(t,i)}function Q_(t){if(t.tag===13||t.tag===31){var i=zr(t,67108864);i!==null&&ln(i,t,67108864),Pd(t,67108864)}}function K_(t){if(t.tag===13||t.tag===31){var i=En();i=xr(i);var a=zr(t,i);a!==null&&ln(a,t,i),Pd(t,i)}}var Ru=!0;function J2(t,i,a,o){var h=K.T;K.T=null;var d=se.p;try{se.p=2,Ud(t,i,a,o)}finally{se.p=d,K.T=h}}function eb(t,i,a,o){var h=K.T;K.T=null;var d=se.p;try{se.p=8,Ud(t,i,a,o)}finally{se.p=d,K.T=h}}function Ud(t,i,a,o){if(Ru){var h=zd(o);if(h===null)wd(t,i,o,Cu,a),X_(t,o);else if(nb(h,t,i,a,o))o.stopPropagation();else if(X_(t,o),i&4&&-1<tb.indexOf(t)){for(;h!==null;){var d=xn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ui(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var I=1<<31-dt(_);b.entanglements[1]|=I,_&=~I}Ii(d),(ze&6)===0&&(cu=Qe()+500,dl(0))}}break;case 31:case 13:b=zr(d,2),b!==null&&ln(b,d,2),hu(),Pd(d,2)}if(d=zd(o),d===null&&wd(t,i,o,Cu,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else wd(t,i,o,null,a)}}function zd(t){return t=In(t),Bd(t)}var Cu=null;function Bd(t){if(Cu=null,t=pi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Cu=t,null}function Y_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case Hi:return 2;case Gi:return 8;case Rn:case pa:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var qd=!1,Ws=null,Zs=null,Js=null,El=new Map,Tl=new Map,er=[],tb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(t,i){switch(t){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":El.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(i.pointerId)}}function bl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=xn(i),i!==null&&Q_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function nb(t,i,a,o,h){switch(i){case"focusin":return Ws=bl(Ws,t,i,a,o,h),!0;case"dragenter":return Zs=bl(Zs,t,i,a,o,h),!0;case"mouseover":return Js=bl(Js,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return El.set(d,bl(El.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,Tl.set(d,bl(Tl.get(d)||null,t,i,a,o,h)),!0}return!1}function $_(t){var i=pi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Gn(t.priority,function(){K_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Gn(t.priority,function(){K_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xu(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=zd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Vo=o,a.target.dispatchEvent(o),Vo=null}else return i=xn(a),i!==null&&Q_(i),t.blockedOn=a,!1;i.shift()}return!0}function W_(t,i,a){xu(t)&&a.delete(i)}function ib(){qd=!1,Ws!==null&&xu(Ws)&&(Ws=null),Zs!==null&&xu(Zs)&&(Zs=null),Js!==null&&xu(Js)&&(Js=null),El.forEach(W_),Tl.forEach(W_)}function Iu(t,i){t.blockedOn===i&&(t.blockedOn=null,qd||(qd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ib)))}var Nu=null;function Z_(t){Nu!==t&&(Nu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nu===t&&(Nu=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Bd(o||a)===null)continue;break}var d=xn(a);d!==null&&(t.splice(i,3),i-=3,zf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function no(t){function i(I){return Iu(I,t)}Ws!==null&&Iu(Ws,t),Zs!==null&&Iu(Zs,t),Js!==null&&Iu(Js,t),El.forEach(i),Tl.forEach(i);for(var a=0;a<er.length;a++){var o=er[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)$_(a),a.blockedOn===null&&er.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[jt]||null;if(typeof d=="function")_||Z_(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[jt]||null)b=_.formAction;else if(Bd(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),Z_(a)}}}function J_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Fd(t){this._internalRoot=t}Du.prototype.render=Fd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=En();H_(a,o,t,i,null,null)},Du.prototype.unmount=Fd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;H_(t.current,2,null,t,null,null),hu(),i[di]=null}};function Du(t){this._internalRoot=t}Du.prototype.unstable_scheduleHydration=function(t){if(t){var i=hc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<er.length&&i!==0&&i<er[a].priority;a++);er.splice(a,0,t),a===0&&$_(t)}};var ev=e.version;if(ev!=="19.2.0")throw Error(r(527,ev,"19.2.0"));se.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=E(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var sb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{Fn=Ou.inject(sb),Pt=Ou}catch{}}return Sl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=oy,d=ly,_=cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=q_(t,1,!1,null,null,a,o,null,h,d,_,J_),t[di]=i.current,Sd(t),new Fd(i)},Sl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=oy,_=ly,b=cy,I=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),i=q_(t,1,!0,i,a??null,o,h,I,d,_,b,J_),i.context=F_(null),a=i.current,o=En(),o=xr(o),h=Us(o),h.callback=null,zs(a,h,o),a=o,i.current.lanes=a,Rr(i,a),Ii(i),t[di]=i.current,Sd(t),new Du(i)},Sl.version="19.2.0",Sl}var av;function pb(){if(av)return Gd.exports;av=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gd.exports=mb(),Gd.exports}var gb=pb();const yb=()=>{};var ov={};const H0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},_b=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],f=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},G0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,E=y?s[l+2]:0,T=c>>2,S=(c&3)<<4|p>>4;let R=(p&15)<<2|E>>6,U=E&63;y||(U=64,f||(R=64)),r.push(n[T],n[S],n[R],n[U])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(H0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):_b(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const E=l<s.length?n[s.charAt(l)]:64;++l;const S=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||E==null||S==null)throw new vb;const R=c<<2|p>>4;if(r.push(R),E!==64){const U=p<<4&240|E>>2;if(r.push(U),S!==64){const Q=E<<6&192|S;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class vb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Eb=function(s){const e=H0(s);return G0.encodeByteArray(e,!0)},Wu=function(s){return Eb(s).replace(/\./g,"")},Q0=function(s){try{return G0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const bb=()=>Tb().__FIREBASE_DEFAULTS__,Ab=()=>{if(typeof process>"u"||typeof ov>"u")return;const s=ov.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Sb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Q0(s[1]);return e&&JSON.parse(e)},bh=()=>{try{return yb()||bb()||Ab()||Sb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},K0=s=>bh()?.emulatorHosts?.[s],Y0=s=>{const e=K0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X0=()=>bh()?.config,$0=s=>bh()?.[`_${s}`];class wb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function ca(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vm(s){return(await fetch(s,{credentials:"include"})).ok}function W0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Wu(JSON.stringify(n)),Wu(JSON.stringify(f)),""].join(".")}const Dl={};function Rb(){const s={prod:[],emulator:[]};for(const e of Object.keys(Dl))Dl[e]?s.emulator.push(e):s.prod.push(e);return s}function Cb(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let lv=!1;function km(s,e){if(typeof window>"u"||typeof document>"u"||!ca(window.location.host)||Dl[s]===e||Dl[s]||lv)return;Dl[s]=e;function n(R){return`__firebase__banner__${R}`}const r="__firebase__banner",c=Rb().prod.length>0;function f(){const R=document.getElementById(r);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function y(R,U){R.setAttribute("width","24"),R.setAttribute("id",U),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function E(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{lv=!0,f()},R}function T(R,U){R.setAttribute("id",U),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function S(){const R=Cb(r),U=n("text"),Q=document.getElementById(U)||document.createElement("span"),J=n("learnmore"),k=document.getElementById(J)||document.createElement("a"),P=n("preprendIcon"),ee=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const W=R.element;p(W),T(k,J);const te=E();y(ee,P),W.append(ee,Q,k,te),document.body.appendChild(W)}c?(Q.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function Ib(){const s=bh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Db(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Ob(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mb(){const s=$t();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function jb(){return!Ib()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vb(){try{return typeof indexedDB=="object"}catch{return!1}}function kb(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const Lb="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Lb,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Pb(c,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Bi(l,p,r)}}function Pb(s,e){return s.replace(Ub,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const Ub=/\{\$([^}]+)}/g;function zb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ia(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],f=e[l];if(cv(c)&&cv(f)){if(!ia(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function cv(s){return s!==null&&typeof s=="object"}function Kl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Rl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Bb(s,e){const n=new qb(s,e);return n.subscribe.bind(n)}class qb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Fb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Yd),l.error===void 0&&(l.error=Yd),l.complete===void 0&&(l.complete=Yd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fb(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Yd(){}function _t(s){return s&&s._delegate?s._delegate:s}class fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jr="[DEFAULT]";class Hb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qb(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gb(s){return s===Jr?void 0:s}function Qb(s){return s.instantiationMode==="EAGER"}class Kb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ne;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ne||(Ne={}));const Yb={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Xb=Ne.INFO,$b={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Wb=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=$b[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lm{constructor(e){this.name=e,this._logLevel=Xb,this._logHandler=Wb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const Zb=(s,e)=>e.some(n=>s instanceof n);let uv,hv;function Jb(){return uv||(uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z0=new WeakMap,om=new WeakMap,J0=new WeakMap,Xd=new WeakMap,Pm=new WeakMap;function tA(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(lr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Z0.set(n,s)}).catch(()=>{}),Pm.set(e,s),e}function nA(s){if(om.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});om.set(s,e)}let lm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return om.get(s);if(e==="objectStoreNames")return s.objectStoreNames||J0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function iA(s){lm=s(lm)}function sA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call($d(this),e,...n);return J0.set(r,e.sort?e.sort():[e]),lr(r)}:eA().includes(s)?function(...e){return s.apply($d(this),e),lr(Z0.get(this))}:function(...e){return lr(s.apply($d(this),e))}}function rA(s){return typeof s=="function"?sA(s):(s instanceof IDBTransaction&&nA(s),Zb(s,Jb())?new Proxy(s,lm):s)}function lr(s){if(s instanceof IDBRequest)return tA(s);if(Xd.has(s))return Xd.get(s);const e=rA(s);return e!==s&&(Xd.set(s,e),Pm.set(e,s)),e}const $d=s=>Pm.get(s);function aA(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=lr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(lr(f.result),y.oldVersion,y.newVersion,lr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),p}const oA=["get","getKey","getAll","getAllKeys","count"],lA=["put","add","delete","clear"],Wd=new Map;function fv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=lA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||oA.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(p.shift())),(await Promise.all([E[n](...p),l&&y.done]))[0]};return Wd.set(e,c),c}iA(s=>({...s,get:(e,n,r)=>fv(e,n)||s.get(e,n,r),has:(e,n)=>!!fv(e,n)||s.has(e,n)}));class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uA(s){return s.getComponent()?.type==="VERSION"}const cm="@firebase/app",dv="0.14.6";const gs=new Lm("@firebase/app"),hA="@firebase/app-compat",fA="@firebase/analytics-compat",dA="@firebase/analytics",mA="@firebase/app-check-compat",pA="@firebase/app-check",gA="@firebase/auth",yA="@firebase/auth-compat",_A="@firebase/database",vA="@firebase/data-connect",EA="@firebase/database-compat",TA="@firebase/functions",bA="@firebase/functions-compat",AA="@firebase/installations",SA="@firebase/installations-compat",wA="@firebase/messaging",RA="@firebase/messaging-compat",CA="@firebase/performance",xA="@firebase/performance-compat",IA="@firebase/remote-config",NA="@firebase/remote-config-compat",DA="@firebase/storage",OA="@firebase/storage-compat",MA="@firebase/firestore",jA="@firebase/ai",VA="@firebase/firestore-compat",kA="firebase",LA="12.6.0";const um="[DEFAULT]",PA={[cm]:"fire-core",[hA]:"fire-core-compat",[dA]:"fire-analytics",[fA]:"fire-analytics-compat",[pA]:"fire-app-check",[mA]:"fire-app-check-compat",[gA]:"fire-auth",[yA]:"fire-auth-compat",[_A]:"fire-rtdb",[vA]:"fire-data-connect",[EA]:"fire-rtdb-compat",[TA]:"fire-fn",[bA]:"fire-fn-compat",[AA]:"fire-iid",[SA]:"fire-iid-compat",[wA]:"fire-fcm",[RA]:"fire-fcm-compat",[CA]:"fire-perf",[xA]:"fire-perf-compat",[IA]:"fire-rc",[NA]:"fire-rc-compat",[DA]:"fire-gcs",[OA]:"fire-gcs-compat",[MA]:"fire-fst",[VA]:"fire-fst-compat",[jA]:"fire-vertex","fire-js":"fire-js",[kA]:"fire-js-all"};const Zu=new Map,UA=new Map,hm=new Map;function mv(s,e){try{s.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function sa(s){const e=s.name;if(hm.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,s);for(const n of Zu.values())mv(n,s);for(const n of UA.values())mv(n,s);return!0}function Ah(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Tn(s){return s==null?!1:s.settings!==void 0}const zA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new Ql("app","Firebase",zA);class BA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const ua=LA;function e1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:um,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw cr.create("bad-app-name",{appName:String(l)});if(n||(n=X0()),!n)throw cr.create("no-options");const c=Zu.get(l);if(c){if(ia(n,c.options)&&ia(r,c.config))return c;throw cr.create("duplicate-app",{appName:l})}const f=new Kb(l);for(const y of hm.values())f.addComponent(y);const p=new BA(n,r,f);return Zu.set(l,p),p}function Um(s=um){const e=Zu.get(s);if(!e&&s===um&&X0())return e1();if(!e)throw cr.create("no-app",{appName:s});return e}function Di(s,e,n){let r=PA[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(f.join(" "));return}sa(new fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const qA="firebase-heartbeat-database",FA=1,Ll="firebase-heartbeat-store";let Zd=null;function t1(){return Zd||(Zd=aA(qA,FA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(s=>{throw cr.create("idb-open",{originalErrorMessage:s.message})})),Zd}async function HA(s){try{const n=(await t1()).transaction(Ll),r=await n.objectStore(Ll).get(n1(s));return await n.done,r}catch(e){if(e instanceof Bi)gs.warn(e.message);else{const n=cr.create("idb-get",{originalErrorMessage:e?.message});gs.warn(n.message)}}}async function pv(s,e){try{const r=(await t1()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,n1(s)),await r.done}catch(n){if(n instanceof Bi)gs.warn(n.message);else{const r=cr.create("idb-set",{originalErrorMessage:n?.message});gs.warn(r.message)}}}function n1(s){return`${s.name}!${s.options.appId}`}const GA=1024,QA=30;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>QA){const l=$A(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gv(),{heartbeatsToSend:n,unsentEntries:r}=YA(this._heartbeatsCache.heartbeats),l=Wu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return gs.warn(e),""}}}function gv(){return new Date().toISOString().substring(0,10)}function YA(s,e=GA){const n=[];let r=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),yv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),yv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vb()?kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yv(s){return Wu(JSON.stringify({version:2,heartbeats:s})).length}function $A(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function WA(s){sa(new fr("platform-logger",e=>new cA(e),"PRIVATE")),sa(new fr("heartbeat",e=>new KA(e),"PRIVATE")),Di(cm,dv,s),Di(cm,dv,"esm2020"),Di("fire-js","")}WA("");function i1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZA=i1,s1=new Ql("auth","Firebase",i1());const Ju=new Lm("@firebase/auth");function JA(s,...e){Ju.logLevel<=Ne.WARN&&Ju.warn(`Auth (${ua}): ${s}`,...e)}function Bu(s,...e){Ju.logLevel<=Ne.ERROR&&Ju.error(`Auth (${ua}): ${s}`,...e)}function ri(s,...e){throw zm(s,...e)}function Oi(s,...e){return zm(s,...e)}function r1(s,e,n){const r={...ZA(),[e]:n};return new Ql("auth","Firebase",r).create(e,{appName:s.name})}function ms(s){return r1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return s1.create(s,...e)}function ye(s,e,...n){if(!s)throw zm(e,...n)}function fs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Bu(e),new Error(e)}function ys(s,e){s||fs(e)}function fm(){return typeof self<"u"&&self.location?.href||""}function eS(){return _v()==="http:"||_v()==="https:"}function _v(){return typeof self<"u"&&self.location?.protocol||null}function tS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eS()||Db()||"connection"in navigator)?navigator.onLine:!0}function nS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ys(n>e,"Short delay should be less than long delay!"),this.isMobile=xb()||Ob()}get(){return tS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bm(s,e){ys(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class a1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rS=new Yl(3e4,6e4);function Es(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ts(s,e,n,r,l={}){return o1(s,l,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Kl({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const E={method:e,headers:y,...c};return Nb()||(E.referrerPolicy="no-referrer"),s.emulatorConfig&&ca(s.emulatorConfig.host)&&(E.credentials="include"),a1.fetch()(await l1(s,s.config.apiHost,n,p),E)})}async function o1(s,e,n){s._canInitEmulator=!1;const r={...iS,...e};try{const l=new oS(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw ju(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,E]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw ju(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw ju(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw r1(s,T,E);ri(s,T)}}catch(l){if(l instanceof Bi)throw l;ri(s,"network-request-failed",{message:String(l)})}}async function Xl(s,e,n,r,l={}){const c=await Ts(s,e,n,r,l);return"mfaPendingCredential"in c&&ri(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function l1(s,e,n,r){const l=`${e}${n}?${r}`,c=s,f=c.config.emulator?Bm(s.config,l):`${s.config.apiScheme}://${l}`;return sS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function aS(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),rS.get())})}}function ju(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Oi(s,e,r);return l.customData._tokenResponse=n,l}function vv(s){return s!==void 0&&s.enterprise!==void 0}class lS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cS(s,e){return Ts(s,"GET","/v2/recaptchaConfig",Es(s,e))}async function uS(s,e){return Ts(s,"POST","/v1/accounts:delete",e)}async function eh(s,e){return Ts(s,"POST","/v1/accounts:lookup",e)}function Ol(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hS(s,e=!1){const n=_t(s),r=await n.getIdToken(e),l=qm(r);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:r,authTime:Ol(Jd(l.auth_time)),issuedAtTime:Ol(Jd(l.iat)),expirationTime:Ol(Jd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Jd(s){return Number(s)*1e3}function qm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const l=Q0(n);return l?JSON.parse(l):(Bu("Failed to decode base64 JWT payload"),null)}catch(l){return Bu("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Ev(s){const e=qm(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bi&&fS(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function fS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class dS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function th(s){const e=s.auth,n=await s.getIdToken(),r=await Pl(s,eh(e,{idToken:n}));ye(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?c1(l.providerUserInfo):[],f=pS(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,T)}async function mS(s){const e=_t(s);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pS(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function c1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function gS(s,e){const n=await o1(s,{},async()=>{const r=Kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await l1(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&ca(s.emulatorConfig.host)&&(y.credentials="include"),a1.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yS(s,e){return Ts(s,"POST","/v2/accounts:revokeToken",Es(s,e))}class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await gS(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,f=new lo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(ye(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return fs("not implemented")}}function nr(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new dS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new dm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await Pl(this,uS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,E=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:R,isAnonymous:U,providerData:Q,stsTokenManager:J}=n;ye(S&&J,e,"internal-error");const k=lo.fromJSON(this.name,J);ye(typeof S=="string",e,"internal-error"),nr(r,e.name),nr(l,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof U=="boolean",e,"internal-error"),nr(c,e.name),nr(f,e.name),nr(p,e.name),nr(y,e.name),nr(E,e.name),nr(T,e.name);const P=new ni({uid:S,auth:e,email:l,emailVerified:R,displayName:r,isAnonymous:U,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:k,createdAt:E,lastLoginAt:T});return Q&&Array.isArray(Q)&&(P.providerData=Q.map(ee=>({...ee}))),y&&(P._redirectEventId=y),P}static async _fromIdTokenResponse(e,n,r=!1){const l=new lo;l.updateFromServerResponse(n);const c=new ni({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await th(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?c1(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new lo;p.updateFromIdToken(r);const y=new ni({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new dm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,E),y}}const Tv=new Map;function ds(s){ys(s instanceof Function,"Expected a class definition");let e=Tv.get(s);return e?(ys(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Tv.set(s,e),e)}class u1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u1.type="NONE";const bv=u1;function qu(s,e,n){return`firebase:${s}:${e}:${n}`}class co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=qu(this.userKey,l.apiKey,c),this.fullPersistenceKey=qu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await eh(this.auth,{idToken:e}).catch(()=>{});return n?ni._fromGetAccountInfoResponse(this.auth,n,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new co(ds(bv),e,r);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=l[0]||ds(bv);const f=qu(r,e.config.apiKey,e.name);let p=null;for(const E of n)try{const T=await E._get(f);if(T){let S;if(typeof T=="string"){const R=await eh(e,{idToken:T}).catch(()=>{});if(!R)break;S=await ni._fromGetAccountInfoResponse(e,R,T)}else S=ni._fromJSON(e,T);E!==c&&(p=S),c=E;break}}catch{}const y=l.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new co(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async E=>{if(E!==c)try{await E._remove(f)}catch{}})),new co(c,e,r))}}function Av(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g1(e))return"Blackberry";if(y1(e))return"Webos";if(f1(e))return"Safari";if((e.includes("chrome/")||d1(e))&&!e.includes("edge/"))return"Chrome";if(p1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function h1(s=$t()){return/firefox\//i.test(s)}function f1(s=$t()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d1(s=$t()){return/crios\//i.test(s)}function m1(s=$t()){return/iemobile/i.test(s)}function p1(s=$t()){return/android/i.test(s)}function g1(s=$t()){return/blackberry/i.test(s)}function y1(s=$t()){return/webos/i.test(s)}function Fm(s=$t()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function _S(s=$t()){return Fm(s)&&!!window.navigator?.standalone}function vS(){return Mb()&&document.documentMode===10}function _1(s=$t()){return Fm(s)||p1(s)||y1(s)||g1(s)||/windows phone/i.test(s)||m1(s)}function v1(s,e=[]){let n;switch(s){case"Browser":n=Av($t());break;case"Worker":n=`${Av($t())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${r}`}class ES{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function TS(s,e={}){return Ts(s,"GET","/v2/passwordPolicy",Es(s,e))}const bS=6;class AS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??bS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class SS{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new ES(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eh(this,{idToken:e}),r=await ni._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(ms(this));const n=e?_t(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TS(this),n=new AS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yS(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Er(s){return _t(s)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bb(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wS(s){Sh=s}function E1(s){return Sh.loadJS(s)}function RS(){return Sh.recaptchaEnterpriseScript}function CS(){return Sh.gapiScript}function xS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class IS{constructor(){this.enterprise=new NS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const DS="recaptcha-enterprise",T1="NO_RECAPTCHA";class OS{constructor(e){this.type=DS,this.auth=Er(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{cS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const E=new lS(y);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,f(E.siteKey)}}).catch(y=>{p(y)})})}function l(c,f,p){const y=window.grecaptcha;vv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(E=>{f(E)}).catch(()=>{f(T1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IS().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&vv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=RS();y.length!==0&&(y+=p),E1(y).then(()=>{l(p,c,f)}).catch(E=>{f(E)})}}).catch(p=>{f(p)})})}}async function wv(s,e,n,r=!1,l=!1){const c=new OS(s);let f;if(l)f=T1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,E=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function nh(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await wv(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await wv(s,e,n,n==="getOobCode");return r(s,f)}else return Promise.reject(c)})}function MS(s,e){const n=Ah(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(ia(c,e??{}))return l;ri(l,"already-initialized")}return n.initialize({options:e})}function jS(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ds);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function VS(s,e,n){const r=Er(s);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=b1(e),{host:f,port:p}=kS(e),y=p===null?"":`:${p}`,E={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ia(E,r.config.emulator)&&ia(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=E,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ca(f)?(Vm(`${c}//${f}${y}`),km("Auth",!0)):LS()}function b1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function kS(s){const e=b1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:Rv(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:Rv(f)}}}function Rv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function LS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function PS(s,e){return Ts(s,"POST","/v1/accounts:signUp",e)}async function US(s,e){return Xl(s,"POST","/v1/accounts:signInWithPassword",Es(s,e))}async function A1(s,e){return Ts(s,"POST","/v1/accounts:sendOobCode",Es(s,e))}async function zS(s,e){return A1(s,e)}async function BS(s,e){return A1(s,e)}async function qS(s,e){return Xl(s,"POST","/v1/accounts:signInWithEmailLink",Es(s,e))}async function FS(s,e){return Xl(s,"POST","/v1/accounts:signInWithEmailLink",Es(s,e))}class Ul extends Hm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Ul(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ul(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nh(e,n,"signInWithPassword",US);case"emailLink":return qS(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nh(e,r,"signUpPassword",PS);case"emailLink":return FS(e,{idToken:n,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function uo(s,e){return Xl(s,"POST","/v1/accounts:signInWithIdp",Es(s,e))}const HS="http://localhost";class ra extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const f=new ra(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:HS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kl(n)}return e}}function GS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QS(s){const e=wl(Rl(s)).link,n=e?wl(Rl(e)).deep_link_id:null,r=wl(Rl(s)).deep_link_id;return(r?wl(Rl(r)).link:null)||r||n||e||s}class Gm{constructor(e){const n=wl(Rl(e)),r=n.apiKey??null,l=n.oobCode??null,c=GS(n.mode??null);ye(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QS(e);try{return new Gm(n)}catch{return null}}}class vo{constructor(){this.providerId=vo.PROVIDER_ID}static credential(e,n){return Ul._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gm.parseLink(n);return ye(r,"argument-error"),Ul._fromEmailAndCode(e,r.code,r.tenantId)}}vo.PROVIDER_ID="password";vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class S1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $l extends S1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ir extends $l{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";class sr extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ra._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";class rr extends $l{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";class ar extends $l{constructor(){super("twitter.com")}static credential(e,n){return ra._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";async function KS(s,e){return Xl(s,"POST","/v1/accounts:signUp",Es(s,e))}class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await ni._fromIdTokenResponse(e,r,l),f=Cv(r);return new aa({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=Cv(r);return new aa({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function Cv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class ih extends Bi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new ih(e,n,r,l)}}function w1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(s,c,e,r):c})}async function YS(s,e,n=!1){const r=await Pl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return aa._forOperation(s,"link",r)}async function XS(s,e,n=!1){const{auth:r}=s;if(Tn(r.app))return Promise.reject(ms(r));const l="reauthenticate";try{const c=await Pl(s,w1(r,l,e,s),n);ye(c.idToken,r,"internal-error");const f=qm(c.idToken);ye(f,r,"internal-error");const{sub:p}=f;return ye(s.uid===p,r,"user-mismatch"),aa._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),c}}async function R1(s,e,n=!1){if(Tn(s.app))return Promise.reject(ms(s));const r="signIn",l=await w1(s,r,e),c=await aa._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function $S(s,e){return R1(Er(s),e)}async function C1(s){const e=Er(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WS(s,e,n){const r=Er(s);await nh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BS)}async function ZS(s,e,n){if(Tn(s.app))return Promise.reject(ms(s));const r=Er(s),f=await nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&C1(s),y}),p=await aa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function JS(s,e,n){return Tn(s.app)?Promise.reject(ms(s)):$S(_t(s),vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&C1(s),r})}async function ew(s,e){const n=_t(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await zS(n.auth,l);c!==s.email&&await s.reload()}function tw(s,e,n,r){return _t(s).onIdTokenChanged(e,n,r)}function nw(s,e,n){return _t(s).beforeAuthStateChanged(e,n)}function iw(s,e,n,r){return _t(s).onAuthStateChanged(e,n,r)}function x1(s){return _t(s).signOut()}const sh="__sak";class I1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sw=1e3,rw=10;class N1 extends I1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);vS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,rw):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N1.type="LOCAL";const aw=N1;class D1 extends I1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D1.type="SESSION";const O1=D1;function ow(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async E=>E(n.origin,c)),y=await ow(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];function Qm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class lw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const E=Qm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(S){const R=S;if(R.data.eventId===E)switch(R.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(R.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:E,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Mi(){return window}function cw(s){Mi().location.href=s}function M1(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function uw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hw(){return navigator?.serviceWorker?.controller||null}function fw(){return M1()?self:null}const j1="firebaseLocalStorageDb",dw=1,rh="firebaseLocalStorage",V1="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(s,e){return s.transaction([rh],e?"readwrite":"readonly").objectStore(rh)}function mw(){const s=indexedDB.deleteDatabase(j1);return new Wl(s).toPromise()}function mm(){const s=indexedDB.open(j1,dw);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(rh,{keyPath:V1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(rh)?e(r):(r.close(),await mw(),e(await mm()))})})}async function xv(s,e,n){const r=Rh(s,!0).put({[V1]:e,value:n});return new Wl(r).toPromise()}async function pw(s,e){const n=Rh(s,!1).get(e),r=await new Wl(n).toPromise();return r===void 0?null:r.value}function Iv(s,e){const n=Rh(s,!0).delete(e);return new Wl(n).toPromise()}const gw=800,yw=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(fw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uw(),!this.activeServiceWorker)return;this.sender=new lw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await xv(e,sh,"1"),await Iv(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pw(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Rh(l,!1).getAll();return new Wl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const _w=k1;new Yl(3e4,6e4);function vw(s,e){return e?ds(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Km extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ew(s){return R1(s.auth,new Km(s),s.bypassAuthState)}function Tw(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),XS(n,new Km(s),s.bypassAuthState)}async function bw(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),YS(n,new Km(s),s.bypassAuthState)}class L1{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ew;case"linkViaPopup":case"linkViaRedirect":return bw;case"reauthViaPopup":case"reauthViaRedirect":return Tw;default:ri(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Aw=new Yl(2e3,1e4);class oo extends L1{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aw.get())};e()}}oo.currentPopupAction=null;const Sw="pendingRedirect",Fu=new Map;class ww extends L1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const r=await Rw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rw(s,e){const n=Iw(e),r=xw(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function Cw(s,e){Fu.set(s._key(),e)}function xw(s){return ds(s._redirectPersistence)}function Iw(s){return qu(Sw,s.config.apiKey,s.name)}async function Nw(s,e,n=!1){if(Tn(s.app))return Promise.reject(ms(s));const r=Er(s),l=vw(r,e),f=await new ww(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const Dw=600*1e3;class Ow{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!P1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Oi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nv(e))}saveEventToCache(e){this.cachedEventUids.add(Nv(e)),this.lastProcessedEventTime=Date.now()}}function Nv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function P1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Mw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P1(s);default:return!1}}async function jw(s,e={}){return Ts(s,"GET","/v1/projects",e)}const Vw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kw=/^https?/;async function Lw(s){if(s.config.emulator)return;const{authorizedDomains:e}=await jw(s);for(const n of e)try{if(Pw(n))return}catch{}ri(s,"unauthorized-domain")}function Pw(s){const e=fm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!kw.test(n))return!1;if(Vw.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const Uw=new Yl(3e4,6e4);function Dv(){const s=Mi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function zw(s){return new Promise((e,n)=>{function r(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Oi(s,"network-request-failed"))},timeout:Uw.get()})}if(Mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mi().gapi?.load)r();else{const l=xS("iframefcb");return Mi()[l]=()=>{gapi.load?r():n(Oi(s,"network-request-failed"))},E1(`${CS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Hu=null,e})}let Hu=null;function Bw(s){return Hu=Hu||zw(s),Hu}const qw=new Yl(5e3,15e3),Fw="__/auth/iframe",Hw="emulator/auth/iframe",Gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kw(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Bm(e,Hw):`https://${s.config.authDomain}/${Fw}`,r={apiKey:e.apiKey,appName:s.name,v:ua},l=Qw.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Kl(r).slice(1)}`}async function Yw(s){const e=await Bw(s),n=Mi().gapi;return ye(n,s,"internal-error"),e.open({where:document.body,url:Kw(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gw,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=Oi(s,"network-request-failed"),p=Mi().setTimeout(()=>{c(f)},qw.get());function y(){Mi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(f)})}))}const Xw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$w=500,Ww=600,Zw="_blank",Jw="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(s,e,n,r=$w,l=Ww){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...Xw,width:r.toString(),height:l.toString(),top:c,left:f},E=$t().toLowerCase();n&&(p=d1(E)?Zw:n),h1(E)&&(e=e||Jw,y.scrollbars="yes");const T=Object.entries(y).reduce((R,[U,Q])=>`${R}${U}=${Q},`,"");if(_S(E)&&p!=="_self")return tR(e||"",p),new Ov(null);const S=window.open(e||"",p,T);ye(S,s,"popup-blocked");try{S.focus()}catch{}return new Ov(S)}function tR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const nR="__/auth/handler",iR="emulator/auth/handler",sR=encodeURIComponent("fac");async function Mv(s,e,n,r,l,c){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ua,eventId:l};if(e instanceof S1){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",zb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof $l){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),E=y?`#${sR}=${encodeURIComponent(y)}`:"";return`${rR(s)}?${Kl(p).slice(1)}${E}`}function rR({config:s}){return s.emulator?Bm(s,iR):`https://${s.authDomain}/${nR}`}const em="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=Nw,this._overrideRedirectResult=Cw}async _openPopup(e,n,r,l){ys(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Mv(e,n,r,fm(),l);return eR(e,c,Qm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await Mv(e,n,r,fm(),l);return cw(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(ys(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Yw(e),r=new Ow(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(em,{type:em},l=>{const c=l?.[0]?.[em];c!==void 0&&n(!!c),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Lw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _1()||f1()||Fm()}}const oR=aR;var jv="@firebase/auth",Vv="1.11.1";class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uR(s){sa(new fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v1(s)},E=new SS(r,l,c,y);return jS(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sa(new fr("auth-internal",e=>{const n=Er(e.getProvider("auth").getImmediate());return(r=>new lR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(jv,Vv,cR(s)),Di(jv,Vv,"esm2020")}const hR=300,fR=$0("authIdTokenMaxAge")||hR;let kv=null;const dR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fR)return;const l=n?.token;kv!==l&&(kv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function mR(s=Um()){const e=Ah(s,"auth");if(e.isInitialized())return e.getImmediate();const n=MS(s,{popupRedirectResolver:oR,persistence:[_w,aw,O1]}),r=$0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=dR(c.toString());nw(n,f,()=>f(n.currentUser)),tw(n,p=>f(p))}}const l=K0("auth");return l&&VS(n,`http://${l}`),n}function pR(){return document.getElementsByTagName("head")?.[0]??document}wS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=Oi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",pR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uR("Browser");var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ur,U1;(function(){var s;function e(N,w){function C(){}C.prototype=w.prototype,N.F=w.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(M,D,j){for(var x=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)x[Ge-2]=arguments[Ge];return w.prototype[D].apply(M,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,w,C){C||(C=0);const M=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)M[D]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(D=0;D<16;++D)M[D]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=N.g[0],C=N.g[1],D=N.g[2];let j=N.g[3],x;x=w+(j^C&(D^j))+M[0]+3614090360&4294967295,w=C+(x<<7&4294967295|x>>>25),x=j+(D^w&(C^D))+M[1]+3905402710&4294967295,j=w+(x<<12&4294967295|x>>>20),x=D+(C^j&(w^C))+M[2]+606105819&4294967295,D=j+(x<<17&4294967295|x>>>15),x=C+(w^D&(j^w))+M[3]+3250441966&4294967295,C=D+(x<<22&4294967295|x>>>10),x=w+(j^C&(D^j))+M[4]+4118548399&4294967295,w=C+(x<<7&4294967295|x>>>25),x=j+(D^w&(C^D))+M[5]+1200080426&4294967295,j=w+(x<<12&4294967295|x>>>20),x=D+(C^j&(w^C))+M[6]+2821735955&4294967295,D=j+(x<<17&4294967295|x>>>15),x=C+(w^D&(j^w))+M[7]+4249261313&4294967295,C=D+(x<<22&4294967295|x>>>10),x=w+(j^C&(D^j))+M[8]+1770035416&4294967295,w=C+(x<<7&4294967295|x>>>25),x=j+(D^w&(C^D))+M[9]+2336552879&4294967295,j=w+(x<<12&4294967295|x>>>20),x=D+(C^j&(w^C))+M[10]+4294925233&4294967295,D=j+(x<<17&4294967295|x>>>15),x=C+(w^D&(j^w))+M[11]+2304563134&4294967295,C=D+(x<<22&4294967295|x>>>10),x=w+(j^C&(D^j))+M[12]+1804603682&4294967295,w=C+(x<<7&4294967295|x>>>25),x=j+(D^w&(C^D))+M[13]+4254626195&4294967295,j=w+(x<<12&4294967295|x>>>20),x=D+(C^j&(w^C))+M[14]+2792965006&4294967295,D=j+(x<<17&4294967295|x>>>15),x=C+(w^D&(j^w))+M[15]+1236535329&4294967295,C=D+(x<<22&4294967295|x>>>10),x=w+(D^j&(C^D))+M[1]+4129170786&4294967295,w=C+(x<<5&4294967295|x>>>27),x=j+(C^D&(w^C))+M[6]+3225465664&4294967295,j=w+(x<<9&4294967295|x>>>23),x=D+(w^C&(j^w))+M[11]+643717713&4294967295,D=j+(x<<14&4294967295|x>>>18),x=C+(j^w&(D^j))+M[0]+3921069994&4294967295,C=D+(x<<20&4294967295|x>>>12),x=w+(D^j&(C^D))+M[5]+3593408605&4294967295,w=C+(x<<5&4294967295|x>>>27),x=j+(C^D&(w^C))+M[10]+38016083&4294967295,j=w+(x<<9&4294967295|x>>>23),x=D+(w^C&(j^w))+M[15]+3634488961&4294967295,D=j+(x<<14&4294967295|x>>>18),x=C+(j^w&(D^j))+M[4]+3889429448&4294967295,C=D+(x<<20&4294967295|x>>>12),x=w+(D^j&(C^D))+M[9]+568446438&4294967295,w=C+(x<<5&4294967295|x>>>27),x=j+(C^D&(w^C))+M[14]+3275163606&4294967295,j=w+(x<<9&4294967295|x>>>23),x=D+(w^C&(j^w))+M[3]+4107603335&4294967295,D=j+(x<<14&4294967295|x>>>18),x=C+(j^w&(D^j))+M[8]+1163531501&4294967295,C=D+(x<<20&4294967295|x>>>12),x=w+(D^j&(C^D))+M[13]+2850285829&4294967295,w=C+(x<<5&4294967295|x>>>27),x=j+(C^D&(w^C))+M[2]+4243563512&4294967295,j=w+(x<<9&4294967295|x>>>23),x=D+(w^C&(j^w))+M[7]+1735328473&4294967295,D=j+(x<<14&4294967295|x>>>18),x=C+(j^w&(D^j))+M[12]+2368359562&4294967295,C=D+(x<<20&4294967295|x>>>12),x=w+(C^D^j)+M[5]+4294588738&4294967295,w=C+(x<<4&4294967295|x>>>28),x=j+(w^C^D)+M[8]+2272392833&4294967295,j=w+(x<<11&4294967295|x>>>21),x=D+(j^w^C)+M[11]+1839030562&4294967295,D=j+(x<<16&4294967295|x>>>16),x=C+(D^j^w)+M[14]+4259657740&4294967295,C=D+(x<<23&4294967295|x>>>9),x=w+(C^D^j)+M[1]+2763975236&4294967295,w=C+(x<<4&4294967295|x>>>28),x=j+(w^C^D)+M[4]+1272893353&4294967295,j=w+(x<<11&4294967295|x>>>21),x=D+(j^w^C)+M[7]+4139469664&4294967295,D=j+(x<<16&4294967295|x>>>16),x=C+(D^j^w)+M[10]+3200236656&4294967295,C=D+(x<<23&4294967295|x>>>9),x=w+(C^D^j)+M[13]+681279174&4294967295,w=C+(x<<4&4294967295|x>>>28),x=j+(w^C^D)+M[0]+3936430074&4294967295,j=w+(x<<11&4294967295|x>>>21),x=D+(j^w^C)+M[3]+3572445317&4294967295,D=j+(x<<16&4294967295|x>>>16),x=C+(D^j^w)+M[6]+76029189&4294967295,C=D+(x<<23&4294967295|x>>>9),x=w+(C^D^j)+M[9]+3654602809&4294967295,w=C+(x<<4&4294967295|x>>>28),x=j+(w^C^D)+M[12]+3873151461&4294967295,j=w+(x<<11&4294967295|x>>>21),x=D+(j^w^C)+M[15]+530742520&4294967295,D=j+(x<<16&4294967295|x>>>16),x=C+(D^j^w)+M[2]+3299628645&4294967295,C=D+(x<<23&4294967295|x>>>9),x=w+(D^(C|~j))+M[0]+4096336452&4294967295,w=C+(x<<6&4294967295|x>>>26),x=j+(C^(w|~D))+M[7]+1126891415&4294967295,j=w+(x<<10&4294967295|x>>>22),x=D+(w^(j|~C))+M[14]+2878612391&4294967295,D=j+(x<<15&4294967295|x>>>17),x=C+(j^(D|~w))+M[5]+4237533241&4294967295,C=D+(x<<21&4294967295|x>>>11),x=w+(D^(C|~j))+M[12]+1700485571&4294967295,w=C+(x<<6&4294967295|x>>>26),x=j+(C^(w|~D))+M[3]+2399980690&4294967295,j=w+(x<<10&4294967295|x>>>22),x=D+(w^(j|~C))+M[10]+4293915773&4294967295,D=j+(x<<15&4294967295|x>>>17),x=C+(j^(D|~w))+M[1]+2240044497&4294967295,C=D+(x<<21&4294967295|x>>>11),x=w+(D^(C|~j))+M[8]+1873313359&4294967295,w=C+(x<<6&4294967295|x>>>26),x=j+(C^(w|~D))+M[15]+4264355552&4294967295,j=w+(x<<10&4294967295|x>>>22),x=D+(w^(j|~C))+M[6]+2734768916&4294967295,D=j+(x<<15&4294967295|x>>>17),x=C+(j^(D|~w))+M[13]+1309151649&4294967295,C=D+(x<<21&4294967295|x>>>11),x=w+(D^(C|~j))+M[4]+4149444226&4294967295,w=C+(x<<6&4294967295|x>>>26),x=j+(C^(w|~D))+M[11]+3174756917&4294967295,j=w+(x<<10&4294967295|x>>>22),x=D+(w^(j|~C))+M[2]+718787259&4294967295,D=j+(x<<15&4294967295|x>>>17),x=C+(j^(D|~w))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.v=function(N,w){w===void 0&&(w=N.length);const C=w-this.blockSize,M=this.C;let D=this.h,j=0;for(;j<w;){if(D==0)for(;j<=C;)l(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<w;)if(M[D++]=N.charCodeAt(j++),D==this.blockSize){l(this,M),D=0;break}}else for(;j<w;)if(M[D++]=N[j++],D==this.blockSize){l(this,M),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,C=0;C<4;++C)for(let M=0;M<32;M+=8)N[w++]=this.g[C]>>>M&255;return N};function c(N,w){var C=p;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=w(N)}function f(N,w){this.h=w;const C=[];let M=!0;for(let D=N.length-1;D>=0;D--){const j=N[D]|0;M&&j==w||(C[D]=j,M=!1)}this.g=C}var p={};function y(N){return-128<=N&&N<128?c(N,function(w){return new f([w|0],w<0?-1:0)}):new f([N|0],N<0?-1:0)}function E(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return k(E(-N));const w=[];let C=1;for(let M=0;N>=C;M++)w[M]=N/C|0,C*=4294967296;return new f(w,0)}function T(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return k(T(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=E(Math.pow(w,8));let M=S;for(let j=0;j<N.length;j+=8){var D=Math.min(8,N.length-j);const x=parseInt(N.substring(j,j+D),w);D<8?(D=E(Math.pow(w,D)),M=M.j(D).add(E(x))):(M=M.j(C),M=M.add(E(x)))}return M}var S=y(0),R=y(1),U=y(16777216);s=f.prototype,s.m=function(){if(J(this))return-k(this).m();let N=0,w=1;for(let C=0;C<this.g.length;C++){const M=this.i(C);N+=(M>=0?M:4294967296+M)*w,w*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(Q(this))return"0";if(J(this))return"-"+k(this).toString(N);const w=E(Math.pow(N,6));var C=this;let M="";for(;;){const D=te(C,w).g;C=P(C,D.j(w));let j=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=D,Q(C))return j+M;for(;j.length<6;)j="0"+j;M=j+M}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function Q(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function J(N){return N.h==-1}s.l=function(N){return N=P(this,N),J(N)?-1:Q(N)?0:1};function k(N){const w=N.g.length,C=[];for(let M=0;M<w;M++)C[M]=~N.g[M];return new f(C,~N.h).add(R)}s.abs=function(){return J(this)?k(this):this},s.add=function(N){const w=Math.max(this.g.length,N.g.length),C=[];let M=0;for(let D=0;D<=w;D++){let j=M+(this.i(D)&65535)+(N.i(D)&65535),x=(j>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);M=x>>>16,j&=65535,x&=65535,C[D]=x<<16|j}return new f(C,C[C.length-1]&-2147483648?-1:0)};function P(N,w){return N.add(k(w))}s.j=function(N){if(Q(this)||Q(N))return S;if(J(this))return J(N)?k(this).j(k(N)):k(k(this).j(N));if(J(N))return k(this.j(k(N)));if(this.l(U)<0&&N.l(U)<0)return E(this.m()*N.m());const w=this.g.length+N.g.length,C=[];for(var M=0;M<2*w;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(let D=0;D<N.g.length;D++){const j=this.i(M)>>>16,x=this.i(M)&65535,Ge=N.i(D)>>>16,st=N.i(D)&65535;C[2*M+2*D]+=x*st,ee(C,2*M+2*D),C[2*M+2*D+1]+=j*st,ee(C,2*M+2*D+1),C[2*M+2*D+1]+=x*Ge,ee(C,2*M+2*D+1),C[2*M+2*D+2]+=j*Ge,ee(C,2*M+2*D+2)}for(N=0;N<w;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=w;N<2*w;N++)C[N]=0;return new f(C,0)};function ee(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function W(N,w){this.g=N,this.h=w}function te(N,w){if(Q(w))throw Error("division by zero");if(Q(N))return new W(S,S);if(J(N))return w=te(k(N),w),new W(k(w.g),k(w.h));if(J(w))return w=te(N,k(w)),new W(k(w.g),w.h);if(N.g.length>30){if(J(N)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var C=R,M=w;M.l(N)<=0;)C=ne(C),M=ne(M);var D=le(C,1),j=le(M,1);for(M=le(M,2),C=le(C,2);!Q(M);){var x=j.add(M);x.l(N)<=0&&(D=D.add(C),j=x),M=le(M,1),C=le(C,1)}return w=P(N,D.j(w)),new W(D,w)}for(D=S;N.l(w)>=0;){for(C=Math.max(1,Math.floor(N.m()/w.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),j=E(C),x=j.j(w);J(x)||x.l(N)>0;)C-=M,j=E(C),x=j.j(w);Q(j)&&(j=R),D=D.add(j),N=P(N,x)}return new W(D,N)}s.B=function(N){return te(this,N).h},s.and=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)&N.i(M);return new f(C,this.h&N.h)},s.or=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)|N.i(M);return new f(C,this.h|N.h)},s.xor=function(N){const w=Math.max(this.g.length,N.g.length),C=[];for(let M=0;M<w;M++)C[M]=this.i(M)^N.i(M);return new f(C,this.h^N.h)};function ne(N){const w=N.g.length+1,C=[];for(let M=0;M<w;M++)C[M]=N.i(M)<<1|N.i(M-1)>>>31;return new f(C,N.h)}function le(N,w){const C=w>>5;w%=32;const M=N.g.length-C,D=[];for(let j=0;j<M;j++)D[j]=w>0?N.i(j+C)>>>w|N.i(j+C+1)<<32-w:N.i(j+C);return new f(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,U1=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=T,ur=f}).apply(typeof Lv<"u"?Lv:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var z1,Cl,B1,Gu,pm,q1,F1,H1;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(u,g){if(g)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in v))break e;v=v[L]}u=u[u.length-1],A=v[u],g=g(A),g!=A&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});var c=c||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,v){return u.call.apply(u.bind,arguments)}function E(u,g,v){return E=y,E.apply(null,arguments)}function T(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,L,F){for(var ie=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)ie[Te-2]=arguments[Te];return g.prototype[L].apply(A,ie)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=u[A];return v}return[]}function Q(u,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=u.length||0;const F=L.length||0;u.length=v+F;for(let ie=0;ie<F;ie++)u[v+ie]=L[ie]}else u.push(L)}}class J{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(u){f.setTimeout(()=>{throw u},0)}function P(){var u=N;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ee{constructor(){this.h=this.g=null}add(g,v){const A=W.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var W=new J(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,le=!1,N=new ee,w=()=>{const u=Promise.resolve(void 0);ne=()=>{u.then(C)}};function C(){for(var u;u=P();){try{u.h.call(u.g)}catch(v){k(v)}var g=W;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}le=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function x(u){return/^[\s\xa0]*$/.test(u)}function Ge(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}S(Ge,D),Ge.prototype.init=function(u,g){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),K=0;function se(u,g,v,A,L){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=L,this.key=++K,this.da=this.fa=!1}function fe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function we(u,g,v){for(const A in u)g.call(v,u[A],A,u)}function Ve(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function et(u){const g={};for(const v in u)g[v]=u[v];return g}const ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,g){let v,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(v in A)u[v]=A[v];for(let F=0;F<ke.length;F++)v=ke[F],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function tt(u){this.src=u,this.g={},this.h=0}tt.prototype.add=function(u,g,v,A,L){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const ie=en(u,g,A,L);return ie>-1?(g=u[ie],v||(g.fa=!1)):(g=new se(g,this.src,F,!!A,L),g.fa=v,u.push(g)),g};function vt(u,g){const v=g.type;if(v in u.g){var A=u.g[v],L=Array.prototype.indexOf.call(A,g,void 0),F;(F=L>=0)&&Array.prototype.splice.call(A,L,1),F&&(fe(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function en(u,g,v,A){for(let L=0;L<u.length;++L){const F=u[L];if(!F.da&&F.listener==g&&F.capture==!!v&&F.ha==A)return L}return-1}var Sn="closure_lm_"+(Math.random()*1e6|0),oi={};function Wt(u,g,v,A,L){if(Array.isArray(g)){for(let F=0;F<g.length;F++)Wt(u,g[F],v,A,L);return null}return v=Ss(v),u&&u[st]?u.J(g,v,p(A)?!!A.capture:!1,L):Ar(u,g,v,!1,A,L)}function Ar(u,g,v,A,L,F){if(!g)throw Error("Invalid event type");const ie=p(L)?!!L.capture:!!L;let Te=Fi(u);if(Te||(u[Sn]=Te=new tt(u)),v=Te.add(g,v,A,ie,F),v.proxy)return v;if(A=Bn(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)j||(L=ie),L===void 0&&(L=!1),u.addEventListener(g.toString(),A,L);else if(u.attachEvent)u.attachEvent(hn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function u(v){return g.call(u.src,u.listener,v)}const g=Mt;return u}function bs(u,g,v,A,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)bs(u,g[F],v,A,L);else A=p(A)?!!A.capture:!!A,v=Ss(v),u&&u[st]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],v=en(g,v,A,L),v>-1&&(fe(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=Fi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=en(g,v,A,L)),(v=u>-1?g[u]:null)&&li(v))}function li(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[st])vt(g.i,u);else{var v=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(v,A,u.capture):g.detachEvent?g.detachEvent(hn(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=Fi(g))?(vt(v,u),v.h==0&&(v.src=null,g[Sn]=null)):fe(u)}}}function hn(u){return u in oi?oi[u]:oi[u]="on"+u}function Mt(u,g){if(u.da)u=!0;else{g=new Ge(g,this);const v=u.listener,A=u.ha||u.src;u.fa&&li(u),u=v.call(A,g)}return u}function Fi(u){return u=u[Sn],u instanceof tt?u:null}var As="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ss(u){return typeof u=="function"?u:(u[As]||(u[As]=function(g){return u.handleEvent(g)}),u[As])}function lt(){M.call(this),this.i=new tt(this),this.M=this,this.G=null}S(lt,M),lt.prototype[st]=!0,lt.prototype.removeEventListener=function(u,g,v,A){bs(this,u,g,v,A)};function ft(u,g){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var L=g;g=new D(A,u),Ae(g,L)}L=!0;let F,ie;if(v)for(ie=v.length-1;ie>=0;ie--)F=g.g=v[ie],L=qn(F,A,!0,g)&&L;if(F=g.g=u,L=qn(F,A,!0,g)&&L,L=qn(F,A,!1,g)&&L,v)for(ie=0;ie<v.length;ie++)F=g.g=v[ie],L=qn(F,A,!1,g)&&L}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let A=0;A<v.length;A++)fe(v[A]);delete u.g[g],u.h--}}this.G=null},lt.prototype.J=function(u,g,v,A){return this.i.add(String(u),g,!1,v,A)},lt.prototype.K=function(u,g,v,A){return this.i.add(String(u),g,!0,v,A)};function qn(u,g,v,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let F=0;F<g.length;++F){const ie=g[F];if(ie&&!ie.da&&ie.capture==v){const Te=ie.listener,mt=ie.ha||ie.src;ie.fa&&vt(u.i,ie),L=Te.call(mt,A)!==!1&&L}}return L&&!A.defaultPrevented}function ce(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function ge(u){u.g=ce(()=>{u.g=null,u.i&&(u.i=!1,ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Qe extends M{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(u){M.call(this),this.h=u,this.g={}}S(wn,M);var Hi=[];function Gi(u){we(u.g,function(g,v){this.g.hasOwnProperty(v)&&li(g)},u),u.g={}}wn.prototype.N=function(){wn.Z.N.call(this),Gi(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rn=f.JSON.stringify,pa=f.JSON.parse,Sr=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ac(){}function oc(){}var Fn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){D.call(this,"d")}S(Pt,D);function Cn(){D.call(this,"c")}S(Cn,D);var dt={},lc=null;function ga(){return lc=lc||new lt}dt.Ia="serverreachability";function cc(u){D.call(this,dt.Ia,u)}S(cc,D);function ci(u){const g=ga();ft(g,new cc(g))}dt.STAT_EVENT="statevent";function wr(u,g){D.call(this,dt.STAT_EVENT,u),this.stat=g}S(wr,D);function Et(u){const g=ga();ft(g,new wr(g,u))}dt.Ja="timingevent";function ui(u,g){D.call(this,dt.Ja,u),this.size=g}S(ui,D);function hi(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function Hn(){this.g=!0}Hn.prototype.ua=function(){this.g=!1};function Kh(u,g,v,A,L,F){u.info(function(){if(u.g)if(F){var ie="",Te=F.split("&");for(let Ue=0;Ue<Te.length;Ue++){var mt=Te[Ue].split("=");if(mt.length>1){const rt=mt[0];mt=mt[1];const Dn=rt.split("_");ie=Dn.length>=2&&Dn[1]=="type"?ie+(rt+"="+mt+"&"):ie+(rt+"=redacted&")}}}else ie=null;else ie=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+v+`
`+ie})}function uc(u,g,v,A,L,F,ie){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+v+`
`+F+" "+ie})}function fi(u,g,v,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Yh(u,v)+(A?" "+A:"")})}function Rr(u,g){u.info(function(){return"TIMEOUT: "+g})}Hn.prototype.info=function(){};function Yh(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var v=F[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ie=1;ie<A.length;ie++)A[ie]=""}}}}return Rn(F)}catch{return g}}var Cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},So={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wo;function xr(){}S(xr,ac),xr.prototype.g=function(){return new XMLHttpRequest},wo=new xr;function Qi(u){return encodeURIComponent(String(u))}function hc(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Gn(u,g,v,A){this.j=u,this.i=g,this.l=v,this.S=A||1,this.V=new wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var Tt={},jt={};function di(u,g,v){u.M=1,u.A=Ir(At(g)),u.u=v,u.R=!0,ya(u,null)}function ya(u,g){u.F=Date.now(),mi(u),u.B=At(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Ta(v.i,"t",A),u.C=0,v=u.j.L,u.h=new Qn,u.g=Rc(u.j,v?g:null,!u.u),u.P>0&&(u.O=new Qe(E(u.Y,u,u.g),u.P)),g=u.V,v=u.g,A=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Hi[0]=L.toString()),L=Hi);for(let F=0;F<L.length;F++){const ie=Wt(v,L[F],A||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.J?et(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ci(),Kh(u.i,u.v,u.B,u.l,u.S,u.u)}Gn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Xn(u)==3?g.j():this.Y(u)},Gn.prototype.Y=function(u){try{if(u==this.g)e:{const Te=Xn(this.g),mt=this.g.ya(),Ue=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||Te!=4||mt==7||(mt==8||Ue<=0?ci(3):ci(2)),pi(this);var g=this.g.ca();this.X=g;var v=Xh(this);if(this.o=g==200,uc(this.i,this.v,this.B,this.l,this.S,Te,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(A)){var F=A;break t}}F=null}if(u=F)fi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,u);else{this.o=!1,this.m=3,Et(12),fn(this),xn(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<v.length;)if(rt=dc(this,v),rt==jt){Te==4&&(this.m=4,Et(14),u=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Tt){this.m=4,Et(15),fi(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else fi(this.i,this.l,rt,null),gi(this,rt);if(fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||v.length!=0||this.h.h||(this.m=1,Et(16),u=!1),this.o=this.o&&u,!u)fi(this.i,this.l,v,"[Invalid Chunked Response]"),fn(this),xn(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),zo(ie),ie.P=!0,Et(11))}}else fi(this.i,this.l,v,null),gi(this,v);Te==4&&fn(this),this.o&&!this.K&&(Te==4?bc(this.j,this):(this.o=!1,mi(this)))}else Yi(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),fn(this),xn(this)}}}catch{}finally{}};function Xh(u){if(!fc(u))return u.g.la();const g=Ut(u.g);if(g==="")return"";let v="";const A=g.length,L=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return fn(u),xn(u),"";u.h.i=new f.TextDecoder}for(let F=0;F<A;F++)u.h.h=!0,v+=u.h.i.decode(g[F],{stream:!(L&&F==A-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function fc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function dc(u,g){var v=u.C,A=g.indexOf(`
`,v);return A==-1?jt:(v=Number(g.substring(v,A)),isNaN(v)?Tt:(A+=1,A+v>g.length?jt:(g=g.slice(A,A+v),u.C=A+v,g)))}Gn.prototype.cancel=function(){this.K=!0,fn(this)};function mi(u){u.T=Date.now()+u.H,_a(u,u.H)}function _a(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=hi(E(u.aa,u),g)}function pi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Gn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Rr(this.i,this.B),this.M!=2&&(ci(),Et(17)),fn(this),this.m=2,xn(this)):_a(this,this.T-u)};function xn(u){u.j.I==0||u.K||bc(u.j,u)}function fn(u){pi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Gi(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function gi(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||_i(v.h,u))){if(!u.L&&_i(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ra(v),Os(v);else break e;kr(v),Et(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=hi(E(v.Va,v),6e3));yi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Si(v,11)}else if((u.L||v.g==u)&&Ra(v),!x(g))for(L=v.Ba.g.parse(g),g=0;g<L.length;g++){let Ue=L[g];const rt=Ue[0];if(!(rt<=v.K))if(v.K=rt,Ue=Ue[1],v.I==2)if(Ue[0]=="c"){v.M=Ue[1],v.ba=Ue[2];const Dn=Ue[3];Dn!=null&&(v.ka=Dn,v.j.info("VER="+v.ka));const wi=Ue[4];wi!=null&&(v.za=wi,v.j.info("SVER="+v.za));const $n=Ue[5];$n!=null&&typeof $n=="number"&&$n>0&&(A=1.5*$n,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Wn=u.g;if(Wn){const Lr=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var F=A.h;F.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(xo(F,F.h),F.h=null))}if(A.G){const Ca=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(A.wa=Ca,qe(A.J,A.G,Ca))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ie=u;if(A.na=wc(A,A.L?A.ba:null,A.W),ie.L){Io(A.h,ie);var Te=ie,mt=A.O;mt&&(Te.H=mt),Te.D&&(pi(Te),mi(Te)),A.g=ie}else Ec(A);v.i.length>0&&Ai(v)}else Ue[0]!="stop"&&Ue[0]!="close"||Si(v,7);else v.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Si(v,7):Po(v):Ue[0]!="noop"&&v.l&&v.l.qa(Ue),v.A=0)}}ci(4)}catch{}}var bt=class{constructor(u,g){this.g=u,this.map=g}};function Ro(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Co(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yi(u){return u.h?1:u.g?u.g.size:0}function _i(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function xo(u,g){u.g?u.g.add(g):u.h=g}function Io(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ro.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function No(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return U(u.i)}var mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let L,F=null;A>=0?(L=u[v].substring(0,A),F=u[v].substring(A+1)):L=u[v],g(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function dn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof dn?(this.l=u.l,Vt(this,u.j),this.o=u.o,this.g=u.g,ws(this,u.u),this.h=u.h,Do(this,_c(u.i)),this.m=u.m):u&&(g=String(u).match(mc))?(this.l=!1,Vt(this,g[1]||"",!0),this.o=vi(g[2]||""),this.g=vi(g[3]||"",!0),ws(this,g[4]),this.h=vi(g[5]||"",!0),Do(this,g[6]||"",!0),this.m=vi(g[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}dn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Nr(g,Ea,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Nr(g,Ea,!0),"@"),u.push(Qi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Nr(v,v.charAt(0)=="/"?Oo:pc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Nr(v,gc)),u.join("")},dn.prototype.resolve=function(u){const g=At(this);let v=!!u.j;v?Vt(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var A=u.h;if(v)ws(g,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let ie=0;ie<L.length;){const Te=L[ie++];Te=="."?A&&ie==L.length&&F.push(""):Te==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&ie==L.length&&F.push("")):(F.push(Te),A=!0)}A=F.join("/")}else A=L}return v?g.h=A:v=u.i.toString()!=="",v?Do(g,_c(u.i)):v=!!u.m,v&&(g.m=u.m),g};function At(u){return new dn(u)}function Vt(u,g,v){u.j=v?vi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ws(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Do(u,g,v){g instanceof Cs?(u.i=g,ba(u.i,u.l)):(v||(g=Nr(g,Rs)),u.i=new Cs(g,u.l))}function qe(u,g,v){u.i.set(g,v)}function Ir(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Nr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,tn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ea=/[#\/\?@]/g,pc=/[#\?:]/g,Oo=/[#\?]/g,Rs=/[#\?@]/g,gc=/#/g;function Cs(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function nn(u){u.g||(u.g=new Map,u.h=0,u.i&&va(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=Cs.prototype,s.add=function(u,g){nn(this),this.i=null,u=xs(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function yc(u,g){nn(u),g=xs(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Mo(u,g){return nn(u),g=xs(u,g),u.g.has(g)}s.forEach=function(u,g){nn(this),this.g.forEach(function(v,A){v.forEach(function(L){u.call(g,L,A,this)},this)},this)};function jo(u,g){nn(u);let v=[];if(typeof g=="string")Mo(u,g)&&(v=v.concat(u.g.get(xs(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}s.set=function(u,g){return nn(this),this.i=null,u=xs(this,u),Mo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=jo(this,u),u.length>0?String(u[0]):g):g};function Ta(u,g,v){yc(u,g),v.length>0&&(u.i=null,u.g.set(xs(u,g),U(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const L=Qi(v);v=jo(this,v);for(let F=0;F<v.length;F++){let ie=L;v[F]!==""&&(ie+="="+Qi(v[F])),u.push(ie)}}return this.i=u.join("&")};function _c(u){const g=new Cs;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function xs(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ba(u,g){g&&!u.j&&(nn(u),u.i=null,u.g.forEach(function(v,A){const L=A.toLowerCase();A!=L&&(yc(this,A),Ta(this,L,v))},u)),u.j=g}function Kn(u,g){const v=new Hn;if(f.Image){const A=new Image;A.onload=T(In,v,"TestLoadImage: loaded",!0,g,A),A.onerror=T(In,v,"TestLoadImage: error",!1,g,A),A.onabort=T(In,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=T(In,v,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function Vo(u,g){const v=new Hn,A=new AbortController,L=setTimeout(()=>{A.abort(),In(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?In(v,"TestPingServer: ok",!0,g):In(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),In(v,"TestPingServer: error",!1,g)})}function In(u,g,v,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(v)}catch{}}function Is(){this.g=new Sr}function Ei(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Ei,ac),Ei.prototype.g=function(){return new Dr(this.i,this.h)};function Dr(u,g){lt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Dr,lt),s=Dr.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Yn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Aa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Aa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ns(this):Yn(this),this.readyState==3&&Aa(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Ns(this))},s.Na=function(u){this.g&&(this.response=u,Ns(this))},s.ga=function(){this.g&&Ns(this)};function Ns(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Yn(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Yn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nn(u){let g="";return we(u,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function Or(u,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Nn(v),typeof u=="string"?v!=null&&Qi(v):qe(u,g,v))}function Ke(u){lt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Ke,lt);var Ti=/^https?$/i,ko=["POST","PUT"];s=Ke.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wo.g(),this.g.onreadystatechange=R(E(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){Mr(this,F);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)v.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())v.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(ko,g,void 0)>=0)||A||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ie]of v)this.g.setRequestHeader(F,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){Mr(this,F)}};function Mr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Lo(u),Ki(u)}function Lo(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ft(this,"complete"),ft(this,"abort"),Ki(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),Ke.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?jr(this):this.Xa())},s.Xa=function(){jr(this)};function jr(u){if(u.h&&typeof c<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ft(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=F===0){let ie=String(u.D).match(mc)[1]||null;!ie&&f.self&&f.self.location&&(ie=f.self.location.protocol.slice(0,-1)),A=!Ti.test(ie?ie.toLowerCase():"")}v=A}if(v)ft(u,"complete"),ft(u,"success");else{u.o=6;try{var L=Xn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Lo(u)}}finally{Ki(u)}}}}function Ki(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||ft(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),pa(g)}};function Ut(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(u){const g={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(x(u[A]))continue;var v=hc(u[A]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=g[L]||[];g[L]=F,F.push(v)}Ve(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Ds(u){this.za=0,this.i=[],this.j=new Hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,u),this.Za=bi("retryDelaySeedMs",1e4,u),this.Ta=bi("forwardChannelMaxRetries",2,u),this.va=bi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ro(u&&u.concurrentRequestLimit),this.Ba=new Is,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ds.prototype,s.ka=8,s.I=1,s.connect=function(u,g,v,A){Et(0),this.W=u,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=wc(this,null,this.W),Ai(this)};function Po(u){if(Sa(u),u.I==3){var g=u.V++,v=At(u.J);if(qe(v,"SID",u.M),qe(v,"RID",g),qe(v,"TYPE","terminate"),Vr(u,v),g=new Gn(u,u.j,g),g.M=2,g.A=Ir(At(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=Rc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mi(g)}Sc(u)}function Os(u){u.g&&(zo(u),u.g.cancel(),u.g=null)}function Sa(u){Os(u),u.v&&(f.clearTimeout(u.v),u.v=null),Ra(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ai(u){if(!Co(u.h)&&!u.m){u.m=!0;var g=u.Ea;ne||w(),le||(ne(),le=!0),N.add(g,u),u.D=0}}function wa(u,g){return yi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=hi(E(u.Ea,u,g),Ac(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Gn(this,this.j,u);let F=this.o;if(this.U&&(F?(F=et(F),Ae(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=vc(this,L,g),v=At(this.J),qe(v,"RID",u),qe(v,"CVER",22),this.G&&qe(v,"X-HTTP-Session-Id",this.G),Vr(this,v),F&&(this.R?g="headers="+Qi(Nn(F))+"&"+g:this.u&&Or(v,this.u,F)),xo(this.h,L),this.Ra&&qe(v,"TYPE","init"),this.S?(qe(v,"$req",g),qe(v,"SID","null"),L.U=!0,di(L,v,null)):di(L,v,g),this.I=2}}else this.I==3&&(u?Uo(this,u):this.i.length==0||Co(this.h)||Uo(this))};function Uo(u,g){var v;g?v=g.l:v=u.V++;const A=At(u.J);qe(A,"SID",u.M),qe(A,"RID",v),qe(A,"AID",u.K),Vr(u,A),u.u&&u.o&&Or(A,u.u,u.o),v=new Gn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=vc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),xo(u.h,v),di(v,A,g)}function Vr(u,g){u.H&&we(u.H,function(v,A){qe(g,A,v)}),u.l&&we({},function(v,A){qe(g,A,v)})}function vc(u,g,v){v=Math.min(u.i.length,v);const A=u.l?E(u.l.Ka,u.l,u):null;e:{var L=u.i;let Te=-1;for(;;){const mt=["count="+v];Te==-1?v>0?(Te=L[0].g,mt.push("ofs="+Te)):Te=0:mt.push("ofs="+Te);let Ue=!0;for(let rt=0;rt<v;rt++){var F=L[rt].g;const Dn=L[rt].map;if(F-=Te,F<0)Te=Math.max(0,L[rt].g-100),Ue=!1;else try{F="req"+F+"_"||"";try{var ie=Dn instanceof Map?Dn:Object.entries(Dn);for(const[wi,$n]of ie){let Wn=$n;p($n)&&(Wn=Rn($n)),mt.push(F+wi+"="+encodeURIComponent(Wn))}}catch(wi){throw mt.push(F+"type="+encodeURIComponent("_badmap")),wi}}catch{A&&A(Dn)}}if(Ue){ie=mt.join("&");break e}}ie=void 0}return u=u.i.splice(0,v),g.G=u,ie}function Ec(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ne||w(),le||(ne(),le=!0),N.add(g,u),u.A=0}}function kr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=hi(E(u.Da,u),Ac(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=hi(E(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Os(this),Tc(this))};function zo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Tc(u){u.g=new Gn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=At(u.na);qe(g,"RID","rpc"),qe(g,"SID",u.M),qe(g,"AID",u.K),qe(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(g,"TO",u.ia),qe(g,"TYPE","xmlhttp"),Vr(u,g),u.u&&u.o&&Or(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ir(At(g)),v.u=null,v.R=!0,ya(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Os(this),kr(this),Et(19))};function Ra(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function bc(u,g){var v=null;if(u.g==g){Ra(u),zo(u),u.g=null;var A=2}else if(_i(u.h,g))v=g.G,Io(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;A=ga(),ft(A,new ui(A,v)),Ai(u)}else Ec(u);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&wa(u,g)||A==2&&kr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),L){case 1:Si(u,5);break;case 4:Si(u,10);break;case 3:Si(u,6);break;default:Si(u,2)}}}function Ac(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Si(u,g){if(u.j.info("Error code "+g),g==2){var v=E(u.bb,u),A=u.Ua;const L=!A;A=new dn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Vt(A,"https"),Ir(A),L?Kn(A.toString(),v):Vo(A.toString(),v)}else Et(2);u.I=0,u.l&&u.l.pa(g),Sc(u),Sa(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Sc(u){if(u.I=0,u.ja=[],u.l){const g=No(u.h);(g.length!=0||u.i.length!=0)&&(Q(u.ja,g),Q(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function wc(u,g,v){var A=v instanceof dn?At(v):new dn(v);if(A.g!="")g&&(A.g=g+"."+A.g),ws(A,A.u);else{var L=f.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const F=new dn(null);A&&Vt(F,A),g&&(F.g=g),L&&ws(F,L),v&&(F.h=v),A=F}return v=u.G,g=u.wa,v&&g&&qe(A,v,g),qe(A,"VER",u.ka),Vr(u,A),A}function Rc(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ke(new Ei({ab:v})):new Ke(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}s=Cc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ms(){}Ms.prototype.g=function(u,g){return new Zt(u,g)};function Zt(u,g){lt.call(this),this.g=new Ds(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!x(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Xi(this)}S(Zt,lt),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Po(this.g)},Zt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Rn(u),u=v);g.i.push(new bt(g.Ya++,u)),g.I==3&&Ai(g)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Zt.Z.N.call(this)};function xc(u){Pt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}S(xc,Pt);function Ic(){Cn.call(this),this.status=1}S(Ic,Cn);function Xi(u){this.g=u}S(Xi,Cc),Xi.prototype.ra=function(){ft(this.g,"a")},Xi.prototype.qa=function(u){ft(this.g,new xc(u))},Xi.prototype.pa=function(u){ft(this.g,new Ic)},Xi.prototype.oa=function(){ft(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,H1=function(){return new Ms},F1=function(){return ga()},q1=dt,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,Gu=Cr,So.COMPLETE="complete",B1=So,oc.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Cl=oc,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,z1=Ke}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",Uv="4.9.2";class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Eo="12.3.0";const oa=new Lm("@firebase/firestore");function io(){return oa.logLevel}function ae(s,...e){if(oa.logLevel<=Ne.DEBUG){const n=e.map(Ym);oa.debug(`Firestore (${Eo}): ${s}`,...n)}}function _s(s,...e){if(oa.logLevel<=Ne.ERROR){const n=e.map(Ym);oa.error(`Firestore (${Eo}): ${s}`,...n)}}function fo(s,...e){if(oa.logLevel<=Ne.WARN){const n=e.map(Ym);oa.warn(`Firestore (${Eo}): ${s}`,...n)}}function Ym(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function _e(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,G1(s,r,n)}function G1(s,e,n){let r=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _s(r),new Error(r)}function Be(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||G1(e,l,r)}function Ee(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ps{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Q1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Yt.UNAUTHENTICATED)))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new ps;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ps,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ps)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new Q1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class vR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ER{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Be(this.o===void 0,3512);const r=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=bR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function De(s,e){return s<e?-1:s>e?1:0}function gm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return tm(l)===tm(c)?De(l,c):tm(l)?1:-1}return De(s.length,e.length)}const AR=55296,SR=57343;function tm(s){const e=s.charCodeAt(0);return e>=AR&&e<=SR}function mo(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const Bv="__name__";class Ni{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Ni.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return De(e.length,n.length)}static compareSegments(e,n){const r=Ni.isNumericId(e),l=Ni.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ni.extractNumericId(e).compare(Ni.extractNumericId(n)):gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class Je extends Ni{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new Je(n)}static emptyPath(){return new Je([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Ni{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bv}static keyField(){return new Gt([Bv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(c(),l++)}if(c(),f)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(Je.fromString(e))}static fromName(e){return new me(Je.fromString(e).popFirst(5))}static empty(){return new me(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Je(e.slice()))}}function K1(s,e,n){if(!n)throw new re($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function RR(s,e,n,r){if(e===!0&&r===!0)throw new re($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function qv(s){if(!me.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Fv(s){if(me.isDocumentKey(s))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Y1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ch(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function An(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(s);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Nt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Zl(s,e){if(!Y1(s))throw new re($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new re($.INVALID_ARGUMENT,n);return!0}const Hv=-62135596800,Gv=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Gv);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hv)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Nt("string",We._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new We(0,0))}static max(){return new ve(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zl=-1;function CR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=ve.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new dr(l,me.empty(),e)}function xR(s){return new dr(s.readTime,s.key,zl)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(ve.min(),me.empty(),zl)}static max(){return new dr(ve.max(),me.empty(),zl)}}function IR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:De(s.largestBatchId,e.largestBatchId))}const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function To(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==NR)throw s;ae("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,r)=>{n(e)}))}static reject(e){return new Z(((n,r)=>{r(e)}))}static waitFor(e){return new Z(((n,r)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(y=>r(y)))})),f=!0,c===l&&n()}))}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next((l=>l?Z.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new Z(((r,l)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next((T=>{f[E]=T,++p,p===c&&r(f)}),(T=>l(T)))}}))}static doWhile(e,n){return new Z(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function OR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(s){return s.name==="IndexedDbTransactionError"}class xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;const $m=-1;function Ih(s){return s==null}function ah(s){return s===0&&1/s==-1/0}function MR(s){return typeof s=="number"&&Number.isInteger(s)&&!ah(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const X1="";function jR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Qv(e)),e=VR(s.get(n),e);return Qv(e)}function VR(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case X1:n+="";break;default:n+=c}}return n}function Qv(s){return s+X1+""}function Kv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Tr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function $1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ot{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=l??Ht.EMPTY,this.right=c??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new Ht(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ht.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ot{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class bn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Ot(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class W1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new W1("Invalid base64 string: "+c):c}})(e);return new Qt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(s){if(Be(!!s,39018),typeof s=="string"){let e=0;const n=kR.exec(s);if(Be(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pr(s){return typeof s=="string"?Qt.fromBase64String(s):Qt.fromUint8Array(s)}const Z1="server_timestamp",J1="__type__",eE="__previous_value__",tE="__local_write_time__";function Wm(s){return(s?.mapValue?.fields||{})[J1]?.stringValue===Z1}function Nh(s){const e=s.mapValue.fields[eE];return Wm(e)?Nh(e):e}function Bl(s){const e=mr(s.mapValue.fields[tE].timestampValue);return new We(e.seconds,e.nanos)}class LR{constructor(e,n,r,l,c,f,p,y,E,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=E,this.isUsingEmulator=T}}const oh="(default)";class ql{constructor(e,n){this.projectId=e,this.database=n||oh}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database===oh}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}const nE="__type__",PR="__max__",Lu={mapValue:{}},iE="__vector__",lh="value";function gr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Wm(s)?4:zR(s)?9007199254740991:UR(s)?10:11:_e(28295,{value:s})}function Pi(s,e){if(s===e)return!0;const n=gr(s);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Bl(s).isEqual(Bl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=mr(l.timestampValue),p=mr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return pr(l.bytesValue).isEqual(pr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return yt(l.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return yt(l.integerValue)===yt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=yt(l.doubleValue),p=yt(c.doubleValue);return f===p?ah(f)===ah(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return mo(s.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Kv(f)!==Kv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Pi(f[y],p[y])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function Fl(s,e){return(s.values||[]).find((n=>Pi(n,e)))!==void 0}function po(s,e){if(s===e)return 0;const n=gr(s),r=gr(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=yt(c.integerValue||c.doubleValue),y=yt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return Xv(s.timestampValue,e.timestampValue);case 4:return Xv(Bl(s),Bl(e));case 5:return gm(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=pr(c),y=pr(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let E=0;E<p.length&&E<y.length;E++){const T=De(p[E],y[E]);if(T!==0)return T}return De(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=De(yt(c.latitude),yt(f.latitude));return p!==0?p:De(yt(c.longitude),yt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return $v(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},E=p[lh]?.arrayValue,T=y[lh]?.arrayValue,S=De(E?.values?.length||0,T?.values?.length||0);return S!==0?S:$v(E,T)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Lu.mapValue&&f===Lu.mapValue)return 0;if(c===Lu.mapValue)return 1;if(f===Lu.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),E=f.fields||{},T=Object.keys(E);y.sort(),T.sort();for(let S=0;S<y.length&&S<T.length;++S){const R=gm(y[S],T[S]);if(R!==0)return R;const U=po(p[y[S]],E[T[S]]);if(U!==0)return U}return De(y.length,T.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Xv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return De(s,e);const n=mr(s),r=mr(e),l=De(n.seconds,r.seconds);return l!==0?l:De(n.nanos,r.nanos)}function $v(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=po(n[l],r[l]);if(c)return c}return De(n.length,r.length)}function go(s){return ym(s)}function ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=mr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return pr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=ym(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${ym(n.fields[f])}`;return l+"}"})(s.mapValue):_e(61005,{value:s})}function Qu(s){switch(gr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nh(s);return e?16+Qu(e):16;case 5:return 2*s.stringValue.length;case 6:return pr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Qu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Tr(r.fields,((c,f)=>{l+=c.length+Qu(f)})),l})(s.mapValue);default:throw _e(13486,{value:s})}}function Wv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function _m(s){return!!s&&"integerValue"in s}function Zm(s){return!!s&&"arrayValue"in s}function Zv(s){return!!s&&"nullValue"in s}function Jv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ku(s){return!!s&&"mapValue"in s}function UR(s){return(s?.mapValue?.fields||{})[nE]?.stringValue===iE}function Ml(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Tr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ml(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(s.arrayValue.values[n]);return e}return{...s}}function zR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=Gt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=Ml(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Ku(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Tr(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new un(Ml(this.value))}}function sE(s){const e=[];return Tr(s.fields,((n,r)=>{const l=new Gt([n]);if(Ku(r)){const c=sE(r.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new bn(e)}class Xt{constructor(e,n,r,l,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Xt(e,0,ve.min(),ve.min(),ve.min(),un.empty(),0)}static newFoundDocument(e,n,r,l){return new Xt(e,1,n,ve.min(),r,l,0)}static newNoDocument(e,n){return new Xt(e,2,n,ve.min(),ve.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,ve.min(),ve.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ch{constructor(e,n){this.position=e,this.inclusive=n}}function e0(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?r=me.comparator(me.fromName(f.referenceValue),n.key):r=po(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function t0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Pi(s.position[n],e.position[n]))return!1;return!0}class uh{constructor(e,n="asc"){this.field=e,this.dir=n}}function BR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class rE{}class It extends rE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FR(e,n,r):n==="array-contains"?new QR(e,r):n==="in"?new KR(e,r):n==="not-in"?new YR(e,r):n==="array-contains-any"?new XR(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HR(e,r):new GR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends rE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return aE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aE(s){return s.op==="and"}function oE(s){return qR(s)&&aE(s)}function qR(s){for(const e of s.filters)if(e instanceof ai)return!1;return!0}function vm(s){if(s instanceof It)return s.field.canonicalString()+s.op.toString()+go(s.value);if(oE(s))return s.filters.map((e=>vm(e))).join(",");{const e=s.filters.map((n=>vm(n))).join(",");return`${s.op}(${e})`}}function lE(s,e){return s instanceof It?(function(r,l){return l instanceof It&&r.op===l.op&&r.field.isEqual(l.field)&&Pi(r.value,l.value)})(s,e):s instanceof ai?(function(r,l){return l instanceof ai&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,f,p)=>c&&lE(f,l.filters[p])),!0):!1})(s,e):void _e(19439)}function cE(s){return s instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`})(s):s instanceof ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(cE).join(" ,")+"}"})(s):"Filter"}class FR extends It{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class HR extends It{constructor(e,n){super(e,"in",n),this.keys=uE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class GR extends It{constructor(e,n){super(e,"not-in",n),this.keys=uE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uE(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class QR extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&Fl(n.arrayValue,this.value)}}class KR extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class YR extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fl(this.value.arrayValue,n)}}class XR extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Fl(this.value.arrayValue,r)))}}class $R{constructor(e,n=null,r=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function n0(s,e=null,n=[],r=[],l=null,c=null,f=null){return new $R(s,e,n,r,l,c,f)}function Jm(s){const e=Ee(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>vm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>go(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>go(r))).join(",")),e.Te=n}return e.Te}function ep(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!BR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!lE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!t0(s.startAt,e.startAt)&&t0(s.endAt,e.endAt)}function Em(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Jl{constructor(e,n=null,r=[],l=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WR(s,e,n,r,l,c,f,p){return new Jl(s,e,n,r,l,c,f,p)}function Dh(s){return new Jl(s)}function i0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hE(s){return s.collectionGroup!==null}function jl(s){const e=Ee(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Ot(Gt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((E=>{E.isInequality()&&(p=p.add(E.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new uh(c,r))})),n.has(Gt.keyField().canonicalString())||e.Ie.push(new uh(Gt.keyField(),r))}return e.Ie}function ji(s){const e=Ee(s);return e.Ee||(e.Ee=ZR(e,jl(s))),e.Ee}function ZR(s,e){if(s.limitType==="F")return n0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new uh(l.field,c)}));const n=s.endAt?new ch(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ch(s.startAt.position,s.startAt.inclusive):null;return n0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Tm(s,e){const n=s.filters.concat([e]);return new Jl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function bm(s,e,n){return new Jl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Oh(s,e){return ep(ji(s),ji(e))&&s.limitType===e.limitType}function fE(s){return`${Jm(ji(s))}|lt:${s.limitType}`}function so(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>cE(l))).join(", ")}]`),Ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>go(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>go(l))).join(",")),`Target(${r})`})(ji(s))}; limitType=${s.limitType})`}function Mh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of jl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const E=e0(f,p,y);return f.inclusive?E<=0:E<0})(r.startAt,jl(r),l)||r.endAt&&!(function(f,p,y){const E=e0(f,p,y);return f.inclusive?E>=0:E>0})(r.endAt,jl(r),l))})(s,e)}function JR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function dE(s){return(e,n)=>{let r=!1;for(const l of jl(s)){const c=eC(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function eC(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,f,p){const y=f.data.field(c),E=p.data.field(c);return y!==null&&E!==null?po(y,E):_e(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}class ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return $1(this.inner)}size(){return this.innerSize}}const tC=new ot(me.comparator);function vs(){return tC}const mE=new ot(me.comparator);function xl(...s){let e=mE;for(const n of s)e=e.insert(n.key,n);return e}function pE(s){let e=mE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ea(){return Vl()}function gE(){return Vl()}function Vl(){return new ha((s=>s.toString()),((s,e)=>s.isEqual(e)))}const nC=new ot(me.comparator),iC=new Ot(me.comparator);function Oe(...s){let e=iC;for(const n of s)e=e.add(n);return e}const sC=new Ot(De);function rC(){return sC}function tp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function yE(s){return{integerValue:""+s}}function aC(s,e){return MR(e)?yE(e):tp(s,e)}class jh{constructor(){this._=void 0}}function oC(s,e,n){return s instanceof hh?(function(l,c){const f={fields:{[J1]:{stringValue:Z1},[tE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Wm(c)&&(c=Nh(c)),c&&(f.fields[eE]=c),{mapValue:f}})(n,e):s instanceof Hl?vE(s,e):s instanceof Gl?EE(s,e):(function(l,c){const f=_E(l,c),p=s0(f)+s0(l.Ae);return _m(f)&&_m(l.Ae)?yE(p):tp(l.serializer,p)})(s,e)}function lC(s,e,n){return s instanceof Hl?vE(s,e):s instanceof Gl?EE(s,e):n}function _E(s,e){return s instanceof fh?(function(r){return _m(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class hh extends jh{}class Hl extends jh{constructor(e){super(),this.elements=e}}function vE(s,e){const n=TE(e);for(const r of s.elements)n.some((l=>Pi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class Gl extends jh{constructor(e){super(),this.elements=e}}function EE(s,e){let n=TE(e);for(const r of s.elements)n=n.filter((l=>!Pi(l,r)));return{arrayValue:{values:n}}}class fh extends jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s0(s){return yt(s.integerValue||s.doubleValue)}function TE(s){return Zm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function cC(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Hl&&l instanceof Hl||r instanceof Gl&&l instanceof Gl?mo(r.elements,l.elements,Pi):r instanceof fh&&l instanceof fh?Pi(r.Ae,l.Ae):r instanceof hh&&l instanceof hh})(s.transform,e.transform)}class uC{constructor(e,n){this.version=e,this.transformResults=n}}class si{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new si}static exists(e){return new si(void 0,e)}static updateTime(e){return new si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Vh{}function bE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new SE(s.key,si.none()):new ec(s.key,s.data,si.none());{const n=s.data,r=un.empty();let l=new Ot(Gt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new br(s.key,r,new bn(l.toArray()),si.none())}}function hC(s,e,n){s instanceof ec?(function(l,c,f){const p=l.value.clone(),y=a0(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof br?(function(l,c,f){if(!Yu(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=a0(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(AE(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function kl(s,e,n,r){return s instanceof ec?(function(c,f,p,y){if(!Yu(c.precondition,f))return p;const E=c.value.clone(),T=o0(c.fieldTransforms,y,f);return E.setAll(T),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null})(s,e,n,r):s instanceof br?(function(c,f,p,y){if(!Yu(c.precondition,f))return p;const E=o0(c.fieldTransforms,y,f),T=f.data;return T.setAll(AE(c)),T.setAll(E),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(c,f,p){return Yu(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function fC(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=_E(r.transform,l||null);c!=null&&(n===null&&(n=un.empty()),n.set(r.field,c))}return n||null}function r0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&mo(r,l,((c,f)=>cC(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ec extends Vh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class br extends Vh{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function AE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function a0(s,e,n){const r=new Map;Be(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);r.set(c.field,lC(f,p,n[l]))}return r}function o0(s,e,n){const r=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);r.set(l.field,oC(c,f,e))}return r}class SE extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dC extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mC{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&hC(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gE();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const y=bE(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,((n,r)=>r0(n,r)))&&mo(this.baseMutations,e.baseMutations,((n,r)=>r0(n,r)))}}class np{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){Be(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return nC})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new np(e,n,r,l)}}class pC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gC{constructor(e,n){this.count=e,this.unchangedNames=n}}var xt,je;function yC(s){switch(s){case $.OK:return _e(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function wE(s){if(s===void 0)return _s("GRPC error has no .code"),$.UNKNOWN;switch(s){case xt.OK:return $.OK;case xt.CANCELLED:return $.CANCELLED;case xt.UNKNOWN:return $.UNKNOWN;case xt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case xt.INTERNAL:return $.INTERNAL;case xt.UNAVAILABLE:return $.UNAVAILABLE;case xt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case xt.NOT_FOUND:return $.NOT_FOUND;case xt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case xt.ABORTED:return $.ABORTED;case xt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case xt.DATA_LOSS:return $.DATA_LOSS;default:return _e(39323,{code:s})}}(je=xt||(xt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function _C(){return new TextEncoder}const vC=new ur([4294967295,4294967295],0);function l0(s){const e=_C().encode(s),n=new U1;return n.update(e),new Uint8Array(n.digest())}function c0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ur([n,r],0),new ur([l,c],0)]}class ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ur.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(ur.fromNumber(r)));return l.compare(vC)===1&&(l=new ur([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new ip(c,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=l0(e),[r,l]=c0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kh{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kh(ve.min(),l,new ot(De),vs(),Oe())}}class tc{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tc(r,n,Oe(),Oe(),Oe())}}class Xu{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class RE{constructor(e,n){this.targetId=e,this.Ce=n}}class CE{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class u0{constructor(){this.ve=0,this.Fe=h0(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:_e(38017,{changeType:c})}})),new tc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=h0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EC{constructor(e){this.Ge=e,this.ze=new Map,this.je=vs(),this.Je=Pu(),this.He=Pu(),this.Ye=new ot(De)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(Em(c))if(r===0){const f=new me(c.path);this.et(n,f,Xt.newNoDocument(f,ve.min()))}else Be(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=pr(r).toUint8Array()}catch(y){if(y instanceof W1)return fo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ip(f,l,c)}catch(y){return fo(y instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&Em(p.target)){const y=new me(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Xt.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=Oe();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const E=this.ot(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new kh(e,n,this.Ye,this.je,r);return this.je=vs(),this.Je=Pu(),this.He=Pu(),this.Ye=new ot(De),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(De),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(De),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pu(){return new ot(me.comparator)}function h0(){return new ot(me.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AC={and:"AND",or:"OR"};class SC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Am(s,e){return s.useProto3Json||Ih(e)?e:{value:e}}function dh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function wC(s,e){return dh(s,e.toTimestamp())}function Vi(s){return Be(!!s,49232),ve.fromTimestamp((function(n){const r=mr(n);return new We(r.seconds,r.nanos)})(s))}function sp(s,e){return Sm(s,e).canonicalString()}function Sm(s,e){const n=(function(l){return new Je(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function IE(s){const e=Je.fromString(s);return Be(jE(e),10190,{key:e.toString()}),e}function wm(s,e){return sp(s.databaseId,e.path)}function nm(s,e){const n=IE(e);if(n.get(1)!==s.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(DE(n))}function NE(s,e){return sp(s.databaseId,e)}function RC(s){const e=IE(s);return e.length===4?Je.emptyPath():DE(e)}function Rm(s){return new Je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function DE(s){return Be(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function f0(s,e,n){return{name:wm(s,e),fields:n.value.mapValue.fields}}function CC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:_e(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(E,T){return E.useProto3Json?(Be(T===void 0||typeof T=="string",58123),Qt.fromBase64String(T||"")):(Be(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Qt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(E){const T=E.code===void 0?$.UNKNOWN:wE(E.code);return new re(T,E.message||"")})(f);n=new CE(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=nm(s,r.document.name),c=Vi(r.document.updateTime),f=r.document.createTime?Vi(r.document.createTime):ve.min(),p=new un({mapValue:{fields:r.document.fields}}),y=Xt.newFoundDocument(l,c,f,p),E=r.targetIds||[],T=r.removedTargetIds||[];n=new Xu(E,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=nm(s,r.document),c=r.readTime?Vi(r.readTime):ve.min(),f=Xt.newNoDocument(l,c),p=r.removedTargetIds||[];n=new Xu([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=nm(s,r.document),c=r.removedTargetIds||[];n=new Xu([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new gC(l,c),p=r.targetId;n=new RE(p,f)}}return n}function xC(s,e){let n;if(e instanceof ec)n={update:f0(s,e.key,e.value)};else if(e instanceof SE)n={delete:wm(s,e.key)};else if(e instanceof br)n={update:f0(s,e.key,e.data),updateMask:LC(e.fieldMask)};else{if(!(e instanceof dC))return _e(16599,{Vt:e.type});n={verify:wm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof hh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Hl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:wC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(s,e.precondition)),n}function IC(s,e){return s&&s.length>0?(Be(e!==void 0,14353),s.map((n=>(function(l,c){let f=l.updateTime?Vi(l.updateTime):Vi(c);return f.isEqual(ve.min())&&(f=Vi(c)),new uC(f,l.transformResults||[])})(n,e)))):[]}function NC(s,e){return{documents:[NE(s,e.path)]}}function DC(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NE(s,l);const c=(function(E){if(E.length!==0)return ME(ai.create(E,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(E){if(E.length!==0)return E.map((T=>(function(R){return{field:ro(R.field),direction:jC(R.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Am(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:l}}function OC(s){let e=RC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){Be(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(S){const R=OE(S);return R instanceof ai&&oE(R)?R.getFilters():[R]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((R=>(function(Q){return new uh(ao(Q.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(R)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let R;return R=typeof S=="object"?S.value:S,Ih(R)?null:R})(n.limit));let y=null;n.startAt&&(y=(function(S){const R=!!S.before,U=S.values||[];return new ch(U,R)})(n.startAt));let E=null;return n.endAt&&(E=(function(S){const R=!S.before,U=S.values||[];return new ch(U,R)})(n.endAt)),WR(e,l,f,c,p,"F",y,E)}function MC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ao(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=ao(n.unaryFilter.field);return It.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ao(n.unaryFilter.field);return It.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ao(n.unaryFilter.field);return It.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(n){return It.create(ao(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ai.create(n.compositeFilter.filters.map((r=>OE(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(s):_e(30097,{filter:s})}function jC(s){return TC[s]}function VC(s){return bC[s]}function kC(s){return AC[s]}function ro(s){return{fieldPath:s.canonicalString()}}function ao(s){return Gt.fromServerFormat(s.fieldPath)}function ME(s){return s instanceof It?(function(n){if(n.op==="=="){if(Jv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:VC(n.op),value:n.value}}})(s):s instanceof ai?(function(n){const r=n.getFilters().map((l=>ME(l)));return r.length===1?r[0]:{compositeFilter:{op:kC(n.op),filters:r}}})(s):_e(54877,{filter:s})}function LC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function jE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class or{constructor(e,n,r,l,c=ve.min(),f=ve.min(),p=Qt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PC{constructor(e){this.yt=e}}function UC(s){const e=OC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?bm(e,e.limit,"L"):e}class zC{constructor(){this.Cn=new BC}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(dr.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class BC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Ot(Je.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Ot(Je.comparator)).toArray()}}const d0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VE=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(VE,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}const m0="LruGarbageCollector",qC=1048576;function p0([s,e],[n,r]){const l=De(s,n);return l===0?De(e,r):l}class FC{constructor(e){this.Ir=e,this.buffer=new Ot(p0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(m0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?ae(m0,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Vr(3e5)}))}}class GC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(xh.ce);const r=new FC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(d0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,f,p,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,n)))).next((S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(E=Date.now(),io()<=Ne.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${S} documents in `+(E-y)+`ms
Total Duration: ${E-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function QC(s,e){return new GC(s,e)}class KC{constructor(){this.changes=new ha((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&kl(r.mutation,l,bn.empty(),We.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Oe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Oe()){const l=ea();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let f=xl();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=ea();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Oe())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let c=vs();const f=Vl(),p=(function(){return Vl()})();return n.forEach(((y,E)=>{const T=r.get(E.key);l.has(E.key)&&(T===void 0||T.mutation instanceof br)?c=c.insert(E.key,E):T!==void 0?(f.set(E.key,T.mutation.getFieldMask()),kl(T.mutation,E,T.mutation.getFieldMask(),We.now())):f.set(E.key,bn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((E,T)=>f.set(E,T))),n.forEach(((E,T)=>p.set(E,new YC(T,f.get(E)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Vl();let l=new ot(((f,p)=>f-p)),c=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const E=n.get(y);if(E===null)return;let T=r.get(y)||bn.empty();T=p.applyToLocalView(E,T),r.set(y,T);const S=(l.get(p.batchId)||Oe()).add(y);l=l.insert(p.batchId,S)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),E=y.key,T=y.value,S=gE();T.forEach((R=>{if(!c.has(R)){const U=bE(n.get(R),r.get(R));U!==null&&S.set(R,U),c=c.add(R)}})),f.push(this.documentOverlayCache.saveOverlays(e,E,S))}return Z.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):Z.resolve(ea());let p=zl,y=c;return f.next((E=>Z.forEach(E,((T,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{y=y.insert(T,R)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,y,E,Oe()))).next((T=>({batchId:p,changes:pE(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let l=xl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let f=xl();return this.indexManager.getCollectionParents(e,c).next((p=>Z.forEach(p,(y=>{const E=(function(S,R){return new Jl(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,r,l).next((T=>{T.forEach(((S,R)=>{f=f.insert(S,R)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((f=>{c.forEach(((y,E)=>{const T=E.getKey();f.get(T)===null&&(f=f.insert(T,Xt.newInvalidDocument(T)))}));let p=xl();return f.forEach(((y,E)=>{const T=c.get(y);T!==void 0&&kl(T.mutation,E,bn.empty(),We.now()),Mh(n,E)&&(p=p.insert(y,E))})),p}))}}class $C{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Vi(l.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:UC(l.bundledQuery),readTime:Vi(l.readTime)}})(n)),Z.resolve()}}class WC{constructor(){this.overlays=new ot(me.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ea();return Z.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),Z.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const l=ea(),c=n.length+1,f=new me(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return Z.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new ot(((E,T)=>E-T));const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>r){let T=c.get(E.largestBatchId);T===null&&(T=ea(),c=c.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=ea(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((E,T)=>p.set(E,T))),!(p.size()>=l)););return Z.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new pC(n,r));let c=this.qr.get(n);c===void 0&&(c=Oe(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}class ZC{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}class rp{constructor(){this.Qr=new Ot(Lt.$r),this.Ur=new Ot(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new Je([])),r=new Lt(n,e),l=new Lt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Je([])),r=new Lt(n,e),l=new Lt(n,e+1);let c=Oe();return this.Ur.forEachInRange([r,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Lt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||De(e.Yr,n.Yr)}static Kr(e,n){return De(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}class JC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Lt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new mC(c,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Lt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?$m:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),l=new Lt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(De);return n.forEach((l=>{const c=new Lt(l,0),f=new Lt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const f=new Lt(new me(c),0);let p=new Ot(De);return this.Zr.forEachWhile((y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===l&&(p=p.add(y.Yr)),!0)}),f),Z.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Be(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,(l=>{const c=new Lt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Lt(n,0),l=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ex{constructor(e){this.ri=e,this.docs=(function(){return new ot(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=vs();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():Xt.newInvalidDocument(l))})),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=vs();const f=n.path,p=new me(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:E,value:{document:T}}=y.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||IR(xR(T),r)<=0||(l.has(T.key)||Mh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,n,r,l){_e(9500)}ii(e,n){return Z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new tx(this)}getSize(e){return Z.resolve(this.size)}}class tx extends KC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class nx{constructor(e){this.persistence=e,this.si=new ha((n=>Jm(n)),ep),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new rp,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Z.waitFor(c).next((()=>l))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}class kE{constructor(e,n){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new ZC,this.referenceDelegate=e(this),this.Pi=new nx(this),this.indexManager=new zC,this.remoteDocumentCache=(function(l){return new ex(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new PC(n),this.Ii=new $C(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new JC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const l=new ix(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ix extends DR{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Ri=new rp,this.Vi=null}static mi(e){return new ap(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mh{constructor(e,n){this.persistence=e,this.pi=new ha((r=>jR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=QC(this,n)}static mi(e,n){return new mh(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?Z.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,c.removeEntry(f,ve.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qu(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return Z.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class op{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Oe(),l=Oe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new op(e,n.fromCache,r,l)}}class sx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jb()?8:OR($t())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new sx;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(io()<=Ne.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(io()<=Ne.DEBUG&&ae("QueryEngine","Query:",so(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(io()<=Ne.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):Z.resolve())}ys(e,n){if(i0(n))return Z.resolve(null);let r=ji(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=bm(n,null,"F"),r=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=Oe(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const E=this.Ds(n,p);return this.Cs(n,E,f,y.readTime)?this.ys(e,bm(n,null,"F")):this.vs(e,E,n,y)}))))})))))}ws(e,n,r,l){return i0(n)||l.isEqual(ve.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,l)?Z.resolve(null):(io()<=Ne.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),so(n)),this.vs(e,f,n,CR(l,zl)).next((p=>p)))}))}Ds(e,n){let r=new Ot(dE(e));return n.forEach(((l,c)=>{Mh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return io()<=Ne.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",so(n)),this.ps.getDocumentsMatchingQuery(e,n,dr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const lp="LocalStore",ax=3e8;class ox{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ot(De),this.xs=new ha((c=>Jm(c)),ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function lx(s,e,n,r){return new ox(s,e,n,r)}async function LE(s,e){const n=Ee(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=Oe();for(const E of l){f.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of c){p.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((E=>({Ls:E,removedBatchIds:f,addedBatchIds:p})))}))}))}function cx(s,e){const n=Ee(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,E,T){const S=E.batch,R=S.keys();let U=Z.resolve();return R.forEach((Q=>{U=U.next((()=>T.getEntry(y,Q))).next((J=>{const k=E.docVersions.get(Q);Be(k!==null,48541),J.version.compareTo(k)<0&&(S.applyToRemoteDocument(J,E),J.isValidDocument()&&(J.setReadTime(E.commitVersion),T.addEntry(J)))}))})),U.next((()=>p.mutationQueue.removeMutationBatch(y,S)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Oe();for(let E=0;E<p.mutationResults.length;++E)p.mutationResults[E].transformResults.length>0&&(y=y.add(p.batch.mutations[E].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function PE(s){const e=Ee(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function ux(s,e){const n=Ee(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,S)=>{const R=l.get(S);if(!R)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,S))));let U=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?U=U.withResumeToken(Qt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),l=l.insert(S,U),(function(J,k,P){return J.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=ax?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(R,U,T)&&p.push(n.Pi.updateTargetData(c,U))}));let y=vs(),E=Oe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(hx(c,f,e.documentUpdates).next((T=>{y=T.ks,E=T.qs}))),!r.isEqual(ve.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return Z.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,E))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function hx(s,e,n){let r=Oe(),l=Oe();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=vs();return n.forEach(((p,y)=>{const E=c.get(p);y.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(ve.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):ae(lp,"Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function fx(s,e){const n=Ee(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$m),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dx(s,e){const n=Ee(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,Z.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new or(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Cm(s,e,n){const r=Ee(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!bo(f))throw f;ae(lp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function g0(s,e,n){const r=Ee(s);let l=ve.min(),c=Oe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,E,T){const S=Ee(y),R=S.xs.get(T);return R!==void 0?Z.resolve(S.Ms.get(R)):S.Pi.getTargetData(E,T)})(r,f,ji(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:ve.min(),n?c:Oe()))).next((p=>(mx(r,JR(e),p),{documents:p,Qs:c})))))}function mx(s,e,n){let r=s.Os.get(e)||ve.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class y0{constructor(){this.activeTargetIds=rC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class px{constructor(){this.Mo=new y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gx{Oo(e){}shutdown(){}}const _0="ConnectivityMonitor";class v0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(_0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(_0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uu=null;function xm(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}const im="RestConnection",yx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _x{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===oh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const f=xm(),p=this.zo(e,n.toUriEncodedString());ae(im,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:E}=new URL(p),T=ca(E);return this.Jo(e,p,y,r,T).then((S=>(ae(im,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw fo(im,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(e,n,r,l,c,f){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Eo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=yx[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class vx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Kt="WebChannelConnection";class Ex extends _x{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const f=xm();return new Promise(((p,y)=>{const E=new z1;E.setWithCredentials(!0),E.listenOnce(B1.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Gu.NO_ERROR:const S=E.getResponseJson();ae(Kt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case Gu.TIMEOUT:ae(Kt,`RPC '${e}' ${f} timed out`),y(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const R=E.getStatus();if(ae(Kt,`RPC '${e}' ${f} failed with status:`,R,"response text:",E.getResponseText()),R>0){let U=E.getResponseJson();Array.isArray(U)&&(U=U[0]);const Q=U?.error;if(Q&&Q.status&&Q.message){const J=(function(P){const ee=P.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ee)>=0?ee:$.UNKNOWN})(Q.status);y(new re(J,Q.message))}else y(new re($.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new re($.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{ae(Kt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);ae(Kt,`RPC '${e}' ${f} sending request:`,l),E.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=xm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=H1(),p=F1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");ae(Kt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const S=f.createWebChannel(T,y);this.I_(S);let R=!1,U=!1;const Q=new vx({Yo:k=>{U?ae(Kt,`Not sending because RPC '${e}' stream ${l} is closed:`,k):(R||(ae(Kt,`Opening RPC '${e}' stream ${l} transport.`),S.open(),R=!0),ae(Kt,`RPC '${e}' stream ${l} sending:`,k),S.send(k))},Zo:()=>S.close()}),J=(k,P,ee)=>{k.listen(P,(W=>{try{ee(W)}catch(te){setTimeout((()=>{throw te}),0)}}))};return J(S,Cl.EventType.OPEN,(()=>{U||(ae(Kt,`RPC '${e}' stream ${l} transport opened.`),Q.o_())})),J(S,Cl.EventType.CLOSE,(()=>{U||(U=!0,ae(Kt,`RPC '${e}' stream ${l} transport closed`),Q.a_(),this.E_(S))})),J(S,Cl.EventType.ERROR,(k=>{U||(U=!0,fo(Kt,`RPC '${e}' stream ${l} transport errored. Name:`,k.name,"Message:",k.message),Q.a_(new re($.UNAVAILABLE,"The operation could not be completed")))})),J(S,Cl.EventType.MESSAGE,(k=>{if(!U){const P=k.data[0];Be(!!P,16349);const ee=P,W=ee?.error||ee[0]?.error;if(W){ae(Kt,`RPC '${e}' stream ${l} received error:`,W);const te=W.status;let ne=(function(w){const C=xt[w];if(C!==void 0)return wE(C)})(te),le=W.message;ne===void 0&&(ne=$.INTERNAL,le="Unknown error status: "+te+" with message "+W.message),U=!0,Q.a_(new re(ne,le)),S.close()}else ae(Kt,`RPC '${e}' stream ${l} received:`,P),Q.u_(P)}})),J(p,q1.STAT_EVENT,(k=>{k.stat===pm.PROXY?ae(Kt,`RPC '${e}' stream ${l} detected buffering proxy`):k.stat===pm.NOPROXY&&ae(Kt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sm(){return typeof document<"u"?document:null}function Lh(s){return new SC(s,!0)}class UE{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const E0="PersistentStream";class zE{constructor(e,n,r,l,c,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new re($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(E0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ae(E0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tx extends zE{constructor(e,n,r,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=CC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return ve.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?ve.min():f.readTime?Vi(f.readTime):ve.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Rm(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=Em(y)?{documents:NC(c,y)}:{query:DC(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=xE(c,f.resumeToken);const E=Am(c,f.expectedCount);E!==null&&(p.expectedCount=E)}else if(f.snapshotVersion.compareTo(ve.min())>0){p.readTime=dh(c,f.snapshotVersion.toTimestamp());const E=Am(c,f.expectedCount);E!==null&&(p.expectedCount=E)}return p})(this.serializer,e);const r=MC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Rm(this.serializer),n.removeTarget=e,this.q_(n)}}class bx extends zE{constructor(e,n,r,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IC(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Rm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>xC(this.serializer,r)))};this.q_(n)}}class Ax{}class Sx extends Ax{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Sm(n,r),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re($.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Sm(n,r),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new re($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_s(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const la="RemoteStore";class Rx{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{fa(this)&&(ae(la,"Restarting streams for network reachability change."),await(async function(y){const E=Ee(y);E.Ea.add(4),await nc(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Ph(E)})(this))}))})),this.Ra=new wx(r,l)}}async function Ph(s){if(fa(s))for(const e of s.da)await e(!0)}async function nc(s){for(const e of s.da)await e(!1)}function BE(s,e){const n=Ee(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fp(n)?hp(n):Ao(n).O_()&&up(n,e))}function cp(s,e){const n=Ee(s),r=Ao(n);n.Ia.delete(e),r.O_()&&qE(n,e),n.Ia.size===0&&(r.O_()?r.L_():fa(n)&&n.Ra.set("Unknown"))}function up(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(s).Y_(e)}function qE(s,e){s.Va.Ue(e),Ao(s).Z_(e)}function hp(s){s.Va=new EC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ao(s).start(),s.Ra.ua()}function fp(s){return fa(s)&&!Ao(s).x_()&&s.Ia.size>0}function fa(s){return Ee(s).Ea.size===0}function FE(s){s.Va=void 0}async function Cx(s){s.Ra.set("Online")}async function xx(s){s.Ia.forEach(((e,n)=>{up(s,e)}))}async function Ix(s,e){FE(s),fp(s)?(s.Ra.ha(e),hp(s)):s.Ra.set("Unknown")}async function Nx(s,e,n){if(s.Ra.set("Online"),e instanceof CE&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){ae(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(s,r)}else if(e instanceof Xu?s.Va.Ze(e):e instanceof RE?s.Va.st(e):s.Va.tt(e),!n.isEqual(ve.min()))try{const r=await PE(s.localStore);n.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(E);T&&c.Ia.set(E,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,E)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Qt.EMPTY_BYTE_STRING,T.snapshotVersion)),qE(c,y);const S=new or(T.target,y,E,T.sequenceNumber);up(c,S)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ae(la,"Failed to raise snapshot:",r),await ph(s,r)}}async function ph(s,e,n){if(!bo(e))throw e;s.Ea.add(1),await nc(s),s.Ra.set("Offline"),n||(n=()=>PE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ae(la,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ph(s)}))}function HE(s,e){return e().catch((n=>ph(s,n,e)))}async function Uh(s){const e=Ee(s),n=yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$m;for(;Dx(e);)try{const l=await fx(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,Ox(e,l)}catch(l){await ph(e,l)}GE(e)&&QE(e)}function Dx(s){return fa(s)&&s.Ta.length<10}function Ox(s,e){s.Ta.push(e);const n=yr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function GE(s){return fa(s)&&!yr(s).x_()&&s.Ta.length>0}function QE(s){yr(s).start()}async function Mx(s){yr(s).ra()}async function jx(s){const e=yr(s);for(const n of s.Ta)e.ea(n.mutations)}async function Vx(s,e,n){const r=s.Ta.shift(),l=np.from(r,e,n);await HE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Uh(s)}async function kx(s,e){e&&yr(s).X_&&await(async function(r,l){if((function(f){return yC(f)&&f!==$.ABORTED})(l.code)){const c=r.Ta.shift();yr(r).B_(),await HE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Uh(r)}})(s,e),GE(s)&&QE(s)}async function T0(s,e){const n=Ee(s);n.asyncQueue.verifyOperationInProgress(),ae(la,"RemoteStore received new credentials");const r=fa(n);n.Ea.add(3),await nc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function Lx(s,e){const n=Ee(s);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await nc(n),n.Ra.set("Unknown"))}function Ao(s){return s.ma||(s.ma=(function(n,r,l){const c=Ee(n);return c.sa(),new Tx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:Cx.bind(null,s),t_:xx.bind(null,s),r_:Ix.bind(null,s),H_:Nx.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),fp(s)?hp(s):s.Ra.set("Unknown")):(await s.ma.stop(),FE(s))}))),s.ma}function yr(s){return s.fa||(s.fa=(function(n,r,l){const c=Ee(n);return c.sa(),new bx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mx.bind(null,s),r_:kx.bind(null,s),ta:jx.bind(null,s),na:Vx.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Uh(s)):(await s.fa.stop(),s.Ta.length>0&&(ae(la,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dp{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const f=Date.now()+r,p=new dp(e,n,f,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(s,e){if(_s("AsyncQueue",`${e}: ${s}`),bo(s))return new re($.UNAVAILABLE,`${e}: ${s}`);throw s}class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=xl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class b0{constructor(){this.ga=new ot(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class _o{constructor(e,n,r,l,c,f,p,y,E){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,r,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new _o(e,n,ho.emptySet(n),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class Px{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ux{constructor(){this.queries=A0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Ee(n),c=l.queries;l.queries=A0(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new re($.ABORTED,"Firestore shutting down"))}}function A0(){return new ha((s=>fE(s)),Oh)}async function pp(s,e){const n=Ee(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new Px,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=mp(f,`Initialization of query '${so(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&yp(n)}async function gp(s,e){const n=Ee(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zx(s,e){const n=Ee(s);let r=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&yp(n)}function Bx(s,e,n){const r=Ee(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function yp(s){s.Ca.forEach((e=>{e.next()}))}var Im,S0;(S0=Im||(Im={})).Ma="default",S0.Cache="cache";class _p{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new _o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Im.Cache}}class KE{constructor(e){this.key=e}}class YE{constructor(e){this.key=e}}class qx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=dE(e),this.tu=new ho(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new b0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,S)=>{const R=l.get(T),U=Mh(this.query,S)?S:null,Q=!!R&&this.mutatedKeys.has(R.key),J=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let k=!1;R&&U?R.data.isEqual(U.data)?Q!==J&&(r.track({type:3,doc:U}),k=!0):this.su(R,U)||(r.track({type:2,doc:U}),k=!0,(y&&this.eu(U,y)>0||E&&this.eu(U,E)<0)&&(p=!0)):!R&&U?(r.track({type:0,doc:U}),k=!0):R&&!U&&(r.track({type:1,doc:R}),k=!0,(y||E)&&(p=!0)),k&&(U?(f=f.add(U),c=J?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(U,Q){const J=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:k})}};return J(U)-J(Q)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,E=y!==this.Za;return this.Za=y,f.length!==0||E?{snapshot:new _o(this.query,e.tu,c,f,e.mutatedKeys,y===0,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new YE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new KE(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vp="SyncEngine";class Fx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Hx{constructor(e){this.key=e,this.hu=!1}}class Gx{constructor(e,n,r,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ha((p=>fE(p)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(me.comparator),this.Au=new Map,this.Ru=new rp,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qx(s,e,n=!0){const r=eT(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await XE(r,e,n,!0),l}async function Kx(s,e){const n=eT(s);await XE(n,e,!0,!1)}async function XE(s,e,n,r){const l=await dx(s.localStore,ji(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await Yx(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&BE(s.remoteStore,l),p}async function Yx(s,e,n,r,l){s.pu=(S,R,U)=>(async function(J,k,P,ee){let W=k.view.ru(P);W.Cs&&(W=await g0(J.localStore,k.query,!1).then((({documents:N})=>k.view.ru(N,W))));const te=ee&&ee.targetChanges.get(k.targetId),ne=ee&&ee.targetMismatches.get(k.targetId)!=null,le=k.view.applyChanges(W,J.isPrimaryClient,te,ne);return R0(J,k.targetId,le.au),le.snapshot})(s,S,R,U);const c=await g0(s.localStore,e,!0),f=new qx(e,c.Qs),p=f.ru(c.documents),y=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),E=f.applyChanges(p,s.isPrimaryClient,y);R0(s,n,E.au);const T=new Fx(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),E.snapshot}async function Xx(s,e,n){const r=Ee(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((f=>!Oh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Cm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&cp(r.remoteStore,l.targetId),Nm(r,l.targetId)})).catch(To)):(Nm(r,l.targetId),await Cm(r.localStore,l.targetId,!0))}async function $x(s,e){const n=Ee(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cp(n.remoteStore,r.targetId))}async function Wx(s,e,n){const r=sI(s);try{const l=await(function(f,p){const y=Ee(f),E=We.now(),T=p.reduce(((U,Q)=>U.add(Q.key)),Oe());let S,R;return y.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let Q=vs(),J=Oe();return y.Ns.getEntries(U,T).next((k=>{Q=k,Q.forEach(((P,ee)=>{ee.isValidDocument()||(J=J.add(P))}))})).next((()=>y.localDocuments.getOverlayedDocuments(U,Q))).next((k=>{S=k;const P=[];for(const ee of p){const W=fC(ee,S.get(ee.key).overlayedDocument);W!=null&&P.push(new br(ee.key,W,sE(W.value.mapValue),si.exists(!0)))}return y.mutationQueue.addMutationBatch(U,E,P,p)})).next((k=>{R=k;const P=k.applyToLocalDocumentSet(S,J);return y.documentOverlayCache.saveOverlays(U,k.batchId,P)}))})).then((()=>({batchId:R.batchId,changes:pE(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let E=f.Vu[f.currentUser.toKey()];E||(E=new ot(De)),E=E.insert(p,y),f.Vu[f.currentUser.toKey()]=E})(r,l.batchId,n),await ic(r,l.changes),await Uh(r.remoteStore)}catch(l){const c=mp(l,"Failed to persist write");n.reject(c)}}async function $E(s,e){const n=Ee(s);try{const r=await ux(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(Be(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Be(f.hu,14607):l.removedDocuments.size>0&&(Be(f.hu,42227),f.hu=!1))})),await ic(n,r,e)}catch(r){await To(r)}}function w0(s,e,n){const r=Ee(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=Ee(f);y.onlineState=p;let E=!1;y.queries.forEach(((T,S)=>{for(const R of S.Sa)R.va(p)&&(E=!0)})),E&&yp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zx(s,e,n){const r=Ee(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let f=new ot(me.comparator);f=f.insert(c,Xt.newNoDocument(c,ve.min()));const p=Oe().add(c),y=new kh(ve.min(),new Map,new ot(De),f,p);await $E(r,y),r.du=r.du.remove(c),r.Au.delete(e),Ep(r)}else await Cm(r.localStore,e,!1).then((()=>Nm(r,e,n))).catch(To)}async function Jx(s,e){const n=Ee(s),r=e.batch.batchId;try{const l=await cx(n.localStore,e);ZE(n,r,null),WE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ic(n,l)}catch(l){await To(l)}}async function eI(s,e,n){const r=Ee(s);try{const l=await(function(f,p){const y=Ee(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let T;return y.mutationQueue.lookupMutationBatch(E,p).next((S=>(Be(S!==null,37113),T=S.keys(),y.mutationQueue.removeMutationBatch(E,S)))).next((()=>y.mutationQueue.performConsistencyCheck(E))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(E,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,T))).next((()=>y.localDocuments.getDocuments(E,T)))}))})(r.localStore,e);ZE(r,e,n),WE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ic(r,l)}catch(l){await To(l)}}function WE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function ZE(s,e,n){const r=Ee(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function Nm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||JE(s,r)}))}function JE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(cp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Ep(s))}function R0(s,e,n){for(const r of n)r instanceof KE?(s.Ru.addReference(r.key,e),tI(s,r)):r instanceof YE?(ae(vp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||JE(s,r.key)):_e(19791,{wu:r})}function tI(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ae(vp,"New document in limbo: "+n),s.Eu.add(r),Ep(s))}function Ep(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(Je.fromString(e)),r=s.fu.next();s.Au.set(r,new Hx(n)),s.du=s.du.insert(n,r),BE(s.remoteStore,new or(ji(Dh(n.path)),r,"TargetPurposeLimboResolution",xh.ce))}}async function ic(s,e,n){const r=Ee(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,n).then((E=>{if((E||n)&&r.isPrimaryClient){const T=E?!E.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(E){l.push(E);const T=op.As(y.targetId,E);c.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,E){const T=Ee(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Z.forEach(E,(R=>Z.forEach(R.Es,(U=>T.persistence.referenceDelegate.addReference(S,R.targetId,U))).next((()=>Z.forEach(R.ds,(U=>T.persistence.referenceDelegate.removeReference(S,R.targetId,U)))))))))}catch(S){if(!bo(S))throw S;ae(lp,"Failed to update sequence numbers: "+S)}for(const S of E){const R=S.targetId;if(!S.fromCache){const U=T.Ms.get(R),Q=U.snapshotVersion,J=U.withLastLimboFreeSnapshotVersion(Q);T.Ms=T.Ms.insert(R,J)}}})(r.localStore,c))}async function nI(s,e){const n=Ee(s);if(!n.currentUser.isEqual(e)){ae(vp,"User change. New user:",e.toKey());const r=await LE(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new re($.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(n,r.Ls)}}function iI(s,e){const n=Ee(s),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let l=Oe();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function eT(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zx.bind(null,e),e.Pu.H_=zx.bind(null,e.eventManager),e.Pu.yu=Bx.bind(null,e.eventManager),e}function sI(s){const e=Ee(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eI.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lx(this.persistence,new rx,e.initialUser,this.serializer)}Cu(e){return new kE(ap.mi,this.serializer)}Du(e){return new px}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class rI extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Be(this.persistence.referenceDelegate instanceof mh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new HC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new kE((r=>mh.mi(r,n)),this.serializer)}}class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nI.bind(null,this.syncEngine),await Lx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ux})()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=(function(c){return new Ex(c)})(e.databaseInfo);return(function(c,f,p,y){return new Sx(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,f,p){return new Rx(r,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>w0(this.syncEngine,n,0)),(function(){return v0.v()?new v0:new gx})())}createSyncEngine(e,n){return(function(l,c,f,p,y,E,T){const S=new Gx(l,c,f,p,y,E);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ee(n);ae(la,"RemoteStore shutting down."),r.Ea.add(5),await nc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dm.provider={build:()=>new Dm};class Tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const _r="FirestoreClient";class aI{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Yt.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{ae(_r,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ae(_r,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function rm(s,e){s.asyncQueue.verifyOperationInProgress(),ae(_r,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await LE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function C0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await oI(s);ae(_r,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>T0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>T0(e.remoteStore,l))),s._onlineComponents=e}async function oI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ae(_r,"Using user provided OfflineComponentProvider");try{await rm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await rm(s,new gh)}}else ae(_r,"Using default OfflineComponentProvider"),await rm(s,new rI(void 0));return s._offlineComponents}async function tT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ae(_r,"Using user provided OnlineComponentProvider"),await C0(s,s._uninitializedComponentsProvider._online)):(ae(_r,"Using default OnlineComponentProvider"),await C0(s,new Dm))),s._onlineComponents}function lI(s){return tT(s).then((e=>e.syncEngine))}async function yh(s){const e=await tT(s),n=e.eventManager;return n.onListen=Qx.bind(null,e.syncEngine),n.onUnlisten=Xx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$x.bind(null,e.syncEngine),n}function cI(s,e,n={}){const r=new ps;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Tp({next:R=>{T.Nu(),f.enqueueAndForget((()=>gp(c,S)));const U=R.docs.has(p);!U&&R.fromCache?E.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&R.fromCache&&y&&y.source==="server"?E.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),S=new _p(Dh(p.path),T,{includeMetadataChanges:!0,qa:!0});return pp(c,S)})(await yh(s),s.asyncQueue,e,n,r))),r.promise}function uI(s,e,n={}){const r=new ps;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Tp({next:R=>{T.Nu(),f.enqueueAndForget((()=>gp(c,S))),R.fromCache&&y.source==="server"?E.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),S=new _p(p,T,{includeMetadataChanges:!0,qa:!0});return pp(c,S)})(await yh(s),s.asyncQueue,e,n,r))),r.promise}function nT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const x0=new Map;const iT="firestore.googleapis.com",I0=!0;class N0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iT,this.ssl=I0}else this.host=e.host,this.ssl=e.ssl??I0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gR;switch(r.type){case"firstParty":return new ER(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=x0.get(n);r&&(ae("ComponentProvider","Removing Datastore"),x0.delete(n),r.terminate())})(this),Promise.resolve()}}function hI(s,e,n,r={}){s=An(s,zh);const l=ca(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Vm(`https://${p}`),km("Firestore",!0)),c.host!==iT&&c.host!==p&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!ia(y,f)&&(s._setSettings(y),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=Yt.MOCK_USER;else{E=W0(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Yt(S)}s._authCredentials=new yR(new Q1(E,T))}}class da{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zl(n,ht._jsonSchema))return new ht(e,r||null,new me(Je.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Nt("string",ht._jsonSchemaVersion),referencePath:Nt("string")};class hr extends da{constructor(e,n,r){super(e,n,Dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new me(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function bp(s,e,...n){if(s=_t(s),K1("collection","path",e),s instanceof zh){const r=Je.fromString(e,...n);return Fv(r),new hr(s,null,r)}{if(!(s instanceof ht||s instanceof hr))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Je.fromString(e,...n));return Fv(r),new hr(s.firestore,null,r)}}function sc(s,e,...n){if(s=_t(s),arguments.length===1&&(e=Xm.newId()),K1("doc","path",e),s instanceof zh){const r=Je.fromString(e,...n);return qv(r),new ht(s,null,new me(r))}{if(!(s instanceof ht||s instanceof hr))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Je.fromString(e,...n));return qv(r),new ht(s.firestore,s instanceof hr?s.converter:null,new me(r))}}const D0="AsyncQueue";class O0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UE(this,"async_queue_retry"),this._c=()=>{const r=sm();r&&ae(D0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=sm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ps;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;ae(D0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",M0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=dp.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:M0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function j0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class vr extends zh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new O0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O0(e),this._firestoreClient=void 0,await e}}}function fI(s,e){const n=typeof s=="object"?s:Um(),r=typeof s=="string"?s:oh,l=Ah(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=Y0("firestore");c&&hI(l,...c)}return l}function Bh(s){if(s._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dI(s),s._firestoreClient}function dI(s){const e=s._freezeSettings(),n=(function(l,c,f,p){return new LR(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,nT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new aI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Qt.fromBase64String(e))}catch(n){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Nt("string",zn._jsonSchemaVersion),bytes:Nt("string")};class qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._methodName=e}}class ki{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:Nt("string",ki._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};class Li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Li(e.vectorValues);throw new re($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Nt("string",Li._jsonSchemaVersion),vectorValues:Nt("object")};const mI=/^__.*__$/;class pI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new br(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}class sT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:s})}}class Sp{constructor(e,n,r,l,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rT(this.Ac)&&mI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Cc(e,n,r,l=!1){return new Sp({Ac:e,methodName:n,Dc:r,path:Gt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fh(s){const e=s._freezeSettings(),n=Lh(s._databaseId);return new gI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function aT(s,e,n,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);wp("Data must be an object, but it was:",f,r);const p=oT(r,f);let y,E;if(c.merge)y=new bn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const S of c.mergeFields){const R=Om(e,S,n);if(!f.contains(R))throw new re($.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);cT(T,R)||T.push(R)}y=new bn(T),E=f.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,E=f.fieldTransforms;return new pI(new un(p),y,E)}class Hh extends Ap{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function yI(s,e,n,r){const l=s.Cc(1,e,n);wp("Data must be an object, but it was:",l,r);const c=[],f=un.empty();Tr(r,((y,E)=>{const T=Rp(e,y,n);E=_t(E);const S=l.yc(T);if(E instanceof Hh)c.push(T);else{const R=rc(E,S);R!=null&&(c.push(T),f.set(T,R))}}));const p=new bn(c);return new sT(f,p,l.fieldTransforms)}function _I(s,e,n,r,l,c){const f=s.Cc(1,e,n),p=[Om(e,r,n)],y=[l];if(c.length%2!=0)throw new re($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<c.length;R+=2)p.push(Om(e,c[R])),y.push(c[R+1]);const E=[],T=un.empty();for(let R=p.length-1;R>=0;--R)if(!cT(E,p[R])){const U=p[R];let Q=y[R];Q=_t(Q);const J=f.yc(U);if(Q instanceof Hh)E.push(U);else{const k=rc(Q,J);k!=null&&(E.push(U),T.set(U,k))}}const S=new bn(E);return new sT(T,S,f.fieldTransforms)}function vI(s,e,n,r=!1){return rc(n,s.Cc(r?4:3,e))}function rc(s,e){if(lT(s=_t(s)))return wp("Unsupported field value:",e,s),oT(s,e);if(s instanceof Ap)return(function(r,l){if(!rT(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let f=0;for(const p of r){let y=rc(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=We.fromDate(r);return{timestampValue:dh(l.serializer,c)}}if(r instanceof We){const c=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dh(l.serializer,c)}}if(r instanceof ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:xE(l.serializer,r._byteString)};if(r instanceof ht){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:sp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Li)return(function(f,p){return{mapValue:{fields:{[nE]:{stringValue:iE},[lh]:{arrayValue:{values:f.toArray().map((E=>{if(typeof E!="number")throw p.Sc("VectorValues must only contain numeric values.");return tp(p.serializer,E)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Ch(r)}`)})(s,e)}function oT(s,e){const n={};return $1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(s,((r,l)=>{const c=rc(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function lT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof We||s instanceof ki||s instanceof zn||s instanceof ht||s instanceof Ap||s instanceof Li)}function wp(s,e,n){if(!lT(n)||!Y1(n)){const r=Ch(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Om(s,e,n){if((e=_t(e))instanceof qh)return e._internalPath;if(typeof e=="string")return Rp(s,e);throw _h("Field path arguments must be of type string or ",s,!1,void 0,n)}const EI=new RegExp("[~\\*/\\[\\]]");function Rp(s,e,n){if(e.search(EI)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new qh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function _h(s,e,n,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new re($.INVALID_ARGUMENT,p+s+y)}function cT(s,e){return s.some((n=>n.isEqual(e)))}class uT{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TI extends uT{data(){return super.data()}}function Cp(s,e){return typeof e=="string"?Rp(s,e):e instanceof qh?e._internalPath:e._delegate._internalPath}function hT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class bI extends xp{}function fT(s,e,...n){let r=[];e instanceof xp&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((y=>y instanceof Ip)).length,p=c.filter((y=>y instanceof Gh)).length;if(f>1||f>0&&p>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Gh extends bI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gh(e,n,r)}_apply(e){const n=this._parse(e);return mT(e._query,n),new da(e.firestore,e.converter,Tm(e._query,n))}_parse(e){const n=Fh(e.firestore);return(function(c,f,p,y,E,T,S){let R;if(E.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){k0(S,T);const Q=[];for(const J of S)Q.push(V0(y,c,J));R={arrayValue:{values:Q}}}else R=V0(y,c,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||k0(S,T),R=vI(p,f,S,T==="in"||T==="not-in");return It.create(E,T,R)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dT(s,e,n){const r=e,l=Cp("where",s);return Gh._create(l,r,n)}class Ip extends xp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ip(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const y of p)mT(f,y),f=Tm(f,y)})(e._query,n),new da(e.firestore,e.converter,Tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function V0(s,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&n.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!me.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(s,new me(r))}if(n instanceof ht)return Wv(s,n._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function k0(s,e){if(!Array.isArray(s)||s.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mT(s,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AI{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Tr(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[lh].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Li(n)}convertGeoPoint(e){return new ki(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=mr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);Be(jE(r),9688,{name:e});const l=new ql(r.get(1),r.get(3)),c=new me(r.popFirst(5));return l.isEqual(n)||_s(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function pT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Nl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ta extends uT{constructor(e,n,r,l,c,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ta._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",ta._jsonSchema={type:Nt("string",ta._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class $u extends ta{data(e={}){return super.data(e)}}class na{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Nl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new $u(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Nl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new $u(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Nl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,T=-1;return p.type!==0&&(E=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:SI(p.type),doc:y,oldIndex:E,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}function wI(s){s=An(s,ht);const e=An(s.firestore,vr);return cI(Bh(e),s._key).then((n=>yT(e,s,n)))}na._jsonSchemaVersion="firestore/querySnapshot/1.0",na._jsonSchema={type:Nt("string",na._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Np extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function RI(s){s=An(s,da);const e=An(s.firestore,vr),n=Bh(e),r=new Np(e);return hT(s._query),uI(n,s._query).then((l=>new na(e,r,s,l)))}function CI(s,e,n){s=An(s,ht);const r=An(s.firestore,vr),l=pT(s.converter,e);return Dp(r,[aT(Fh(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,si.none())])}function gT(s,e,n,...r){s=An(s,ht);const l=An(s.firestore,vr),c=Fh(l);let f;return f=typeof(e=_t(e))=="string"||e instanceof qh?_I(c,"updateDoc",s._key,e,n,r):yI(c,"updateDoc",s._key,e),Dp(l,[f.toMutation(s._key,si.exists(!0))])}function xI(s,e){const n=An(s.firestore,vr),r=sc(s),l=pT(s.converter,e);return Dp(n,[aT(Fh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,si.exists(!1))]).then((()=>r))}function II(s,...e){s=_t(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||j0(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(j0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,f,p;if(s instanceof ht)f=An(s.firestore,vr),p=Dh(s._key.path),c={next:y=>{e[r]&&e[r](yT(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=An(s,da);f=An(y.firestore,vr),p=y._query;const E=new Np(f);c={next:T=>{e[r]&&e[r](new na(f,E,y,T))},error:e[r+1],complete:e[r+2]},hT(s._query)}return(function(E,T,S,R){const U=new Tp(R),Q=new _p(T,U,S);return E.asyncQueue.enqueueAndForget((async()=>pp(await yh(E),Q))),()=>{U.Nu(),E.asyncQueue.enqueueAndForget((async()=>gp(await yh(E),Q)))}})(Bh(f),p,l,c)}function Dp(s,e){return(function(r,l){const c=new ps;return r.asyncQueue.enqueueAndForget((async()=>Wx(await lI(r),l,c))),c.promise})(Bh(s),e)}function yT(s,e,n){const r=n.docs.get(e._key),l=new Np(s);return new ta(s,l,e._key,r,new Nl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){Eo=l})(ua),sa(new fr("firestore",((r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new vr(new _R(r.getProvider("auth-internal")),new TR(f,r.getProvider("app-check-internal")),(function(E,T){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(E.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Di(Pv,Uv,e),Di(Pv,Uv,"esm2020")})();var NI="firebase",DI="12.6.0";Di(NI,DI,"app");const _T="firebasestorage.googleapis.com",OI="storageBucket",MI=120*1e3,jI=600*1e3;class qi extends Bi{constructor(e,n,r=0){super(am(e),`Firebase Storage: ${n} (${am(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ui;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ui||(Ui={}));function am(s){return"storage/"+s}function VI(){const s="An unknown error occurred, please check the error payload for server response.";return new qi(Ui.UNKNOWN,s)}function kI(){return new qi(Ui.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LI(){return new qi(Ui.CANCELED,"User canceled the upload/download.")}function PI(s){return new qi(Ui.INVALID_URL,"Invalid URL '"+s+"'.")}function UI(s){return new qi(Ui.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function L0(s){return new qi(Ui.INVALID_ARGUMENT,s)}function vT(){return new qi(Ui.APP_DELETED,"The Firebase app was deleted.")}function zI(s){return new qi(Ui.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ii.makeFromUrl(e,n)}catch{return new ii(e,"")}if(r.path==="")return r;throw UI(e)}static makeFromUrl(e,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function c(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+l+f,"i"),y={bucket:1,path:3};function E(te){te.path_=decodeURIComponent(te.path)}const T="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",U=new RegExp(`^https?://${S}/${T}/b/${l}/o${R}`,"i"),Q={bucket:1,path:3},J=n===_T?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",P=new RegExp(`^https?://${J}/${l}/${k}`,"i"),W=[{regex:p,indices:y,postModify:c},{regex:U,indices:Q,postModify:E},{regex:P,indices:{bucket:1,path:2},postModify:E}];for(let te=0;te<W.length;te++){const ne=W[te],le=ne.regex.exec(e);if(le){const N=le[ne.indices.bucket];let w=le[ne.indices.path];w||(w=""),r=new ii(N,w),ne.postModify(r);break}}if(r==null)throw PI(e);return r}}class BI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qI(s,e,n){let r=1,l=null,c=null,f=!1,p=0;function y(){return p===2}let E=!1;function T(...k){E||(E=!0,e.apply(null,k))}function S(k){l=setTimeout(()=>{l=null,s(U,y())},k)}function R(){c&&clearTimeout(c)}function U(k,...P){if(E){R();return}if(k){R(),T.call(null,k,...P);return}if(y()||f){R(),T.call(null,k,...P);return}r<64&&(r*=2);let W;p===1?(p=2,W=0):W=(r+Math.random())*1e3,S(W)}let Q=!1;function J(k){Q||(Q=!0,R(),!E&&(l!==null?(k||(p=2),clearTimeout(l),S(0)):k||(p=1)))}return S(0),c=setTimeout(()=>{f=!0,J(!0)},n),J}function FI(s){s(!1)}function HI(s){return s!==void 0}function P0(s,e,n,r){if(r<e)throw L0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw L0(`Invalid value for '${s}'. Expected ${n} or less.`)}function GI(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const l=e(r)+"="+e(s[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var vh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(vh||(vh={}));function QI(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||l||c}class KI{constructor(e,n,r,l,c,f,p,y,E,T,S,R=!0,U=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=S,this.retry=R,this.isUsingEmulator=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,J)=>{this.resolve_=Q,this.reject_=J,this.start_()})}start_(){const e=(r,l)=>{if(l){r(!1,new zu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=p=>{const y=p.loaded,E=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,E)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const p=c.getErrorCode()===vh.NO_ERROR,y=c.getStatus();if(!p||QI(y,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===vh.ABORT;r(!1,new zu(!1,null,T));return}const E=this.successCodes_.indexOf(y)!==-1;r(!0,new zu(E,c))})},n=(r,l)=>{const c=this.resolve_,f=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());HI(y)?c(y):c()}catch(y){f(y)}else if(p!==null){const y=VI();y.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,y)):f(y)}else if(l.canceled){const y=this.appDelete_?vT():LI();f(y)}else{const y=kI();f(y)}};this.canceled_?n(!1,new zu(!1,null,!0)):this.backoffId_=qI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function XI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $I(s,e){e&&(s["X-Firebase-GMPID"]=e)}function WI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function ZI(s,e,n,r,l,c,f=!0,p=!1){const y=GI(s.urlParams),E=s.url+y,T=Object.assign({},s.headers);return $I(T,e),YI(T,n),XI(T,c),WI(T,r),new KI(E,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,f,p)}function JI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function eN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}class Eh{constructor(e,n){this._service=e,n instanceof ii?this._location=n:this._location=ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eh(e,n)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eN(this._location.path)}get storage(){return this._service}get parent(){const e=JI(this._location.path);if(e===null)return null;const n=new ii(this._location.bucket,e);return new Eh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zI(e)}}function U0(s,e){const n=e?.[OI];return n==null?null:ii.makeFromBucketSpec(n,s)}function tN(s,e,n,r={}){s.host=`${e}:${n}`;const l=ca(e);l&&(Vm(`https://${s.host}/b`),km("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:W0(c,s.app.options.projectId))}class nN{constructor(e,n,r,l,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=_T,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MI,this._maxUploadRetryTime=jI,this._requests=new Set,l!=null?this._bucket=ii.makeFromBucketSpec(l,this._host):this._bucket=U0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=U0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){P0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eh(this,e)}_makeRequest(e,n,r,l,c=!0){if(this._deleted)return new BI(vT());{const f=ZI(e,this._appId,r,l,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,l).getPromise()}}const z0="@firebase/storage",B0="0.14.0";const ET="storage";function iN(s=Um(),e){s=_t(s);const r=Ah(s,ET).getImmediate({identifier:e}),l=Y0("storage");return l&&sN(r,...l),r}function sN(s,e,n,r={}){tN(s,e,n,r)}function rN(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new nN(n,r,l,e,ua)}function aN(){sa(new fr(ET,rN,"PUBLIC").setMultipleInstances(!0)),Di(z0,B0,""),Di(z0,B0,"esm2020")}aN();const oN={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},Op=e1(oN),zi=mR(Op),ma=fI(Op);iN(Op);const TT=async(s,e,n={})=>{try{const l=(await ZS(zi,s,e)).user;return await CI(sc(ma,"users",l.uid),{email:s,nombres:n.nombres||"",apellidos:n.apellidos||"",fechaNacimiento:n.fechaNacimiento||null,dui:n.dui||"",genero:n.genero||"",direccion:n.direccion||"",telefono:n.telefono||"",emergenciaNombre:n.emergenciaNombre||"",emergenciaTelefono:n.emergenciaTelefono||"",emergenciaParentesco:n.emergenciaParentesco||"",tipoPaciente:n.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",l.email),await ew(l),console.log("Email verification sent successfully"),{user:l,error:null}}catch(r){return console.error("Sign up error:",r),{user:null,error:r}}},bT=async(s,e)=>{try{const n=await JS(zi,s,e);return n.user.emailVerified?{user:n.user,error:null}:(await x1(zi),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(n){return console.error("Sign in error:",n),{user:null,error:n}}},AT=async()=>{try{return await x1(zi),{error:null}}catch(s){return console.error("Sign out error:",s),{error:s}}},ST=async s=>{try{return await WS(zi,s),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},Mm=async s=>{try{const e=sc(ma,"users",s),n=await wI(e);return n.exists()?{profile:n.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},wT=async(s,e)=>{try{const n=sc(ma,"users",s);return await gT(n,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(n){return console.error("Update user profile error:",n),{error:n}}},RT=s=>iw(zi,s),CT=async(s,e)=>{try{const n=await new Promise((r,l)=>{const c=new FileReader;c.onload=()=>r(c.result),c.onerror=l,c.readAsDataURL(e)});return await wT(s,{photoURL:n}),{photoURL:n,error:null}}catch(n){return console.error("Upload profile photo error:",n),{photoURL:null,error:n}}},lN=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Mm,onAuthChange:RT,resetPassword:ST,signIn:bT,signOut:AT,signUp:TT,updateUserProfile:wT,uploadProfilePhoto:CT},Symbol.toStringTag,{value:"Module"}));function cN({onLogout:s,userData:e,userType:n}){const[r,l]=he.useState(!1),[c,f]=he.useState(!1),p=he.useRef(null),y=he.useRef(null),E=e&&(e.nombres||e.nombre)||"Usuario",T=n==="admin"||n==="doctor";return he.useEffect(()=>{const S=R=>{p.current&&!p.current.contains(R.target)&&f(!1)};return c&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[c]),he.useEffect(()=>{const S=R=>{y.current&&!y.current.contains(R.target)&&l(!1)};return r&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[r]),m.jsx("header",{className:"header",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"header-content",children:[m.jsx(ti,{to:T?"/staff/dashboard":"/",className:"logo",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),m.jsxs("div",{className:"header-actions",children:[m.jsxs("div",{ref:y,children:[m.jsx("button",{className:"mobile-menu-btn",onClick:()=>l(!r),"aria-label":"Men",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),m.jsxs("nav",{className:`nav-menu ${r?"active":""}`,children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(ti,{to:"/",className:"nav-button",onClick:()=>l(!1),children:"Inicio"}),m.jsx(ti,{to:"/cita",className:"nav-button",onClick:()=>l(!1),children:"Cita"}),m.jsx(ti,{to:"/contacto",className:"nav-button",onClick:()=>l(!1),children:"Contacto"})]}),T&&m.jsx(ti,{to:"/staff/dashboard",className:"nav-button",onClick:()=>l(!1),children:"Dashboard"})]})]}),m.jsxs("div",{className:"profile-container",ref:p,children:[m.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>f(!c),children:[e?.photoURL?m.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("span",{className:"user-name",children:E})]}),c&&m.jsxs("div",{className:"profile-dropdown",children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(ti,{to:"/perfil",className:"dropdown-item",onClick:()=>f(!1),children:"Perfil"}),m.jsx(ti,{to:"/notificaciones",className:"dropdown-item",onClick:()=>f(!1),children:"Notificaciones"})]}),m.jsx("button",{className:"dropdown-item logout",onClick:s,children:"Cerrar sesin"})]})]})]})]})})})}function uN(){return m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),m.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Contacto Principal"}),m.jsxs("div",{className:"contact-info",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),m.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),m.jsx("polyline",{points:"22,6 12,13 2,6"})]}),m.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),m.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),m.jsxs("div",{className:"social-links",children:[m.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),m.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),m.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),m.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),m.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Horarios"}),m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Lunes - Sbado"}),m.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day"}),m.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Domingo"}),m.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const xT=async(s,e)=>{try{const n={userId:s,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdAt:We.now(),updatedAt:We.now()};return{appointmentId:(await xI(bp(ma,"appointments"),n)).id,error:null}}catch(n){return console.error("Error creating appointment:",n),{appointmentId:null,error:n}}},Mp=(s,e)=>{const n=fT(bp(ma,"appointments"),dT("userId","==",s));return II(n,r=>{const l=[];r.forEach(c=>{l.push({id:c.id,...c.data()})}),l.sort((c,f)=>{const p=new Date(`${c.date} ${c.time}`),y=new Date(`${f.date} ${f.time}`);return p-y}),e(l)},r=>{console.error("Error in appointments subscription:",r),e([])})},jp=async(s,e)=>{try{const n=sc(ma,"appointments",s);return await gT(n,{...e,updatedAt:We.now()}),{error:null}}catch(n){return console.error("Error updating appointment:",n),{error:n}}},Qh=async(s,e)=>jp(s,{status:e}),hN=async()=>{try{const s=fT(bp(ma,"appointments"),dT("status","==","programada")),e=await RI(s),n=new Date;let r=0;const l=[];return e.forEach(c=>{const f=c.data(),p=new Date(`${f.date}T${f.time}`),y=new Date(p.getTime()+7200*1e3);n>y&&(l.push(Qh(c.id,"perdida")),r++)}),await Promise.all(l),{updatedCount:r,error:null}}catch(s){return console.error("Error marking overdue appointments:",s),{updatedCount:0,error:s}}},fN=Object.freeze(Object.defineProperty({__proto__:null,createAppointment:xT,markOverdueAppointmentsAsLost:hN,subscribeToUserAppointments:Mp,updateAppointment:jp,updateAppointmentStatus:Qh},Symbol.toStringTag,{value:"Module"})),IT=({isOpen:s,onClose:e,onConfirm:n,title:r,message:l})=>s?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:r}),m.jsx("p",{className:"modal-message",children:l}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:n,children:"S, cancelar cita"})]})]})}):null;function dN({userData:s}){const e=jm(),[n,r]=he.useState([]),[l,c]=he.useState(!1),[f,p]=he.useState(null),[y,E]=he.useState(!0);he.useEffect(()=>{const k=zi.currentUser;if(!k){E(!1);return}const P=Mp(k.uid,ee=>{const W=ee.sort((te,ne)=>{const le=new Date(`${te.date} ${te.time} `),N=new Date(`${ne.date} ${ne.time} `);return le-N});r(W),E(!1)});return()=>P()},[]);const T=k=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[k]||k,S=k=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[k]||k,R=k=>{p(k),c(!0)},U=async()=>{if(f)try{const{error:k}=await Qh(f,"cancelada");k&&(console.error("Error cancelling appointment:",k),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),c(!1),p(null)}catch(k){console.error("Unexpected error:",k),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),c(!1),p(null)}},Q=async k=>{try{const P=new q0({orientation:"portrait",unit:"mm",format:"a4"}),ee=210,W=20,te=ee-W*2;let ne=W;try{const st=await fetch("/COI/logo.png");if(st.ok){const K=await st.blob(),se=await new Promise(ke=>{const Ae=new FileReader;Ae.onload=()=>ke(Ae.result),Ae.readAsDataURL(K)}),fe=new Image;await new Promise(ke=>{fe.onload=ke,fe.src=se});const we=40,Ve=fe.height*we/fe.width,et=(ee-we)/2;P.addImage(se,"PNG",et,ne,we,Ve),ne+=Ve+15}}catch(Ge){console.warn("No se pudo cargar el logo:",Ge)}P.setFontSize(20),P.setFont("helvetica","bold");const le="COMPROBANTE DE CITA",N=P.getTextWidth(le);if(P.text(le,(ee-N)/2,ne),ne+=10,P.setDrawColor(200,200,200),P.line(W,ne,ee-W,ne),ne+=10,P.setFontSize(14),P.setFont("helvetica","bold"),P.text("Detalles de la Cita",W,ne),ne+=8,P.setFontSize(11),P.setFont("helvetica","normal"),P.setFont("helvetica","bold"),P.text("Paciente:",W,ne),P.setFont("helvetica","normal"),P.text(k.patientName||"Usuario",W+30,ne),ne+=7,P.setFont("helvetica","bold"),P.text("Motivo:",W,ne),P.setFont("helvetica","normal"),P.text(k.reason||"No especificado",W+30,ne),ne+=7,P.setFont("helvetica","bold"),P.text("Clnica:",W,ne),P.setFont("helvetica","normal"),P.text(S(k.clinica),W+30,ne),ne+=7,P.setFont("helvetica","bold"),P.text("Fecha:",W,ne),P.setFont("helvetica","normal"),P.text(k.date,W+30,ne),ne+=7,P.setFont("helvetica","bold"),P.text("Hora:",W,ne),P.setFont("helvetica","normal"),P.text(k.time,W+30,ne),ne+=7,P.setFont("helvetica","bold"),P.text("Estado:",W,ne),P.setFont("helvetica","normal"),P.text(T(k.status),W+30,ne),ne+=10,k.notas&&k.notas.trim()){P.setFont("helvetica","bold"),P.text("Notas adicionales:",W,ne),ne+=6,P.setFont("helvetica","normal");const Ge=P.splitTextToSize(k.notas,te);P.text(Ge,W,ne),ne+=Ge.length*6+10}P.setDrawColor(200,200,200),P.line(W,ne,ee-W,ne),ne+=10,P.setFontSize(10),P.setFont("helvetica","italic"),P.setTextColor(100,100,100);const w=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});P.text(`Comprobante generado el: ${w}`,W,ne);const C=P.output("arraybuffer"),M=new Blob([C],{type:"application/pdf"}),D=URL.createObjectURL(M),j=document.createElement("a"),x=`comprobante-cita-${k.date}.pdf`;j.href=D,j.download=x,j.style.display="none",document.body.appendChild(j),j.click(),setTimeout(()=>{document.body.removeChild(j),URL.revokeObjectURL(D)},1500)}catch(P){console.error("Error generating PDF:",P),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}},J=k=>{e("/cita",{state:{editingAppointment:k}})};return m.jsxs("div",{className:"home-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("section",{className:"my-appointments-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx("h2",{className:"section-title",children:"Mis Citas"}),n.length>3&&m.jsxs(ti,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),y?m.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:[m.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),m.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Cargando citas..."})]}):n.length>0?m.jsx(m.Fragment,{children:m.jsx("div",{className:"appointments-grid",children:n.slice(0,3).map(k=>m.jsxs("div",{className:"appointment-card",children:[m.jsxs("div",{className:"appointment-header",children:[m.jsxs("div",{className:"appointment-header-left",children:[m.jsx("div",{className:"appointment-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("button",{className:"download-receipt-btn",onClick:()=>Q(k),title:"Descargar comprobante",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17"})})})]}),m.jsx("span",{className:`appointment-status status-${k.status}`,children:T(k.status)})]}),m.jsxs("div",{className:"appointment-details",children:[m.jsxs("h3",{children:["Paciente: ",k.patientName||"Usuario"]}),m.jsxs("div",{className:"appointment-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:k.date})]}),m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m.jsx("span",{children:k.time})]})]}),k.reason&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Motivo:"})," ",k.reason]}),k.clinica&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Clnica:"})," ",S(k.clinica)]}),k.notas&&k.notas.trim()&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Notas:"})," ",k.notas]})]}),k.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>J(k),title:"Editar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>R(k.id),title:"Cancelar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},k.id))})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx(ti,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),m.jsxs("section",{className:"medical-history-section",children:[m.jsx("h2",{className:"section-title",children:"Historial Clnico"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tu Historial Mdico"}),m.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),m.jsxs("section",{className:"prescriptions-section",children:[m.jsx("h2",{className:"section-title",children:"Recetas"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),m.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tus Recetas Mdicas"}),m.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),m.jsx(IT,{isOpen:l,onClose:()=>{c(!1),p(null)},onConfirm:U,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function mN(){const s=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return m.jsx("div",{className:"contact-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"contact-header",children:[m.jsx("h1",{children:"Nuestras Ubicaciones"}),m.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),m.jsx("div",{className:"clinics-grid",children:s.map(e=>m.jsxs("div",{className:"clinic-card",children:[m.jsxs("div",{className:"clinic-header",children:[m.jsx("h2",{children:e.name}),m.jsx("span",{className:"location-tag",children:e.location})]}),m.jsxs("div",{className:"clinic-info",children:[m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((n,r)=>m.jsxs("div",{className:"info-item",children:[m.jsxs("span",{className:"label",children:[n.type,":"]}),n.whatsapp?m.jsxs("a",{href:`https://wa.me/${n.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[n.number,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):m.jsx("span",{className:"value",children:n.number})]},r))]}),m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),m.jsx("div",{className:"info-item",children:m.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function pN({userData:s}){const[e,n]=he.useState(null),[r,l]=he.useState(!1),[c,f]=he.useState("");he.useEffect(()=>{if(s)n(s);else{const S=localStorage.getItem("userData");S&&n(JSON.parse(S))}},[s]);const p=S=>new Promise((R,U)=>{const Q=new FileReader;Q.onload=J=>{const k=new Image;k.onload=()=>{const P=document.createElement("canvas"),ee=P.getContext("2d");let W=k.width,te=k.height;const ne=800;W>te?W>ne&&(te=te*ne/W,W=ne):te>ne&&(W=W*ne/te,te=ne),P.width=W,P.height=te,ee.drawImage(k,0,0,W,te),P.toBlob(le=>{le?R(le):U(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},k.onerror=()=>U(new Error("Error al cargar la imagen")),k.src=J.target.result},Q.onerror=()=>U(new Error("Error al leer el archivo")),Q.readAsDataURL(S)}),y=S=>{if(!S)return"No especificado";const[R,U,Q]=S.split("-");return new Date(R,U-1,Q).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},E=S=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[S]||S,T=async S=>{const R=S.target.files[0];if(!R)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(R.type)){f("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const Q=5*1024*1024;if(R.size>Q){f("La imagen debe ser menor a 5MB");return}l(!0),f("");const J=zi.currentUser;if(!J){f("Debes estar autenticado para subir una foto"),l(!1);return}try{const k=await p(R),P=new File([k],R.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:ee,error:W}=await CT(J.uid,P);if(W){console.error("Upload error:",W);let te="Error al subir la foto. Por favor, intenta de nuevo.";W.code==="storage/unauthorized"?te="No tienes permisos para subir fotos. Contacta al administrador.":W.code==="storage/canceled"?te="La subida fue cancelada.":W.code==="storage/unknown"&&(te="Error desconocido. Verifica tu conexin a internet."),f(te),l(!1);return}n(te=>({...te,photoURL:ee})),l(!1)}catch(k){console.error("Unexpected error:",k),f(k.message||"Error inesperado. Por favor, intenta de nuevo."),l(!1)}};return e?m.jsx("div",{className:"profile-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"profile-header",children:[m.jsxs("div",{className:"profile-avatar-container",children:[m.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:T,style:{display:"none"}}),m.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:r?m.jsx("div",{className:"upload-spinner"}):e.photoURL?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),m.jsxs("div",{className:"profile-header-info",children:[m.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),m.jsx("p",{className:"profile-email",children:e.email}),c&&m.jsx("p",{className:"upload-error",children:c})]})]}),m.jsxs("div",{className:"profile-sections",children:[m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombres"}),m.jsx("p",{children:e.nombres||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("p",{children:e.apellidos||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("p",{children:y(e.fechaNacimiento)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"DUI"}),m.jsx("p",{children:e.dui||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Gnero"}),m.jsx("p",{children:E(e.genero)})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Correo Electrnico"}),m.jsx("p",{children:e.email||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.telefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Direccin"}),m.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombre"}),m.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Parentesco"}),m.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):m.jsx("div",{className:"profile-page",children:m.jsx("div",{className:"container",children:m.jsx("div",{className:"loading-state",children:m.jsx("p",{children:"Cargando perfil..."})})})})}function gN(){const s=jm(),[e,n]=he.useState([]),[r,l]=he.useState(null),[c,f]=he.useState(!1),[p,y]=he.useState(null),[E,T]=he.useState(!0);he.useEffect(()=>{const P=zi.currentUser;if(!P){T(!1);return}const ee=Mp(P.uid,W=>{const te=W.sort((ne,le)=>{const N=new Date(`${ne.date} ${ne.time}`);return new Date(`${le.date} ${le.time}`)-N});n(te),T(!1)});return()=>ee()},[]);const S=P=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[P]||P,R=P=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[P]||P,U=P=>{l(r===P?null:P)},Q=P=>{y(P),f(!0)},J=async()=>{if(p)try{const{error:P}=await Qh(p,"cancelada");P&&(console.error("Error cancelling appointment:",P),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),f(!1),y(null)}catch(P){console.error("Unexpected error:",P),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),f(!1),y(null)}},k=P=>{s("/cita",{state:{editingAppointment:P}})};return m.jsxs("div",{className:"appointments-list-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"page-header",children:[m.jsxs("button",{className:"back-button",onClick:()=>s("/"),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),m.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),m.jsx("h1",{className:"page-title",children:"Mis Citas"}),m.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?m.jsx("div",{className:"appointments-list",children:e.map(P=>m.jsxs("div",{className:`appointment-list-item ${r===P.id?"expanded":""}`,children:[m.jsxs("div",{className:"appointment-summary",onClick:()=>U(P.id),children:[m.jsxs("div",{className:"summary-content",children:[m.jsxs("div",{className:"summary-date",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:P.date})]}),m.jsx("div",{className:"summary-reason",children:P.reason||"Sin motivo especificado"}),m.jsx("span",{className:`summary-status status-${P.status}`,children:S(P.status)})]}),m.jsx("div",{className:"expand-icon",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),r===P.id&&m.jsxs("div",{className:"appointment-details",children:[m.jsxs("div",{className:"details-grid",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Paciente"}),m.jsx("p",{children:P.patientName||"Usuario"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Hora"}),m.jsx("p",{children:P.time})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Clnica"}),m.jsx("p",{children:R(P.clinica)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Motivo"}),m.jsx("p",{children:P.reason||"No especificado"})]}),P.notas&&P.notas.trim()&&m.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[m.jsx("label",{children:"Notas"}),m.jsx("p",{children:P.notas})]})]}),P.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>k(P),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>Q(P.id),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},P.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx("button",{className:"cta-button",onClick:()=>s("/cita"),children:"Agendar Cita"})]})]}),m.jsx(IT,{isOpen:c,onClose:()=>{f(!1),y(null)},onConfirm:J,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function yN(){const s=Th(),{appointment:e}=s.state||{},n={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},r={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card error",children:[m.jsx("h2",{children:"No se encontr informacin de la cita"}),m.jsx("p",{children:"Parece que has llegado aqu por error."}),m.jsx(ti,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const l=async()=>{const p=await fetch("/COI/logo.png");if(!p.ok)throw new Error("No se pudo obtener el logo");const y=await p.blob();return await new Promise((E,T)=>{const S=new FileReader;S.onload=()=>E(S.result),S.onerror=T,S.readAsDataURL(y)})},c=async()=>{try{const f=new q0({orientation:"portrait",unit:"mm",format:"a4"}),p=210,y=20,E=p-y*2;let T=y;try{const le=await l(),N=new Image;await new Promise((D,j)=>{N.onload=D,N.onerror=j,N.src=le});const w=40,C=N.height*w/N.width,M=(p-w)/2;f.addImage(le,"PNG",M,T,w,C),T+=C+15}catch(le){console.warn("No se pudo cargar el logo:",le)}f.setFontSize(20),f.setFont("helvetica","bold"),f.setTextColor(0,0,0);const S="COMPROBANTE DE CITA",R=f.getTextWidth(S);f.text(S,(p-R)/2,T),T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10;const U=r[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Informacin de la Clnica",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal"),f.text(U.name||"Clnica Dental Dr. Csar Vsquez",y,T),T+=6,U.location&&(f.setFont("helvetica","italic"),f.text(`Ubicacin: ${U.location}`,y,T),T+=6),U.phones&&U.phones.length>0&&(f.setFont("helvetica","normal"),f.text(`Telfono: ${U.phones.join(" / ")}`,y,T),T+=6),U.address){f.setFont("helvetica","normal");const le=f.splitTextToSize(`Direccin: ${U.address}`,E);f.text(le,y,T),T+=le.length*6}T+=5,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Detalles de la Cita",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal");const Q=n[e.motivo]||e.motivo;f.setFont("helvetica","bold"),f.text("Motivo:",y,T),f.setFont("helvetica","normal"),f.text(Q,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Clnica:",y,T),f.setFont("helvetica","normal"),f.text(U.name||e.clinica,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Fecha:",y,T),f.setFont("helvetica","normal");const J=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(f.text(J,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Hora:",y,T),f.setFont("helvetica","normal"),f.text(e.hora,y+30,T),T+=7,e.notas&&e.notas.trim()){T+=3,f.setFont("helvetica","bold"),f.text("Notas adicionales:",y,T),T+=6,f.setFont("helvetica","normal");const le=f.splitTextToSize(e.notas,E);f.text(le,y,T),T+=le.length*6}T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(10),f.setFont("helvetica","italic"),f.setTextColor(100,100,100);const k=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});f.text(`Comprobante generado el: ${k}`,y,T),T+=6,f.text("Este comprobante es una confirmacin de tu solicitud de cita.",y,T),T+=6,f.text("Te contactaremos pronto para confirmar los detalles.",y,T);const P=f.output("arraybuffer"),ee=new Blob([P],{type:"application/pdf"}),W=URL.createObjectURL(ee),te=document.createElement("a"),ne=`comprobante-cita-${e.fecha}.pdf`;te.href=W,te.setAttribute("href",W),te.download=ne,te.setAttribute("download",ne),te.style.display="none",document.body.appendChild(te),te.click(),setTimeout(()=>{document.body.removeChild(te),URL.revokeObjectURL(W)},1500)}catch(f){console.error("Error generating PDF:",f),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card",children:[m.jsx("div",{className:"success-icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("h1",{children:"Cita Agendada Exitosamente!"}),m.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("h3",{children:"Detalles de la Cita"}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Motivo:"}),m.jsx("span",{className:"value",children:n[e.motivo]||e.motivo})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Clnica:"}),m.jsx("span",{className:"value",children:r[e.clinica]?.name||e.clinica})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Fecha:"}),m.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Hora:"}),m.jsx("span",{className:"value",children:e.hora})]}),e.notas&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Notas:"}),m.jsx("span",{className:"value",children:e.notas})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx(ti,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),m.jsxs("button",{onClick:c,className:"btn-primary",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function _N({userData:s}){const e=jm(),r=Th().state?.editingAppointment,l=!!r,[c,f]=he.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[p,y]=he.useState({}),[E,T]=he.useState(!1);he.useEffect(()=>{if(r){const W=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(te=>te.label===r.reason)?.value||"";f({motivo:W,clinica:r.clinica||"",fecha:r.date||"",hora:r.time||"",notas:r.notas||""})}},[r]);const S=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],R=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],U=["7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM"],Q=ee=>{const{name:W,value:te}=ee.target;f(ne=>({...ne,[W]:te})),p[W]&&y(ne=>({...ne,[W]:""}))},J=()=>{const ee={};if(c.motivo||(ee.motivo="Por favor selecciona el motivo de la cita"),c.clinica||(ee.clinica="Por favor selecciona una clnica"),!c.fecha)ee.fecha="Por favor selecciona una fecha";else{const W=new Date(c.fecha+"T00:00:00"),te=new Date;te.setHours(0,0,0,0),W<te&&(ee.fecha="La fecha no puede ser en el pasado"),W.getDay()===0&&(ee.fecha="No se pueden agendar citas los domingos")}return c.hora||(ee.hora="Por favor selecciona una hora"),ee},k=async ee=>{ee.preventDefault();const W=J();if(Object.keys(W).length>0){y(W);return}T(!0);try{const te=zi.currentUser;if(!te){y({general:"Debes iniciar sesin para agendar una cita"}),T(!1);return}const ne=s?`${s.nombres||""} ${s.apellidos||""}`.trim():"Paciente",le=S.find(N=>N.value===c.motivo)?.label||c.motivo;if(l){const N={date:c.fecha,time:c.hora,reason:le,clinica:c.clinica,notas:c.notas},{error:w}=await jp(r.id,N);if(w){console.error("Error updating appointment:",w),y({general:"Error al actualizar la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/",{state:{message:"Cita actualizada exitosamente"}})}else{const N={patientName:ne,date:c.fecha,time:c.hora,reason:le,clinica:c.clinica,notas:c.notas,status:"programada"},{appointmentId:w,error:C}=await xT(te.uid,N);if(C){console.error("Error creating appointment:",C),y({general:"Error al crear la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/cita-confirmada",{state:{appointment:c}})}}catch(te){console.error("Unexpected error:",te),y({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),T(!1)}},P=new Date().toISOString().split("T")[0];return m.jsxs("div",{className:"appointment-form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:l?"Editar Cita":"Agenda tu Cita"}),m.jsx("p",{children:l?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),m.jsxs("form",{onSubmit:k,className:"appointment-form",noValidate:!0,children:[m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Informacin de la Cita"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"motivo",name:"motivo",value:c.motivo,onChange:Q,className:`${p.motivo?"error":""} ${c.motivo?"":"placeholder"}`,children:S.map(ee=>m.jsx("option",{value:ee.value,children:ee.label},ee.value))}),p.motivo&&m.jsxs("span",{className:"error-message",children:[" ",p.motivo]})]})}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"clinica",name:"clinica",value:c.clinica,onChange:Q,className:`${p.clinica?"error":""} ${c.clinica?"":"placeholder"}`,children:R.map(ee=>m.jsx("option",{value:ee.value,children:ee.label},ee.value))}),p.clinica&&m.jsxs("span",{className:"error-message",children:[" ",p.clinica]})]})}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("input",{type:"text",id:"fecha",name:"fecha",value:c.fecha,onChange:Q,onFocus:ee=>{ee.target.type="date",ee.target.showPicker&&ee.target.showPicker()},onBlur:ee=>{ee.target.value||(ee.target.type="text")},placeholder:"Selecciona una fecha",min:P,className:p.fecha?"error":""}),p.fecha&&m.jsxs("span",{className:"error-message",children:[" ",p.fecha]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("select",{id:"hora",name:"hora",value:c.hora,onChange:Q,className:`${p.hora?"error":""} ${c.hora?"":"placeholder"}`,children:[m.jsx("option",{value:"",children:"Selecciona una hora"}),U.map(ee=>m.jsx("option",{value:ee,children:ee},ee))]}),p.hora&&m.jsxs("span",{className:"error-message",children:[" ",p.hora]})]})]})]}),m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Notas Adicionales"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),m.jsx("textarea",{id:"notas",name:"notas",value:c.notas,onChange:Q,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),p.general&&m.jsxs("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:[" ",p.general]}),m.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:E,children:E?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner"}),"Procesando..."]}):l?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]})]})}function vN(){return m.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}const EN=({onLogin:s})=>{const[e,n]=he.useState(!0),[r,l]=he.useState(1),[c,f]=he.useState(""),[p,y]=he.useState({}),[E,T]=he.useState(!1),[S,R]=he.useState(!1),[U,Q]=he.useState(""),[J,k]=he.useState(""),[P,ee]=he.useState(!1),[W,te]=he.useState(!1),[ne,le]=he.useState(""),[N,w]=he.useState(""),[C,M]=he.useState(""),[D,j]=he.useState(""),[x,Ge]=he.useState(""),[st,K]=he.useState(""),[se,fe]=he.useState(""),[we,Ve]=he.useState(""),[et,ke]=he.useState(""),[Ae,tt]=he.useState(""),[vt,en]=he.useState(""),[Sn,oi]=he.useState(""),[Wt,Ar]=he.useState(""),[Bn,bs]=he.useState(""),[li,hn]=he.useState("primera-vez"),Mt=(ce,ge)=>{ge&&y(Qe=>({...Qe,[ce]:""}))},Fi=async ce=>{ce.preventDefault(),f(""),y({}),T(!0);try{if(e){if(!N||!C){f("Por favor, completa todos los campos."),T(!1);return}const{user:ge,error:Qe}=await bT(N,C);if(Qe){Qe.code==="auth/email-not-verified"?f("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):Qe.code==="auth/user-not-found"?f("No existe una cuenta con este correo."):Qe.code==="auth/wrong-password"?f("Contrasea incorrecta."):Qe.code==="auth/invalid-credential"?f("Correo o contrasea incorrectos."):f(Qe.message||"Error al iniciar sesin."),T(!1);return}ge&&s(ge)}else if(r===1){const ge={};if(N||(ge.email="Ingresa tu correo electrnico"),C||(ge.password="Crea una contrasea"),D||(ge.confirmPassword="Confirma tu contrasea"),Object.keys(ge).length>0){y(ge),le("Por favor, revisa los campos marcados en rojo."),te(!0),T(!1);return}if(C.length<6){y({password:"La contrasea debe tener al menos 6 caracteres"}),le("Por favor, revisa los campos marcados en rojo."),te(!0),T(!1);return}if(C!==D){y({confirmPassword:"Las contraseas no coinciden"}),le("Por favor, revisa los campos marcados en rojo."),te(!0),T(!1);return}l(2),T(!1)}else{const ge={};if(x||(ge.nombres="Ingresa tus nombres"),st||(ge.apellidos="Ingresa tus apellidos"),se||(ge.fechaNacimiento="Selecciona tu fecha de nacimiento"),we||(ge.dui="Ingresa tu nmero de DUI"),et||(ge.genero="Selecciona tu gnero"),Ae||(ge.direccion="Ingresa tu direccin completa"),vt||(ge.telefono="Ingresa tu nmero de telfono"),Sn||(ge.emergenciaNombre="Ingresa el nombre del contacto"),Wt||(ge.emergenciaTelefono="Ingresa el telfono del contacto"),Bn||(ge.emergenciaParentesco="Selecciona el parentesco"),se){const Gi=new Date(se),Rn=new Date;let pa=Rn.getFullYear()-Gi.getFullYear();const Sr=Rn.getMonth()-Gi.getMonth();(Sr<0||Sr===0&&Rn.getDate()<Gi.getDate())&&pa--,pa<18&&(ge.fechaNacimiento="Debes tener al menos 18 aos para registrarte")}if(vt&&vt.length!==8&&(ge.telefono="El telfono debe tener exactamente 8 dgitos"),Wt&&Wt.length!==8&&(ge.emergenciaTelefono="El telfono debe tener exactamente 8 dgitos"),we&&we.length!==10&&(ge.dui="El DUI debe tener el formato completo (########-#)"),Object.keys(ge).length>0){y(ge),le("Por favor, revisa los campos marcados en rojo."),te(!0),T(!1);return}const Qe={nombres:x,apellidos:st,fechaNacimiento:se,dui:we,genero:et,direccion:Ae,telefono:vt,emergenciaNombre:Sn,emergenciaTelefono:Wt,emergenciaParentesco:Bn,tipoPaciente:li};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:wn,error:Hi}=await TT(N,C,Qe);if(Hi){sessionStorage.removeItem("justRegistered"),Hi.code==="auth/email-already-in-use"?f("Este correo ya est registrado."):f(Hi.message||"Error al registrar usuario."),T(!1);return}f(""),ee(!0)}}catch(ge){console.error("Error:",ge),f("Ocurri un error inesperado. Por favor, intenta de nuevo."),T(!1)}},As=async()=>{ee(!1),sessionStorage.removeItem("justRegistered");const{signOut:ce}=await F0(async()=>{const{signOut:ge}=await Promise.resolve().then(()=>lN);return{signOut:ge}},void 0);await ce(),n(!0),l(1),w(""),M(""),j(""),window.scrollTo(0,0)},Ss=ce=>{n(ce),f(""),y({}),l(1)},lt=async ce=>{if(ce.preventDefault(),k(""),!U){k("Por favor, ingresa tu correo electrnico.");return}T(!0);const{error:ge}=await ST(U);T(!1),ge?k("Error al enviar el correo de recuperacin."):(k("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{R(!1),Q(""),k("")},3e3))},ft=ce=>{let ge=ce.target.value.replace(/\D/g,"");ge.length>9&&(ge=ge.slice(0,9)),ge.length>8&&(ge=ge.slice(0,8)+"-"+ge.slice(8,9)),Ve(ge),Mt("dui",ge)},qn=(ce,ge)=>Qe=>{const wn=Qe.target.value.replace(/\D/g,"");wn.length<=8&&(ce(wn),Mt(ge,wn))};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:`login-card ${!e&&r===2?"wide":""}`,children:[m.jsx("div",{className:"login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),r===1&&m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>Ss(!0),children:"INICIAR SESIN"}),m.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>Ss(!1),children:"REGISTRARSE"})]}),m.jsxs("form",{onSubmit:Fi,className:"login-form",noValidate:!0,children:[(e||r===1)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:N,onChange:ce=>{w(ce.target.value),Mt("email",ce.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:C,onChange:ce=>{M(ce.target.value),Mt("password",ce.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),!e&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),m.jsx("input",{type:"password",id:"confirmPassword",value:D,onChange:ce=>{j(ce.target.value),Mt("confirmPassword",ce.target.value)},placeholder:"",className:p.confirmPassword?"input-error":"",required:!0}),p.confirmPassword&&m.jsx("span",{className:"field-error-message",children:p.confirmPassword})]})]}),!e&&r===2&&m.jsxs("div",{className:"registration-step-2",children:[m.jsx("h3",{children:"Datos Personales"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombres"}),m.jsx("input",{type:"text",value:x,onChange:ce=>{Ge(ce.target.value),Mt("nombres",ce.target.value)},className:p.nombres?"input-error":"",required:!0}),p.nombres&&m.jsx("span",{className:"field-error-message",children:p.nombres})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("input",{type:"text",value:st,onChange:ce=>{K(ce.target.value),Mt("apellidos",ce.target.value)},className:p.apellidos?"input-error":"",required:!0}),p.apellidos&&m.jsx("span",{className:"field-error-message",children:p.apellidos})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("input",{type:"date",value:se,onChange:ce=>{fe(ce.target.value),Mt("fechaNacimiento",ce.target.value)},className:p.fechaNacimiento?"input-error":"",required:!0}),p.fechaNacimiento&&m.jsx("span",{className:"field-error-message",children:p.fechaNacimiento})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"DUI"}),m.jsx("input",{type:"text",value:we,onChange:ft,placeholder:"00000000-0",maxLength:"10",className:p.dui?"input-error":"",required:!0}),p.dui&&m.jsx("span",{className:"field-error-message",children:p.dui})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gnero"}),m.jsxs("select",{value:et,onChange:ce=>{ke(ce.target.value),Mt("genero",ce.target.value)},required:!0,className:`${et?"":"placeholder-selected"} ${p.genero?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Masculino",children:"Masculino"}),m.jsx("option",{value:"Femenino",children:"Femenino"})]}),p.genero&&m.jsx("span",{className:"field-error-message",children:p.genero})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Direccin"}),m.jsx("input",{type:"text",value:Ae,onChange:ce=>{tt(ce.target.value),Mt("direccion",ce.target.value)},className:p.direccion?"input-error":"",required:!0}),p.direccion&&m.jsx("span",{className:"field-error-message",children:p.direccion})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:vt,onChange:qn(en,"telefono"),placeholder:"00000000",maxLength:"8",className:p.telefono?"input-error":"",required:!0}),p.telefono&&m.jsx("span",{className:"field-error-message",children:p.telefono})]}),m.jsx("div",{className:"divider"}),m.jsx("h3",{children:"Contacto de Emergencia"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombre Completo"}),m.jsx("input",{type:"text",value:Sn,onChange:ce=>{oi(ce.target.value),Mt("emergenciaNombre",ce.target.value)},className:p.emergenciaNombre?"input-error":"",required:!0}),p.emergenciaNombre&&m.jsx("span",{className:"field-error-message",children:p.emergenciaNombre})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:Wt,onChange:qn(Ar,"emergenciaTelefono"),maxLength:"8",className:p.emergenciaTelefono?"input-error":"",required:!0}),p.emergenciaTelefono&&m.jsx("span",{className:"field-error-message",children:p.emergenciaTelefono})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Parentesco"}),m.jsxs("select",{value:Bn,onChange:ce=>{bs(ce.target.value),Mt("emergenciaParentesco",ce.target.value)},required:!0,className:`${Bn?"":"placeholder-selected"} ${p.emergenciaParentesco?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),m.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),m.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),m.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),m.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),m.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),m.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),m.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),m.jsx("option",{value:"To / Ta",children:"To / Ta"}),m.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),m.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),m.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),p.emergenciaParentesco&&m.jsx("span",{className:"field-error-message",children:p.emergenciaParentesco})]}),m.jsx("div",{className:"divider"}),m.jsxs("div",{className:"form-group radio-group",children:[m.jsx("label",{children:"Es primera vez o paciente recurrente?"}),m.jsxs("div",{className:"radio-options",children:[m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:li==="primera-vez",onChange:ce=>hn(ce.target.value)}),"Primera vez"]}),m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:li==="recurrente",onChange:ce=>hn(ce.target.value)}),"Recurrente"]})]})]})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsxs("div",{className:"button-group",children:[!e&&r===2&&m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>l(1),children:"Atrs"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Cargando...":e?"Ingresar":r===1?"Siguiente":"Finalizar Registro"})]}),e&&m.jsx("div",{className:"forgot-password",children:m.jsx("a",{href:"#",onClick:ce=>{ce.preventDefault(),R(!0)},children:"Olvidaste tu contrasea?"})})]}),S&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{children:"Recuperar Contrasea"}),m.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),m.jsxs("form",{onSubmit:lt,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"resetEmail",value:U,onChange:ce=>Q(ce.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),J&&m.jsx("p",{className:J.includes("Error")?"error-message":"success-message",children:J}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>R(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Enviando...":"Enviar"})]})]})]})}),P&&m.jsx("div",{className:"modal-overlay",onClick:As,children:m.jsxs("div",{className:"modal-content success-modal",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),m.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:As,children:"Aceptar"})})]})}),W&&m.jsx("div",{className:"modal-overlay",onClick:()=>te(!1),children:m.jsxs("div",{className:"modal-content error-modal",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Error en el formulario"}),m.jsx("p",{className:"modal-message",children:ne}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>te(!1),children:"Aceptar"})})]})})]})})},TN=({onLogin:s})=>{const[e,n]=he.useState(""),[r,l]=he.useState(""),[c,f]=he.useState(""),[p,y]=he.useState({}),E=[{email:"admin@clinica.com",password:"admin123",type:"admin",nombre:"Mara Gonzlez",cargo:"Administradora"},{email:"doctor@clinica.com",password:"doctor123",type:"doctor",nombre:"Dr. Csar Vsquez",cargo:"Odontlogo"}],T=(R,U)=>{U&&y(Q=>({...Q,[R]:""}))},S=R=>{R.preventDefault(),f(""),y({});const U={};if(e||(U.email="Ingresa tu correo electrnico"),r||(U.password="Ingresa tu contrasea"),Object.keys(U).length>0){y(U);return}const Q=E.find(J=>J.email===e&&J.password===r);Q?s(e,r,null,Q.type,{nombre:Q.nombre,cargo:Q.cargo}):f("Credenciales incorrectas. Verifica tu correo y contrasea.")};return m.jsx("div",{className:"staff-login-container",children:m.jsxs("div",{className:"staff-login-card",children:[m.jsx("div",{className:"staff-login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),m.jsxs("form",{onSubmit:S,className:"staff-login-form",noValidate:!0,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:R=>{n(R.target.value),T("email",R.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:r,onChange:R=>{l(R.target.value),T("password",R.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsx("button",{type:"submit",className:"staff-login-button",children:"Ingresar"}),m.jsx("div",{className:"staff-login-info",children:m.jsxs("p",{className:"info-text",children:[m.jsx("strong",{children:"Usuarios de prueba:"}),m.jsx("br",{}),"Admin: admin@clinica.com / admin123",m.jsx("br",{}),"Doctor: doctor@clinica.com / doctor123"]})})]})]})})},bN=({userType:s,userData:e})=>{const n=s==="admin",r=s==="doctor";return m.jsxs("div",{className:"staff-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[n&&" Panel Administrativo",r&&" Panel Mdico"]}),m.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",m.jsx("strong",{children:e?.nombre||"Usuario"})]})]}),m.jsxs("div",{className:"dashboard-content",children:[n&&m.jsxs("div",{className:"admin-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Gestin de Citas"}),m.jsx("p",{children:"Administra todas las citas programadas"}),m.jsx("button",{className:"card-button",children:"Ver Citas"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Pacientes"}),m.jsx("p",{children:"Gestiona la base de datos de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Pacientes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Reportes"}),m.jsx("p",{children:"Consulta estadsticas y reportes"}),m.jsx("button",{className:"card-button",children:"Ver Reportes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Configuracin"}),m.jsx("p",{children:"Ajustes del sistema y usuarios"}),m.jsx("button",{className:"card-button",children:"Configurar"})]})]}),m.jsxs("div",{className:"recent-activity",children:[m.jsx("h2",{children:"Actividad Reciente"}),m.jsxs("div",{className:"activity-list",children:[m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 5 min"}),m.jsx("span",{className:"activity-text",children:"Nueva cita programada - Juan Prez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 15 min"}),m.jsx("span",{className:"activity-text",children:"Cita cancelada - Mara Lpez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 1 hora"}),m.jsx("span",{className:"activity-text",children:"Nuevo paciente registrado - Carlos Gmez"})]})]})]})]}),r&&m.jsxs("div",{className:"doctor-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Citas del Da"}),m.jsx("p",{children:"Revisa tu agenda de hoy"}),m.jsx("button",{className:"card-button",children:"Ver Agenda"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Historial Clnico"}),m.jsx("p",{children:"Consulta historiales de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Historiales"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Notas Mdicas"}),m.jsx("p",{children:"Registra diagnsticos y tratamientos"}),m.jsx("button",{className:"card-button",children:"Nueva Nota"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Recetas"}),m.jsx("p",{children:"Gestiona prescripciones mdicas"}),m.jsx("button",{className:"card-button",children:"Ver Recetas"})]})]}),m.jsxs("div",{className:"today-appointments",children:[m.jsx("h2",{children:"Citas de Hoy"}),m.jsxs("div",{className:"appointments-list",children:[m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"09:00 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Ana Martnez"}),m.jsx("span",{children:"Limpieza dental"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"10:30 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Roberto Silva"}),m.jsx("span",{children:"Extraccin de muela"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"02:00 PM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Laura Hernndez"}),m.jsx("span",{children:"Consulta general"})]})]})]})]})]})]})]})};function AN(){const{pathname:s}=Th();return he.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function SN({isAuthenticated:s,userType:e,userData:n,handleLogin:r,handleLogout:l,isStaff:c,isLoading:f}){const p=Th(),y=p.pathname==="/staff/login"||p.pathname==="/staff/dashboard";return f?m.jsx("div",{className:"loading-container",children:m.jsx("div",{className:"loading-spinner"})}):m.jsxs(m.Fragment,{children:[s&&m.jsx(cN,{onLogout:l,userData:n,userType:e}),m.jsx("main",{className:"main-content",children:m.jsxs(cb,{children:[m.jsx(hs,{path:"/staff/login",element:s?m.jsx(Mu,{to:c?"/staff/dashboard":"/",replace:!0}):m.jsx(TN,{onLogin:r})}),m.jsx(hs,{path:"/",element:s?e==="patient"?m.jsx(dN,{userData:n}):m.jsx(Mu,{to:"/staff/dashboard",replace:!0}):m.jsx(EN,{onLogin:r})}),m.jsx(hs,{path:"/staff/dashboard",element:s&&c?m.jsx(bN,{userType:e,userData:n}):m.jsx(Mu,{to:s?"/":"/staff/login",replace:!0})}),s&&e==="patient"&&m.jsxs(m.Fragment,{children:[m.jsx(hs,{path:"/cita",element:m.jsx("div",{className:"container",children:m.jsx(_N,{userData:n})})}),m.jsx(hs,{path:"/contacto",element:m.jsx(mN,{})}),m.jsx(hs,{path:"/perfil",element:m.jsx(pN,{userData:n})}),m.jsx(hs,{path:"/mis-citas",element:m.jsx(gN,{})}),m.jsx(hs,{path:"/cita-confirmada",element:m.jsx(yN,{})})]}),m.jsx(hs,{path:"*",element:m.jsx(Mu,{to:s&&c?"/staff/dashboard":"/",replace:!0})})]})}),s&&e==="patient"&&m.jsx(vN,{}),!y&&m.jsx(uN,{})]})}function wN(){const[s,e]=he.useState(!1),[n,r]=he.useState(null),[l,c]=he.useState(null),[f,p]=he.useState(!0);he.useEffect(()=>{const S=RT(async Q=>{if(console.log("Auth state changed, user:",Q?.email),Q){const J=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",J),J==="true"){console.log("User just registered, skipping auto-login"),p(!1);return}let k=3,P=null,ee=null;for(;k>0&&!P;){const W=await Mm(Q.uid);P=W.profile,ee=W.error,!P&&k>1&&(console.log(`Failed to load profile, retrying... (${k-1} attempts left)`),await new Promise(te=>setTimeout(te,1e3))),k--}P?(r(P),c("patient"),e(!0),p(!1)):(console.error("Failed to load profile after retries:",ee),e(!1),r(null),c(null),p(!1))}else e(!1),r(null),c(null),p(!1)}),R=async()=>{const{markOverdueAppointmentsAsLost:Q}=await F0(async()=>{const{markOverdueAppointmentsAsLost:J}=await Promise.resolve().then(()=>fN);return{markOverdueAppointmentsAsLost:J}},void 0);await Q()};R();const U=setInterval(R,6e4);return()=>{S(),clearInterval(U)}},[]);const y=async S=>{const{profile:R,error:U}=await Mm(S.uid);R?(r(R),c("patient"),e(!0)):console.error("Failed to load profile:",U)},E=async()=>{await AT(),e(!1),r(null),c(null)},T=l==="admin"||l==="doctor";return m.jsxs(lb,{basename:"/COI/",children:[m.jsx(AN,{}),m.jsx("div",{className:"app",children:m.jsx(SN,{isAuthenticated:s,userType:l,userData:n,handleLogin:y,handleLogout:E,isStaff:T,isLoading:f})})]})}gb.createRoot(document.getElementById("root")).render(m.jsx(he.StrictMode,{children:m.jsx(wN,{})}));
