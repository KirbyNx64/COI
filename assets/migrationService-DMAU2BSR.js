import{c as g}from"./index-qschs3Et.js";import"./vendor-BIRSGIdg.js";import"./pdf-utils-C-nx5KvR.js";const y=async(n,r)=>{try{const e=`appointments_migrated_${n}`;if(localStorage.getItem(e)==="true")return console.log("Appointments already migrated for this user"),{migratedCount:0,error:null};const o=JSON.parse(localStorage.getItem("appointments")||"[]");if(o.length===0)return localStorage.setItem(e,"true"),{migratedCount:0,error:null};console.log(`Migrating ${o.length} appointments to Firebase...`);const l=r?`${r.nombres||""} ${r.apellidos||""}`.trim():"Paciente",m=o.map(t=>{const c={patientName:t.patientName||l,date:t.date,time:t.time,reason:t.reason,clinica:t.clinica,notas:t.notas||"",status:t.status||"programada"};return g(n,c)}),a=await Promise.all(m),i=a.filter(t=>!t.error).length,s=a.filter(t=>t.error).length;return s>0&&console.warn(`${s} appointments failed to migrate`),localStorage.setItem(e,"true"),console.log(`Successfully migrated ${i} appointments to Firebase`),{migratedCount:i,error:null}}catch(e){return console.error("Error migrating appointments:",e),{migratedCount:0,error:e}}};export{y as migrateLocalStorageToFirebase};
