import{r as ub,a as hb,b as re,L as Jn,u as Pm,c as wh,B as fb,R as db,d as ds,N as ku}from"./vendor-BIRSGIdg.js";import{E as G0,_ as Q0}from"./pdf-utils-C-nx5KvR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Yd={exports:{}},Cl={};var sv;function mb(){if(sv)return Cl;sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var rv;function pb(){return rv||(rv=1,Yd.exports=mb()),Yd.exports}var m=pb(),Xd={exports:{}},xl={},$d={exports:{}},Wd={};var av;function gb(){return av||(av=1,(function(s){function e(Q,ne){var he=Q.length;Q.push(ne);e:for(;0<he;){var ve=he-1>>>1,Re=Q[ve];if(0<l(Re,ne))Q[ve]=ne,Q[he]=Re,he=ve;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ne=Q[0],he=Q.pop();if(he!==ne){Q[0]=he;e:for(var ve=0,Re=Q.length,Ke=Re>>>1;ve<Ke;){var Le=2*(ve+1)-1,we=Q[Le],tt=Le+1,vt=Q[tt];if(0>l(we,he))tt<Re&&0>l(vt,we)?(Q[ve]=vt,Q[tt]=he,ve=tt):(Q[ve]=we,Q[Le]=he,ve=Le);else if(tt<Re&&0>l(vt,he))Q[ve]=vt,Q[tt]=he,ve=tt;else break e}}return ne}function l(Q,ne){var he=Q.sortIndex-ne.sortIndex;return he!==0?he:Q.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],E=[],T=1,w=null,C=3,P=!1,K=!1,Z=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ie(Q){for(var ne=n(E);ne!==null;){if(ne.callback===null)r(E);else if(ne.startTime<=Q)r(E),ne.sortIndex=ne.expirationTime,e(y,ne);else break;ne=n(E)}}function ee(Q){if(Z=!1,ie(Q),!K)if(n(y)!==null)K=!0,le||(le=!0,M());else{var ne=n(E);ne!==null&&Fe(ee,ne.startTime-Q)}}var le=!1,D=-1,S=5,I=-1;function j(){return k?!0:!(s.unstable_now()-I<S)}function x(){if(k=!1,le){var Q=s.unstable_now();I=Q;var ne=!0;try{e:{K=!1,Z&&(Z=!1,oe(D),D=-1),P=!0;var he=C;try{t:{for(ie(Q),w=n(y);w!==null&&!(w.expirationTime>Q&&j());){var ve=w.callback;if(typeof ve=="function"){w.callback=null,C=w.priorityLevel;var Re=ve(w.expirationTime<=Q);if(Q=s.unstable_now(),typeof Re=="function"){w.callback=Re,ie(Q),ne=!0;break t}w===n(y)&&r(y),ie(Q)}else r(y);w=n(y)}if(w!==null)ne=!0;else{var Ke=n(E);Ke!==null&&Fe(ee,Ke.startTime-Q),ne=!1}}break e}finally{w=null,C=he,P=!1}ne=void 0}}finally{ne?M():le=!1}}}var M;if(typeof J=="function")M=function(){J(x)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ce=R.port2;R.port1.onmessage=x,M=function(){Ce.postMessage(null)}}else M=function(){U(x,0)};function Fe(Q,ne){D=U(function(){Q(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(Q){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var he=C;C=ne;try{return Q()}finally{C=he}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(Q,ne){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=C;C=Q;try{return ne()}finally{C=he}},s.unstable_scheduleCallback=function(Q,ne,he){var ve=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ve+he:ve):he=ve,Q){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=he+Re,Q={id:T++,callback:ne,priorityLevel:Q,startTime:he,expirationTime:Re,sortIndex:-1},he>ve?(Q.sortIndex=he,e(E,Q),n(y)===null&&Q===n(E)&&(Z?(oe(D),D=-1):Z=!0,Fe(ee,he-ve))):(Q.sortIndex=Re,e(y,Q),K||P||(K=!0,le||(le=!0,M()))),Q},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(Q){var ne=C;return function(){var he=C;C=ne;try{return Q.apply(this,arguments)}finally{C=he}}}})(Wd)),Wd}var ov;function yb(){return ov||(ov=1,$d.exports=gb()),$d.exports}var lv;function _b(){if(lv)return xl;lv=1;var s=yb(),e=ub(),n=hb();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function E(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===o)return y(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,o=d;break}if(b===o){_=!0,o=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,o=h;break}if(b===o){_=!0,o=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,C=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case U:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case J:return t.displayName||"Context";case oe:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:Ce(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Ce(t(i))}catch{}}return null}var Fe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ve=[],Re=-1;function Ke(t){return{current:t}}function Le(t){0>Re||(t.current=ve[Re],ve[Re]=null,Re--)}function we(t,i){Re++,ve[Re]=t.current,t.current=i}var tt=Ke(null),vt=Ke(null),sn=Ke(null),Cn=Ke(null);function ri(t,i){switch(we(sn,i),we(vt,t),we(tt,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?C_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=C_(i),t=x_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Le(tt),we(tt,t)}function Zt(){Le(tt),Le(vt),Le(sn)}function Sr(t){t.memoizedState!==null&&we(Cn,t);var i=tt.current,a=x_(i,t.type);i!==a&&(we(vt,t),we(tt,a))}function Bn(t){vt.current===t&&(Le(tt),Le(vt)),Cn.current===t&&(Le(Cn),Al._currentValue=he)}var ws,ai;function mn(t){if(ws===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ws=i&&i[1]||"",ai=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ws+t+ai}var oi=!1;function Gi(t,i){if(!t||oi)return"";oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var q=H}Reflect.construct(t,[],X)}else{try{X.call()}catch(H){q=H}t.call(X.prototype)}}else{try{throw Error()}catch(H){q=H}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),B=b.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===B.length)for(o=N.length-1,h=B.length-1;1<=o&&0<=h&&N[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==B[h]){var G=`
`+N[o].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=o&&0<=h);break}}}finally{oi=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?mn(a):""}function li(t,i){switch(t.tag){case 26:case 27:case 5:return mn(t.type);case 16:return mn("Lazy");case 13:return t.child!==i&&i!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return Gi(t.type,!1);case 11:return Gi(t.type.render,!1);case 1:return Gi(t.type,!0);case 31:return mn("Activity");default:return""}}function Rr(t){try{var i="",a=null;do i+=li(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ht=Object.prototype.hasOwnProperty,Et=s.unstable_scheduleCallback,ft=s.unstable_cancelCallback,Co=s.unstable_shouldYield,Cr=s.unstable_requestPaint,jt=s.unstable_now,Qi=s.unstable_getCurrentPriorityLevel,xr=s.unstable_ImmediatePriority,Ss=s.unstable_UserBlockingPriority,ce=s.unstable_NormalPriority,ge=s.unstable_LowPriority,Ut=s.unstable_IdlePriority,Ki=s.log,Rs=s.unstable_setDisableYieldValue,Jt=null,dt=null;function en(t){if(typeof Ki=="function"&&Rs(t),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Jt,t)}catch{}}var st=Math.clz32?Math.clz32:fc,hc=Math.log,_a=Math.LN2;function fc(t){return t>>>=0,t===0?32:31-(hc(t)/_a|0)|0}var ci=256,Ir=262144,Tt=4194304;function ui(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hi(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~d,o!==0?h=ui(o):(_&=b,_!==0?h=ui(_):a||(a=b&~t,a!==0&&(h=ui(a))))):(b=o&~d,b!==0?h=ui(b):_!==0?h=ui(_):a||(a=o&~t,a!==0&&(h=ui(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function qn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Wh(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function fi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Nr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zh(t,i,a,o,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var G=31-st(a),X=1<<G;b[G]=0,N[G]=-1;var q=B[G];if(q!==null)for(B[G]=null,G=0;G<q.length;G++){var H=q[G];H!==null&&(H.lane&=-536870913)}a&=~X}o!==0&&Dr(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Dr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-st(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function xo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-st(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Io(t,i){var a=i&-i;return a=(a&42)!==0?1:Or(a),(a&(t.suspendedLanes|i))!==0?0:a}function Or(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mc(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:W_(t.type))}function Fn(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Hn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Hn,Vt="__reactProps$"+Hn,di="__reactContainer$"+Hn,va="__reactEvents$"+Hn,Jh="__reactListeners$"+Hn,pc="__reactHandles$"+Hn,gc="__reactResources$"+Hn,mi="__reactMarker$"+Hn;function Ea(t){delete t[bt],delete t[Vt],delete t[va],delete t[Jh],delete t[pc]}function pi(t){var i=t[bt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[di]||a[bt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=V_(t);t!==null;){if(a=t[bt])return a;t=V_(t)}return i}t=a,a=t.parentNode}return null}function xn(t){if(t=t[bt]||t[di]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function pn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function gi(t){var i=t[gc];return i||(i=t[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(t){t[mi]=!0}var No=new Set,Do={};function yi(t,i){_i(t,i),_i(t+"Capture",i)}function _i(t,i){for(Do[t]=i,t=0;t<i.length;t++)No.add(i[t])}var Oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mo={},jo={};function yc(t){return ht.call(jo,t)?!0:ht.call(Mo,t)?!1:Oo.test(t)?jo[t]=!0:(Mo[t]=!0,!1)}function Ta(t,i,a){if(yc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function gn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function wt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cs(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vo(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function He(t){if(!t._valueTracker){var i=Cs(t)?"checked":"value";t._valueTracker=Vo(t,i,""+t[i])}}function Mr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Cs(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var jr=/[\n"\\]/g;function rn(t){return t.replace(jr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ba(t,i,a,o,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+kt(i)):t.value!==""+kt(i)&&(t.value=""+kt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?ko(t,_,kt(i)):a!=null?ko(t,_,kt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+kt(b):t.removeAttribute("name")}function _c(t,i,a,o,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){He(t);return}a=a!=null?""+kt(a):"",i=i!=null?""+kt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),He(t)}function ko(t,i,a){i==="number"&&vi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function xs(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+kt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function vc(t,i,a){if(i!=null&&(i=""+kt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+kt(a):""}function Is(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(Fe(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=kt(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),He(t)}function an(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Ec.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Po(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Lo(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Lo(t,d,i[d])}function Aa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(t){return Ns.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gn(){}var Uo=null;function In(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ds=null,Ei=null;function Vr(t){var i=xn(t);if(i&&(t=i.stateNode)){var a=t[Vt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ba(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Vt]||null;if(!h)throw Error(r(90));ba(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Mr(o)}break e;case"textarea":vc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&xs(t,!!a.multiple,i,!1)}}}var Sa=!1;function Os(t,i,a){if(Sa)return t(i,a);Sa=!0;try{var o=t(i);return o}finally{if(Sa=!1,(Ds!==null||Ei!==null)&&(mu(),Ds&&(i=Ds,t=Ei,Ei=Ds=null,Vr(i),t)))for(i=0;i<t.length;i++)Vr(t[i])}}function Qn(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Vt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kr=!1;if(Nn)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){kr=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch{kr=!1}var Ti=null,zo=null,Lr=null;function Bo(){if(Lr)return Lr;var t,i=zo,a=i.length,o,h="value"in Ti?Ti.value:Ti.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[d-o];o++);return Lr=h.slice(t,1<o?1-o:void 0)}function Pr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Xi(){return!0}function Kn(){return!1}function zt(t){function i(a,o,h,d,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Xi:Kn,this.isPropagationStopped=Kn,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=zt($i),Ms=w({},$i,{view:0,detail:0}),qo=zt(Ms),js,Ra,Ai,Ca=w({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(js=t.screenX-Ai.screenX,Ra=t.screenY-Ai.screenY):Ra=js=0,Ai=t),js)},movementY:function(t){return"movementY"in t?t.movementY:Ra}}),Fo=zt(Ca),Ur=w({},Ca,{dataTransfer:0}),bc=zt(Ur),Ac=w({},Ms,{relatedTarget:0}),zr=zt(Ac),Ho=w({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=zt(Ho),xa=w({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sc=zt(xa),Rc=w({},$i,{data:0}),wi=zt(Rc),Cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Ic[t])?!!i[t]:!1}function Vs(){return Nc}var tn=w({},Ms,{key:function(t){if(t.key){var i=Cc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Pr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(t){return t.type==="keypress"?Pr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dc=zt(tn),Oc=w({},Ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wi=zt(Oc),u=w({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),g=zt(u),v=w({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=zt(v),L=w({},Ca,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F=zt(L),te=w({},$i,{newState:0,oldState:0}),be=zt(te),mt=[9,13,27,32],ze=Nn&&"CompositionEvent"in window,rt=null;Nn&&"documentMode"in document&&(rt=document.documentMode);var Dn=Nn&&"TextEvent"in window&&!rt,Si=Nn&&(!ze||rt&&8<rt&&11>=rt),Yn=" ",Xn=!1;function Br(t,i){switch(t){case"keyup":return mt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Na=!1;function jT(t,i){switch(t){case"compositionend":return Ia(i);case"keypress":return i.which!==32?null:(Xn=!0,Yn);case"textInput":return t=i.data,t===Yn&&Xn?null:t;default:return null}}function VT(t,i){if(Na)return t==="compositionend"||!ze&&Br(t,i)?(t=Bo(),Lr=zo=Ti=null,Na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Si&&i.locale!=="ko"?null:i.data;default:return null}}var kT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!kT[t.type]:i==="textarea"}function Up(t,i,a,o){Ds?Ei?Ei.push(o):Ei=[o]:Ds=o,i=Tu(i,"onChange"),0<i.length&&(a=new bi("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Go=null,Qo=null;function LT(t){T_(t,0)}function Mc(t){var i=pn(t);if(Mr(i))return t}function zp(t,i){if(t==="change")return i}var Bp=!1;if(Nn){var ef;if(Nn){var tf="oninput"in document;if(!tf){var qp=document.createElement("div");qp.setAttribute("oninput","return;"),tf=typeof qp.oninput=="function"}ef=tf}else ef=!1;Bp=ef&&(!document.documentMode||9<document.documentMode)}function Fp(){Go&&(Go.detachEvent("onpropertychange",Hp),Qo=Go=null)}function Hp(t){if(t.propertyName==="value"&&Mc(Qo)){var i=[];Up(i,Qo,t,In(t)),Os(LT,i)}}function PT(t,i,a){t==="focusin"?(Fp(),Go=i,Qo=a,Go.attachEvent("onpropertychange",Hp)):t==="focusout"&&Fp()}function UT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mc(Qo)}function zT(t,i){if(t==="click")return Mc(i)}function BT(t,i){if(t==="input"||t==="change")return Mc(i)}function qT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var yn=typeof Object.is=="function"?Object.is:qT;function Ko(t,i){if(yn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ht.call(i,h)||!yn(t[h],i[h]))return!1}return!0}function Gp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qp(t,i){var a=Gp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Gp(a)}}function Kp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Kp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Yp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=vi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=vi(t.document)}return i}function nf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var FT=Nn&&"documentMode"in document&&11>=document.documentMode,Da=null,sf=null,Yo=null,rf=!1;function Xp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;rf||Da==null||Da!==vi(o)||(o=Da,"selectionStart"in o&&nf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Yo&&Ko(Yo,o)||(Yo=o,o=Tu(sf,"onSelect"),0<o.length&&(i=new bi("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Da)))}function qr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Oa={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},af={},$p={};Nn&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Fr(t){if(af[t])return af[t];if(!Oa[t])return t;var i=Oa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in $p)return af[t]=i[a];return t}var Wp=Fr("animationend"),Zp=Fr("animationiteration"),Jp=Fr("animationstart"),HT=Fr("transitionrun"),GT=Fr("transitionstart"),QT=Fr("transitioncancel"),eg=Fr("transitionend"),tg=new Map,of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");of.push("scrollEnd");function $n(t,i){tg.set(t,i),yi(i,[t])}var jc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],Ma=0,lf=0;function Vc(){for(var t=Ma,i=lf=Ma=0;i<t;){var a=On[i];On[i++]=null;var o=On[i];On[i++]=null;var h=On[i];On[i++]=null;var d=On[i];if(On[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}d!==0&&ng(a,h,d)}}function kc(t,i,a,o){On[Ma++]=t,On[Ma++]=i,On[Ma++]=a,On[Ma++]=o,lf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function cf(t,i,a,o){return kc(t,i,a,o),Lc(t)}function Hr(t,i){return kc(t,null,null,i),Lc(t)}function ng(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-st(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function Lc(t){if(50<gl)throw gl=0,_d=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ja={};function KT(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,i,a,o){return new KT(t,i,a,o)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zi(t,i){var a=t.alternate;return a===null?(a=_n(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ig(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Pc(t,i,a,o,h,d){var _=0;if(o=t,typeof t=="function")uf(t)&&(_=1);else if(typeof t=="string")_=Z2(t,a,tt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=_n(31,a,i,h),t.elementType=I,t.lanes=d,t;case Z:return Gr(a.children,h,d,i);case k:_=8,h|=24;break;case U:return t=_n(12,a,i,h|2),t.elementType=U,t.lanes=d,t;case ee:return t=_n(13,a,i,h),t.elementType=ee,t.lanes=d,t;case le:return t=_n(19,a,i,h),t.elementType=le,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:_=10;break e;case oe:_=9;break e;case ie:_=11;break e;case D:_=14;break e;case S:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=_n(_,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Gr(t,i,a,o){return t=_n(7,t,o,i),t.lanes=a,t}function hf(t,i,a){return t=_n(6,t,null,i),t.lanes=a,t}function sg(t){var i=_n(18,null,null,0);return i.stateNode=t,i}function ff(t,i,a){return i=_n(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var rg=new WeakMap;function Mn(t,i){if(typeof t=="object"&&t!==null){var a=rg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Rr(i)},rg.set(t,i),i)}return{value:t,source:i,stack:Rr(i)}}var Va=[],ka=0,Uc=null,Xo=0,jn=[],Vn=0,ks=null,Ri=1,Ci="";function Ji(t,i){Va[ka++]=Xo,Va[ka++]=Uc,Uc=t,Xo=i}function ag(t,i,a){jn[Vn++]=Ri,jn[Vn++]=Ci,jn[Vn++]=ks,ks=t;var o=Ri;t=Ci;var h=32-st(o)-1;o&=~(1<<h),a+=1;var d=32-st(i)+h;if(30<d){var _=h-h%5;d=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Ri=1<<32-st(i)+h|a<<h|o,Ci=d+t}else Ri=1<<d|a<<h|o,Ci=t}function df(t){t.return!==null&&(Ji(t,1),ag(t,1,0))}function mf(t){for(;t===Uc;)Uc=Va[--ka],Va[ka]=null,Xo=Va[--ka],Va[ka]=null;for(;t===ks;)ks=jn[--Vn],jn[Vn]=null,Ci=jn[--Vn],jn[Vn]=null,Ri=jn[--Vn],jn[Vn]=null}function og(t,i){jn[Vn++]=Ri,jn[Vn++]=Ci,jn[Vn++]=ks,Ri=i.id,Ci=i.overflow,ks=t}var Bt=null,nt=null,Ve=!1,Ls=null,kn=!1,pf=Error(r(519));function Ps(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(Mn(i,t)),pf}function lg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[bt]=t,i[Vt]=o,a){case"dialog":Ie("cancel",i),Ie("close",i);break;case"iframe":case"object":case"embed":Ie("load",i);break;case"video":case"audio":for(a=0;a<_l.length;a++)Ie(_l[a],i);break;case"source":Ie("error",i);break;case"img":case"image":case"link":Ie("error",i),Ie("load",i);break;case"details":Ie("toggle",i);break;case"input":Ie("invalid",i),_c(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ie("invalid",i);break;case"textarea":Ie("invalid",i),Is(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||S_(i.textContent,a)?(o.popover!=null&&(Ie("beforetoggle",i),Ie("toggle",i)),o.onScroll!=null&&Ie("scroll",i),o.onScrollEnd!=null&&Ie("scrollend",i),o.onClick!=null&&(i.onclick=Gn),i=!0):i=!1,i||Ps(t,!0)}function cg(t){for(Bt=t.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Bt=Bt.return}}function La(t){if(t!==Bt)return!1;if(!Ve)return cg(t),Ve=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Md(t.type,t.memoizedProps)),a=!a),a&&nt&&Ps(t),cg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=j_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=j_(t)}else i===27?(i=nt,Zs(t.type)?(t=Pd,Pd=null,nt=t):nt=i):nt=Bt?Pn(t.stateNode.nextSibling):null;return!0}function Qr(){nt=Bt=null,Ve=!1}function gf(){var t=Ls;return t!==null&&(un===null?un=t:un.push.apply(un,t),Ls=null),t}function $o(t){Ls===null?Ls=[t]:Ls.push(t)}var yf=Ke(null),Kr=null,es=null;function Us(t,i,a){we(yf,i._currentValue),i._currentValue=a}function ts(t){t._currentValue=yf.current,Le(yf)}function _f(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function vf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),_f(d.return,a,t),o||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),_f(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Pa(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;yn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Cn.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Al):t=[Al])}h=h.return}t!==null&&vf(i,t,a,o),i.flags|=262144}function zc(t){for(t=t.firstContext;t!==null;){if(!yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Yr(t){Kr=t,es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qt(t){return ug(Kr,t)}function Bc(t,i){return Kr===null&&Yr(t),ug(t,i)}function ug(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},es===null){if(t===null)throw Error(r(308));es=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else es=es.next=i;return a}var YT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},XT=s.unstable_scheduleCallback,$T=s.unstable_NormalPriority,St={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new YT,data:new Map,refCount:0}}function Wo(t){t.refCount--,t.refCount===0&&XT($T,function(){t.controller.abort()})}var Zo=null,Tf=0,Ua=0,za=null;function WT(t,i){if(Zo===null){var a=Zo=[];Tf=0,Ua=wd(),za={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Tf++,i.then(hg,hg),i}function hg(){if(--Tf===0&&Zo!==null){za!==null&&(za.status="fulfilled");var t=Zo;Zo=null,Ua=0,za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function ZT(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var fg=Q.S;Q.S=function(t,i){Xy=jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&WT(t,i),fg!==null&&fg(t,i)};var Xr=Ke(null);function bf(){var t=Xr.current;return t!==null?t:Je.pooledCache}function qc(t,i){i===null?we(Xr,Xr.current):we(Xr,i.pool)}function dg(){var t=bf();return t===null?null:{parent:St._currentValue,pool:t}}var Ba=Error(r(460)),Af=Error(r(474)),Fc=Error(r(542)),Hc={then:function(){}};function mg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Gn,Gn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,yg(t),t;default:if(typeof i.status=="string")i.then(Gn,Gn);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,yg(t),t}throw Wr=i,Ba}}function $r(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Wr=a,Ba):a}}var Wr=null;function gg(){if(Wr===null)throw Error(r(459));var t=Wr;return Wr=null,t}function yg(t){if(t===Ba||t===Fc)throw Error(r(483))}var qa=null,Jo=0;function Gc(t){var i=Jo;return Jo+=1,qa===null&&(qa=[]),pg(qa,t,i)}function el(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Qc(t,i){throw i.$$typeof===C?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function _g(t){function i(V,O){if(t){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function a(V,O){if(!t)return null;for(;O!==null;)i(V,O),O=O.sibling;return null}function o(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function h(V,O){return V=Zi(V,O),V.index=0,V.sibling=null,V}function d(V,O,z){return V.index=z,t?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=67108866,O):z):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function b(V,O,z,Y){return O===null||O.tag!==6?(O=hf(z,V.mode,Y),O.return=V,O):(O=h(O,z),O.return=V,O)}function N(V,O,z,Y){var de=z.type;return de===Z?G(V,O,z.props.children,Y,z.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===S&&$r(de)===O.type)?(O=h(O,z.props),el(O,z),O.return=V,O):(O=Pc(z.type,z.key,z.props,null,V.mode,Y),el(O,z),O.return=V,O)}function B(V,O,z,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ff(z,V.mode,Y),O.return=V,O):(O=h(O,z.children||[]),O.return=V,O)}function G(V,O,z,Y,de){return O===null||O.tag!==7?(O=Gr(z,V.mode,Y,de),O.return=V,O):(O=h(O,z),O.return=V,O)}function X(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=hf(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case P:return z=Pc(O.type,O.key,O.props,null,V.mode,z),el(z,O),z.return=V,z;case K:return O=ff(O,V.mode,z),O.return=V,O;case S:return O=$r(O),X(V,O,z)}if(Fe(O)||M(O))return O=Gr(O,V.mode,z,null),O.return=V,O;if(typeof O.then=="function")return X(V,Gc(O),z);if(O.$$typeof===J)return X(V,Bc(V,O),z);Qc(V,O)}return null}function q(V,O,z,Y){var de=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:b(V,O,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return z.key===de?N(V,O,z,Y):null;case K:return z.key===de?B(V,O,z,Y):null;case S:return z=$r(z),q(V,O,z,Y)}if(Fe(z)||M(z))return de!==null?null:G(V,O,z,Y,null);if(typeof z.then=="function")return q(V,O,Gc(z),Y);if(z.$$typeof===J)return q(V,O,Bc(V,z),Y);Qc(V,z)}return null}function H(V,O,z,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return V=V.get(z)||null,b(O,V,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return V=V.get(Y.key===null?z:Y.key)||null,N(O,V,Y,de);case K:return V=V.get(Y.key===null?z:Y.key)||null,B(O,V,Y,de);case S:return Y=$r(Y),H(V,O,z,Y,de)}if(Fe(Y)||M(Y))return V=V.get(z)||null,G(O,V,Y,de,null);if(typeof Y.then=="function")return H(V,O,z,Gc(Y),de);if(Y.$$typeof===J)return H(V,O,z,Bc(O,Y),de);Qc(O,Y)}return null}function ue(V,O,z,Y){for(var de=null,Pe=null,fe=O,Se=O=0,De=null;fe!==null&&Se<z.length;Se++){fe.index>Se?(De=fe,fe=null):De=fe.sibling;var Ue=q(V,fe,z[Se],Y);if(Ue===null){fe===null&&(fe=De);break}t&&fe&&Ue.alternate===null&&i(V,fe),O=d(Ue,O,Se),Pe===null?de=Ue:Pe.sibling=Ue,Pe=Ue,fe=De}if(Se===z.length)return a(V,fe),Ve&&Ji(V,Se),de;if(fe===null){for(;Se<z.length;Se++)fe=X(V,z[Se],Y),fe!==null&&(O=d(fe,O,Se),Pe===null?de=fe:Pe.sibling=fe,Pe=fe);return Ve&&Ji(V,Se),de}for(fe=o(fe);Se<z.length;Se++)De=H(fe,V,Se,z[Se],Y),De!==null&&(t&&De.alternate!==null&&fe.delete(De.key===null?Se:De.key),O=d(De,O,Se),Pe===null?de=De:Pe.sibling=De,Pe=De);return t&&fe.forEach(function(ir){return i(V,ir)}),Ve&&Ji(V,Se),de}function pe(V,O,z,Y){if(z==null)throw Error(r(151));for(var de=null,Pe=null,fe=O,Se=O=0,De=null,Ue=z.next();fe!==null&&!Ue.done;Se++,Ue=z.next()){fe.index>Se?(De=fe,fe=null):De=fe.sibling;var ir=q(V,fe,Ue.value,Y);if(ir===null){fe===null&&(fe=De);break}t&&fe&&ir.alternate===null&&i(V,fe),O=d(ir,O,Se),Pe===null?de=ir:Pe.sibling=ir,Pe=ir,fe=De}if(Ue.done)return a(V,fe),Ve&&Ji(V,Se),de;if(fe===null){for(;!Ue.done;Se++,Ue=z.next())Ue=X(V,Ue.value,Y),Ue!==null&&(O=d(Ue,O,Se),Pe===null?de=Ue:Pe.sibling=Ue,Pe=Ue);return Ve&&Ji(V,Se),de}for(fe=o(fe);!Ue.done;Se++,Ue=z.next())Ue=H(fe,V,Se,Ue.value,Y),Ue!==null&&(t&&Ue.alternate!==null&&fe.delete(Ue.key===null?Se:Ue.key),O=d(Ue,O,Se),Pe===null?de=Ue:Pe.sibling=Ue,Pe=Ue);return t&&fe.forEach(function(cb){return i(V,cb)}),Ve&&Ji(V,Se),de}function We(V,O,z,Y){if(typeof z=="object"&&z!==null&&z.type===Z&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case P:e:{for(var de=z.key;O!==null;){if(O.key===de){if(de=z.type,de===Z){if(O.tag===7){a(V,O.sibling),Y=h(O,z.props.children),Y.return=V,V=Y;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===S&&$r(de)===O.type){a(V,O.sibling),Y=h(O,z.props),el(Y,z),Y.return=V,V=Y;break e}a(V,O);break}else i(V,O);O=O.sibling}z.type===Z?(Y=Gr(z.props.children,V.mode,Y,z.key),Y.return=V,V=Y):(Y=Pc(z.type,z.key,z.props,null,V.mode,Y),el(Y,z),Y.return=V,V=Y)}return _(V);case K:e:{for(de=z.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(V,O.sibling),Y=h(O,z.children||[]),Y.return=V,V=Y;break e}else{a(V,O);break}else i(V,O);O=O.sibling}Y=ff(z,V.mode,Y),Y.return=V,V=Y}return _(V);case S:return z=$r(z),We(V,O,z,Y)}if(Fe(z))return ue(V,O,z,Y);if(M(z)){if(de=M(z),typeof de!="function")throw Error(r(150));return z=de.call(z),pe(V,O,z,Y)}if(typeof z.then=="function")return We(V,O,Gc(z),Y);if(z.$$typeof===J)return We(V,O,Bc(V,z),Y);Qc(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(a(V,O.sibling),Y=h(O,z),Y.return=V,V=Y):(a(V,O),Y=hf(z,V.mode,Y),Y.return=V,V=Y),_(V)):a(V,O)}return function(V,O,z,Y){try{Jo=0;var de=We(V,O,z,Y);return qa=null,de}catch(fe){if(fe===Ba||fe===Fc)throw fe;var Pe=_n(29,fe,null,V.mode);return Pe.lanes=Y,Pe.return=V,Pe}finally{}}}var Zr=_g(!0),vg=_g(!1),zs=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Bs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qs(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Be&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Lc(t),ng(t,null,a),i}return kc(t,o,i,a),Lc(t)}function tl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,xo(t,a)}}function Rf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Cf=!1;function nl(){if(Cf){var t=za;if(t!==null)throw t}}function il(t,i,a,o){Cf=!1;var h=t.updateQueue;zs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,B=N.next;N.next=null,_===null?d=B:_.next=B,_=N;var G=t.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==_&&(b===null?G.firstBaseUpdate=B:b.next=B,G.lastBaseUpdate=N))}if(d!==null){var X=h.baseState;_=0,G=B=N=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Ne&q)===q:(o&q)===q){q!==0&&q===Ua&&(Cf=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ue=t,pe=b;q=i;var We=a;switch(pe.tag){case 1:if(ue=pe.payload,typeof ue=="function"){X=ue.call(We,X,q);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=pe.payload,q=typeof ue=="function"?ue.call(We,X,q):ue,q==null)break e;X=w({},X,q);break e;case 2:zs=!0}}q=b.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(B=G=H,N=X):G=G.next=H,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;H=b,b=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(N=X),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Ks|=_,t.lanes=_,t.memoizedState=X}}function Eg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Tg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Eg(a[t],i)}var Fa=Ke(null),Kc=Ke(0);function bg(t,i){t=us,we(Kc,t),we(Fa,i),us=t|i.baseLanes}function xf(){we(Kc,us),we(Fa,Fa.current)}function If(){us=Kc.current,Le(Fa),Le(Kc)}var vn=Ke(null),Ln=null;function Fs(t){var i=t.alternate;we(pt,pt.current&1),we(vn,t),Ln===null&&(i===null||Fa.current!==null||i.memoizedState!==null)&&(Ln=t)}function Nf(t){we(pt,pt.current),we(vn,t),Ln===null&&(Ln=t)}function Ag(t){t.tag===22?(we(pt,pt.current),we(vn,t),Ln===null&&(Ln=t)):Hs()}function Hs(){we(pt,pt.current),we(vn,vn.current)}function En(t){Le(vn),Ln===t&&(Ln=null),Le(pt)}var pt=Ke(0);function Yc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kd(a)||Ld(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ns=0,Ae=null,Xe=null,Rt=null,Xc=!1,Ha=!1,Jr=!1,$c=0,sl=0,Ga=null,JT=0;function lt(){throw Error(r(321))}function Df(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!yn(t[a],i[a]))return!1;return!0}function Of(t,i,a,o,h,d){return ns=d,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?ay:Kf,Jr=!1,d=a(o,h),Jr=!1,Ha&&(d=Sg(i,a,o,h)),wg(t),d}function wg(t){Q.H=ol;var i=Xe!==null&&Xe.next!==null;if(ns=0,Rt=Xe=Ae=null,Xc=!1,sl=0,Ga=null,i)throw Error(r(300));t===null||Ct||(t=t.dependencies,t!==null&&zc(t)&&(Ct=!0))}function Sg(t,i,a,o){Ae=t;var h=0;do{if(Ha&&(Ga=null),sl=0,Ha=!1,25<=h)throw Error(r(301));if(h+=1,Rt=Xe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=oy,d=i(a,o)}while(Ha);return d}function e2(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?rl(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ae.flags|=1024),i}function Mf(){var t=$c!==0;return $c=0,t}function jf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Vf(t){if(Xc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Xc=!1}ns=0,Rt=Xe=Ae=null,Ha=!1,sl=$c=0,Ga=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ae.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function gt(){if(Xe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=Rt===null?Ae.memoizedState:Rt.next;if(i!==null)Rt=i,Xe=t;else{if(t===null)throw Ae.alternate===null?Error(r(467)):Error(r(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Rt===null?Ae.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(t){var i=sl;return sl+=1,Ga===null&&(Ga=[]),t=pg(Ga,t,i),i=Ae,(Rt===null?i.memoizedState:Rt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?ay:Kf),t}function Zc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rl(t);if(t.$$typeof===J)return qt(t)}throw Error(r(438,String(t)))}function kf(t){var i=null,a=Ae.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ae.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wc(),Ae.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=j;return i.index++,a}function is(t,i){return typeof i=="function"?i(t):i}function Jc(t){var i=gt();return Lf(i,Xe,t)}function Lf(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,N=null,B=i,G=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(Ne&X)===X:(ns&X)===X){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===Ua&&(G=!0);else if((ns&q)===q){B=B.next,q===Ua&&(G=!0);continue}else X={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=X,_=d):N=N.next=X,Ae.lanes|=q,Ks|=q;X=B.action,Jr&&a(d,X),d=B.hasEagerState?B.eagerState:a(d,X)}else q={lane:X,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(b=N=q,_=d):N=N.next=q,Ae.lanes|=X,Ks|=X;B=B.next}while(B!==null&&B!==i);if(N===null?_=d:N.next=b,!yn(d,t.memoizedState)&&(Ct=!0,G&&(a=za,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Pf(t){var i=gt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);yn(d,i.memoizedState)||(Ct=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Rg(t,i,a){var o=Ae,h=gt(),d=Ve;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!yn((Xe||h).memoizedState,a);if(_&&(h.memoizedState=a,Ct=!0),h=h.queue,Bf(Ig.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||Rt!==null&&Rt.memoizedState.tag&1){if(o.flags|=2048,Qa(9,{destroy:void 0},xg.bind(null,o,h,a,i),null),Je===null)throw Error(r(349));d||(ns&127)!==0||Cg(o,i,a)}return a}function Cg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ae.updateQueue,i===null?(i=Wc(),Ae.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function xg(t,i,a,o){i.value=a,i.getSnapshot=o,Ng(i)&&Dg(t)}function Ig(t,i,a){return a(function(){Ng(i)&&Dg(t)})}function Ng(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!yn(t,a)}catch{return!0}}function Dg(t){var i=Hr(t,2);i!==null&&hn(i,t,2)}function Uf(t){var i=nn();if(typeof t=="function"){var a=t;if(t=a(),Jr){en(!0);try{a()}finally{en(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:t},i}function Og(t,i,a,o){return t.baseState=a,Lf(t,Xe,typeof o=="function"?o:is)}function t2(t,i,a,o,h){if(nu(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Q.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Mg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Mg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=Q.T,_={};Q.T=_;try{var b=a(h,o),N=Q.S;N!==null&&N(_,b),jg(t,i,b)}catch(B){zf(t,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),Q.T=d}}else try{d=a(h,o),jg(t,i,d)}catch(B){zf(t,i,B)}}function jg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Vg(t,i,o)},function(o){return zf(t,i,o)}):Vg(t,i,a)}function Vg(t,i,a){i.status="fulfilled",i.value=a,kg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Mg(t,a)))}function zf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,kg(i),i=i.next;while(i!==o)}t.action=null}function kg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Lg(t,i){return i}function Pg(t,i){if(Ve){var a=Je.formState;if(a!==null){e:{var o=Ae;if(Ve){if(nt){t:{for(var h=nt,d=kn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){nt=Pn(h.nextSibling),o=h.data==="F!";break e}}Ps(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lg,lastRenderedState:i},a.queue=o,a=iy.bind(null,Ae,o),o.dispatch=a,o=Uf(!1),d=Qf.bind(null,Ae,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=t2.bind(null,Ae,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Ug(t){var i=gt();return zg(i,Xe,t)}function zg(t,i,a){if(i=Lf(t,i,Lg)[0],t=Jc(is)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=rl(i)}catch(_){throw _===Ba?Fc:_}else o=i;i=gt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ae.flags|=2048,Qa(9,{destroy:void 0},n2.bind(null,h,a),null)),[o,d,t]}function n2(t,i){t.action=i}function Bg(t){var i=gt(),a=Xe;if(a!==null)return zg(i,a,t);gt(),i=i.memoizedState,a=gt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Qa(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=Wc(),Ae.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function qg(){return gt().memoizedState}function eu(t,i,a,o){var h=nn();Ae.flags|=t,h.memoizedState=Qa(1|i,{destroy:void 0},a,o===void 0?null:o)}function tu(t,i,a,o){var h=gt();o=o===void 0?null:o;var d=h.memoizedState.inst;Xe!==null&&o!==null&&Df(o,Xe.memoizedState.deps)?h.memoizedState=Qa(i,d,a,o):(Ae.flags|=t,h.memoizedState=Qa(1|i,d,a,o))}function Fg(t,i){eu(8390656,8,t,i)}function Bf(t,i){tu(2048,8,t,i)}function i2(t){Ae.flags|=4;var i=Ae.updateQueue;if(i===null)i=Wc(),Ae.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Hg(t){var i=gt().memoizedState;return i2({ref:i,nextImpl:t}),function(){if((Be&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Gg(t,i){return tu(4,2,t,i)}function Qg(t,i){return tu(4,4,t,i)}function Kg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Yg(t,i,a){a=a!=null?a.concat([t]):null,tu(4,4,Kg.bind(null,i,t),a)}function qf(){}function Xg(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Df(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function $g(t,i){var a=gt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Df(i,o[1]))return o[0];if(o=t(),Jr){en(!0);try{t()}finally{en(!1)}}return a.memoizedState=[o,i],o}function Ff(t,i,a){return a===void 0||(ns&1073741824)!==0&&(Ne&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Wy(),Ae.lanes|=t,Ks|=t,a)}function Wg(t,i,a,o){return yn(a,i)?a:Fa.current!==null?(t=Ff(t,a,o),yn(t,i)||(Ct=!0),t):(ns&42)===0||(ns&1073741824)!==0&&(Ne&261930)===0?(Ct=!0,t.memoizedState=a):(t=Wy(),Ae.lanes|=t,Ks|=t,i)}function Zg(t,i,a,o,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var _=Q.T,b={};Q.T=b,Qf(t,!1,i,a);try{var N=h(),B=Q.S;if(B!==null&&B(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=ZT(N,o);al(t,i,G,An(t))}else al(t,i,o,An(t))}catch(X){al(t,i,{then:function(){},status:"rejected",reason:X},An())}finally{ne.p=d,_!==null&&b.types!==null&&(_.types=b.types),Q.T=_}}function s2(){}function Hf(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=Jg(t).queue;Zg(t,h,i,he,a===null?s2:function(){return ey(t),a(o)})}function Jg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ey(t){var i=Jg(t);i.next===null&&(i=t.alternate.memoizedState),al(t,i.next.queue,{},An())}function Gf(){return qt(Al)}function ty(){return gt().memoizedState}function ny(){return gt().memoizedState}function r2(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=An();t=Bs(a);var o=qs(i,t,a);o!==null&&(hn(o,i,a),tl(o,i,a)),i={cache:Ef()},t.payload=i;return}i=i.return}}function a2(t,i,a){var o=An();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},nu(t)?sy(i,a):(a=cf(t,i,a,o),a!==null&&(hn(a,t,o),ry(a,i,o)))}function iy(t,i,a){var o=An();al(t,i,a,o)}function al(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(nu(t))sy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,yn(b,_))return kc(t,i,h,0),Je===null&&Vc(),!1}catch{}finally{}if(a=cf(t,i,h,o),a!==null)return hn(a,t,o),ry(a,i,o),!0}return!1}function Qf(t,i,a,o){if(o={lane:2,revertLane:wd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nu(t)){if(i)throw Error(r(479))}else i=cf(t,a,o,2),i!==null&&hn(i,t,2)}function nu(t){var i=t.alternate;return t===Ae||i!==null&&i===Ae}function sy(t,i){Ha=Xc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function ry(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,xo(t,a)}}var ol={readContext:qt,use:Zc,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};ol.useEffectEvent=lt;var ay={readContext:qt,use:Zc,useCallback:function(t,i){return nn().memoizedState=[t,i===void 0?null:i],t},useContext:qt,useEffect:Fg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,eu(4194308,4,Kg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return eu(4194308,4,t,i)},useInsertionEffect:function(t,i){eu(4,2,t,i)},useMemo:function(t,i){var a=nn();i=i===void 0?null:i;var o=t();if(Jr){en(!0);try{t()}finally{en(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=nn();if(a!==void 0){var h=a(i);if(Jr){en(!0);try{a(i)}finally{en(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=a2.bind(null,Ae,t),[o.memoizedState,t]},useRef:function(t){var i=nn();return t={current:t},i.memoizedState=t},useState:function(t){t=Uf(t);var i=t.queue,a=iy.bind(null,Ae,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:qf,useDeferredValue:function(t,i){var a=nn();return Ff(a,t,i)},useTransition:function(){var t=Uf(!1);return t=Zg.bind(null,Ae,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ae,h=nn();if(Ve){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Je===null)throw Error(r(349));(Ne&127)!==0||Cg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Fg(Ig.bind(null,o,d,t),[t]),o.flags|=2048,Qa(9,{destroy:void 0},xg.bind(null,o,d,a,i),null),a},useId:function(){var t=nn(),i=Je.identifierPrefix;if(Ve){var a=Ci,o=Ri;a=(o&~(1<<32-st(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=$c++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=JT++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Gf,useFormState:Pg,useActionState:Pg,useOptimistic:function(t){var i=nn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qf.bind(null,Ae,!0,a),a.dispatch=i,[t,i]},useMemoCache:kf,useCacheRefresh:function(){return nn().memoizedState=r2.bind(null,Ae)},useEffectEvent:function(t){var i=nn(),a={impl:t};return i.memoizedState=a,function(){if((Be&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Kf={readContext:qt,use:Zc,useCallback:Xg,useContext:qt,useEffect:Bf,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:$g,useReducer:Jc,useRef:qg,useState:function(){return Jc(is)},useDebugValue:qf,useDeferredValue:function(t,i){var a=gt();return Wg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Jc(is)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:Rg,useId:ty,useHostTransitionStatus:Gf,useFormState:Ug,useActionState:Ug,useOptimistic:function(t,i){var a=gt();return Og(a,Xe,t,i)},useMemoCache:kf,useCacheRefresh:ny};Kf.useEffectEvent=Hg;var oy={readContext:qt,use:Zc,useCallback:Xg,useContext:qt,useEffect:Bf,useImperativeHandle:Yg,useInsertionEffect:Gg,useLayoutEffect:Qg,useMemo:$g,useReducer:Pf,useRef:qg,useState:function(){return Pf(is)},useDebugValue:qf,useDeferredValue:function(t,i){var a=gt();return Xe===null?Ff(a,t,i):Wg(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Pf(is)[0],i=gt().memoizedState;return[typeof t=="boolean"?t:rl(t),i]},useSyncExternalStore:Rg,useId:ty,useHostTransitionStatus:Gf,useFormState:Bg,useActionState:Bg,useOptimistic:function(t,i){var a=gt();return Xe!==null?Og(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:ny};oy.useEffectEvent=Hg;function Yf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=An(),h=Bs(o);h.payload=i,a!=null&&(h.callback=a),i=qs(t,h,o),i!==null&&(hn(i,t,o),tl(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=An(),h=Bs(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=qs(t,h,o),i!==null&&(hn(i,t,o),tl(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=An(),o=Bs(a);o.tag=2,i!=null&&(o.callback=i),i=qs(t,o,a),i!==null&&(hn(i,t,a),tl(i,t,a))}};function ly(t,i,a,o,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,_):i.prototype&&i.prototype.isPureReactComponent?!Ko(a,o)||!Ko(h,d):!0}function cy(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Xf.enqueueReplaceState(i,i.state,null)}function ea(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function uy(t){jc(t)}function hy(t){console.error(t)}function fy(t){jc(t)}function iu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function dy(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function $f(t,i,a){return a=Bs(a),a.tag=3,a.payload={element:null},a.callback=function(){iu(t,i)},a}function my(t){return t=Bs(t),t.tag=3,t}function py(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){dy(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){dy(i,a,o),typeof h!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function o2(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Pa(i,a,h,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return Ln===null?pu():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Hc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Td(t,o,h)),!1;case 22:return a.flags|=65536,o===Hc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Td(t,o,h)),!1}throw Error(r(435,a.tag))}return Td(t,o,h),pu(),!1}if(Ve)return i=vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==pf&&(t=Error(r(422),{cause:o}),$o(Mn(t,a)))):(o!==pf&&(i=Error(r(423),{cause:o}),$o(Mn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Mn(o,a),h=$f(t.stateNode,o,h),Rf(t,h),ct!==4&&(ct=2)),!1;var d=Error(r(520),{cause:o});if(d=Mn(d,a),pl===null?pl=[d]:pl.push(d),ct!==4&&(ct=2),i===null)return!0;o=Mn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=$f(a.stateNode,o,t),Rf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ys===null||!Ys.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=my(h),py(h,t,a,o),Rf(a,h),!1}a=a.return}while(a!==null);return!1}var Wf=Error(r(461)),Ct=!1;function Ft(t,i,a,o){i.child=t===null?vg(i,null,a,o):Zr(i,t.child,a,o)}function gy(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var _={};for(var b in o)b!=="ref"&&(_[b]=o[b])}else _=o;return Yr(i),o=Of(t,i,a,_,d,h),b=Mf(),t!==null&&!Ct?(jf(t,i,h),ss(t,i,h)):(Ve&&b&&df(i),i.flags|=1,Ft(t,i,o,h),i.child)}function yy(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!uf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,_y(t,i,d,o,h)):(t=Pc(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!rd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ko,a(_,o)&&t.ref===i.ref)return ss(t,i,h)}return i.flags|=1,t=Zi(d,o),t.ref=i.ref,t.return=i,i.child=t}function _y(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(Ko(d,o)&&t.ref===i.ref)if(Ct=!1,i.pendingProps=o=d,rd(t,h))(t.flags&131072)!==0&&(Ct=!0);else return i.lanes=t.lanes,ss(t,i,h)}return Zf(t,i,a,o,h)}function vy(t,i,a,o){var h=o.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return Ey(t,i,d,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&qc(i,d!==null?d.cachePool:null),d!==null?bg(i,d):xf(),Ag(i);else return o=i.lanes=536870912,Ey(t,i,d!==null?d.baseLanes|a:a,a,o)}else d!==null?(qc(i,d.cachePool),bg(i,d),Hs(),i.memoizedState=null):(t!==null&&qc(i,null),xf(),Hs());return Ft(t,i,h,a),i.child}function ll(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ey(t,i,a,o,h){var d=bf();return d=d===null?null:{parent:St._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&qc(i,null),xf(),Ag(i),t!==null&&Pa(t,i,o,!0),i.childLanes=h,null}function su(t,i){return i=au({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Ty(t,i,a){return Zr(i,t.child,null,a),t=su(i,i.pendingProps),t.flags|=2,En(i),i.memoizedState=null,t}function l2(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ve){if(o.mode==="hidden")return t=su(i,o),i.lanes=536870912,ll(null,t);if(Nf(i),(t=nt)?(t=M_(t,kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=sg(t),a.return=i,i.child=a,Bt=i,nt=null)):t=null,t===null)throw Ps(i);return i.lanes=536870912,null}return su(i,o)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Nf(i),h)if(i.flags&256)i.flags&=-257,i=Ty(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ct||Pa(t,i,a,!1),h=(a&t.childLanes)!==0,Ct||h){if(o=Je,o!==null&&(_=Io(o,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Hr(t,_),hn(o,t,_),Wf;pu(),i=Ty(t,i,a)}else t=d.treeContext,nt=Pn(_.nextSibling),Bt=i,Ve=!0,Ls=null,kn=!1,t!==null&&og(i,t),i=su(i,o),i.flags|=4096;return i}return t=Zi(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ru(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Zf(t,i,a,o,h){return Yr(i),a=Of(t,i,a,o,void 0,h),o=Mf(),t!==null&&!Ct?(jf(t,i,h),ss(t,i,h)):(Ve&&o&&df(i),i.flags|=1,Ft(t,i,a,h),i.child)}function by(t,i,a,o,h,d){return Yr(i),i.updateQueue=null,a=Sg(i,o,a,h),wg(t),o=Mf(),t!==null&&!Ct?(jf(t,i,d),ss(t,i,d)):(Ve&&o&&df(i),i.flags|=1,Ft(t,i,a,d),i.child)}function Ay(t,i,a,o,h){if(Yr(i),i.stateNode===null){var d=ja,_=a.contextType;typeof _=="object"&&_!==null&&(d=qt(_)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Xf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},wf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?qt(_):ja,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Yf(i,a,_,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Xf.enqueueReplaceState(d,d.state,null),il(i,o,d,h),nl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=ea(a,b);d.props=N;var B=d.context,G=a.contextType;_=ja,typeof G=="object"&&G!==null&&(_=qt(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==_)&&cy(i,d,o,_),zs=!1;var q=i.memoizedState;d.state=q,il(i,o,d,h),nl(),B=i.memoizedState,b||q!==B||zs?(typeof X=="function"&&(Yf(i,a,X,o),B=i.memoizedState),(N=zs||ly(i,a,N,o,q,B,_))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=_,o=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Sf(t,i),_=i.memoizedProps,G=ea(a,_),d.props=G,X=i.pendingProps,q=d.context,B=a.contextType,N=ja,typeof B=="object"&&B!==null&&(N=qt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||q!==N)&&cy(i,d,o,N),zs=!1,q=i.memoizedState,d.state=q,il(i,o,d,h),nl();var H=i.memoizedState;_!==X||q!==H||zs||t!==null&&t.dependencies!==null&&zc(t.dependencies)?(typeof b=="function"&&(Yf(i,a,b,o),H=i.memoizedState),(G=zs||ly(i,a,G,o,q,H,N)||t!==null&&t.dependencies!==null&&zc(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=N,o=G):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,ru(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Zr(i,t.child,null,h),i.child=Zr(i,null,a,h)):Ft(t,i,a,h),i.memoizedState=d.state,t=i.child):t=ss(t,i,h),t}function wy(t,i,a,o){return Qr(),i.flags|=256,Ft(t,i,a,o),i.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(t){return{baseLanes:t,cachePool:dg()}}function td(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=bn),t}function Sy(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ve){if(h?Fs(i):Hs(),(t=nt)?(t=M_(t,kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ks!==null?{id:Ri,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=sg(t),a.return=i,i.child=a,Bt=i,nt=null)):t=null,t===null)throw Ps(i);return Ld(t)?i.lanes=32:i.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(Hs(),h=i.mode,b=au({mode:"hidden",children:b},h),o=Gr(o,h,a,null),b.return=i,o.return=i,b.sibling=o,i.child=b,o=i.child,o.memoizedState=ed(a),o.childLanes=td(t,_,a),i.memoizedState=Jf,ll(null,o)):(Fs(i),nd(i,b))}var N=t.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Fs(i),i.flags&=-257,i=id(t,i,a)):i.memoizedState!==null?(Hs(),i.child=t.child,i.flags|=128,i=null):(Hs(),b=o.fallback,h=i.mode,o=au({mode:"visible",children:o.children},h),b=Gr(b,h,a,null),b.flags|=2,o.return=i,b.return=i,o.sibling=b,i.child=o,Zr(i,t.child,null,a),o=i.child,o.memoizedState=ed(a),o.childLanes=td(t,_,a),i.memoizedState=Jf,i=ll(null,o));else if(Fs(i),Ld(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,o=Error(r(419)),o.stack="",o.digest=_,$o({value:o,source:null,stack:null}),i=id(t,i,a)}else if(Ct||Pa(t,i,a,!1),_=(a&t.childLanes)!==0,Ct||_){if(_=Je,_!==null&&(o=Io(_,a),o!==0&&o!==N.retryLane))throw N.retryLane=o,Hr(t,o),hn(_,t,o),Wf;kd(b)||pu(),i=id(t,i,a)}else kd(b)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,nt=Pn(b.nextSibling),Bt=i,Ve=!0,Ls=null,kn=!1,t!==null&&og(i,t),i=nd(i,o.children),i.flags|=4096);return i}return h?(Hs(),b=o.fallback,h=i.mode,N=t.child,B=N.sibling,o=Zi(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,B!==null?b=Zi(B,b):(b=Gr(b,h,a,null),b.flags|=2),b.return=i,o.return=i,o.sibling=b,i.child=o,ll(null,o),o=i.child,b=t.child.memoizedState,b===null?b=ed(a):(h=b.cachePool,h!==null?(N=St._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=dg(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=td(t,_,a),i.memoizedState=Jf,ll(t.child,o)):(Fs(i),a=t.child,t=a.sibling,a=Zi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function nd(t,i){return i=au({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function au(t,i){return t=_n(22,t,null,i),t.lanes=0,t}function id(t,i,a){return Zr(i,t.child,null,a),t=nd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ry(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),_f(t.return,i,a)}function sd(t,i,a,o,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function Cy(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var _=pt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,we(pt,_),Ft(t,i,o,a),o=Ve?Xo:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ry(t,a,i);else if(t.tag===19)Ry(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Yc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),sd(i,!1,h,a,d,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Yc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}sd(i,!0,a,null,d,o);break;case"together":sd(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function ss(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ks|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Pa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Zi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Zi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function rd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&zc(t)))}function c2(t,i,a){switch(i.tag){case 3:ri(i,i.stateNode.containerInfo),Us(i,St,t.memoizedState.cache),Qr();break;case 27:case 5:Sr(i);break;case 4:ri(i,i.stateNode.containerInfo);break;case 10:Us(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nf(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Fs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Sy(t,i,a):(Fs(i),t=ss(t,i,a),t!==null?t.sibling:null);Fs(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Pa(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Cy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),we(pt,pt.current),o)break;return null;case 22:return i.lanes=0,vy(t,i,a,i.pendingProps);case 24:Us(i,St,t.memoizedState.cache)}return ss(t,i,a)}function xy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ct=!0;else{if(!rd(t,a)&&(i.flags&128)===0)return Ct=!1,c2(t,i,a);Ct=(t.flags&131072)!==0}else Ct=!1,Ve&&(i.flags&1048576)!==0&&ag(i,Xo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=$r(i.elementType),i.type=t,typeof t=="function")uf(t)?(o=ea(t,o),i.tag=1,i=Ay(null,i,t,o,a)):(i.tag=0,i=Zf(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ie){i.tag=11,i=gy(null,i,t,o,a);break e}else if(h===D){i.tag=14,i=yy(null,i,t,o,a);break e}}throw i=Ce(t)||t,Error(r(306,i,""))}}return i;case 0:return Zf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ea(o,i.pendingProps),Ay(t,i,o,h,a);case 3:e:{if(ri(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Sf(t,i),il(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Us(i,St,o),o!==d.cache&&vf(i,[St],a,!0),nl(),o=_.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=wy(t,i,o,a);break e}else if(o!==h){h=Mn(Error(r(424)),i),$o(h),i=wy(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Pn(t.firstChild),Bt=i,Ve=!0,Ls=null,kn=!0,a=vg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qr(),o===h){i=ss(t,i,a);break e}Ft(t,i,o,a)}i=i.child}return i;case 26:return ru(t,i),t===null?(a=U_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ve||(a=i.type,t=i.pendingProps,o=bu(sn.current).createElement(a),o[bt]=i,o[Vt]=t,Ht(o,a,t),At(o),i.stateNode=o):i.memoizedState=U_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Sr(i),t===null&&Ve&&(o=i.stateNode=k_(i.type,i.pendingProps,sn.current),Bt=i,kn=!0,h=nt,Zs(i.type)?(Pd=h,nt=Pn(o.firstChild)):nt=h),Ft(t,i,i.pendingProps.children,a),ru(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ve&&((h=o=nt)&&(o=U2(o,i.type,i.pendingProps,kn),o!==null?(i.stateNode=o,Bt=i,nt=Pn(o.firstChild),kn=!1,h=!0):h=!1),h||Ps(i)),Sr(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,o=d.children,Md(h,d)?o=null:_!==null&&Md(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Of(t,i,e2,null,null,a),Al._currentValue=h),ru(t,i),Ft(t,i,o,a),i.child;case 6:return t===null&&Ve&&((t=a=nt)&&(a=z2(a,i.pendingProps,kn),a!==null?(i.stateNode=a,Bt=i,nt=null,t=!0):t=!1),t||Ps(i)),null;case 13:return Sy(t,i,a);case 4:return ri(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Zr(i,null,o,a):Ft(t,i,o,a),i.child;case 11:return gy(t,i,i.type,i.pendingProps,a);case 7:return Ft(t,i,i.pendingProps,a),i.child;case 8:return Ft(t,i,i.pendingProps.children,a),i.child;case 12:return Ft(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Us(i,i.type,o.value),Ft(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Yr(i),h=qt(h),o=o(h),i.flags|=1,Ft(t,i,o,a),i.child;case 14:return yy(t,i,i.type,i.pendingProps,a);case 15:return _y(t,i,i.type,i.pendingProps,a);case 19:return Cy(t,i,a);case 31:return l2(t,i,a);case 22:return vy(t,i,a,i.pendingProps);case 24:return Yr(i),o=qt(St),t===null?(h=bf(),h===null&&(h=Je,d=Ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},wf(i),Us(i,St,h)):((t.lanes&a)!==0&&(Sf(t,i),il(i,null,null,a),nl()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Us(i,St,o)):(o=d.cache,Us(i,St,o),o!==h.cache&&vf(i,[St],a,!0))),Ft(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function rs(t){t.flags|=4}function ad(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(t_())t.flags|=8192;else throw Wr=Hc,Af}else t.flags&=-16777217}function Iy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!H_(i))if(t_())t.flags|=8192;else throw Wr=Hc,Af}function ou(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?dc():536870912,t.lanes|=i,$a|=i)}function cl(t,i){if(!Ve)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function u2(t,i,a){var o=i.pendingProps;switch(mf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ts(St),Zt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(La(i)?rs(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,gf())),it(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(rs(i),d!==null?(it(i),Iy(i,d)):(it(i),ad(i,h,null,o,a))):d?d!==t.memoizedState?(rs(i),it(i),Iy(i,d)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&rs(i),it(i),ad(i,h,t,o,a)),null;case 27:if(Bn(i),a=sn.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}t=tt.current,La(i)?lg(i):(t=k_(h,o,a),i.stateNode=t,rs(i))}return it(i),null;case 5:if(Bn(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return it(i),null}if(d=tt.current,La(i))lg(i);else{var _=bu(sn.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}d[bt]=i,d[Vt]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch(Ht(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&rs(i)}}return it(i),ad(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&rs(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=sn.current,La(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Bt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[bt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||S_(t.nodeValue,a)),t||Ps(i,!0)}else t=bu(t).createTextNode(o),t[bt]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=La(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[bt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(En(i),i):(En(i),null);if((i.flags&128)!==0)throw Error(r(558))}return it(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=La(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[bt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),h=!1}else h=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(En(i),i):(En(i),null)}return En(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),ou(i,i.updateQueue),it(i),null);case 4:return Zt(),t===null&&xd(i.stateNode.containerInfo),it(i),null;case 10:return ts(i.type),it(i),null;case 19:if(Le(pt),o=i.memoizedState,o===null)return it(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)cl(o,!1);else{if(ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Yc(t),d!==null){for(i.flags|=128,cl(o,!1),t=d.updateQueue,i.updateQueue=t,ou(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)ig(a,t),a=a.sibling;return we(pt,pt.current&1|2),Ve&&Ji(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&jt()>fu&&(i.flags|=128,h=!0,cl(o,!1),i.lanes=4194304)}else{if(!h)if(t=Yc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,ou(i,t),cl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Ve)return it(i),null}else 2*jt()-o.renderingStartTime>fu&&a!==536870912&&(i.flags|=128,h=!0,cl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(t=o.last,t!==null?t.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=jt(),t.sibling=null,a=pt.current,we(pt,h?a&1|2:a&1),Ve&&Ji(i,o.treeForkCount),t):(it(i),null);case 22:case 23:return En(i),If(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&ou(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&Le(Xr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ts(St),it(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function h2(t,i){switch(mf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ts(St),Zt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Bn(i),null;case 31:if(i.memoizedState!==null){if(En(i),i.alternate===null)throw Error(r(340));Qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(En(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Qr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Le(pt),null;case 4:return Zt(),null;case 10:return ts(i.type),null;case 22:case 23:return En(i),If(),t!==null&&Le(Xr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ts(St),null;case 25:return null;default:return null}}function Ny(t,i){switch(mf(i),i.tag){case 3:ts(St),Zt();break;case 26:case 27:case 5:Bn(i);break;case 4:Zt();break;case 31:i.memoizedState!==null&&En(i);break;case 13:En(i);break;case 19:Le(pt);break;case 10:ts(i.type);break;case 22:case 23:En(i),If(),t!==null&&Le(Xr);break;case 24:ts(St)}}function ul(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,_=a.inst;o=d(),_.destroy=o}a=a.next}while(a!==h)}}catch(b){Qe(i,i.return,b)}}function Gs(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var _=o.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var N=a,B=b;try{B()}catch(G){Qe(h,N,G)}}}o=o.next}while(o!==d)}}catch(G){Qe(i,i.return,G)}}function Dy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Tg(i,a)}catch(o){Qe(t,t.return,o)}}}function Oy(t,i,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Qe(t,i,o)}}function hl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){Qe(t,i,h)}}function xi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Qe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Qe(t,i,h)}else a.current=null}function My(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Qe(t,t.return,h)}}function od(t,i,a){try{var o=t.stateNode;M2(o,t.type,a,i),o[Vt]=i}catch(h){Qe(t,t.return,h)}}function jy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zs(t.type)||t.tag===4}function ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Gn));else if(o!==4&&(o===27&&Zs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(cd(t,i,a),t=t.sibling;t!==null;)cd(t,i,a),t=t.sibling}function lu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Zs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lu(t,i,a),t=t.sibling;t!==null;)lu(t,i,a),t=t.sibling}function Vy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ht(i,o,a),i[bt]=t,i[Vt]=a}catch(d){Qe(t,t.return,d)}}var as=!1,xt=!1,ud=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function f2(t,i){if(t=t.containerInfo,Dd=Iu,t=Yp(t),nf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,B=0,G=0,X=t,q=null;t:for(;;){for(var H;X!==a||h!==0&&X.nodeType!==3||(b=_+h),X!==d||o!==0&&X.nodeType!==3||(N=_+o),X.nodeType===3&&(_+=X.nodeValue.length),(H=X.firstChild)!==null;)q=X,X=H;for(;;){if(X===t)break t;if(q===a&&++B===h&&(b=_),q===d&&++G===o&&(N=_),(H=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=H}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Od={focusedElem:t,selectionRange:a},Iu=!1,Lt=i;Lt!==null;)if(i=Lt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Lt=t;else for(;Lt!==null;){switch(i=Lt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var ue=ea(a.type,h);t=o.getSnapshotBeforeUpdate(ue,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Qe(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Lt=t;break}Lt=i.return}}function Ly(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ls(t,a),o&4&&ul(5,a);break;case 1:if(ls(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){Qe(a,a.return,_)}else{var h=ea(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Qe(a,a.return,_)}}o&64&&Dy(a),o&512&&hl(a,a.return);break;case 3:if(ls(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Tg(t,i)}catch(_){Qe(a,a.return,_)}}break;case 27:i===null&&o&4&&Vy(a);case 26:case 5:ls(t,a),i===null&&o&4&&My(a),o&512&&hl(a,a.return);break;case 12:ls(t,a);break;case 31:ls(t,a),o&4&&zy(t,a);break;case 13:ls(t,a),o&4&&By(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=T2.bind(null,a),B2(t,a))));break;case 22:if(o=a.memoizedState!==null||as,!o){i=i!==null&&i.memoizedState!==null||xt,h=as;var d=xt;as=o,(xt=i)&&!d?cs(t,a,(a.subtreeFlags&8772)!==0):ls(t,a),as=h,xt=d}break;case 30:break;default:ls(t,a)}}function Py(t){var i=t.alternate;i!==null&&(t.alternate=null,Py(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ea(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,on=!1;function os(t,i,a){for(a=a.child;a!==null;)Uy(t,i,a),a=a.sibling}function Uy(t,i,a){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Jt,a)}catch{}switch(a.tag){case 26:xt||xi(a,i),os(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||xi(a,i);var o=at,h=on;Zs(a.type)&&(at=a.stateNode,on=!1),os(t,i,a),El(a.stateNode),at=o,on=h;break;case 5:xt||xi(a,i);case 6:if(o=at,h=on,at=null,os(t,i,a),at=o,on=h,at!==null)if(on)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(d){Qe(a,i,d)}else try{at.removeChild(a.stateNode)}catch(d){Qe(a,i,d)}break;case 18:at!==null&&(on?(t=at,D_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),so(t)):D_(at,a.stateNode));break;case 4:o=at,h=on,at=a.stateNode.containerInfo,on=!0,os(t,i,a),at=o,on=h;break;case 0:case 11:case 14:case 15:Gs(2,a,i),xt||Gs(4,a,i),os(t,i,a);break;case 1:xt||(xi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Oy(a,i,o)),os(t,i,a);break;case 21:os(t,i,a);break;case 22:xt=(o=xt)||a.memoizedState!==null,os(t,i,a),xt=o;break;default:os(t,i,a)}}function zy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{so(t)}catch(a){Qe(i,i.return,a)}}}function By(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{so(t)}catch(a){Qe(i,i.return,a)}}function d2(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ky),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ky),i;default:throw Error(r(435,t.tag))}}function cu(t,i){var a=d2(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=b2.bind(null,t,o);o.then(h,h)}})}function ln(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Zs(b.type)){at=b.stateNode,on=!1;break e}break;case 5:at=b.stateNode,on=!1;break e;case 3:case 4:at=b.stateNode.containerInfo,on=!0;break e}b=b.return}if(at===null)throw Error(r(160));Uy(d,_,h),at=null,on=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)qy(i,t),i=i.sibling}var Wn=null;function qy(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(i,t),cn(t),o&4&&(Gs(3,t,t.return),ul(3,t),Gs(5,t,t.return));break;case 1:ln(i,t),cn(t),o&512&&(xt||a===null||xi(a,a.return)),o&64&&as&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Wn;if(ln(i,t),cn(t),o&512&&(xt||a===null||xi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[mi]||d[bt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Ht(d,o,a),d[bt]=t,At(d),o=d;break e;case"link":var _=q_("link","href",h).get(o+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(o),Ht(d,o,a),h.head.appendChild(d);break;case"meta":if(_=q_("meta","content",h).get(o+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(o),Ht(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[bt]=t,At(d),o=d}t.stateNode=o}else F_(h,t.type,t.stateNode);else t.stateNode=B_(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?F_(h,t.type,t.stateNode):B_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&od(t,t.memoizedProps,a.memoizedProps)}break;case 27:ln(i,t),cn(t),o&512&&(xt||a===null||xi(a,a.return)),a!==null&&o&4&&od(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ln(i,t),cn(t),o&512&&(xt||a===null||xi(a,a.return)),t.flags&32){h=t.stateNode;try{an(h,"")}catch(ue){Qe(t,t.return,ue)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,od(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ud=!0);break;case 6:if(ln(i,t),cn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ue){Qe(t,t.return,ue)}}break;case 3:if(Su=null,h=Wn,Wn=Au(i.containerInfo),ln(i,t),Wn=h,cn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{so(i.containerInfo)}catch(ue){Qe(t,t.return,ue)}ud&&(ud=!1,Fy(t));break;case 4:o=Wn,Wn=Au(t.stateNode.containerInfo),ln(i,t),cn(t),Wn=o;break;case 12:ln(i,t),cn(t);break;case 31:ln(i,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 13:ln(i,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hu=jt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=as,G=xt;if(as=B||h,xt=G||N,ln(i,t),xt=G,as=B,cn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||as||xt||ta(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var X=N.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ue){Qe(N,N.return,ue)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ue){Qe(N,N.return,ue)}}}else if(i.tag===18){if(a===null){N=i;try{var H=N.stateNode;h?O_(H,!0):O_(N.stateNode,!1)}catch(ue){Qe(N,N.return,ue)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,cu(t,a))));break;case 19:ln(i,t),cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,cu(t,o)));break;case 30:break;case 21:break;default:ln(i,t),cn(t)}}function cn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(jy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=ld(t);lu(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(an(_,""),a.flags&=-33);var b=ld(t);lu(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,B=ld(t);cd(t,B,N);break;default:throw Error(r(161))}}catch(G){Qe(t,t.return,G)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Fy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ls(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ly(t,i.alternate,i),i=i.sibling}function ta(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Gs(4,i,i.return),ta(i);break;case 1:xi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Oy(i,i.return,a),ta(i);break;case 27:El(i.stateNode);case 26:case 5:xi(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}t=t.sibling}}function cs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:cs(h,d,a),ul(4,d);break;case 1:if(cs(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Qe(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var b=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Eg(N[h],b)}catch(B){Qe(o,o.return,B)}}a&&_&64&&Dy(d),hl(d,d.return);break;case 27:Vy(d);case 26:case 5:cs(h,d,a),a&&o===null&&_&4&&My(d),hl(d,d.return);break;case 12:cs(h,d,a);break;case 31:cs(h,d,a),a&&_&4&&zy(h,d);break;case 13:cs(h,d,a),a&&_&4&&By(h,d);break;case 22:d.memoizedState===null&&cs(h,d,a),hl(d,d.return);break;case 30:break;default:cs(h,d,a)}i=i.sibling}}function hd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Wo(a))}function fd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wo(t))}function Zn(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hy(t,i,a,o),i=i.sibling}function Hy(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Zn(t,i,a,o),h&2048&&ul(9,i);break;case 1:Zn(t,i,a,o);break;case 3:Zn(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Wo(t)));break;case 12:if(h&2048){Zn(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Qe(i,i.return,N)}}else Zn(t,i,a,o);break;case 31:Zn(t,i,a,o);break;case 13:Zn(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?Zn(t,i,a,o):fl(t,i):d._visibility&2?Zn(t,i,a,o):(d._visibility|=2,Ka(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&hd(_,i);break;case 24:Zn(t,i,a,o),h&2048&&fd(i.alternate,i);break;default:Zn(t,i,a,o)}}function Ka(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,N=o,B=_.flags;switch(_.tag){case 0:case 11:case 15:Ka(d,_,b,N,h),ul(8,_);break;case 23:break;case 22:var G=_.stateNode;_.memoizedState!==null?G._visibility&2?Ka(d,_,b,N,h):fl(d,_):(G._visibility|=2,Ka(d,_,b,N,h)),h&&B&2048&&hd(_.alternate,_);break;case 24:Ka(d,_,b,N,h),h&&B&2048&&fd(_.alternate,_);break;default:Ka(d,_,b,N,h)}i=i.sibling}}function fl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:fl(a,o),h&2048&&hd(o.alternate,o);break;case 24:fl(a,o),h&2048&&fd(o.alternate,o);break;default:fl(a,o)}i=i.sibling}}var dl=8192;function Ya(t,i,a){if(t.subtreeFlags&dl)for(t=t.child;t!==null;)Gy(t,i,a),t=t.sibling}function Gy(t,i,a){switch(t.tag){case 26:Ya(t,i,a),t.flags&dl&&t.memoizedState!==null&&J2(a,Wn,t.memoizedState,t.memoizedProps);break;case 5:Ya(t,i,a);break;case 3:case 4:var o=Wn;Wn=Au(t.stateNode.containerInfo),Ya(t,i,a),Wn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=dl,dl=16777216,Ya(t,i,a),dl=o):Ya(t,i,a));break;default:Ya(t,i,a)}}function Qy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ml(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Yy(o,t)}Qy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ky(t),t=t.sibling}function Ky(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&Gs(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,uu(t)):ml(t);break;default:ml(t)}}function uu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Lt=o,Yy(o,t)}Qy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Gs(8,i,i.return),uu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,uu(i));break;default:uu(i)}t=t.sibling}}function Yy(t,i){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Gs(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Wo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Lt=o;else e:for(a=t;Lt!==null;){o=Lt;var h=o.sibling,d=o.return;if(Py(o),o===a){Lt=null;break e}if(h!==null){h.return=d,Lt=h;break e}Lt=d}}}var m2={getCacheForType:function(t){var i=qt(St),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return qt(St).controller.signal}},p2=typeof WeakMap=="function"?WeakMap:Map,Be=0,Je=null,xe=null,Ne=0,Ge=0,Tn=null,Qs=!1,Xa=!1,dd=!1,us=0,ct=0,Ks=0,na=0,md=0,bn=0,$a=0,pl=null,un=null,pd=!1,hu=0,Xy=0,fu=1/0,du=null,Ys=null,Ot=0,Xs=null,Wa=null,hs=0,gd=0,yd=null,$y=null,gl=0,_d=null;function An(){return(Be&2)!==0&&Ne!==0?Ne&-Ne:Q.T!==null?wd():mc()}function Wy(){if(bn===0)if((Ne&536870912)===0||Ve){var t=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),bn=t}else bn=536870912;return t=vn.current,t!==null&&(t.flags|=32),bn}function hn(t,i,a){(t===Je&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)&&(Za(t,0),$s(t,Ne,bn,!1)),Nr(t,a),((Be&2)===0||t!==Je)&&(t===Je&&((Be&2)===0&&(na|=a),ct===4&&$s(t,Ne,bn,!1)),Ii(t))}function Zy(t,i,a){if((Be&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||qn(t,i),h=o?_2(t,i):Ed(t,i,!0),d=o;do{if(h===0){Xa&&!o&&$s(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!g2(a)){h=Ed(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=pl;var N=b.current.memoizedState.isDehydrated;if(N&&(Za(b,_).flags|=256),_=Ed(b,_,!1),_!==2){if(dd&&!N){b.errorRecoveryDisabledLanes|=d,na|=d,h=4;break e}d=un,un=h,d!==null&&(un===null?un=d:un.push.apply(un,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Za(t,0),$s(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$s(o,i,bn,!Qs);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=hu+300-jt(),10<h)){if($s(o,i,bn,!Qs),hi(o,0,!0)!==0)break e;hs=i,o.timeoutHandle=I_(Jy.bind(null,o,a,un,du,pd,i,bn,na,$a,Qs,d,"Throttled",-0,0),h);break e}Jy(o,a,un,du,pd,i,bn,na,$a,Qs,d,null,-0,0)}}break}while(!0);Ii(t)}function Jy(t,i,a,o,h,d,_,b,N,B,G,X,q,H){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Gy(i,d,X);var ue=(d&62914560)===d?hu-jt():(d&4194048)===d?Xy-jt():0;if(ue=eb(X,ue),ue!==null){hs=d,t.cancelPendingCommit=ue(o_.bind(null,t,i,d,a,o,h,_,b,N,G,X,null,q,H)),$s(t,d,_,!B);return}}o_(t,i,d,a,o,h,_,b,N)}function g2(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!yn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $s(t,i,a,o){i&=~md,i&=~na,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-st(h),_=1<<d;o[d]=-1,h&=~_}a!==0&&Dr(t,a,i)}function mu(){return(Be&6)===0?(yl(0),!1):!0}function vd(){if(xe!==null){if(Ge===0)var t=xe.return;else t=xe,es=Kr=null,Vf(t),qa=null,Jo=0,t=xe;for(;t!==null;)Ny(t.alternate,t),t=t.return;xe=null}}function Za(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,k2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),hs=0,vd(),Je=t,xe=a=Zi(t.current,null),Ne=i,Ge=0,Tn=null,Qs=!1,Xa=qn(t,i),dd=!1,$a=bn=md=na=Ks=ct=0,un=pl=null,pd=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-st(o),d=1<<h;i|=t[h],o&=~d}return us=i,Vc(),a}function e_(t,i){Ae=null,Q.H=ol,i===Ba||i===Fc?(i=gg(),Ge=3):i===Af?(i=gg(),Ge=4):Ge=i===Wf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Tn=i,xe===null&&(ct=1,iu(t,Mn(i,t.current)))}function t_(){var t=vn.current;return t===null?!0:(Ne&4194048)===Ne?Ln===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?t===Ln:!1}function n_(){var t=Q.H;return Q.H=ol,t===null?ol:t}function i_(){var t=Q.A;return Q.A=m2,t}function pu(){ct=4,Qs||(Ne&4194048)!==Ne&&vn.current!==null||(Xa=!0),(Ks&134217727)===0&&(na&134217727)===0||Je===null||$s(Je,Ne,bn,!1)}function Ed(t,i,a){var o=Be;Be|=2;var h=n_(),d=i_();(Je!==t||Ne!==i)&&(du=null,Za(t,i)),i=!1;var _=ct;e:do try{if(Ge!==0&&xe!==null){var b=xe,N=Tn;switch(Ge){case 8:vd(),_=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(i=!0);var B=Ge;if(Ge=0,Tn=null,Ja(t,b,N,B),a&&Xa){_=0;break e}break;default:B=Ge,Ge=0,Tn=null,Ja(t,b,N,B)}}y2(),_=ct;break}catch(G){e_(t,G)}while(!0);return i&&t.shellSuspendCounter++,es=Kr=null,Be=o,Q.H=h,Q.A=d,xe===null&&(Je=null,Ne=0,Vc()),_}function y2(){for(;xe!==null;)s_(xe)}function _2(t,i){var a=Be;Be|=2;var o=n_(),h=i_();Je!==t||Ne!==i?(du=null,fu=jt()+500,Za(t,i)):Xa=qn(t,i);e:do try{if(Ge!==0&&xe!==null){i=xe;var d=Tn;t:switch(Ge){case 1:Ge=0,Tn=null,Ja(t,i,d,1);break;case 2:case 9:if(mg(d)){Ge=0,Tn=null,r_(i);break}i=function(){Ge!==2&&Ge!==9||Je!==t||(Ge=7),Ii(t)},d.then(i,i);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:mg(d)?(Ge=0,Tn=null,r_(i)):(Ge=0,Tn=null,Ja(t,i,d,7));break;case 5:var _=null;switch(xe.tag){case 26:_=xe.memoizedState;case 5:case 27:var b=xe;if(_?H_(_):b.stateNode.complete){Ge=0,Tn=null;var N=b.sibling;if(N!==null)xe=N;else{var B=b.return;B!==null?(xe=B,gu(B)):xe=null}break t}}Ge=0,Tn=null,Ja(t,i,d,5);break;case 6:Ge=0,Tn=null,Ja(t,i,d,6);break;case 8:vd(),ct=6;break e;default:throw Error(r(462))}}v2();break}catch(G){e_(t,G)}while(!0);return es=Kr=null,Q.H=o,Q.A=h,Be=a,xe!==null?0:(Je=null,Ne=0,Vc(),ct)}function v2(){for(;xe!==null&&!Co();)s_(xe)}function s_(t){var i=xy(t.alternate,t,us);t.memoizedProps=t.pendingProps,i===null?gu(t):xe=i}function r_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=by(a,i,i.pendingProps,i.type,void 0,Ne);break;case 11:i=by(a,i,i.pendingProps,i.type.render,i.ref,Ne);break;case 5:Vf(i);default:Ny(a,i),i=xe=ig(i,us),i=xy(a,i,us)}t.memoizedProps=t.pendingProps,i===null?gu(t):xe=i}function Ja(t,i,a,o){es=Kr=null,Vf(i),qa=null,Jo=0;var h=i.return;try{if(o2(t,h,i,a,Ne)){ct=1,iu(t,Mn(a,t.current)),xe=null;return}}catch(d){if(h!==null)throw xe=h,d;ct=1,iu(t,Mn(a,t.current)),xe=null;return}i.flags&32768?(Ve||o===1?t=!0:Xa||(Ne&536870912)!==0?t=!1:(Qs=t=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),a_(i,t)):gu(i)}function gu(t){var i=t;do{if((i.flags&32768)!==0){a_(i,Qs);return}t=i.return;var a=u2(i.alternate,i,us);if(a!==null){xe=a;return}if(i=i.sibling,i!==null){xe=i;return}xe=i=t}while(i!==null);ct===0&&(ct=5)}function a_(t,i){do{var a=h2(t.alternate,t);if(a!==null){a.flags&=32767,xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){xe=t;return}xe=t=a}while(t!==null);ct=6,xe=null}function o_(t,i,a,o,h,d,_,b,N){t.cancelPendingCommit=null;do yu();while(Ot!==0);if((Be&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=lf,Zh(t,a,d,_,b,N),t===Je&&(xe=Je=null,Ne=0),Wa=i,Xs=t,hs=a,gd=d,yd=h,$y=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,A2(ce,function(){return f_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,h=ne.p,ne.p=2,_=Be,Be|=4;try{f2(t,i,a)}finally{Be=_,ne.p=h,Q.T=o}}Ot=1,l_(),c_(),u_()}}function l_(){if(Ot===1){Ot=0;var t=Xs,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var o=ne.p;ne.p=2;var h=Be;Be|=4;try{qy(i,t);var d=Od,_=Yp(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Kp(b.ownerDocument.documentElement,b)){if(N!==null&&nf(b)){var B=N.start,G=N.end;if(G===void 0&&(G=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(G,b.value.length);else{var X=b.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var H=q.getSelection(),ue=b.textContent.length,pe=Math.min(N.start,ue),We=N.end===void 0?pe:Math.min(N.end,ue);!H.extend&&pe>We&&(_=We,We=pe,pe=_);var V=Qp(b,pe),O=Qp(b,We);if(V&&O&&(H.rangeCount!==1||H.anchorNode!==V.node||H.anchorOffset!==V.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var z=X.createRange();z.setStart(V.node,V.offset),H.removeAllRanges(),pe>We?(H.addRange(z),H.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),H.addRange(z))}}}}for(X=[],H=b;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Y=X[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Iu=!!Dd,Od=Dd=null}finally{Be=h,ne.p=o,Q.T=a}}t.current=i,Ot=2}}function c_(){if(Ot===2){Ot=0;var t=Xs,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var o=ne.p;ne.p=2;var h=Be;Be|=4;try{Ly(t,i.alternate,i)}finally{Be=h,ne.p=o,Q.T=a}}Ot=3}}function u_(){if(Ot===4||Ot===3){Ot=0,Cr();var t=Xs,i=Wa,a=hs,o=$y;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ot=5:(Ot=0,Wa=Xs=null,h_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ys=null),Yi(a),i=i.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Jt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=Q.T,h=ne.p,ne.p=2,Q.T=null;try{for(var d=t.onRecoverableError,_=0;_<o.length;_++){var b=o[_];d(b.value,{componentStack:b.stack})}}finally{Q.T=i,ne.p=h}}(hs&3)!==0&&yu(),Ii(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===_d?gl++:(gl=0,_d=t):gl=0,yl(0)}}function h_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Wo(i)))}function yu(){return l_(),c_(),u_(),f_()}function f_(){if(Ot!==5)return!1;var t=Xs,i=gd;gd=0;var a=Yi(hs),o=Q.T,h=ne.p;try{ne.p=32>a?32:a,Q.T=null,a=yd,yd=null;var d=Xs,_=hs;if(Ot=0,Wa=Xs=null,hs=0,(Be&6)!==0)throw Error(r(331));var b=Be;if(Be|=4,Ky(d.current),Hy(d,d.current,_,a),Be=b,yl(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Jt,d)}catch{}return!0}finally{ne.p=h,Q.T=o,h_(t,i)}}function d_(t,i,a){i=Mn(a,i),i=$f(t.stateNode,i,2),t=qs(t,i,2),t!==null&&(Nr(t,2),Ii(t))}function Qe(t,i,a){if(t.tag===3)d_(t,t,a);else for(;i!==null;){if(i.tag===3){d_(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ys===null||!Ys.has(o))){t=Mn(a,t),a=my(2),o=qs(i,a,2),o!==null&&(py(a,o,i,t),Nr(o,2),Ii(o));break}}i=i.return}}function Td(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new p2;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(dd=!0,h.add(a),t=E2.bind(null,t,i,a),i.then(t,t))}function E2(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Ne&a)===a&&(ct===4||ct===3&&(Ne&62914560)===Ne&&300>jt()-hu?(Be&2)===0&&Za(t,0):md|=a,$a===Ne&&($a=0)),Ii(t)}function m_(t,i){i===0&&(i=dc()),t=Hr(t,i),t!==null&&(Nr(t,i),Ii(t))}function T2(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),m_(t,a)}function b2(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),m_(t,a)}function A2(t,i){return Et(t,i)}var _u=null,eo=null,bd=!1,vu=!1,Ad=!1,Ws=0;function Ii(t){t!==eo&&t.next===null&&(eo===null?_u=eo=t:eo=eo.next=t),vu=!0,bd||(bd=!0,S2())}function yl(t,i){if(!Ad&&vu){Ad=!0;do for(var a=!1,o=_u;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var _=o.suspendedLanes,b=o.pingedLanes;d=(1<<31-st(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,__(o,d))}else d=Ne,d=hi(o,o===Je?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||qn(o,d)||(a=!0,__(o,d));o=o.next}while(a);Ad=!1}}function w2(){p_()}function p_(){vu=bd=!1;var t=0;Ws!==0&&V2()&&(t=Ws);for(var i=jt(),a=null,o=_u;o!==null;){var h=o.next,d=g_(o,i);d===0?(o.next=null,a===null?_u=h:a.next=h,h===null&&(eo=a)):(a=o,(t!==0||(d&3)!==0)&&(vu=!0)),o=h}Ot!==0&&Ot!==5||yl(t),Ws!==0&&(Ws=0)}function g_(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-st(d),b=1<<_,N=h[_];N===-1?((b&a)===0||(b&o)!==0)&&(h[_]=Wh(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=Je,a=Ne,a=hi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ft(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||qn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ft(o),Yi(a)){case 2:case 8:a=Ss;break;case 32:a=ce;break;case 268435456:a=Ut;break;default:a=ce}return o=y_.bind(null,t),a=Et(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ft(o),t.callbackPriority=2,t.callbackNode=null,2}function y_(t,i){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(yu()&&t.callbackNode!==a)return null;var o=Ne;return o=hi(t,t===Je?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Zy(t,o,i),g_(t,jt()),t.callbackNode!=null&&t.callbackNode===a?y_.bind(null,t):null)}function __(t,i){if(yu())return null;Zy(t,i,!0)}function S2(){L2(function(){(Be&6)!==0?Et(xr,w2):p_()})}function wd(){if(Ws===0){var t=Ua;t===0&&(t=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ws=t}return Ws}function v_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:wa(""+t)}function E_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function R2(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=v_((h[Vt]||null).action),_=o.submitter;_&&(i=(i=_[Vt]||null)?v_(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new bi("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ws!==0){var N=_?E_(h,_):new FormData(h);Hf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?E_(h,_):new FormData(h),Hf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Sd=0;Sd<of.length;Sd++){var Rd=of[Sd],C2=Rd.toLowerCase(),x2=Rd[0].toUpperCase()+Rd.slice(1);$n(C2,"on"+x2)}$n(Wp,"onAnimationEnd"),$n(Zp,"onAnimationIteration"),$n(Jp,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(HT,"onTransitionRun"),$n(GT,"onTransitionStart"),$n(QT,"onTransitionCancel"),$n(eg,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function T_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var _=o.length-1;0<=_;_--){var b=o[_],N=b.instance,B=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(G){jc(G)}h.currentTarget=null,d=N}else for(_=0;_<o.length;_++){if(b=o[_],N=b.instance,B=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(G){jc(G)}h.currentTarget=null,d=N}}}}function Ie(t,i){var a=i[va];a===void 0&&(a=i[va]=new Set);var o=t+"__bubble";a.has(o)||(b_(i,t,2,!1),a.add(o))}function Cd(t,i,a){var o=0;i&&(o|=4),b_(a,t,o,i)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function xd(t){if(!t[Eu]){t[Eu]=!0,No.forEach(function(a){a!=="selectionchange"&&(I2.has(a)||Cd(a,!1,t),Cd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Eu]||(i[Eu]=!0,Cd("selectionchange",!1,i))}}function b_(t,i,a,o){switch(W_(i)){case 2:var h=ib;break;case 8:h=sb;break;default:h=Fd}a=h.bind(null,i,a,t),h=void 0,!kr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Id(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var b=o.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=o.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=pi(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){o=d=_;continue e}b=b.parentNode}}o=o.return}Os(function(){var B=d,G=In(a),X=[];e:{var q=tg.get(t);if(q!==void 0){var H=bi,ue=t;switch(t){case"keypress":if(Pr(a)===0)break e;case"keydown":case"keyup":H=Dc;break;case"focusin":ue="focus",H=zr;break;case"focusout":ue="blur",H=zr;break;case"beforeblur":case"afterblur":H=zr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=g;break;case Wp:case Zp:case Jp:H=wc;break;case eg:H=A;break;case"scroll":case"scrollend":H=qo;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Wi;break;case"toggle":case"beforetoggle":H=be}var pe=(i&4)!==0,We=!pe&&(t==="scroll"||t==="scrollend"),V=pe?q!==null?q+"Capture":null:q;pe=[];for(var O=B,z;O!==null;){var Y=O;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||V===null||(Y=Qn(O,V),Y!=null&&pe.push(vl(O,Y,z))),We)break;O=O.return}0<pe.length&&(q=new H(q,ue,null,a,G),X.push({event:q,listeners:pe}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Uo&&(ue=a.relatedTarget||a.fromElement)&&(pi(ue)||ue[di]))break e;if((H||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ue=a.relatedTarget||a.toElement,H=B,ue=ue?pi(ue):null,ue!==null&&(We=c(ue),pe=ue.tag,ue!==We||pe!==5&&pe!==27&&pe!==6)&&(ue=null)):(H=null,ue=B),H!==ue)){if(pe=Fo,Y="onMouseLeave",V="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Wi,Y="onPointerLeave",V="onPointerEnter",O="pointer"),We=H==null?q:pn(H),z=ue==null?q:pn(ue),q=new pe(Y,O+"leave",H,a,G),q.target=We,q.relatedTarget=z,Y=null,pi(G)===B&&(pe=new pe(V,O+"enter",ue,a,G),pe.target=z,pe.relatedTarget=We,Y=pe),We=Y,H&&ue)t:{for(pe=N2,V=H,O=ue,z=0,Y=V;Y;Y=pe(Y))z++;Y=0;for(var de=O;de;de=pe(de))Y++;for(;0<z-Y;)V=pe(V),z--;for(;0<Y-z;)O=pe(O),Y--;for(;z--;){if(V===O||O!==null&&V===O.alternate){pe=V;break t}V=pe(V),O=pe(O)}pe=null}else pe=null;H!==null&&A_(X,q,H,pe,!1),ue!==null&&We!==null&&A_(X,We,ue,pe,!0)}}e:{if(q=B?pn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var Pe=zp;else if(Pp(q))if(Bp)Pe=BT;else{Pe=UT;var fe=PT}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Aa(B.elementType)&&(Pe=zp):Pe=zT;if(Pe&&(Pe=Pe(t,B))){Up(X,Pe,a,G);break e}fe&&fe(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&ko(q,"number",q.value)}switch(fe=B?pn(B):window,t){case"focusin":(Pp(fe)||fe.contentEditable==="true")&&(Da=fe,sf=B,Yo=null);break;case"focusout":Yo=sf=Da=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Xp(X,a,G);break;case"selectionchange":if(FT)break;case"keydown":case"keyup":Xp(X,a,G)}var Se;if(ze)e:{switch(t){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Na?Br(t,a)&&(De="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Si&&a.locale!=="ko"&&(Na||De!=="onCompositionStart"?De==="onCompositionEnd"&&Na&&(Se=Bo()):(Ti=G,zo="value"in Ti?Ti.value:Ti.textContent,Na=!0)),fe=Tu(B,De),0<fe.length&&(De=new wi(De,t,null,a,G),X.push({event:De,listeners:fe}),Se?De.data=Se:(Se=Ia(a),Se!==null&&(De.data=Se)))),(Se=Dn?jT(t,a):VT(t,a))&&(De=Tu(B,"onBeforeInput"),0<De.length&&(fe=new wi("onBeforeInput","beforeinput",null,a,G),X.push({event:fe,listeners:De}),fe.data=Se)),R2(X,t,B,a,G)}T_(X,i)})}function vl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Tu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Qn(t,a),h!=null&&o.unshift(vl(t,h,d)),h=Qn(t,i),h!=null&&o.push(vl(t,h,d))),t.tag===3)return o;t=t.return}return[]}function N2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function A_(t,i,a,o,h){for(var d=i._reactName,_=[];a!==null&&a!==o;){var b=a,N=b.alternate,B=b.stateNode;if(b=b.tag,N!==null&&N===o)break;b!==5&&b!==26&&b!==27||B===null||(N=B,h?(B=Qn(a,d),B!=null&&_.unshift(vl(a,B,N))):h||(B=Qn(a,d),B!=null&&_.push(vl(a,B,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var D2=/\r\n?/g,O2=/\u0000|\uFFFD/g;function w_(t){return(typeof t=="string"?t:""+t).replace(D2,`
`).replace(O2,"")}function S_(t,i){return i=w_(i),w_(t)===i}function $e(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||an(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&an(t,""+o);break;case"className":gn(t,"class",o);break;case"tabIndex":gn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(t,a,o);break;case"style":Po(t,o,d);break;case"data":if(i!=="object"){gn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=wa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$e(t,i,"name",h.name,h,null),$e(t,i,"formEncType",h.formEncType,h,null),$e(t,i,"formMethod",h.formMethod,h,null),$e(t,i,"formTarget",h.formTarget,h,null)):($e(t,i,"encType",h.encType,h,null),$e(t,i,"method",h.method,h,null),$e(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=wa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Gn);break;case"onScroll":o!=null&&Ie("scroll",t);break;case"onScrollEnd":o!=null&&Ie("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=wa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ie("beforetoggle",t),Ie("toggle",t),Ta(t,"popover",o);break;case"xlinkActuate":wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":wt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":wt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":wt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":wt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ta(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Tc.get(a)||a,Ta(t,a,o))}}function Nd(t,i,a,o,h,d){switch(a){case"style":Po(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?an(t,o):(typeof o=="number"||typeof o=="bigint")&&an(t,""+o);break;case"onScroll":o!=null&&Ie("scroll",t);break;case"onScrollEnd":o!=null&&Ie("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Vt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ta(t,a,o)}}}function Ht(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",t),Ie("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,d,_,a,null)}}h&&$e(t,i,"srcSet",a.srcSet,a,null),o&&$e(t,i,"src",a.src,a,null);return;case"input":Ie("invalid",t);var b=d=_=h=null,N=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":_=G;break;case"checked":N=G;break;case"defaultChecked":B=G;break;case"value":d=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:$e(t,i,o,G,a,null)}}_c(t,d,b,N,B,_,h,!1);return;case"select":Ie("invalid",t),o=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":o=b;default:$e(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!o,i!=null?xs(t,!!o,i,!1):a!=null&&xs(t,!!o,a,!0);return;case"textarea":Ie("invalid",t),d=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":o=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:$e(t,i,_,b,a,null)}Is(t,o,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$e(t,i,N,o,a,null)}return;case"dialog":Ie("beforetoggle",t),Ie("toggle",t),Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":Ie("load",t);break;case"video":case"audio":for(o=0;o<_l.length;o++)Ie(_l[o],t);break;case"image":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"embed":case"source":case"link":Ie("error",t),Ie("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:$e(t,i,B,o,a,null)}return;default:if(Aa(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Nd(t,i,G,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&$e(t,i,b,o,a,null))}function M2(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,N=null,B=null,G=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=X;default:o.hasOwnProperty(H)||$e(t,i,H,null,o,X)}}for(var q in o){var H=o[q];if(X=a[q],o.hasOwnProperty(q)&&(H!=null||X!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":G=H;break;case"value":_=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==X&&$e(t,i,q,H,o,X)}}ba(t,_,b,N,B,G,d,h);return;case"select":H=_=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":H=N;default:o.hasOwnProperty(d)||$e(t,i,d,null,o,N)}for(h in o)if(d=o[h],N=a[h],o.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&$e(t,i,h,d,o,N)}i=b,a=_,o=H,q!=null?xs(t,!!a,q,!1):!!o!=!!a&&(i!=null?xs(t,!!a,i,!0):xs(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:$e(t,i,b,null,o,h)}for(_ in o)if(h=o[_],d=a[_],o.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&$e(t,i,_,h,o,d)}vc(t,q,H);return;case"option":for(var ue in a)if(q=a[ue],a.hasOwnProperty(ue)&&q!=null&&!o.hasOwnProperty(ue))switch(ue){case"selected":t.selected=!1;break;default:$e(t,i,ue,null,o,q)}for(N in o)if(q=o[N],H=a[N],o.hasOwnProperty(N)&&q!==H&&(q!=null||H!=null))switch(N){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:$e(t,i,N,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)q=a[pe],a.hasOwnProperty(pe)&&q!=null&&!o.hasOwnProperty(pe)&&$e(t,i,pe,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:$e(t,i,B,q,o,H)}return;default:if(Aa(i)){for(var We in a)q=a[We],a.hasOwnProperty(We)&&q!==void 0&&!o.hasOwnProperty(We)&&Nd(t,i,We,void 0,o,q);for(G in o)q=o[G],H=a[G],!o.hasOwnProperty(G)||q===H||q===void 0&&H===void 0||Nd(t,i,G,q,o,H);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!o.hasOwnProperty(V)&&$e(t,i,V,null,o,q);for(X in o)q=o[X],H=a[X],!o.hasOwnProperty(X)||q===H||q==null&&H==null||$e(t,i,X,q,o,H)}function R_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&R_(_)){for(_=0,b=h.responseEnd,o+=1;o<a.length;o++){var N=a[o],B=N.startTime;if(B>b)break;var G=N.transferSize,X=N.initiatorType;G&&R_(X)&&(N=N.responseEnd,_+=G*(N<b?1:(b-B)/(N-B)))}if(--o,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Dd=null,Od=null;function bu(t){return t.nodeType===9?t:t.ownerDocument}function C_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Md(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jd=null;function V2(){var t=window.event;return t&&t.type==="popstate"?t===jd?!1:(jd=t,!0):(jd=null,!1)}var I_=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,N_=typeof Promise=="function"?Promise:void 0,L2=typeof queueMicrotask=="function"?queueMicrotask:typeof N_<"u"?function(t){return N_.resolve(null).then(t).catch(P2)}:I_;function P2(t){setTimeout(function(){throw t})}function Zs(t){return t==="head"}function D_(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),so(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")El(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,El(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[mi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&El(t.ownerDocument.body);a=h}while(a);so(i)}function O_(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Vd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vd(a),Ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function U2(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[mi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Pn(t.nextSibling),t===null)break}return null}function z2(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pn(t.nextSibling),t===null))return null;return t}function M_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Pn(t.nextSibling),t===null))return null;return t}function kd(t){return t.data==="$?"||t.data==="$~"}function Ld(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function B2(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Pn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Pd=null;function j_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Pn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function V_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function k_(t,i,a){switch(i=bu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function El(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ea(t)}var Un=new Map,L_=new Set;function Au(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fs=ne.d;ne.d={f:q2,r:F2,D:H2,C:G2,L:Q2,m:K2,X:X2,S:Y2,M:$2};function q2(){var t=fs.f(),i=mu();return t||i}function F2(t){var i=xn(t);i!==null&&i.tag===5&&i.type==="form"?ey(i):fs.r(t)}var to=typeof document>"u"?null:document;function P_(t,i,a){var o=to;if(o&&typeof i=="string"&&i){var h=rn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),L_.has(h)||(L_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ht(i,"link",t),At(i),o.head.appendChild(i)))}}function H2(t){fs.D(t),P_("dns-prefetch",t,null)}function G2(t,i){fs.C(t,i),P_("preconnect",t,i)}function Q2(t,i,a){fs.L(t,i,a);var o=to;if(o&&t&&i){var h='link[rel="preload"][as="'+rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+rn(a.imageSizes)+'"]')):h+='[href="'+rn(t)+'"]';var d=h;switch(i){case"style":d=no(t);break;case"script":d=io(t)}Un.has(d)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Un.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(Tl(d))||i==="script"&&o.querySelector(bl(d))||(i=o.createElement("link"),Ht(i,"link",t),At(i),o.head.appendChild(i)))}}function K2(t,i){fs.m(t,i);var a=to;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+rn(o)+'"][href="'+rn(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=io(t)}if(!Un.has(d)&&(t=w({rel:"modulepreload",href:t},i),Un.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bl(d)))return}o=a.createElement("link"),Ht(o,"link",t),At(o),a.head.appendChild(o)}}}function Y2(t,i,a){fs.S(t,i,a);var o=to;if(o&&t){var h=gi(o).hoistableStyles,d=no(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=o.querySelector(Tl(d)))b.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Un.get(d))&&Ud(t,a);var N=_=o.createElement("link");At(N),Ht(N,"link",t),N._p=new Promise(function(B,G){N.onload=B,N.onerror=G}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,wu(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function X2(t,i){fs.X(t,i);var a=to;if(a&&t){var o=gi(a).hoistableScripts,h=io(t),d=o.get(h);d||(d=a.querySelector(bl(h)),d||(t=w({src:t,async:!0},i),(i=Un.get(h))&&zd(t,i),d=a.createElement("script"),At(d),Ht(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function $2(t,i){fs.M(t,i);var a=to;if(a&&t){var o=gi(a).hoistableScripts,h=io(t),d=o.get(h);d||(d=a.querySelector(bl(h)),d||(t=w({src:t,async:!0,type:"module"},i),(i=Un.get(h))&&zd(t,i),d=a.createElement("script"),At(d),Ht(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function U_(t,i,a,o){var h=(h=sn.current)?Au(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=no(a.href),a=gi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=no(a.href);var d=gi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Tl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Un.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(t,a),d||W2(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=io(a),a=gi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function no(t){return'href="'+rn(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function z_(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function W2(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ht(i,"link",a),At(i),t.head.appendChild(i))}function io(t){return'[src="'+rn(t)+'"]'}function bl(t){return"script[async]"+t}function B_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+rn(a.href)+'"]');if(o)return i.instance=o,At(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),At(o),Ht(o,"style",h),wu(o,a.precedence,t),i.instance=o;case"stylesheet":h=no(a.href);var d=t.querySelector(Tl(h));if(d)return i.state.loading|=4,i.instance=d,At(d),d;o=z_(a),(h=Un.get(h))&&Ud(o,h),d=(t.ownerDocument||t).createElement("link"),At(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Ht(d,"link",o),i.state.loading|=4,wu(d,a.precedence,t),i.instance=d;case"script":return d=io(a.src),(h=t.querySelector(bl(d)))?(i.instance=h,At(h),h):(o=a,(h=Un.get(d))&&(o=w({},a),zd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),At(h),Ht(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,wu(o,a.precedence,t));return i.instance}function wu(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,_=0;_<o.length;_++){var b=o[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Ud(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function zd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Su=null;function q_(t,i,a){if(Su===null){var o=new Map,h=Su=new Map;h.set(a,o)}else h=Su,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[mi]||d[bt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=o.get(_);b?b.push(d):o.set(_,[d])}}return o}function F_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Z2(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J2(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=no(o.href),d=i.querySelector(Tl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ru.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,At(d);return}d=i.ownerDocument||i,o=z_(o),(h=Un.get(h))&&Ud(o,h),d=d.createElement("link"),At(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Ht(d,"link",o),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ru.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Bd=0;function eb(t,i){return t.stylesheets&&t.count===0&&xu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&xu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&Bd===0&&(Bd=62500*j2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&xu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Bd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ru(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cu=null;function xu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cu=new Map,i.forEach(tb,t),Cu=null,Ru.call(t))}function tb(t,i){if(!(i.state.loading&4)){var a=Cu.get(t);if(a)var o=a.get(null);else{a=new Map,Cu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||o,d===o&&a.set(null,h),a.set(_,h),this.count++,o=Ru.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Al={$$typeof:J,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function nb(t,i,a,o,h,d,_,b,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function G_(t,i,a,o,h,d,_,b,N,B,G,X){return t=new nb(t,i,a,_,N,B,G,X,b),i=1,d===!0&&(i|=24),d=_n(3,null,null,i),t.current=d,d.stateNode=t,i=Ef(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},wf(d),t}function Q_(t){return t?(t=ja,t):ja}function K_(t,i,a,o,h,d){h=Q_(h),o.context===null?o.context=h:o.pendingContext=h,o=Bs(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=qs(t,o,i),a!==null&&(hn(a,t,i),tl(a,t,i))}function Y_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function qd(t,i){Y_(t,i),(t=t.alternate)&&Y_(t,i)}function X_(t){if(t.tag===13||t.tag===31){var i=Hr(t,67108864);i!==null&&hn(i,t,67108864),qd(t,67108864)}}function $_(t){if(t.tag===13||t.tag===31){var i=An();i=Or(i);var a=Hr(t,i);a!==null&&hn(a,t,i),qd(t,i)}}var Iu=!0;function ib(t,i,a,o){var h=Q.T;Q.T=null;var d=ne.p;try{ne.p=2,Fd(t,i,a,o)}finally{ne.p=d,Q.T=h}}function sb(t,i,a,o){var h=Q.T;Q.T=null;var d=ne.p;try{ne.p=8,Fd(t,i,a,o)}finally{ne.p=d,Q.T=h}}function Fd(t,i,a,o){if(Iu){var h=Hd(o);if(h===null)Id(t,i,o,Nu,a),Z_(t,o);else if(ab(h,t,i,a,o))o.stopPropagation();else if(Z_(t,o),i&4&&-1<rb.indexOf(t)){for(;h!==null;){var d=xn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ui(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-st(_);b.entanglements[1]|=N,_&=~N}Ii(d),(Be&6)===0&&(fu=jt()+500,yl(0))}}break;case 31:case 13:b=Hr(d,2),b!==null&&hn(b,d,2),mu(),qd(d,2)}if(d=Hd(o),d===null&&Id(t,i,o,Nu,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Id(t,i,o,null,a)}}function Hd(t){return t=In(t),Gd(t)}var Nu=null;function Gd(t){if(Nu=null,t=pi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Nu=t,null}function W_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qi()){case xr:return 2;case Ss:return 8;case ce:case ge:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var Qd=!1,Js=null,er=null,tr=null,wl=new Map,Sl=new Map,nr=[],rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z_(t,i){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(i.pointerId)}}function Rl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=xn(i),i!==null&&X_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function ab(t,i,a,o,h){switch(i){case"focusin":return Js=Rl(Js,t,i,a,o,h),!0;case"dragenter":return er=Rl(er,t,i,a,o,h),!0;case"mouseover":return tr=Rl(tr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return wl.set(d,Rl(wl.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,Sl.set(d,Rl(Sl.get(d)||null,t,i,a,o,h)),!0}return!1}function J_(t){var i=pi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Fn(t.priority,function(){$_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Fn(t.priority,function(){$_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Hd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Uo=o,a.target.dispatchEvent(o),Uo=null}else return i=xn(a),i!==null&&X_(i),t.blockedOn=a,!1;i.shift()}return!0}function ev(t,i,a){Du(t)&&a.delete(i)}function ob(){Qd=!1,Js!==null&&Du(Js)&&(Js=null),er!==null&&Du(er)&&(er=null),tr!==null&&Du(tr)&&(tr=null),wl.forEach(ev),Sl.forEach(ev)}function Ou(t,i){t.blockedOn===i&&(t.blockedOn=null,Qd||(Qd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ob)))}var Mu=null;function tv(t){Mu!==t&&(Mu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mu===t&&(Mu=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Gd(o||a)===null)continue;break}var d=xn(a);d!==null&&(t.splice(i,3),i-=3,Hf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function so(t){function i(N){return Ou(N,t)}Js!==null&&Ou(Js,t),er!==null&&Ou(er,t),tr!==null&&Ou(tr,t),wl.forEach(i),Sl.forEach(i);for(var a=0;a<nr.length;a++){var o=nr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)J_(a),a.blockedOn===null&&nr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],_=h[Vt]||null;if(typeof d=="function")_||tv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Vt]||null)b=_.formAction;else if(Gd(h)!==null)continue}else b=_.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),tv(a)}}}function nv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Kd(t){this._internalRoot=t}ju.prototype.render=Kd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=An();K_(a,o,t,i,null,null)},ju.prototype.unmount=Kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;K_(t.current,2,null,t,null,null),mu(),i[di]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var i=mc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<nr.length&&i!==0&&i<nr[a].priority;a++);nr.splice(a,0,t),a===0&&J_(t)}};var iv=e.version;if(iv!=="19.2.0")throw Error(r(527,iv,"19.2.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=E(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var lb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{Jt=Vu.inject(lb),dt=Vu}catch{}}return xl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=uy,d=hy,_=fy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=G_(t,1,!1,null,null,a,o,null,h,d,_,nv),t[di]=i.current,xd(t),new Kd(i)},xl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=uy,_=hy,b=fy,N=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=G_(t,1,!0,i,a??null,o,h,N,d,_,b,nv),i.context=Q_(null),a=i.current,o=An(),o=Or(o),h=Bs(o),h.callback=null,qs(a,h,o),a=o,i.current.lanes=a,Nr(i,a),Ii(i),t[di]=i.current,xd(t),new ju(i)},xl.version="19.2.0",xl}var cv;function vb(){if(cv)return Xd.exports;cv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xd.exports=_b(),Xd.exports}var Eb=vb();const Tb=()=>{};var uv={};const K0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},bb=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],f=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],f=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,E=y?s[l+2]:0,T=c>>2,w=(c&3)<<4|p>>4;let C=(p&15)<<2|E>>6,P=E&63;y||(P=64,f||(C=64)),r.push(n[T],n[w],n[C],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(K0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):bb(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const E=l<s.length?n[s.charAt(l)]:64;++l;const w=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||E==null||w==null)throw new Ab;const C=c<<2|p>>4;if(r.push(C),E!==64){const P=p<<4&240|E>>2;if(r.push(P),w!==64){const K=E<<6&192|w;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Ab extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wb=function(s){const e=K0(s);return Y0.encodeByteArray(e,!0)},eh=function(s){return wb(s).replace(/\./g,"")},X0=function(s){try{return Y0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Sb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Rb=()=>Sb().__FIREBASE_DEFAULTS__,Cb=()=>{if(typeof process>"u"||typeof uv>"u")return;const s=uv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},xb=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&X0(s[1]);return e&&JSON.parse(e)},Sh=()=>{try{return Tb()||Rb()||Cb()||xb()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$0=s=>Sh()?.emulatorHosts?.[s],W0=s=>{const e=$0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z0=()=>Sh()?.config,J0=s=>Sh()?.[`_${s}`];class Ib{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function da(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Um(s){return(await fetch(s,{credentials:"include"})).ok}function e1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[eh(JSON.stringify(n)),eh(JSON.stringify(f)),""].join(".")}const Vl={};function Nb(){const s={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?s.emulator.push(e):s.prod.push(e);return s}function Db(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let hv=!1;function zm(s,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||Vl[s]===e||Vl[s]||hv)return;Vl[s]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",c=Nb().prod.length>0;function f(){const C=document.getElementById(r);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function y(C,P){C.setAttribute("width","24"),C.setAttribute("id",P),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function E(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{hv=!0,f()},C}function T(C,P){C.setAttribute("id",P),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=Db(r),P=n("text"),K=document.getElementById(P)||document.createElement("span"),Z=n("learnmore"),k=document.getElementById(Z)||document.createElement("a"),U=n("preprendIcon"),oe=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const J=C.element;p(J),T(k,Z);const ie=E();y(oe,U),J.append(oe,K,k,ie),document.body.appendChild(J)}c?(K.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function Mb(){const s=Sh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vb(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lb(){const s=Wt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Pb(){return!Mb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ub(){try{return typeof indexedDB=="object"}catch{return!1}}function zb(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const Bb="FirebaseError";class qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Bb,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?qb(c,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new qi(l,p,r)}}function qb(s,e){return s.replace(Fb,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const Fb=/\{\$([^}]+)}/g;function Hb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function oa(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],f=e[l];if(fv(c)&&fv(f)){if(!oa(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function fv(s){return s!==null&&typeof s=="object"}function Wl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Il(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Nl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function Gb(s,e){const n=new Qb(s,e);return n.subscribe.bind(n)}class Qb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Zd),l.error===void 0&&(l.error=Zd),l.complete===void 0&&(l.complete=Zd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kb(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Zd(){}function _t(s){return s&&s._delegate?s._delegate:s}class mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";class Yb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ib;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($b(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xb(s){return s===ia?void 0:s}function $b(s){return s.instantiationMode==="EAGER"}class Wb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Oe||(Oe={}));const Zb={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Jb=Oe.INFO,eA={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},tA=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=eA[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=Jb,this._logHandler=tA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const nA=(s,e)=>e.some(n=>s instanceof n);let dv,mv;function iA(){return dv||(dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sA(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t1=new WeakMap,hm=new WeakMap,n1=new WeakMap,Jd=new WeakMap,qm=new WeakMap;function rA(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{n(ur(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&t1.set(n,s)}).catch(()=>{}),qm.set(e,s),e}function aA(s){if(hm.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});hm.set(s,e)}let fm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return hm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||n1.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function oA(s){fm=s(fm)}function lA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(em(this),e,...n);return n1.set(r,e.sort?e.sort():[e]),ur(r)}:sA().includes(s)?function(...e){return s.apply(em(this),e),ur(t1.get(this))}:function(...e){return ur(s.apply(em(this),e))}}function cA(s){return typeof s=="function"?lA(s):(s instanceof IDBTransaction&&aA(s),nA(s,iA())?new Proxy(s,fm):s)}function ur(s){if(s instanceof IDBRequest)return rA(s);if(Jd.has(s))return Jd.get(s);const e=cA(s);return e!==s&&(Jd.set(s,e),qm.set(e,s)),e}const em=s=>qm.get(s);function uA(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=ur(f);return r&&f.addEventListener("upgradeneeded",y=>{r(ur(f.result),y.oldVersion,y.newVersion,ur(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),p}const hA=["get","getKey","getAll","getAllKeys","count"],fA=["put","add","delete","clear"],tm=new Map;function pv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=fA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||hA.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(p.shift())),(await Promise.all([E[n](...p),l&&y.done]))[0]};return tm.set(e,c),c}oA(s=>({...s,get:(e,n,r)=>pv(e,n)||s.get(e,n,r),has:(e,n)=>!!pv(e,n)||s.has(e,n)}));class dA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mA(s){return s.getComponent()?.type==="VERSION"}const dm="@firebase/app",gv="0.14.6";const _s=new Bm("@firebase/app"),pA="@firebase/app-compat",gA="@firebase/analytics-compat",yA="@firebase/analytics",_A="@firebase/app-check-compat",vA="@firebase/app-check",EA="@firebase/auth",TA="@firebase/auth-compat",bA="@firebase/database",AA="@firebase/data-connect",wA="@firebase/database-compat",SA="@firebase/functions",RA="@firebase/functions-compat",CA="@firebase/installations",xA="@firebase/installations-compat",IA="@firebase/messaging",NA="@firebase/messaging-compat",DA="@firebase/performance",OA="@firebase/performance-compat",MA="@firebase/remote-config",jA="@firebase/remote-config-compat",VA="@firebase/storage",kA="@firebase/storage-compat",LA="@firebase/firestore",PA="@firebase/ai",UA="@firebase/firestore-compat",zA="firebase",BA="12.6.0";const mm="[DEFAULT]",qA={[dm]:"fire-core",[pA]:"fire-core-compat",[yA]:"fire-analytics",[gA]:"fire-analytics-compat",[vA]:"fire-app-check",[_A]:"fire-app-check-compat",[EA]:"fire-auth",[TA]:"fire-auth-compat",[bA]:"fire-rtdb",[AA]:"fire-data-connect",[wA]:"fire-rtdb-compat",[SA]:"fire-fn",[RA]:"fire-fn-compat",[CA]:"fire-iid",[xA]:"fire-iid-compat",[IA]:"fire-fcm",[NA]:"fire-fcm-compat",[DA]:"fire-perf",[OA]:"fire-perf-compat",[MA]:"fire-rc",[jA]:"fire-rc-compat",[VA]:"fire-gcs",[kA]:"fire-gcs-compat",[LA]:"fire-fst",[UA]:"fire-fst-compat",[PA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};const th=new Map,FA=new Map,pm=new Map;function yv(s,e){try{s.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function la(s){const e=s.name;if(pm.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,s);for(const n of th.values())yv(n,s);for(const n of FA.values())yv(n,s);return!0}function Rh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function wn(s){return s==null?!1:s.settings!==void 0}const HA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new $l("app","Firebase",HA);class GA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const ma=BA;function i1(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:mm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw hr.create("bad-app-name",{appName:String(l)});if(n||(n=Z0()),!n)throw hr.create("no-options");const c=th.get(l);if(c){if(oa(n,c.options)&&oa(r,c.config))return c;throw hr.create("duplicate-app",{appName:l})}const f=new Wb(l);for(const y of pm.values())f.addComponent(y);const p=new GA(n,r,f);return th.set(l,p),p}function Fm(s=mm){const e=th.get(s);if(!e&&s===mm&&Z0())return i1();if(!e)throw hr.create("no-app",{appName:s});return e}function Di(s,e,n){let r=qA[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(f.join(" "));return}la(new mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const QA="firebase-heartbeat-database",KA=1,Bl="firebase-heartbeat-store";let nm=null;function s1(){return nm||(nm=uA(QA,KA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(s=>{throw hr.create("idb-open",{originalErrorMessage:s.message})})),nm}async function YA(s){try{const n=(await s1()).transaction(Bl),r=await n.objectStore(Bl).get(r1(s));return await n.done,r}catch(e){if(e instanceof qi)_s.warn(e.message);else{const n=hr.create("idb-get",{originalErrorMessage:e?.message});_s.warn(n.message)}}}async function _v(s,e){try{const r=(await s1()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,r1(s)),await r.done}catch(n){if(n instanceof qi)_s.warn(n.message);else{const r=hr.create("idb-set",{originalErrorMessage:n?.message});_s.warn(r.message)}}}function r1(s){return`${s.name}!${s.options.appId}`}const XA=1024,$A=30;class WA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>$A){const l=ew(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vv(),{heartbeatsToSend:n,unsentEntries:r}=ZA(this._heartbeatsCache.heartbeats),l=eh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return _s.warn(e),""}}}function vv(){return new Date().toISOString().substring(0,10)}function ZA(s,e=XA){const n=[];let r=s.slice();for(const l of s){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),Ev(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ub()?zb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ev(s){return eh(JSON.stringify({version:2,heartbeats:s})).length}function ew(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function tw(s){la(new mr("platform-logger",e=>new dA(e),"PRIVATE")),la(new mr("heartbeat",e=>new WA(e),"PRIVATE")),Di(dm,gv,s),Di(dm,gv,"esm2020"),Di("fire-js","")}tw("");function a1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nw=a1,o1=new $l("auth","Firebase",a1());const nh=new Bm("@firebase/auth");function iw(s,...e){nh.logLevel<=Oe.WARN&&nh.warn(`Auth (${ma}): ${s}`,...e)}function Hu(s,...e){nh.logLevel<=Oe.ERROR&&nh.error(`Auth (${ma}): ${s}`,...e)}function ii(s,...e){throw Hm(s,...e)}function Oi(s,...e){return Hm(s,...e)}function l1(s,e,n){const r={...nw(),[e]:n};return new $l("auth","Firebase",r).create(e,{appName:s.name})}function gs(s){return l1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return o1.create(s,...e)}function ye(s,e,...n){if(!s)throw Hm(e,...n)}function ms(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Hu(e),new Error(e)}function vs(s,e){s||ms(e)}function gm(){return typeof self<"u"&&self.location?.href||""}function sw(){return Tv()==="http:"||Tv()==="https:"}function Tv(){return typeof self<"u"&&self.location?.protocol||null}function rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||Vb()||"connection"in navigator)?navigator.onLine:!0}function aw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,vs(n>e,"Short delay should be less than long delay!"),this.isMobile=Ob()||kb()}get(){return rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gm(s,e){vs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class c1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ow={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cw=new Zl(3e4,6e4);function bs(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function As(s,e,n,r,l={}){return u1(s,l,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Wl({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const E={method:e,headers:y,...c};return jb()||(E.referrerPolicy="no-referrer"),s.emulatorConfig&&da(s.emulatorConfig.host)&&(E.credentials="include"),c1.fetch()(await h1(s,s.config.apiHost,n,p),E)})}async function u1(s,e,n){s._canInitEmulator=!1;const r={...ow,...e};try{const l=new hw(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Lu(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,E]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lu(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Lu(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw Lu(s,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw l1(s,T,E);ii(s,T)}}catch(l){if(l instanceof qi)throw l;ii(s,"network-request-failed",{message:String(l)})}}async function Jl(s,e,n,r,l={}){const c=await As(s,e,n,r,l);return"mfaPendingCredential"in c&&ii(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function h1(s,e,n,r){const l=`${e}${n}?${r}`,c=s,f=c.config.emulator?Gm(s.config,l):`${s.config.apiScheme}://${l}`;return lw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function uw(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Oi(this.auth,"network-request-failed")),cw.get())})}}function Lu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Oi(s,e,r);return l.customData._tokenResponse=n,l}function bv(s){return s!==void 0&&s.enterprise!==void 0}class fw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dw(s,e){return As(s,"GET","/v2/recaptchaConfig",bs(s,e))}async function mw(s,e){return As(s,"POST","/v1/accounts:delete",e)}async function ih(s,e){return As(s,"POST","/v1/accounts:lookup",e)}function kl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pw(s,e=!1){const n=_t(s),r=await n.getIdToken(e),l=Qm(r);ye(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:r,authTime:kl(im(l.auth_time)),issuedAtTime:kl(im(l.iat)),expirationTime:kl(im(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function im(s){return Number(s)*1e3}function Qm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const l=X0(n);return l?JSON.parse(l):(Hu("Failed to decode base64 JWT payload"),null)}catch(l){return Hu("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Av(s){const e=Qm(s);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ql(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qi&&gw(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function gw({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class yw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sh(s){const e=s.auth,n=await s.getIdToken(),r=await ql(s,ih(e,{idToken:n}));ye(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?f1(l.providerUserInfo):[],f=vw(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ym(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(s,T)}async function _w(s){const e=_t(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vw(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function f1(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Ew(s,e){const n=await u1(s,{},async()=>{const r=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await h1(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&da(s.emulatorConfig.host)&&(y.credentials="include"),c1.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Tw(s,e){return As(s,"POST","/v2/accounts:revokeToken",bs(s,e))}class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await Ew(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,f=new uo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(ye(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(ye(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return ms("not implemented")}}function sr(s,e){ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ym(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ql(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pw(this,e)}reload(){return _w(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await ql(this,mw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,E=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:C,isAnonymous:P,providerData:K,stsTokenManager:Z}=n;ye(w&&Z,e,"internal-error");const k=uo.fromJSON(this.name,Z);ye(typeof w=="string",e,"internal-error"),sr(r,e.name),sr(l,e.name),ye(typeof C=="boolean",e,"internal-error"),ye(typeof P=="boolean",e,"internal-error"),sr(c,e.name),sr(f,e.name),sr(p,e.name),sr(y,e.name),sr(E,e.name),sr(T,e.name);const U=new ei({uid:w,auth:e,email:l,emailVerified:C,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:k,createdAt:E,lastLoginAt:T});return K&&Array.isArray(K)&&(U.providerData=K.map(oe=>({...oe}))),y&&(U._redirectEventId=y),U}static async _fromIdTokenResponse(e,n,r=!1){const l=new uo;l.updateFromServerResponse(n);const c=new ei({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await sh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];ye(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?f1(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new uo;p.updateFromIdToken(r);const y=new ei({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new ym(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,E),y}}const wv=new Map;function ps(s){vs(s instanceof Function,"Expected a class definition");let e=wv.get(s);return e?(vs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,wv.set(s,e),e)}class d1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}d1.type="NONE";const Sv=d1;function Gu(s,e,n){return`firebase:${s}:${e}:${n}`}class ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Gu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Gu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ih(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ho(ps(Sv),e,r);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let c=l[0]||ps(Sv);const f=Gu(r,e.config.apiKey,e.name);let p=null;for(const E of n)try{const T=await E._get(f);if(T){let w;if(typeof T=="string"){const C=await ih(e,{idToken:T}).catch(()=>{});if(!C)break;w=await ei._fromGetAccountInfoResponse(e,C,T)}else w=ei._fromJSON(e,T);E!==c&&(p=w),c=E;break}}catch{}const y=l.filter(E=>E._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new ho(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async E=>{if(E!==c)try{await E._remove(f)}catch{}})),new ho(c,e,r))}}function Rv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(E1(e))return"Webos";if(p1(e))return"Safari";if((e.includes("chrome/")||g1(e))&&!e.includes("edge/"))return"Chrome";if(_1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function m1(s=Wt()){return/firefox\//i.test(s)}function p1(s=Wt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g1(s=Wt()){return/crios\//i.test(s)}function y1(s=Wt()){return/iemobile/i.test(s)}function _1(s=Wt()){return/android/i.test(s)}function v1(s=Wt()){return/blackberry/i.test(s)}function E1(s=Wt()){return/webos/i.test(s)}function Km(s=Wt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function bw(s=Wt()){return Km(s)&&!!window.navigator?.standalone}function Aw(){return Lb()&&document.documentMode===10}function T1(s=Wt()){return Km(s)||_1(s)||E1(s)||v1(s)||/windows phone/i.test(s)||y1(s)}function b1(s,e=[]){let n;switch(s){case"Browser":n=Rv(Wt());break;case"Worker":n=`${Rv(Wt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ma}/${r}`}class ww{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Sw(s,e={}){return As(s,"GET","/v2/passwordPolicy",bs(s,e))}const Rw=6;class Cw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Rw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class xw{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new ww(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ih(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(gs(this));const n=e?_t(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sw(this),n=new Cw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&iw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function br(s){return _t(s)}class Cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gb(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iw(s){Ch=s}function A1(s){return Ch.loadJS(s)}function Nw(){return Ch.recaptchaEnterpriseScript}function Dw(){return Ch.gapiScript}function Ow(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Mw{constructor(){this.enterprise=new jw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Vw="recaptcha-enterprise",w1="NO_RECAPTCHA";class kw{constructor(e){this.type=Vw,this.auth=br(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{dw(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const E=new fw(y);return c.tenantId==null?c._agentRecaptchaConfig=E:c._tenantRecaptchaConfigs[c.tenantId]=E,f(E.siteKey)}}).catch(y=>{p(y)})})}function l(c,f,p){const y=window.grecaptcha;bv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(E=>{f(E)}).catch(()=>{f(w1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mw().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&bv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Nw();y.length!==0&&(y+=p),A1(y).then(()=>{l(p,c,f)}).catch(E=>{f(E)})}}).catch(p=>{f(p)})})}}async function xv(s,e,n,r=!1,l=!1){const c=new kw(s);let f;if(l)f=w1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,E=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function rh(s,e,n,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xv(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await xv(s,e,n,n==="getOobCode");return r(s,f)}else return Promise.reject(c)})}function Lw(s,e){const n=Rh(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(oa(c,e??{}))return l;ii(l,"already-initialized")}return n.initialize({options:e})}function Pw(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function Uw(s,e,n){const r=br(s);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=S1(e),{host:f,port:p}=zw(e),y=p===null?"":`:${p}`,E={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(oa(E,r.config.emulator)&&oa(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=E,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,da(f)?(Um(`${c}//${f}${y}`),zm("Auth",!0)):Bw()}function S1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function zw(s){const e=S1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:Iv(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:Iv(f)}}}function Iv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Bw(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function qw(s,e){return As(s,"POST","/v1/accounts:signUp",e)}async function Fw(s,e){return Jl(s,"POST","/v1/accounts:signInWithPassword",bs(s,e))}async function R1(s,e){return As(s,"POST","/v1/accounts:sendOobCode",bs(s,e))}async function Hw(s,e){return R1(s,e)}async function Gw(s,e){return R1(s,e)}async function Qw(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",bs(s,e))}async function Kw(s,e){return Jl(s,"POST","/v1/accounts:signInWithEmailLink",bs(s,e))}class Fl extends Ym{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Fl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,n,"signInWithPassword",Fw);case"emailLink":return Qw(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,r,"signUpPassword",qw);case"emailLink":return Kw(e,{idToken:n,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fo(s,e){return Jl(s,"POST","/v1/accounts:signInWithIdp",bs(s,e))}const Yw="http://localhost";class ca extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ii("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const f=new ca(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return fo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fo(e,n)}buildRequest(){const e={requestUri:Yw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wl(n)}return e}}function Xw(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $w(s){const e=Il(Nl(s)).link,n=e?Il(Nl(e)).deep_link_id:null,r=Il(Nl(s)).deep_link_id;return(r?Il(Nl(r)).link:null)||r||n||e||s}class Xm{constructor(e){const n=Il(Nl(e)),r=n.apiKey??null,l=n.oobCode??null,c=Xw(n.mode??null);ye(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$w(e);try{return new Xm(n)}catch{return null}}}class To{constructor(){this.providerId=To.PROVIDER_ID}static credential(e,n){return Fl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Xm.parseLink(n);return ye(r,"argument-error"),Fl._fromEmailAndCode(e,r.code,r.tenantId)}}To.PROVIDER_ID="password";To.EMAIL_PASSWORD_SIGN_IN_METHOD="password";To.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class C1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ec extends C1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rr extends ec{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";class ar extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ca._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";class or extends ec{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";class lr extends ec{constructor(){super("twitter.com")}static credential(e,n){return ca._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";async function Ww(s,e){return Jl(s,"POST","/v1/accounts:signUp",bs(s,e))}class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await ei._fromIdTokenResponse(e,r,l),f=Nv(r);return new ua({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=Nv(r);return new ua({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function Nv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class ah extends qi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new ah(e,n,r,l)}}function x1(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(s,c,e,r):c})}async function Zw(s,e,n=!1){const r=await ql(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ua._forOperation(s,"link",r)}async function Jw(s,e,n=!1){const{auth:r}=s;if(wn(r.app))return Promise.reject(gs(r));const l="reauthenticate";try{const c=await ql(s,x1(r,l,e,s),n);ye(c.idToken,r,"internal-error");const f=Qm(c.idToken);ye(f,r,"internal-error");const{sub:p}=f;return ye(s.uid===p,r,"user-mismatch"),ua._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),c}}async function I1(s,e,n=!1){if(wn(s.app))return Promise.reject(gs(s));const r="signIn",l=await x1(s,r,e),c=await ua._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function eS(s,e){return I1(br(s),e)}async function N1(s){const e=br(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tS(s,e,n){const r=br(s);await rh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Gw)}async function nS(s,e,n){if(wn(s.app))return Promise.reject(gs(s));const r=br(s),f=await rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ww).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&N1(s),y}),p=await ua._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function iS(s,e,n){return wn(s.app)?Promise.reject(gs(s)):eS(_t(s),To.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N1(s),r})}async function sS(s,e){const n=_t(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await Hw(n.auth,l);c!==s.email&&await s.reload()}function rS(s,e,n,r){return _t(s).onIdTokenChanged(e,n,r)}function aS(s,e,n){return _t(s).beforeAuthStateChanged(e,n)}function oS(s,e,n,r){return _t(s).onAuthStateChanged(e,n,r)}function D1(s){return _t(s).signOut()}const oh="__sak";class O1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lS=1e3,cS=10;class M1 extends O1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);Aw()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,cS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}M1.type="LOCAL";const uS=M1;class j1 extends O1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j1.type="SESSION";const V1=j1;function hS(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new xh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async E=>E(n.origin,c)),y=await hS(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];function $m(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class fS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const E=$m("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(w){const C=w;if(C.data.eventId===E)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(C.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:E,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Mi(){return window}function dS(s){Mi().location.href=s}function k1(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function mS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pS(){return navigator?.serviceWorker?.controller||null}function gS(){return k1()?self:null}const L1="firebaseLocalStorageDb",yS=1,lh="firebaseLocalStorage",P1="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(s,e){return s.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function _S(){const s=indexedDB.deleteDatabase(L1);return new tc(s).toPromise()}function _m(){const s=indexedDB.open(L1,yS);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(lh,{keyPath:P1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await _S(),e(await _m()))})})}async function Dv(s,e,n){const r=Ih(s,!0).put({[P1]:e,value:n});return new tc(r).toPromise()}async function vS(s,e){const n=Ih(s,!1).get(e),r=await new tc(n).toPromise();return r===void 0?null:r.value}function Ov(s,e){const n=Ih(s,!0).delete(e);return new tc(n).toPromise()}const ES=800,TS=3;class U1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(gS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mS(),!this.activeServiceWorker)return;this.sender=new fS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await Dv(e,oh,"1"),await Ov(e,oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ih(l,!1).getAll();return new tc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U1.type="LOCAL";const bS=U1;new Zl(3e4,6e4);function AS(s,e){return e?ps(e):(ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Wm extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wS(s){return I1(s.auth,new Wm(s),s.bypassAuthState)}function SS(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),Jw(n,new Wm(s),s.bypassAuthState)}async function RS(s){const{auth:e,user:n}=s;return ye(n,e,"internal-error"),Zw(n,new Wm(s),s.bypassAuthState)}class z1{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wS;case"linkViaPopup":case"linkViaRedirect":return RS;case"reauthViaPopup":case"reauthViaRedirect":return SS;default:ii(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CS=new Zl(2e3,1e4);class co extends z1{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CS.get())};e()}}co.currentPopupAction=null;const xS="pendingRedirect",Qu=new Map;class IS extends z1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await NS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NS(s,e){const n=MS(e),r=OS(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function DS(s,e){Qu.set(s._key(),e)}function OS(s){return ps(s._redirectPersistence)}function MS(s){return Gu(xS,s.config.apiKey,s.name)}async function jS(s,e,n=!1){if(wn(s.app))return Promise.reject(gs(s));const r=br(s),l=AS(r,e),f=await new IS(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const VS=600*1e3;class kS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!B1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Oi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function B1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function LS(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B1(s);default:return!1}}async function PS(s,e={}){return As(s,"GET","/v1/projects",e)}const US=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zS=/^https?/;async function BS(s){if(s.config.emulator)return;const{authorizedDomains:e}=await PS(s);for(const n of e)try{if(qS(n))return}catch{}ii(s,"unauthorized-domain")}function qS(s){const e=gm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!zS.test(n))return!1;if(US.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const FS=new Zl(3e4,6e4);function jv(){const s=Mi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function HS(s){return new Promise((e,n)=>{function r(){jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jv(),n(Oi(s,"network-request-failed"))},timeout:FS.get()})}if(Mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mi().gapi?.load)r();else{const l=Ow("iframefcb");return Mi()[l]=()=>{gapi.load?r():n(Oi(s,"network-request-failed"))},A1(`${Dw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ku=null,e})}let Ku=null;function GS(s){return Ku=Ku||HS(s),Ku}const QS=new Zl(5e3,15e3),KS="__/auth/iframe",YS="emulator/auth/iframe",XS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$S=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WS(s){const e=s.config;ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Gm(e,YS):`https://${s.config.authDomain}/${KS}`,r={apiKey:e.apiKey,appName:s.name,v:ma},l=$S.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Wl(r).slice(1)}`}async function ZS(s){const e=await GS(s),n=Mi().gapi;return ye(n,s,"internal-error"),e.open({where:document.body,url:WS(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XS,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=Oi(s,"network-request-failed"),p=Mi().setTimeout(()=>{c(f)},QS.get());function y(){Mi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(f)})}))}const JS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eR=500,tR=600,nR="_blank",iR="http://localhost";class Vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sR(s,e,n,r=eR,l=tR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...JS,width:r.toString(),height:l.toString(),top:c,left:f},E=Wt().toLowerCase();n&&(p=g1(E)?nR:n),m1(E)&&(e=e||iR,y.scrollbars="yes");const T=Object.entries(y).reduce((C,[P,K])=>`${C}${P}=${K},`,"");if(bw(E)&&p!=="_self")return rR(e||"",p),new Vv(null);const w=window.open(e||"",p,T);ye(w,s,"popup-blocked");try{w.focus()}catch{}return new Vv(w)}function rR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const aR="__/auth/handler",oR="emulator/auth/handler",lR=encodeURIComponent("fac");async function kv(s,e,n,r,l,c){ye(s.config.authDomain,s,"auth-domain-config-required"),ye(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ma,eventId:l};if(e instanceof C1){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",Hb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(e instanceof ec){const T=e.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await s._getAppCheckToken(),E=y?`#${lR}=${encodeURIComponent(y)}`:"";return`${cR(s)}?${Wl(p).slice(1)}${E}`}function cR({config:s}){return s.emulator?Gm(s,oR):`https://${s.authDomain}/${aR}`}const sm="webStorageSupport";class uR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V1,this._completeRedirectFn=jS,this._overrideRedirectResult=DS}async _openPopup(e,n,r,l){vs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await kv(e,n,r,gm(),l);return sR(e,c,$m())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await kv(e,n,r,gm(),l);return dS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(vs(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ZS(e),r=new kS(e);return n.register("authEvent",l=>(ye(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sm,{type:sm},l=>{const c=l?.[0]?.[sm];c!==void 0&&n(!!c),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T1()||p1()||Km()}}const hR=uR;var Lv="@firebase/auth",Pv="1.11.1";class fR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mR(s){la(new mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;ye(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b1(s)},E=new xw(r,l,c,y);return Pw(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),la(new mr("auth-internal",e=>{const n=br(e.getProvider("auth").getImmediate());return(r=>new fR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Di(Lv,Pv,dR(s)),Di(Lv,Pv,"esm2020")}const pR=300,gR=J0("authIdTokenMaxAge")||pR;let Uv=null;const yR=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gR)return;const l=n?.token;Uv!==l&&(Uv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function _R(s=Fm()){const e=Rh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=Lw(s,{popupRedirectResolver:hR,persistence:[bS,uS,V1]}),r=J0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=yR(c.toString());aS(n,f,()=>f(n.currentUser)),rS(n,p=>f(p))}}const l=$0("auth");return l&&Uw(n,`http://${l}`),n}function vR(){return document.getElementsByTagName("head")?.[0]??document}Iw({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=Oi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",vR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mR("Browser");var zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fr,q1;(function(){var s;function e(D,S){function I(){}I.prototype=S.prototype,D.F=S.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(j,x,M){for(var R=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)R[Ce-2]=arguments[Ce];return S.prototype[x].apply(j,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(D,S,I){I||(I=0);const j=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)j[x]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(x=0;x<16;++x)j[x]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=D.g[0],I=D.g[1],x=D.g[2];let M=D.g[3],R;R=S+(M^I&(x^M))+j[0]+3614090360&4294967295,S=I+(R<<7&4294967295|R>>>25),R=M+(x^S&(I^x))+j[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=x+(I^M&(S^I))+j[2]+606105819&4294967295,x=M+(R<<17&4294967295|R>>>15),R=I+(S^x&(M^S))+j[3]+3250441966&4294967295,I=x+(R<<22&4294967295|R>>>10),R=S+(M^I&(x^M))+j[4]+4118548399&4294967295,S=I+(R<<7&4294967295|R>>>25),R=M+(x^S&(I^x))+j[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=x+(I^M&(S^I))+j[6]+2821735955&4294967295,x=M+(R<<17&4294967295|R>>>15),R=I+(S^x&(M^S))+j[7]+4249261313&4294967295,I=x+(R<<22&4294967295|R>>>10),R=S+(M^I&(x^M))+j[8]+1770035416&4294967295,S=I+(R<<7&4294967295|R>>>25),R=M+(x^S&(I^x))+j[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=x+(I^M&(S^I))+j[10]+4294925233&4294967295,x=M+(R<<17&4294967295|R>>>15),R=I+(S^x&(M^S))+j[11]+2304563134&4294967295,I=x+(R<<22&4294967295|R>>>10),R=S+(M^I&(x^M))+j[12]+1804603682&4294967295,S=I+(R<<7&4294967295|R>>>25),R=M+(x^S&(I^x))+j[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=x+(I^M&(S^I))+j[14]+2792965006&4294967295,x=M+(R<<17&4294967295|R>>>15),R=I+(S^x&(M^S))+j[15]+1236535329&4294967295,I=x+(R<<22&4294967295|R>>>10),R=S+(x^M&(I^x))+j[1]+4129170786&4294967295,S=I+(R<<5&4294967295|R>>>27),R=M+(I^x&(S^I))+j[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=x+(S^I&(M^S))+j[11]+643717713&4294967295,x=M+(R<<14&4294967295|R>>>18),R=I+(M^S&(x^M))+j[0]+3921069994&4294967295,I=x+(R<<20&4294967295|R>>>12),R=S+(x^M&(I^x))+j[5]+3593408605&4294967295,S=I+(R<<5&4294967295|R>>>27),R=M+(I^x&(S^I))+j[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=x+(S^I&(M^S))+j[15]+3634488961&4294967295,x=M+(R<<14&4294967295|R>>>18),R=I+(M^S&(x^M))+j[4]+3889429448&4294967295,I=x+(R<<20&4294967295|R>>>12),R=S+(x^M&(I^x))+j[9]+568446438&4294967295,S=I+(R<<5&4294967295|R>>>27),R=M+(I^x&(S^I))+j[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=x+(S^I&(M^S))+j[3]+4107603335&4294967295,x=M+(R<<14&4294967295|R>>>18),R=I+(M^S&(x^M))+j[8]+1163531501&4294967295,I=x+(R<<20&4294967295|R>>>12),R=S+(x^M&(I^x))+j[13]+2850285829&4294967295,S=I+(R<<5&4294967295|R>>>27),R=M+(I^x&(S^I))+j[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=x+(S^I&(M^S))+j[7]+1735328473&4294967295,x=M+(R<<14&4294967295|R>>>18),R=I+(M^S&(x^M))+j[12]+2368359562&4294967295,I=x+(R<<20&4294967295|R>>>12),R=S+(I^x^M)+j[5]+4294588738&4294967295,S=I+(R<<4&4294967295|R>>>28),R=M+(S^I^x)+j[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=x+(M^S^I)+j[11]+1839030562&4294967295,x=M+(R<<16&4294967295|R>>>16),R=I+(x^M^S)+j[14]+4259657740&4294967295,I=x+(R<<23&4294967295|R>>>9),R=S+(I^x^M)+j[1]+2763975236&4294967295,S=I+(R<<4&4294967295|R>>>28),R=M+(S^I^x)+j[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=x+(M^S^I)+j[7]+4139469664&4294967295,x=M+(R<<16&4294967295|R>>>16),R=I+(x^M^S)+j[10]+3200236656&4294967295,I=x+(R<<23&4294967295|R>>>9),R=S+(I^x^M)+j[13]+681279174&4294967295,S=I+(R<<4&4294967295|R>>>28),R=M+(S^I^x)+j[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=x+(M^S^I)+j[3]+3572445317&4294967295,x=M+(R<<16&4294967295|R>>>16),R=I+(x^M^S)+j[6]+76029189&4294967295,I=x+(R<<23&4294967295|R>>>9),R=S+(I^x^M)+j[9]+3654602809&4294967295,S=I+(R<<4&4294967295|R>>>28),R=M+(S^I^x)+j[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=x+(M^S^I)+j[15]+530742520&4294967295,x=M+(R<<16&4294967295|R>>>16),R=I+(x^M^S)+j[2]+3299628645&4294967295,I=x+(R<<23&4294967295|R>>>9),R=S+(x^(I|~M))+j[0]+4096336452&4294967295,S=I+(R<<6&4294967295|R>>>26),R=M+(I^(S|~x))+j[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=x+(S^(M|~I))+j[14]+2878612391&4294967295,x=M+(R<<15&4294967295|R>>>17),R=I+(M^(x|~S))+j[5]+4237533241&4294967295,I=x+(R<<21&4294967295|R>>>11),R=S+(x^(I|~M))+j[12]+1700485571&4294967295,S=I+(R<<6&4294967295|R>>>26),R=M+(I^(S|~x))+j[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=x+(S^(M|~I))+j[10]+4293915773&4294967295,x=M+(R<<15&4294967295|R>>>17),R=I+(M^(x|~S))+j[1]+2240044497&4294967295,I=x+(R<<21&4294967295|R>>>11),R=S+(x^(I|~M))+j[8]+1873313359&4294967295,S=I+(R<<6&4294967295|R>>>26),R=M+(I^(S|~x))+j[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=x+(S^(M|~I))+j[6]+2734768916&4294967295,x=M+(R<<15&4294967295|R>>>17),R=I+(M^(x|~S))+j[13]+1309151649&4294967295,I=x+(R<<21&4294967295|R>>>11),R=S+(x^(I|~M))+j[4]+4149444226&4294967295,S=I+(R<<6&4294967295|R>>>26),R=M+(I^(S|~x))+j[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=x+(S^(M|~I))+j[2]+718787259&4294967295,x=M+(R<<15&4294967295|R>>>17),R=I+(M^(x|~S))+j[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.v=function(D,S){S===void 0&&(S=D.length);const I=S-this.blockSize,j=this.C;let x=this.h,M=0;for(;M<S;){if(x==0)for(;M<=I;)l(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<S;)if(j[x++]=D.charCodeAt(M++),x==this.blockSize){l(this,j),x=0;break}}else for(;M<S;)if(j[x++]=D[M++],x==this.blockSize){l(this,j),x=0;break}}this.h=x,this.o+=S},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;S=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=S&255,S/=256;for(this.v(D),D=Array(16),S=0,I=0;I<4;++I)for(let j=0;j<32;j+=8)D[S++]=this.g[I]>>>j&255;return D};function c(D,S){var I=p;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=S(D)}function f(D,S){this.h=S;const I=[];let j=!0;for(let x=D.length-1;x>=0;x--){const M=D[x]|0;j&&M==S||(I[x]=M,j=!1)}this.g=I}var p={};function y(D){return-128<=D&&D<128?c(D,function(S){return new f([S|0],S<0?-1:0)}):new f([D|0],D<0?-1:0)}function E(D){if(isNaN(D)||!isFinite(D))return w;if(D<0)return k(E(-D));const S=[];let I=1;for(let j=0;D>=I;j++)S[j]=D/I|0,I*=4294967296;return new f(S,0)}function T(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return k(T(D.substring(1),S));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=E(Math.pow(S,8));let j=w;for(let M=0;M<D.length;M+=8){var x=Math.min(8,D.length-M);const R=parseInt(D.substring(M,M+x),S);x<8?(x=E(Math.pow(S,x)),j=j.j(x).add(E(R))):(j=j.j(I),j=j.add(E(R)))}return j}var w=y(0),C=y(1),P=y(16777216);s=f.prototype,s.m=function(){if(Z(this))return-k(this).m();let D=0,S=1;for(let I=0;I<this.g.length;I++){const j=this.i(I);D+=(j>=0?j:4294967296+j)*S,S*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(K(this))return"0";if(Z(this))return"-"+k(this).toString(D);const S=E(Math.pow(D,6));var I=this;let j="";for(;;){const x=ie(I,S).g;I=U(I,x.j(S));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=x,K(I))return M+j;for(;M.length<6;)M="0"+M;j=M+j}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function K(D){if(D.h!=0)return!1;for(let S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function Z(D){return D.h==-1}s.l=function(D){return D=U(this,D),Z(D)?-1:K(D)?0:1};function k(D){const S=D.g.length,I=[];for(let j=0;j<S;j++)I[j]=~D.g[j];return new f(I,~D.h).add(C)}s.abs=function(){return Z(this)?k(this):this},s.add=function(D){const S=Math.max(this.g.length,D.g.length),I=[];let j=0;for(let x=0;x<=S;x++){let M=j+(this.i(x)&65535)+(D.i(x)&65535),R=(M>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);j=R>>>16,M&=65535,R&=65535,I[x]=R<<16|M}return new f(I,I[I.length-1]&-2147483648?-1:0)};function U(D,S){return D.add(k(S))}s.j=function(D){if(K(this)||K(D))return w;if(Z(this))return Z(D)?k(this).j(k(D)):k(k(this).j(D));if(Z(D))return k(this.j(k(D)));if(this.l(P)<0&&D.l(P)<0)return E(this.m()*D.m());const S=this.g.length+D.g.length,I=[];for(var j=0;j<2*S;j++)I[j]=0;for(j=0;j<this.g.length;j++)for(let x=0;x<D.g.length;x++){const M=this.i(j)>>>16,R=this.i(j)&65535,Ce=D.i(x)>>>16,Fe=D.i(x)&65535;I[2*j+2*x]+=R*Fe,oe(I,2*j+2*x),I[2*j+2*x+1]+=M*Fe,oe(I,2*j+2*x+1),I[2*j+2*x+1]+=R*Ce,oe(I,2*j+2*x+1),I[2*j+2*x+2]+=M*Ce,oe(I,2*j+2*x+2)}for(D=0;D<S;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=S;D<2*S;D++)I[D]=0;return new f(I,0)};function oe(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function J(D,S){this.g=D,this.h=S}function ie(D,S){if(K(S))throw Error("division by zero");if(K(D))return new J(w,w);if(Z(D))return S=ie(k(D),S),new J(k(S.g),k(S.h));if(Z(S))return S=ie(D,k(S)),new J(k(S.g),S.h);if(D.g.length>30){if(Z(D)||Z(S))throw Error("slowDivide_ only works with positive integers.");for(var I=C,j=S;j.l(D)<=0;)I=ee(I),j=ee(j);var x=le(I,1),M=le(j,1);for(j=le(j,2),I=le(I,2);!K(j);){var R=M.add(j);R.l(D)<=0&&(x=x.add(I),M=R),j=le(j,1),I=le(I,1)}return S=U(D,x.j(S)),new J(x,S)}for(x=w;D.l(S)>=0;){for(I=Math.max(1,Math.floor(D.m()/S.m())),j=Math.ceil(Math.log(I)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),M=E(I),R=M.j(S);Z(R)||R.l(D)>0;)I-=j,M=E(I),R=M.j(S);K(M)&&(M=C),x=x.add(M),D=U(D,R)}return new J(x,D)}s.B=function(D){return ie(this,D).h},s.and=function(D){const S=Math.max(this.g.length,D.g.length),I=[];for(let j=0;j<S;j++)I[j]=this.i(j)&D.i(j);return new f(I,this.h&D.h)},s.or=function(D){const S=Math.max(this.g.length,D.g.length),I=[];for(let j=0;j<S;j++)I[j]=this.i(j)|D.i(j);return new f(I,this.h|D.h)},s.xor=function(D){const S=Math.max(this.g.length,D.g.length),I=[];for(let j=0;j<S;j++)I[j]=this.i(j)^D.i(j);return new f(I,this.h^D.h)};function ee(D){const S=D.g.length+1,I=[];for(let j=0;j<S;j++)I[j]=D.i(j)<<1|D.i(j-1)>>>31;return new f(I,D.h)}function le(D,S){const I=S>>5;S%=32;const j=D.g.length-I,x=[];for(let M=0;M<j;M++)x[M]=S>0?D.i(M+I)>>>S|D.i(M+I+1)<<32-S:D.i(M+I);return new f(x,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,q1=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=T,fr=f}).apply(typeof zv<"u"?zv:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var F1,Dl,H1,Yu,vm,G1,Q1,K1;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function l(u,g){if(g)e:{var v=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in v))break e;v=v[L]}u=u[u.length-1],A=v[u],g=g(A),g!=A&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var v=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&v.push([A,g[A]]);return v}});var c=c||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,v){return u.call.apply(u.bind,arguments)}function E(u,g,v){return E=y,E.apply(null,arguments)}function T(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function w(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,L,F){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return g.prototype[L].apply(A,te)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const g=u.length;if(g>0){const v=Array(g);for(let A=0;A<g;A++)v[A]=u[A];return v}return[]}function K(u,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=u.length||0;const F=L.length||0;u.length=v+F;for(let te=0;te<F;te++)u[v+te]=L[te]}else u.push(L)}}class Z{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(u){f.setTimeout(()=>{throw u},0)}function U(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,v){const A=J.get();A.set(g,v),this.h?this.h.next=A:this.g=A,this.h=A}}var J=new Z(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,le=!1,D=new oe,S=()=>{const u=Promise.resolve(void 0);ee=()=>{u.then(I)}};function I(){for(var u;u=U();){try{u.h.call(u.g)}catch(v){k(v)}var g=J;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}le=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,g),f.removeEventListener("test",v,g)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ce(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}w(Ce,x),Ce.prototype.init=function(u,g){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ne(u,g,v,A,L){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!A,this.ha=L,this.key=++Q,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ve(u,g,v){for(const A in u)g.call(v,u[A],A,u)}function Re(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function Ke(u){const g={};for(const v in u)g[v]=u[v];return g}const Le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(u,g){let v,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(v in A)u[v]=A[v];for(let F=0;F<Le.length;F++)v=Le[F],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function tt(u){this.src=u,this.g={},this.h=0}tt.prototype.add=function(u,g,v,A,L){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const te=sn(u,g,A,L);return te>-1?(g=u[te],v||(g.fa=!1)):(g=new ne(g,this.src,F,!!A,L),g.fa=v,u.push(g)),g};function vt(u,g){const v=g.type;if(v in u.g){var A=u.g[v],L=Array.prototype.indexOf.call(A,g,void 0),F;(F=L>=0)&&Array.prototype.splice.call(A,L,1),F&&(he(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function sn(u,g,v,A){for(let L=0;L<u.length;++L){const F=u[L];if(!F.da&&F.listener==g&&F.capture==!!v&&F.ha==A)return L}return-1}var Cn="closure_lm_"+(Math.random()*1e6|0),ri={};function Zt(u,g,v,A,L){if(Array.isArray(g)){for(let F=0;F<g.length;F++)Zt(u,g[F],v,A,L);return null}return v=Rr(v),u&&u[Fe]?u.J(g,v,p(A)?!!A.capture:!1,L):Sr(u,g,v,!1,A,L)}function Sr(u,g,v,A,L,F){if(!g)throw Error("Invalid event type");const te=p(L)?!!L.capture:!!L;let be=Gi(u);if(be||(u[Cn]=be=new tt(u)),v=be.add(g,v,A,te,F),v.proxy)return v;if(A=Bn(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)M||(L=te),L===void 0&&(L=!1),u.addEventListener(g.toString(),A,L);else if(u.attachEvent)u.attachEvent(mn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function u(v){return g.call(u.src,u.listener,v)}const g=oi;return u}function ws(u,g,v,A,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)ws(u,g[F],v,A,L);else A=p(A)?!!A.capture:!!A,v=Rr(v),u&&u[Fe]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],v=sn(g,v,A,L),v>-1&&(he(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=Gi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=sn(g,v,A,L)),(v=u>-1?g[u]:null)&&ai(v))}function ai(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Fe])vt(g.i,u);else{var v=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(v,A,u.capture):g.detachEvent?g.detachEvent(mn(v),A):g.addListener&&g.removeListener&&g.removeListener(A),(v=Gi(g))?(vt(v,u),v.h==0&&(v.src=null,g[Cn]=null)):he(u)}}}function mn(u){return u in ri?ri[u]:ri[u]="on"+u}function oi(u,g){if(u.da)u=!0;else{g=new Ce(g,this);const v=u.listener,A=u.ha||u.src;u.fa&&ai(u),u=v.call(A,g)}return u}function Gi(u){return u=u[Cn],u instanceof tt?u:null}var li="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rr(u){return typeof u=="function"?u:(u[li]||(u[li]=function(g){return u.handleEvent(g)}),u[li])}function ht(){j.call(this),this.i=new tt(this),this.M=this,this.G=null}w(ht,j),ht.prototype[Fe]=!0,ht.prototype.removeEventListener=function(u,g,v,A){ws(this,u,g,v,A)};function Et(u,g){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var L=g;g=new x(A,u),we(g,L)}L=!0;let F,te;if(v)for(te=v.length-1;te>=0;te--)F=g.g=v[te],L=ft(F,A,!0,g)&&L;if(F=g.g=u,L=ft(F,A,!0,g)&&L,L=ft(F,A,!1,g)&&L,v)for(te=0;te<v.length;te++)F=g.g=v[te],L=ft(F,A,!1,g)&&L}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let A=0;A<v.length;A++)he(v[A]);delete u.g[g],u.h--}}this.G=null},ht.prototype.J=function(u,g,v,A){return this.i.add(String(u),g,!1,v,A)},ht.prototype.K=function(u,g,v,A){return this.i.add(String(u),g,!0,v,A)};function ft(u,g,v,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let F=0;F<g.length;++F){const te=g[F];if(te&&!te.da&&te.capture==v){const be=te.listener,mt=te.ha||te.src;te.fa&&vt(u.i,te),L=be.call(mt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Co(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Cr(u){u.g=Co(()=>{u.g=null,u.i&&(u.i=!1,Cr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class jt extends j{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(u){j.call(this),this.h=u,this.g={}}w(Qi,j);var xr=[];function Ss(u){ve(u.g,function(g,v){this.g.hasOwnProperty(v)&&ai(g)},u),u.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),Ss(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=f.JSON.stringify,ge=f.JSON.parse,Ut=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ki(){}function Rs(){}var Jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dt(){x.call(this,"d")}w(dt,x);function en(){x.call(this,"c")}w(en,x);var st={},hc=null;function _a(){return hc=hc||new ht}st.Ia="serverreachability";function fc(u){x.call(this,st.Ia,u)}w(fc,x);function ci(u){const g=_a();Et(g,new fc(g))}st.STAT_EVENT="statevent";function Ir(u,g){x.call(this,st.STAT_EVENT,u),this.stat=g}w(Ir,x);function Tt(u){const g=_a();Et(g,new Ir(g,u))}st.Ja="timingevent";function ui(u,g){x.call(this,st.Ja,u),this.size=g}w(ui,x);function hi(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function Wh(u,g,v,A,L,F){u.info(function(){if(u.g)if(F){var te="",be=F.split("&");for(let ze=0;ze<be.length;ze++){var mt=be[ze].split("=");if(mt.length>1){const rt=mt[0];mt=mt[1];const Dn=rt.split("_");te=Dn.length>=2&&Dn[1]=="type"?te+(rt+"="+mt+"&"):te+(rt+"=redacted&")}}}else te=null;else te=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+v+`
`+te})}function dc(u,g,v,A,L,F,te){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+v+`
`+F+" "+te})}function fi(u,g,v,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zh(u,v)+(A?" "+A:"")})}function Nr(u,g){u.info(function(){return"TIMEOUT: "+g})}qn.prototype.info=function(){};function Zh(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var v=F[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let te=1;te<A.length;te++)A[te]=""}}}}return ce(F)}catch{return g}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Io;function Or(){}w(Or,Ki),Or.prototype.g=function(){return new XMLHttpRequest},Io=new Or;function Yi(u){return encodeURIComponent(String(u))}function mc(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Fn(u,g,v,A){this.j=u,this.i=g,this.l=v,this.S=A||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hn}function Hn(){this.i=null,this.g="",this.h=!1}var bt={},Vt={};function di(u,g,v){u.M=1,u.A=Mr(wt(g)),u.u=v,u.R=!0,va(u,null)}function va(u,g){u.F=Date.now(),mi(u),u.B=wt(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Aa(v.i,"t",A),u.C=0,v=u.j.L,u.h=new Hn,u.g=Ic(u.j,v?g:null,!u.u),u.P>0&&(u.O=new jt(E(u.Y,u,u.g),u.P)),g=u.V,v=u.g,A=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(xr[0]=L.toString()),L=xr);for(let F=0;F<L.length;F++){const te=Zt(v,L[F],A||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=u.J?Ke(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ci(),Wh(u.i,u.v,u.B,u.l,u.S,u.u)}Fn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Kn(u)==3?g.j():this.Y(u)},Fn.prototype.Y=function(u){try{if(u==this.g)e:{const be=Kn(this.g),mt=this.g.ya(),ze=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||be!=4||mt==7||(mt==8||ze<=0?ci(3):ci(2)),pi(this);var g=this.g.ca();this.X=g;var v=Jh(this);if(this.o=g==200,dc(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var F=A;break t}}F=null}if(u=F)fi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,u);else{this.o=!1,this.m=3,Tt(12),pn(this),xn(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<v.length;)if(rt=gc(this,v),rt==Vt){be==4&&(this.m=4,Tt(14),u=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==bt){this.m=4,Tt(15),fi(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else fi(this.i,this.l,rt,null),gi(this,rt);if(pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||v.length!=0||this.h.h||(this.m=1,Tt(16),u=!1),this.o=this.o&&u,!u)fi(this.i,this.l,v,"[Invalid Chunked Response]"),pn(this),xn(this);else if(v.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ho(te),te.P=!0,Tt(11))}}else fi(this.i,this.l,v,null),gi(this,v);be==4&&pn(this),this.o&&!this.K&&(be==4?Sc(this.j,this):(this.o=!1,mi(this)))}else $i(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),pn(this),xn(this)}}}catch{}finally{}};function Jh(u){if(!pc(u))return u.g.la();const g=zt(u.g);if(g==="")return"";let v="";const A=g.length,L=Kn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return pn(u),xn(u),"";u.h.i=new f.TextDecoder}for(let F=0;F<A;F++)u.h.h=!0,v+=u.h.i.decode(g[F],{stream:!(L&&F==A-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function pc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function gc(u,g){var v=u.C,A=g.indexOf(`
`,v);return A==-1?Vt:(v=Number(g.substring(v,A)),isNaN(v)?bt:(A+=1,A+v>g.length?Vt:(g=g.slice(A,A+v),u.C=A+v,g)))}Fn.prototype.cancel=function(){this.K=!0,pn(this)};function mi(u){u.T=Date.now()+u.H,Ea(u,u.H)}function Ea(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=hi(E(u.aa,u),g)}function pi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Fn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Nr(this.i,this.B),this.M!=2&&(ci(),Tt(17)),pn(this),this.m=2,xn(this)):Ea(this,this.T-u)};function xn(u){u.j.I==0||u.K||Sc(u.j,u)}function pn(u){pi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ss(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function gi(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||_i(v.h,u))){if(!u.L&&_i(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)xa(v),js(v);else break e;zr(v),Tt(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=hi(E(v.Va,v),6e3));yi(v.h)<=1&&v.ta&&(v.ta=void 0)}else wi(v,11)}else if((u.L||v.g==u)&&xa(v),!R(g))for(L=v.Ba.g.parse(g),g=0;g<L.length;g++){let ze=L[g];const rt=ze[0];if(!(rt<=v.K))if(v.K=rt,ze=ze[1],v.I==2)if(ze[0]=="c"){v.M=ze[1],v.ba=ze[2];const Dn=ze[3];Dn!=null&&(v.ka=Dn,v.j.info("VER="+v.ka));const Si=ze[4];Si!=null&&(v.za=Si,v.j.info("SVER="+v.za));const Yn=ze[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(A=1.5*Yn,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Xn=u.g;if(Xn){const Br=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var F=A.h;F.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Oo(F,F.h),F.h=null))}if(A.G){const Ia=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(A.wa=Ia,He(A.J,A.G,Ia))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var te=u;if(A.na=xc(A,A.L?A.ba:null,A.W),te.L){Mo(A.h,te);var be=te,mt=A.O;mt&&(be.H=mt),be.D&&(pi(be),mi(be)),A.g=te}else Ac(A);v.i.length>0&&Ai(v)}else ze[0]!="stop"&&ze[0]!="close"||wi(v,7);else v.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?wi(v,7):qo(v):ze[0]!="noop"&&v.l&&v.l.qa(ze),v.A=0)}}ci(4)}catch{}}var At=class{constructor(u,g){this.g=u,this.map=g}};function No(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Do(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yi(u){return u.h?1:u.g?u.g.size:0}function _i(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Oo(u,g){u.g?u.g.add(g):u.h=g}function Mo(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}No.prototype.cancel=function(){if(this.i=jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return P(u.i)}var yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let L,F=null;A>=0?(L=u[v].substring(0,A),F=u[v].substring(A+1)):L=u[v],g(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function gn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof gn?(this.l=u.l,kt(this,u.j),this.o=u.o,this.g=u.g,Cs(this,u.u),this.h=u.h,Vo(this,Tc(u.i)),this.m=u.m):u&&(g=String(u).match(yc))?(this.l=!1,kt(this,g[1]||"",!0),this.o=vi(g[2]||""),this.g=vi(g[3]||"",!0),Cs(this,g[4]),this.h=vi(g[5]||"",!0),Vo(this,g[6]||"",!0),this.m=vi(g[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}gn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(jr(g,ba,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(jr(g,ba,!0),"@"),u.push(Yi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(jr(v,v.charAt(0)=="/"?ko:_c,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",jr(v,vc)),u.join("")},gn.prototype.resolve=function(u){const g=wt(this);let v=!!u.j;v?kt(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var A=u.h;if(v)Cs(g,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let te=0;te<L.length;){const be=L[te++];be=="."?A&&te==L.length&&F.push(""):be==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&te==L.length&&F.push("")):(F.push(be),A=!0)}A=F.join("/")}else A=L}return v?g.h=A:v=u.i.toString()!=="",v?Vo(g,Tc(u.i)):v=!!u.m,v&&(g.m=u.m),g};function wt(u){return new gn(u)}function kt(u,g,v){u.j=v?vi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Cs(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Vo(u,g,v){g instanceof Is?(u.i=g,wa(u.i,u.l)):(v||(g=jr(g,xs)),u.i=new Is(g,u.l))}function He(u,g,v){u.i.set(g,v)}function Mr(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function vi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jr(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,rn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ba=/[#\/\?@]/g,_c=/[#\?:]/g,ko=/[#\?]/g,xs=/[#\?@]/g,vc=/#/g;function Is(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}s=Is.prototype,s.add=function(u,g){an(this),this.i=null,u=Ns(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Ec(u,g){an(u),g=Ns(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Lo(u,g){return an(u),g=Ns(u,g),u.g.has(g)}s.forEach=function(u,g){an(this),this.g.forEach(function(v,A){v.forEach(function(L){u.call(g,L,A,this)},this)},this)};function Po(u,g){an(u);let v=[];if(typeof g=="string")Lo(u,g)&&(v=v.concat(u.g.get(Ns(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}s.set=function(u,g){return an(this),this.i=null,u=Ns(this,u),Lo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=Po(this,u),u.length>0?String(u[0]):g):g};function Aa(u,g,v){Ec(u,g),v.length>0&&(u.i=null,u.g.set(Ns(u,g),P(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var v=g[A];const L=Yi(v);v=Po(this,v);for(let F=0;F<v.length;F++){let te=L;v[F]!==""&&(te+="="+Yi(v[F])),u.push(te)}}return this.i=u.join("&")};function Tc(u){const g=new Is;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Ns(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function wa(u,g){g&&!u.j&&(an(u),u.i=null,u.g.forEach(function(v,A){const L=A.toLowerCase();A!=L&&(Ec(this,A),Aa(this,L,v))},u)),u.j=g}function Gn(u,g){const v=new qn;if(f.Image){const A=new Image;A.onload=T(In,v,"TestLoadImage: loaded",!0,g,A),A.onerror=T(In,v,"TestLoadImage: error",!1,g,A),A.onabort=T(In,v,"TestLoadImage: abort",!1,g,A),A.ontimeout=T(In,v,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function Uo(u,g){const v=new qn,A=new AbortController,L=setTimeout(()=>{A.abort(),In(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?In(v,"TestPingServer: ok",!0,g):In(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),In(v,"TestPingServer: error",!1,g)})}function In(u,g,v,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(v)}catch{}}function Ds(){this.g=new Ut}function Ei(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Ei,Ki),Ei.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(u,g){ht.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Vr,ht),s=Vr.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Qn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Os(this):Qn(this),this.readyState==3&&Sa(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Os(this))},s.Na=function(u){this.g&&(this.response=u,Os(this))},s.ga=function(){this.g&&Os(this)};function Os(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Qn(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nn(u){let g="";return ve(u,function(v,A){g+=A,g+=":",g+=v,g+=`\r
`}),g}function kr(u,g,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Nn(v),typeof u=="string"?v!=null&&Yi(v):He(u,g,v))}function Ye(u){ht.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Ye,ht);var Ti=/^https?$/i,zo=["POST","PUT"];s=Ye.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Io.g(),this.g.onreadystatechange=C(E(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){Lr(this,F);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)v.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())v.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(zo,g,void 0)>=0)||A||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,te]of v)this.g.setRequestHeader(F,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){Lr(this,F)}};function Lr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Bo(u),Xi(u)}function Bo(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Et(this,"complete"),Et(this,"abort"),Xi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Ye.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Pr(this):this.Xa())},s.Xa=function(){Pr(this)};function Pr(u){if(u.h&&typeof c<"u"){if(u.v&&Kn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Et(u,"readystatechange"),Kn(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var A;if(A=F===0){let te=String(u.D).match(yc)[1]||null;!te&&f.self&&f.self.location&&(te=f.self.location.protocol.slice(0,-1)),A=!Ti.test(te?te.toLowerCase():"")}v=A}if(v)Et(u,"complete"),Et(u,"success");else{u.o=6;try{var L=Kn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Bo(u)}}finally{Xi(u)}}}}function Xi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||Et(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Kn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ge(g)}};function zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(u){const g={};u=(u.g&&Kn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(R(u[A]))continue;var v=mc(u[A]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=g[L]||[];g[L]=F,F.push(v)}Re(g,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Ms(u){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,u),this.Za=bi("retryDelaySeedMs",1e4,u),this.Ta=bi("forwardChannelMaxRetries",2,u),this.va=bi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new No(u&&u.concurrentRequestLimit),this.Ba=new Ds,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ms.prototype,s.ka=8,s.I=1,s.connect=function(u,g,v,A){Tt(0),this.W=u,this.H=g||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=xc(this,null,this.W),Ai(this)};function qo(u){if(Ra(u),u.I==3){var g=u.V++,v=wt(u.J);if(He(v,"SID",u.M),He(v,"RID",g),He(v,"TYPE","terminate"),Ur(u,v),g=new Fn(u,u.j,g),g.M=2,g.A=Mr(wt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=g.A,v=!0),v||(g.g=Ic(g.j,null),g.g.ea(g.A)),g.F=Date.now(),mi(g)}Cc(u)}function js(u){u.g&&(Ho(u),u.g.cancel(),u.g=null)}function Ra(u){js(u),u.v&&(f.clearTimeout(u.v),u.v=null),xa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ai(u){if(!Do(u.h)&&!u.m){u.m=!0;var g=u.Ea;ee||S(),le||(ee(),le=!0),D.add(g,u),u.D=0}}function Ca(u,g){return yi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=hi(E(u.Ea,u,g),Rc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Fn(this,this.j,u);let F=this.o;if(this.U&&(F?(F=Ke(F),we(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=bc(this,L,g),v=wt(this.J),He(v,"RID",u),He(v,"CVER",22),this.G&&He(v,"X-HTTP-Session-Id",this.G),Ur(this,v),F&&(this.R?g="headers="+Yi(Nn(F))+"&"+g:this.u&&kr(v,this.u,F)),Oo(this.h,L),this.Ra&&He(v,"TYPE","init"),this.S?(He(v,"$req",g),He(v,"SID","null"),L.U=!0,di(L,v,null)):di(L,v,g),this.I=2}}else this.I==3&&(u?Fo(this,u):this.i.length==0||Do(this.h)||Fo(this))};function Fo(u,g){var v;g?v=g.l:v=u.V++;const A=wt(u.J);He(A,"SID",u.M),He(A,"RID",v),He(A,"AID",u.K),Ur(u,A),u.u&&u.o&&kr(A,u.u,u.o),v=new Fn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=bc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Oo(u.h,v),di(v,A,g)}function Ur(u,g){u.H&&ve(u.H,function(v,A){He(g,A,v)}),u.l&&ve({},function(v,A){He(g,A,v)})}function bc(u,g,v){v=Math.min(u.i.length,v);const A=u.l?E(u.l.Ka,u.l,u):null;e:{var L=u.i;let be=-1;for(;;){const mt=["count="+v];be==-1?v>0?(be=L[0].g,mt.push("ofs="+be)):be=0:mt.push("ofs="+be);let ze=!0;for(let rt=0;rt<v;rt++){var F=L[rt].g;const Dn=L[rt].map;if(F-=be,F<0)be=Math.max(0,L[rt].g-100),ze=!1;else try{F="req"+F+"_"||"";try{var te=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Si,Yn]of te){let Xn=Yn;p(Yn)&&(Xn=ce(Yn)),mt.push(F+Si+"="+encodeURIComponent(Xn))}}catch(Si){throw mt.push(F+"type="+encodeURIComponent("_badmap")),Si}}catch{A&&A(Dn)}}if(ze){te=mt.join("&");break e}}te=void 0}return u=u.i.splice(0,v),g.G=u,te}function Ac(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ee||S(),le||(ee(),le=!0),D.add(g,u),u.A=0}}function zr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=hi(E(u.Da,u),Rc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=hi(E(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),js(this),wc(this))};function Ho(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function wc(u){u.g=new Fn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=wt(u.na);He(g,"RID","rpc"),He(g,"SID",u.M),He(g,"AID",u.K),He(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(g,"TO",u.ia),He(g,"TYPE","xmlhttp"),Ur(u,g),u.u&&u.o&&kr(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Mr(wt(g)),v.u=null,v.R=!0,va(v,u)}s.Va=function(){this.C!=null&&(this.C=null,js(this),zr(this),Tt(19))};function xa(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Sc(u,g){var v=null;if(u.g==g){xa(u),Ho(u),u.g=null;var A=2}else if(_i(u.h,g))v=g.G,Mo(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;A=_a(),Et(A,new ui(A,v)),Ai(u)}else Ac(u);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&Ca(u,g)||A==2&&zr(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),L){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Rc(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function wi(u,g){if(u.j.info("Error code "+g),g==2){var v=E(u.bb,u),A=u.Ua;const L=!A;A=new gn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||kt(A,"https"),Mr(A),L?Gn(A.toString(),v):Uo(A.toString(),v)}else Tt(2);u.I=0,u.l&&u.l.pa(g),Cc(u),Ra(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Cc(u){if(u.I=0,u.ja=[],u.l){const g=jo(u.h);(g.length!=0||u.i.length!=0)&&(K(u.ja,g),K(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function xc(u,g,v){var A=v instanceof gn?wt(v):new gn(v);if(A.g!="")g&&(A.g=g+"."+A.g),Cs(A,A.u);else{var L=f.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const F=new gn(null);A&&kt(F,A),g&&(F.g=g),L&&Cs(F,L),v&&(F.h=v),A=F}return v=u.G,g=u.wa,v&&g&&He(A,v,g),He(A,"VER",u.ka),Ur(u,A),A}function Ic(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Ye(new Ei({ab:v})):new Ye(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}s=Nc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Vs(){}Vs.prototype.g=function(u,g){return new tn(u,g)};function tn(u,g){ht.call(this),this.g=new Ms(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!R(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Wi(this)}w(tn,ht),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){qo(this.g)},tn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ce(u),u=v);g.i.push(new At(g.Ya++,u)),g.I==3&&Ai(g)},tn.prototype.N=function(){this.g.l=null,delete this.j,qo(this.g),delete this.g,tn.Z.N.call(this)};function Dc(u){dt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(Dc,dt);function Oc(){en.call(this),this.status=1}w(Oc,en);function Wi(u){this.g=u}w(Wi,Nc),Wi.prototype.ra=function(){Et(this.g,"a")},Wi.prototype.qa=function(u){Et(this.g,new Dc(u))},Wi.prototype.pa=function(u){Et(this.g,new Oc)},Wi.prototype.oa=function(){Et(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,K1=function(){return new Vs},Q1=function(){return _a()},G1=st,vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,Yu=Dr,xo.COMPLETE="complete",H1=xo,Rs.EventType=Jt,Jt.OPEN="a",Jt.CLOSE="b",Jt.ERROR="c",Jt.MESSAGE="d",ht.prototype.listen=ht.prototype.J,Dl=Rs,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,F1=Ye}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",qv="4.9.2";class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");let bo="12.3.0";const ha=new Bm("@firebase/firestore");function ro(){return ha.logLevel}function ae(s,...e){if(ha.logLevel<=Oe.DEBUG){const n=e.map(Zm);ha.debug(`Firestore (${bo}): ${s}`,...n)}}function Es(s,...e){if(ha.logLevel<=Oe.ERROR){const n=e.map(Zm);ha.error(`Firestore (${bo}): ${s}`,...n)}}function po(s,...e){if(ha.logLevel<=Oe.WARN){const n=e.map(Zm);ha.warn(`Firestore (${bo}): ${s}`,...n)}}function Zm(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function _e(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y1(s,r,n)}function Y1(s,e,n){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Es(r),new Error(r)}function qe(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||Y1(e,l,r)}function Te(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ys{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class X1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ER{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class TR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class bR{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ys,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ys)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new X1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class AR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new AR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const r=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function RR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=RR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function Me(s,e){return s<e?-1:s>e?1:0}function Em(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return rm(l)===rm(c)?Me(l,c):rm(l)?1:-1}return Me(s.length,e.length)}const CR=55296,xR=57343;function rm(s){const e=s.charCodeAt(0);return e>=CR&&e<=xR}function go(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}const Hv="__name__";class Ni{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Ni.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Me(e.length,n.length)}static compareSegments(e,n){const r=Ni.isNumericId(e),l=Ni.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ni.extractNumericId(e).compare(Ni.extractNumericId(n)):Em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fr.fromString(e.substring(4,e.length-2))}}class et extends Ni{construct(e,n,r){return new et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new et(n)}static emptyPath(){return new et([])}}const IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ni{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hv}static keyField(){return new Qt([Hv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new se($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(c(),l++)}if(c(),f)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(et.fromString(e))}static fromName(e){return new me(et.fromString(e).popFirst(5))}static empty(){return new me(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new et(e.slice()))}}function $1(s,e,n){if(!n)throw new se($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function NR(s,e,n,r){if(e===!0&&r===!0)throw new se($.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Gv(s){if(!me.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Qv(s){if(me.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function W1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Nh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function Rn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(s);throw new se($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Dt(s,e){const n={typeString:s};return e&&(n.value=e),n}function nc(s,e){if(!W1(s))throw new se($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new se($.INVALID_ARGUMENT,n);return!0}const Kv=-62135596800,Yv=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Yv);return new Ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kv)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yv}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Dt("string",Ze._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ze(0,0))}static max(){return new Ee(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hl=-1;function DR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ee.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new pr(l,me.empty(),e)}function OR(s){return new pr(s.readTime,s.key,Hl)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(Ee.min(),me.empty(),Hl)}static max(){return new pr(Ee.max(),me.empty(),Hl)}}function MR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(s.documentKey,e.documentKey),n!==0?n:Me(s.largestBatchId,e.largestBatchId))}const jR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ao(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==jR)throw s;ae("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(y=>r(y)))})),f=!0,c===l&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((l=>l?W.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,l)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next((T=>{f[E]=T,++p,p===c&&r(f)}),(T=>l(T)))}}))}static doWhile(e,n){return new W(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function kR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wo(s){return s.name==="IndexedDbTransactionError"}class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;const ep=-1;function Oh(s){return s==null}function ch(s){return s===0&&1/s==-1/0}function LR(s){return typeof s=="number"&&Number.isInteger(s)&&!ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Z1="";function PR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Xv(e)),e=UR(s.get(n),e);return Xv(e)}function UR(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case Z1:n+="";break;default:n+=c}}return n}function Xv(s){return s+Z1+""}function $v(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ar(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function J1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ot{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=l??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new Gt(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Gt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wv(this.data.getIterator())}getIteratorFrom(e){return new Wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Mt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class eE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new eE("Invalid base64 string: "+c):c}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(s){if(qe(!!s,39018),typeof s=="string"){let e=0;const n=zR.exec(s);if(qe(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(s.seconds),nanos:yt(s.nanos)}}function yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?Kt.fromBase64String(s):Kt.fromUint8Array(s)}const tE="server_timestamp",nE="__type__",iE="__previous_value__",sE="__local_write_time__";function tp(s){return(s?.mapValue?.fields||{})[nE]?.stringValue===tE}function Mh(s){const e=s.mapValue.fields[iE];return tp(e)?Mh(e):e}function Gl(s){const e=gr(s.mapValue.fields[sE].timestampValue);return new Ze(e.seconds,e.nanos)}class BR{constructor(e,n,r,l,c,f,p,y,E,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=E,this.isUsingEmulator=T}}const uh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||uh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===uh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}const rE="__type__",qR="__max__",zu={mapValue:{}},aE="__vector__",hh="value";function _r(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?tp(s)?4:HR(s)?9007199254740991:FR(s)?10:11:_e(28295,{value:s})}function Ui(s,e){if(s===e)return!0;const n=_r(s);if(n!==_r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Gl(s).isEqual(Gl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=gr(l.timestampValue),p=gr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return yr(l.bytesValue).isEqual(yr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return yt(l.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(l.geoPointValue.longitude)===yt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return yt(l.integerValue)===yt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=yt(l.doubleValue),p=yt(c.doubleValue);return f===p?ch(f)===ch(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return go(s.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if($v(f)!==$v(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Ui(f[y],p[y])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function Kl(s,e){return(s.values||[]).find((n=>Ui(n,e)))!==void 0}function yo(s,e){if(s===e)return 0;const n=_r(s),r=_r(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=yt(c.integerValue||c.doubleValue),y=yt(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return Zv(s.timestampValue,e.timestampValue);case 4:return Zv(Gl(s),Gl(e));case 5:return Em(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=yr(c),y=yr(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let E=0;E<p.length&&E<y.length;E++){const T=Me(p[E],y[E]);if(T!==0)return T}return Me(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Me(yt(c.latitude),yt(f.latitude));return p!==0?p:Me(yt(c.longitude),yt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Jv(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},E=p[hh]?.arrayValue,T=y[hh]?.arrayValue,w=Me(E?.values?.length||0,T?.values?.length||0);return w!==0?w:Jv(E,T)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===zu.mapValue&&f===zu.mapValue)return 0;if(c===zu.mapValue)return 1;if(f===zu.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),E=f.fields||{},T=Object.keys(E);y.sort(),T.sort();for(let w=0;w<y.length&&w<T.length;++w){const C=Em(y[w],T[w]);if(C!==0)return C;const P=yo(p[y[w]],E[T[w]]);if(P!==0)return P}return Me(y.length,T.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Zv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const n=gr(s),r=gr(e),l=Me(n.seconds,r.seconds);return l!==0?l:Me(n.nanos,r.nanos)}function Jv(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=yo(n[l],r[l]);if(c)return c}return Me(n.length,r.length)}function _o(s){return Tm(s)}function Tm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return me.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=Tm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${Tm(n.fields[f])}`;return l+"}"})(s.mapValue):_e(61005,{value:s})}function Xu(s){switch(_r(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(s);return e?16+Xu(e):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Xu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Ar(r.fields,((c,f)=>{l+=c.length+Xu(f)})),l})(s.mapValue);default:throw _e(13486,{value:s})}}function e0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function bm(s){return!!s&&"integerValue"in s}function np(s){return!!s&&"arrayValue"in s}function t0(s){return!!s&&"nullValue"in s}function n0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $u(s){return!!s&&"mapValue"in s}function FR(s){return(s?.mapValue?.fields||{})[rE]?.stringValue===aE}function Ll(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ar(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ll(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(s.arrayValue.values[n]);return e}return{...s}}function HR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===qR}class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=Qt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=Ll(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];$u(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Ar(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new dn(Ll(this.value))}}function oE(s){const e=[];return Ar(s.fields,((n,r)=>{const l=new Qt([n]);if($u(r)){const c=oE(r.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new Sn(e)}class $t{constructor(e,n,r,l,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new $t(e,0,Ee.min(),Ee.min(),Ee.min(),dn.empty(),0)}static newFoundDocument(e,n,r,l){return new $t(e,1,n,Ee.min(),r,l,0)}static newNoDocument(e,n){return new $t(e,2,n,Ee.min(),Ee.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Ee.min(),Ee.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fh{constructor(e,n){this.position=e,this.inclusive=n}}function i0(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?r=me.comparator(me.fromName(f.referenceValue),n.key):r=yo(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ui(s.position[n],e.position[n]))return!1;return!0}class dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function GR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class lE{}class Nt extends lE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KR(e,n,r):n==="array-contains"?new $R(e,r):n==="in"?new WR(e,r):n==="not-in"?new ZR(e,r):n==="array-contains-any"?new JR(e,r):new Nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YR(e,r):new XR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yo(n,this.value)):n!==null&&_r(this.value)===_r(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends lE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new si(e,n)}matches(e){return cE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cE(s){return s.op==="and"}function uE(s){return QR(s)&&cE(s)}function QR(s){for(const e of s.filters)if(e instanceof si)return!1;return!0}function Am(s){if(s instanceof Nt)return s.field.canonicalString()+s.op.toString()+_o(s.value);if(uE(s))return s.filters.map((e=>Am(e))).join(",");{const e=s.filters.map((n=>Am(n))).join(",");return`${s.op}(${e})`}}function hE(s,e){return s instanceof Nt?(function(r,l){return l instanceof Nt&&r.op===l.op&&r.field.isEqual(l.field)&&Ui(r.value,l.value)})(s,e):s instanceof si?(function(r,l){return l instanceof si&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,f,p)=>c&&hE(f,l.filters[p])),!0):!1})(s,e):void _e(19439)}function fE(s){return s instanceof Nt?(function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`})(s):s instanceof si?(function(n){return n.op.toString()+" {"+n.getFilters().map(fE).join(" ,")+"}"})(s):"Filter"}class KR extends Nt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class YR extends Nt{constructor(e,n){super(e,"in",n),this.keys=dE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XR extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=dE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function dE(s,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class $R extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&Kl(n.arrayValue,this.value)}}class WR extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class ZR extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kl(this.value.arrayValue,n)}}class JR extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Kl(this.value.arrayValue,r)))}}class eC{constructor(e,n=null,r=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function r0(s,e=null,n=[],r=[],l=null,c=null,f=null){return new eC(s,e,n,r,l,c,f)}function ip(s){const e=Te(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Am(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>_o(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>_o(r))).join(",")),e.Te=n}return e.Te}function sp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!GR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!hE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!s0(s.startAt,e.startAt)&&s0(s.endAt,e.endAt)}function wm(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ic{constructor(e,n=null,r=[],l=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tC(s,e,n,r,l,c,f,p){return new ic(s,e,n,r,l,c,f,p)}function jh(s){return new ic(s)}function a0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function mE(s){return s.collectionGroup!==null}function Pl(s){const e=Te(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Mt(Qt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((E=>{E.isInequality()&&(p=p.add(E.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new dh(c,r))})),n.has(Qt.keyField().canonicalString())||e.Ie.push(new dh(Qt.keyField(),r))}return e.Ie}function ji(s){const e=Te(s);return e.Ee||(e.Ee=nC(e,Pl(s))),e.Ee}function nC(s,e){if(s.limitType==="F")return r0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new dh(l.field,c)}));const n=s.endAt?new fh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new fh(s.startAt.position,s.startAt.inclusive):null;return r0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Sm(s,e){const n=s.filters.concat([e]);return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Rm(s,e,n){return new ic(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vh(s,e){return sp(ji(s),ji(e))&&s.limitType===e.limitType}function pE(s){return`${ip(ji(s))}|lt:${s.limitType}`}function ao(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>fE(l))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>_o(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>_o(l))).join(",")),`Target(${r})`})(ji(s))}; limitType=${s.limitType})`}function kh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Pl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const E=i0(f,p,y);return f.inclusive?E<=0:E<0})(r.startAt,Pl(r),l)||r.endAt&&!(function(f,p,y){const E=i0(f,p,y);return f.inclusive?E>=0:E>0})(r.endAt,Pl(r),l))})(s,e)}function iC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gE(s){return(e,n)=>{let r=!1;for(const l of Pl(s)){const c=sC(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function sC(s,e,n){const r=s.field.isKeyField()?me.comparator(e.key,n.key):(function(c,f,p){const y=f.data.field(c),E=p.data.field(c);return y!==null&&E!==null?yo(y,E):_e(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return J1(this.inner)}size(){return this.innerSize}}const rC=new ot(me.comparator);function Ts(){return rC}const yE=new ot(me.comparator);function Ol(...s){let e=yE;for(const n of s)e=e.insert(n.key,n);return e}function _E(s){let e=yE;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function sa(){return Ul()}function vE(){return Ul()}function Ul(){return new pa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const aC=new ot(me.comparator),oC=new Mt(me.comparator);function je(...s){let e=oC;for(const n of s)e=e.add(n);return e}const lC=new Mt(Me);function cC(){return lC}function rp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function EE(s){return{integerValue:""+s}}function uC(s,e){return LR(e)?EE(e):rp(s,e)}class Lh{constructor(){this._=void 0}}function hC(s,e,n){return s instanceof mh?(function(l,c){const f={fields:{[nE]:{stringValue:tE},[sE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&tp(c)&&(c=Mh(c)),c&&(f.fields[iE]=c),{mapValue:f}})(n,e):s instanceof Yl?bE(s,e):s instanceof Xl?AE(s,e):(function(l,c){const f=TE(l,c),p=o0(f)+o0(l.Ae);return bm(f)&&bm(l.Ae)?EE(p):rp(l.serializer,p)})(s,e)}function fC(s,e,n){return s instanceof Yl?bE(s,e):s instanceof Xl?AE(s,e):n}function TE(s,e){return s instanceof ph?(function(r){return bm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class mh extends Lh{}class Yl extends Lh{constructor(e){super(),this.elements=e}}function bE(s,e){const n=wE(e);for(const r of s.elements)n.some((l=>Ui(l,r)))||n.push(r);return{arrayValue:{values:n}}}class Xl extends Lh{constructor(e){super(),this.elements=e}}function AE(s,e){let n=wE(e);for(const r of s.elements)n=n.filter((l=>!Ui(l,r)));return{arrayValue:{values:n}}}class ph extends Lh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function o0(s){return yt(s.integerValue||s.doubleValue)}function wE(s){return np(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function dC(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Yl&&l instanceof Yl||r instanceof Xl&&l instanceof Xl?go(r.elements,l.elements,Ui):r instanceof ph&&l instanceof ph?Ui(r.Ae,l.Ae):r instanceof mh&&l instanceof mh})(s.transform,e.transform)}class mC{constructor(e,n){this.version=e,this.transformResults=n}}class ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ph{}function SE(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new CE(s.key,ni.none()):new sc(s.key,s.data,ni.none());{const n=s.data,r=dn.empty();let l=new Mt(Qt.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new wr(s.key,r,new Sn(l.toArray()),ni.none())}}function pC(s,e,n){s instanceof sc?(function(l,c,f){const p=l.value.clone(),y=c0(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof wr?(function(l,c,f){if(!Wu(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=c0(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(RE(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function zl(s,e,n,r){return s instanceof sc?(function(c,f,p,y){if(!Wu(c.precondition,f))return p;const E=c.value.clone(),T=u0(c.fieldTransforms,y,f);return E.setAll(T),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null})(s,e,n,r):s instanceof wr?(function(c,f,p,y){if(!Wu(c.precondition,f))return p;const E=u0(c.fieldTransforms,y,f),T=f.data;return T.setAll(RE(c)),T.setAll(E),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(c,f,p){return Wu(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function gC(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=TE(r.transform,l||null);c!=null&&(n===null&&(n=dn.empty()),n.set(r.field,c))}return n||null}function l0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&go(r,l,((c,f)=>dC(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class sc extends Ph{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class wr extends Ph{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function RE(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function c0(s,e,n){const r=new Map;qe(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);r.set(c.field,fC(f,p,n[l]))}return r}function u0(s,e,n){const r=new Map;for(const l of s){const c=l.transform,f=n.data.field(l.field);r.set(l.field,hC(c,f,e))}return r}class CE extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yC extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _C{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&pC(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vE();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const y=SE(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((n,r)=>l0(n,r)))&&go(this.baseMutations,e.baseMutations,((n,r)=>l0(n,r)))}}class ap{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return aC})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new ap(e,n,r,l)}}class vC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EC{constructor(e,n){this.count=e,this.unchangedNames=n}}var It,ke;function TC(s){switch(s){case $.OK:return _e(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function xE(s){if(s===void 0)return Es("GRPC error has no .code"),$.UNKNOWN;switch(s){case It.OK:return $.OK;case It.CANCELLED:return $.CANCELLED;case It.UNKNOWN:return $.UNKNOWN;case It.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case It.INTERNAL:return $.INTERNAL;case It.UNAVAILABLE:return $.UNAVAILABLE;case It.UNAUTHENTICATED:return $.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case It.NOT_FOUND:return $.NOT_FOUND;case It.ALREADY_EXISTS:return $.ALREADY_EXISTS;case It.PERMISSION_DENIED:return $.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case It.ABORTED:return $.ABORTED;case It.OUT_OF_RANGE:return $.OUT_OF_RANGE;case It.UNIMPLEMENTED:return $.UNIMPLEMENTED;case It.DATA_LOSS:return $.DATA_LOSS;default:return _e(39323,{code:s})}}(ke=It||(It={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";function bC(){return new TextEncoder}const AC=new fr([4294967295,4294967295],0);function h0(s){const e=bC().encode(s),n=new q1;return n.update(e),new Uint8Array(n.digest())}function f0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new fr([n,r],0),new fr([l,c],0)]}class op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(fr.fromNumber(r)));return l.compare(AC)===1&&(l=new fr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=h0(e),[r,l]=f0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new op(c,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=h0(e),[r,l]=f0(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uh{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uh(Ee.min(),l,new ot(Me),Ts(),je())}}class rc{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rc(r,n,je(),je(),je())}}class Zu{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class IE{constructor(e,n){this.targetId=e,this.Ce=n}}class NE{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class d0{constructor(){this.ve=0,this.Fe=m0(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),r=je();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:_e(38017,{changeType:c})}})),new rc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=m0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Bu(),this.He=Bu(),this.Ye=new ot(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(wm(c))if(r===0){const f=new me(c.path);this.et(n,f,$t.newNoDocument(f,Ee.min()))}else qe(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=yr(r).toUint8Array()}catch(y){if(y instanceof eE)return po("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new op(f,l,c)}catch(y){return po(y instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&wm(p.target)){const y=new me(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,$t.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=je();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const E=this.ot(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new Uh(e,n,this.Ye,this.je,r);return this.je=Ts(),this.Je=Bu(),this.He=Bu(),this.Ye=new ot(Me),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new d0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mt(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mt(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d0),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bu(){return new ot(me.comparator)}function m0(){return new ot(me.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},RC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CC={and:"AND",or:"OR"};class xC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cm(s,e){return s.useProto3Json||Oh(e)?e:{value:e}}function gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function IC(s,e){return gh(s,e.toTimestamp())}function Vi(s){return qe(!!s,49232),Ee.fromTimestamp((function(n){const r=gr(n);return new Ze(r.seconds,r.nanos)})(s))}function lp(s,e){return xm(s,e).canonicalString()}function xm(s,e){const n=(function(l){return new et(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function OE(s){const e=et.fromString(s);return qe(LE(e),10190,{key:e.toString()}),e}function Im(s,e){return lp(s.databaseId,e.path)}function am(s,e){const n=OE(e);if(n.get(1)!==s.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new me(jE(n))}function ME(s,e){return lp(s.databaseId,e)}function NC(s){const e=OE(s);return e.length===4?et.emptyPath():jE(e)}function Nm(s){return new et(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function jE(s){return qe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function p0(s,e,n){return{name:Im(s,e),fields:n.value.mapValue.fields}}function DC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:_e(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(E,T){return E.useProto3Json?(qe(T===void 0||typeof T=="string",58123),Kt.fromBase64String(T||"")):(qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Kt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(E){const T=E.code===void 0?$.UNKNOWN:xE(E.code);return new se(T,E.message||"")})(f);n=new NE(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=am(s,r.document.name),c=Vi(r.document.updateTime),f=r.document.createTime?Vi(r.document.createTime):Ee.min(),p=new dn({mapValue:{fields:r.document.fields}}),y=$t.newFoundDocument(l,c,f,p),E=r.targetIds||[],T=r.removedTargetIds||[];n=new Zu(E,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=am(s,r.document),c=r.readTime?Vi(r.readTime):Ee.min(),f=$t.newNoDocument(l,c),p=r.removedTargetIds||[];n=new Zu([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=am(s,r.document),c=r.removedTargetIds||[];n=new Zu([],c,l,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new EC(l,c),p=r.targetId;n=new IE(p,f)}}return n}function OC(s,e){let n;if(e instanceof sc)n={update:p0(s,e.key,e.value)};else if(e instanceof CE)n={delete:Im(s,e.key)};else if(e instanceof wr)n={update:p0(s,e.key,e.data),updateMask:BC(e.fieldMask)};else{if(!(e instanceof yC))return _e(16599,{Vt:e.type});n={verify:Im(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof mh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Yl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ph)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:IC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)})(s,e.precondition)),n}function MC(s,e){return s&&s.length>0?(qe(e!==void 0,14353),s.map((n=>(function(l,c){let f=l.updateTime?Vi(l.updateTime):Vi(c);return f.isEqual(Ee.min())&&(f=Vi(c)),new mC(f,l.transformResults||[])})(n,e)))):[]}function jC(s,e){return{documents:[ME(s,e.path)]}}function VC(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ME(s,l);const c=(function(E){if(E.length!==0)return kE(si.create(E,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(E){if(E.length!==0)return E.map((T=>(function(C){return{field:oo(C.field),direction:PC(C.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Cm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:l}}function kC(s){let e=NC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){qe(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const C=VE(w);return C instanceof si&&uE(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((C=>(function(K){return new dh(lo(K.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(C)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let C;return C=typeof w=="object"?w.value:w,Oh(C)?null:C})(n.limit));let y=null;n.startAt&&(y=(function(w){const C=!!w.before,P=w.values||[];return new fh(P,C)})(n.startAt));let E=null;return n.endAt&&(E=(function(w){const C=!w.before,P=w.values||[];return new fh(P,C)})(n.endAt)),tC(e,l,f,c,p,"F",y,E)}function LC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VE(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lo(n.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=lo(n.unaryFilter.field);return Nt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=lo(n.unaryFilter.field);return Nt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=lo(n.unaryFilter.field);return Nt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Nt.create(lo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return si.create(n.compositeFilter.filters.map((r=>VE(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(s):_e(30097,{filter:s})}function PC(s){return SC[s]}function UC(s){return RC[s]}function zC(s){return CC[s]}function oo(s){return{fieldPath:s.canonicalString()}}function lo(s){return Qt.fromServerFormat(s.fieldPath)}function kE(s){return s instanceof Nt?(function(n){if(n.op==="=="){if(n0(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(t0(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n0(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(t0(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:UC(n.op),value:n.value}}})(s):s instanceof si?(function(n){const r=n.getFilters().map((l=>kE(l)));return r.length===1?r[0]:{compositeFilter:{op:zC(n.op),filters:r}}})(s):_e(54877,{filter:s})}function BC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LE(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class cr{constructor(e,n,r,l,c=Ee.min(),f=Ee.min(),p=Kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qC{constructor(e){this.yt=e}}function FC(s){const e=kC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Rm(e,e.limit,"L"):e}class HC{constructor(){this.Cn=new GC}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(pr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class GC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Mt(et.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Mt(et.comparator)).toArray()}}const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PE=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(PE,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vo(0)}static cr(){return new vo(-1)}}const y0="LruGarbageCollector",QC=1048576;function _0([s,e],[n,r]){const l=Me(s,n);return l===0?Me(e,r):l}class KC{constructor(e){this.Ir=e,this.buffer=new Mt(_0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wo(n)?ae(y0,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)}))}}class XC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Dh.ce);const r=new KC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(g0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,f,p,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(c=w,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(E=Date.now(),ro()<=Oe.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${w} documents in `+(E-y)+`ms
Total Duration: ${E-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function $C(s,e){return new XC(s,e)}class WC{constructor(){this.changes=new pa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&zl(r.mutation,l,Sn.empty(),Ze.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=je()){const l=sa();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let f=Ol();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=sa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,je())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let c=Ts();const f=Ul(),p=(function(){return Ul()})();return n.forEach(((y,E)=>{const T=r.get(E.key);l.has(E.key)&&(T===void 0||T.mutation instanceof wr)?c=c.insert(E.key,E):T!==void 0?(f.set(E.key,T.mutation.getFieldMask()),zl(T.mutation,E,T.mutation.getFieldMask(),Ze.now())):f.set(E.key,Sn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((E,T)=>f.set(E,T))),n.forEach(((E,T)=>p.set(E,new ZC(T,f.get(E)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Ul();let l=new ot(((f,p)=>f-p)),c=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const E=n.get(y);if(E===null)return;let T=r.get(y)||Sn.empty();T=p.applyToLocalView(E,T),r.set(y,T);const w=(l.get(p.batchId)||je()).add(y);l=l.insert(p.batchId,w)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),E=y.key,T=y.value,w=vE();T.forEach((C=>{if(!c.has(C)){const P=SE(n.get(C),r.get(C));P!==null&&w.set(C,P),c=c.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,E,w))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):W.resolve(sa());let p=Hl,y=c;return f.next((E=>W.forEach(E,((T,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{y=y.insert(T,C)}))))).next((()=>this.populateOverlays(e,E,c))).next((()=>this.computeViews(e,y,E,je()))).next((T=>({batchId:p,changes:_E(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((r=>{let l=Ol();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let f=Ol();return this.indexManager.getCollectionParents(e,c).next((p=>W.forEach(p,(y=>{const E=(function(w,C){return new ic(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,r,l).next((T=>{T.forEach(((w,C)=>{f=f.insert(w,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((f=>{c.forEach(((y,E)=>{const T=E.getKey();f.get(T)===null&&(f=f.insert(T,$t.newInvalidDocument(T)))}));let p=Ol();return f.forEach(((y,E)=>{const T=c.get(y);T!==void 0&&zl(T.mutation,E,Sn.empty(),Ze.now()),kh(n,E)&&(p=p.insert(y,E))})),p}))}}class ex{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Vi(l.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:FC(l.bundledQuery),readTime:Vi(l.readTime)}})(n)),W.resolve()}}class tx{constructor(){this.overlays=new ot(me.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sa();return W.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const l=sa(),c=n.length+1,f=new me(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return W.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new ot(((E,T)=>E-T));const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>r){let T=c.get(E.largestBatchId);T===null&&(T=sa(),c=c.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const p=sa(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((E,T)=>p.set(E,T))),!(p.size()>=l)););return W.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new vC(n,r));let c=this.qr.get(n);c===void 0&&(c=je(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}class nx{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class cp{constructor(){this.Qr=new Mt(Pt.$r),this.Ur=new Mt(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new me(new et([])),r=new Pt(n,e),l=new Pt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new et([])),r=new Pt(n,e),l=new Pt(n,e+1);let c=je();return this.Ur.forEachInRange([r,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}class ix{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Pt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new _C(c,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Pt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return W.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),l=new Pt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),W.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Me);return n.forEach((l=>{const c=new Pt(l,0),f=new Pt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const f=new Pt(new me(c),0);let p=new Mt(Me);return this.Zr.forEachWhile((y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===l&&(p=p.add(y.Yr)),!0)}),f),W.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(n.mutations,(l=>{const c=new Pt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Pt(n,0),l=this.Zr.firstAfterOrEqual(r);return W.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class sx{constructor(e){this.ri=e,this.docs=(function(){return new ot(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():$t.newInvalidDocument(l))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=Ts();const f=n.path,p=new me(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:E,value:{document:T}}=y.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||MR(OR(T),r)<=0||(l.has(T.key)||kh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return W.resolve(c)}getAllFromCollectionGroup(e,n,r,l){_e(9500)}ii(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new rx(this)}getSize(e){return W.resolve(this.size)}}class rx extends WC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ax{constructor(e){this.persistence=e,this.si=new pa((n=>ip(n)),sp),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new cp,this.targetCount=0,this.ai=vo.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),W.waitFor(c).next((()=>l))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),W.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}class UE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new nx,this.referenceDelegate=e(this),this.Pi=new ax(this),this.indexManager=new HC,this.remoteDocumentCache=(function(l){return new sx(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new qC(n),this.Ii=new ex(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ix(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const l=new ox(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ox extends VR{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new cp,this.Vi=null}static mi(e){return new up(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ee.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new pa((r=>PR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=$C(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?W.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,c.removeEntry(f,Ee.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xu(e.data.value)),n}br(e,n,r){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return W.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hp{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=je(),l=je();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new hp(e,n.fromCache,r,l)}}class lx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Pb()?8:kR(Wt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new lx;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(ro()<=Oe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(ro()<=Oe.DEBUG&&ae("QueryEngine","Query:",ao(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(ro()<=Oe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):W.resolve())}ys(e,n){if(a0(n))return W.resolve(null);let r=ji(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Rm(n,null,"F"),r=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=je(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const E=this.Ds(n,p);return this.Cs(n,E,f,y.readTime)?this.ys(e,Rm(n,null,"F")):this.vs(e,E,n,y)}))))})))))}ws(e,n,r,l){return a0(n)||l.isEqual(Ee.min())?W.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,l)?W.resolve(null):(ro()<=Oe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ao(n)),this.vs(e,f,n,DR(l,Hl)).next((p=>p)))}))}Ds(e,n){let r=new Mt(gE(e));return n.forEach(((l,c)=>{kh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return ro()<=Oe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ao(n)),this.ps.getDocumentsMatchingQuery(e,n,pr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const fp="LocalStore",ux=3e8;class hx{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ot(Me),this.xs=new pa((c=>ip(c)),sp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function fx(s,e,n,r){return new hx(s,e,n,r)}async function zE(s,e){const n=Te(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=je();for(const E of l){f.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of c){p.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((E=>({Ls:E,removedBatchIds:f,addedBatchIds:p})))}))}))}function dx(s,e){const n=Te(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,E,T){const w=E.batch,C=w.keys();let P=W.resolve();return C.forEach((K=>{P=P.next((()=>T.getEntry(y,K))).next((Z=>{const k=E.docVersions.get(K);qe(k!==null,48541),Z.version.compareTo(k)<0&&(w.applyToRemoteDocument(Z,E),Z.isValidDocument()&&(Z.setReadTime(E.commitVersion),T.addEntry(Z)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(y,w)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=je();for(let E=0;E<p.mutationResults.length;++E)p.mutationResults[E].transformResults.length>0&&(y=y.add(p.batch.mutations[E].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function BE(s){const e=Te(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function mx(s,e){const n=Te(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,w)=>{const C=l.get(w);if(!C)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let P=C.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(Kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),l=l.insert(w,P),(function(Z,k,U){return Z.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=ux?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(C,P,T)&&p.push(n.Pi.updateTargetData(c,P))}));let y=Ts(),E=je();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(px(c,f,e.documentUpdates).next((T=>{y=T.ks,E=T.qs}))),!r.isEqual(Ee.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return W.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,E))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function px(s,e,n){let r=je(),l=je();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=Ts();return n.forEach(((p,y)=>{const E=c.get(p);y.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ee.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):ae(fp,"Ignoring outdated watch update for ",p,". Current version:",E.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function gx(s,e){const n=Te(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ep),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function yx(s,e){const n=Te(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,W.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new cr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Dm(s,e,n){const r=Te(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!wo(f))throw f;ae(fp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function v0(s,e,n){const r=Te(s);let l=Ee.min(),c=je();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,E,T){const w=Te(y),C=w.xs.get(T);return C!==void 0?W.resolve(w.Ms.get(C)):w.Pi.getTargetData(E,T)})(r,f,ji(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:Ee.min(),n?c:je()))).next((p=>(_x(r,iC(e),p),{documents:p,Qs:c})))))}function _x(s,e,n){let r=s.Os.get(e)||Ee.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class E0{constructor(){this.activeTargetIds=cC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vx{constructor(){this.Mo=new E0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new E0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ex{Oo(e){}shutdown(){}}const T0="ConnectivityMonitor";class b0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(T0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(T0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qu=null;function Om(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}const om="RestConnection",Tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===uh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const f=Om(),p=this.zo(e,n.toUriEncodedString());ae(om,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:E}=new URL(p),T=da(E);return this.Jo(e,p,y,r,T).then((w=>(ae(om,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw po(om,`RPC '${e}' ${f} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,l,c,f){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=Tx[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Ax{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Yt="WebChannelConnection";class wx extends bx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const f=Om();return new Promise(((p,y)=>{const E=new F1;E.setWithCredentials(!0),E.listenOnce(H1.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Yu.NO_ERROR:const w=E.getResponseJson();ae(Yt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),p(w);break;case Yu.TIMEOUT:ae(Yt,`RPC '${e}' ${f} timed out`),y(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const C=E.getStatus();if(ae(Yt,`RPC '${e}' ${f} failed with status:`,C,"response text:",E.getResponseText()),C>0){let P=E.getResponseJson();Array.isArray(P)&&(P=P[0]);const K=P?.error;if(K&&K.status&&K.message){const Z=(function(U){const oe=U.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(oe)>=0?oe:$.UNKNOWN})(K.status);y(new se(Z,K.message))}else y(new se($.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new se($.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{ae(Yt,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(l);ae(Yt,`RPC '${e}' ${f} sending request:`,l),E.send(n,"POST",T,r,15)}))}T_(e,n,r){const l=Om(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=K1(),p=Q1(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");ae(Yt,`Creating RPC '${e}' stream ${l}: ${T}`,y);const w=f.createWebChannel(T,y);this.I_(w);let C=!1,P=!1;const K=new Ax({Yo:k=>{P?ae(Yt,`Not sending because RPC '${e}' stream ${l} is closed:`,k):(C||(ae(Yt,`Opening RPC '${e}' stream ${l} transport.`),w.open(),C=!0),ae(Yt,`RPC '${e}' stream ${l} sending:`,k),w.send(k))},Zo:()=>w.close()}),Z=(k,U,oe)=>{k.listen(U,(J=>{try{oe(J)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return Z(w,Dl.EventType.OPEN,(()=>{P||(ae(Yt,`RPC '${e}' stream ${l} transport opened.`),K.o_())})),Z(w,Dl.EventType.CLOSE,(()=>{P||(P=!0,ae(Yt,`RPC '${e}' stream ${l} transport closed`),K.a_(),this.E_(w))})),Z(w,Dl.EventType.ERROR,(k=>{P||(P=!0,po(Yt,`RPC '${e}' stream ${l} transport errored. Name:`,k.name,"Message:",k.message),K.a_(new se($.UNAVAILABLE,"The operation could not be completed")))})),Z(w,Dl.EventType.MESSAGE,(k=>{if(!P){const U=k.data[0];qe(!!U,16349);const oe=U,J=oe?.error||oe[0]?.error;if(J){ae(Yt,`RPC '${e}' stream ${l} received error:`,J);const ie=J.status;let ee=(function(S){const I=It[S];if(I!==void 0)return xE(I)})(ie),le=J.message;ee===void 0&&(ee=$.INTERNAL,le="Unknown error status: "+ie+" with message "+J.message),P=!0,K.a_(new se(ee,le)),w.close()}else ae(Yt,`RPC '${e}' stream ${l} received:`,U),K.u_(U)}})),Z(p,G1.STAT_EVENT,(k=>{k.stat===vm.PROXY?ae(Yt,`RPC '${e}' stream ${l} detected buffering proxy`):k.stat===vm.NOPROXY&&ae(Yt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function lm(){return typeof document<"u"?document:null}function zh(s){return new xC(s,!0)}class qE{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const A0="PersistentStream";class FE{constructor(e,n,r,l,c,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new se($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(A0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ae(A0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sx extends FE{constructor(e,n,r,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=DC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ee.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ee.min():f.readTime?Vi(f.readTime):Ee.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nm(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=wm(y)?{documents:jC(c,y)}:{query:VC(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=DE(c,f.resumeToken);const E=Cm(c,f.expectedCount);E!==null&&(p.expectedCount=E)}else if(f.snapshotVersion.compareTo(Ee.min())>0){p.readTime=gh(c,f.snapshotVersion.toTimestamp());const E=Cm(c,f.expectedCount);E!==null&&(p.expectedCount=E)}return p})(this.serializer,e);const r=LC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.q_(n)}}class Rx extends FE{constructor(e,n,r,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=MC(e.writeResults,e.commitTime),r=Vi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>OC(this.serializer,r)))};this.q_(n)}}class Cx{}class xx extends Cx{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,xm(n,r),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se($.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,xm(n,r),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new se($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fa="RemoteStore";class Nx{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ga(this)&&(ae(fa,"Restarting streams for network reachability change."),await(async function(y){const E=Te(y);E.Ea.add(4),await ac(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Bh(E)})(this))}))})),this.Ra=new Ix(r,l)}}async function Bh(s){if(ga(s))for(const e of s.da)await e(!0)}async function ac(s){for(const e of s.da)await e(!1)}function HE(s,e){const n=Te(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gp(n)?pp(n):So(n).O_()&&mp(n,e))}function dp(s,e){const n=Te(s),r=So(n);n.Ia.delete(e),r.O_()&&GE(n,e),n.Ia.size===0&&(r.O_()?r.L_():ga(n)&&n.Ra.set("Unknown"))}function mp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(s).Y_(e)}function GE(s,e){s.Va.Ue(e),So(s).Z_(e)}function pp(s){s.Va=new wC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),So(s).start(),s.Ra.ua()}function gp(s){return ga(s)&&!So(s).x_()&&s.Ia.size>0}function ga(s){return Te(s).Ea.size===0}function QE(s){s.Va=void 0}async function Dx(s){s.Ra.set("Online")}async function Ox(s){s.Ia.forEach(((e,n)=>{mp(s,e)}))}async function Mx(s,e){QE(s),gp(s)?(s.Ra.ha(e),pp(s)):s.Ra.set("Unknown")}async function jx(s,e,n){if(s.Ra.set("Online"),e instanceof NE&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){ae(fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(s,r)}else if(e instanceof Zu?s.Va.Ze(e):e instanceof IE?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ee.min()))try{const r=await BE(s.localStore);n.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(E);T&&c.Ia.set(E,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,E)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Kt.EMPTY_BYTE_STRING,T.snapshotVersion)),GE(c,y);const w=new cr(T.target,y,E,T.sequenceNumber);mp(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ae(fa,"Failed to raise snapshot:",r),await _h(s,r)}}async function _h(s,e,n){if(!wo(e))throw e;s.Ea.add(1),await ac(s),s.Ra.set("Offline"),n||(n=()=>BE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ae(fa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Bh(s)}))}function KE(s,e){return e().catch((n=>_h(s,n,e)))}async function qh(s){const e=Te(s),n=vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;Vx(e);)try{const l=await gx(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,kx(e,l)}catch(l){await _h(e,l)}YE(e)&&XE(e)}function Vx(s){return ga(s)&&s.Ta.length<10}function kx(s,e){s.Ta.push(e);const n=vr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function YE(s){return ga(s)&&!vr(s).x_()&&s.Ta.length>0}function XE(s){vr(s).start()}async function Lx(s){vr(s).ra()}async function Px(s){const e=vr(s);for(const n of s.Ta)e.ea(n.mutations)}async function Ux(s,e,n){const r=s.Ta.shift(),l=ap.from(r,e,n);await KE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await qh(s)}async function zx(s,e){e&&vr(s).X_&&await(async function(r,l){if((function(f){return TC(f)&&f!==$.ABORTED})(l.code)){const c=r.Ta.shift();vr(r).B_(),await KE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await qh(r)}})(s,e),YE(s)&&XE(s)}async function w0(s,e){const n=Te(s);n.asyncQueue.verifyOperationInProgress(),ae(fa,"RemoteStore received new credentials");const r=ga(n);n.Ea.add(3),await ac(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function Bx(s,e){const n=Te(s);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await ac(n),n.Ra.set("Unknown"))}function So(s){return s.ma||(s.ma=(function(n,r,l){const c=Te(n);return c.sa(),new Sx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:Dx.bind(null,s),t_:Ox.bind(null,s),r_:Mx.bind(null,s),H_:jx.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),gp(s)?pp(s):s.Ra.set("Unknown")):(await s.ma.stop(),QE(s))}))),s.ma}function vr(s){return s.fa||(s.fa=(function(n,r,l){const c=Te(n);return c.sa(),new Rx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lx.bind(null,s),r_:zx.bind(null,s),ta:Px.bind(null,s),na:Ux.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await qh(s)):(await s.fa.stop(),s.Ta.length>0&&(ae(fa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class yp{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const f=Date.now()+r,p=new yp(e,n,f,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(s,e){if(Es("AsyncQueue",`${e}: ${s}`),wo(s))return new se($.UNAVAILABLE,`${e}: ${s}`);throw s}class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Ol(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class S0{constructor(){this.ga=new ot(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Eo{constructor(e,n,r,l,c,f,p,y,E){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,r,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Eo(e,n,mo.emptySet(n),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}class qx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Fx{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Te(n),c=l.queries;l.queries=R0(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new se($.ABORTED,"Firestore shutting down"))}}function R0(){return new pa((s=>pE(s)),Vh)}async function vp(s,e){const n=Te(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new qx,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=_p(f,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Tp(n)}async function Ep(s,e){const n=Te(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hx(s,e){const n=Te(s);let r=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&Tp(n)}function Gx(s,e,n){const r=Te(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function Tp(s){s.Ca.forEach((e=>{e.next()}))}var Mm,C0;(C0=Mm||(Mm={})).Ma="default",C0.Cache="cache";class bp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mm.Cache}}class $E{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class Qx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=gE(e),this.tu=new mo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new S0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,w)=>{const C=l.get(T),P=kh(this.query,w)?w:null,K=!!C&&this.mutatedKeys.has(C.key),Z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let k=!1;C&&P?C.data.isEqual(P.data)?K!==Z&&(r.track({type:3,doc:P}),k=!0):this.su(C,P)||(r.track({type:2,doc:P}),k=!0,(y&&this.eu(P,y)>0||E&&this.eu(P,E)<0)&&(p=!0)):!C&&P?(r.track({type:0,doc:P}),k=!0):C&&!P&&(r.track({type:1,doc:C}),k=!0,(y||E)&&(p=!0)),k&&(P?(f=f.add(P),c=Z?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,w)=>(function(P,K){const Z=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:k})}};return Z(P)-Z(K)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,E=y!==this.Za;return this.Za=y,f.length!==0||E?{snapshot:new Eo(this.query,e.tu,c,f,e.mutatedKeys,y===0,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new WE(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new $E(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ap="SyncEngine";class Kx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yx{constructor(e){this.key=e,this.hu=!1}}class Xx{constructor(e,n,r,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new pa((p=>pE(p)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(me.comparator),this.Au=new Map,this.Ru=new cp,this.Vu={},this.mu=new Map,this.fu=vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $x(s,e,n=!0){const r=iT(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await ZE(r,e,n,!0),l}async function Wx(s,e){const n=iT(s);await ZE(n,e,!0,!1)}async function ZE(s,e,n,r){const l=await yx(s.localStore,ji(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await Zx(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&n&&HE(s.remoteStore,l),p}async function Zx(s,e,n,r,l){s.pu=(w,C,P)=>(async function(Z,k,U,oe){let J=k.view.ru(U);J.Cs&&(J=await v0(Z.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,J))));const ie=oe&&oe.targetChanges.get(k.targetId),ee=oe&&oe.targetMismatches.get(k.targetId)!=null,le=k.view.applyChanges(J,Z.isPrimaryClient,ie,ee);return I0(Z,k.targetId,le.au),le.snapshot})(s,w,C,P);const c=await v0(s.localStore,e,!0),f=new Qx(e,c.Qs),p=f.ru(c.documents),y=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),E=f.applyChanges(p,s.isPrimaryClient,y);I0(s,n,E.au);const T=new Kx(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),E.snapshot}async function Jx(s,e,n){const r=Te(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((f=>!Vh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Dm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&dp(r.remoteStore,l.targetId),jm(r,l.targetId)})).catch(Ao)):(jm(r,l.targetId),await Dm(r.localStore,l.targetId,!0))}async function eI(s,e){const n=Te(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dp(n.remoteStore,r.targetId))}async function tI(s,e,n){const r=lI(s);try{const l=await(function(f,p){const y=Te(f),E=Ze.now(),T=p.reduce(((P,K)=>P.add(K.key)),je());let w,C;return y.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let K=Ts(),Z=je();return y.Ns.getEntries(P,T).next((k=>{K=k,K.forEach(((U,oe)=>{oe.isValidDocument()||(Z=Z.add(U))}))})).next((()=>y.localDocuments.getOverlayedDocuments(P,K))).next((k=>{w=k;const U=[];for(const oe of p){const J=gC(oe,w.get(oe.key).overlayedDocument);J!=null&&U.push(new wr(oe.key,J,oE(J.value.mapValue),ni.exists(!0)))}return y.mutationQueue.addMutationBatch(P,E,U,p)})).next((k=>{C=k;const U=k.applyToLocalDocumentSet(w,Z);return y.documentOverlayCache.saveOverlays(P,k.batchId,U)}))})).then((()=>({batchId:C.batchId,changes:_E(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let E=f.Vu[f.currentUser.toKey()];E||(E=new ot(Me)),E=E.insert(p,y),f.Vu[f.currentUser.toKey()]=E})(r,l.batchId,n),await oc(r,l.changes),await qh(r.remoteStore)}catch(l){const c=_p(l,"Failed to persist write");n.reject(c)}}async function JE(s,e){const n=Te(s);try{const r=await mx(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(qe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?qe(f.hu,14607):l.removedDocuments.size>0&&(qe(f.hu,42227),f.hu=!1))})),await oc(n,r,e)}catch(r){await Ao(r)}}function x0(s,e,n){const r=Te(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=Te(f);y.onlineState=p;let E=!1;y.queries.forEach(((T,w)=>{for(const C of w.Sa)C.va(p)&&(E=!0)})),E&&Tp(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nI(s,e,n){const r=Te(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let f=new ot(me.comparator);f=f.insert(c,$t.newNoDocument(c,Ee.min()));const p=je().add(c),y=new Uh(Ee.min(),new Map,new ot(Me),f,p);await JE(r,y),r.du=r.du.remove(c),r.Au.delete(e),wp(r)}else await Dm(r.localStore,e,!1).then((()=>jm(r,e,n))).catch(Ao)}async function iI(s,e){const n=Te(s),r=e.batch.batchId;try{const l=await dx(n.localStore,e);tT(n,r,null),eT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oc(n,l)}catch(l){await Ao(l)}}async function sI(s,e,n){const r=Te(s);try{const l=await(function(f,p){const y=Te(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let T;return y.mutationQueue.lookupMutationBatch(E,p).next((w=>(qe(w!==null,37113),T=w.keys(),y.mutationQueue.removeMutationBatch(E,w)))).next((()=>y.mutationQueue.performConsistencyCheck(E))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(E,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,T))).next((()=>y.localDocuments.getDocuments(E,T)))}))})(r.localStore,e);tT(r,e,n),eT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await oc(r,l)}catch(l){await Ao(l)}}function eT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function tT(s,e,n){const r=Te(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function jm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||nT(s,r)}))}function nT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(dp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),wp(s))}function I0(s,e,n){for(const r of n)r instanceof $E?(s.Ru.addReference(r.key,e),rI(s,r)):r instanceof WE?(ae(Ap,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||nT(s,r.key)):_e(19791,{wu:r})}function rI(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ae(Ap,"New document in limbo: "+n),s.Eu.add(r),wp(s))}function wp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new me(et.fromString(e)),r=s.fu.next();s.Au.set(r,new Yx(n)),s.du=s.du.insert(n,r),HE(s.remoteStore,new cr(ji(jh(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function oc(s,e,n){const r=Te(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,n).then((E=>{if((E||n)&&r.isPrimaryClient){const T=E?!E.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(E){l.push(E);const T=hp.As(y.targetId,E);c.push(T)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,E){const T=Te(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>W.forEach(E,(C=>W.forEach(C.Es,(P=>T.persistence.referenceDelegate.addReference(w,C.targetId,P))).next((()=>W.forEach(C.ds,(P=>T.persistence.referenceDelegate.removeReference(w,C.targetId,P)))))))))}catch(w){if(!wo(w))throw w;ae(fp,"Failed to update sequence numbers: "+w)}for(const w of E){const C=w.targetId;if(!w.fromCache){const P=T.Ms.get(C),K=P.snapshotVersion,Z=P.withLastLimboFreeSnapshotVersion(K);T.Ms=T.Ms.insert(C,Z)}}})(r.localStore,c))}async function aI(s,e){const n=Te(s);if(!n.currentUser.isEqual(e)){ae(Ap,"User change. New user:",e.toKey());const r=await zE(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new se($.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oc(n,r.Ls)}}function oI(s,e){const n=Te(s),r=n.Au.get(e);if(r&&r.hu)return je().add(r.key);{let l=je();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function iT(s){const e=Te(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=JE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nI.bind(null,e),e.Pu.H_=Hx.bind(null,e.eventManager),e.Pu.yu=Gx.bind(null,e.eventManager),e}function lI(s){const e=Te(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fx(this.persistence,new cx,e.initialUser,this.serializer)}Cu(e){return new UE(up.mi,this.serializer)}Du(e){return new vx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class cI extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new UE((r=>yh.mi(r,n)),this.serializer)}}class Vm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>x0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aI.bind(null,this.syncEngine),await Bx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Fx})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=(function(c){return new wx(c)})(e.databaseInfo);return(function(c,f,p,y){return new xx(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,f,p){return new Nx(r,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>x0(this.syncEngine,n,0)),(function(){return b0.v()?new b0:new Ex})())}createSyncEngine(e,n){return(function(l,c,f,p,y,E,T){const w=new Xx(l,c,f,p,y,E);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Te(n);ae(fa,"RemoteStore shutting down."),r.Ea.add(5),await ac(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vm.provider={build:()=>new Vm};class Sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Er="FirestoreClient";class uI{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Xt.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{ae(Er,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ae(Er,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cm(s,e){s.asyncQueue.verifyOperationInProgress(),ae(Er,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await zE(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function N0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await hI(s);ae(Er,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>w0(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>w0(e.remoteStore,l))),s._onlineComponents=e}async function hI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ae(Er,"Using user provided OfflineComponentProvider");try{await cm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await cm(s,new vh)}}else ae(Er,"Using default OfflineComponentProvider"),await cm(s,new cI(void 0));return s._offlineComponents}async function sT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ae(Er,"Using user provided OnlineComponentProvider"),await N0(s,s._uninitializedComponentsProvider._online)):(ae(Er,"Using default OnlineComponentProvider"),await N0(s,new Vm))),s._onlineComponents}function fI(s){return sT(s).then((e=>e.syncEngine))}async function Eh(s){const e=await sT(s),n=e.eventManager;return n.onListen=$x.bind(null,e.syncEngine),n.onUnlisten=Jx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eI.bind(null,e.syncEngine),n}function dI(s,e,n={}){const r=new ys;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Sp({next:C=>{T.Nu(),f.enqueueAndForget((()=>Ep(c,w)));const P=C.docs.has(p);!P&&C.fromCache?E.reject(new se($.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&C.fromCache&&y&&y.source==="server"?E.reject(new se($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(C)},error:C=>E.reject(C)}),w=new bp(jh(p.path),T,{includeMetadataChanges:!0,qa:!0});return vp(c,w)})(await Eh(s),s.asyncQueue,e,n,r))),r.promise}function mI(s,e,n={}){const r=new ys;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,E){const T=new Sp({next:C=>{T.Nu(),f.enqueueAndForget((()=>Ep(c,w))),C.fromCache&&y.source==="server"?E.reject(new se($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(C)},error:C=>E.reject(C)}),w=new bp(p,T,{includeMetadataChanges:!0,qa:!0});return vp(c,w)})(await Eh(s),s.asyncQueue,e,n,r))),r.promise}function rT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const D0=new Map;const aT="firestore.googleapis.com",O0=!0;class M0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aT,this.ssl=O0}else this.host=e.host,this.ssl=e.ssl??O0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QC)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ER;switch(r.type){case"firstParty":return new wR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=D0.get(n);r&&(ae("ComponentProvider","Removing Datastore"),D0.delete(n),r.terminate())})(this),Promise.resolve()}}function pI(s,e,n,r={}){s=Rn(s,Fh);const l=da(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Um(`https://${p}`),zm("Firestore",!0)),c.host!==aT&&c.host!==p&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!oa(y,f)&&(s._setSettings(y),r.mockUserToken)){let E,T;if(typeof r.mockUserToken=="string")E=r.mockUserToken,T=Xt.MOCK_USER;else{E=e1(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Xt(w)}s._authCredentials=new TR(new X1(E,T))}}class ya{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ya(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nc(n,ut._jsonSchema))return new ut(e,r||null,new me(et.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:Dt("string",ut._jsonSchemaVersion),referencePath:Dt("string")};class dr extends ya{constructor(e,n,r){super(e,n,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new me(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function Ro(s,e,...n){if(s=_t(s),$1("collection","path",e),s instanceof Fh){const r=et.fromString(e,...n);return Qv(r),new dr(s,null,r)}{if(!(s instanceof ut||s instanceof dr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(et.fromString(e,...n));return Qv(r),new dr(s.firestore,null,r)}}function lc(s,e,...n){if(s=_t(s),arguments.length===1&&(e=Jm.newId()),$1("doc","path",e),s instanceof Fh){const r=et.fromString(e,...n);return Gv(r),new ut(s,null,new me(r))}{if(!(s instanceof ut||s instanceof dr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(et.fromString(e,...n));return Gv(r),new ut(s.firestore,s instanceof dr?s.converter:null,new me(r))}}const j0="AsyncQueue";class V0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const r=lm();r&&ae(j0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ys;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wo(e))throw e;ae(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",k0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=yp.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&_e(47125,{Pc:k0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function k0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function L0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class Tr extends Fh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new V0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function gI(s,e){const n=typeof s=="object"?s:Fm(),r=typeof s=="string"?s:uh,l=Rh(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=W0("firestore");c&&pI(l,...c)}return l}function Hh(s){if(s._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||yI(s),s._firestoreClient}function yI(s){const e=s._freezeSettings(),n=(function(l,c,f,p){return new BR(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,rT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new uI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Kt.fromBase64String(e))}catch(n){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Dt("string",zn._jsonSchemaVersion),bytes:Dt("string")};class Gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rp{constructor(e){this._methodName=e}}class ki{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(nc(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:Dt("string",ki._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};class Li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Li(e.vectorValues);throw new se($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Dt("string",Li._jsonSchemaVersion),vectorValues:Dt("object")};const _I=/^__.*__$/;class vI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new sc(e,this.data,n,this.fieldTransforms)}}class oT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:s})}}class Cp{constructor(e,n,r,l,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Th(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lT(this.Ac)&&_I.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Cc(e,n,r,l=!1){return new Cp({Ac:e,methodName:n,Dc:r,path:Qt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qh(s){const e=s._freezeSettings(),n=zh(s._databaseId);return new EI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function cT(s,e,n,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);xp("Data must be an object, but it was:",f,r);const p=uT(r,f);let y,E;if(c.merge)y=new Sn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const C=km(e,w,n);if(!f.contains(C))throw new se($.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);fT(T,C)||T.push(C)}y=new Sn(T),E=f.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,E=f.fieldTransforms;return new vI(new dn(p),y,E)}class Kh extends Rp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function TI(s,e,n,r){const l=s.Cc(1,e,n);xp("Data must be an object, but it was:",l,r);const c=[],f=dn.empty();Ar(r,((y,E)=>{const T=Ip(e,y,n);E=_t(E);const w=l.yc(T);if(E instanceof Kh)c.push(T);else{const C=cc(E,w);C!=null&&(c.push(T),f.set(T,C))}}));const p=new Sn(c);return new oT(f,p,l.fieldTransforms)}function bI(s,e,n,r,l,c){const f=s.Cc(1,e,n),p=[km(e,r,n)],y=[l];if(c.length%2!=0)throw new se($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)p.push(km(e,c[C])),y.push(c[C+1]);const E=[],T=dn.empty();for(let C=p.length-1;C>=0;--C)if(!fT(E,p[C])){const P=p[C];let K=y[C];K=_t(K);const Z=f.yc(P);if(K instanceof Kh)E.push(P);else{const k=cc(K,Z);k!=null&&(E.push(P),T.set(P,k))}}const w=new Sn(E);return new oT(T,w,f.fieldTransforms)}function AI(s,e,n,r=!1){return cc(n,s.Cc(r?4:3,e))}function cc(s,e){if(hT(s=_t(s)))return xp("Unsupported field value:",e,s),uT(s,e);if(s instanceof Rp)return(function(r,l){if(!lT(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let f=0;for(const p of r){let y=cc(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ze.fromDate(r);return{timestampValue:gh(l.serializer,c)}}if(r instanceof Ze){const c=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(l.serializer,c)}}if(r instanceof ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:DE(l.serializer,r._byteString)};if(r instanceof ut){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:lp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Li)return(function(f,p){return{mapValue:{fields:{[rE]:{stringValue:aE},[hh]:{arrayValue:{values:f.toArray().map((E=>{if(typeof E!="number")throw p.Sc("VectorValues must only contain numeric values.");return rp(p.serializer,E)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Nh(r)}`)})(s,e)}function uT(s,e){const n={};return J1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(s,((r,l)=>{const c=cc(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function hT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ze||s instanceof ki||s instanceof zn||s instanceof ut||s instanceof Rp||s instanceof Li)}function xp(s,e,n){if(!hT(n)||!W1(n)){const r=Nh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function km(s,e,n){if((e=_t(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return Ip(s,e);throw Th("Field path arguments must be of type string or ",s,!1,void 0,n)}const wI=new RegExp("[~\\*/\\[\\]]");function Ip(s,e,n){if(e.search(wI)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Gh(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Th(s,e,n,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new se($.INVALID_ARGUMENT,p+s+y)}function fT(s,e){return s.some((n=>n.isEqual(e)))}class dT{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Np("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SI extends dT{data(){return super.data()}}function Np(s,e){return typeof e=="string"?Ip(s,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}function mT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new se($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class RI extends Dp{}function uc(s,e,...n){let r=[];e instanceof Dp&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((y=>y instanceof Op)).length,p=c.filter((y=>y instanceof Yh)).length;if(f>1||f>0&&p>0)throw new se($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Yh extends RI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yh(e,n,r)}_apply(e){const n=this._parse(e);return pT(e._query,n),new ya(e.firestore,e.converter,Sm(e._query,n))}_parse(e){const n=Qh(e.firestore);return(function(c,f,p,y,E,T,w){let C;if(E.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){U0(w,T);const K=[];for(const Z of w)K.push(P0(y,c,Z));C={arrayValue:{values:K}}}else C=P0(y,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||U0(w,T),C=AI(p,f,w,T==="in"||T==="not-in");return Nt.create(E,T,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pi(s,e,n){const r=e,l=Np("where",s);return Yh._create(l,r,n)}class Op extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Op(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const y of p)pT(f,y),f=Sm(f,y)})(e._query,n),new ya(e.firestore,e.converter,Sm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function P0(s,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new se($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mE(e)&&n.indexOf("/")!==-1)throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(et.fromString(n));if(!me.isDocumentKey(r))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return e0(s,new me(r))}if(n instanceof ut)return e0(s,n._key);throw new se($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function U0(s,e){if(!Array.isArray(s)||s.length===0)throw new se($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pT(s,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CI{convertValue(e,n="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ar(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[hh].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Li(n)}convertGeoPoint(e){return new ki(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=et.fromString(e);qe(LE(r),9688,{name:e});const l=new Ql(r.get(1),r.get(3)),c=new me(r.popFirst(5));return l.isEqual(n)||Es(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function gT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ra extends dT{constructor(e,n,r,l,c,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ra._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:Dt("string",ra._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Ju extends ra{data(e={}){return super.data(e)}}class aa{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new jl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ju(this._firestore,this._userDataWriter,r.key,r,new jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new Ju(l._firestore,l._userDataWriter,p.doc.key,p.doc,new jl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Ju(l._firestore,l._userDataWriter,p.doc.key,p.doc,new jl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,T=-1;return p.type!==0&&(E=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:xI(p.type),doc:y,oldIndex:E,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}function II(s){s=Rn(s,ut);const e=Rn(s.firestore,Tr);return dI(Hh(e),s._key).then((n=>_T(e,s,n)))}aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:Dt("string",aa._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Mp extends CI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function Xh(s){s=Rn(s,ya);const e=Rn(s.firestore,Tr),n=Hh(e),r=new Mp(e);return mT(s._query),mI(n,s._query).then((l=>new aa(e,r,s,l)))}function NI(s,e,n){s=Rn(s,ut);const r=Rn(s.firestore,Tr),l=gT(s.converter,e);return jp(r,[cT(Qh(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,ni.none())])}function yT(s,e,n,...r){s=Rn(s,ut);const l=Rn(s.firestore,Tr),c=Qh(l);let f;return f=typeof(e=_t(e))=="string"||e instanceof Gh?bI(c,"updateDoc",s._key,e,n,r):TI(c,"updateDoc",s._key,e),jp(l,[f.toMutation(s._key,ni.exists(!0))])}function DI(s,e){const n=Rn(s.firestore,Tr),r=lc(s),l=gT(s.converter,e);return jp(n,[cT(Qh(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,ni.exists(!1))]).then((()=>r))}function OI(s,...e){s=_t(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||L0(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(L0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,f,p;if(s instanceof ut)f=Rn(s.firestore,Tr),p=jh(s._key.path),c={next:y=>{e[r]&&e[r](_T(f,s,y))},error:e[r+1],complete:e[r+2]};else{const y=Rn(s,ya);f=Rn(y.firestore,Tr),p=y._query;const E=new Mp(f);c={next:T=>{e[r]&&e[r](new aa(f,E,y,T))},error:e[r+1],complete:e[r+2]},mT(s._query)}return(function(E,T,w,C){const P=new Sp(C),K=new bp(T,P,w);return E.asyncQueue.enqueueAndForget((async()=>vp(await Eh(E),K))),()=>{P.Nu(),E.asyncQueue.enqueueAndForget((async()=>Ep(await Eh(E),K)))}})(Hh(f),p,l,c)}function jp(s,e){return(function(r,l){const c=new ys;return r.asyncQueue.enqueueAndForget((async()=>tI(await fI(r),l,c))),c.promise})(Hh(s),e)}function _T(s,e,n){const r=n.docs.get(e._key),l=new Mp(s);return new ra(s,l,e._key,r,new jl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){bo=l})(ma),la(new mr("firestore",((r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new Tr(new bR(r.getProvider("auth-internal")),new SR(f,r.getProvider("app-check-internal")),(function(E,T){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(E.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Di(Bv,qv,e),Di(Bv,qv,"esm2020")})();var MI="firebase",jI="12.6.0";Di(MI,jI,"app");const vT="firebasestorage.googleapis.com",VI="storageBucket",kI=120*1e3,LI=600*1e3;class Fi extends qi{constructor(e,n,r=0){super(um(e),`Firebase Storage: ${n} (${um(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return um(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function um(s){return"storage/"+s}function PI(){const s="An unknown error occurred, please check the error payload for server response.";return new Fi(zi.UNKNOWN,s)}function UI(){return new Fi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zI(){return new Fi(zi.CANCELED,"User canceled the upload/download.")}function BI(s){return new Fi(zi.INVALID_URL,"Invalid URL '"+s+"'.")}function qI(s){return new Fi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function z0(s){return new Fi(zi.INVALID_ARGUMENT,s)}function ET(){return new Fi(zi.APP_DELETED,"The Firebase app was deleted.")}function FI(s){return new Fi(zi.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ti{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ti.makeFromUrl(e,n)}catch{return new ti(e,"")}if(r.path==="")return r;throw qI(e)}static makeFromUrl(e,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function c(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+l+f,"i"),y={bucket:1,path:3};function E(ie){ie.path_=decodeURIComponent(ie.path)}const T="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",P=new RegExp(`^https?://${w}/${T}/b/${l}/o${C}`,"i"),K={bucket:1,path:3},Z=n===vT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",U=new RegExp(`^https?://${Z}/${l}/${k}`,"i"),J=[{regex:p,indices:y,postModify:c},{regex:P,indices:K,postModify:E},{regex:U,indices:{bucket:1,path:2},postModify:E}];for(let ie=0;ie<J.length;ie++){const ee=J[ie],le=ee.regex.exec(e);if(le){const D=le[ee.indices.bucket];let S=le[ee.indices.path];S||(S=""),r=new ti(D,S),ee.postModify(r);break}}if(r==null)throw BI(e);return r}}class HI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function GI(s,e,n){let r=1,l=null,c=null,f=!1,p=0;function y(){return p===2}let E=!1;function T(...k){E||(E=!0,e.apply(null,k))}function w(k){l=setTimeout(()=>{l=null,s(P,y())},k)}function C(){c&&clearTimeout(c)}function P(k,...U){if(E){C();return}if(k){C(),T.call(null,k,...U);return}if(y()||f){C(),T.call(null,k,...U);return}r<64&&(r*=2);let J;p===1?(p=2,J=0):J=(r+Math.random())*1e3,w(J)}let K=!1;function Z(k){K||(K=!0,C(),!E&&(l!==null?(k||(p=2),clearTimeout(l),w(0)):k||(p=1)))}return w(0),c=setTimeout(()=>{f=!0,Z(!0)},n),Z}function QI(s){s(!1)}function KI(s){return s!==void 0}function B0(s,e,n,r){if(r<e)throw z0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw z0(`Invalid value for '${s}'. Expected ${n} or less.`)}function YI(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const l=e(r)+"="+e(s[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var bh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(bh||(bh={}));function XI(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return n||l||c}class $I{constructor(e,n,r,l,c,f,p,y,E,T,w,C=!0,P=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=T,this.connectionFactory_=w,this.retry=C,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,Z)=>{this.resolve_=K,this.reject_=Z,this.start_()})}start_(){const e=(r,l)=>{if(l){r(!1,new Fu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=p=>{const y=p.loaded,E=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,E)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const p=c.getErrorCode()===bh.NO_ERROR,y=c.getStatus();if(!p||XI(y,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===bh.ABORT;r(!1,new Fu(!1,null,T));return}const E=this.successCodes_.indexOf(y)!==-1;r(!0,new Fu(E,c))})},n=(r,l)=>{const c=this.resolve_,f=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());KI(y)?c(y):c()}catch(y){f(y)}else if(p!==null){const y=PI();y.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,y)):f(y)}else if(l.canceled){const y=this.appDelete_?ET():zI();f(y)}else{const y=UI();f(y)}};this.canceled_?n(!1,new Fu(!1,null,!0)):this.backoffId_=GI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function WI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function ZI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function eN(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function tN(s,e,n,r,l,c,f=!0,p=!1){const y=YI(s.urlParams),E=s.url+y,T=Object.assign({},s.headers);return JI(T,e),WI(T,n),ZI(T,c),eN(T,r),new $I(E,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,f,p)}function nN(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function iN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}class Ah{constructor(e,n){this._service=e,n instanceof ti?this._location=n:this._location=ti.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ah(e,n)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iN(this._location.path)}get storage(){return this._service}get parent(){const e=nN(this._location.path);if(e===null)return null;const n=new ti(this._location.bucket,e);return new Ah(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw FI(e)}}function q0(s,e){const n=e?.[VI];return n==null?null:ti.makeFromBucketSpec(n,s)}function sN(s,e,n,r={}){s.host=`${e}:${n}`;const l=da(e);l&&(Um(`https://${s.host}/b`),zm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:e1(c,s.app.options.projectId))}class rN{constructor(e,n,r,l,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=vT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kI,this._maxUploadRetryTime=LI,this._requests=new Set,l!=null?this._bucket=ti.makeFromBucketSpec(l,this._host):this._bucket=q0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ti.makeFromBucketSpec(this._url,e):this._bucket=q0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ah(this,e)}_makeRequest(e,n,r,l,c=!0){if(this._deleted)return new HI(ET());{const f=tN(e,this._appId,r,l,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,l).getPromise()}}const F0="@firebase/storage",H0="0.14.0";const TT="storage";function aN(s=Fm(),e){s=_t(s);const r=Rh(s,TT).getImmediate({identifier:e}),l=W0("storage");return l&&oN(r,...l),r}function oN(s,e,n,r={}){sN(s,e,n,r)}function lN(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new rN(n,r,l,e,ma)}function cN(){la(new mr(TT,lN,"PUBLIC").setMultipleInstances(!0)),Di(F0,H0,""),Di(F0,H0,"esm2020")}cN();const uN={apiKey:"AIzaSyAe9TZ8SIJNVo88DEhntlUuHEJLmLbpd2Y",authDomain:"coi-dr-cv.firebaseapp.com",projectId:"coi-dr-cv",storageBucket:"coi-dr-cv.firebasestorage.app",messagingSenderId:"983780915350",appId:"1:983780915350:web:dc4e211ea42bd2d354eab7",measurementId:"G-YL4VGC01RT"},Vp=i1(uN),Bi=_R(Vp),Hi=gI(Vp);aN(Vp);const bT=async(s,e,n={})=>{try{const l=(await nS(Bi,s,e)).user;return await NI(lc(Hi,"users",l.uid),{email:s,nombres:n.nombres||"",apellidos:n.apellidos||"",fechaNacimiento:n.fechaNacimiento||null,dui:n.dui||"",genero:n.genero||"",direccion:n.direccion||"",telefono:n.telefono||"",emergenciaNombre:n.emergenciaNombre||"",emergenciaTelefono:n.emergenciaTelefono||"",emergenciaParentesco:n.emergenciaParentesco||"",tipoPaciente:n.tipoPaciente||"primera-vez",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log("Sending email verification to:",l.email),await sS(l),console.log("Email verification sent successfully"),{user:l,error:null}}catch(r){return console.error("Sign up error:",r),{user:null,error:r}}},AT=async(s,e)=>{try{const n=await iS(Bi,s,e);return n.user.emailVerified?{user:n.user,error:null}:(await D1(Bi),{user:null,error:{code:"auth/email-not-verified",message:"Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."}})}catch(n){return console.error("Sign in error:",n),{user:null,error:n}}},wT=async()=>{try{return await D1(Bi),{error:null}}catch(s){return console.error("Sign out error:",s),{error:s}}},ST=async s=>{try{return await tS(Bi,s),{error:null}}catch(e){return console.error("Reset password error:",e),{error:e}}},Lm=async s=>{try{const e=lc(Hi,"users",s),n=await II(e);return n.exists()?{profile:n.data(),error:null}:{profile:null,error:new Error("Profile not found")}}catch(e){return console.error("Get user profile error:",e),{profile:null,error:e}}},RT=async(s,e)=>{try{const n=lc(Hi,"users",s);return await yT(n,{...e,updatedAt:new Date().toISOString()}),{error:null}}catch(n){return console.error("Update user profile error:",n),{error:n}}},CT=s=>oS(Bi,s),xT=async(s,e)=>{try{const n=await new Promise((r,l)=>{const c=new FileReader;c.onload=()=>r(c.result),c.onerror=l,c.readAsDataURL(e)});return await RT(s,{photoURL:n}),{photoURL:n,error:null}}catch(n){return console.error("Upload profile photo error:",n),{photoURL:null,error:n}}},hN=Object.freeze(Object.defineProperty({__proto__:null,getUserProfile:Lm,onAuthChange:CT,resetPassword:ST,signIn:AT,signOut:wT,signUp:bT,updateUserProfile:RT,uploadProfilePhoto:xT},Symbol.toStringTag,{value:"Module"}));function fN({onLogout:s,userData:e,userType:n}){const[r,l]=re.useState(!1),[c,f]=re.useState(!1),p=re.useRef(null),y=re.useRef(null),E=e&&(e.nombres||e.nombre)||"Usuario",T=n==="admin"||n==="doctor";return re.useEffect(()=>{const w=C=>{p.current&&!p.current.contains(C.target)&&f(!1)};return c&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[c]),re.useEffect(()=>{const w=C=>{y.current&&!y.current.contains(C.target)&&l(!1)};return r&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[r]),m.jsx("header",{className:"header",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"header-content",children:[m.jsx(Jn,{to:T?"/staff/dashboard":"/",className:"logo",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"logo-image"})}),m.jsxs("div",{className:"header-actions",children:[m.jsxs("div",{ref:y,children:[m.jsx("button",{className:"mobile-menu-btn",onClick:()=>l(!r),"aria-label":"Men",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),m.jsxs("nav",{className:`nav-menu ${r?"active":""}`,children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(Jn,{to:"/",className:"nav-button",onClick:()=>l(!1),children:"Inicio"}),m.jsx(Jn,{to:"/cita",className:"nav-button",onClick:()=>l(!1),children:"Cita"}),m.jsx(Jn,{to:"/contacto",className:"nav-button",onClick:()=>l(!1),children:"Contacto"})]}),T&&m.jsx(Jn,{to:"/staff/dashboard",className:"nav-button",onClick:()=>l(!1),children:"Dashboard"})]})]}),m.jsxs("div",{className:"profile-container",ref:p,children:[m.jsxs("button",{className:"profile-btn","aria-label":"Perfil",onClick:()=>f(!c),children:[e?.photoURL?m.jsx("img",{src:e.photoURL,alt:"Perfil",className:"profile-photo-small"}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("span",{className:"user-name",children:E})]}),c&&m.jsxs("div",{className:"profile-dropdown",children:[!T&&m.jsxs(m.Fragment,{children:[m.jsx(Jn,{to:"/perfil",className:"dropdown-item",onClick:()=>f(!1),children:"Perfil"}),m.jsx(Jn,{to:"/notificaciones",className:"dropdown-item",onClick:()=>f(!1),children:"Notificaciones"})]}),m.jsx("button",{className:"dropdown-item logout",onClick:s,children:"Cerrar sesin"})]})]})]})]})})})}function dN(){return m.jsx("footer",{className:"footer",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"footer-content",children:[m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{className:"footer-clinic-name",children:"Clnica Dental Dr. Csar Vsquez"}),m.jsx("p",{className:"footer-description",children:"Odontlogos forjando mejores sonrisas"})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Contacto Principal"}),m.jsxs("div",{className:"contact-info",children:[m.jsxs("div",{className:"contact-item",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),m.jsx("a",{href:"https://wa.me/50369877192",target:"_blank",rel:"noopener noreferrer",children:"+503 6987-7192"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),m.jsx("polyline",{points:"22,6 12,13 2,6"})]}),m.jsx("a",{href:"https://mail.google.com/mail/?view=cm&fs=1&to=clinicadrcesarvasquez@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"clinicadrcesarvasquez@gmail.com"})]}),m.jsxs("div",{className:"contact-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),m.jsx("a",{href:"https://maps.app.goo.gl/i2YfiyNUtEfRD2QE6",target:"_blank",rel:"noopener noreferrer",children:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad"})]})]}),m.jsxs("div",{className:"social-links",children:[m.jsx("a",{href:"https://www.facebook.com/ClinicadentalDrCesarV/?locale=es_LA",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})})}),m.jsx("a",{href:"https://www.instagram.com/drcesarvasquez/#",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),m.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),m.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),m.jsx("a",{href:"https://www.tiktok.com/@dentaldrcesarvasquez?_r=1&_t=ZM-91mSrQcok27",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"})})})]})]}),m.jsxs("div",{className:"footer-section",children:[m.jsx("h3",{children:"Horarios"}),m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Lunes - Sbado"}),m.jsx("span",{className:"time",children:"7:30 AM - 12:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day"}),m.jsx("span",{className:"time",children:"1:00 PM - 4:00 PM"})]}),m.jsxs("div",{className:"schedule-item",children:[m.jsx("span",{className:"day",children:"Domingo"}),m.jsx("span",{className:"time",children:"Cerrado"})]})]})]})]}),m.jsx("div",{className:"footer-bottom",children:m.jsx("p",{children:" 2025 Clnica Dental Dr. Cesar Vsquez. Todos los derechos reservados."})})]})})}const IT=async(s,e)=>{try{const n={userId:s,patientName:e.patientName||"",date:e.date||"",time:e.time||"",reason:e.reason||"",clinica:e.clinica||"",notas:e.notas||"",status:e.status||"programada",createdAt:Ze.now(),updatedAt:Ze.now()};return{appointmentId:(await DI(Ro(Hi,"appointments"),n)).id,error:null}}catch(n){return console.error("Error creating appointment:",n),{appointmentId:null,error:n}}},NT=async s=>{try{const e=uc(Ro(Hi,"appointments"),Pi("userId","==",s),Pi("status","==","programada"));return{count:(await Xh(e)).size,error:null}}catch(e){return console.error("Error counting scheduled appointments:",e),{count:0,error:e}}},DT=async(s,e,n=null)=>{try{const r=uc(Ro(Hi,"appointments"),Pi("userId","==",s),Pi("date","==",e),Pi("status","==","programada")),l=await Xh(r);if(n){const c=[];return l.forEach(f=>{f.id!==n&&c.push(f)}),{hasAppointment:c.length>0,error:null}}return{hasAppointment:l.size>0,error:null}}catch(r){return console.error("Error checking appointment on date:",r),{hasAppointment:!1,error:r}}},kp=(s,e)=>{const n=uc(Ro(Hi,"appointments"),Pi("userId","==",s));return OI(n,r=>{const l=[];r.forEach(c=>{l.push({id:c.id,...c.data()})}),l.sort((c,f)=>{const p=new Date(`${c.date} ${c.time}`),y=new Date(`${f.date} ${f.time}`);return p-y}),e(l)},r=>{console.error("Error in appointments subscription:",r),e([])})},Lp=async(s,e)=>{try{const n=lc(Hi,"appointments",s);return await yT(n,{...e,updatedAt:Ze.now()}),{error:null}}catch(n){return console.error("Error updating appointment:",n),{error:n}}},$h=async(s,e)=>Lp(s,{status:e}),mN=async()=>{try{const s=uc(Ro(Hi,"appointments"),Pi("status","==","programada")),e=await Xh(s),n=new Date;let r=0;const l=[];return e.forEach(c=>{const f=c.data(),p=new Date(`${f.date}T${f.time}`),y=new Date(p.getTime()+7200*1e3);n>y&&(l.push($h(c.id,"perdida")),r++)}),await Promise.all(l),{updatedCount:r,error:null}}catch(s){return console.error("Error marking overdue appointments:",s),{updatedCount:0,error:s}}},OT=async(s,e,n=null)=>{try{const r=["7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM"],l=uc(Ro(Hi,"appointments"),Pi("date","==",s),Pi("clinica","==",e),Pi("status","==","programada")),c=await Xh(l),f={};return c.forEach(y=>{const T=y.data().time;f[T]=(f[T]||0)+1}),{availableSlots:r.filter(y=>(f[y]||0)<2||y===n),error:null}}catch(r){return console.error("Error getting available time slots:",r),{availableSlots:[],error:r}}},pN=Object.freeze(Object.defineProperty({__proto__:null,countScheduledAppointments:NT,createAppointment:IT,getAvailableTimeSlots:OT,hasAppointmentOnDate:DT,markOverdueAppointmentsAsLost:mN,subscribeToUserAppointments:kp,updateAppointment:Lp,updateAppointmentStatus:$h},Symbol.toStringTag,{value:"Module"})),MT=({isOpen:s,onClose:e,onConfirm:n,title:r,message:l})=>s?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:r}),m.jsx("p",{className:"modal-message",children:l}),m.jsxs("div",{className:"modal-actions",children:[m.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:e,children:"No, mantener"}),m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:n,children:"S, cancelar cita"})]})]})}):null;function gN({userData:s}){const e=Pm(),[n,r]=re.useState([]),[l,c]=re.useState(!1),[f,p]=re.useState(null),[y,E]=re.useState(!0);re.useEffect(()=>{const k=Bi.currentUser;if(!k){E(!1);return}const U=kp(k.uid,oe=>{const J=oe.sort((ie,ee)=>{const le=new Date(`${ie.date} ${ie.time} `),D=new Date(`${ee.date} ${ee.time} `);return le-D});r(J),E(!1)});return()=>U()},[]);const T=k=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[k]||k,w=k=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[k]||k,C=k=>{p(k),c(!0)},P=async()=>{if(f)try{const{error:k}=await $h(f,"cancelada");k&&(console.error("Error cancelling appointment:",k),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),c(!1),p(null)}catch(k){console.error("Unexpected error:",k),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),c(!1),p(null)}},K=async k=>{try{const U=new G0({orientation:"portrait",unit:"mm",format:"a4"}),oe=210,J=20,ie=oe-J*2;let ee=J;try{const Fe=await fetch("/COI/logo.png");if(Fe.ok){const Q=await Fe.blob(),ne=await new Promise(Le=>{const we=new FileReader;we.onload=()=>Le(we.result),we.readAsDataURL(Q)}),he=new Image;await new Promise(Le=>{he.onload=Le,he.src=ne});const ve=40,Re=he.height*ve/he.width,Ke=(oe-ve)/2;U.addImage(ne,"PNG",Ke,ee,ve,Re),ee+=Re+15}}catch(Ce){console.warn("No se pudo cargar el logo:",Ce)}U.setFontSize(20),U.setFont("helvetica","bold");const le="COMPROBANTE DE CITA",D=U.getTextWidth(le);if(U.text(le,(oe-D)/2,ee),ee+=10,U.setDrawColor(200,200,200),U.line(J,ee,oe-J,ee),ee+=10,U.setFontSize(14),U.setFont("helvetica","bold"),U.text("Detalles de la Cita",J,ee),ee+=8,U.setFontSize(11),U.setFont("helvetica","normal"),U.setFont("helvetica","bold"),U.text("Paciente:",J,ee),U.setFont("helvetica","normal"),U.text(k.patientName||"Usuario",J+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Motivo:",J,ee),U.setFont("helvetica","normal"),U.text(k.reason||"No especificado",J+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Clnica:",J,ee),U.setFont("helvetica","normal"),U.text(w(k.clinica),J+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Fecha:",J,ee),U.setFont("helvetica","normal"),U.text(k.date,J+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Hora:",J,ee),U.setFont("helvetica","normal"),U.text(k.time,J+30,ee),ee+=7,U.setFont("helvetica","bold"),U.text("Estado:",J,ee),U.setFont("helvetica","normal"),U.text(T(k.status),J+30,ee),ee+=10,k.notas&&k.notas.trim()){U.setFont("helvetica","bold"),U.text("Notas adicionales:",J,ee),ee+=6,U.setFont("helvetica","normal");const Ce=U.splitTextToSize(k.notas,ie);U.text(Ce,J,ee),ee+=Ce.length*6+10}U.setDrawColor(200,200,200),U.line(J,ee,oe-J,ee),ee+=10,U.setFontSize(10),U.setFont("helvetica","italic"),U.setTextColor(100,100,100);const S=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});U.text(`Comprobante generado el: ${S}`,J,ee);const I=U.output("arraybuffer"),j=new Blob([I],{type:"application/pdf"}),x=URL.createObjectURL(j),M=document.createElement("a"),R=`comprobante-cita-${k.date}.pdf`;M.href=x,M.download=R,M.style.display="none",document.body.appendChild(M),M.click(),setTimeout(()=>{document.body.removeChild(M),URL.revokeObjectURL(x)},1500)}catch(U){console.error("Error generating PDF:",U),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}},Z=k=>{e("/cita",{state:{editingAppointment:k}})};return m.jsxs("div",{className:"home-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("section",{className:"my-appointments-section",children:[m.jsxs("div",{className:"section-header",children:[m.jsx("h2",{className:"section-title",children:"Mis Citas"}),n.length>3&&m.jsxs(Jn,{to:"/mis-citas",className:"view-more-button",children:["Ver todas",m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("polyline",{points:"12 5 19 12 12 19"})]})]})]}),y?m.jsxs("div",{className:"loading-state",style:{textAlign:"center",padding:"3rem"},children:[m.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),m.jsx("p",{style:{marginTop:"1rem",color:"#666"},children:"Cargando citas..."})]}):n.length>0?m.jsx(m.Fragment,{children:m.jsx("div",{className:"appointments-grid",children:n.slice(0,3).map(k=>m.jsxs("div",{className:"appointment-card",children:[m.jsxs("div",{className:"appointment-header",children:[m.jsxs("div",{className:"appointment-header-left",children:[m.jsx("div",{className:"appointment-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("button",{className:"download-receipt-btn",onClick:()=>K(k),title:"Descargar comprobante",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17"})})})]}),m.jsx("span",{className:`appointment-status status-${k.status}`,children:T(k.status)})]}),m.jsxs("div",{className:"appointment-details",children:[m.jsxs("h3",{children:["Paciente: ",k.patientName||"Usuario"]}),m.jsxs("div",{className:"appointment-info",children:[m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:k.date})]}),m.jsxs("div",{className:"info-item",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m.jsx("span",{children:k.time})]})]}),k.reason&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Motivo:"})," ",k.reason]}),k.clinica&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Clnica:"})," ",w(k.clinica)]}),k.notas&&k.notas.trim()&&m.jsxs("p",{className:"appointment-reason",children:[m.jsx("strong",{children:"Notas:"})," ",k.notas]})]}),k.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>Z(k),title:"Editar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>C(k.id),title:"Cancelar cita",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]},k.id))})}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx(Jn,{to:"/cita",className:"cta-button",children:"Agendar Cita"})]})]}),m.jsxs("section",{className:"medical-history-section",children:[m.jsx("h2",{className:"section-title",children:"Historial Clnico"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tu Historial Mdico"}),m.jsx("p",{children:"Aqu podrs consultar tu historial clnico completo, incluyendo diagnsticos, tratamientos realizados y notas del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]}),m.jsxs("section",{className:"prescriptions-section",children:[m.jsx("h2",{className:"section-title",children:"Recetas"}),m.jsxs("div",{className:"content-card",children:[m.jsx("div",{className:"card-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),m.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),m.jsxs("div",{className:"card-content",children:[m.jsx("h3",{children:"Tus Recetas Mdicas"}),m.jsx("p",{children:"Accede a todas tus recetas mdicas, medicamentos prescritos y recomendaciones del doctor."}),m.jsx("button",{className:"secondary-button",disabled:!0,children:"Prximamente disponible"})]})]})]})]}),m.jsx(MT,{isOpen:l,onClose:()=>{c(!1),p(null)},onConfirm:P,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function yN(){const s=[{id:1,name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:[{type:"Celular",number:"+503 6987 7192",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2522 0893",whatsapp:!1}],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},{id:2,name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:[{type:"Celular",number:"+503 6052 5078",whatsapp:!0}],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},{id:3,name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:[{type:"Celular",number:"+503 7531 6018",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2221 6018",whatsapp:!1}],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},{id:4,name:"Clnica Dental OsDent",location:"Escaln",phones:[{type:"Celular",number:"+503 6822 9372",whatsapp:!0}],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},{id:5,name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:[{type:"Celular",number:"+503 6050 1327",whatsapp:!0},{type:"Telfono Fijo",number:"+503 2662 4230",whatsapp:!1}],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}];return m.jsx("div",{className:"contact-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"contact-header",children:[m.jsx("h1",{children:"Nuestras Ubicaciones"}),m.jsx("p",{children:"Encuentra la clnica ms cercana a ti. Estamos para servirte en mltiples ubicaciones."})]}),m.jsx("div",{className:"clinics-grid",children:s.map(e=>m.jsxs("div",{className:"clinic-card",children:[m.jsxs("div",{className:"clinic-header",children:[m.jsx("h2",{children:e.name}),m.jsx("span",{className:"location-tag",children:e.location})]}),m.jsxs("div",{className:"clinic-info",children:[m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Telfonos"]}),e.phones.map((n,r)=>m.jsxs("div",{className:"info-item",children:[m.jsxs("span",{className:"label",children:[n.type,":"]}),n.whatsapp?m.jsxs("a",{href:`https://wa.me/${n.number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"whatsapp-link",children:[n.number,m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})]}):m.jsx("span",{className:"value",children:n.number})]},r))]}),m.jsxs("div",{className:"info-section",children:[m.jsxs("h3",{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),"Direccin"]}),m.jsx("div",{className:"info-item",children:m.jsx("p",{className:"address",children:e.address})})]})]})]},e.id))})]})})}function _N({userData:s}){const[e,n]=re.useState(null),[r,l]=re.useState(!1),[c,f]=re.useState("");re.useEffect(()=>{if(s)n(s);else{const w=localStorage.getItem("userData");w&&n(JSON.parse(w))}},[s]);const p=w=>new Promise((C,P)=>{const K=new FileReader;K.onload=Z=>{const k=new Image;k.onload=()=>{const U=document.createElement("canvas"),oe=U.getContext("2d");let J=k.width,ie=k.height;const ee=800;J>ie?J>ee&&(ie=ie*ee/J,J=ee):ie>ee&&(J=J*ee/ie,ie=ee),U.width=J,U.height=ie,oe.drawImage(k,0,0,J,ie),U.toBlob(le=>{le?C(le):P(new Error("Error al comprimir la imagen"))},"image/jpeg",.8)},k.onerror=()=>P(new Error("Error al cargar la imagen")),k.src=Z.target.result},K.onerror=()=>P(new Error("Error al leer el archivo")),K.readAsDataURL(w)}),y=w=>{if(!w)return"No especificado";const[C,P,K]=w.split("-");return new Date(C,P-1,K).toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric"})},E=w=>({masculino:"Masculino",femenino:"Femenino",otro:"Otro"})[w]||w,T=async w=>{const C=w.target.files[0];if(!C)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(C.type)){f("Por favor, selecciona una imagen vlida (JPG, PNG o WEBP)");return}const K=5*1024*1024;if(C.size>K){f("La imagen debe ser menor a 5MB");return}l(!0),f("");const Z=Bi.currentUser;if(!Z){f("Debes estar autenticado para subir una foto"),l(!1);return}try{const k=await p(C),U=new File([k],C.name,{type:"image/jpeg",lastModified:Date.now()}),{photoURL:oe,error:J}=await xT(Z.uid,U);if(J){console.error("Upload error:",J);let ie="Error al subir la foto. Por favor, intenta de nuevo.";J.code==="storage/unauthorized"?ie="No tienes permisos para subir fotos. Contacta al administrador.":J.code==="storage/canceled"?ie="La subida fue cancelada.":J.code==="storage/unknown"&&(ie="Error desconocido. Verifica tu conexin a internet."),f(ie),l(!1);return}n(ie=>({...ie,photoURL:oe})),l(!1)}catch(k){console.error("Unexpected error:",k),f(k.message||"Error inesperado. Por favor, intenta de nuevo."),l(!1)}};return e?m.jsx("div",{className:"profile-page",children:m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"profile-header",children:[m.jsxs("div",{className:"profile-avatar-container",children:[m.jsx("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:T,style:{display:"none"}}),m.jsx("label",{htmlFor:"photo-upload",className:"profile-avatar",children:r?m.jsx("div",{className:"upload-spinner"}):e.photoURL?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:e.photoURL,alt:"Foto de perfil",className:"profile-photo"}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),m.jsx("div",{className:"photo-overlay",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),m.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})})]}),m.jsxs("div",{className:"profile-header-info",children:[m.jsxs("h1",{className:"profile-name",children:[e.nombres," ",e.apellidos]}),m.jsx("p",{className:"profile-email",children:e.email}),c&&m.jsx("p",{className:"upload-error",children:c})]})]}),m.jsxs("div",{className:"profile-sections",children:[m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Informacin Personal"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombres"}),m.jsx("p",{children:e.nombres||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("p",{children:e.apellidos||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("p",{children:y(e.fechaNacimiento)})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"DUI"}),m.jsx("p",{children:e.dui||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Gnero"}),m.jsx("p",{children:E(e.genero)})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),"Informacin de Contacto"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Correo Electrnico"}),m.jsx("p",{children:e.email||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.telefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Direccin"}),m.jsx("p",{children:e.direccion||"No especificado"})]})]})]}),m.jsxs("section",{className:"profile-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Contacto de Emergencia"]}),m.jsxs("div",{className:"info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Nombre"}),m.jsx("p",{children:e.emergenciaNombre||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Telfono"}),m.jsx("p",{children:e.emergenciaTelefono||"No especificado"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("label",{children:"Parentesco"}),m.jsx("p",{children:e.emergenciaParentesco||"No especificado"})]})]})]})]})]})}):m.jsx("div",{className:"profile-page",children:m.jsx("div",{className:"container",children:m.jsx("div",{className:"loading-state",children:m.jsx("p",{children:"Cargando perfil..."})})})})}function vN(){const s=Pm(),[e,n]=re.useState([]),[r,l]=re.useState(null),[c,f]=re.useState(!1),[p,y]=re.useState(null),[E,T]=re.useState(!0);re.useEffect(()=>{const U=Bi.currentUser;if(!U){T(!1);return}const oe=kp(U.uid,J=>{const ie=J.sort((ee,le)=>{const D=new Date(`${ee.date} ${ee.time}`);return new Date(`${le.date} ${le.time}`)-D});n(ie),T(!1)});return()=>oe()},[]);const w=U=>({programada:"Programada",terminada:"Terminada",cancelada:"Cancelada",perdida:"Perdida"})[U]||U,C=U=>({"santa-tecla":"Santa Tecla",soyapango:"Soyapango","san-martin":"San Martn",escalon:"Escaln",usulutan:"Usulutn"})[U]||U,P=U=>{l(r===U?null:U)},K=U=>{y(U),f(!0)},Z=async()=>{if(p)try{const{error:U}=await $h(p,"cancelada");U&&(console.error("Error cancelling appointment:",U),alert("Error al cancelar la cita. Por favor, intenta de nuevo.")),f(!1),y(null)}catch(U){console.error("Unexpected error:",U),alert("Ocurri un error inesperado. Por favor, intenta de nuevo."),f(!1),y(null)}},k=U=>{s("/cita",{state:{editingAppointment:U}})};return m.jsxs("div",{className:"appointments-list-page",children:[m.jsxs("div",{className:"container",children:[m.jsxs("div",{className:"page-header",children:[m.jsxs("button",{className:"back-button",onClick:()=>s("/"),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),m.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Volver"]}),m.jsx("h1",{className:"page-title",children:"Mis Citas"}),m.jsx("p",{className:"page-subtitle",children:"Todas tus citas programadas"})]}),e.length>0?m.jsx("div",{className:"appointments-list",children:e.map(U=>m.jsxs("div",{className:`appointment-list-item ${r===U.id?"expanded":""}`,children:[m.jsxs("div",{className:"appointment-summary",onClick:()=>P(U.id),children:[m.jsxs("div",{className:"summary-content",children:[m.jsxs("div",{className:"summary-date",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),m.jsx("span",{children:U.date})]}),m.jsx("div",{className:"summary-reason",children:U.reason||"Sin motivo especificado"}),m.jsx("span",{className:`summary-status status-${U.status}`,children:w(U.status)})]}),m.jsx("div",{className:"expand-icon",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),r===U.id&&m.jsxs("div",{className:"appointment-details",children:[m.jsxs("div",{className:"details-grid",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Paciente"}),m.jsx("p",{children:U.patientName||"Usuario"})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Hora"}),m.jsx("p",{children:U.time})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Clnica"}),m.jsx("p",{children:C(U.clinica)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("label",{children:"Motivo"}),m.jsx("p",{children:U.reason||"No especificado"})]}),U.notas&&U.notas.trim()&&m.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[m.jsx("label",{children:"Notas"}),m.jsx("p",{children:U.notas})]})]}),U.status==="programada"&&m.jsxs("div",{className:"appointment-actions",children:[m.jsxs("button",{className:"btn-action btn-edit",onClick:()=>k(U),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),m.jsxs("button",{className:"btn-action btn-cancel",onClick:()=>K(U.id),children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar"]})]})]})]},U.id))}):m.jsxs("div",{className:"empty-state",children:[m.jsx("div",{className:"empty-icon",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),m.jsx("h3",{children:"No tienes citas programadas"}),m.jsx("p",{children:"Agenda tu prxima cita con nosotros"}),m.jsx("button",{className:"cta-button",onClick:()=>s("/cita"),children:"Agendar Cita"})]})]}),m.jsx(MT,{isOpen:c,onClose:()=>{f(!1),y(null)},onConfirm:Z,title:"Cancelar Cita",message:"Ests seguro de que deseas cancelar esta cita? Esta accin no se puede deshacer."})]})}function EN(){const s=wh(),{appointment:e}=s.state||{},n={evaluacion:"Evaluacin",control:"Control de rutina",dolor:"Dolor en alguna pieza",endodoncia:"Endodoncia",limpieza:"Limpieza",rellenos:"Rellenos",cirugia:"Ciruga de cordal",otro:"Otro"},r={"santa-tecla":{name:"Clnica Dental Dr. Csar Vsquez",location:"Santa Tecla",phones:["+503 6987 7192","+503 2522 0893"],address:"Centro comercial Daniel Hernndez, nivel 2, local 12, Santa Tecla, La Libertad."},soyapango:{name:"Clnica Dental Dr. Csar Vsquez Soyapango",location:"Soyapango",phones:["+503 6052 5078"],address:"Plaza San Miguel, Local #43, nivel 2, Soyapango, San Salvador."},"san-martin":{name:"Clnica Dental Dr. Csar Vsquez San Martn",location:"San Martn",phones:["+503 7531 6018","+503 2221 6018"],address:"Plaza Tineca, local 10, Colonia San Luis, Calle Miguel Romn Pea, San Martn, San Salvador."},escalon:{name:"Clnica Dental OsDent",location:"Escaln",phones:["+503 6822 9372"],address:"79 av norte y paseo Gral Escaln, edificio 4104, local 7 y 8 segunda planta, San Salvador."},usulutan:{name:"Clnica Dental Dr. Csar Vsquez Usulutn",location:"Usulutn",phones:["+503 6050 1327","+503 2662 4230"],address:'Avenida Guandique 6 y 19 calle pte, Edificio "Las Margaritas" Nivel 1 Local #7 y #8. Ex Departamental del MINED, media cuadra debajo de la Escuela Basilio Blandn, Frente a Tab-2 Express'}};if(!e)return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card error",children:[m.jsx("h2",{children:"No se encontr informacin de la cita"}),m.jsx("p",{children:"Parece que has llegado aqu por error."}),m.jsx(Jn,{to:"/cita",className:"btn-primary",children:"Agendar Cita"})]})})});const l=async()=>{const p=await fetch("/COI/logo.png");if(!p.ok)throw new Error("No se pudo obtener el logo");const y=await p.blob();return await new Promise((E,T)=>{const w=new FileReader;w.onload=()=>E(w.result),w.onerror=T,w.readAsDataURL(y)})},c=async()=>{try{const f=new G0({orientation:"portrait",unit:"mm",format:"a4"}),p=210,y=20,E=p-y*2;let T=y;try{const le=await l(),D=new Image;await new Promise((x,M)=>{D.onload=x,D.onerror=M,D.src=le});const S=40,I=D.height*S/D.width,j=(p-S)/2;f.addImage(le,"PNG",j,T,S,I),T+=I+15}catch(le){console.warn("No se pudo cargar el logo:",le)}f.setFontSize(20),f.setFont("helvetica","bold"),f.setTextColor(0,0,0);const w="COMPROBANTE DE CITA",C=f.getTextWidth(w);f.text(w,(p-C)/2,T),T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10;const P=r[e.clinica]||{name:e.clinica,location:"",phones:[],address:""};if(f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Informacin de la Clnica",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal"),f.text(P.name||"Clnica Dental Dr. Csar Vsquez",y,T),T+=6,P.location&&(f.setFont("helvetica","italic"),f.text(`Ubicacin: ${P.location}`,y,T),T+=6),P.phones&&P.phones.length>0&&(f.setFont("helvetica","normal"),f.text(`Telfono: ${P.phones.join(" / ")}`,y,T),T+=6),P.address){f.setFont("helvetica","normal");const le=f.splitTextToSize(`Direccin: ${P.address}`,E);f.text(le,y,T),T+=le.length*6}T+=5,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(14),f.setFont("helvetica","bold"),f.text("Detalles de la Cita",y,T),T+=8,f.setFontSize(11),f.setFont("helvetica","normal");const K=n[e.motivo]||e.motivo;f.setFont("helvetica","bold"),f.text("Motivo:",y,T),f.setFont("helvetica","normal"),f.text(K,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Clnica:",y,T),f.setFont("helvetica","normal"),f.text(P.name||e.clinica,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Fecha:",y,T),f.setFont("helvetica","normal");const Z=new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(f.text(Z,y+30,T),T+=7,f.setFont("helvetica","bold"),f.text("Hora:",y,T),f.setFont("helvetica","normal"),f.text(e.hora,y+30,T),T+=7,e.notas&&e.notas.trim()){T+=3,f.setFont("helvetica","bold"),f.text("Notas adicionales:",y,T),T+=6,f.setFont("helvetica","normal");const le=f.splitTextToSize(e.notas,E);f.text(le,y,T),T+=le.length*6}T+=10,f.setDrawColor(200,200,200),f.line(y,T,p-y,T),T+=10,f.setFontSize(10),f.setFont("helvetica","italic"),f.setTextColor(100,100,100);const k=new Date().toLocaleDateString("es-SV",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});f.text(`Comprobante generado el: ${k}`,y,T),T+=6,f.text("Este comprobante es una confirmacin de tu solicitud de cita.",y,T),T+=6,f.text("Te contactaremos pronto para confirmar los detalles.",y,T);const U=f.output("arraybuffer"),oe=new Blob([U],{type:"application/pdf"}),J=URL.createObjectURL(oe),ie=document.createElement("a"),ee=`comprobante-cita-${e.fecha}.pdf`;ie.href=J,ie.setAttribute("href",J),ie.download=ee,ie.setAttribute("download",ee),ie.style.display="none",document.body.appendChild(ie),ie.click(),setTimeout(()=>{document.body.removeChild(ie),URL.revokeObjectURL(J)},1500)}catch(f){console.error("Error generating PDF:",f),alert("Hubo un error al generar el comprobante. Por favor intenta de nuevo.")}};return m.jsx("div",{className:"confirmation-page",children:m.jsx("div",{className:"container",children:m.jsxs("div",{className:"confirmation-card",children:[m.jsx("div",{className:"success-icon",children:m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("h1",{children:"Cita Agendada Exitosamente!"}),m.jsx("p",{className:"confirmation-message",children:"Hemos recibido tu solicitud. Te contactaremos pronto para confirmar los detalles."}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("h3",{children:"Detalles de la Cita"}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Motivo:"}),m.jsx("span",{className:"value",children:n[e.motivo]||e.motivo})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Clnica:"}),m.jsx("span",{className:"value",children:r[e.clinica]?.name||e.clinica})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Fecha:"}),m.jsx("span",{className:"value",children:new Date(e.fecha+"T00:00:00").toLocaleDateString("es-SV",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Hora:"}),m.jsx("span",{className:"value",children:e.hora})]}),e.notas&&m.jsxs("div",{className:"detail-row",children:[m.jsx("span",{className:"label",children:"Notas:"}),m.jsx("span",{className:"value",children:e.notas})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx(Jn,{to:"/",className:"btn-secondary",children:"Volver al Inicio"}),m.jsxs("button",{onClick:c,className:"btn-primary",children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"text-bottom"},children:m.jsx("path",{d:"M12 15L12 3M12 15L8 11M12 15L16 11M2 17L2 18C2 19.6569 3.34315 21 5 21L19 21C20.6569 21 22 19.6569 22 18L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Descargar Comprobante"]})]})]})})})}function TN({userData:s}){const e=Pm(),r=wh().state?.editingAppointment,l=!!r,[c,f]=re.useState({motivo:"",clinica:"",fecha:"",hora:"",notas:""}),[p,y]=re.useState({}),[E,T]=re.useState(!1),[w,C]=re.useState([]),[P,K]=re.useState(!1),[Z,k]=re.useState(!1),[U,oe]=re.useState("");re.useEffect(()=>{if(r){const M=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}].find(R=>R.label===r.reason)?.value||"";f({motivo:M,clinica:r.clinica||"",fecha:r.date||"",hora:r.time||"",notas:r.notas||""})}},[r]),re.useEffect(()=>{(async()=>{if(c.fecha&&c.clinica){K(!0);const M=l?r?.time:null,{availableSlots:R,error:Ce}=await OT(c.fecha,c.clinica,M);Ce?(console.error("Error loading available hours:",Ce),C(ee)):(C(R),c.hora&&!R.includes(c.hora)&&!l&&f(Fe=>({...Fe,hora:""}))),K(!1)}else C(ee)})()},[c.fecha,c.clinica,l,r?.time]);const J=[{value:"",label:"Selecciona un motivo"},{value:"evaluacion",label:"Evaluacin"},{value:"control",label:"Control de rutina"},{value:"dolor",label:"Dolor en alguna pieza"},{value:"endodoncia",label:"Endodoncia"},{value:"limpieza",label:"Limpieza"},{value:"rellenos",label:"Rellenos"},{value:"cirugia",label:"Ciruga de cordal"},{value:"otro",label:"Otro"}],ie=[{value:"",label:"Selecciona una clnica"},{value:"santa-tecla",label:"Santa Tecla"},{value:"soyapango",label:"Soyapango"},{value:"san-martin",label:"San Martn"},{value:"escalon",label:"Escaln"},{value:"usulutan",label:"Usulutn"}],ee=["7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM"],le=x=>{const{name:M,value:R}=x.target;f(Ce=>({...Ce,[M]:R})),p[M]&&y(Ce=>({...Ce,[M]:""}))},D=()=>{const x={};if(c.motivo||(x.motivo="Por favor selecciona el motivo de la cita"),c.clinica||(x.clinica="Por favor selecciona una clnica"),!c.fecha)x.fecha="Por favor selecciona una fecha";else{const M=new Date(c.fecha+"T00:00:00"),R=new Date;R.setHours(0,0,0,0),M<R?x.fecha="La fecha no puede ser en el pasado":M.getTime()===R.getTime()&&(x.fecha="No se pueden agendar citas para el da de hoy"),M.getDay()===0&&(x.fecha="No se pueden agendar citas los domingos")}return c.hora||(x.hora="Por favor selecciona una hora"),x},S=async x=>{x.preventDefault();const M=D();if(Object.keys(M).length>0){y(M);return}T(!0);try{const R=Bi.currentUser;if(!R){y({general:"Debes iniciar sesin para agendar una cita"}),T(!1);return}const Ce=s?`${s.nombres||""} ${s.apellidos||""}`.trim():"Paciente",Fe=J.find(ve=>ve.value===c.motivo)?.label||c.motivo;if(!l){const{count:ve,error:Re}=await NT(R.uid);if(Re){console.error("Error checking appointment limit:",Re),y({general:"Error al verificar tus citas. Por favor, intenta de nuevo."}),T(!1);return}if(ve>=2){y({general:"Ya tienes 2 citas programadas. Debes cancelar o completar una cita existente antes de agendar una nueva."}),T(!1);return}}const Q=l?r.id:null,{hasAppointment:ne,error:he}=await DT(R.uid,c.fecha,Q);if(he){console.error("Error checking appointment on date:",he),y({general:"Error al verificar disponibilidad. Por favor, intenta de nuevo."}),T(!1);return}if(ne){y({general:"Ya tienes una cita programada para este da. No puedes agendar ms de una cita por da."}),T(!1);return}if(l){const ve={date:c.fecha,time:c.hora,reason:Fe,clinica:c.clinica,notas:c.notas},{error:Re}=await Lp(r.id,ve);if(Re){console.error("Error updating appointment:",Re),y({general:"Error al actualizar la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/",{state:{message:"Cita actualizada exitosamente"}})}else{const ve={patientName:Ce,date:c.fecha,time:c.hora,reason:Fe,clinica:c.clinica,notas:c.notas,status:"programada"},{appointmentId:Re,error:Ke}=await IT(R.uid,ve);if(Ke){console.error("Error creating appointment:",Ke),y({general:"Error al crear la cita. Por favor, intenta de nuevo."}),T(!1);return}e("/cita-confirmada",{state:{appointment:c}})}}catch(R){console.error("Unexpected error:",R),y({general:"Ocurri un error inesperado. Por favor, intenta de nuevo."}),T(!1)}},I=new Date;I.setDate(I.getDate()+1);const j=I.toISOString().split("T")[0];return m.jsxs("div",{className:"appointment-form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:l?"Editar Cita":"Agenda tu Cita"}),m.jsx("p",{children:l?"Modifica los datos de tu cita y guarda los cambios":"Completa el formulario y te notificaremos va correo electrnico o celular para confirmar tu cita"})]}),m.jsxs("form",{onSubmit:S,className:"appointment-form",noValidate:!0,children:[m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Informacin de la Cita"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"motivo",children:["Motivo de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"motivo",name:"motivo",value:c.motivo,onChange:le,className:`${p.motivo?"error":""} ${c.motivo?"":"placeholder"}`,children:J.map(x=>m.jsx("option",{value:x.value,children:x.label},x.value))}),p.motivo&&m.jsxs("span",{className:"error-message",children:[" ",p.motivo]})]})}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"clinica",children:["Clnica de preferencia ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("select",{id:"clinica",name:"clinica",value:c.clinica,onChange:le,className:`${p.clinica?"error":""} ${c.clinica?"":"placeholder"}`,children:ie.map(x=>m.jsx("option",{value:x.value,children:x.label},x.value))}),p.clinica&&m.jsxs("span",{className:"error-message",children:[" ",p.clinica]})]})}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"fecha",children:["Fecha de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsx("input",{type:"text",id:"fecha",name:"fecha",value:c.fecha,onChange:le,onFocus:x=>{x.target.type="date",x.target.showPicker&&x.target.showPicker()},onBlur:x=>{x.target.value||(x.target.type="text")},placeholder:"Selecciona una fecha",min:j,className:p.fecha?"error":""}),p.fecha&&m.jsxs("span",{className:"error-message",children:[" ",p.fecha]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{htmlFor:"hora",children:["Hora de la cita ",m.jsx("span",{className:"required",children:"*"})]}),m.jsxs("select",{id:"hora",name:"hora",value:c.hora,onChange:le,className:`${p.hora?"error":""} ${c.hora?"":"placeholder"}`,disabled:P,onMouseDown:x=>{(!c.fecha||!c.clinica)&&(x.preventDefault(),oe("Por favor, selecciona una clnica y una fecha antes de elegir la hora."),k(!0))},children:[m.jsx("option",{value:"",children:P?"Cargando horas disponibles...":!c.fecha||!c.clinica?"Selecciona una hora":w.length===0?"No hay horas disponibles":"Selecciona una hora"}),w.map(x=>m.jsx("option",{value:x,children:x},x))]}),p.hora&&m.jsxs("span",{className:"error-message",children:[" ",p.hora]}),c.fecha&&c.clinica&&!P&&w.length===0&&m.jsx("span",{className:"info-message",style:{color:"#0066cc",fontSize:"0.9rem",marginTop:"0.25rem",display:"block"},children:" Todas las horas estn ocupadas para esta fecha. Por favor, selecciona otro da."})]})]})]}),m.jsxs("div",{className:"form-section",children:[m.jsx("h3",{children:"Notas Adicionales"}),m.jsx("div",{className:"form-row",children:m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"notas",children:"Informacin adicional (opcional)"}),m.jsx("textarea",{id:"notas",name:"notas",value:c.notas,onChange:le,placeholder:"Informacin adicional que consideres importante...",rows:"4"})]})})]}),p.general&&m.jsxs("div",{className:"error-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fee",borderRadius:"8px",color:"#c00"},children:[" ",p.general]}),m.jsx("button",{type:"submit",className:"btn btn-primary btn-submit",disabled:E,children:E?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"spinner"}),"Procesando..."]}):l?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"17 21 17 13 7 13 7 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("polyline",{points:"7 3 7 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Guardar Cambios"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Agendar Cita"]})})]}),Z&&m.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:m.jsxs("div",{className:"modal-content error-modal",onClick:x=>x.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Atencin"}),m.jsx("p",{className:"modal-message",children:U}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>k(!1),children:"Entendido"})})]})})]})}function bN(){return m.jsx("a",{href:"https://wa.me/50369877192",className:"whatsapp-float",target:"_blank",rel:"noopener noreferrer","aria-label":"Chat on WhatsApp",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}const AN=({onLogin:s})=>{const[e,n]=re.useState(!0),[r,l]=re.useState(1),[c,f]=re.useState(""),[p,y]=re.useState({}),[E,T]=re.useState(!1),[w,C]=re.useState(!1),[P,K]=re.useState(""),[Z,k]=re.useState(""),[U,oe]=re.useState(!1),[J,ie]=re.useState(!1),[ee,le]=re.useState(""),[D,S]=re.useState(""),[I,j]=re.useState(""),[x,M]=re.useState(""),[R,Ce]=re.useState(""),[Fe,Q]=re.useState(""),[ne,he]=re.useState(""),[ve,Re]=re.useState(""),[Ke,Le]=re.useState(""),[we,tt]=re.useState(""),[vt,sn]=re.useState(""),[Cn,ri]=re.useState(""),[Zt,Sr]=re.useState(""),[Bn,ws]=re.useState(""),[ai,mn]=re.useState("primera-vez"),[oi,Gi]=re.useState(!1),[li,Rr]=re.useState(!1),[ht,Et]=re.useState(!1),ft=(ce,ge)=>{ge&&y(Ut=>({...Ut,[ce]:""}))},Co=async ce=>{ce.preventDefault(),f(""),y({}),T(!0);try{if(e){if(!D||!I){f("Por favor, completa todos los campos."),T(!1);return}const{user:ge,error:Ut}=await AT(D,I);if(Ut){Ut.code==="auth/email-not-verified"?f("Por favor, verifica tu correo electrnico antes de iniciar sesin. Revisa tu bandeja de entrada."):Ut.code==="auth/user-not-found"?f("No existe una cuenta con este correo."):Ut.code==="auth/wrong-password"?f("Contrasea incorrecta."):Ut.code==="auth/invalid-credential"?f("Correo o contrasea incorrectos."):f(Ut.message||"Error al iniciar sesin."),T(!1);return}ge&&s(ge)}else if(r===1){const ge={};if(D||(ge.email="Ingresa tu correo electrnico"),I||(ge.password="Crea una contrasea"),x||(ge.confirmPassword="Confirma tu contrasea"),Object.keys(ge).length>0){y(ge),le("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}if(I.length<6){y({password:"La contrasea debe tener al menos 6 caracteres"}),le("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}if(I!==x){y({confirmPassword:"Las contraseas no coinciden"}),le("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}l(2),T(!1)}else{const ge={};if(R||(ge.nombres="Ingresa tus nombres"),Fe||(ge.apellidos="Ingresa tus apellidos"),ne||(ge.fechaNacimiento="Selecciona tu fecha de nacimiento"),ve||(ge.dui="Ingresa tu nmero de DUI"),Ke||(ge.genero="Selecciona tu gnero"),we||(ge.direccion="Ingresa tu direccin completa"),vt||(ge.telefono="Ingresa tu nmero de telfono"),Cn||(ge.emergenciaNombre="Ingresa el nombre del contacto"),Zt||(ge.emergenciaTelefono="Ingresa el telfono del contacto"),Bn||(ge.emergenciaParentesco="Selecciona el parentesco"),ne){const Jt=new Date(ne),dt=new Date;let en=dt.getFullYear()-Jt.getFullYear();const st=dt.getMonth()-Jt.getMonth();(st<0||st===0&&dt.getDate()<Jt.getDate())&&en--,en<18&&(ge.fechaNacimiento="Debes tener al menos 18 aos para registrarte")}if(vt&&vt.length!==8&&(ge.telefono="El telfono debe tener exactamente 8 dgitos"),Zt&&Zt.length!==8&&(ge.emergenciaTelefono="El telfono debe tener exactamente 8 dgitos"),ve&&ve.length!==10&&(ge.dui="El DUI debe tener el formato completo (########-#)"),Object.keys(ge).length>0){y(ge),le("Por favor, revisa los campos marcados en rojo."),ie(!0),T(!1);return}const Ut={nombres:R,apellidos:Fe,fechaNacimiento:ne,dui:ve,genero:Ke,direccion:we,telefono:vt,emergenciaNombre:Cn,emergenciaTelefono:Zt,emergenciaParentesco:Bn,tipoPaciente:ai};console.log("Setting justRegistered flag BEFORE signUp"),sessionStorage.setItem("justRegistered","true"),console.log("Flag set:",sessionStorage.getItem("justRegistered"));const{user:Ki,error:Rs}=await bT(D,I,Ut);if(Rs){sessionStorage.removeItem("justRegistered"),Rs.code==="auth/email-already-in-use"?f("Este correo ya est registrado."):f(Rs.message||"Error al registrar usuario."),T(!1);return}f(""),oe(!0)}}catch(ge){console.error("Error:",ge),f("Ocurri un error inesperado. Por favor, intenta de nuevo."),T(!1)}},Cr=async()=>{oe(!1),sessionStorage.removeItem("justRegistered");const{signOut:ce}=await Q0(async()=>{const{signOut:ge}=await Promise.resolve().then(()=>hN);return{signOut:ge}},void 0);await ce(),n(!0),l(1),S(""),j(""),M(""),window.scrollTo(0,0)},jt=ce=>{n(ce),f(""),y({}),l(1)},Qi=async ce=>{if(ce.preventDefault(),k(""),!P){k("Por favor, ingresa tu correo electrnico.");return}T(!0);const{error:ge}=await ST(P);T(!1),ge?k("Error al enviar el correo de recuperacin."):(k("Correo enviado! Revisa tu bandeja de entrada."),setTimeout(()=>{C(!1),K(""),k("")},3e3))},xr=ce=>{let ge=ce.target.value.replace(/\D/g,"");ge.length>9&&(ge=ge.slice(0,9)),ge.length>8&&(ge=ge.slice(0,8)+"-"+ge.slice(8,9)),Re(ge),ft("dui",ge)},Ss=(ce,ge)=>Ut=>{const Ki=Ut.target.value.replace(/\D/g,"");Ki.length<=8&&(ce(Ki),ft(ge,Ki))};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:`login-card ${!e&&r===2?"wide":""}`,children:[m.jsx("div",{className:"login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"login-logo"})}),r===1&&m.jsxs("div",{className:"auth-tabs",children:[m.jsx("button",{className:`auth-tab ${e?"active":""}`,onClick:()=>jt(!0),children:"INICIAR SESIN"}),m.jsx("button",{className:`auth-tab ${e?"":"active"}`,onClick:()=>jt(!1),children:"REGISTRARSE"})]}),m.jsxs("form",{onSubmit:Co,className:"login-form",noValidate:!0,children:[(e||r===1)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:D,onChange:ce=>{S(ce.target.value),ft("email",ce.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsxs("div",{className:"password-input-wrapper",children:[m.jsx("input",{type:oi?"text":"password",id:"password",value:I,onChange:ce=>{j(ce.target.value),ft("password",ce.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),m.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Gi(!oi),"aria-label":oi?"Ocultar contrasea":"Mostrar contrasea",children:oi?m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),m.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),!e&&m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea"}),m.jsxs("div",{className:"password-input-wrapper",children:[m.jsx("input",{type:li?"text":"password",id:"confirmPassword",value:x,onChange:ce=>{M(ce.target.value),ft("confirmPassword",ce.target.value)},placeholder:"",className:p.confirmPassword?"input-error":"",required:!0}),m.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Rr(!li),"aria-label":li?"Ocultar contrasea":"Mostrar contrasea",children:li?m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),m.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),p.confirmPassword&&m.jsx("span",{className:"field-error-message",children:p.confirmPassword})]})]}),!e&&r===2&&m.jsxs("div",{className:"registration-step-2",children:[m.jsx("h3",{children:"Datos Personales"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombres"}),m.jsx("input",{type:"text",value:R,onChange:ce=>{Ce(ce.target.value),ft("nombres",ce.target.value)},className:p.nombres?"input-error":"",required:!0}),p.nombres&&m.jsx("span",{className:"field-error-message",children:p.nombres})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Apellidos"}),m.jsx("input",{type:"text",value:Fe,onChange:ce=>{Q(ce.target.value),ft("apellidos",ce.target.value)},className:p.apellidos?"input-error":"",required:!0}),p.apellidos&&m.jsx("span",{className:"field-error-message",children:p.apellidos})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Fecha de Nacimiento"}),m.jsx("input",{type:"date",value:ne,onChange:ce=>{he(ce.target.value),ft("fechaNacimiento",ce.target.value)},className:p.fechaNacimiento?"input-error":"",required:!0}),p.fechaNacimiento&&m.jsx("span",{className:"field-error-message",children:p.fechaNacimiento})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"DUI"}),m.jsx("input",{type:"text",value:ve,onChange:xr,placeholder:"00000000-0",maxLength:"10",className:p.dui?"input-error":"",required:!0}),p.dui&&m.jsx("span",{className:"field-error-message",children:p.dui})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gnero"}),m.jsxs("select",{value:Ke,onChange:ce=>{Le(ce.target.value),ft("genero",ce.target.value)},required:!0,className:`${Ke?"":"placeholder-selected"} ${p.genero?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Masculino",children:"Masculino"}),m.jsx("option",{value:"Femenino",children:"Femenino"})]}),p.genero&&m.jsx("span",{className:"field-error-message",children:p.genero})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Direccin"}),m.jsx("input",{type:"text",value:we,onChange:ce=>{tt(ce.target.value),ft("direccion",ce.target.value)},className:p.direccion?"input-error":"",required:!0}),p.direccion&&m.jsx("span",{className:"field-error-message",children:p.direccion})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:vt,onChange:Ss(sn,"telefono"),placeholder:"00000000",maxLength:"8",className:p.telefono?"input-error":"",required:!0}),p.telefono&&m.jsx("span",{className:"field-error-message",children:p.telefono})]}),m.jsx("div",{className:"divider"}),m.jsx("h3",{children:"Contacto de Emergencia"}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Nombre Completo"}),m.jsx("input",{type:"text",value:Cn,onChange:ce=>{ri(ce.target.value),ft("emergenciaNombre",ce.target.value)},className:p.emergenciaNombre?"input-error":"",required:!0}),p.emergenciaNombre&&m.jsx("span",{className:"field-error-message",children:p.emergenciaNombre})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Telfono"}),m.jsx("input",{type:"tel",value:Zt,onChange:Ss(Sr,"emergenciaTelefono"),maxLength:"8",className:p.emergenciaTelefono?"input-error":"",required:!0}),p.emergenciaTelefono&&m.jsx("span",{className:"field-error-message",children:p.emergenciaTelefono})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Parentesco"}),m.jsxs("select",{value:Bn,onChange:ce=>{ws(ce.target.value),ft("emergenciaParentesco",ce.target.value)},required:!0,className:`${Bn?"":"placeholder-selected"} ${p.emergenciaParentesco?"input-error":""}`,children:[m.jsx("option",{value:"",children:"Seleccione una opcin"}),m.jsx("option",{value:"Esposo(a) / Cnyuge",children:"Esposo(a) / Cnyuge"}),m.jsx("option",{value:"Padre / Madre",children:"Padre / Madre"}),m.jsx("option",{value:"Hijo / Hija",children:"Hijo / Hija"}),m.jsx("option",{value:"Hermano / Hermana",children:"Hermano / Hermana"}),m.jsx("option",{value:"Abuelo / Abuela",children:"Abuelo / Abuela"}),m.jsx("option",{value:"Nieto / Nieta",children:"Nieto / Nieta"}),m.jsx("option",{value:"Tutor Legal",children:"Tutor Legal"}),m.jsx("option",{value:"Apoderado de Salud",children:"Apoderado de Salud"}),m.jsx("option",{value:"To / Ta",children:"To / Ta"}),m.jsx("option",{value:"Sobrino / Sobrina",children:"Sobrino / Sobrina"}),m.jsx("option",{value:"Primo / Prima",children:"Primo / Prima"}),m.jsx("option",{value:"Amigo / Amiga",children:"Amigo / Amiga"})]}),p.emergenciaParentesco&&m.jsx("span",{className:"field-error-message",children:p.emergenciaParentesco})]}),m.jsx("div",{className:"divider"}),m.jsxs("div",{className:"form-group radio-group",children:[m.jsx("label",{children:"Es primera vez o paciente recurrente?"}),m.jsxs("div",{className:"radio-options",children:[m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"primera-vez",checked:ai==="primera-vez",onChange:ce=>mn(ce.target.value)}),"Primera vez"]}),m.jsxs("label",{className:"radio-label",children:[m.jsx("input",{type:"radio",name:"tipoPaciente",value:"recurrente",checked:ai==="recurrente",onChange:ce=>mn(ce.target.value)}),"Recurrente"]})]})]})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsxs("div",{className:"button-group",children:[!e&&r===2&&m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>l(1),children:"Atrs"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Cargando...":e?"Ingresar":r===1?"Siguiente":"Finalizar Registro"})]}),e&&m.jsx("div",{className:"forgot-password",children:m.jsx("a",{href:"#",onClick:ce=>{ce.preventDefault(),C(!0)},children:"Olvidaste tu contrasea?"})})]}),w&&m.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:m.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{children:"Recuperar Contrasea"}),m.jsx("p",{children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),m.jsxs("form",{onSubmit:Qi,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"resetEmail",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"resetEmail",value:P,onChange:ce=>K(ce.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),Z&&m.jsx("p",{className:Z.includes("Error")?"error-message":"success-message",children:Z}),m.jsxs("div",{className:"button-group",children:[m.jsx("button",{type:"button",className:"login-button secondary",onClick:()=>C(!1),children:"Cancelar"}),m.jsx("button",{type:"submit",className:"login-button",disabled:E,children:E?"Enviando...":"Enviar"})]})]})]})}),U&&m.jsx("div",{className:"modal-overlay",onClick:Cr,children:m.jsxs("div",{className:"modal-content success-modal",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Registro exitoso!"}),m.jsx("p",{className:"modal-message",children:"Hemos enviado un correo de verificacin a tu direccin de email. Por favor, verifica tu correo antes de iniciar sesin."}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Cr,children:"Aceptar"})})]})}),J&&m.jsx("div",{className:"modal-overlay",onClick:()=>ie(!1),children:m.jsxs("div",{className:"modal-content error-modal",onClick:ce=>ce.stopPropagation(),children:[m.jsx("h3",{className:"modal-title",children:"Error en el formulario"}),m.jsx("p",{className:"modal-message",children:ee}),m.jsx("div",{className:"modal-actions",children:m.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>ie(!1),children:"Aceptar"})})]})})]})})},wN=({onLogin:s})=>{const[e,n]=re.useState(""),[r,l]=re.useState(""),[c,f]=re.useState(""),[p,y]=re.useState({}),E=[{email:"admin@clinica.com",password:"admin123",type:"admin",nombre:"Mara Gonzlez",cargo:"Administradora"},{email:"doctor@clinica.com",password:"doctor123",type:"doctor",nombre:"Dr. Csar Vsquez",cargo:"Odontlogo"}],T=(C,P)=>{P&&y(K=>({...K,[C]:""}))},w=C=>{C.preventDefault(),f(""),y({});const P={};if(e||(P.email="Ingresa tu correo electrnico"),r||(P.password="Ingresa tu contrasea"),Object.keys(P).length>0){y(P);return}const K=E.find(Z=>Z.email===e&&Z.password===r);K?s(e,r,null,K.type,{nombre:K.nombre,cargo:K.cargo}):f("Credenciales incorrectas. Verifica tu correo y contrasea.")};return m.jsx("div",{className:"staff-login-container",children:m.jsxs("div",{className:"staff-login-card",children:[m.jsx("div",{className:"staff-login-header",children:m.jsx("img",{src:"/COI/logo.webp",alt:"Clnica Dental Dr. Cesar Vsquez",className:"staff-login-logo"})}),m.jsxs("form",{onSubmit:w,className:"staff-login-form",noValidate:!0,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Correo Electrnico"}),m.jsx("input",{type:"email",id:"email",value:e,onChange:C=>{n(C.target.value),T("email",C.target.value)},placeholder:"ejemplo@correo.com",className:p.email?"input-error":"",required:!0}),p.email&&m.jsx("span",{className:"field-error-message",children:p.email})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Contrasea"}),m.jsx("input",{type:"password",id:"password",value:r,onChange:C=>{l(C.target.value),T("password",C.target.value)},placeholder:"",className:p.password?"input-error":"",required:!0}),p.password&&m.jsx("span",{className:"field-error-message",children:p.password})]}),c&&m.jsx("p",{className:"error-message",children:c}),m.jsx("button",{type:"submit",className:"staff-login-button",children:"Ingresar"}),m.jsx("div",{className:"staff-login-info",children:m.jsxs("p",{className:"info-text",children:[m.jsx("strong",{children:"Usuarios de prueba:"}),m.jsx("br",{}),"Admin: admin@clinica.com / admin123",m.jsx("br",{}),"Doctor: doctor@clinica.com / doctor123"]})})]})]})})},SN=({userType:s,userData:e})=>{const n=s==="admin",r=s==="doctor";return m.jsxs("div",{className:"staff-dashboard",children:[m.jsxs("div",{className:"dashboard-header",children:[m.jsxs("h1",{children:[n&&" Panel Administrativo",r&&" Panel Mdico"]}),m.jsxs("p",{className:"welcome-message",children:["Bienvenido(a), ",m.jsx("strong",{children:e?.nombre||"Usuario"})]})]}),m.jsxs("div",{className:"dashboard-content",children:[n&&m.jsxs("div",{className:"admin-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Gestin de Citas"}),m.jsx("p",{children:"Administra todas las citas programadas"}),m.jsx("button",{className:"card-button",children:"Ver Citas"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Pacientes"}),m.jsx("p",{children:"Gestiona la base de datos de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Pacientes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Reportes"}),m.jsx("p",{children:"Consulta estadsticas y reportes"}),m.jsx("button",{className:"card-button",children:"Ver Reportes"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Configuracin"}),m.jsx("p",{children:"Ajustes del sistema y usuarios"}),m.jsx("button",{className:"card-button",children:"Configurar"})]})]}),m.jsxs("div",{className:"recent-activity",children:[m.jsx("h2",{children:"Actividad Reciente"}),m.jsxs("div",{className:"activity-list",children:[m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 5 min"}),m.jsx("span",{className:"activity-text",children:"Nueva cita programada - Juan Prez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 15 min"}),m.jsx("span",{className:"activity-text",children:"Cita cancelada - Mara Lpez"})]}),m.jsxs("div",{className:"activity-item",children:[m.jsx("span",{className:"activity-time",children:"Hace 1 hora"}),m.jsx("span",{className:"activity-text",children:"Nuevo paciente registrado - Carlos Gmez"})]})]})]})]}),r&&m.jsxs("div",{className:"doctor-view",children:[m.jsxs("div",{className:"dashboard-grid",children:[m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Citas del Da"}),m.jsx("p",{children:"Revisa tu agenda de hoy"}),m.jsx("button",{className:"card-button",children:"Ver Agenda"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Historial Clnico"}),m.jsx("p",{children:"Consulta historiales de pacientes"}),m.jsx("button",{className:"card-button",children:"Ver Historiales"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Notas Mdicas"}),m.jsx("p",{children:"Registra diagnsticos y tratamientos"}),m.jsx("button",{className:"card-button",children:"Nueva Nota"})]}),m.jsxs("div",{className:"dashboard-card",children:[m.jsx("div",{className:"card-icon",children:""}),m.jsx("h3",{children:"Recetas"}),m.jsx("p",{children:"Gestiona prescripciones mdicas"}),m.jsx("button",{className:"card-button",children:"Ver Recetas"})]})]}),m.jsxs("div",{className:"today-appointments",children:[m.jsx("h2",{children:"Citas de Hoy"}),m.jsxs("div",{className:"appointments-list",children:[m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"09:00 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Ana Martnez"}),m.jsx("span",{children:"Limpieza dental"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"10:30 AM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Roberto Silva"}),m.jsx("span",{children:"Extraccin de muela"})]})]}),m.jsxs("div",{className:"appointment-item",children:[m.jsx("span",{className:"appointment-time",children:"02:00 PM"}),m.jsxs("div",{className:"appointment-details",children:[m.jsx("strong",{children:"Laura Hernndez"}),m.jsx("span",{children:"Consulta general"})]})]})]})]})]})]})]})};function RN(){const{pathname:s}=wh();return re.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function CN({isAuthenticated:s,userType:e,userData:n,handleLogin:r,handleLogout:l,isStaff:c,isLoading:f}){const p=wh(),y=p.pathname==="/staff/login"||p.pathname==="/staff/dashboard";return f?m.jsx("div",{className:"loading-container",children:m.jsx("div",{className:"loading-spinner"})}):m.jsxs(m.Fragment,{children:[s&&m.jsx(fN,{onLogout:l,userData:n,userType:e}),m.jsx("main",{className:"main-content",children:m.jsxs(db,{children:[m.jsx(ds,{path:"/staff/login",element:s?m.jsx(ku,{to:c?"/staff/dashboard":"/",replace:!0}):m.jsx(wN,{onLogin:r})}),m.jsx(ds,{path:"/",element:s?e==="patient"?m.jsx(gN,{userData:n}):m.jsx(ku,{to:"/staff/dashboard",replace:!0}):m.jsx(AN,{onLogin:r})}),m.jsx(ds,{path:"/staff/dashboard",element:s&&c?m.jsx(SN,{userType:e,userData:n}):m.jsx(ku,{to:s?"/":"/staff/login",replace:!0})}),s&&e==="patient"&&m.jsxs(m.Fragment,{children:[m.jsx(ds,{path:"/cita",element:m.jsx("div",{className:"container",children:m.jsx(TN,{userData:n})})}),m.jsx(ds,{path:"/contacto",element:m.jsx(yN,{})}),m.jsx(ds,{path:"/perfil",element:m.jsx(_N,{userData:n})}),m.jsx(ds,{path:"/mis-citas",element:m.jsx(vN,{})}),m.jsx(ds,{path:"/cita-confirmada",element:m.jsx(EN,{})})]}),m.jsx(ds,{path:"*",element:m.jsx(ku,{to:s&&c?"/staff/dashboard":"/",replace:!0})})]})}),s&&e==="patient"&&m.jsx(bN,{}),!y&&m.jsx(dN,{})]})}function xN(){const[s,e]=re.useState(!1),[n,r]=re.useState(null),[l,c]=re.useState(null),[f,p]=re.useState(!0);re.useEffect(()=>{const w=CT(async K=>{if(console.log("Auth state changed, user:",K?.email),K){const Z=sessionStorage.getItem("justRegistered");if(console.log("justRegistered flag:",Z),Z==="true"){console.log("User just registered, skipping auto-login"),p(!1);return}let k=3,U=null,oe=null;for(;k>0&&!U;){const J=await Lm(K.uid);U=J.profile,oe=J.error,!U&&k>1&&(console.log(`Failed to load profile, retrying... (${k-1} attempts left)`),await new Promise(ie=>setTimeout(ie,1e3))),k--}U?(r(U),c("patient"),e(!0),p(!1)):(console.error("Failed to load profile after retries:",oe),e(!1),r(null),c(null),p(!1))}else e(!1),r(null),c(null),p(!1)}),C=async()=>{const{markOverdueAppointmentsAsLost:K}=await Q0(async()=>{const{markOverdueAppointmentsAsLost:Z}=await Promise.resolve().then(()=>pN);return{markOverdueAppointmentsAsLost:Z}},void 0);await K()};C();const P=setInterval(C,6e4);return()=>{w(),clearInterval(P)}},[]);const y=async w=>{const{profile:C,error:P}=await Lm(w.uid);C?(r(C),c("patient"),e(!0)):console.error("Failed to load profile:",P)},E=async()=>{await wT(),e(!1),r(null),c(null)},T=l==="admin"||l==="doctor";return m.jsxs(fb,{basename:"/COI/",children:[m.jsx(RN,{}),m.jsx("div",{className:"app",children:m.jsx(CN,{isAuthenticated:s,userType:l,userData:n,handleLogin:y,handleLogout:E,isStaff:T,isLoading:f})})]})}Eb.createRoot(document.getElementById("root")).render(m.jsx(re.StrictMode,{children:m.jsx(xN,{})}));
